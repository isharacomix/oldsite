{"columns":80,"typescript":"Script started on Wed 08 Jan 2014 09:58:45 PM EST\n\u001b]0;isharacomix@beatrix: ~\u0007isharacomix@beatrix:~$ e\b\u001b[K\u0007cd Documents/open-tactics/\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ls\r\nLICENSE  README.md  \u001b[0m\u001b[01;34mcode\u001b[0m  \u001b[01;34mdocs\u001b[0m  \u001b[01;32mopen-tactics.py\u001b[0m\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ emacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[H\u001b[2J\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[H\u001b[2J\u001b[23d\u001b[?25l\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Fundamental) ---------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lLoading 00debian-vars...\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;25H\u001b[?25ldone\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;9H\u001b[?25l/etc/emacs/site-start.d/50autoconf.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;58H\u001b[?25ldone\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;35H\u001b[?25ldictionaries-common.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;9H\u001b[?25ldebian-ispell...\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;9H\u001b[?25l/var/cache/dictionaries-common/emacsen-ispell-default.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25le\u001b[K\u001b[H\u001b[7mFile Edit Options Buffers Tools Help                                            \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Fundamental) ---------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\nLoading /var/cache/dictionaries-common/emacsen-ispell-default.el (source)...don\\\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[A\t\u001b[?25ldebian-ispell...done\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;9H\u001b[?25l/var/cache/dictionaries-common/emacsen-ispell-dicts.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;75H\u001b[?25ldone\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;10H\u001b[?25letc/emacs/site-start.d/50dictionaries-common\u001b[6P\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[>0c\u001b[24d\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Lisp-Interaction Help                           \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Lisp Interaction) ----------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\nLoading /etc/emacs/site-start.d/50dictionaries-common.el (source)...done\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;23r\u001b[22;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[?25lFor information about GNU Emacs and the GNU system, type C-h C-a.\u001b[22;1H\u001b[K\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lFor information about GNU Emacs and the GNU system, type C-h C-a.\u001b[K\u001b[H\u001b[7mFile Edit Options Buffers Tools Help                                            \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\nWelcome to GNU Emacs, one component of the GNU/Linux operating system.\u001b[K\r\n\u001b[K\nGet help           C-h  (Hold down CTRL and press h)\u001b[K\r\n\u001b[4m\u001b[34mEmacs manual\u001b[0m\u001b[39;49m       C-h r        \u001b[4m\u001b[34mBrowse manuals\u001b[0m\u001b[39;49m     C-h i\u001b[K\r\n\u001b[4m\u001b[34mEmacs tutorial\u001b[0m\u001b[39;49m     C-h t        Undo changes       C-x u\u001b[K\r\n\u001b[4m\u001b[34mBuy manuals\u001b[0m\u001b[39;49m        C-h RET      Exit Emacs         C-x C-c\u001b[K\r\n\u001b[4m\u001b[34mActivate menubar\u001b[0m\u001b[39;49m   M-`\u001b[K\r\n(`C-' means use the CTRL key.  `M-' means use the Meta (or Alt) key.\u001b[K\r\nIf you have no Meta key, you may instead type ESC followed by the character.)\u001b[K\r\nUseful tasks:\u001b[K\r\n\u001b[4m\u001b[34mVisit New File\u001b[0m\u001b[39;49m                  \u001b[4m\u001b[34mOpen Home Directory\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[4m\u001b[34mCustomize Startup\u001b[0m\u001b[39;49m               \u001b[4m\u001b[34mOpen *scratch* buffer\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\nGNU Emacs 24.3.1 (i686-pc-linux-gnu)\u001b[K\r\n of 2013-07-26 on komainu, modified by Debian\u001b[K\r\nCopyright (C) 2013 Free Software Foundation, Inc.\u001b[K\r\n\u001b[K\nGNU Emacs comes with ABSOLUTELY NO WARRANTY; type C-h C-w for \u001b[4m\u001b[34mfull details\u001b[0m\u001b[39;49m.\u001b[K\r\nEmacs is Free Software--Free as in Freedom--so you can redistribute copies\u001b[K\r\nof Emacs and modify it; type C-h C-c to see \u001b[4m\u001b[34mthe conditions\u001b[0m\u001b[39;49m.\u001b[K\r\nType C-h C-o for information on \u001b[4m\u001b[34mgetting the latest version\u001b[0m\u001b[39;49m.\u001b[K\r\n\u001b[7m-UUU:%%--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*GNU Emacs* \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1     (Fundamental) ---------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2d\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default *scratch*): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[31m;; This buffer is for notes you don't want to save, and for Lisp evaluation.    \u001b[39;49m\r\n\u001b[31m;; If you want to create a file, visit that file with C-x C-f,                  \u001b[39;49m\r\n\u001b[31m;; then enter the text in that file's own buffer.                               \u001b[39;49m\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;6H\u001b[7m----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L5     (Lisp Interaction) \u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\b\b\b\b\u001b[K\u001b[C\b\u001b[C\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lP\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lM\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l!\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\b\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l!\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lz\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lU\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lY\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lM\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;29H\u001b[?25l\u001b[7mTop L18\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[?25lSo, last time, we managed to complete the sad and unhappy problem about who\u001b[K\r\ndraws the grid, so we are happy! Today, we do one of the biggest challenges\u001b[K\r\nin Open Tactics, the RULE SYSTEM\r\n\u001b[K\nRight now, we have the following infrastructure\r\n\u001b[K\n\u001b[K\n  Game: A game, sets up graphics and intercepts keypresses\u001b[K\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\n\n\u001b[K\u001b[23;29H\u001b[7mBot L22\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\t\b\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\t\b\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25lV\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[C\u001b[C\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lV\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lH\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l/\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;29H\u001b[?25l\u001b[7m57% L25\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\b\u001b[?25l\u001b[1@A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@w\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@g\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@h\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lS\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[23;29H\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;66H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;75H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[23;30H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;64H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[K\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;70H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lV\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\b\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;29H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[23;29H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[C\u001b[?25la\u001b[23;29H\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[K\u001b[23;29H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;29H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[K\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[K\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[?25l\u001b[7m62% L33\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[K\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25lI\u001b[23;29H\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l3\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l4\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[23;30H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l3\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l5\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m7% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[23d\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l#\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lM\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25l$\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lM\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lV\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;59H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lM\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l4\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l4\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;30H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;3H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l4\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l4\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\n\n\n\b\b\b\b\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lP\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                          \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[20;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mW\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[20;60H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                  \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[20;63H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[20;63H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mA\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mk\u001b[39;49m\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;69H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[20;70H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[32m\"        \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[20;73H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mC\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[20;80H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[20;80H\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\b\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\b\b\u001b[K\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l$\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lK\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\n\n\u001b[?25l  I click on 3,4\u001b[K\r\n  There's nothing there\u001b[K\r\n  I click on 3,5\u001b[K\r\n  There is an infantry there. Give me a coordinate in $MOVEMENT_RANGE\u001b[K\u001b[8;3HI click on 4,4\r\n  I will move the infantry to 4,4. Give me an action \u001b[32m\"Wait\"\u001b[39;49m, \u001b[32m\"Attack\"\u001b[39;49m, \u001b[32m\"Cancel\"\u001b[39;49m\r\n  Attack.\u001b[K\r\n  Give me a coordinate in $ATTACK_RANGE\u001b[K\r\n\u001b[K\n\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7m85% L44\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l4\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l5\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l5\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\b\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l4\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l5\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;30H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;3H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[C\u001b[?25lN\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;3H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;76H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;70H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;14r\u001b[4;1H\u001b[1L\u001b[1;24r\u001b[4;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25lT\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[23;29H\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lq\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[23;30H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;8H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lY\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;64H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lY\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[K\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\b\u001b[K\b\u001b[K\b\b\u001b[K\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lW\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\b\u001b[K\t\u001b[?25lW\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\b\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;8H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[23;29H\u001b[7m69\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[23;30H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;68H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lj\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;63H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[K\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\b\u001b[K\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[C\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;59H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[21;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;75H\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;21r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[11;1H\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[?25l\u001b[7m77% L55\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[12d\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[23;29H\u001b[?25l\u001b[7mBot\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[12d\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[12d\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[12d\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[12d\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[12d\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[12d\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[12d\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[12d\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u0007\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lF\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lV\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[23;35H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;44H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[23;35H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;46H\u001b[?25l,\u001b[23;35H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\t\u001b[?25lW\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lB\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l g.\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lxg.\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25lg.\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[C\u001b[?25lg.\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l ng.\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lxng.\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25lng.\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25lng.\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l ng.\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l ng.\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25lng.\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25lng.\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mM-x \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[1;33H\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;65H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;64H\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[K\r\n\u001b[?25ls and the terminal are TERRIBLE for refactoring.\u001b[23;34H\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;20H\u001b[?25ls and the terminal are TERRIBLE for refactoring.\r\n\u001b[K\u001b[23;34H\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lMark set\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lOverwrite mode enabled\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;57H\u001b[?25l\u001b[7m Ovwrt) \u001b[0m\u001b[39;49m\u001b[27m\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;16H\u001b[?25ldisabled\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;57H\u001b[?25l\u001b[7m) ------\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;20H\u001b[?25l\u001b[37m\u001b[44ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44m \u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44m \u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44m \u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44m \u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lMark set\u001b[16;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;20H\u001b[?25ls and the terminal a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;39H\u001b[?25l\u001b[37m\u001b[44ma\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44ml\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44ma\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44mn\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44mi\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44mm\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44mr\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44me\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44mt\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44me\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44mh\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44mt\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44md\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44mn\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44ma\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44ms\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44mc\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[37m\u001b[44ma\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[22P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;46H\u001b[C\u001b[24;1H\u001b[?25lMark set\u001b[16;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lacs and the terminal a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;68H\b\b\b\b\b\b\b\b\b\b\u001b[24;1H\u001b[?25lUndo!\u001b[16;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;46H\u001b[K\u001b[C\u001b[24;1H\u001b[K\u001b[16;47H\u001b[24;1H\u001b[?25lUndo!\u001b[16;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[24;1H\u001b[K\u001b[16;46H\u001b[24;1H\u001b[?25lUndo!\u001b[16;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;18H\u001b[?25l\u001b[22@acs and the terminal a\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;18H\u001b[24;1H\u001b[?25lC-x\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l-\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l ESC\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;8H\u001b[?25l-\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;8H\u001b[?25l O\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;10H\u001b[?25l-\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;10H\u001b[?25l F\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l C-x\u001b[K\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;6H\u001b[?25lend\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24;1H\u001b[?25lC-x <end> is undefined\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;68H\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l+\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\\\r\na\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[18;79H\u001b[K\r\n\u001b[K\u001b[18;80H\b\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[23;35H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lW\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lj\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[?25lGridView to controller (since that's what we're doing, making an agnostic\r\ncontroller than can play no matter the rules), and then start making the rule\r\nsystem. We may end up having to delete some of our code or comment it out, and\r\nunfortunately, emacs and the terminal are TERRIBLE for refactoring.\u001b[K\r\n\u001b[K\n(sorry, was figuring out how to cut and paste in emacs. ctrl+w cuts the marked\r\n\u001b[Crea)\u001b[K\r\n\u001b[K\n\u001b[K\nSO. Let's try this out. We might colosally mess this up, but that's why I'm jus\\\r\nt\u001b[K\n\b\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\n\n\u001b[K\u001b[12;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;80H\u001b[K\r\n\u001b[K\u001b[11;80H\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lj\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lNo matching parenthesis found\u001b[12;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[K\u001b[13d\u001b[24d\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lde/\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25laphics/\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lore/\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lid.py\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25lLoading vc-git...\u001b[K\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;18H\u001b[?25ldone\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lLoading vc-git...done\u001b[K\u001b[H\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[31m# A grid is the arena upon which a battle takes place. The entire map should    \u001b[39;49m\r\n\u001b[A\n\u001b[31m# be self-contained. Players interact with the map by taking \"actions\".         \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m widgets\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Grid is a game-agnostic representation of the world's entities. It        \u001b[39;49m\r\n\u001b[A\n\u001b[31m# provides an API to game rulesets to create, delete, and move entities         \u001b[39;49m\r\n\u001b[A\n\u001b[31m# around, but essentially has no functionality other than changing its          \u001b[39;49m\r\n\u001b[A\n\u001b[31m# configuration. The grid should be initialized with a configuration            \u001b[39;49m\r\n\u001b[A\n\u001b[31m# Dictionary containing the following keys and values.                          \u001b[39;49m\r\n\u001b[A\n\u001b[31m#   w: (int) width                                                              \u001b[39;49m\r\n\u001b[A\n\u001b[31m#   h: (int) height                                                             \u001b[39;49m\r\n\u001b[A\n\u001b[31m#   cells: (list) exactly w*h cells                                             \u001b[39;49m\r\n\u001b[A\n\u001b[31m#   teams: (list) the teams in the map                                          \u001b[39;49m\r\n\u001b[A\n\u001b[31m#   allies: (list) the teams that are allied in a list of lists of ints         \u001b[39;49m\r\n\u001b[A\n\u001b[31m#   variables: (dictionary) a dictionary of user-defined variables              \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1    Git-master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2;3H\u001b[?25l\u001b[31m  allies: (list) the teams that are allied in a list of lists of ints     \u001b[39;49m\u001b[3;3H\u001b[31m  variables: (dictionary) a dictionary of user-defined variables     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, config):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = config[\u001b[32m\"w\"\u001b[39;49m], config[\u001b[32m\"h\"\u001b[39;49m]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\r\n            \u001b[33mrow\u001b[39;49m = []\u001b[10;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\r\n\t\trow.append(\u001b[35mNone\u001b[39;49m)\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = config.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day = 0\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\u001b[K\u001b[19;62H\u001b[8P\r\u001b[8@\u001b[19;11H\u001b[31mLoad the teams first, since cells and units reference them.\u001b[39;49m\u001b[20;31H\u001b[8P\r\u001b[8@\u001b[20;11H\u001b[31mThen set up the alliances.  \u001b[39;49m\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\r\n            \u001b[33mthis\u001b[39;49m = Team( t[\u001b[32m\"name\"\u001b[39;49m], t[\u001b[32m\"color\"\u001b[39;49m] )\u001b[K\u001b[23;29H\u001b[7m 5% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\r\n            \u001b[33mthis\u001b[39;49m = Team( t[\u001b[32m\"name\"\u001b[39;49m], t[\u001b[32m\"color\"\u001b[39;49m] )\u001b[K\r\n            \u001b[33mthis.variables\u001b[39;49m = t.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams.append(this)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[9;13H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\r\n\u001b[K\n\t\u001b[31m# Load the terrain cells. The units are embedded in these elements      \u001b[39;49m\r\n\t\u001b[31m# of the dictionary. Note that when units are loaded in other units     \u001b[39;49m\r\n\t\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\t\u001b[31m#   y: (int) y position                                                 \u001b[39;49m\r\n\t\u001b[31m#   terrain: (string) the name of the terrain                           \u001b[39;49m\r\n\t\u001b[31m#   unit: the unit on this terrain, if one                              \u001b[39;49m\r\n\t\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\u001b[19;11H\u001b[31m  variables: (dict) User-defined variables                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"cells\"\u001b[39;49m]:\u001b[K\r\n\t    \u001b[33mthis\u001b[39;49m = Cell(c[\u001b[32m\"terrain\"\u001b[39;49m])\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\u001b[K\u001b[23;29H\u001b[7m10% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33mthis\u001b[39;49m = Cell(c[\u001b[32m\"terrain\"\u001b[39;49m])\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\u001b[K\u001b[4;30Hc\u001b[5;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"owner\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t        \u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c\r\n\t\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\u001b[9;21H\u001b[33mu\u001b[39;49m = Unit(unit[\u001b[32m\"type\"\u001b[39;49m],\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]])\u001b[10;21H\u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[K\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\u001b[K\r\n\t                _process_units(u)\u001b[K\r\n\t            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\t        \u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# Get the tile at x,y. Returns None if out of range.                        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[23;30H\u001b[7m6% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[4;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\r\n\u001b[K\u001b[7;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Return the actions that the given unit can take if it were                \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# at x,y.                                                                   \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mactions\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, x, y):\u001b[K\r\n\t\u001b[33macts\u001b[39;49m = []\r\n\t\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x-1,y)\r\n\t\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x+1,y)\r\n\t\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y-1)\u001b[20;5H    \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y+1)\u001b[K\u001b[21;5H    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[22;12Ha1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m21% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[3;12Ha1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: acts.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\r\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                           \u001b[39;49m\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\u001b[15;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile.unit:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\u001b[K\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\u001b[23;30H\u001b[7m5% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(a,b)\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[10;5H                _floodfill((a-1,b),r-1)\u001b[K\u001b[11;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[12;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[13;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[14;5H    _floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[17;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\u001b[19;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[20;5H\u001b[4P\t\b\b\u001b[31mthrow exception if move is illegal. CHECK FIRST.     \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[23;29H\u001b[7m31% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ox,oy)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# Launch an attack from the attack coordinates to the defend                \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# coordinates. Will throw exception if move is illegal.                     \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# CHECK FIRST.                                                              \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlaunch_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, attacker, defender):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = attacker\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = defender\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ax,ay).unit\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(dx,dy).unit\u001b[19;5H    atk_unit.attack(def_unit)\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp >= 0: \u001b[31m#and can counter         \u001b[39;49m\u001b[21;5H        def_unit.attack(atk_unit)\r\n\u001b[K\u001b[23;30H\u001b[7m6% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        def_unit.attack(atk_unit)\r\n\u001b[K\n\t\u001b[31m# Destroy dead units.                                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(dx,dy)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(ax,ay)\r\n\u001b[K\n\u001b[K\u001b[9;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\t\b\b\u001b[31mThis should be the ONLY WAY units are added to the game.  \u001b[39;49m\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\u001b[K\u001b[13;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\r\n\t\u001b[33munit.team\u001b[39;49m = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m#                                        \u001b[39;49m\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\n\u001b[7m41% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n\t    \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[20;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day += 1\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;30H\u001b[7m5% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\u001b[K\n\u001b[?25l\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, terrain):\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = terrain\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\".\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = \u001b[32m\"g\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[15;5H\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# the unit's draw will be prioritized.                                      \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit:\u001b[K\n\b\b\b\bunit.draw(x, y, col)\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\b\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[23;30H\u001b[7m9% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\b\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\r\n                \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\u001b[K\r\n            draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function draws the terrain without drawing the                       \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# unit. Put into its own function to avoid messing up                       \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# the \"drawable\" interface.                                                 \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw_terrain\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[K\r\n\t    \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\r\n\tdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\n\u001b[K\n\u001b[31m# Units are the pieces that move about the game board. Units belong to a        \u001b[39;49m\r\n\u001b[4P\u001b[17;4H\u001b[31meam and can be moved about by taking acti\u001b[39;49m\u001b[4@\u001b[31mons.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, team):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = team\u001b[K\u001b[23;29H\u001b[7m53% L210\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function draws the unit at the desired location.                     \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\r\n\n        \u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n        \u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        \u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Build the animation for this unit based on values                     \u001b[39;49m\r\n\t\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\u001b[23;30H\u001b[7m7% L229\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp <= 90):\u001b[5;13Hframes.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\r\n\u001b[K\n\t\u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m unit.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\u001b[16;5H\u001b[4P\t\b\b\u001b[31m                                                     \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mattack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[K\r\n\tdamage = \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(30 * 0.01 * \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp)\u001b[K\r\n\tunit.hp -= damage\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.hp < 0:\u001b[K\r\n\t    unit.hp = 0\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m61% L248\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    unit.hp = 0\u001b[K\r\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.active = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[31m# The view object of the grid.                                                  \u001b[39;49m\r\n\u001b[23;30H\u001b[7m5% L267\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\u001b[?25l\u001b[31m# The view object of the grid.                                                  \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGridView\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = grid\u001b[K\u001b[7;14Hw = w\u001b[K\n\b\b\b\b\bh = h\u001b[K\n\b\b\b\b\bcam = widgets.Camera(w,h,grid)\r\n\u001b[K\u001b[11;14Hhighlight = []\u001b[12;14Hselected = \u001b[35mNone\u001b[39;49m\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = \u001b[35mNone\u001b[39;49m\u001b[19;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\r\n            \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[K\u001b[23;30H\u001b[7m8% L286\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\r\n            \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[5;5H            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\r\n\t\u001b[12@\u001b[6;31H.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[32m\"attacking\"\u001b[39;49m\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"Wait\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[13;21H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor).ready = \u001b[35mFalse\u001b[39;49m\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[8@\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"End Turn\"\u001b[39;49m:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.end_turn()\u001b[19;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\u001b[20;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam\u001b[2P\u001b[23;29H\u001b[7m71% L305\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam\u001b[2P\r\n\t\t\bpos:\u001b[K\n\b\b\b\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = pos\u001b[K\r\n\t\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get(cx,cy)\u001b[K\r\n\t\t\u001b[33munit\u001b[39;49m = tile.unit \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"attacking\"\u001b[39;49m:\r\n\t\t    my_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[10;13H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit.allied(my_unit):\r\n\t\t        start_hp = unit.hp, my_unit.hp\u001b[12;21H    c1 = unit.team.color\u001b[K\u001b[13;21H    \u001b[33mc2\u001b[39;49m = my_unit.team.color\u001b[K\r\n\t\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n\t\t        \u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\r\n\t\t                  my_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\r\n\u001b[K\n\t\t        \u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\u001b[19;13H            \u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\r\n\t\t        \u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\r\n\t                \u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\u001b[22;13H            \u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)\u001b[23;30H\u001b[7m7% L324\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l                \u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\u001b[3;13H            \u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)\u001b[4;13H            \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = pos\r\n\t\t        \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected\r\n\t\t        \u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[K\r\n\t\t        \u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[K\r\n\t\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\r\n\u001b[K\u001b[10;21H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit:\u001b[K\r\n\t\t\t    \u001b[33mmy_unit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"moving\"\u001b[39;49m:\u001b[K\u001b[15;21Hmy_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[16;21H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (cx,cy) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\u001b[K\r\n\t\t\tacts = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.actions(my_unit,cx,cy)\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\u001b[19;21H\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\u001b[23;29H\u001b[7m83% L343\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\r\n\t\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[5;21H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.ready \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.current_team():\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get_move_range(cx,cy)\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = cx,cy\u001b[8;30Hcurrently = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[9;21H\u001b[31m#actions = tile.unit.get_actions()                          \u001b[39;49m\r\n\u001b[10;21H\u001b[31m#if actions and len(actions) > 0:                           \u001b[39;49m\r\n\u001b[11;21H\u001b[31m#    self.menu = widgets.Menu(actions),cx,cy                \u001b[39;49m\r\n\t\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu([\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]),cx,cy\u001b[14;13H\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"w\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world)\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"e\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\u001b[23;29H\u001b[7m90% L362\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\r\n\t\u001b[33mcx\u001b[39;49m,cy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[8;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,my = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[K\u001b[9;13Hm.draw(mx+x-cx+2, my+y-cy)\u001b[K\r\n\u001b[K\n\t\u001b[12P\u001b[C\u001b[C\u001b[31mDisplay all alerts on the screen until the\u001b[39;49m\u001b[12@\u001b[31mir timers   \u001b[39;49m\r\n\t\u001b[31m# expire.                                                               \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts:\u001b[K\u001b[14;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = a\u001b[15;13H\u001b[33mm.time\u001b[39;49m -= 1\u001b[K\u001b[16;13Hm.draw(mx+x-cx, my+y-cy)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = [a \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a[0].time > 0]\r\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L381\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u001b[24d\u001b[K\u001b[2;42H\u001b[16P\u001b[2;5H\u001b[16@\u001b[2;22H\u001b[?25l\u001b[31mif actions and len(actions) > 0:    \u001b[39;49m\u001b[3;5H                \u001b[31m#    self.menu = widgets.Menu(actions),cx,cy                \u001b[39;49m\r\n\t        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu([\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]),cx,cy\u001b[6;13H\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"w\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world)\u001b[8;13H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"e\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[11;5H\u001b[4P\t\b\u001b[31mraw the grid to the terminal using the gfx library. Specify\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[12;5H\u001b[4P\t\b\b\u001b[31mx,y and w,h of the viewport in the terminal, and the cx,cy of\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[13;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\r\n\t\u001b[33mcx\u001b[39;49m,cy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[19;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,my = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[20;13Hm.draw(mx+x-cx+2, my+y-cy)\r\n\n\t\u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\u001b[23;29H\u001b[7m93% L380\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;21H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit:\u001b[K\u001b[3;21H        \u001b[33mmy_unit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[5;21H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[6;13H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"moving\"\u001b[39;49m:\r\n\t\t    my_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[K\r\n\t\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (cx,cy) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\u001b[K\r\n\t                acts = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.actions(my_unit,cx,cy)\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[11;5H                \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[12;5H                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[13;5H                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[14;5H                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\r\n\t        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m unit:\r\n\t            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.ready \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.current_team():\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get_move_range(cx,cy)\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = cx,cy\u001b[19;13H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[32m\"moving\"\u001b[39;49m\u001b[20;13H        \u001b[31m#actions = tile.unit.get_actions()                          \u001b[39;49m\r\n\u001b[21;21H\u001b[31m#if actions and len(actions) > 0:                           \u001b[39;49m\r\n\u001b[22;53H\u001b[12P\r\t\u001b[12@\t\t\b\b\u001b[31m   self.menu = widgets.Menu(actions),cx,cy\u001b[39;49m\u001b[23;29H\u001b[7m86% L371\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;21H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit.allied(my_unit):\r\n\t\t\tstart_hp = unit.hp, my_unit.hp\r\n\t\t\tc1 = unit.team.color\r\n\t\t\t\u001b[33mc2\u001b[39;49m = my_unit.team.color\r\n\t\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[7;21H    \u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\u001b[K\u001b[8;21H              my_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\r\n\u001b[K\n\t\t\t\u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\u001b[11;21H    \u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\r\n\t\t\t\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\r\n\t\t\t\u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\r\n\t\t\t\u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)\r\n\t\t        \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = pos\u001b[16;21H    \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected\u001b[K\r\n\t\t\t\u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[K\r\n\t\t\t\u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[K\u001b[19;30Halerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\r\n\u001b[K\u001b[21;21H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit:\u001b[K\u001b[22;21H        \u001b[33mmy_unit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m79% L352\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\u001b[K\u001b[4;21H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[5;21H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor).ready = \u001b[35mFalse\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\u001b[9;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"End Turn\"\u001b[39;49m:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.end_turn()\u001b[K\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\u001b[15;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = pos\u001b[K\r\n\t\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get(cx,cy)\r\n\t\t\u001b[33munit\u001b[39;49m = tile.unit \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"attacking\"\u001b[39;49m:\u001b[K\u001b[20;21Hmy_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[21;21H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit.allied(my_unit):\r\n\t\t\tstart_hp = unit.hp, my_unit.hp\u001b[23;30H\u001b[7m3% L333\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.highlight = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[8P\n\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[14;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[\u001b[2@0]\r\n\t\t\bq == \u001b[32m\"Attack\"\u001b[39;49m:\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\r\n\t\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[32m\"attacking\"\u001b[39;49m\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\u001b[K\u001b[23;29H\u001b[7m69% L314\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies = []\u001b[3;14Hactive = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[4;14Hvariables = {}\u001b[K\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[31m# The view object of the grid.                                                  \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGridView\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[K\r\n\t\u001b[12P\u001b[17;19H = grid\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.highlight = []\u001b[K\u001b[23;30H\u001b[7m6% L295\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\r\n\u001b[K\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[6;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m unit.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\r\n\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mattack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\r\n\tdamage = \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(30 * 0.01 * \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp)\r\n\tunit.hp -= damage\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.hp < 0:\u001b[13;13Hunit.hp = 0\r\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[18;14Hname = name\u001b[19;14Hcolor = color\u001b[20;14Hresources = 0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies = []\u001b[22;14Hactive = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m3% L276\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.active = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[31m# The view object of the grid.                                                  \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGridView\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = grid\u001b[K\u001b[18;14Hw = w\u001b[K\n\b\b\b\b\bh = h\u001b[K\n\b\b\b\b\bcam = widgets.Camera(w,h,grid)\r\n\u001b[K\u001b[22;14Hhighlight = []\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1@\u001b[32mC\u001b[39;49m\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[15d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[14;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[14;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[14;12H\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mj\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\n\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;36H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[A\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m'\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;36H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[A\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mx\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\n\u001b[?25l\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = grid\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,grid)\r\n\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.highlight = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[19;14Hcheckpoint = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[21;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\n\b\u001b[7m7% L296\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/code/core/\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[C\u001b[?25l[No match]\u001b[24;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lraphics/\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lore/\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\t\u001b[?25l[No match]\u001b[24;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\t\b\u001b[?25l[No match]\u001b[24;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\t\u001b[?25l[No match]\u001b[24;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25l/\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25lMaking completion list...\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/code/core/g\u001b[12;1H\u001b[7m-UU-:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   67% L294  Git-master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\nIn this buffer, type RET to select the completion near point.\r\n\u001b[K\nPossible completions are:\r\ng\u001b[1ma\u001b[0mme.py                                g\u001b[1ma\u001b[0mme.pyc\r\ng\u001b[1mr\u001b[0mid.py                                g\u001b[1mr\u001b[0mid.pyc\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[7m-UUU:%%--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*Completions*\u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Completion List) ----------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[24;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lme.py\u001b[12;1H\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.highlight = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = \u001b[35mNone\u001b[39;49m\u001b[21;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\u001b[7m-UU-:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   67% L294  Git-master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[24;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[31m# The Game is where it all starts. A Game is an abstract and thin package in    \u001b[39;49m\r\n\u001b[3;3H\u001b[31mwhich all of the elements of the game are stored. It is responsible for\u001b[39;49m\u001b[4;4H\u001b[31mreating the world, parsing and writing to save files, and turning on/off\u001b[39;49m\u001b[5;3H\u001b[31mgraphics.                                      \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m gfx, draw\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m grid, widgets\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m sys\u001b[K\r\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m traceback\r\n\u001b[K\n\u001b[K\n\u001b[31m# A Game represents a single instance of a game, including its maps,            \u001b[39;49m\r\n\u001b[31m# data, and everything else.                                                    \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[21;5H    \u001b[33mgdict\u001b[39;49m[\u001b[32m\"h\"\u001b[39;49m] = 15\u001b[K\u001b[22;5H    \u001b[33mgdict\u001b[39;49m[\u001b[32m\"cells\"\u001b[39;49m] = []\u001b[K\u001b[23;6H\u001b[7m----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"h\"\u001b[39;49m] = 15\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"cells\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(30):\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(15):\u001b[K\r\n\t\t\u001b[33mcell\u001b[39;49m = {}\r\n                \u001b[33mcell\u001b[39;49m[\u001b[32m\"x\"\u001b[39;49m] = x\u001b[K\r\n\t\t\u001b[33mcell\u001b[39;49m[\u001b[32m\"y\"\u001b[39;49m] = y\r\n                \u001b[33mcell\u001b[39;49m[\u001b[32m\"terrain\"\u001b[39;49m] = \u001b[32m\"road\"\u001b[39;49m\r\n\t\tgdict[\u001b[32m\"cells\"\u001b[39;49m].append(cell)\r\n        \u001b[33munit1\u001b[39;49m = {}\r\n        \u001b[33munit1\u001b[39;49m[\u001b[32m\"type\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 0\r\n\t\u001b[33munit2\u001b[39;49m = {}\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"type\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[18;5H    gdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\t\b\u001b[32mteams\"\u001b[39;49m] = [team1,team2]\u001b[22;10H = grid.Grid(gdict)\n\u001b[7m22% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[?25l\u001b[32mteams\"\u001b[39;49m] = [team1,team2]\u001b[3;10H = grid.Grid(gdict)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.GridView(70,18,g)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\r\n\u001b[K\n\u001b[K\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay_title\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(1,1)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.draw(1,20,\u001b[32m\"r\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.draw(1,19)\r\n\u001b[K\n\u001b[K\u001b[19;5H\u001b[31m# Runs an interactive session of our game with the player until either      \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# turn off graphics, print the traceback, and kill the program.             \u001b[39;49m\r\n\u001b[23;29H\u001b[7m47% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# turn off graphics, print the traceback, and kill the program.             \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\tgfx.start(\u001b[32m\"ascii\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36mtry\u001b[0m\u001b[39;49m:\u001b[K\n\u001b[33mc\u001b[39;49m = -1\n\b\b\b\b\b\bgfx.clear()\u001b[11;5H        \u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m c != \u001b[32m\"q\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.display_title()\u001b[K\r\n\t        \u001b[33mc\u001b[39;49m = gfx.get_input()\r\n\t\u001b[8@\u001b[15;13H        \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.handle_input(c)\r\n\t            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[19;5H                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.handle_input(c)\u001b[K\r\n\u001b[K\u001b[21;5H            gfx.refresh()\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mexcept\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;29H\u001b[7m70% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[K\u001b[3;5H    \u001b[33mg\u001b[39;49m = grid.Grid(gdict)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.GridView(70,18,g)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\r\n\u001b[K\n\u001b[K\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay_title\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(1,1)\u001b[K\r\n\t\u001b[8P\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.draw(1,20,\u001b[32m\"r\"\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.draw(1,19)\r\n\u001b[K\n\u001b[K\u001b[19;5H\u001b[31m# Runs an interactive session of our game with the player until either      \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# turn off graphics, print the traceback, and kill the program.             \u001b[39;49m\r\n\u001b[23;29H\u001b[7m47% L59\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;16H\u001b[?25l\u001b[32mh\"\u001b[39;49m] = 15\u001b[K\u001b[3;10H\u001b[33mdict\u001b[39;49m[\u001b[32m\"cells\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(30):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(15):\u001b[K\r\n\t        \u001b[33mcell\u001b[39;49m = {}\r\n\t        \u001b[33mcell\u001b[39;49m[\u001b[32m\"x\"\u001b[39;49m] = x\u001b[K\r\n\t        \u001b[33mcell\u001b[39;49m[\u001b[32m\"y\"\u001b[39;49m] = y\u001b[K\r\n\t\t\u001b[33mcell\u001b[39;49m[\u001b[32m\"terrain\"\u001b[39;49m] = \u001b[32m\"road\"\u001b[39;49m\r\n\t\tgdict[\u001b[32m\"cells\"\u001b[39;49m].append(cell)\u001b[11;5H    \u001b[33munit1\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"type\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\u001b[K\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 0\r\n\t\u001b[33munit2\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"type\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[K\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[19;5H    \u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[K\u001b[20;5H    \u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\u001b[K\u001b[21;5H    \u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[K\u001b[22;5H    \u001b[33mg\u001b[39;49m = grid.Grid(gdict)\u001b[K\n\u001b[7m22% L40\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# The Game is where it all starts. A Game is an abstract and thin package in    \u001b[39;49m\r\n\u001b[31m# which all of the elements of the game are stored. It is responsible for       \u001b[39;49m\r\n\u001b[31m# creating the world, parsing and writing to save files, and turning on/off     \u001b[39;49m\r\n\u001b[31m# graphics.                                                                     \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m gfx, draw\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m grid, widgets\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m sys\u001b[K\r\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m traceback\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A Game represents a single instance of a game, including its maps,            \u001b[39;49m\r\n\u001b[31m# data, and everything else.                                                    \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\r\n\t\t\b\u001b[32mh\"\u001b[39;49m] = 15\u001b[K\u001b[22;10H\u001b[33mdict\u001b[39;49m[\u001b[32m\"cells\"\u001b[39;49m] = []\u001b[K\n\u001b[C\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[K\u001b[4;3H\u001b[?25l\u001b[31mA Game represents a single instance of a game, including its maps,       \u001b[39;49m\u001b[5;3H\u001b[31mdata, and everything else.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m = {}\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"h\"\u001b[39;49m] = 15\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"cells\"\u001b[39;49m] = []\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(30):\u001b[13;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(15):\r\n\t\t\u001b[33mcell\u001b[39;49m = {}\r\n                \u001b[33mcell\u001b[39;49m[\u001b[32m\"x\"\u001b[39;49m] = x\u001b[K\r\n                \u001b[33mcell\u001b[39;49m[\u001b[32m\"y\"\u001b[39;49m] = y\u001b[K\r\n                \u001b[33mcell\u001b[39;49m[\u001b[32m\"terrain\"\u001b[39;49m] = \u001b[32m\"road\"\u001b[39;49m\u001b[18;5H            gdict[\u001b[32m\"cells\"\u001b[39;49m].append(cell)\r\n\t\u001b[33munit1\u001b[39;49m\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"type\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 0\r\n\t\u001b[33munit2\u001b[39;49m = {}\u001b[K\u001b[23;29H\u001b[7m14% L22\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33munit1\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 0\r\n\t\u001b[33munit2\u001b[39;49m = {}\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"type\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[7;5H    gdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\t\b\u001b[32mteams\"\u001b[39;49m] = [team1,team2]\u001b[11;10H = grid.Grid(gdict)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.GridView(70,18,g)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\r\n\u001b[K\n\u001b[K\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay_title\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(1,1)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[23;29H\u001b[7m36% L31\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1@C\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   36% L42   Git:\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;33H\u001b[24;1H\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/code/core/\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l(New file)\u001b[K\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lCan't guess python-indent-offset, using defaults: 4\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1d\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;4H\u001b[7mU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2d\u001b[?25l\u001b[31m#\u001b[39;49m\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m                                                                               \u001b[39;49m\r\n\u001b[23;34H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m                                                                               \u001b[39;49m\r\n\u001b[23;34H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mA\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mj\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;63H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[3;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[3;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[3;26H\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mG\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[C\u001b[?25l\u001b[31m(\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m)\u001b[39;49m\u001b[3;68H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m \u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m \u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m \u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m \u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mC\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m \u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m \u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m \u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m \u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24;1H\u001b[?25lEnd of buffer\u001b[4;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u001b[24;1H\u001b[K\u001b[4;49H\u001b[?25l\u001b[31m                                \u001b[39;49m\r\n\u001b[23;34H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32mR\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[23;34H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[7;1H\u001b[1L\u001b[1;24r\u001b[6;1H\u001b[K\n\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m()\u001b[K\u001b[23;34H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\n\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m()\u001b[K\u001b[23;34H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[7;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;14H\b\u001b[?25lo)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lj)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\r\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mi\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l\u001b[1m\u001b[34mi\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;29H\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\t\b\u001b[23;34H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9 \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[10;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[10;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;17H\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mc\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mi\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mm\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mv\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mc\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mk\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25ls):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l ):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l):\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l):\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l):\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l):\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l ):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25ldef_):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l):\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[12;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[16;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;5H\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\t\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;7H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9 \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[1;18r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;7H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mp\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mc\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[34minput\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;28H\b\b\b\b\b\u001b[?25linpu)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25li)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;7H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;7H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m:\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[17;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[17;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[17;52H\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\u001b[19;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c)\u001b[23;35H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[A\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[18;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[18;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mA\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31m\"\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m\"\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31m\"\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m\"\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m\"\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\u001b[20;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c)\u001b[23;35H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[19;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mA\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[14;5H\u001b[?25l\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\r\n\u001b[K\n\t\b\b\u001b[31mThis processes input of two types: coordinates and strings.   \u001b[39;49m\r\n\t\u001b[31mstring is the input from a menu, such as \"attack\" or \"wait\".\u001b[39;49m\r\n    \u001b[31m# A coordinate is                                                           \u001b[39;49m\r\n\u001b[A\u001b[23;35H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\t\b\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\b\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mx\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\u001b[?25lAuto-saving...\u001b[20;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[20;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\u001b[K\u001b[20;48H\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[C\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\u001b[22;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c)\u001b[23;34H\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[A\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[21;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[21;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31m\"\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m\"\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\u001b[23;29H\u001b[?25l\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[22;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[22;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[1;22r\u001b[3;1H\u001b[11M\u001b[1;24r\u001b[2;1H\u001b[K\u001b[12d\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L22\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[12;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\t\b\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1;23r\u001b[22;1H\u001b[1M\u001b[1;24r\u001b[24;1H\u001b[?25l\u001b[34m, ., q, C-r, d or C-h) \u001b[39;49m\r\u001b[A\u001b[34mSave file /home/isharacomix/Documents/open-tactics/code/core/rules.py? (y, n, !\u001b[39;49m\\\r\n\u001b[A\n\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l, ., q, C-r, d or C-h) y\r\u001b[ASave file /home/isharacomix/Documents/open-tactics/code/core/rules.py? (y, n, !\r\n\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[23;4H\u001b[?25ling file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[K\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34m ., q, C-r, d or C-h) \u001b[39;49m\r\u001b[A\u001b[34mSave file /home/isharacomix/Documents/open-tactics/code/core/grid.py? (y, n, !,\u001b[39;49m\\\r\n\t\t\t\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[22;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l ., q, C-r, d or C-h) y\r\u001b[ASave file /home/isharacomix/Documents/open-tactics/code/core/grid.py? (y, n, !,\r\n\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[23;4H\u001b[?25ling file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[K\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;23r\u001b[22;1H\u001b[1L\u001b[1;24r\u001b[22;1H\u001b[K\u001b[14;9H\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ python\r\nPython 2.7.5+ (default, Sep 19 2013, 13:49:51) \r\n[GCC 4.8.1] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> type(4)\r\n<type 'int'>\r\n>>> type(4) \\ int\r\n  File \"<stdin>\", line 1\r\n    type(4) \\ int\r\n                ^\r\nSyntaxError: unexpected character after line continuation character\r\n>>> type(4) \\ int\b\b\b\b\b\u001b[1P int\b\b\b\b= int\b\b\b\b= int\b\b\b\b\r\nTrue\r\n>>> type(4) == int\b\b\b\b\b\b\b\b\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\b\u001b[K\b\u001b[K\b\u001b[Ktuple\b\b\b\b\b\b\b\u001b[1P tuple\b\b\b\b\b\b\b\u001b[1P tuple\b\b\b\b\b\bi tuple\b\b\b\b\b\bs tuple\b\b\b\b\b\b\r\nFalse\r\n>>> type(4) is tuple\b\b\b\b\b\b\b\b\b\b\u001b[1@,\u001b[1@3\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: type() takes 1 or 3 arguments\r\n>>> type(4,3) is tuple\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[1@(\u001b[C\u001b[C\u001b[C\u001b[C\u001b[1@)\b\r\nTrue\r\n>>> q\b\u001b[K\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ python\b\b\b\b\b\b\u001b[1Pemacs\b\b\b\b\bpython\b\b\b\b\b\b\u001b[K\u0007fg\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n    \u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\u001b[K\r\n        \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# A coordinate is an x,y location on the grid. In any case, the             \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# value provided may either be contained inside of \"choices\" or             \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L24    (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;20H\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\r\n\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(c)\u001b[23;35H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25lNon\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\b\b\u001b[?25lNon\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\r\t\u001b[?25lx,y\u001b[K\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\b\u001b[K\r\u001b[K\t\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\u001b[?25l\u001b[33mcoord\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lF\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\t\u001b[?25l\u001b[35mFalse\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;29H\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;13H\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\u001b[?25l\u001b[33mcoord\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mTrue\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(c) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[17;13H\u001b[33mcoord\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[23;35H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\u001b[?25l\u001b[33mx\u001b[39;49m, \u001b[33my\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;13H\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[20;13H\r\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\b\b\u001b[K\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\u001b[?25l\u001b[33mstate\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\u001b[?25lstate ==\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m:\u001b[23;34H\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[20;13H\r\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[20;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mW\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mN\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\n\n\n\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[?25lEnd of buffer\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[20;35H\n\n\n\b\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[?25lEnd of buffer\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\n\n\u001b[K\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[3;5H    \u001b[33mcoord\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[4;5H    \u001b[33mx\u001b[39;49m, \u001b[33my\u001b[39;49m = \u001b[35mNone\u001b[39;49m, \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(c) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[6;13H\u001b[33mcoord\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[7;5H        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = c\u001b[K\r\n\u001b[K\u001b[9;64H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mWhen state is None, the                                  \u001b[39;49m\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m:\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;35H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\r\t\b\b\b\b\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34mp\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mc\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mN\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\u001b[K\u001b[13;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m\u001b[23;35H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\r\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[12;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mW\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mN\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mx\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mx\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\u001b[14;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m\u001b[23;35H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;13H\r\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[13;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;60H\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\r\u001b[K\u001b[13;5H\r\u001b[13;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m\r\n\u001b[K\u001b[23;35H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;64H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\u001b[14;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m\u001b[23;35H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;13H\r\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[13;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\b\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[13;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[13;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;35H\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\u001b[15;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m\u001b[23;35H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;13H\r\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[14;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mW\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\u001b[16;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m\u001b[23;35H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;13H\r\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[15;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\r\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;5H\u001b[?25l\u001b[31m# a unit that you can move or a factory you can build a unit from.          \u001b[39;49m\r\n\t\b\b\u001b[31mWill return the movement range in the case of a unit and the menu\u001b[39;49m\u001b[22;1H\u001b[K\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;5H\u001b[?25l\u001b[31m# Will return the movement range in the case of a unit and the menu         \u001b[39;49m\r\n\t\b\b\u001b[31mof possibilities in the case of a factory.                       \u001b[39;49m\u001b[22;1H\u001b[K\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;14r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[14;1H\u001b[K\u001b[12d\u001b[12;50H\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mS\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m:\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;14H\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31m=\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m=\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mN\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31m(\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mx\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m)\u001b[39;49m\u001b[12;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\u001b[14;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m\u001b[23;35H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;13H\r\t\b\b\b\b\r\u001b[13;13H\r\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[13;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mE\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mx\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m None (expected input, tuple) \u001b[39;49m\u001b[12;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m None (expected input, tuple) \u001b[39;49m\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mNone (expected input, tuple) \u001b[39;49m\u001b[12;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31m None (expected input, tuple)\u001b[39;49m\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31m None (expected input, tuple)\u001b[39;49m\u001b[12;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31m None (expected input, tuple)\u001b[39;49m\r\t\t\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31m None (expected input, tuple)\u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\t\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31m(\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mY\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m)\u001b[39;49m\u001b[13;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\u001b[15;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m\u001b[23;35H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;13H\r\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[14;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[8@\u001b[14;14H\r\t\u001b[4P\u001b[14;77H\u001b[?25l\u001b[31m    \u001b[39;49m\r\n\u001b[14;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[4P\u001b[14;77H\u001b[?25l\u001b[31m    \u001b[39;49m\r\n\u001b[14;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mN\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mx\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\u001b[8@\u001b[14;19H\r\t\u001b[4P\u001b[14;77H\u001b[?25l\u001b[31m    \u001b[39;49m\r\n\u001b[14;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;5H\u001b[4P\u001b[14;77H\u001b[?25l\u001b[31m    \u001b[39;49m\r\n\u001b[14;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31m:\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m: Tuple (unit or friendly factory)\u001b[39;49m\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31m Tuple (unit or friendly factory)\u001b[39;49m\u001b[13;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m: None (expected input, tuple)\u001b[39;49m\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31m None (expected input, tuple)\u001b[39;49m\u001b[12;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mTuple (unit or friendly factory) \u001b[39;49m\u001b[13;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mNone (expected input, tuple) \u001b[39;49m\u001b[12;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mC\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m:\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\u001b[16;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m\u001b[23;35H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;13H\r\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[15;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m:\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mL\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[16;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[16;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;31H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[16;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;34H\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[5;1H\u001b[1M\u001b[1;24r\u001b[3;9H\u001b[?25l\u001b[33mx\u001b[39;49m, \u001b[33my\u001b[39;49m = \u001b[35mNone\u001b[39;49m, \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(c) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[22;1H\u001b[K\u001b[3d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[5;1H\u001b[1M\u001b[1;24r\u001b[3;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(c) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[33mcoord\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[22;1H\u001b[K\u001b[3d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[5;1H\u001b[1M\u001b[1;24r\u001b[3;13H\u001b[?25l\u001b[33mcoord\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[4;13H\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = c\u001b[K\u001b[22;1H\u001b[K\u001b[3d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[5;1H\u001b[1M\u001b[1;24r\u001b[3;13H\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = c\r\n\u001b[K\u001b[22d\u001b[K\u001b[3d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[5;1H\u001b[1M\u001b[1;24r\u001b[4;9H\u001b[?25l\u001b[31m# When state is None, the                                               \u001b[39;49m\r\n\u001b[22d\u001b[K\u001b[3d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[5;1H\u001b[1M\u001b[1;24r\u001b[3;9H\u001b[?25l\u001b[31m# When state is None, the                                               \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m:\u001b[K\u001b[22;1H\u001b[K\u001b[3d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[5;1H\u001b[1M\u001b[1;24r\u001b[3;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m:\r\n\u001b[K\u001b[22d\u001b[K\u001b[3d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[3;26H\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\u001b[5;5H    \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[7;7H\u001b[31mThis processes input of two types: coordinates and strings.\u001b[39;49m\u001b[8;7H\u001b[31mA string is the input from a menu, such as \"attack\" or \"wait\".\u001b[39;49m\u001b[9;5H\u001b[31m# A coordinate is an x,y location on the grid. In any case, the             \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# value provided may either be contained inside of \"choices\" or             \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[16;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord\u001b[23;35H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\u001b[?25l\u001b[33mstate\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\u001b[?25lstate ==\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\u001b[K\u001b[1;22r\u001b[17;1H\u001b[1M\u001b[1;24r\u001b[16;5H\u001b[?25l\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[22d\u001b[K\u001b[15d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[?25lEnd of buffer\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[20;35H\n\n\n\b\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[?25lEnd of buffer\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[K\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit           \u001b[39;49m\u001b[8;7H\u001b[31m           If factory: list of possible buildables            \u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;35H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;22H\u001b[?25l)\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;22H\b\b\b\b\u001b[24;1H\u001b[?25lAuto-saving...\u001b[10;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[10;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;17H\b\b\t\t\b\b\b\b\b\b\b\b\b\t\t\b\b\t\b\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;13H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[K\b\u001b[K\b\u001b[K\u001b[11;19H\u001b[?25l\u001b[32mException\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\")                                                  \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mE)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mx)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mp)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m )\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mp)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ml)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m,)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m )\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mg)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m )\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[11;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m!\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[13;13H\r\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25ltyp\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\b\b\u001b[?25li\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\t\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\u001b[K\u001b[23;35H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24;1H\u001b[?25lEnd of buffer\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[24;1H\u001b[?25lAuto-saving...\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[14;9H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\u001b[?25li\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\t\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[14;9H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H    \u001b[33munit1\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 0\r\n\t\u001b[33munit2\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"type\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\u001b[5;5H    \u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[K\u001b[6;5H    gdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[K\u001b[7;5H    gdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[K\u001b[8;5H    \u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[K\u001b[9;5H    \u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\r\n\t\u001b[33mg\u001b[39;49m = grid.Grid(gdict)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,g)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay_title\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(1,1)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   36% L42   Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\u001b[K\u001b[5;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[8;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;4H\u001b[7mU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L35    (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgame.py\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lrid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[4P\u001b[5;3H\u001b[31mdirect copy of the grid, except for its cam\u001b[39;49m\u001b[4@\u001b[31mera.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = grid\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,grid)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.highlight = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\r\n\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = \u001b[35mNone\u001b[39;49m\u001b[21;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   67% L294  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n            \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[7;5H            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\r\n\t\u001b[12@\u001b[8;31H.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[32m\"attacking\"\u001b[39;49m\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\u001b[12;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"Wait\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[15;21H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor).ready = \u001b[35mFalse\u001b[39;49m\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[8@\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"End Turn\"\u001b[39;49m:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.end_turn()\u001b[21;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\u001b[22;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\n\b\b\b\b\u001b[7m71% L305\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\u001b[?25l\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[K\r\n\t\u001b[12P\u001b[8;19H = grid\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.highlight = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[8P\n\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\n\b\b\u001b[7m67\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25lunit.hp = 0\r\n\u001b[K\u001b[4;3H\u001b[31m                                                            \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\u001b[8;14Hcolor = color\u001b[9;14Hresources = 0\u001b[10;14Hallies = []\u001b[11;14Hactive = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[23;30H\u001b[7m5% L287\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp <= 90):\u001b[K\r\n            frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\r\n\u001b[K\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[14;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m unit.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\r\n\u001b[K\u001b[16;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mattack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\r\n\tdamage = \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(30 * 0.01 * \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp)\r\n\tunit.hp -= damage\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.hp < 0:\u001b[21;13Hunit.hp = 0\r\n\u001b[K\u001b[23;30H\u001b[7m1% L268\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function draws the unit at the desired location.                     \u001b[39;49m\r\n\t\u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\u001b[K\u001b[16;60H\u001b[4P\u001b[16;5H\u001b[4@\u001b[16;11H\u001b[31mGray out units that can't act. Units are always bold.\u001b[39;49m\u001b[17;5H    \u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Build the animation for this unit based on values                     \u001b[39;49m\r\n\t\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\u001b[23;29H\u001b[7m57% L249\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\r\n\t        \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\u001b[5;13Hdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\u001b[K\u001b[7;5H\u001b[31m# This function draws the terrain without drawing the                       \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# unit. Put into its own function to avoid messing up                       \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# the \"drawable\" interface.                                                 \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw_terrain\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[12;5H        \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\u001b[K\u001b[13;5H    draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\u001b[K\n\n\u001b[31m# Units are the pieces that move about the game board. Units belong to a        \u001b[39;49m\r\n\u001b[31m# team and can be moved about by taking actions.                                \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, team):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = team\u001b[K\u001b[23;30H\u001b[7m2% L230\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[K\n\u001b[?25l\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, terrain):\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = terrain\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\".\"\u001b[39;49m\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = \u001b[32m\"g\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[K\u001b[15;5H\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n    \u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[17;45H\u001b[4P\r\u001b[4@\t\b\u001b[31mhe unit's draw will be prioritized.      \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[19;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit.draw(x, y, col)\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[23;29H\u001b[7m48% L211\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\u001b[K\r\n        \u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\r\n\u001b[K\u001b[12;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[15;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\u001b[16;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[20;18Hday += 1\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;30H\u001b[7m5% L192\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        def_unit.attack(atk_unit)\r\n\u001b[K\n\t\u001b[31m# Destroy dead units.                                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(dx,dy)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(ax,ay)\r\n\n\u001b[K\u001b[9;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# This should be the ONLY WAY units are added to the game.                  \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\u001b[K\u001b[13;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\t\u001b[33munit.team\u001b[39;49m = team\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\n\u001b[C\u001b[7m0% L173\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ox,oy)\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[9;5H    \u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mLaunch an attack from the attack coordinates to the defend\u001b[39;49m\u001b[12;5H\u001b[31m# coordinates. Will throw exception if move is illegal.                     \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# CHECK FIRST.                                                              \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlaunch_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, attacker, defender):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = attacker\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = defender\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ax,ay).unit\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(dx,dy).unit\r\n\tatk_unit.attack(def_unit)\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp >= 0: \u001b[31m#and can counter\u001b[39;49m\u001b[21;5H        def_unit.attack(atk_unit)\r\n\u001b[K\u001b[23;29H\u001b[7m36% L154\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(a,b)\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\r\n\t            report.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[11;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[12;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[13;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[14;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\u001b[19;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.\u001b[39;49m\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[23;30H\u001b[7m1% L135\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: acts.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile.unit:\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\r\n\u001b[K\u001b[20;60H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mUse the naive flood-fill algorithm to get neighboring\u001b[39;49m\u001b[21;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[23;29H\u001b[7m25% L116\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[3;12Hstate == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[8;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[12;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;4H\u001b[7mU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L35    (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[3;12Ha1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: acts.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile.unit:\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   25% L116  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(a,b)\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[10;5H                _floodfill((a-1,b),r-1)\u001b[K\u001b[11;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[12;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[13;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[14;5H    _floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[17;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\u001b[19;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[20;5H\u001b[4P\t\b\b\u001b[31mthrow exception if move is illegal. CHECK FIRST.     \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[23;29H\u001b[7m31\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ox,oy)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# Launch an attack from the attack coordinates to the defend                \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# coordinates. Will throw exception if move is illegal.                     \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# CHECK FIRST.                                                              \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlaunch_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, attacker, defender):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = attacker\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = defender\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ax,ay).unit\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(dx,dy).unit\u001b[19;5H    atk_unit.attack(def_unit)\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp >= 0: \u001b[31m#and can counter         \u001b[39;49m\u001b[21;5H        def_unit.attack(atk_unit)\r\n\u001b[K\u001b[23;30H\u001b[7m6% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(a,b)\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\r\n\t            report.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[11;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[12;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[13;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[14;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\u001b[19;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.\u001b[39;49m\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: acts.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile.unit:\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\r\n\u001b[K\u001b[20;60H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mUse the naive flood-fill algorithm to get neighboring\u001b[39;49m\u001b[21;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[23;29H\u001b[7m25% L116\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\u001b[3;12H(x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\u001b[11;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mReturn the actions that the given unit can take if it were\u001b[39;49m\u001b[14;5H\u001b[31m# at x,y.                                                                   \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mactions\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, x, y):\r\n\t\u001b[33macts\u001b[39;49m = []\u001b[K\r\n\t\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x-1,y)\r\n\t\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x+1,y)\r\n\t\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y-1)\r\n\t\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y+1)\u001b[K\r\n\t\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[23;30H\u001b[7m1% L97 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[3;12Hstate == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit\u001b[39;49m\u001b[8;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[10;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;4H\u001b[7mU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L35    (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mu\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;35H\u001b[23d\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;35H\u001b[23d\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;13H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;13H\r\t\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[23;35H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;35H\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[23;35H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[23;35H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[15;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u\u001b[23;34H\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;13H\r\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[19;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[C\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\u001b[?25lAuto-saving...\u001b[20;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[20;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\u001b[K\u001b[20;14H\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\b\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;13H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[8;53H\u001b[4P\u001b[8;5H\u001b[4@\u001b[8;11H\u001b[31mIf unit is not friendly, return nothing.      \u001b[39;49m\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team():\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;35H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\r\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[12;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\u001b[K\u001b[5;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[8;5H\u001b[4P\t\b\b\u001b[31m           If factory: list of possible builda\u001b[39;49m\u001b[4@\u001b[31mbles\u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[11;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\n\b\b\b\b\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team():\u001b[21;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[23;29H\u001b[7m51% L33\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\u001b[?25l\u001b[33mteam\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ls\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\u001b[?25lelf\u001b[1P\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25lAuto-saving...\u001b[21;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[21;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[K\u001b[21;32H\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mid\u001b[0m\u001b[39;49m\u001b[1P\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[1P\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1P\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_team():\u001b[K\r\t\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lteam():\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25leam():\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lam():\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm():\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l():\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l):\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[K\n\n\b\b\b\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt:\n\n\b\b\b\b\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\u001b[A\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\b\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[5;42H\u001b[4P\u001b[5;5H\u001b[4@\u001b[5;11H\u001b[31mIf no unit, check for terrain      \u001b[39;49m\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[7;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[9;5H    \u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\u001b[10;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\u001b[11;14H\u001b[1m\u001b[36meturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.\u001b[K\r\n\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L44\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\b\b\b\u001b[14;38H\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\b\b\u001b[?25lsel\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\t\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;13H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;13H\r\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[17;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[17;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[17;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[17;67H\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[18;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mG\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[20;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                      \u001b[39;49m\r\n\u001b[20;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[C\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[5;5H\u001b[4P\t\b\b\u001b[31mA string is the input from a menu, such as \"attack\" or \"wa\u001b[39;49m\u001b[4@\u001b[31mit\".\u001b[39;49m\u001b[6;5H\u001b[31m# A coordinate is an x,y location on the grid. In any case, the             \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# value provided may either be contained inside of \"choices\" or             \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[9;5H\u001b[4P\t\b\b\u001b[31mpassed to this function.                \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[13;5H\u001b[4P\t\b\b\u001b[31mState    : None (expected input, tuple)            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[14;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[16;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[23;29H\u001b[7m23% L35\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# A rules object handles all of the actual game play elements. The rules        \u001b[39;49m\r\n\u001b[31m# are what give meaning to the pieces in a Grid, and is controlled (usually)    \u001b[39;49m\r\n\u001b[4P\u001b[4;3H\u001b[31mby a Controller that provides piecewise input.             \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\r\n\u001b[K\n\u001b[K\n\u001b[4P\u001b[7;3H\u001b[31m                                                             \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\n\t\b\b\u001b[31mThis is the attack action.                 \u001b[39;49m\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# A coordinate is an x,y location on the grid. In any case, the             \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# value provided may either be contained inside of \"choices\" or             \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l    \u001b[31m# value provided may either be contained inside of \"choices\" or             \u001b[39;49m\r\n    \u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[4;45H\u001b[4P\r\u001b[4@\t\b\b\u001b[31mpassed to this function.                  \u001b[39;49m\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\u001b[K\n    \u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[11;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[14;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[15;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[19;65H\u001b[4P\u001b[19;5H\u001b[4@\u001b[19;11H\u001b[31mIf no unit, check for terrain                             \u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[21;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m34%\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[4;47H\u001b[4P\u001b[4;5H\u001b[4@\u001b[4;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[8;58H\u001b[4P\u001b[8;5H\u001b[4@\u001b[8;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[12;5H    \u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.\u001b[K\r\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;18H\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[16;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[16;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L54\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;13H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[17;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[17;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;5H\u001b[?25l\u001b[31m# value provided may either be contained inside of \"choices\" or             \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[4;5H\u001b[4P\t\b\b\u001b[31mpassed to this function.                \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[8;5H\u001b[4P\t\b\b\u001b[31mState    : None (expected input, tuple)            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[9;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[11;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\n\b\b\b\b\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[23;29H\u001b[7m33% L40\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\t\t\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[8;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   33% L25\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\u001b[?25l\u001b[33mstate\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;12H\u001b[?25lstate ==\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                           \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[7;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m    # State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[32m    # Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[32m    # Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[32m    #            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[32m    def process_none(self, coord):                                              \u001b[39;49m\r\n\u001b[32m        if type(coord) is not tuple:                                            \u001b[39;49m\r\n\u001b[32m            raise Exception(\"\u001b[39;49mExpected \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m!\u001b[32m\")                                  \u001b[39;49m\r\n\u001b[32m        x,y = coord                                                             \u001b[39;49m\r\n\u001b[32m        u = self.grid.unit_at(x,y)                                              \u001b[39;49m\r\n\u001b[32m        team = self.grid.current_team()                                         \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        # If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[32m        if not u:                                                               \u001b[39;49m\r\n\u001b[32m            return None                                                         \u001b[39;49m\r\n\u001b[7;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[7;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l    \u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n    \u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n    \u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n    \u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n        \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n        \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n        \u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[7;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[5;5H    \u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\u001b[6;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;58H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;5H    \u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# value provided may either be contained inside of \"choices\" or             \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[6;12Hstate == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[9;5H\u001b[4P\t\b\b\u001b[31mState    : None (expected input, tuple)            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\n\b\b\b\b\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[23;29H\u001b[7m32%\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;5H\u001b[?25l\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit\u001b[39;49m\u001b[22;1H\u001b[K\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;5H\u001b[?25l\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\t\b\b\u001b[31m           If factory: list of possible buildables\u001b[39;49m\u001b[22;1H        \u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\u001b[A\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;5H\u001b[?25l\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[22;1H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[22;1H            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[22;1H\u001b[K\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[5L\u001b[1;24r\u001b[9;5H\u001b[?25l\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n    \u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[23;30H\u001b[7m2% L32\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[5;5H    \u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\u001b[6;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;58H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;5H    \u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[?25lMark set\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;12H\u001b[?25lu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[9;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[10;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;34H\u001b[7m62\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lAuto-saving...\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[?25l\u001b[31mone (expected input, tuple) \u001b[39;49m\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mne (expected input, tuple) \u001b[39;49m\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me (expected input, tuple) \u001b[39;49m\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m (expected input, tuple) \u001b[39;49m\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mM (expected input, tuple)\u001b[39;49m\u001b[7;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo (expected input, tuple)\u001b[39;49m\u001b[7;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv (expected input, tuple)\u001b[39;49m\u001b[7;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi (expected input, tuple)\u001b[39;49m\u001b[7;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn (expected input, tuple)\u001b[39;49m\u001b[7;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg (expected input, tuple)\u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34mm\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34mv\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34mv\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34mi\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34mg\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\t\b\u001b[?25l\u001b[31munit or friendly factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mnit or friendly factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mit or friendly factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt or friendly factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m or friendly factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mor friendly factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr friendly factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m friendly factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mfriendly factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mriendly factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31miendly factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mendly factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mndly factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mdly factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mly factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m factory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mfactory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mactory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mctory) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mtory) \u001b[39;49m\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mory) \u001b[39;49m\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mry) \u001b[39;49m\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my) \u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[31mnit: coordinates of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mit: coordinates of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt: coordinates of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m: coordinates of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m coordinates of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mcoordinates of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;21H\u001b[?25l\u001b[31moordinates of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mrdinates of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mrdinates of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mdinates of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31minates of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mnates of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mates of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mtes of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mes of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m of range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mof range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m range of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mrange of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mange of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mnge of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mge of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m of unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mof unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf unit \u001b[39;49m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m unit \u001b[39;49m\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31munit \u001b[39;49m\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mnit \u001b[39;49m\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mit \u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[31mofactory: list of possible buildables\u001b[39;49m\u001b[10;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mufactory: list of possible buildables\u001b[39;49m\u001b[10;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mtfactory: list of possible buildables\u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m factory: list of possible buildables\u001b[39;49m\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mofactory: list of possible buildables\u001b[39;49m\u001b[10;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mfactory: list of possible buildables\u001b[39;49m\u001b[10;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m factory: list of possible buildables\u001b[39;49m\u001b[10;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mrfactory: list of possible buildables\u001b[39;49m\u001b[10;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mafactory: list of possible buildables\u001b[39;49m\u001b[10;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mnfactory: list of possible buildables\u001b[39;49m\u001b[10;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mgfactory: list of possible buildables\u001b[39;49m\r\t\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mefactory: list of possible buildables\u001b[39;49m\r\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,factory: list of possible buildables\u001b[39;49m\u001b[10;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m factory: list of possible buildables\u001b[39;49m\u001b[10;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mcfactory: list of possible buildables\u001b[39;49m\u001b[10;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mafactory: list of possible buildables\u001b[39;49m\u001b[10;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mnfactory: list of possible buildables\u001b[39;49m\u001b[10;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mcfactory: list of possible buildables\u001b[39;49m\u001b[10;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mefactory: list of possible buildables\u001b[39;49m\u001b[10;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mlfactory: list of possible buildables\u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mactory: list of possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mctory: list of possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mtory: list of possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mory: list of possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mry: list of possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my: list of possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m: list of possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m list of possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mlist of possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mist of possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mst of possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt of possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m of possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mof possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m possible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mpossible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mossible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mssible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mible buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mble buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mle buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m buildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mbuildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31muildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mildables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[10;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[10;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;41H\u001b[?25l\u001b[31mldables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mdables \u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mables \u001b[39;49m\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mbles \u001b[39;49m\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mles \u001b[39;49m\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mes \u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\n\t\u001b[?25l\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[5;20H\u001b[35mNone\u001b[39;49m\u001b[K\u001b[7;58H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[11;5H    \u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[18;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\n\b\b\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[4;12Hstate == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[7;5H\u001b[4P\t\b\b\u001b[31mState    : None (expected input, tuple)            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[8;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[10;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[18;44H\u001b[4P\u001b[18;5H\u001b[4@\u001b[18;11H\u001b[31mIf no unit, check for terrain        \u001b[39;49m\u001b[19;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[20;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[22;5H    \u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\u001b[23;29H\u001b[7m36% L42\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[4P\u001b[2;3H\u001b[?25l\u001b[31mby a Controller that provides piecewise in\u001b[39;49m\u001b[4@\u001b[31mput.\u001b[39;49m\r\n\u001b[K\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[18;5H\u001b[4P\t\b\b\u001b[31mA coordinate is an x,y location on the grid. In any case,\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[19;5H\u001b[31m# value provided may either be contained inside of \"choices\" or             \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[23;29H\u001b[7m 7% L23\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\n    \u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[23;29H\u001b[7m17% L24\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11L\u001b[1;24r\u001b[2;1H\u001b[?25l\u001b[31m# by a Controller that provides piecewise input.                                \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[A\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[A\u001b[23;29H\u001b[7m 7% L13\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;26H\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;60H\u001b[4P\r\u001b[4@\t\b\b\u001b[?25l\u001b[31mnot, which usually holds all of the legal possible values\u001b[39;49m\u001b[3;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\u001b[K\u001b[8;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[11;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,y = coord\r\n\tu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[17;5H    team = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[19;64H\u001b[4P\u001b[19;5H\u001b[4@\u001b[19;11H\u001b[31mIf no unit, check for terrain                            \u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[21;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m33% L2\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;11H\u001b[?25l\u001b[33my\u001b[39;49m\r\n\t\u001b[33mu\u001b[39;49m\n\b\u001b[33mteam\u001b[39;49m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[4P\u001b[2;3H\u001b[?25l\u001b[31mby a Controller that provides piecewise input.           \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\r\n\u001b[K\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[19;5H\u001b[4P\t\b\b\u001b[31mA coordinate is an x,y location on the grid. In any case,\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[20;5H\u001b[31m# value provided may either be contained inside of \"choices\" or             \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[23;29H\u001b[7m 7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;60H\u001b[4P\r\u001b[4@\t\b\b\u001b[?25l\u001b[31mnot, which usually holds all of the legal possible values\u001b[39;49m\u001b[3;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\u001b[K\u001b[8;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[11;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[17;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[19;64H\u001b[4P\u001b[19;5H\u001b[4@\u001b[19;11H\u001b[31mIf no unit, check for terrain                            \u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[21;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m33\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[4;5H    \u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\u001b[5;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[8;58H\u001b[4P\u001b[8;5H\u001b[4@\u001b[8;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[12;5H    \u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\u001b[19;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tu\u001b[39;49m\u001b[4@\u001b[31mple)\u001b[39;49m\u001b[20;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m66% L41\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L60\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[4;5H    \u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[9;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[11;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[14;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[23;34H\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[11;44H\u001b[4P\u001b[11;5H\u001b[4@\u001b[11;11H\u001b[31mIf no unit, check for terrain        \u001b[39;49m\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;5H    \u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[21;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[23;29H\u001b[7m48% L50\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[11;5H\u001b[4P\t\b\b\u001b[31mA coordinate is an x,y location on the grid. In any case,\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[12;5H\u001b[31m# value provided may either be contained inside of \"choices\" or             \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[16;12Hstate == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[19;5H\u001b[4P\t\b\b\u001b[31mState    : None (expected input, tuple)            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[20;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m14% L31\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[9;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[11;64H\u001b[4P\u001b[11;5H\u001b[4@\u001b[11;11H\u001b[31mIf no unit, check for terrain                            \u001b[39;49m\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;5H    \u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\u001b[16;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[19;58H\u001b[4P\u001b[19;5H\u001b[4@\u001b[19;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[21;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m48\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[4;5H    \u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\u001b[11;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tu\u001b[39;49m\u001b[4@\u001b[31mple)\u001b[39;49m\u001b[12;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[14;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L49\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;57H\u001b[1;22r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\u001b[23;35H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\b\b\u001b[?25lsel\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\r\u001b[K\u001b[9;13H\r\t\b\b\b\b\r\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[9;13H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[22;1H\u001b[K\u001b[23;35H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[11;44H\u001b[4P\u001b[11;5H\u001b[4@\u001b[11;11H\u001b[31mIf no unit, check for terrain        \u001b[39;49m\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;5H    \u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[21;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[23;29H\u001b[7m48% L50\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[11;5H\u001b[4P\t\b\b\u001b[31mA coordinate is an x,y location on the grid. In any case,\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[12;5H\u001b[31m# value provided may either be contained inside of \"choices\" or             \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[16;12Hstate == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[19;5H\u001b[4P\t\b\b\u001b[31mState    : None (expected input, tuple)            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[20;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m14% L31\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[?25lAuto-saving...\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\u001b[23;35H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\b\u001b[?25l(state,\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;37H\b\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[16;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[?25l)\u001b[16;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\b\b\u001b[C\b\u001b[?25l )\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[C\b\u001b[?25lc )\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25lc )\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25lc )\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25lc )\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25lc )\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25lc )\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25lc )\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25lc)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[4;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[9;5H    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[10;5H    team = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[12;64H\u001b[4P\u001b[12;5H\u001b[4@\u001b[12;11H\u001b[31mIf no unit, check for terrain                            \u001b[39;49m\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\u001b[17;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[20;58H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m46% L30\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;18H\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;35H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\b\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;37H\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;35H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[19;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[20;20H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[22;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)          \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[23;29H\u001b[7m64% L51\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[8;13H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[22d    \u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[A\u001b[8d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[5;1H\u001b[1M\u001b[1;24r\u001b[3;13H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[22d    \u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[A\u001b[3d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lAuto-saving...\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[23;35H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\b\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(c)\u001b[K\u001b[6;12Hstate == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[9;5H\u001b[4P\t\b\b\u001b[31mState    : None (expected input, tuple)            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\tu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\tteam = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m32% L42\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\u001b[6;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;58H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;5H    \u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\r\n\u001b[K\u001b[21;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[23;29H\u001b[7m64\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25lc)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l()\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(c)\u001b[K\u001b[6;12Hstate == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[9;5H\u001b[4P\t\b\b\u001b[31mState    : None (expected input, tuple)            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\tu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\tteam = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m32% L42\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[4P\u001b[2;3H\u001b[?25l\u001b[31mby a Controller that provides piecewise input.           \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\r\n\u001b[K\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# A coordinate is an x,y location on the grid. In any case, the             \u001b[39;49m\r\n\u001b[20;5H\u001b[4P\t\b\b\u001b[31mvalue provided may either be contained inside of \"choices\u001b[39;49m\u001b[4@\u001b[31m\" or\u001b[39;49m\u001b[21;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[23;29H\u001b[7m 7% L23\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;60H\u001b[4P\r\u001b[4@\t\b\b\u001b[?25l\u001b[31mnot, which usually holds all of the legal possible values\u001b[39;49m\u001b[3;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(c)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\u001b[K\u001b[9;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[17;5H    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[18;5H    team = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[20;64H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mIf no unit, check for terrain                            \u001b[39;49m\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m32\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[7;1H\u001b[1M\u001b[1;24r\u001b[5;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[6;21H\u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[22;1H\u001b[K\u001b[5d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;11H\u001b[?25l\u001b[33my\u001b[39;49m\r\n\t\u001b[33mu\u001b[39;49m\n\b\u001b[33mteam\u001b[39;49m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[4;5H    \u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\u001b[5;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[8;58H\u001b[4P\u001b[8;5H\u001b[4@\u001b[8;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[12;5H    \u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[18;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\r\n\u001b[K\u001b[20;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[23;29H\u001b[7m64% L41\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[4;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L60\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[4;64H\u001b[4P\u001b[4;5H\u001b[4@\u001b[4;11H\u001b[31mIf unit is friendly and ready, switch to moving state and\u001b[39;49m\u001b[5;5H    \u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[10;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[12;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[15;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[23;34H\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;47H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[21;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[23;29H\u001b[7m47% L50\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[4;5H    \u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[10;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\r\n\u001b[K\u001b[12;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[15;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L49\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;47H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[21;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[23;29H\u001b[7m47%\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\t\b\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25lNon\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[4;5H    \u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[10;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\r\n\u001b[K\u001b[12;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[15;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L49\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;47H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[21;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[23;29H\u001b[7m47%\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[?25lAuto-saving...\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;20H\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[K\u001b[23;35H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                   \u001b[39;49m\r\n\u001b[32m            return                                                              \u001b[39;49m\r\n\u001b[13;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        # If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\u001b[32m        if u and u.team is not team:                                            \u001b[39;49m\r\n\u001b[32m            return None                                                         \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        # If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\u001b[32m        if u and u.team is team and not u.ready:                                \u001b[39;49m\r\n\u001b[32m            return None                                                         \u001b[39;49m\r\n\u001b[13;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mB\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[K\u001b[13;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                            \u001b[39;49m\r\n\u001b[32m            return                                                              \u001b[39;49m\r\n\u001b[13;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mE\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[32mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[K\u001b[13;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[13;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\n\u001b[?25l        \u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n        \u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[14;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[14;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\u001b[23;35H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                      \u001b[39;49m\r\n\u001b[32m            self.choices = [\"\u001b[39;49mBack\u001b[32m\",\"\u001b[39;49mEnd Turn\u001b[32m\"]                                  \u001b[39;49m\r\n\u001b[13;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m            return self.choices                                                 \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        # If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\u001b[32m        if u and u.team is not team:                                            \u001b[39;49m\r\n\u001b[32m            return None                                                         \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        # If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\u001b[32m        if u and u.team is team and not u.ready:                                \u001b[39;49m\r\n\u001b[13;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[23d\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[13;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\n        \u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n        \u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[13;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;7H\u001b[?25l\u001b[31mA string is the input from a menu, such as \"attack\" or \"wait\".\u001b[39;49m\u001b[3;7H\u001b[31mA coordinate is an x,y location on the grid. In any case, the\u001b[39;49m\u001b[4;5H\u001b[31m# value provided may either be contained inside of \"choices\" or             \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[11;5H\u001b[4P\t\b\b\u001b[31mState    : None (expected input, tu\u001b[39;49m\u001b[4@\u001b[31mple)\u001b[39;49m\u001b[12;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[14;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[23;29H\u001b[7m23% L29\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[1;21r\u001b[9;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\u001b[22d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\b\u001b[K\r\u001b[K\t\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\r\u001b[K\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\u001b[?25l\u001b[33mstate\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;12H\u001b[?25lstate ==\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                           \u001b[39;49m\r\n\u001b[32m        if state == \"\u001b[39;49mmoving\u001b[32m\": return process_moving(c)                          \u001b[39;49m\r\n\u001b[9;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\u001b[9;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lAuto-saving...\u001b[19;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[19;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\b\b\b\b\b\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;7H\u001b[?25l\u001b[31mExpected : Tuple (unit or friendly factory)                   \u001b[39;49m\u001b[3;7H\u001b[31mNext step: If unit: coordinates of range of unit             \u001b[39;49m\u001b[4;7H\u001b[31m           If factory: list of possible buildables           \u001b[39;49m\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[7;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[12;42H\u001b[4P\u001b[12;5H\u001b[4@\u001b[12;11H\u001b[31mIf no unit, check for terrain      \u001b[39;49m\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[16;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\u001b[23;29H\u001b[7m45% L40\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\u001b[3;58H\u001b[4P\u001b[3;5H\u001b[4@\u001b[3;11H\u001b[?25l\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\r\n\u001b[K\u001b[15;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[18;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\u001b[K\n\n\u001b[K\u001b[23;29H\u001b[7mBot L49\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\n\n\u001b[?25lEnd of buffer\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u0007\u0007\n\n\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;37H\n\n\n\n\b\b\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\b\b\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\n\n\u001b[?25lEnd of buffer\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\b\b\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[2;5H\u001b[?25l\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[3;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[4;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[15;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[16;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\u001b[18;47H\u001b[4P\u001b[18;5H\u001b[4@\u001b[18;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[19;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\u001b[23;29H\u001b[7m45% L50\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;58H\u001b[4P\u001b[3;5H\u001b[4@\u001b[3;11H\u001b[?25l\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\r\n\u001b[K\u001b[15;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[18;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\u001b[K\n\n\u001b[K\u001b[23;29H\u001b[7mBot L49\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[3;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[4;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[15;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[16;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\u001b[18;47H\u001b[4P\u001b[18;5H\u001b[4@\u001b[18;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[19;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\u001b[23;29H\u001b[7m45%\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# A coordinate is an x,y location on the grid. In any case, the             \u001b[39;49m\r\n\u001b[12;5H\u001b[4P\t\b\b\u001b[31mvalue provided may either be contained inside of \"choices\u001b[39;49m\u001b[4@\u001b[31m\" or\u001b[39;49m\u001b[13;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[22;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[23;29H\u001b[7m13% L31\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[4;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[9;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[10;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[12;64H\u001b[4P\u001b[12;5H\u001b[4@\u001b[12;11H\u001b[31mIf no unit, check for terrain                            \u001b[39;49m\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[20;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[22;58H\u001b[4P\u001b[22;5H\u001b[4@\u001b[22;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[23;29H\u001b[7m45\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\u001b[K\u001b[3;58H\u001b[4P\u001b[3;5H\u001b[4@\u001b[3;11H\u001b[?25l\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\r\n\u001b[K\u001b[15;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[18;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\u001b[K\n\n\u001b[K\u001b[23;29H\u001b[7mBot L49\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\n\u001b[?25lEnd of buffer\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\n\u001b[K\u001b[2;5H\u001b[?25l\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[3;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[4;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[15;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[16;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\u001b[18;47H\u001b[4P\u001b[18;5H\u001b[4@\u001b[18;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[19;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\u001b[23;29H\u001b[7m45% L50\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lAuto-saving...\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[8;1H\u001b[1M\u001b[1;24r\u001b[6;13H\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[22;1H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[8;1H\u001b[1M\u001b[1;24r\u001b[6;9H\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[22;1H            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[8;1H\u001b[1M\u001b[1;24r\u001b[6;9H\u001b[?25l\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[22;1H\u001b[K\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[8;1H\u001b[1M\u001b[1;24r\u001b[6;9H\u001b[?25l\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[22d        \u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\u001b[A\u001b[6d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[8;1H\u001b[1M\u001b[1;24r\u001b[7;9H\u001b[?25l\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[22d        \u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\u001b[A\u001b[6d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[8;1H\u001b[5L\u001b[1;24r\u001b[6;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n        \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n        \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n        \u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[A\u001b[23;30H\u001b[7m5% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2d\u001b[K\u001b[3;58H\u001b[4P\u001b[3;5H\u001b[4@\u001b[3;11H\u001b[?25l\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\r\n\u001b[K\u001b[15;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[18;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\u001b[K\n\n\u001b[K\u001b[23;29H\u001b[7mBot L4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[?25lMark set\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[3;5H\u001b[4P\t\b\b\u001b[31mExpected : Tuple in range                          \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[4;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[5;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;34H\u001b[7m72\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m69\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;20H\r\n\u001b[K\n\t\u001b[?25l\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[23;34H\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\u001b[?25l\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\u001b[5;47H\u001b[4P\u001b[5;5H\u001b[4@\u001b[5;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[21;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[23;29H\u001b[7m59% L63\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[9;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[10;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[21;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\n\b\b\b\u001b[7m32% L44\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[7;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[9;58H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\r\n\u001b[K\u001b[21;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[23;29H\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[5;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[8;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L62\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;22H\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\r\n\tu\u001b[10;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l0\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\r\n\t\u001b[33mu\u001b[39;49m\u001b[10;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lox,y)\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[?25loy)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[14;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[17;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[17;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[17;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[17;48H\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\u001b[5;47H\u001b[4P\u001b[5;5H\u001b[4@\u001b[5;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\u001b[14;11H\u001b[31mgive the controller the list of valid move locations.            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[21;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[23;29H\u001b[7m56% L63\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[9;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[10;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[21;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\n\b\b\b\u001b[7m30% L44\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[?25l\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# A coordinate is an x,y location on the grid. In any case, the             \u001b[39;49m\r\n\u001b[18;5H\u001b[4P\t\b\b\u001b[31mvalue provided may either be contained inside of \"choices\u001b[39;49m\u001b[4@\u001b[31m\" or\u001b[39;49m\u001b[19;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[23;29H\u001b[7m 8% L25\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\u001b[?25l    \u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[A\u001b[23;35H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mv\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m\u001b[K\u001b[23;35H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[15;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mC\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\b\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\b\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\b\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9 \u001b[0m\u001b[39;49m\u001b[27m\u001b[6;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\u001b[8;14H\u001b[?25lstate = \u001b[35mNone\u001b[39;49m\u001b[9;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\u001b[K\u001b[12;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\r\n\u001b[K\u001b[16;5H\u001b[31m# Call this when we return back to the top of the action tree.              \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[18;14Haction = []\u001b[K\u001b[19;14Hchoices = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;34H\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[8;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[9;14Haction = []\u001b[K\u001b[22;1H    \u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[A\u001b[8d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[8;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\u001b[K\u001b[22d    \u001b[31m# A coordinate is an x,y location on the grid. In any case, the             \u001b[39;49m\r\n\u001b[A\u001b[8d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[9;5H\u001b[?25l\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[22d    \u001b[31m# value provided may either be contained inside of \"choices\" or             \u001b[39;49m\r\n\u001b[A\u001b[8d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# A coordinate is an x,y location on the grid. In any case, the             \u001b[39;49m\r\n\u001b[3;64H\u001b[4P\r\u001b[4@\t\b\b\u001b[31mvalue provided may either be contained inside of \"choices\" or\u001b[39;49m\r\n    \u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit            \u001b[39;49m\u001b[14;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[19;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[20;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[22;64H\u001b[4P\u001b[22;5H\u001b[4@\u001b[22;11H\u001b[31mIf no unit, check for terrain                            \u001b[39;49m\u001b[23;29H\u001b[7m25% L24\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;64H\u001b[4P\u001b[3;5H\u001b[4@\u001b[3;11H\u001b[?25l\u001b[31mIf no unit, check for terrain                            \u001b[39;49m\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;58H\u001b[4P\u001b[13;5H\u001b[4@\u001b[13;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\u001b[23;29H\u001b[7m55% L43\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\r\n\u001b[K\u001b[6;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[9;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[12;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[18;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\r\n\u001b[K\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\u001b[K\u001b[23;29H\u001b[7mBot L62\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lAuto-saving...\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[6;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[7;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\u001b[9;47H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\u001b[18;11H\u001b[31mgive the controller the list of valid move locations.            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[23;29H\u001b[7m55%\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\r\n\u001b[K\u001b[6;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[9;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[12;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[18;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\r\n\u001b[K\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\u001b[K\u001b[23;29H\u001b[7mBot\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[?25lEnd of buffer\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[K\u001b[22;9H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25lst\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[7;5H    \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[K\n\u001b[K\u001b[10;5H    \u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\n\n\u001b[K\n\u001b[K\u001b[23;35H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[9;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[12;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\n\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[23;35H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;47H\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[K\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;29H\u001b[?25l\u001b[7m75% L80\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[20;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[20;37H\u001b[?25l)\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;13H\u001b[?25l\u001b[31m#                                                                   \u001b[39;49m\r\n\u001b[21;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[22;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\r\u001b[K\u001b[21;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[21;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[21;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[K\u001b[21;28H\r\n\n\n\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[4;20H\u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\r\n\u001b[K\u001b[7;7H\u001b[31mGet the unit at x,y.     \u001b[39;49m\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\u001b[9;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Return the actions that the given unit can take if it were                \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# at x,y.                                                                   \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mactions\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, x, y):\u001b[K\r\n\t\u001b[33macts\u001b[39;49m = []\u001b[K\r\n\t\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x-1,y)\r\n\t\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x+1,y)\u001b[K\r\n\t\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y-1)\u001b[K\r\n\t\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y+1)\u001b[K\r\n\t\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   21% L97   Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[3;12Ha1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: acts.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\r\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                           \u001b[39;49m\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\u001b[15;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile.unit:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\u001b[K\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(a,b)\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[10;5H                _floodfill((a-1,b),r-1)\u001b[K\u001b[11;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[12;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[13;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[14;5H    _floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[17;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\u001b[19;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[20;5H\u001b[4P\t\b\b\u001b[31mthrow exception if move is illegal. CHECK FIRST.     \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[23;29H\u001b[7m31% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[9;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[12;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[19;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[20;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[21;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move(\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.\u001b[K\u001b[23;4H\u001b[7mU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   73% L81    (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\r\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[?25l)\r\t\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25lAuto-saving...\u001b[22;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\b\b\b\u001b[?25ldone\u001b[A\u001b[A\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[H\n\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[7;5H    \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L83\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\u001b[7;11H\u001b[31mgive the controller the list of valid move locations.            \u001b[39;49m\u001b[8;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[10;18Hstate = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[11;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[12;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\r\n\u001b[K\u001b[14;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[17;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[20;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\n\b\b\u001b[7m61% L74\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\u001b[17;47H\u001b[4P\u001b[17;5H\u001b[4@\u001b[17;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[23;29H\u001b[7m41% L55\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;7H\u001b[?25l\u001b[31mCall this when we return back to the top of the action tree.\u001b[39;49m\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# A coordinate is an x,y location on the grid. In any case, the             \u001b[39;49m\r\n\u001b[11;5H\u001b[4P\t\b\b\u001b[31mvalue provided may either be contained inside of \"choices\u001b[39;49m\u001b[4@\u001b[31m\" or\u001b[39;49m\u001b[12;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[21;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m14% L36\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# A rules object handles all of the actual game play elements. The rules        \u001b[39;49m\r\n\u001b[31m# are what give meaning to the pieces in a Grid, and is controlled (usually)    \u001b[39;49m\r\n\u001b[31m# by a Controller that provides piecewise input.                                \u001b[39;49m\r\n\u001b[K\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis is the attack action.\u001b[39;49m\r\n\t\u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# Call this when we return back to the top of the action tree.              \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9 \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[7;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[8;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[1;22r\u001b[7;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;34H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[1;22r\u001b[7;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[9;1H\u001b[1M\u001b[1;24r\u001b[8;1H\u001b[?25l\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[22d        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[9;1H\u001b[1L\u001b[1;24r\u001b[8;1H\u001b[K\n\u001b[?25l\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[A\u001b[23;34H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[23;35H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[13;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[13;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2d\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[7;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[9;64H\u001b[4P\r\u001b[4@\t\b\b\u001b[31mA coordinate is an x,y location on the grid. In any case, the\u001b[39;49m\r\n    \u001b[31m# value provided may either be contained inside of \"choices\" or             \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit            \u001b[39;49m\u001b[21;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\n\b\b\b\b\b\b\u001b[7m17% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[7;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[8;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[10;64H\u001b[4P\u001b[10;5H\u001b[4@\u001b[10;11H\u001b[31mIf no unit, check for terrain                            \u001b[39;49m\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[12;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[18;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[20;58H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m44% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\b\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\b\b\u001b[?25lsel\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25l\u001b[32m\"                                                            \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[14;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices\r\n\u001b[K\u001b[21;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[23;29H\u001b[7m56% L60\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\b\b\u001b[?25lsel\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25l\u001b[32m\"                                                            \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[19;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[19;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[8;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"coord\"\u001b[39;49m\r\n\u001b[K\u001b[10;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[13;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel                       \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[15;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[16;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[22;5H    \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[23;29H\u001b[7m66% L71\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31m           If out of range, cancel                       \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[4;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[5;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[11;5H    \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\u001b[K\n\n\u001b[K\u001b[23;29H\u001b[7mBot L82\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[32m\"                                                                \u001b[39;49m\r\n\u001b[A\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m_\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\u001b[?25l\u001b[32mover\"\u001b[39;49m\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\t\b\t\u001b[C\b\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[19;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[19;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\n\n\u001b[?25lEnd of buffer\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[K\u001b[2;47H\u001b[4P\u001b[2;5H\u001b[4@\u001b[2;11H\u001b[?25l\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\u001b[11;11H\u001b[31mgive the controller the list of valid move locations.            \u001b[39;49m\u001b[12;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[14;18Hstate = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[15;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"coord\"\u001b[39;49m\r\n\u001b[K\u001b[18;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[23;29H\u001b[7m58% L73\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[6;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[7;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[18;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[21;47H\u001b[4P\u001b[21;5H\u001b[4@\u001b[21;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\u001b[23;29H\u001b[7m37% L54\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\u001b[4;5H    \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[6;7H\u001b[31mCall this when we return back to the top of the action tree.\u001b[39;49m\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# A coordinate is an x,y location on the grid. In any case, the             \u001b[39;49m\r\n\u001b[15;5H\u001b[4P\t\b\b\u001b[31mvalue provided may either be contained inside of \"choices\u001b[39;49m\u001b[4@\u001b[31m\" or\u001b[39;49m\u001b[16;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m12% L35\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# A rules object handles all of the actual game play elements. The rules        \u001b[39;49m\r\n\u001b[31m# are what give meaning to the pieces in a Grid, and is controlled (usually)    \u001b[39;49m\r\n\u001b[31m# by a Controller that provides piecewise input.                                \u001b[39;49m\r\n\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = grid\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis is the attack action.                               \u001b[39;49m\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# Call this when we return back to the top of the action tree.              \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[7;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[9;64H\u001b[4P\r\u001b[4@\t\b\b\u001b[31mA coordinate is an x,y location on the grid. In any case, the\u001b[39;49m\r\n    \u001b[31m# value provided may either be contained inside of \"choices\" or             \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# not, which usually holds all of the legal possible values                 \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# passed to this function.                                                  \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit            \u001b[39;49m\u001b[21;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\n\b\b\b\b\b\b\u001b[7m17%\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[31m                \u001b[39;49m\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[31m# value provided may eith\u001b[39;49m\\\r\n\u001b[31mer be contained inside of \"choices\" or                             \u001b[39;49m\u001b[9;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;55H\u001b[?25l\u001b[31m                          \u001b[39;49m\r\n    \u001b[31m# not, which usually holds all of the legal possible values\u001b[39;49m\u001b[22;1H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;30H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[31m# not, which usually hold\u001b[39;49m\\\r\n\u001b[31ms all of the legal possible values                             \u001b[39;49m\u001b[9;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;55H\u001b[?25l\u001b[31m                          \u001b[39;49m\r\n    \u001b[31m# passed to this function.    \u001b[39;49m\u001b[22;1H            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[9;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[31m# passed to this function\u001b[39;49m\\\r\n\u001b[31m.                             \u001b[39;49m\u001b[9;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;55H\u001b[?25l\u001b[31m                          \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[22;1H        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[9;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[22;11H\u001b[?25ly\u001b[9;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[9;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[9;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[K\u001b[10d\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[23;35H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[10;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mH\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m:\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[23;35H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[11;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[4P\u001b[11;77H\u001b[?25l\u001b[31m    \u001b[39;49m\r\n\u001b[A\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[4@\u001b[11;6H\u001b[C\t\b\t\u001b[C\u001b[C\u001b[?25l\u001b[31mN\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m:\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[23;34H\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[12;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[4P\u001b[12;77H\u001b[?25l\u001b[31m    \u001b[39;49m\r\n\u001b[A\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[4@\u001b[12;6H\u001b[C\t\b\t\u001b[C\u001b[C\u001b[?25l\u001b[31mM\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m:\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\t\b\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[23;35H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[13;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[4P\u001b[13;77H\u001b[?25l\u001b[31m    \u001b[39;49m\r\n\u001b[A\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\u001b[4@\t\b\b\t\b\t\u001b[C\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m:\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[23;35H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[14;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\t\b\t\u001b[C\u001b[C\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m:\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[14;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[14;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[14;55H\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[4;14Hgrid = grid\u001b[K\u001b[5;14Hcheckpoint = grid\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\r\n\u001b[K\u001b[8;7H\u001b[31mThis is the attack action.                                    \u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mCall this when we return back to the top of the action tree.\u001b[39;49m\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\t\b\b\u001b[31mA coordinate is an x,y location on the grid.\u001b[39;49m\u001b[21;7H\u001b[31mHas one of four return values:             \u001b[39;49m\u001b[22;7H\u001b[31m    None: Tell the controller to do nothing     \u001b[39;49m\u001b[23;29H\u001b[7m 7% L19\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[5;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[5;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ python\r\nPython 2.7.5+ (default, Sep 19 2013, 13:49:51) \r\n[GCC 4.8.1] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> h\b\u001b[Kimport o\b\u001b[Kcopy\r\n>>> help(cpoy\b\u001b[K\b\u001b[K\b\u001b[Kopy)\r\n\u001b[?1049h\u001b[?1h\u001b=\rHelp on module copy:\r\n\r\n\u001b[1mNAME\u001b[0m\r\n    copy - Generic (shallow and deep) copying operations.\r\n\r\n\u001b[1mFILE\u001b[0m\r\n    /usr/lib/python2.7/copy.py\r\n\r\n\u001b[1mMODULE DOCS\u001b[0m\r\n    http://docs.python.org/library/copy\r\n\r\n\u001b[1mDESCRIPTION\u001b[0m\r\n    Interface summary:\r\n    \r\n            import copy\r\n    \r\n            x = copy.copy(y)        # make a shallow copy of y\r\n            x = copy.deepcopy(y)    # make a deep copy of y\r\n    \r\n    For module specific errors, copy.Error is raised.\r\n    \r\n    The difference between shallow and deep copying is only relevant for\r\n    compound objects (objects that contain other objects, like lists or\r\n:\u001b[K\r\u001b[K\u001b[?1l\u001b>\u001b[?1049l\r\n>>> \r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ python\b\b\b\b\b\b\u001b[4Pfg\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deep_copy(grid)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n    \u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\u001b[K\r\n        \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# Call this when we return back to the top of the action tree.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m    7% L12    (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[5;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[17;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;51H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[17;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[17;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[K\u001b[19d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m    7% L25\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[32m\"                                                                \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[18;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[18;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[18;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[18;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2d\u001b[?25l    \u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[5;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[6;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[7;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\t\b\b\u001b[31m    undo: Tell the controller to reload the grid\u001b[39;49m\r\n\t\u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[17;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[20;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[21;5H    \u001b[33mx\u001b[39;49m,y = coord\u001b[K\u001b[22;5H    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\n\b\b\b\b\b\b\u001b[7m24% L28\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mx\u001b[39;49m,y = coord\u001b[K\u001b[3;5H    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[4;5H    team = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[6;49H\u001b[4P\u001b[6;5H\u001b[4@\u001b[6;11H\u001b[31mIf no unit, check for terrain             \u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[14;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[16;58H\u001b[4P\u001b[16;5H\u001b[4@\u001b[16;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[23;29H\u001b[7m52% L47\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[5;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"coord\"\u001b[39;49m\r\n\u001b[K\u001b[9;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[12;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[15;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[21;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[22;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\n\b\b\b\b\b\u001b[7m70% L66\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;11H\u001b[?25l\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[3;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[5;18Hgrid.move_unit((ox,oy),(x,y))\u001b[6;18H\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"undo\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L85\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;22H\b\u001b[?25l\u001b[32m                                                            \u001b[39;49m\r\n\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\b\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l;\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[10;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[10;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;28H\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\r\n\u001b[K\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[4;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[7;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.\r\n\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[23;35H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;18H\b\u001b[K\b\b\b\b\u001b[?25lsel\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\r\u001b[K\u001b[17;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                    \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[17;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\r\n\u001b[K\u001b[17;28H\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                   \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mW\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                            \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[17;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mC\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[17;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                      \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[18;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m        # If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\u001b[32m        return self.start_over()                                                \u001b[39;49m\r\n\u001b[18;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[18;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l        \u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[18;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[4;47H\u001b[4P\u001b[4;5H\u001b[4@\u001b[4;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\u001b[13;11H\u001b[31mgive the controller the list of valid move locations.            \u001b[39;49m\u001b[14;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[16;18Hstate = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\n\b\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[18;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"coord\"\u001b[39;49m\u001b[K\u001b[20;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[21;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[23;29H\u001b[7m58% L75\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[8;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[9;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[20;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[21;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m36% L56\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# Call this when we return back to the top of the action tree.              \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"undo\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[16;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[17;5H\u001b[4P\t\b\b\u001b[31m    menu: Tell the controller to render a \u001b[39;49m\u001b[4@\u001b[31mmenu\u001b[39;49m\u001b[18;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[23;29H\u001b[7m14% L37\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# A rules object handles all of the actual game play elements. The rules        \u001b[39;49m\r\n\u001b[31m# are what give meaning to the pieces in a Grid, and is controlled (usually)    \u001b[39;49m\r\n\u001b[4P\u001b[4;3H\u001b[31mby a Controller that provides piecewise input.              \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(grid)\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis is the attack action.                 \u001b[39;49m\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# Call this when we return back to the top of the action tree.              \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9 \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[9;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lM\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lU\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9 \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lET_COORD\u001b[K\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT_COORD\u001b[K\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_COORD\u001b[K\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC_COORD\r\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO_COORD\u001b[9;3H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN_COORD\u001b[9;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT_COORD\u001b[9;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR_COORD\u001b[9;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO_COORD\u001b[9;7H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL_COORD\r\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;8H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25lCGET_MENU\r\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lOGET_MENU\u001b[10;3H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lNGET_MENU\u001b[10;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lTGET_MENU\u001b[10;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lRGET_MENU\u001b[10;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lOGET_MENU\r\t\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lLGET_MENU\r\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lET_MENU\u001b[K\r\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT_MENU\u001b[K\r\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_MENU\u001b[K\r\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;13H\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lU\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9 \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;13H\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\r\u001b[?25l\u001b[33mCONTROL_COORD\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\\\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l2\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\b\b\b\b\u001b[K\u001b[C\u001b[?25l\\\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l2\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\b\b\b\b\u001b[K\u001b[C\r\u001b[?25l\u001b[33mCONTROL_MENU\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\t\b\b\u001b[K\t\b\u001b[?25l2\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\u001b[?25l\u001b[33mCONTROL_UNDO\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l3\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9 \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9 \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\t\u001b[?25l\u001b[33mCOORD\u001b[39;49m = 1\r\n\t\u001b[33mMENU\u001b[39;49m = 2\r\n\u001b[33mCONTROL_UNDO\u001b[39;49m = 3\u001b[K\u001b[23;34H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[9;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mC\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;8H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mR\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;3H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;3H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mR\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9 \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1M\u001b[1;24r\u001b[15;1H\u001b[?25l\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[22d    \u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[A\u001b[14d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[?25l    \u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\u001b[K\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\r\n\u001b[K\u001b[7;5H\u001b[31m# Call this when we return back to the top of the action tree.              \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"undo\"\u001b[39;49m\u001b[15;62H\u001b[4P\r\u001b[4@\t\b\b\u001b[31mThis processes input of two types: coordinates and strings.\u001b[39;49m\r\n    \u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\t\b\b\u001b[31m    undo: Tell the controller to reload the grid\u001b[39;49m\u001b[23;29H\u001b[7m14% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\t\b\b\u001b[31m    undo: Tell the controller to reload the grid\u001b[39;49m\r\n\t\u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[15;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[16;5H    \u001b[33mx\u001b[39;49m,y = coord\u001b[K\u001b[17;5H    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[18;5H    team = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\t\t\t\t\t\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mIf no unit, check for terrain             \u001b[39;49m\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m34% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;7H\u001b[?25l\u001b[31mThis is the attack action.                      \u001b[39;49m\r\n\t\u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# Call this when we return back to the top of the action tree.              \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"undo\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[20;5H\u001b[4P\t\b\b\u001b[31m    menu: Tell the controller to render a \u001b[39;49m\u001b[4@\u001b[31mmenu\u001b[39;49m\u001b[21;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[23;29H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;22H\b\u001b[?25l\u001b[32m                                                            \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[13;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\r\n\u001b[K\u001b[A\t\t\b\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lU\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\t\b\b\u001b[31m    undo: Tell the controller to reload the grid\u001b[39;49m\r\n\t\u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[15;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[16;5H    \u001b[33mx\u001b[39;49m,y = coord\u001b[K\u001b[17;5H    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[18;5H    team = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\t\t\t\t\t\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mIf no unit, check for terrain             \u001b[39;49m\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m34% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[9;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[11;58H\u001b[4P\u001b[11;5H\u001b[4@\u001b[11;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"coord\"\u001b[39;49m\r\n\u001b[K\u001b[23;29H\u001b[7m57% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lAuto-saving...\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;27H\b\u001b[?25l\u001b[32m                                                       \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\r\n\u001b[K\u001b[21;20H\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[10;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[12;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[15;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel                       \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[17;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[18;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\u001b[32m        u = self.grid.unit_at(ox,oy)                                            \u001b[39;49m\r\n\u001b[32m        team = self.grid.current_team()                                         \u001b[39;49m\r\n\u001b[23;29H\u001b[7m67% L79\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25l        \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n        \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[18;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m69\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[9;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;64H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mIf unit is friendly and ready, switch to moving state and\u001b[39;49m\u001b[16;5H    \u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\u001b[17;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m57% L68\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25lNon\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25lNon\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[10;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[12;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[15;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel                       \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[17;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[18;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[23;29H\u001b[7m67% L79\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[4;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel                       \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[6;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[7;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[13;5H    \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[16;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7mBot L90\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;13H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lAuto-saving...\u001b[19;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[19;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[19;22H\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lM\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lU\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m100\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;36H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u0007\u0007\u0007\u0007\u001b[24d\u001b[K\u001b[2;11H\u001b[?25l\u001b[31mgive the controller the list of valid move locations.            \u001b[39;49m\u001b[3;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[5;18Hstate = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[6;28H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[7;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[9;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[10;5H\u001b[4P\t\b\b\u001b[31mExpected : Tuple in range                      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[11;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[15;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\n\b\b\b\b\b\u001b[7m69% L92 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\tu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\tteam = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[9;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[12;47H\u001b[4P\u001b[12;5H\u001b[4@\u001b[12;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\u001b[21;11H\u001b[31mgive the controller the list of valid move locations.            \u001b[39;49m\u001b[22;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[23;29H\u001b[7m52% L73\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[5;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[6;5H\u001b[4P\t\b\b\u001b[31m    menu: Tell the controller to render a \u001b[39;49m\u001b[4@\u001b[31mmenu\u001b[39;49m\u001b[7;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[8;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[16;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[17;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\tu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\n\b\b\b\b\b\b\u001b[7m26% L54\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mx\u001b[39;49m,y = coord\u001b[K\u001b[3;5H    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[4;5H    team = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[6;49H\u001b[4P\u001b[6;5H\u001b[4@\u001b[6;11H\u001b[31mIf no unit, check for terrain             \u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[14;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[16;58H\u001b[4P\u001b[16;5H\u001b[4@\u001b[16;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[23;29H\u001b[7m52\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[5;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[6;5H\u001b[4P\t\b\b\u001b[31m    menu: Tell the controller to render a \u001b[39;49m\u001b[4@\u001b[31mmenu\u001b[39;49m\u001b[7;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[8;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[16;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[17;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\tu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\n\b\b\b\b\b\b\u001b[7m26\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(grid)\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[8;7H\u001b[31mThis is the attack action.                      \u001b[39;49m\r\n\t\u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# Call this when we return back to the top of the action tree.              \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[23;29H\u001b[7m10% L35\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mw\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\t\b\b\b\b\u001b[?25lde\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\r\u001b[K\u001b[20;5H\r\u001b[1;22r\u001b[21;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[?25l    \u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[A\u001b[23;35H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[?25l    \u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[A\u001b[23;35H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\t\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mu\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[34mreturn_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\b\b\b\b\b\b\b\b\b\b\b\t\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[20;20H\b\u001b[?25l,)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l )\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[21;12H\u001b[?25l\u001b[33mnew_state\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;12H\u001b[?25lnew_state ==\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\n\n\b\u001b[7m 9\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\u001b[A\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[22;13H\u001b[H\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[4;14Hchoices = []\u001b[5;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[6;14Hgrid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\n\t\u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m new_state == \u001b[35mNone\u001b[39;49m:\r\n\n\u001b[K\u001b[13;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[17;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[18;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[23;29H\u001b[7m18% L36\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[6;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[6;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[6;1H\u001b[1M\u001b[1;24r\u001b[4;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[5;14Hgrid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[22;1H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[6;1H\u001b[1M\u001b[1;24r\u001b[4;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[22;1H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\u001b[23;30H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[6;1H\u001b[1M\u001b[1;24r\u001b[4;9H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[22d\u001b[K\u001b[4d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[6;1H\u001b[1M\u001b[1;24r\u001b[5;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[22;1H    \u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[A\u001b[4d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\u001b[?25l    \u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[A\u001b[23;35H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[4L\u001b[1;24r\u001b[8;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;30H\u001b[7m8% L36\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[4P\r\u001b[4P\u001b[8@\t\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[4@\u001b[8;13H\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[4@\u001b[9;13H\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[4@\u001b[10;13H\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[4@\u001b[11;13H\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;29H\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\u001b[?25l\\\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[12;13H\r\t\b\b\b\b\u001b[12;13H\r\t\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25lels\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\r\u001b[K\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\u001b[?25l\u001b[33mstate\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\u001b[?25lstate ==\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(grid)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# Call this when we return back to the top of the action tree.              \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\u001b[K\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m new_state == \u001b[35mNone\u001b[39;49m:\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[20;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[21;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\n\u001b[7m 9% L25\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[22;1H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state ==\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;29H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\u001b[K\u001b[22d\u001b[K\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[13;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[22;1H\u001b[K\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m new_state == \u001b[35mNone\u001b[39;49m:\u001b[K\u001b[22;1H    \u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[A\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;26H\b\b\b\u001b[?25l()\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l()\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l()\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l()\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l()\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l()\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l()\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt()\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le()\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lM)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[23;35H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[12;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[23;29H\u001b[7m 9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[12;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[12;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;54H\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[23;35H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[13;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mx\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state ==\u001b[K\r\n\u001b[K\n\u001b[K\u001b[5;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\t\b\b\u001b[31mHas one of four return values:\u001b[39;49m\u001b[9;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[10;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[11;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\t\b\b\u001b[31m    undo: Tell the controller to reload the grid        \u001b[39;49m\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[15;12Hstate == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\u001b[K\u001b[18;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\n\b\b\b\b\b\b\u001b[7m26% L34\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11L\u001b[1;24r\u001b[2;1H\u001b[?25l        \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m new_state == \u001b[35mNone\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[23d\u001b[7m16% L33\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;21H\u001b[2;5H\u001b[?25l\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\t\b\b\u001b[31m    undo: Tell the controller to reload the grid        \u001b[39;49m\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[7;12Hstate == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\u001b[K\u001b[10;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[13;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[16;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[17;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[18;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[19;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\t\t\t\t\t\u001b[4P\u001b[21;5H\u001b[4@\u001b[21;11H\u001b[31mIf no unit, check for terrain             \u001b[39;49m\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[23;29H\u001b[7m35% L42\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[4;7H\u001b[31mThis sets the new state and returns the appropriate code\u001b[39;49m\u001b[5;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[7;12Hnew_state == \u001b[35mNone\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[10;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[12;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state ==\u001b[K\r\n\u001b[K\n\u001b[K\u001b[16;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[21;5H\u001b[4P\t\b\b\u001b[31m    menu: Tell the controller to render a \u001b[39;49m\u001b[4@\u001b[31mmenu\u001b[39;49m\u001b[22;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[23;29H\u001b[7m16\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;21H\u001b[?25l\u001b[32m\"                                                           \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[13;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m    # This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[32m    # A string is the input from a menu, such as \"\u001b[39;49mattack\u001b[32m\" or \"\u001b[39;49mwait\u001b[32m\".            \u001b[39;49m\r\n\u001b[32m    # A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[32m    # Has one of four return values:                                            \u001b[39;49m\r\n\u001b[32m    #     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[32m    #     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[32m    #     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\n\u001b[?25l    \u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n    \u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n    \u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n    \u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n    \u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n    \u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n    \u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[13;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;13H\r\t\b\b\b\b\r\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[?25l    \u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[A\u001b[23;35H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m new_state == \u001b[35mNone\u001b[39;49m:\u001b[9;18Haction = []\u001b[K\u001b[10;18Hchoices = []\u001b[11;18Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m:\u001b[K\u001b[23;35H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1@s\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[13;1H\u001b[1M\u001b[1;24r\u001b[11;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[12;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[22;1H    \u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[A\u001b[11d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25lei\u001b[1@f\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36meli\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mf\u001b[0m\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[13;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[13;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;35H\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lM\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lU\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25lNon:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25lNon:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\":                                                     \u001b[39;49m\r\n\u001b[32m            self.action = []                                                    \u001b[39;49m\r\n\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu:\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn:\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md:\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo:\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[A\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[23;35H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[10;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[10;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\n\n\u001b[4P\u001b[4;3H\u001b[?25l\u001b[31m                                                        \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\u001b[7;14Hgrid = grid\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(grid)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\u001b[K\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\u001b[20;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[21;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\n\b\u001b[7m 9% L22\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25lNon)\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\")                                                           \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[4;59H\u001b[4P\r\u001b[4@\t\b\b\u001b[31mThis sets the new state and returns the appropriate code\u001b[39;49m\r\n    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\t\u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[7;14Hstate = new_state\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[11;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[12;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\n\u001b[K\u001b[17;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[23;29H\u001b[7m15% L33\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[4;1H\u001b[1L\u001b[1;24r\u001b[4;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   15% L25\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[6;1H\u001b[1L\u001b[1;24r\u001b[5;1H\u001b[K\n\u001b[?25l    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[A\u001b[23;35H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mp\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mv\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25l\u001b[1m\u001b[34mv\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[4;21H\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[6;1H\u001b[1L\u001b[1;24r\u001b[6;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1;22r\u001b[7;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;27H\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[24d\u001b[?25lAuto-saving...\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[14;18Hchoices = []\u001b[22;1H    \u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[A\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[14;18Hgrid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[22;1H    \u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[A\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[14;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[22;1H    \u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[A\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;13H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[22;1H    \u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[A\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;9H\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[22d    \u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[A\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[5L\u001b[1;24r\u001b[5;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[8;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m state(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[23;30H\u001b[7m5% L31\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\b\b\t\b\b\u001b[?25l\u001b[32m:                                                 \u001b[39;49m\r\n\u001b[32m        elif state == \"\u001b[39;49mmain menu\u001b[32m\": return CTRL_MENU                             \u001b[39;49m\r\n\u001b[17;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m: \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m: \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m: \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m: \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\t\b\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\b\b\u001b[?25lNon\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\t\b\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lU\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[5;12H\u001b[1P\r\u001b[5;11H\u001b[1P\r\u001b[5;10H\u001b[1P\r\t\u001b[1P\r\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;12H\u001b[1P\r\u001b[6;11H\u001b[1P\r\u001b[6;10H\u001b[1P\r\t\u001b[1P\r\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;12H\u001b[1P\r\u001b[7;11H\u001b[1P\r\u001b[7;10H\u001b[1P\r\t\u001b[1P\r\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;12H\u001b[1P\r\u001b[8;11H\u001b[1P\r\u001b[8;10H\u001b[1P\r\t\u001b[1P\r\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[10;9H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[22;1H    \u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[A\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;9H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[22d    \u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[A\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[2L\u001b[1;24r\u001b[9;13H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m5% L32\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[10;9H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[22;1H    \u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[A\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;9H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[22d    \u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[A\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lAuto-saving...\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[5;1H\u001b[1L\u001b[1;24r\u001b[4;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m():\u001b[K\u001b[23;35H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[4;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[6;1H\u001b[1L\u001b[1;24r\u001b[5;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m():\u001b[K\u001b[23;35H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[5;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[5;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mW\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mC\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mR\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mL\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[?25l\u001b[31m_\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mU\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mN\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mD\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mO\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[7;1H\u001b[1L\u001b[1;24r\u001b[6;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m():\u001b[K\u001b[23;35H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[6;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m'\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\n\n\u001b[?25l\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[8;14Hcheckpoint = copy.deepcopy(grid)\u001b[9;19H(\u001b[32m\"undo\"\u001b[39;49m)\r\n\u001b[K\u001b[11;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\r\n\u001b[K\n\t\b\b\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[16;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m():\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[23;29H\u001b[7m 9% L22\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[?25l\u001b[32m                                                        \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\r\n\u001b[K\u001b[9;20H\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lAuto-saving...\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\r\n\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m():\u001b[K\u001b[8;14Haction = []\u001b[K\r\n\t\tte = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\t\b\b\u001b[31mto the caller for what kind of input should come next.             \u001b[39;49m\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\n\u001b[K\u001b[22;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[23;29H\u001b[7m15% L33\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;43H\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[18;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[18;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;20r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[22d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   15% L35\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[4;21H\u001b[?25l\u001b[31mnew state and returns the appropriate code           \u001b[39;49m\u001b[5;7H\u001b[31mto the caller for what kind of input should come next.            \u001b[39;49m\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\n\u001b[K\u001b[12;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\t\b\b\u001b[31mHas one of four return values:                          \u001b[39;49m\u001b[16;7H\u001b[31m    None: Tell the controller to do nothing           \u001b[39;49m\u001b[17;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[18;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[23;29H\u001b[7m25% L44\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[11;5H\u001b[?25l\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[22d        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;52H\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\u001b[?25l\u001b[33mstate\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\u001b[?25lstate ==\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                         \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[10;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m    # This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[32m    # A string is the input from a menu, such as \"\u001b[39;49mattack\u001b[32m\" or \"\u001b[39;49mwait\u001b[32m\".            \u001b[39;49m\r\n\u001b[32m    # A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[32m    # Has one of four return values:                                            \u001b[39;49m\r\n\u001b[32m    #     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[32m    #     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[32m    #     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[32m    #     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[32m    def process(self, c):                                                       \u001b[39;49m\r\n\u001b[32m        if state == None: return process_none(c)                                \u001b[39;49m\r\n\u001b[32m        if state == \"\u001b[39;49mmain menu\u001b[32m\": return process_main_menu(c)                    \u001b[39;49m\r\n\u001b[10;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[10;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lCloses \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[10;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;33H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l    \u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n    \u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n    \u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n    \u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n    \u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n    \u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n    \u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n    \u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\u001b[10;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[13;1H\u001b[1M\u001b[1;24r\u001b[12;5H\u001b[?25l\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[22d        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\n    \u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n        u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\n\b\b\b\b\b\b\u001b[7m35% L55\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;7H\u001b[?25l\u001b[31mState    : None (expected input, tuple)     \u001b[39;49m\u001b[4;7H\u001b[31mExpected : Tuple (unit or friendly factory)\u001b[39;49m\u001b[5;7H\u001b[31mNext step: If unit: coordinates of range of unit\u001b[39;49m\u001b[6;11H\u001b[31m       If factory: list of possible buildables\u001b[39;49m\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\tu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\tteam = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[14;42H\u001b[4P\u001b[14;5H\u001b[4@\u001b[14;11H\u001b[31mIf no unit, check for terrain      \u001b[39;49m\u001b[15;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[16;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\n\b\u001b[7m49% L66\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[3;42H\u001b[4P\u001b[3;5H\u001b[4@\u001b[3;11H\u001b[?25l\u001b[31mIf no unit, check for terrain      \u001b[39;49m\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[7;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[23;29H\u001b[7m60% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[12;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[14;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[17;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel                       \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[19;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[20;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\n\b\u001b[7m8% L88\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[6;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel                       \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[8;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[9;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[15;5H    \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[23;29H\u001b[7m80% L99\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[4;54H\u001b[4P\u001b[4;5H\u001b[4@\u001b[4;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[5;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L108\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"\"\u001b[39;49m\u001b[13;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[23;36H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l(No changes need to be saved)\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[H\n\t\u001b[?25l\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\u001b[7;11H\u001b[31mgive the controller the list of valid move locations.            \u001b[39;49m\u001b[8;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[10;18Hstate = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\n\b\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[12;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[14;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[15;5H\u001b[4P\t\b\b\u001b[31mExpected : Tuple in range                      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[16;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[17;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[20;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\n\b\b\u001b[7m68% L98 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;47H\u001b[4P\u001b[17;5H\u001b[4@\u001b[17;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[23;29H\u001b[7m52% L79\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[3;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[4;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[6;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[10;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[11;5H\u001b[4P\t\b\b\u001b[31m    menu: Tell the controller to render a \u001b[39;49m\u001b[4@\u001b[31mmenu\u001b[39;49m\u001b[12;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[13;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[21;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m29% L60\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\u001b[K\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\n\n\b\u001b[31msets the state back to start while also restoring the previous\u001b[39;49m\u001b[7;7H\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[8;7H\u001b[31msupposed to set its camera's grid to the new one.\u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m():\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n\u001b[K\u001b[17;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[22;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[23;29H\u001b[7m12% L41\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[3;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[6;12H\u001b[31mprocesses input of two types: coordinates and strings.        \u001b[39;49m\u001b[7;7H\u001b[31mA string is the input from a menu, such as \"attack\" or \"wait\".    \u001b[39;49m\u001b[8;7H\u001b[31mA coordinate is an x,y location on the grid.     \u001b[39;49m\u001b[9;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[10;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[11;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[13;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[6;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[7;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[8;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[9;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\t\t\t\t\t\u001b[4P\u001b[11;5H\u001b[4@\u001b[11;11H\u001b[31mIf no unit, check for terrain             \u001b[39;49m\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[19;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[21;58H\u001b[4P\u001b[21;5H\u001b[4@\u001b[21;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[23;29H\u001b[7m52% L59\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;58H\u001b[4P\u001b[2;5H\u001b[4@\u001b[2;11H\u001b[?25l\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[14;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[17;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[20;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\n\b\b\u001b[7m68% L78\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[7;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[8;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[10;18Hgrid.move_unit((ox,oy),(x,y))\u001b[11;28H[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[K\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"\"\u001b[39;49m\u001b[K\u001b[13;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[15;54H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L97\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[9;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[12;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[23;29H\u001b[7m77% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[7;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[9;64H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mIf unit is friendly and ready, switch to moving state and\u001b[39;49m\u001b[10;5H    \u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\u001b[11;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;29H\u001b[7m66% L85\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[14;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[20;64H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mIf unit is friendly and ready, switch to moving state and\u001b[39;49m\u001b[21;5H    \u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\u001b[22;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[23;29H\u001b[7m58% L74\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m69\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[6;5H\u001b[4P\t\b\b\u001b[31mState    : None (expected input, tu\u001b[39;49m\u001b[4@\u001b[31mple)\u001b[39;49m\u001b[7;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[9;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m45% L63\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11L\u001b[1;24r\u001b[2;1H\u001b[?25l        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n    \u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[23;29H\u001b[7m32% L52\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11L\u001b[1;24r\u001b[2;1H\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n\u001b[K\n    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[23;29H\u001b[7m22% L41\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[7;21H\u001b[31mstate back to start while also restoring the previous\u001b[39;49m\u001b[8;7H\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[9;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m():\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[15;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n\u001b[K\n\t\b\b\u001b[31mThis sets the new state and returns the appropriate code\u001b[39;49m\u001b[19;7H\u001b[31mto the caller for what kind of input should come next.\u001b[39;49m\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[23;29H\u001b[7m12% L30\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[7;21H\u001b[31mnew state and returns the appropriate code           \u001b[39;49m\u001b[8;7H\u001b[31mto the caller for what kind of input should come next.            \u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[15;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\t\b\b\u001b[31mHas one of four return values:                          \u001b[39;49m\u001b[19;7H\u001b[31m    None: Tell the controller to do nothing           \u001b[39;49m\u001b[20;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[23;29H\u001b[7m22% L41\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   22% L40\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1@s\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[C\u001b[?25l\u001b[1@s\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[24;1H\u001b[?25lAuto-saving...\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25ldone\u001b[12;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;14H\b\b\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\t\b\u001b[?25l\u001b[1P\r\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[1P\r\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[12;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[12;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[C\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[?25l    \u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\n    \u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\n\b\b\b\b\b\b\u001b[7m31% L52\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[C\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n        \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n        \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n        \u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m45% L63\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l(No changes need to be saved)\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[7;42H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mIf no unit, check for terrain      \u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\u001b[23;29H\u001b[7m57% L74\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[18;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[21;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel                       \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[23;29H\u001b[7m65% L85\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[6;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[7;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[18;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[21;47H\u001b[4P\u001b[21;5H\u001b[4@\u001b[21;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\u001b[23;29H\u001b[7m48% L7\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[4;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[6;58H\u001b[4P\u001b[6;5H\u001b[4@\u001b[6;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[18;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[21;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\u001b[23;29H\u001b[7m65\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[5;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[11;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[12;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[14;18Hgrid.move_unit((ox,oy),(x,y))\u001b[15;28H[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[K\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"\"\u001b[39;49m\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[19;54H\u001b[4P\u001b[19;5H\u001b[4@\u001b[19;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L94\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;64H\u001b[4P\u001b[2;5H\u001b[4@\u001b[2;11H\u001b[?25l\u001b[31mIf unit is friendly and ready, switch to moving state and\u001b[39;49m\u001b[3;5H    \u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\u001b[4;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[5;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[13;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[16;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[23;29H\u001b[7m71% L93\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[10;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;47H\u001b[4P\u001b[13;5H\u001b[4@\u001b[13;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\u001b[22;11H\u001b[31mgive the controller the list of valid move locations.            \u001b[39;49m\u001b[23;29H\u001b[7m57% L84\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[6;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[7;5H\u001b[4P\t\b\b\u001b[31m    menu: Tell the controller to render a \u001b[39;49m\u001b[4@\u001b[31mmenu\u001b[39;49m\u001b[8;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[9;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[17;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[18;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\u001b[23;29H\u001b[7m34% L65\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[22;20H\u001b[22;11H\u001b[?25l\u001b[33my\u001b[39;49m = coor\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[22;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[22;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[4;7H\u001b[31mState    : None (expected input, tuple)     \u001b[39;49m\u001b[5;7H\u001b[31mExpected : Tuple (unit or friendly factory)\u001b[39;49m\u001b[6;7H\u001b[31mNext step: If unit: coordinates of range of unit\u001b[39;49m\u001b[7;11H\u001b[31m       If factory: list of possible buildables\u001b[39;49m\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[15;42H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mIf no unit, check for terrain      \u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[23;29H\u001b[7m48% L66\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[4;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[6;58H\u001b[4P\u001b[6;5H\u001b[4@\u001b[6;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[18;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[21;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\u001b[23;29H\u001b[7m65% L75\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[6;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[7;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[18;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[21;47H\u001b[4P\u001b[21;5H\u001b[4@\u001b[21;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\u001b[23;29H\u001b[7m48\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[4;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[6;58H\u001b[4P\u001b[6;5H\u001b[4@\u001b[6;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[18;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[21;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\u001b[23;29H\u001b[7m65\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[5;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[11;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[12;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[14;18Hgrid.move_unit((ox,oy),(x,y))\u001b[15;28H[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[K\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"\"\u001b[39;49m\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[19;54H\u001b[4P\u001b[19;5H\u001b[4@\u001b[19;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L94\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m100\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;28H\b\b\u001b[C\u001b[?25l\u001b[32mm\"\u001b[39;49m\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mv\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m_\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[16;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[16;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\n\u001b[?25lEnd of buffer\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\n\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L114\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\u001b[?25l\u001b[1m\u001b[34mp\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mc\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mm\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mi\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mm\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mu\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mve_done\"\u001b[39;49m\u001b[K\u001b[16;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me_done\"\u001b[39;49m\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m_done\"\u001b[39;49m\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mdone\"\u001b[39;49m\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mone\"\u001b[39;49m\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mne\"\u001b[39;49m\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\"\u001b[39;49m\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[16;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[16;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;47H\u001b[4P\u001b[2;5H\u001b[4@\u001b[2;11H\u001b[?25l\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\u001b[11;11H\u001b[31mgive the controller the list of valid move locations.            \u001b[39;49m\u001b[12;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[14;18Hstate = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\n\b\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[19;5H\u001b[4P\t\b\b\u001b[31mExpected : Tuple in range                      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[20;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[22;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[23;29H\u001b[7m64% L95 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[6;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[7;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[18;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[21;47H\u001b[4P\u001b[21;5H\u001b[4@\u001b[21;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\u001b[23;29H\u001b[7m48% L76\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[7;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[8;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[10;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[14;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[15;5H\u001b[4P\t\b\b\u001b[31m    menu: Tell the controller to render a \u001b[39;49m\u001b[4@\u001b[31mmenu\u001b[39;49m\u001b[16;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[17;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m26% L57\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;58H\u001b[1;22r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   26% L44\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                    \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[9;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[9;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;5H\u001b[4P\t\t\t\t\b\u001b[24;1H\u001b[?25lOverwrite mode enabled\u001b[9;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;47H\u001b[?25l\u001b[7m Ovwrt) \u001b[0m\u001b[39;49m\u001b[27m\u001b[9;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;16H\u001b[?25ldisabled\u001b[9;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;47H\u001b[?25l\u001b[7m) ------\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9d\u001b[9;5H\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\t\b\u001b[1@\t\u001b[9;36H\u001b[C\u001b[23;30H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[24;1H\u001b[?25lCloses \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[9;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;41H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lM\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lU\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[9;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[9;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\u001b[K\u001b[5;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[8;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[11;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[12;5H    \u001b[33mx\u001b[39;49m,y = coord\u001b[K\u001b[13;5H    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[14;5H    team = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\t\t\t\t\t\u001b[4P\u001b[16;5H\u001b[4@\u001b[16;11H\u001b[31mIf no unit, check for terrain             \u001b[39;49m\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\u001b[23;29H\u001b[7m47% L56\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[7;58H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[19;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[22;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[23;29H\u001b[7m65% L75\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[3;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[6;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[12;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[13;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[15;18Hgrid.move_unit((ox,oy),(x,y))\u001b[16;28H[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[K\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"action\"\u001b[39;49m\u001b[18;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[20;54H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[21;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m82% L94\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[4;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L113\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[4;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[6;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"action\"\u001b[39;49m\u001b[18;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\n\n\b\b\b\b\u001b[7m82%\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;47H\u001b[4P\u001b[3;5H\u001b[4@\u001b[3;11H\u001b[?25l\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\u001b[12;11H\u001b[31mgive the controller the list of valid move locations.            \u001b[39;49m\u001b[13;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[15;18Hstate = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\n\b\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[4P\t\b\b\u001b[31mExpected : Tuple in range                      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[21;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m65% L95 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[7;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[8;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\tu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\tteam = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[19;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[20;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[22;47H\u001b[4P\u001b[22;5H\u001b[4@\u001b[22;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[23;29H\u001b[7m47% L76\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\r\n\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[7;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[8;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[9;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[11;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[15;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[16;5H\u001b[4P\t\b\b\u001b[31m    menu: Tell the controller to render a \u001b[39;49m\u001b[4@\u001b[31mmenu\u001b[39;49m\u001b[17;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[18;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[35mNone\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\u001b[23;29H\u001b[7m25% L57\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[?25l    \u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n        u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n        team = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[23;29H\u001b[7m38% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;55H\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   38% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[21;11H\u001b[?25l\u001b[33my\u001b[39;49m\r\n\t\u001b[33mu\u001b[39;49m\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;9H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\u001b[?25l\u001b[33mstate\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\u001b[?25lstate ==\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                           \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[12;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[12;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25lei\u001b[1@f\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36meli\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mf\u001b[0m\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25lei\u001b[1@f\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36meli\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mf\u001b[0m\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25lei\u001b[1@f\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36meli\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mf\u001b[0m\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[24;1H\u001b[?25lAuto-saving...\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;31H\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[3;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[4;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[6;52H\u001b[4P\u001b[6;5H\u001b[4@\u001b[6;11H\u001b[31mIf no unit, check for terrain                \u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[14;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[16;58H\u001b[4P\u001b[16;5H\u001b[4@\u001b[16;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[23;29H\u001b[7m59% L67\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[H\n\t\u001b[?25l\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[5;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[9;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[12;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[15;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[21;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[22;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\n\b\b\b\b\b\u001b[7m74% L86\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;11H\u001b[?25l\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[3;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[5;18Hgrid.move_unit((ox,oy),(x,y))\u001b[6;28H[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[K\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"action\"\u001b[39;49m\u001b[8;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[10;54H\u001b[4P\u001b[10;5H\u001b[4@\u001b[10;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[11;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[13;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L105\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[4;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[7;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[13;5H    \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"action\"\u001b[39;49m\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\n\b\b\b\b\u001b[7m81% L104\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;29H\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@s\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lTRL_MENU\u001b[K\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lRL_MENU\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL_MENU\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_MENU\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lMENU\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lENU\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lNU\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lU\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[?25l\u001b[32m\"                                                      \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[19;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[19;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1M\u001b[1;24r\u001b[18;13H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m state(\u001b[32m\"action\"\u001b[39;49m)\r\n\u001b[K\n\n\n\u001b[K\u001b[18d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[7;14H\u001b[1m\u001b[36meturn\u001b[0m\u001b[39;49m state(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[4;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[7;14H\u001b[1m\u001b[36maise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[18;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m state(\u001b[32m\"action\"\u001b[39;49m)\r\n\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\n\n\b\b\b\b\u001b[7m82% L104\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m99 \u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[4;64H\u001b[4P\u001b[4;5H\u001b[4@\u001b[4;11H\u001b[31mIf unit is friendly and ready, switch to moving state and\u001b[39;49m\u001b[5;5H    \u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\u001b[6;12Hu \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"moving\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[15;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[18;14H\u001b[1m\u001b[36maise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[23;29H\u001b[7m72% L93\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;30H\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                      \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[10;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[10;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[8;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[8;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[8d\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[8;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[9;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m state(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\u001b[22;1H\u001b[K\u001b[8d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[9;20HCTRL_COORD\u001b[K\u001b[11;58H\u001b[4P\u001b[11;5H\u001b[4@\u001b[11;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[15;5H    \u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m state(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[23;29H\u001b[7m63% L82\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\t\t\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m                                                        \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[5;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\r\n\u001b[K\u001b[5;20H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                      \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[5;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[5;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[2;5H\u001b[?25l\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[22;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m44% L73\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[K\u001b[4;5H\u001b[?25l\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[10;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[11;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[12;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[18;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[20;5H\u001b[4P\t\b\b\u001b[31m    coord: Tell the controller to give it a c\u001b[39;49m\u001b[4@\u001b[31moord\u001b[39;49m\u001b[21;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[23;29H\u001b[7m24% L54\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34mi\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34mi\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\u001b[5;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\u001b[6;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[9;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[16;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[17;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[18;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[20;52H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mIf no unit, check for terrain                \u001b[39;49m\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[23;29H\u001b[7m44% L53\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lAuto-saving...\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1@s\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[C\u001b[?25l\u001b[1@s\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1@s\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[C\u001b[?25l\u001b[1@s\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[9;42H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mIf no unit, check for terrain      \u001b[39;49m\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[12;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m state(\u001b[32m\"main menu\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m state(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m state(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[23;29H\u001b[7m57% L74\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[C\u001b[C\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36msel\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mf\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\u001b[?25l(\u001b[35mNone\u001b[39;49m)\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l(\u001b[35mNone\u001b[39;49m)\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l(\u001b[35mNone\u001b[39;49m)\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l(\u001b[35mNone\u001b[39;49m)\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l(\u001b[35mNone\u001b[39;49m)\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls(\u001b[35mNone\u001b[39;49m)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le(\u001b[35mNone\u001b[39;49m)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll(\u001b[35mNone\u001b[39;49m)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m(\u001b[35mNone\u001b[39;49m)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.(\u001b[35mNone\u001b[39;49m)\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt(\u001b[35mNone\u001b[39;49m)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr(\u001b[35mNone\u001b[39;49m)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la(\u001b[35mNone\u001b[39;49m)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln(\u001b[35mNone\u001b[39;49m)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls(\u001b[35mNone\u001b[39;49m)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li(\u001b[35mNone\u001b[39;49m)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[17;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[17;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[17;31H\u001b[?25lt(\u001b[35mNone\u001b[39;49m)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li(\u001b[35mNone\u001b[39;49m)\r\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo(\u001b[35mNone\u001b[39;49m)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln(\u001b[35mNone\u001b[39;49m)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\n\n\b\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\u001b[C\u001b[C\u001b[?25l\u001b[1@s\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1@s\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\n\n\b\b\b\b\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\n\n\b\b\b\b\b\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lte(\u001b[35mNone\u001b[39;49m)\u001b[K\u001b[21;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le(\u001b[35mNone\u001b[39;49m)\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[35mNone\u001b[39;49m)\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[17;20Hstate(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\u001b[19;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)          \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[20;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m65% L85\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36msel\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mf\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;45H\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;13H\r\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\t\b\b\u001b[?25l\u001b[32mException\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[32m\")                                                      \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mS)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mh)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ml)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m')\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[19;34H\u001b[?25l\u001b[32m \u001b[39;49m\r\n\u001b[32m)\u001b[39;49m\n\b\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[A\u001b[23;35H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m        t)\u001b[39;49m\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1M\u001b[1;24r\u001b[19;34H\u001b[?25l\u001b[32m)\u001b[39;49m\r\n\n\n    \u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[A\u001b[23;35H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m )\u001b[39;49m\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mg)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m )\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mh)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m.)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[19;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[6;36H\u001b[32m\"moving\"\u001b[39;49m)\r\n\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[12;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move                             \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[13;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel                   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[16;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[22;5H    \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[23;29H\u001b[7m74% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m100\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19d\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\b\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\b\b\b\b\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31m           If out of range, cancel                   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[5;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[11;5H    \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[16;14H\u001b[1m\u001b[36meturn\u001b[0m\u001b[39;49m state(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m\r\n\u001b[K\u001b[23;29H\u001b[7mBot L107\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[24;1H\u001b[?25lAuto-saving...\u001b[16;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[16;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;32H\b\b\b\b\b\b\b\b\b\b\b\b\u001b[C\u001b[?25l\u001b[1@s\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1@s\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[18;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[18;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25l(No changes need to be saved)\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[K\u001b[21;26H\u001b[?25l(\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l )\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\u001b[K\u001b[22;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt)\n\b\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[21;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[13;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[14;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[18;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[19;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[21;18H\u001b[31mIf out of range, cancel\u001b[39;49m\u001b[22;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[23;29H\u001b[7m66% L98 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[13;18Haction.append((x,y))\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[18;54H\u001b[4P\u001b[18;5H\u001b[4@\u001b[18;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[19;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[21;18H\u001b[31m                       \u001b[39;49m\u001b[22;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt)\u001b[23;29H\u001b[7mBot\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m100\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;6H\u001b[?25l\u001b[31mS\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m\\\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mS\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mS\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[?25l\u001b[31m:\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[13;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[14;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[18;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[19;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\t\b\b\u001b[31m           If out of range, cancel\u001b[39;49m\u001b[22;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[23;29H\u001b[7m66% L98 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[5;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[6;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[18;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[20;47H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[23;29H\u001b[7m50% L79\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[3;42H\u001b[4P\u001b[3;5H\u001b[4@\u001b[3;11H\u001b[?25l\u001b[31mIf no unit, check for terrain      \u001b[39;49m\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[7;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[22;36H\u001b[32m\"moving\"\u001b[39;49m)\u001b[23;29H\u001b[7m60% L80\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[3;5H\u001b[4P\t\b\b\u001b[31m    coord: Tell the controller to give it a c\u001b[39;49m\u001b[4@\u001b[31moord\u001b[39;49m\u001b[4;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[13;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[14;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[23;29H\u001b[7m40% L71\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n\u001b[K\u001b[6;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[12;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[13;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[14;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[22;5H\u001b[4P\t\b\b\u001b[31m    coord: Tell the controller to give it a c\u001b[39;49m\u001b[4@\u001b[31moord\u001b[39;49m\u001b[23;29H\u001b[7m21% L52\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[4;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\u001b[7;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\u001b[8;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[11;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[14;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[18;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[19;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[20;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[22;52H\u001b[4P\u001b[22;5H\u001b[4@\u001b[22;11H\u001b[31mIf no unit, check for terrain                \u001b[39;49m\u001b[23;29H\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;52H\u001b[4P\u001b[3;5H\u001b[4@\u001b[3;11H\u001b[?25l\u001b[31mIf no unit, check for terrain                \u001b[39;49m\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[13;58H\u001b[4P\u001b[13;5H\u001b[4@\u001b[13;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m60% L70\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[7;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[9;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[10;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[21;18Haction.append((x,y))\u001b[K\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[23;29H\u001b[7m77% L89\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;18H\u001b[?25laction.append((x,y))\u001b[K\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[7;54H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mState: main menu                  \u001b[39;49m\u001b[11;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt)\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L108\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\b\u001b[24;1H\u001b[?25lAuto-saving...\u001b[10;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[10;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;24H\u001b[?25l\u001b[31m(\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mx\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31m\"\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m)\u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;47H\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[2;18H\u001b[?25lchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[7;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[8;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[11;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[13;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[23;29H\u001b[7m76% L109\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m99 \u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;13H\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[22;1H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;9H\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[22;1H            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[2L\u001b[1;24r\u001b[12;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n        \u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\u001b[23;30H\u001b[7m6% L101\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2;18H\u001b[?25laction.append((x,y))\u001b[K\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[7;54H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[11;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L108\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[13;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[23;35H\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;37H\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@p\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;35H\b\b\u001b[C\b\b\b\b\b\u001b[?25ltupl:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;38H\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(opt) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;36H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[13;13H\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\u001b[K\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;47H\b\b\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mI\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mv\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ml\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ml\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m \"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mp\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m/\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m.\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;13H\r\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25lifo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[24;1H\u001b[?25lAuto-saving...\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[15;12H\u001b[K\r\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\b\u001b[?25l\u001b[33mopt\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25lopt ==\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                             \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[15;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;18H\u001b[?25lchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[7;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[8;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[11;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[12;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[13;30H\u001b[32mExpected tuple!\u001b[39;49m\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n        \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[23;29H\u001b[7m74% L109\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[6;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[7;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[9;47H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[21;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m58% L90 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[7;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[9;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[10;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[21;18Haction.append((x,y))\u001b[K\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[23;29H\u001b[7m74\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;18H\u001b[?25laction.append((x,y))\u001b[K\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[7;54H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[11;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[12;12Hopt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\n\b\b\b\b\b\b\u001b[32mInvalid option.\u001b[39;49m\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"                                                             \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L108\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;20H\u001b[?25l\u001b[32mB\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[A\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;13H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[16;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[16;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L121\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;13H\r\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[15;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mL\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m\"\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L125\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;13H\r\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[19;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mE\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\b\u001b[?25l\u001b[33mopt\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25lopt ==\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                             \u001b[39;49m\r\n\u001b[20;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mE\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[32mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;13H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[20;30H\r\n\u001b[K\u001b[22;13H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[23;36H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l+\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\r\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[22;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[22;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[10;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;36H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l()\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l()\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l()\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l()\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l()\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l()\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le()\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln()\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld()\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_()\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt()\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu()\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr()\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln()\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[11;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[11;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;30H\u001b[?25l\u001b[32mExpected tuple!\u001b[39;49m\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[8;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[9;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[10;18Haction.append((x,y))\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[13;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[18;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[21;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[23;29H\u001b[7m79% L120\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[10;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[11;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[15;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[16;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[19;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[20;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[21;30H\u001b[32mExpected tuple!\u001b[39;49m\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[23;29H\u001b[7m63% L101\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[15;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[17;47H\u001b[4P\u001b[17;5H\u001b[4@\u001b[17;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[23;29H\u001b[7m49% L82 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[3;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[9;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[10;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[11;5H\u001b[4P\t\b\b\u001b[31m    coord: Tell the controller to give it a c\u001b[39;49m\u001b[4@\u001b[31moord\u001b[39;49m\u001b[12;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[21;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m28% L63\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\t\b\b\u001b[31msupposed to set its camera's grid to the new one.          \u001b[39;49m\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m():\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n\u001b[K\u001b[14;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[20;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[21;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[22;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[23;29H\u001b[7m13% L44\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   13% L35\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34md\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mu\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m():\u001b[K\u001b[23;35H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[13;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mW\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m():\u001b[K\u001b[23;30H\u001b[7m2% L36\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[14;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[14;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[14;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[14;10H\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[14;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[14;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;21r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[22d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   12% L38\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[16;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[16;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   12% L35\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\n\u001b[?25l    \u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\u001b[A\u001b[23;35H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34mc\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mm\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mm\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mi\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m():\u001b[K\u001b[23;35H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[13;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mW\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mA\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mW\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m():\u001b[K\u001b[23;35H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[14;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[14;62H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[14;62H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;62H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;21r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[22d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   12% L38\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[16;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[16;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;11H\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\b\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[19;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;51H\r\n\n\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[19;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[19;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[19;51H\r\n\n\n\n\n\u001b[?25l(No changes need to be saved)\u001b[19;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25l(No changes need to be saved)\u001b[21;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\n\u001b[?25l\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[7;14Hcheckpoint = copy.deepcopy(grid)\r\n\t\trt_over()\r\n\u001b[K\u001b[10;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\r\n\u001b[K\n\t\b\b\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[15;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m():\u001b[K\u001b[18;14Haction = []\u001b[K\u001b[19;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[23;29H\u001b[7m 7% L23\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1M\u001b[1;24r\u001b[18;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[19;14Hchoices = []\r\n\n\n\u001b[K\u001b[18d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[20;1H\u001b[1M\u001b[1;24r\u001b[18;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[19;14Hgrid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\n\n    \u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[A\u001b[18d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[20;1H\u001b[1M\u001b[1;24r\u001b[18;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\n\n    \u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[A\u001b[18d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;14H\u001b[?25laction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[23;34H\u001b[7m32\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[1P\r\t\b\b\u001b[1P\r\u001b[8;6H\u001b[1P\r\u001b[8;5H\u001b[1P\r\u001b[8;4H\u001b[1P\r\u001b[8;3H\u001b[1P\r\u001b[C\u001b[1P\b\u001b[1P\u001b[?25lelf\u001b[1P\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lAuto-saving...\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[8d\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt_over()\u001b[K\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_over()\u001b[K\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lover()\u001b[K\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lver()\u001b[K\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ler()\u001b[K\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr()\u001b[K\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l()\u001b[K\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[24d\u001b[?25lMark set\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[3L\u001b[1;24r\u001b[8;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;34H\u001b[7m22\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[11d\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[24;1H\u001b[K\u001b[22d\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n        \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m():\u001b[K\u001b[9;14Haction = []\u001b[K\u001b[10;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\t\b\b\u001b[31mchange the checkpoint and save the move in our history.            \u001b[39;49m\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m():\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[20;14Hchoices = []\u001b[21;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[23;29H\u001b[7m11% L34\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\t\b\b\u001b[31mchange the checkpoint and save the move in our history.            \u001b[39;49m\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m():\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[9;14Hchoices = []\u001b[10;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[12;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# change the undo point.                                                    \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m():\u001b[15;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[20;14Hstate = new_state\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[23;29H\u001b[7m20% L45\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# change the undo point.                                                    \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m():\u001b[4;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[9;14Hstate = new_state\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[12;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[13;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[14;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[16;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\t\b\b\u001b[31mA string is the input from a menu, such as \"attack\" or \"wait\".\u001b[39;49m\u001b[18;7H\u001b[31mA coordinate is an x,y location on the grid.          \u001b[39;49m\u001b[19;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[23;30H\u001b[7m7% L56\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[22;1H    \u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[A\u001b[10d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[23;35H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[11d\u001b[24d\u001b[?25l(No changes need to be saved)\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[?25l    \u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[K\r\n\u001b[K\n    \u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[A\u001b[23;29H\u001b[7m35% L67\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n        \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n        \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n        \u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[23;29H\u001b[7m46% L78\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m69\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11L\u001b[1;24r\u001b[2;1H\u001b[?25l        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\n    \u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[A\u001b[23;29H\u001b[7m35% L67\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11L\u001b[1;24r\u001b[2;1H\u001b[?25l    \u001b[31m# change the undo point.                                                    \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m():\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[23;29H\u001b[7m27% L56\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m():\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;14Hchoices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[12;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# change the undo point.                                                    \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m():\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mThis sets the new state and returns the appropriate code      \u001b[39;49m\u001b[18;7H\u001b[31mto the caller for what kind of input should come next.\u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[23;30H\u001b[7m0% L45\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\r\n\u001b[K\u001b[5;7H\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[6;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m():\u001b[K\u001b[9;14Haction = []\u001b[K\u001b[10;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m():\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[20;14Hchoices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[23;29H\u001b[7m11% L34\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\u001b[?25l\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(grid)\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[9;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[10;14Hchoices = []\r\n\u001b[K\u001b[12;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\r\n\u001b[K\n\t\b\b\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[17;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m():\u001b[K\u001b[20;14Haction = []\u001b[K\u001b[21;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[23;29H\u001b[7m 7% L23\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[5;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m():\u001b[K\n\b\b\b\baction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[15;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\t\b\b\u001b[31mchange the undo point.                                             \u001b[39;49m\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m():\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[23;29H\u001b[7m18% L32\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[4;14Hstate = new_state\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[7;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[8;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[9;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[11;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\t\b\b\u001b[31m    None: Tell the controller to do nothing                      \u001b[39;49m\u001b[16;7H\u001b[31m    menu: Tell the controller to render a menu\u001b[39;49m\u001b[17;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[18;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\u001b[21;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\u001b[23;29H\u001b[7m30% L51\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\u001b[3;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[6;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[9;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[12;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[13;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[14;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[15;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[17;52H\u001b[4P\u001b[17;5H\u001b[4@\u001b[17;11H\u001b[31mIf no unit, check for terrain                \u001b[39;49m\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m48% L70\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[6;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[8;58H\u001b[4P\u001b[8;5H\u001b[4@\u001b[8;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[21;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[23;29H\u001b[7m63% L89\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[4;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[5;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[16;18Haction.append((x,y))\u001b[K\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[21;54H\u001b[4P\u001b[21;5H\u001b[4@\u001b[21;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[22;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\n\b\b\b\b\u001b[7m77% L108\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;54H\u001b[4P\u001b[2;5H\u001b[4@\u001b[2;11H\u001b[?25l\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[3;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[5;7H\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[6;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[7;12Hopt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[8;30H\u001b[32mInvalid option.\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[14;11H\u001b[31mEnd my turn.                                                     \u001b[39;49m\u001b[15;12Hopt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[16;18Hgrid.end_turn()\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L127\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[6;5H    \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[7;12H(x,y)\u001b[2P\n\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[19;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[23;29H\u001b[7m83% L126\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[5;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[8;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[11;14H\u001b[1m\u001b[36maise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[17;5H    \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[18;12H(x,y)\u001b[2P\n\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[23;29H\u001b[7m76% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\n\t\u001b[?25l\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[7;64H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mIf unit is friendly and ready, switch to moving state and\u001b[39;49m\u001b[8;60H\u001b[4P\u001b[8;5H\u001b[4@\u001b[8;11H\u001b[31mgive the controller the list of valid move locations.\u001b[39;49m\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[16;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[22;14H\u001b[1m\u001b[36maise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[23;29H\u001b[7m67% L104\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m99 \u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\n\b\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[16;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[18;64H\u001b[4P\u001b[18;5H\u001b[4@\u001b[18;11H\u001b[31mIf unit is friendly and ready, switch to moving state and\u001b[39;49m\u001b[19;60H\u001b[4P\u001b[19;5H\u001b[4@\u001b[19;11H\u001b[31mgive the controller the list of valid move locations.\u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[23;29H\u001b[7m59% L93\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[8;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[10;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[11;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[22;18Haction.append((x,y))\u001b[K\u001b[23;29H\u001b[7m73% L102\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[3;18Haction.append((x,y))\u001b[K\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[5;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[8;54H\u001b[4P\u001b[8;5H\u001b[4@\u001b[8;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[9;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[12;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[13;12Hopt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\n\b\b\b\b\b\b\u001b[32mInvalid option.\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[20;11H\u001b[31mEnd my turn.                                                     \u001b[39;49m\u001b[21;12Hopt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[22;18Hgrid.end_turn()\u001b[K\n\b\b\b\b\u001b[7m87% L121\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;12H\u001b[?25lopt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[3;18Hgrid.end_turn()\u001b[K\u001b[4;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L140\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[6;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[10;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[23d\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[4;5H    \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[5;12H(x,y)\u001b[2P\n\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[17;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[21;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[23;29H\u001b[7m84% L128\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[6;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[9;14H\u001b[1m\u001b[36maise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[15;5H    \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[16;12H(x,y)\u001b[2P\n\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\u001b[23;29H\u001b[7m77% L117\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[5;64H\u001b[4P\u001b[5;5H\u001b[4@\u001b[5;11H\u001b[31mIf unit is friendly and ready, switch to moving state and\u001b[39;49m\u001b[6;60H\u001b[4P\u001b[6;5H\u001b[4@\u001b[6;11H\u001b[31mgive the controller the list of valid move locations.\u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[14;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[17;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[20;14H\u001b[1m\u001b[36maise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\n\b\b\u001b[7m68% L106\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m99 \u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\n\b\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[14;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[16;64H\u001b[4P\u001b[16;5H\u001b[4@\u001b[16;11H\u001b[31mIf unit is friendly and ready, switch to moving state and\u001b[39;49m\u001b[17;60H\u001b[4P\u001b[17;5H\u001b[4@\u001b[17;11H\u001b[31mgive the controller the list of valid move locations.\u001b[39;49m\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\r\n\u001b[K\u001b[23;30H\u001b[7m0% L95\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31mState    : None (expected input, tu\u001b[39;49m\u001b[4@\u001b[31mple)\u001b[39;49m\u001b[3;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[5;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\n\b\u001b[35mNone\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m52% L84\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[31mHas one of four return values:         \u001b[39;49m\u001b[3;7H\u001b[31m    None: Tell the controller to do nothing\u001b[39;49m\u001b[4;7H\u001b[31m    menu: Tell the controller to render a menu  \u001b[39;49m\u001b[5;11H\u001b[31mcoord: Tell the controller to give it a coord \u001b[39;49m\u001b[6;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[13;5H\u001b[4P\t\b\b\u001b[31mState    : None (expected input, tu\u001b[39;49m\u001b[4@\u001b[31mple)\u001b[39;49m\u001b[14;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[16;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[23;29H\u001b[7m41% L73\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m69\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11L\u001b[1;24r\u001b[2;1H\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\n    \u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[A\u001b[23;29H\u001b[7m31% L62\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[3;14Hchoices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[6;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# change the undo point.                                                    \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m():\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mThis sets the new state and returns the appropriate code      \u001b[39;49m\u001b[12;7H\u001b[31mto the caller for what kind of input should come next.\u001b[39;49m\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[17;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[18;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[23;29H\u001b[7m24% L51\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\t\b\b\u001b[31m    None: Tell the controller to do nothing                      \u001b[39;49m\u001b[7;7H\u001b[31m    menu: Tell the controller to render a menu\u001b[39;49m\u001b[8;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[9;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\u001b[12;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\u001b[13;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[16;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m37% L60\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[4;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[5;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[6;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[8;52H\u001b[4P\u001b[8;5H\u001b[4@\u001b[8;11H\u001b[31mIf no unit, check for terrain                \u001b[39;49m\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[16;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[18;58H\u001b[4P\u001b[18;5H\u001b[4@\u001b[18;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[19;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[20;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\u001b[23;29H\u001b[7m57% L79\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l(No changes need to be saved)\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[12;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[14;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[15;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[23;29H\u001b[7m70% L98\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[7;18Haction.append((x,y))\u001b[K\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[12;54H\u001b[4P\u001b[12;5H\u001b[4@\u001b[12;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[13;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[16;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[17;12Hopt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\n\b\b\b\b\b\b\u001b[32mInvalid option.\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[23;29H\u001b[7m83% L117\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[5;11H\u001b[31mEnd my turn.                                                     \u001b[39;49m\u001b[6;12Hopt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[7;18Hgrid.end_turn()\u001b[K\u001b[8;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L136\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[5;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[6;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[7;18Haction.append((x,y))\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[10;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[15;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[18;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[23;29H\u001b[7m83%\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[7;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[8;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[12;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[13;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[16;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[17;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[18;30H\u001b[32mExpected tuple!\u001b[39;49m\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[23;29H\u001b[7m70% L118\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[12;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[14;47H\u001b[4P\u001b[14;5H\u001b[4@\u001b[14;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[15;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[16;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\u001b[23;29H\u001b[7m57% L99 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[6;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[7;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[8;5H\u001b[4P\t\b\b\u001b[31m    coord: Tell the controller to give it a c\u001b[39;49m\u001b[4@\u001b[31moord\u001b[39;49m\u001b[9;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[18;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[19;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m37% L80\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\u001b[6;7H\u001b[31mWhen we end the turn, we commit all of our actions to history and\u001b[39;49m\u001b[7;7H\u001b[31mchange the undo point.                        \u001b[39;49m\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m():\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[17;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[18;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[19;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[23;29H\u001b[7m24% L61\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\u001b[K\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\r\n\u001b[K\u001b[7;7H\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[8;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m():\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[14;14Hgrid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[17;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m():\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[23;29H\u001b[7m11% L42\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\t\b\b\u001b[31mchange the checkpoint and save the move in our history.            \u001b[39;49m\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m():\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[11;14Hchoices = []\u001b[12;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[14;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# change the undo point.                                                    \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m():\u001b[17;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[22;14Hstate = new_state\n\b\u001b[7m8% L43\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(grid)\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[9;14Hchoices = []\r\n\u001b[K\u001b[11;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\u001b[K\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\r\n\u001b[K\n\t\b\b\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[16;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m():\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[22;14Hgrid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[23;29H\u001b[7m 7% L3\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;46H\u001b[1;22r\u001b[7;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m    7% L19\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[9;1H\u001b[1L\u001b[1;24r\u001b[8;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[23;34H\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;26H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2d\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\n\b\b\b\b\bcopy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m():\u001b[K\n\b\b\b\baction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[16;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\t\b\b\u001b[31mchange the undo point.                                             \u001b[39;49m\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m():\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[23;29H\u001b[7m18% L33\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[5;14Hstate = new_state\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[8;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[9;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[10;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[12;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\t\b\b\u001b[31m    None: Tell the controller to do nothing                      \u001b[39;49m\u001b[17;7H\u001b[31m    menu: Tell the controller to render a menu\u001b[39;49m\u001b[18;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\u001b[23;29H\u001b[7m29% L52\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[5;14Hgrid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[8;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m():\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mWhen we end the turn, we commit all of our actions to history and\u001b[39;49m\u001b[17;7H\u001b[31mchange the undo point.                        \u001b[39;49m\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m():\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[23;29H\u001b[7m18\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   18% L42\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[11;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[11;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[11;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;40H\b\b\b\b\b\b\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25lsself.action)\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action)\u001b[11;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lcself.action)\u001b[11;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@h\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@c\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@k\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@p\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action)\u001b[11;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[24;1H\u001b[?25lAuto-saving...\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;29H\u001b[?25l\u001b[1@(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;58H\b\u001b[C\u001b[?25l)\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;58H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[11;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[11;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;58H\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[11;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;21r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[22d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   17% L48\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\n\u001b[?25l    \u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\u001b[A\u001b[23;35H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mW\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;5H\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34mu\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34md\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l)\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;19H\u001b[K\b\u001b[C\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m():\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m():\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l():\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l():\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[34msn\u001b[0m\u001b[39;49m():\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m():\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[?25ls):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25ls):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\u001b[?25lstate = \u001b[35mNone\u001b[39;49m\u001b[3;14Hchoices = []\r\n\u001b[K\u001b[5;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\r\n\u001b[K\u001b[9;7H\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[10;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m():\u001b[K\u001b[13;14Haction = []\u001b[K\u001b[14;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\t\boices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[17;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\t\b\b\u001b[31mchange the checkpoint and save the move in our history.          \u001b[39;49m\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[23;30H\u001b[7m0% L32\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25lAuto-saving...\u001b[22;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[22;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[2;14H\u001b[?25laction = []\u001b[K\u001b[3;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\t\b\b\u001b[31mchange the checkpoint and save the move in our history.            \u001b[39;49m\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[13;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[14;14Hchoices = []\r\n\t\t\beckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[17;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\u001b[K\n\t\b\b\u001b[31mWhen we end the turn, we commit all of our actions to history and\u001b[39;49m\u001b[21;5H\u001b[31m# change the undo point.                                                    \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;30H\u001b[7m7% L43\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lstate = \u001b[35mNone\u001b[39;49m\u001b[3;14Hchoices = []\r\n\t\t\beckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[6;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\u001b[K\u001b[9;7H\u001b[31mWhen we end the turn, we commit all of our actions to history and\u001b[39;49m\u001b[10;5H\u001b[31m# change the undo point.                                                    \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[14;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[20;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[21;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[22;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[23;29H\u001b[7m25% L54\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25laction = []\u001b[K\u001b[3;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\t\boices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[6;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\t\b\b\u001b[31mchange the checkpoint and save the move in our history.          \u001b[39;49m\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\u001b[K\u001b[20;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# change the undo point.                                                    \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;29H\u001b[7m17% L43\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lAuto-saving...\u001b[19;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[19;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[19;13H\u001b[K\r\t\u001b[?25lsel\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\r\u001b[K\t\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\u001b[?25l\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\r\n\n\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[19;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[19;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ python\r\nPython 2.7.5+ (default, Sep 19 2013, 13:49:51) \r\n[GCC 4.8.1] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> p3\b\u001b[K\b\u001b[K[3,2,1].pop()\r\n1\r\n>>> \r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ python\b\b\b\b\b\b\u001b[4Pfg\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n    \u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n    \u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\r\n\u001b[K\n    \u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# change the undo point.                                                    \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   17% L50    (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[19;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   17% L51\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\b\u001b[K\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lstate = \u001b[35mNone\u001b[39;49m\u001b[3;14Hchoices = []\r\n\t\t\beckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[6;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[8;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[11;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[K\u001b[14;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# change the undo point.                                                    \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[17;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[22;22Hnew_state\n\b\b\u001b[7m24% L54\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\u001b[6;7H\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[7;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\n\n\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\n\t\b\b\u001b[31mWhen a move is completed and we return to the start state, we\u001b[39;49m\u001b[17;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[23;29H\u001b[7m11% L45\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[6;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.        \u001b[39;49m\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[8;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\r\n\n\n\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\t\b\b\u001b[31mchange the undo point.                                       \u001b[39;49m\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[20;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[23;29H\u001b[7m24\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lU\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;5H\u001b[?25l\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\u001b[6;7H\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[7;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\n\n\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\n\t\b\b\u001b[31mWhen a move is completed and we return to the start state, we\u001b[39;49m\u001b[17;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[23;29H\u001b[7m11% L4\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[K\n\u001b[?25l\u001b[31m# Constants sent to the controller after processing.                            \u001b[39;49m\r\n\u001b[33mCTRL_COORD\u001b[39;49m = 1\r\n\u001b[33mCTRL_MENU\u001b[39;49m = 2\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = 3\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[13;21Hgrid\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(grid)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[19;14Hchoices = []\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\u001b[23;29H\u001b[7m 4% L26\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;46H\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m    4% L19\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[23;34H\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[16;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[16;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[16;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;36H\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[23;35H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[19;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[19;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[19;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(grid)\r\n\u001b[K\n        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\u001b[13;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\r\n\u001b[K\u001b[17;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[19;5H\u001b[4P\t\b\b\u001b[31msupposed to set its camera's grid to the new \u001b[39;49m\u001b[4@\u001b[31mone.\u001b[39;49m\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[21;14Haction = []\u001b[K\u001b[22;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[23;30H\u001b[7m7% L27\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;14H\u001b[?25laction = []\u001b[3;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[8;5H\u001b[4P\t\b\b\u001b[31mWhen a move is completed and we return to the start state\u001b[39;49m\u001b[4@\u001b[31m, we\u001b[39;49m\u001b[9;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[17;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.        \u001b[39;49m\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[19;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[23;29H\u001b[7m18% L36\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l(No changes need to be saved)\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[5;9H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\t\b\b\u001b[31mchange the undo point.                                       \u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[12;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[15;14Hstate = new_state\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[18;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[22;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[23;29H\u001b[7m30% L55\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\t\b\b\u001b[31m    None: Tell the controller to do nothing                      \u001b[39;49m\u001b[8;7H\u001b[31m    menu: Tell the controller to render a menu\u001b[39;49m\u001b[9;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[10;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\u001b[13;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\u001b[14;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[17;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;29H\u001b[7m43% L74\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[7;7H\u001b[31mWhen we end the turn, we commit all of our actions to history and\u001b[39;49m\u001b[8;7H\u001b[31mchange the undo point.                        \u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[18;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[19;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[20;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[23;29H\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[?25l(No changes need to be saved)\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[K\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\t\b\b\u001b[31m    None: Tell the controller to do nothing                      \u001b[39;49m\u001b[8;7H\u001b[31m    menu: Tell the controller to render a menu\u001b[39;49m\u001b[9;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[10;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\u001b[13;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\u001b[14;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[17;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;29H\u001b[7m43\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[5;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[6;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[7;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[9;52H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mIf no unit, check for terrain                \u001b[39;49m\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[17;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[19;58H\u001b[4P\u001b[19;5H\u001b[4@\u001b[19;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[21;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[23;29H\u001b[7m60% L93\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[13;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[15;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[16;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[23;29H\u001b[7m71% L112\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[8;18Haction.append((x,y))\u001b[K\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[13;54H\u001b[4P\u001b[13;5H\u001b[4@\u001b[13;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[14;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[17;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[18;12Hopt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\n\b\b\b\b\b\b\u001b[32mInvalid option.\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[23;29H\u001b[7m84% L131\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[8;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[9;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[13;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[14;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[17;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[18;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[19;30H\u001b[32mExpected tuple!\u001b[39;49m\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[23;29H\u001b[7m71\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[15;47H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[23;29H\u001b[7m60% L113\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[7;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[8;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[9;5H\u001b[4P\t\b\b\u001b[31m    coord: Tell the controller to give it a c\u001b[39;49m\u001b[4@\u001b[31moord\u001b[39;49m\u001b[10;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[19;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[20;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[23;29H\u001b[7m43% L94 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;26H\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[?25l            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n        \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n        \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n        \u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m52% L95\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m100\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[6;42H\u001b[4P\u001b[6;5H\u001b[4@\u001b[6;11H\u001b[31mIf no unit, check for terrain      \u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[23;29H\u001b[7m62% L106\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[14;36H\u001b[32m\"moving\"\u001b[39;49m)\r\n\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move                             \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[21;5H\u001b[4P\t\b\b\u001b[31m           If out of range, cancel                   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[23;30H\u001b[7m8% L117\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[13;18Haction.append((x,y))\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[18;54H\u001b[4P\u001b[18;5H\u001b[4@\u001b[18;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[19;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[22;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[23;29H\u001b[7m81% L126\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[3;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[4;12Hopt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[5;30H\u001b[32mInvalid option.\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[11;11H\u001b[31mEnd my turn.                                                     \u001b[39;49m\u001b[12;12Hopt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[13;18Hgrid.end_turn()\u001b[K\u001b[14;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L145\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[3;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[4;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[5;30H\u001b[32mExpected tuple!\u001b[39;49m\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[11;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[12;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[13;18Haction.append((x,y))\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[21;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[23;29H\u001b[7m81%\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[13;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[14;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[18;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[19;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[22;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[23;29H\u001b[7m68% L127\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[13;18Haction.append((x,y))\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[18;54H\u001b[4P\u001b[18;5H\u001b[4@\u001b[18;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[19;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[22;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[23;29H\u001b[7m81\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;7H\u001b[?25l\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[3;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[4;12Hopt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[5;30H\u001b[32mInvalid option.\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[11;11H\u001b[31mEnd my turn.                                                     \u001b[39;49m\u001b[12;12Hopt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[13;18Hgrid.end_turn()\u001b[K\u001b[14;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L145\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;7H\u001b[?25l\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[3;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[4;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[5;30H\u001b[32mExpected tuple!\u001b[39;49m\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[11;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[12;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[13;18Haction.append((x,y))\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[21;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[23;29H\u001b[7m81% L146\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[13;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[14;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[18;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[19;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[22;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[23;29H\u001b[7m68% L127\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[5;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[6;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[18;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[20;47H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[23;29H\u001b[7m56% L108\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[3;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[4;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[5;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[6;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[13;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[14;5H\u001b[4P\t\b\b\u001b[31m    coord: Tell the controller to give it a c\u001b[39;49m\u001b[4@\u001b[31moord\u001b[39;49m\u001b[15;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[23;29H\u001b[7m38% L89 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[3;5H\u001b[?25l\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mWhen we end the turn, we commit all of our actions to history and\u001b[39;49m\u001b[13;7H\u001b[31mchange the undo point.                        \u001b[39;49m\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[23;29H\u001b[7m27% L70\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[3;7H\u001b[?25l\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[4;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\n\n\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\n\t\b\b\u001b[31mWhen a move is completed and we return to the start state, we\u001b[39;49m\u001b[14;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[20;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[22;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[23;29H\u001b[7m14% L51\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[3d\u001b[K\n\u001b[?25l\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[7;14Hgrid = grid\u001b[8;14Hcheckpoint = copy.deepcopy(grid)\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[13;64H\u001b[4P\u001b[13;5H\u001b[4@\u001b[13;11H\u001b[31mThese are the state variables                            \u001b[39;49m\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[16;14Hchoices = []\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\u001b[22;7H\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[23;29H\u001b[7m 6% L32\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[3;5H\u001b[?25l\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\t\u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;14Haction = []\u001b[8;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[13;5H\u001b[4P\t\b\b\u001b[31mWhen a move is completed and we return to the start state\u001b[39;49m\u001b[4@\u001b[31m, we\u001b[39;49m\u001b[14;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[16;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[22;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.        \u001b[39;49m\u001b[23;29H\u001b[7m14\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[31mWhen we undo, we go back to a previous spot in the history.        \u001b[39;49m\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[5;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\r\n\n\n\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\t\b\b\u001b[31mchange the undo point.                                       \u001b[39;49m\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[17;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[20;14Hstate = new_state\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[23;29H\u001b[7m27% L50\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\u001b[1;21r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[22d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   27% L63\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\r\n\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[9;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\t\b\b\u001b[31mHas one of four return values:                                   \u001b[39;49m\u001b[13;7H\u001b[31m    None: Tell the controller to do nothing\u001b[39;49m\u001b[14;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[15;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[16;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\u001b[19;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\u001b[20;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[23;29H\u001b[7m38% L69\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[4;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[7;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[11;5H    \u001b[33mx\u001b[39;49m,y = coord\u001b[K\u001b[12;5H    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[13;5H    team = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[15;52H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mIf no unit, check for terrain                \u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[23;29H\u001b[7m55% L88\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[4;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[6;58H\u001b[4P\u001b[6;5H\u001b[4@\u001b[6;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[19;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[21;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m67% L107\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[14;18Haction.append((x,y))\u001b[K\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[19;54H\u001b[4P\u001b[19;5H\u001b[4@\u001b[19;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[23;29H\u001b[7m80% L126\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;7H\u001b[?25l\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[4;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[5;12Hopt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[6;30H\u001b[32mInvalid option.\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[12;11H\u001b[31mEnd my turn.                                                     \u001b[39;49m\u001b[13;12Hopt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[14;18Hgrid.end_turn()\u001b[K\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\n\u001b[K\u001b[23;29H\u001b[7mBot L145\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;13H\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[17;13H\r\t\b\b\b\b\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[23;35H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\u001b[K\u001b[18;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[23;35H\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;13H\r\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;7H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mp\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mc\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\t\u001b[?25l\u001b[1m\u001b[34mp\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mc\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mc\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mi\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[18;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;34H\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lAuto-saving...\u001b[19;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[19;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[19;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;7H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[4;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[5;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[6;30H\u001b[32mExpected tuple!\u001b[39;49m\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[12;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[13;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[14;18Haction.append((x,y))\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[17;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[22;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[23;29H\u001b[7m80% L146\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;47H\u001b[4P\u001b[2;5H\u001b[4@\u001b[2;11H\u001b[?25l\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[14;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[19;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[20;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[23;29H\u001b[7m66% L127\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[6;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[7;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\tu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\tteam = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[19;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[21;47H\u001b[4P\u001b[21;5H\u001b[4@\u001b[21;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[23;29H\u001b[7m54% L108\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[5;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[6;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[7;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[14;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[15;5H\u001b[4P\t\b\b\u001b[31m    coord: Tell the controller to give it a c\u001b[39;49m\u001b[4@\u001b[31moord\u001b[39;49m\u001b[16;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m38% L89 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[4;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[7;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[11;5H    \u001b[33mx\u001b[39;49m,y = coord\u001b[K\u001b[12;5H    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[13;5H    team = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[15;52H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mIf no unit, check for terrain                \u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[23;29H\u001b[7m54\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[4;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[6;58H\u001b[4P\u001b[6;5H\u001b[4@\u001b[6;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[19;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[21;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m66% L107\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[14;18Haction.append((x,y))\u001b[K\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[19;54H\u001b[4P\u001b[19;5H\u001b[4@\u001b[19;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[23;29H\u001b[7m80% L126\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[6;14H\u001b[1m\u001b[36meturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\u001b[13;12Hopt \u001b[1m\u001b[36mn\u001b[0m\u001b[39;49m\u001b[2@\u001b[1m\u001b[36mot\u001b[0m\u001b[39;49m\n\b\b\b\b\b\b\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[18;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[22;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\n\b\b\b\u001b[7m7% L147\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;26H\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;12H\u001b[?25lopt \u001b[1m\u001b[36mn\u001b[0m\u001b[39;49m\u001b[2@\u001b[1m\u001b[36mot\u001b[0m\u001b[39;49m\u001b[3;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[7;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[11;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[12;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt\u001b[K\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L158\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;7H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;12H\u001b[?25l\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[3;30H\u001b[32mExpected tuple!\u001b[39;49m\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[9;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[10;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[11;18Haction.append((x,y))\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[13;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[14;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[19;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[22;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[23;29H\u001b[7m82% L149\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;12H\u001b[?25lopt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[3;30H\u001b[32mInvalid option.\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[9;11H\u001b[31mEnd my turn.                                                     \u001b[39;49m\u001b[10;12Hopt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[11;18Hgrid.end_turn()\u001b[K\u001b[12;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt\u001b[K\r\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;16r\u001b[2;1H\u001b[1M\u001b[1;24r\u001b[16;1H\u001b[K\u001b[2d\u001b[24d\u001b[?25lMark set\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;16r\u001b[2;1H\u001b[1L\u001b[1;24r\u001b[2;1H\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[23d\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;16r\u001b[2;1H\u001b[1M\u001b[1;24r\u001b[16;1H\u001b[K\u001b[2d\u001b[K\u001b[24d\u001b[?25lMark set\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;16r\u001b[4;1H\u001b[1L\u001b[1;24r\u001b[2;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[3;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\u001b[23;36H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;7H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[24d\u001b[?25lMark set\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[?25l\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[17;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt\u001b[23;36H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[17;54H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt\u001b[K\u001b[17;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;53H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt\u001b[K\u001b[17;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;52H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt\u001b[K\u001b[17;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;51H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt\u001b[K\u001b[17;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt\u001b[K\u001b[17;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt\u001b[K\u001b[17;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf opt\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l opt\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lopt\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lpt\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[24;1H\u001b[?25lAuto-saving...\u001b[17;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[17;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[17;47H\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;13H\r\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[19;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mW\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[20;13H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25li\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[20;13H\r\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\b\u001b[?25l\u001b[33mopt\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25lopt ==\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                             \u001b[39;49m\r\n\u001b[20;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mW\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[22;13H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[22;13H\r\t\b\b\b\b\u001b[22;13H\r\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\b\u001b[?25l\u001b[33mopt\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25lopt ==\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                             \u001b[39;49m\r\n\u001b[22;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mC\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m):\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\r\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\n\u001b[K\u001b[23;36H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;37H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[12;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[12;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[13;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L167\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;13H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;13H\u001b[?25ls\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[10;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[10;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\u001b[11;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[14;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L167\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[8;5H\u001b[4P\t\b\b\u001b[31mState: main menu (expected, menu opt\u001b[39;49m\u001b[4@\u001b[31mion)\u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[11;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[22;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[23;29H\u001b[7m86% L160\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[5;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[6;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[9;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[10;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[11;30H\u001b[32mExpected tuple!\u001b[39;49m\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[17;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[18;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[19;18Haction.append((x,y))\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[22;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m74% L141\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[7;47H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[19;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[23;29H\u001b[7m61% L122\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\tu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\tteam = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m47% L103\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[10;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[11;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[12;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[18;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[20;5H\u001b[4P\t\b\b\u001b[31m    coord: Tell the controller to give it a c\u001b[39;49m\u001b[4@\u001b[31moord\u001b[39;49m\u001b[21;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[23;29H\u001b[7m33% L84 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[8;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mWhen we end the turn, we commit all of our actions to history and\u001b[39;49m\u001b[18;7H\u001b[31mchange the undo point.                     \u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m23% L65\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\r\n\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[14;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\t\b\b\u001b[31mHas one of four return values:                                   \u001b[39;49m\u001b[18;7H\u001b[31m    None: Tell the controller to do nothing\u001b[39;49m\u001b[19;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[23;29H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[8;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mWhen we end the turn, we commit all of our actions to history and\u001b[39;49m\u001b[18;7H\u001b[31mchange the undo point.                     \u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lchoices = []\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\u001b[8;7H\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[9;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\n\n\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\n\t\b\b\u001b[31mWhen a move is completed and we return to the start state, we\u001b[39;49m\u001b[19;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[23;29H\u001b[7m11% L46\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[8;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.        \u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[10;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\r\n\n\n\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\t\b\b\u001b[31mchange the undo point.                                       \u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m23\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\r\n\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[14;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\t\b\b\u001b[31mHas one of four return values:                                   \u001b[39;49m\u001b[18;7H\u001b[31m    None: Tell the controller to do nothing\u001b[39;49m\u001b[19;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[23;29H\u001b[7m33% L64\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[8;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mWhen we end the turn, we commit all of our actions to history and\u001b[39;49m\u001b[18;7H\u001b[31mchange the undo point.                     \u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\r\n\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[14;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\t\b\b\u001b[31mHas one of four return values:                                   \u001b[39;49m\u001b[18;7H\u001b[31m    None: Tell the controller to do nothing\u001b[39;49m\u001b[19;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[23;29H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\u001b[5;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\u001b[6;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[9;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[16;5H    \u001b[33mx\u001b[39;49m,y = coord\u001b[K\u001b[17;5H    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[18;5H    team = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[20;52H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mIf no unit, check for terrain                \u001b[39;49m\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[23;29H\u001b[7m47% L83\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[9;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[11;58H\u001b[4P\u001b[11;5H\u001b[4@\u001b[11;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[23;29H\u001b[7m61% L102\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[5;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[7;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[8;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[19;18Haction.append((x,y))\u001b[K\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m74% L121\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[5;54H\u001b[4P\u001b[5;5H\u001b[4@\u001b[5;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[6;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[8;7H\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[9;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[10;12Hopt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\n\b\b\b\b\b\b\u001b[32mInvalid option.\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[17;11H\u001b[31mEnd my turn.                                                     \u001b[39;49m\u001b[18;12Hopt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[19;18Hgrid.end_turn()\u001b[K\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[23;29H\u001b[7m86% L140\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m):\u001b[8;43H\u001b[4P\u001b[8;5H\u001b[4@\u001b[8;11H\u001b[31mWait.                               \u001b[39;49m\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\r\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\u001b[23;29H\u001b[7mBot L15\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                \u001b[39;49m\r\n\u001b[32m            self.commit()                                                       \u001b[39;49m\r\n\u001b[10;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        if opt == \"\u001b[39;49mCancel\u001b[32m\":                                                     \u001b[39;49m\r\n\u001b[32m            return self.start_over()                                            \u001b[39;49m\r\n\u001b[10;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\r\n\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\u001b[A\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;36H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[10;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[10;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[8;5H\u001b[4P\t\b\b\u001b[31mState: main menu (expected, menu opt\u001b[39;49m\u001b[4@\u001b[31mion)\u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[11;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[22;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[23;29H\u001b[7m85% L160\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[5;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[6;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[9;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[10;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[11;30H\u001b[32mExpected tuple!\u001b[39;49m\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[17;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[18;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[19;18Haction.append((x,y))\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[22;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m74% L141\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[5;54H\u001b[4P\u001b[5;5H\u001b[4@\u001b[5;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[6;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[8;7H\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[9;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[10;12Hopt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\n\b\b\b\b\b\b\u001b[32mInvalid option.\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[17;11H\u001b[31mEnd my turn.                                                     \u001b[39;49m\u001b[18;12Hopt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[19;18Hgrid.end_turn()\u001b[K\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[23;29H\u001b[7m85\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m):\u001b[8;43H\u001b[4P\u001b[8;5H\u001b[4@\u001b[8;11H\u001b[31mWait.                               \u001b[39;49m\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\r\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\u001b[23;29H\u001b[7mBot L159\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;36H\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[10;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[10;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;26H\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;26H\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25lrsel\u001b[1@f\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@u\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36msel\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mf\u001b[0m\u001b[39;49m\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;20H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[3;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(a,b)\u001b[K\u001b[6;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\r\n\t            report.append((a,b))\u001b[K\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[10;13H        _floodfill((a-1,b),r-1)\u001b[11;13H        _floodfill((a+1,b),r-1)\u001b[12;21H_floodfill((a,b-1),r-1)\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\u001b[K\r\n\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[17;47H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\u001b[19;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.                          \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   31% L115  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ox,oy)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# Launch an attack from the attack coordinates to the defend                \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# coordinates. Will throw exception if move is illegal.                     \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# CHECK FIRST.                                                              \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlaunch_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, attacker, defender):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = attacker\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = defender\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ax,ay).unit\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(dx,dy).unit\u001b[19;5H    atk_unit.attack(def_unit)\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp >= 0: \u001b[31m#and can counter         \u001b[39;49m\u001b[21;5H        def_unit.attack(atk_unit)\r\n\u001b[K\u001b[23;30H\u001b[7m6% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        def_unit.attack(atk_unit)\r\n\u001b[K\n\t\u001b[31m# Destroy dead units.                                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(dx,dy)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(ax,ay)\r\n\u001b[K\n\u001b[K\u001b[9;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\t\b\b\u001b[31mThis should be the ONLY WAY units are added to the game.  \u001b[39;49m\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\u001b[K\u001b[13;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\r\n\t\u001b[33munit.team\u001b[39;49m = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m#                                        \u001b[39;49m\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\n\u001b[7m40% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n\t    \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[20;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day += 1\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;30H\u001b[7m5% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\u001b[K\n\u001b[?25l\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, terrain):\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = terrain\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\".\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = \u001b[32m\"g\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[15;5H\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# the unit's draw will be prioritized.                                      \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit:\u001b[K\n\b\b\b\bunit.draw(x, y, col)\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\b\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[23;30H\u001b[7m8% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\b\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\r\n                \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\u001b[K\r\n            draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function draws the terrain without drawing the                       \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# unit. Put into its own function to avoid messing up                       \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# the \"drawable\" interface.                                                 \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw_terrain\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[K\r\n\t    \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\r\n\tdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\n\u001b[K\n\u001b[31m# Units are the pieces that move about the game board. Units belong to a        \u001b[39;49m\r\n\u001b[4P\u001b[17;4H\u001b[31meam and can be moved about by taking acti\u001b[39;49m\u001b[4@\u001b[31mons.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, team):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = team\u001b[K\u001b[23;29H\u001b[7m52% L210\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function draws the unit at the desired location.                     \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\r\n\n        \u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n        \u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        \u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Build the animation for this unit based on values                     \u001b[39;49m\r\n\t\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\u001b[23;30H\u001b[7m7% L229\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp <= 90):\u001b[5;13Hframes.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\r\n\u001b[K\n\t\u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m unit.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\u001b[16;5H\u001b[4P\t\b\b\u001b[31m                                                     \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mattack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[K\r\n\tdamage = \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(30 * 0.01 * \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp)\u001b[K\r\n\tunit.hp -= damage\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.hp < 0:\u001b[K\r\n\t    unit.hp = 0\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m61% L248\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    unit.hp = 0\u001b[K\r\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.active = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[23;30H\u001b[7m5% L267\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\u001b[?25l\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[4;3H\u001b[31mcontrol back and forth between it. It doesn't usually need a\u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[8;14Hworld = grid\u001b[K\u001b[9;14Hw = w\u001b[K\n\b\b\b\b\bh = h\u001b[K\n\b\b\b\b\bcam = widgets.Camera(w,h,grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.highlight = []\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = \u001b[35mNone\u001b[39;49m\u001b[21;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\n\b\u001b[7m7% L286\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m300\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1M\u001b[1;24r\u001b[17;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[18;14Hcheckpoint = \u001b[35mNone\u001b[39;49m\r\n\n\n\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[20;1H\u001b[1M\u001b[1;24r\u001b[19;5H\u001b[?25l\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\n\n            \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[K\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m299\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[22d            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[14;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[22;1H                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\u001b[K\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[14;14Hmenu = \u001b[35mNone\u001b[39;49m\u001b[22;1H                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[K\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m300\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[5;57H\u001b[4P\r\u001b[4@\t\b\b\u001b[31mThis function handles input passed from gfx.get_input.\u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n\t    \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"Attack\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[32m\"attacking\"\u001b[39;49m\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[15;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[16;5H            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\u001b[K\u001b[17;5H                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[33m.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[19;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[20;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\u001b[22;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\n\b\b\b\u001b[7m70% L307\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;22H\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;45H\u001b[1;22r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[23;36H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[23;36H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;13H\u001b[20;57H\u001b[?25l.ready\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;31H\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[23;36H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mr\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mr\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[K\b\u001b[K\u001b[?25lq\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[10;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[10;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[K\u001b[12d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   70% L306\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;13H\u001b[H\n\t\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor).ready = \u001b[35mFalse\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[5;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[6;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"End Turn\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.end_turn()\u001b[9;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\n\b\b\b\b\b    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\bpos = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\r\n\t\t\bpos:\u001b[K\n\b\b\b\u001b[33mcx\u001b[39;49m,cy = pos\u001b[K\r\n\t\ttile = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get(cx,cy)\u001b[K\r\n\t\tunit = tile.unit \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"attacking\"\u001b[39;49m:\r\n\t\t    my_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[19;13H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit.allied(my_unit):\r\n\t\t        \u001b[33mstart_hp\u001b[39;49m = unit.hp, my_unit.hp\u001b[21;21H    \u001b[33mc1\u001b[39;49m = unit.team.color\u001b[K\u001b[22;21H    \u001b[33mc2\u001b[39;49m = my_unit.team.color\u001b[K\u001b[23;30H\u001b[7m4% L31\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[3;57H\u001b[?25l\u001b[33m.ready\u001b[39;49m\u001b[16;17H\u001b[33munit\u001b[39;49m\n\n\n\n\tstart_hp\r\n\t\t\tc1\n\b\bc2\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lAuto-saving...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[9;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[10;13H\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(q)\r\n\u001b[K\n\u001b[K\n\t\t\bq == \u001b[32m\"Attack\"\u001b[39;49m:\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\r\n\t\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[32m\"attacking\"\u001b[39;49m\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\u001b[K\u001b[21;21H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[22;21H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[33m.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[22;57H\u001b[?25l.ready\u001b[11;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[11;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[11;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;23H\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[13;13H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\u001b[22;1H                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;17H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\r\n\t\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[22;1H                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;21H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[32m\"attacking\"\u001b[39;49m\u001b[K\u001b[22;1H                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;17H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[32m\"attacking\"\u001b[39;49m\u001b[13;22Hselected = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\u001b[22;1H            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;17H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\u001b[13;22Hcam.blink = []\u001b[K\u001b[22;1H                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.end_turn()\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;17H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[13;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[22;1H            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[13;13H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\u001b[22;1H                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;17H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\r\n\t\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[22;1H        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;21H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.move_unit(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[13;32Hunit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[33m.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[22;1H            pos = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;21H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[33m.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[22;1H            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;17H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[13;22Hcurrently = \u001b[35mNone\u001b[39;49m\u001b[22;1H                \u001b[33mcx\u001b[39;49m,cy = pos\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;17H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[13;23Ham.blink = []\u001b[K\u001b[22;1H                tile = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get(cx,cy)\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;17H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[13;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[22;1H                unit = tile.unit \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[13;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.end_turn()\u001b[22;1H                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"attacking\"\u001b[39;49m:\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;17H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.end_turn()\u001b[13;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\u001b[22;1H                    my_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\n\b\b\b\b\b    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[22;1H                    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit.allied(my_unit):\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;17H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[22;1H                        \u001b[33mstart_hp\u001b[39;49m = unit.hp, my_unit.hp\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[14;13H\u001b[?25l\u001b[33mpos\u001b[39;49m\u001b[16;20H\u001b[33mcy\u001b[39;49m\r\n\t\t\u001b[33mtile\u001b[39;49m\r\n\t\t\u001b[33munit\u001b[39;49m\n\n\n\n\tstart_hp\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;9H\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\r\n\t    \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[22;1H                        c1 = unit.team.color\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;38H\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;45H\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\u001b[11;13H\u001b[?25l\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(q)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;36H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;13H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lq\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[11;13H\u001b[4@\t\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[12;13H\u001b[4@\t\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;43H\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\u001b[?25l                \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = pos\u001b[K\u001b[23;36H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\n\u001b[?25l                \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = pos\u001b[K\u001b[23;36H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mr\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;44H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[16;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[16;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   73% L313\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\b\b\r\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mr\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25lr ==\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[18;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[18;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = grid\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m0% L298\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[3;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m unit.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\r\n\u001b[K\u001b[5;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mattack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\r\n\tdamage = \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(30 * 0.01 * \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp)\r\n\tunit.hp -= damage\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.hp < 0:\u001b[10;13Hunit.hp = 0\r\n\u001b[K\u001b[12;3H\u001b[31m                                                            \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\u001b[16;14Hcolor = color\u001b[17;14Hresources = 0\u001b[18;14Hallies = []\u001b[19;14Hactive = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\n\u001b[C\u001b[7m66% L279\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\u001b[K\u001b[5;60H\u001b[4P\u001b[5;5H\u001b[4@\u001b[5;11H\u001b[31mGray out units that can't act. Units are always bold.\u001b[39;49m\u001b[6;5H    \u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Build the animation for this unit based on values                     \u001b[39;49m\r\n\t\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp <= 90):\u001b[K\r\n            frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\r\n\u001b[K\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[22;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m unit.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\u001b[23;30H\u001b[7m2% L260\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\u001b[K\n\n\u001b[31m# Units are the pieces that move about the game board. Units belong to a        \u001b[39;49m\r\n\u001b[31m# team and can be moved about by taking actions.                                \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, team):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This function draws the unit at the desired location.                     \u001b[39;49m\r\n\t\u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\u001b[K\u001b[23;29H\u001b[7m58% L241\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[K\u001b[4;5H\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n    \u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[6;45H\u001b[4P\r\u001b[4@\t\b\u001b[31mhe unit's draw will be prioritized.      \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit.draw(x, y, col)\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\r\n\t        \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\u001b[13;13Hdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\u001b[K\u001b[15;5H\u001b[31m# This function draws the terrain without drawing the                       \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# unit. Put into its own function to avoid messing up                       \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# the \"drawable\" interface.                                                 \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw_terrain\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[20;5H        \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\u001b[K\u001b[21;5H    draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\u001b[K\u001b[23;30H\u001b[7m3% L222\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[4;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\u001b[5;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[9;18Hday += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, terrain):\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = terrain\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\".\"\u001b[39;49m\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = \u001b[32m\"g\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[K\n\n\u001b[C\u001b[7m49% L203\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\t\u001b[33munit.team\u001b[39;49m = team\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\u001b[K\r\n        \u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[16;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\r\n\u001b[K\u001b[20;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[23;30H\u001b[7m5% L184\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# CHECK FIRST.                                                              \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlaunch_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, attacker, defender):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = attacker\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = defender\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ax,ay).unit\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(dx,dy).unit\r\n\tatk_unit.attack(def_unit)\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp >= 0: \u001b[31m#and can counter\u001b[39;49m\u001b[10;5H        def_unit.attack(atk_unit)\r\n\u001b[K\n\t\u001b[31m# Destroy dead units.                                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(dx,dy)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(ax,ay)\r\n\n\u001b[K\u001b[17;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# This should be the ONLY WAY units are added to the game.                  \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\u001b[K\u001b[21;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\u001b[23;30H\u001b[7m0% L165\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l                _floodfill((a,b+1),r-1)\u001b[K\u001b[3;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\u001b[8;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.\u001b[39;49m\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ox,oy)\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[17;5H    \u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mLaunch an attack from the attack coordinates to the defend\u001b[39;49m\u001b[20;5H\u001b[31m# coordinates. Will throw exception if move is illegal.                     \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# CHECK FIRST.                                                              \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlaunch_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, attacker, defender):\u001b[23;29H\u001b[7m35% L146\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile.unit:\u001b[K\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\r\n\u001b[K\u001b[9;60H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mUse the naive flood-fill algorithm to get neighboring\u001b[39;49m\u001b[10;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(a,b)\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\r\n\t            report.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[19;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[20;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[21;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[22;5H    _floodfill((x,y),unit.move)\u001b[K\n\b\b\b\b\b\b\u001b[7m0% L127\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;7H\u001b[?25l\u001b[31mReturn the actions that the given unit can take if it were\u001b[39;49m\u001b[3;5H\u001b[31m# at x,y.                                                                   \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mactions\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, x, y):\r\n\t\u001b[33macts\u001b[39;49m = []\u001b[K\r\n\t\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x-1,y)\r\n\t\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x+1,y)\r\n\t\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y-1)\r\n\t\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y+1)\u001b[K\r\n\t\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: acts.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[23;29H\u001b[7m24% L108\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l                    _process_units(u)\u001b[K\u001b[3;5H                \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\u001b[4;5H            \u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[9;5H\u001b[31m# Get the tile at x,y. Returns None if out of range.                        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\u001b[11;12H(x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\u001b[19;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mReturn the actions that the given unit can take if it were\u001b[39;49m\u001b[22;5H\u001b[31m# at x,y.                                                                   \u001b[39;49m\r\n\u001b[23;30H\u001b[7m1% L89 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\t\u001b[31m#   y: (int) y position                                                 \u001b[39;49m\r\n\t\u001b[31m#   terrain: (string) the name of the terrain                           \u001b[39;49m\r\n\t\u001b[31m#   unit: the unit on this terrain, if one                              \u001b[39;49m\r\n\t\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\t\u001b[31m#   variables: (dict) User-defined variables                            \u001b[39;49m\r\n\u001b[9;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"cells\"\u001b[39;49m]:\u001b[K\u001b[10;5H        \u001b[33mthis\u001b[39;49m = Cell(c[\u001b[32m\"terrain\"\u001b[39;49m])\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\u001b[K\u001b[12;13H\u001b[33mthis.variables\u001b[39;49m = c.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"owner\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t\t\u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\u001b[15;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\u001b[16;5H            \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\r\n\t            \u001b[33mu\u001b[39;49m = Unit(unit[\u001b[32m\"type\"\u001b[39;49m],\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]])\r\n\t            \u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[20;21H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\u001b[21;5H                    _process_units(u)\u001b[K\u001b[22;5H                \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\n\u001b[7m14% L70\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = config.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day = 0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\u001b[K\u001b[8;11H\u001b[31mLoad the teams first, since cells and units reference them.\u001b[39;49m\r\n\t\u001b[31m# Then set up the alliances.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\u001b[11;13H\u001b[33mthis\u001b[39;49m = Team( t[\u001b[32m\"name\"\u001b[39;49m], t[\u001b[32m\"color\"\u001b[39;49m] )\u001b[12;30Ht\u001b[13;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams.append(this)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\u001b[K\u001b[15;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist\r\n\t\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\u001b[17;21H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\u001b[K\r\n\u001b[K\n\t\u001b[31m# Load the terrain cells. The units are embedded in these elements      \u001b[39;49m\r\n\t\u001b[31m# of the dictionary. Note that when units are loaded in other units     \u001b[39;49m\r\n\t\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\u001b[23;29H\u001b[7m 9% L51\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# provides an API to game rulesets to create, delete, and move entities         \u001b[39;49m\r\n\u001b[31m# around, but essentially has no functionality other than changing its          \u001b[39;49m\r\n\u001b[31m# configuration. The grid should be initialized with a configuration            \u001b[39;49m\r\n\u001b[31m# Dictionary containing the following keys and values.                          \u001b[39;49m\r\n\u001b[31m#   w: (int) width                                                              \u001b[39;49m\r\n\u001b[31m#   h: (int) height                                                             \u001b[39;49m\r\n\u001b[8P\u001b[8;3H\u001b[31m  cells: (list) exactly w*h cells                          \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[8P\u001b[9;3H\u001b[31m  teams: (list) the teams in\u001b[39;49m\u001b[8@\u001b[31m the map\u001b[39;49m\r\n\u001b[31m#   allies: (list) the teams that are allied in a list of lists of ints         \u001b[39;49m\r\n\u001b[31m#   variables: (dictionary) a dictionary of user-defined variables              \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, config):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = config[\u001b[32m\"w\"\u001b[39;49m], config[\u001b[32m\"h\"\u001b[39;49m]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[17;13H\u001b[33mrow\u001b[39;49m = []\u001b[K\u001b[18;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\r\n\t        row.append(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\u001b[23;30H\u001b[7m3% L32\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11L\u001b[1;24r\u001b[2;1H\u001b[?25l\u001b[31m# A grid is the arena upon which a battle takes place. The entire map should    \u001b[39;49m\r\n\u001b[A\n\u001b[31m# be self-contained. Players interact with the map by taking \"actions\".         \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m widgets\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Grid is a game-agnostic representation of the world's entities. It        \u001b[39;49m\r\n\u001b[A\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[?25lBeginning of buffer\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u0007\u0007\u0007\u0007\u001b[1;22r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[24;1H\u001b[K\u001b[12d\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, config):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = config[\u001b[32m\"w\"\u001b[39;49m], config[\u001b[32m\"h\"\u001b[39;49m]\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[K\r\n            \u001b[33mrow\u001b[39;49m = []\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\u001b[K\r\n                row.append(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\u001b[23;29H\u001b[7m 3% L22\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11L\u001b[1;24r\u001b[2;1H\u001b[?25l\u001b[31m# A grid is the arena upon which a battle takes place. The entire map should    \u001b[39;49m\r\n\u001b[A\n\u001b[31m# be self-contained. Players interact with the map by taking \"actions\".         \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m widgets\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Grid is a game-agnostic representation of the world's entities. It        \u001b[39;49m\r\n\u001b[A\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[?25lBeginning of buffer\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9 \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[7;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[7;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;3H\u001b[?25l\u001b[31m  allies: (list) the teams that are allied in a list of lists of ints     \u001b[39;49m\u001b[3;3H\u001b[31m  variables: (dictionary) a dictionary of user-defined variables     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, config):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = config[\u001b[32m\"w\"\u001b[39;49m], config[\u001b[32m\"h\"\u001b[39;49m]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\r\n            \u001b[33mrow\u001b[39;49m = []\u001b[10;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\r\n\t\trow.append(\u001b[35mNone\u001b[39;49m)\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = config.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day = 0\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\u001b[K\u001b[19;62H\u001b[8P\r\u001b[8@\u001b[19;11H\u001b[31mLoad the teams first, since cells and units reference them.\u001b[39;49m\u001b[20;31H\u001b[8P\r\u001b[8@\u001b[20;11H\u001b[31mThen set up the alliances.  \u001b[39;49m\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\r\n            \u001b[33mthis\u001b[39;49m = Team( t[\u001b[32m\"name\"\u001b[39;49m], t[\u001b[32m\"color\"\u001b[39;49m] )\u001b[K\u001b[23;29H\u001b[7m 6% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\r\n            \u001b[33mthis\u001b[39;49m = Team( t[\u001b[32m\"name\"\u001b[39;49m], t[\u001b[32m\"color\"\u001b[39;49m] )\u001b[K\r\n            \u001b[33mthis.variables\u001b[39;49m = t.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams.append(this)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[9;13H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\r\n\u001b[K\n\t\u001b[31m# Load the terrain cells. The units are embedded in these elements      \u001b[39;49m\r\n\t\u001b[31m# of the dictionary. Note that when units are loaded in other units     \u001b[39;49m\r\n\t\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\t\u001b[31m#   y: (int) y position                                                 \u001b[39;49m\r\n\t\u001b[31m#   terrain: (string) the name of the terrain                           \u001b[39;49m\r\n\t\u001b[31m#   unit: the unit on this terrain, if one                              \u001b[39;49m\r\n\t\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\u001b[19;11H\u001b[31m  variables: (dict) User-defined variables                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"cells\"\u001b[39;49m]:\u001b[K\r\n\t    \u001b[33mthis\u001b[39;49m = Cell(c[\u001b[32m\"terrain\"\u001b[39;49m])\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\u001b[K\u001b[23;29H\u001b[7m11% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33mthis\u001b[39;49m = Cell(c[\u001b[32m\"terrain\"\u001b[39;49m])\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\u001b[K\u001b[4;30Hc\u001b[5;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"owner\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t        \u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c\r\n\t\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\u001b[9;21H\u001b[33mu\u001b[39;49m = Unit(unit[\u001b[32m\"type\"\u001b[39;49m],\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]])\u001b[10;21H\u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[K\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\u001b[K\r\n\t                _process_units(u)\u001b[K\r\n\t            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\t        \u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# Get the tile at x,y. Returns None if out of range.                        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[23;30H\u001b[7m7% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[4;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\r\n\u001b[K\u001b[7;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Return the actions that the given unit can take if it were                \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# at x,y.                                                                   \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mactions\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, x, y):\u001b[K\r\n\t\u001b[33macts\u001b[39;49m = []\r\n\t\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x-1,y)\r\n\t\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x+1,y)\r\n\t\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y-1)\u001b[20;5H    \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y+1)\u001b[K\u001b[21;5H    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[22;12Ha1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m22% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[3;12Ha1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: acts.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\r\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                           \u001b[39;49m\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\u001b[15;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile.unit:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\u001b[K\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\u001b[23;30H\u001b[7m6% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(a,b)\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[10;5H                _floodfill((a-1,b),r-1)\u001b[K\u001b[11;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[12;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[13;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[14;5H    _floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[17;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\u001b[19;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[20;5H\u001b[4P\t\b\b\u001b[31mthrow exception if move is illegal. CHECK FIRST.     \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[23;29H\u001b[7m32% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ox,oy)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# Launch an attack from the attack coordinates to the defend                \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# coordinates. Will throw exception if move is illegal.                     \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# CHECK FIRST.                                                              \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlaunch_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, attacker, defender):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = attacker\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = defender\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ax,ay).unit\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(dx,dy).unit\u001b[19;5H    atk_unit.attack(def_unit)\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp >= 0: \u001b[31m#and can counter         \u001b[39;49m\u001b[21;5H        def_unit.attack(atk_unit)\r\n\u001b[K\u001b[23;30H\u001b[7m8% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        def_unit.attack(atk_unit)\r\n\u001b[K\n\t\u001b[31m# Destroy dead units.                                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(dx,dy)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(ax,ay)\r\n\u001b[K\n\u001b[K\u001b[9;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\t\b\b\u001b[31mThis should be the ONLY WAY units are added to the game.  \u001b[39;49m\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\u001b[K\u001b[13;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\r\n\t\u001b[33munit.team\u001b[39;49m = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m#                                        \u001b[39;49m\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\n\u001b[7m42% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n\t    \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[20;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day += 1\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;30H\u001b[7m7% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\u001b[K\n\u001b[?25l\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, terrain):\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = terrain\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\".\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = \u001b[32m\"g\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[15;5H\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# the unit's draw will be prioritized.                                      \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit:\u001b[K\n\b\b\b\bunit.draw(x, y, col)\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\b\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[23;29H\u001b[7m51% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\b\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\r\n                \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\u001b[K\r\n            draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function draws the terrain without drawing the                       \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# unit. Put into its own function to avoid messing up                       \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# the \"drawable\" interface.                                                 \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw_terrain\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[K\r\n\t    \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\r\n\tdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\n\u001b[K\n\u001b[31m# Units are the pieces that move about the game board. Units belong to a        \u001b[39;49m\r\n\u001b[4P\u001b[17;4H\u001b[31meam and can be moved about by taking acti\u001b[39;49m\u001b[4@\u001b[31mons.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, team):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = team\u001b[K\u001b[23;30H\u001b[7m5% L210\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function draws the unit at the desired location.                     \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\r\n\n        \u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n        \u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        \u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Build the animation for this unit based on values                     \u001b[39;49m\r\n\t\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\u001b[23;29H\u001b[7m60% L229\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp <= 90):\u001b[5;13Hframes.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\r\n\u001b[K\n\t\u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m unit.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\u001b[16;5H\u001b[4P\t\b\b\u001b[31m                                                     \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mattack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[K\r\n\tdamage = \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(30 * 0.01 * \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp)\u001b[K\r\n\tunit.hp -= damage\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.hp < 0:\u001b[K\r\n\t    unit.hp = 0\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m4% L248\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    unit.hp = 0\u001b[K\r\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.active = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[23;30H\u001b[7m8% L267\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\u001b[?25l\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[4;3H\u001b[31mcontrol back and forth between it. It doesn't usually need a\u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[8;14Hworld = grid\u001b[K\u001b[9;14Hw = w\u001b[K\n\b\b\b\b\bh = h\u001b[K\n\b\b\b\b\bcam = widgets.Camera(w,h,grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[20;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\r\n                \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(q)\u001b[K\u001b[23;29H\u001b[7m70% L286\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\r\n                \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(q)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[7;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\r\n\t        \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(pos)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules\r\n\u001b[K\n\t\t\u001b[33mcx\u001b[39;49m,cy = pos\r\n\t        tile = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get(cx,cy)\r\n\t        unit = tile.unit \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"attacking\"\u001b[39;49m:\u001b[16;5H                my_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[K\u001b[17;5H                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit.allied(my_unit):\r\n\t                start_hp = unit.hp, my_unit.hp\r\n\t                c1 = unit.team.color\u001b[20;13H            c2 = my_unit.team.color\u001b[21;13H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n\t\t        \u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\u001b[23;30H\u001b[7m5% L305\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;22H\u001b[?25l:\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;13H\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules:\r\n\u001b[K\u001b[23;30H\u001b[7m4% L313\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\b\b\r\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[10;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;20H\u001b[?25l\u001b[33mcy\u001b[39;49m\r\n\t\t\u001b[33mtile\u001b[39;49m\r\n\t\t\u001b[33munit\u001b[39;49m\u001b[10;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\b\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[33mr\u001b[39;49m =:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25lr :\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25li\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mr\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25lr ==\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\b\b\r\t\b\b\b\b\r\t\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\b\b\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mr\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25lr ==\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lM\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lU\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[2;13H\u001b[?25l        my_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\r\n\t\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit.allied(my_unit):\r\n\t\t        start_hp = unit.hp, my_unit.hp\r\n\t                c1 = unit.team.color\u001b[6;13H            c2 = my_unit.team.color\u001b[7;13H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n\t\t        \u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\u001b[9;35Hmy_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\r\n\u001b[K\n\t                \u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\u001b[12;13H            \u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\r\n\t\t        \u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[K\u001b[14;13H            \u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\r\n\t\t        \u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)\r\n\t\t\t\u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = pos\r\n\t\t        \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected\r\n\t\t        \u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[K\r\n\t\t        \u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[K\r\n\t\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\r\n\u001b[K\u001b[22;21H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit:\u001b[K\n\b\b\b\b\b\b\u001b[7m8% L324\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;21H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit:\u001b[K\r\n\t\t\t    \u001b[33mmy_unit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"moving\"\u001b[39;49m:\u001b[K\u001b[8;21Hmy_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[9;21H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (cx,cy) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\u001b[K\r\n\t\t\t\u001b[33macts\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.actions(my_unit,cx,cy)\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\u001b[12;21H\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\r\n\t\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m unit:\u001b[K\n\b\b\b\b\b\b\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.ready \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.current_team():\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get_move_range(cx,cy)\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = cx,cy\u001b[20;30Hcurrently = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[21;21H\u001b[31m#actions = tile.unit.get_actions()                          \u001b[39;49m\r\n\u001b[22;21H\u001b[31m#if actions and len(actions) > 0:                           \u001b[39;49m\r\n\u001b[23;29H\u001b[7m86% L343\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lAuto-saving...\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;61H\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[K\u001b[C\u001b[2;21H\u001b[?25lmy_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[3;21H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit.allied(my_unit):\r\n\t\t\tstart_hp = unit.hp, my_unit.hp\r\n\t\t\tc1 = unit.team.color\r\n\t\t\tc2 = my_unit.team.color\r\n\t\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[8;21H    \u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\u001b[K\u001b[9;21H              my_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\r\n\u001b[K\n\t\t\t\u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\u001b[12;21H    \u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\r\n\t\t\t\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\r\n\t\t\t\u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\r\n\t\t\t\u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)\r\n\t\t        \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = pos\u001b[17;21H    \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected\u001b[K\r\n\t\t\t\u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[K\r\n\t\t\t\u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[K\u001b[20;30Halerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\r\n\u001b[K\u001b[22;21H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit:\u001b[K\u001b[23;29H\u001b[7m78% L344\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\n\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(q)\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(pos)\u001b[K\r\n\u001b[K\n\t\u001b[31m#                                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\n\b\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.choices\u001b[14;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu =\u001b[K\r\n\u001b[K\n\t\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = pos\u001b[K\r\n\t\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get(cx,cy)\r\n\t\t\u001b[33munit\u001b[39;49m = tile.unit \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"attacking\"\u001b[39;49m:\u001b[K\u001b[21;21Hmy_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[22;21H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit.allied(my_unit):\u001b[23;30H\u001b[7m4% L325\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lMark set\u001b[15;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lwidgets.Menu(acts),cx,cy\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[15;52H\b\b\b\b\b\t\b\u001b[H\n\u001b[K\n\u001b[?25l\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = grid\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[20;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[K\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\n\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(q)\u001b[K\u001b[23;29H\u001b[7m69% L306\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\n\t\u001b[?25l\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[21;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[22;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\u001b[23;36H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\u001b[?25l\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\r\n                \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(q)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[7;5H        \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\r\n\t        \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(pos)\r\n\u001b[K\n\t\u001b[31m#                                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.choices\u001b[15;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[16;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\r\n\u001b[K\n\t        \u001b[33mcx\u001b[39;49m,cy = pos\u001b[K\r\n\t        \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get(cx,cy)\r\n\t        \u001b[33munit\u001b[39;49m = tile.unit \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[21;13H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"attacking\"\u001b[39;49m:\u001b[22;13H        my_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[23;29H\u001b[7m73% L305\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;53H\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[19;20H\u001b[?25l\u001b[33mcy\u001b[39;49m\u001b[17;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mr\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25lr ==\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lU\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;37H\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[17;13H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[18;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\r\n\u001b[K\u001b[23;36H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[16;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[16;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;29H\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[21;20H\u001b[?25lcy\r\n\t\ttile\u001b[16;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[18;1H\u001b[1M\u001b[1;24r\u001b[16;17H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[17;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n\n\n\n\n                unit = tile.unit \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[20;20H\u001b[?25l\u001b[33mcy\u001b[39;49m\r\n\t\t\u001b[33mtile\u001b[39;49m\r\n\t\t\u001b[33munit\u001b[39;49m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[13;13H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[14;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\u001b[15;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.choices\u001b[16;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\u001b[23;36H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;20H\u001b[?25lcy\r\n\t\ttile\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[1P\r\t\t\b\b\u001b[1P\r\u001b[13;14H\u001b[1P\r\u001b[13;13H\u001b[1P\r\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\b\b\u001b[?25l\u001b[33mcy\u001b[39;49m\r\n\t\t\u001b[33mtile\u001b[39;49m\u001b[19;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\\\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[K\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\r\n\t\t\br == rules.CTRL_COORD:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.choices\u001b[5;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\u001b[8;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.grid\r\n\u001b[K\n\t\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = pos\r\n\t        \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get(cx,cy)\u001b[K\r\n\t        \u001b[33munit\u001b[39;49m = tile.unit \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[13;13H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"attacking\"\u001b[39;49m:\u001b[14;13H        my_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\r\n\t\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit.allied(my_unit):\u001b[16;13H            start_hp = unit.hp, my_unit.hp\r\n\t\t        c1 = unit.team.color\u001b[K\u001b[18;13H            c2 = my_unit.team.color\r\n\t\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n\t\t\t\u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\r\n\t\t                  my_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\r\n\u001b[K\u001b[23;30H\u001b[7m5% L326\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;17H\u001b[?25l\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = pos\r\n\t\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get(cx,cy)\u001b[22;1H                        \u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\u001b[A\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;17H\u001b[?25l\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get(cx,cy)\r\n\t\t\u001b[33munit\u001b[39;49m = tile.unit \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[22;1H                        \u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;17H\u001b[?25l\u001b[33munit\u001b[39;49m = tile.unit \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"attacking\"\u001b[39;49m:\u001b[K\u001b[22;1H                        \u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;17H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"attacking\"\u001b[39;49m:\r\n\t\t    my_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[22;1H                        \u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[10;21H\u001b[?25l\u001b[33mmy_unit\u001b[39;49m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;21H\u001b[?25l\u001b[33mmy_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[10;21H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit.allied(my_unit):\u001b[K\u001b[22;1H                        \u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;21H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit.allied(my_unit):\u001b[10;21H    \u001b[33mstart_hp\u001b[39;49m = unit.hp, my_unit.hp\u001b[K\u001b[22;1H                        \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = pos\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;25H\u001b[?25l\u001b[33mstart_hp\u001b[39;49m = unit.hp, my_unit.hp\r\n\t\t\t\u001b[33mc1\u001b[39;49m = unit.team.color\u001b[K\u001b[22;1H                        \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;25H\u001b[?25l\u001b[33mc1\u001b[39;49m = unit.team.color\u001b[10;26H\u001b[33m2\u001b[39;49m = \u001b[3@my_\u001b[22;1H                        \u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;25H\u001b[?25l\u001b[33mc2\u001b[39;49m = my_unit.team.color\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[22;1H                        \u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;25H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n\t\t\t\u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\u001b[K\u001b[22;1H                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;25H\u001b[?25l\u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\r\n\t\t\t          my_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\u001b[22;1H\u001b[K\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;35H\u001b[?25lmy_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\r\n\u001b[K\u001b[22d                        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit:\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[10;25H\u001b[?25l\u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\u001b[22d                            \u001b[33mmy_unit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;25H\u001b[?25l\u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\t\t\t\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[K\u001b[22;1H                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;25H\u001b[?25l\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[10;26H\u001b[33m2\u001b[39;49m = start_hp[1]-end_hp[1\u001b[22;1H                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;25H\u001b[?25l\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\r\n\t\t\t\u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\u001b[22;1H                \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"moving\"\u001b[39;49m:\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;29H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[23;29H\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\t\t\t\u001b[?25l\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[K\r\n                        \u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\u001b[10;26H\u001b[?25l\u001b[33m1\u001b[39;49m = start_hp[0]-end_hp[0\r\n                        \u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\t\t\t\u001b[?25l\u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n                        \u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\n\u001b[?25l                        \u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\u001b[A\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;35H\u001b[?25lmy_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\u001b[23;30H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\u001b[10;35H\u001b[?25lmy_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\r\n\u001b[K\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\t\t\t\u001b[?25l\u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\u001b[K\r\n                                  my_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\t\t\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n                        \u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[33mc2\u001b[39;49m = my_unit.team.color\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\t\t\t\u001b[?25l\u001b[33mc2\u001b[39;49m = my_unit.team.color\u001b[K\r\n                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[33mc1\u001b[39;49m = unit.team.color\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\u001b[10;26H\u001b[?25l\u001b[33m1\u001b[39;49m = \u001b[3P\r\n                        \u001b[33mc2\u001b[39;49m = my_unit.team.color\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[33mstart_hp\u001b[39;49m = unit.hp, my_unit.hp\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lType y, n, ! or SPC (the space bar):\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[4@\u001b[2;26H\u001b[?25lgrid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.grid\u001b[3;13H            \u001b[33mstart_hp\u001b[39;49m = unit.hp, my_unit.hp\r\n\t\t        \u001b[33mc1\u001b[39;49m = unit.team.color\u001b[K\r\n\u001b[7m-UU-:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   78% L323  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\nYou have typed C-x C-u, invoking disabled command upcase-region.\r\nIt is disabled because new users often find it confusing.\r\nHere's the first part of its description:\u001b[K\r\n\u001b[K\u001b[10;4HConvert the region to upper case.  In programs, wants two arguments.\u001b[11;4HThese arguments specify the starting and ending character numbers of\u001b[12;4Hthe region to operate on.  When used as a command, the text between\u001b[K\u001b[13;4Hpoint and the mark is operated on.\u001b[K\u001b[14;4HSee also `\u001b[4m\u001b[34mcapitalize-region\u001b[0m\u001b[39;49m'.\u001b[K\r\n\nDo you want to use this command anyway?\u001b[K\r\n\u001b[K\nYou can now type\u001b[K\r\ny   to try it and enable it (no questions if you use it again).\u001b[K\r\nn   to cancel--don't try the command, and it remains disabled.\u001b[K\r\nSPC to try the command just this once, but leave it disabled.\r\n!   to try it, and enable all disabled commands for this session only.\r\n\u001b[7m-UUU:%%--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*Disabled Command*\u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Help) ----------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[2;13H\u001b[4P\u001b[2;22H\u001b[?25lhighlight = []\u001b[K\u001b[3;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.choices\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.grid\r\n\t\t\t\u001b[33mstart_hp\u001b[39;49m = unit.hp, my_unit.hp\u001b[10;4H                     \u001b[33mc1\u001b[39;49m = unit.team.color\u001b[K\u001b[11;4H                     \u001b[33mc2\u001b[39;49m = my_unit.team.color\u001b[K\u001b[12;4H                     \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[13;4H                     \u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\u001b[14;4H                               my_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\r\n\n                        \u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\t\t\t\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\r\n                        \u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\r\n                        \u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\r\n                        \u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)\r\n                        \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = pos\u001b[K\r\n                        \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected\u001b[K\r\n\u001b[7m-UU-:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   77% L323  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;25H\u001b[?25l\u001b[33mc1\u001b[39;49m = unit.team.color\u001b[10;26H\u001b[33m2\u001b[39;49m = \u001b[3@my_\u001b[22;1H                        \u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;25H\u001b[?25l\u001b[33mc2\u001b[39;49m = my_unit.team.color\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[22;1H                        \u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;25H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n\t\t\t\u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\u001b[K\u001b[22;1H                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;25H\u001b[?25l\u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\r\n\t\t\t          my_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\u001b[22;1H\u001b[K\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;35H\u001b[?25lmy_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\r\n\u001b[K\u001b[22d                        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit:\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[10;25H\u001b[?25l\u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\u001b[22d                            \u001b[33mmy_unit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;25H\u001b[?25l\u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\t\t\t\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[K\u001b[22;1H                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;25H\u001b[?25l\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[10;26H\u001b[33m2\u001b[39;49m = start_hp[1]-end_hp[1\u001b[22;1H                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;25H\u001b[?25l\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\r\n\t\t\t\u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\u001b[22;1H                \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"moving\"\u001b[39;49m:\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lRedo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;29H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[23;29H\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\t\t\t\u001b[?25l\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[K\r\n                        \u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\u001b[10;26H\u001b[?25l\u001b[33m1\u001b[39;49m = start_hp[0]-end_hp[0\r\n                        \u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\t\t\t\u001b[?25l\u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n                        \u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\n\u001b[?25l                        \u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\u001b[A\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;35H\u001b[?25lmy_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\u001b[23;30H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\u001b[10;35H\u001b[?25lmy_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\r\n\u001b[K\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\t\t\t\u001b[?25l\u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\u001b[K\r\n                                  my_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25lUndo!\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\t\t\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n                        \u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[24;1H\u001b[?25lAuto-saving...\u001b[11;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[11;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;13H\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\t\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[10;25H\u001b[?25l\u001b[31m#self.world.launch_attack(self.selected,self.cam.cursor\u001b[39;49m\\\r\n\u001b[31m)                                                                               \u001b[39;49m\r\n                        \u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\u001b[K\u001b[10;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[C\b\u001b[A\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;25H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\u001b[K\r\n                        \u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\u001b[K\u001b[22;1H                        \u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[K\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\u001b[3;13H\u001b[?25l            \u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\t\t        \u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[K\u001b[5;13H            \u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\r\n\t\t        \u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\u001b[7;13H            \u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)\r\n\t\t        \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = pos\u001b[K\r\n\t\t\t\u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected\r\n\t\t\t\u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[K\r\n\t\t\t\u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[K\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\r\n\n\t\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit:\u001b[K\r\n\t\t\t    \u001b[33mmy_unit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"moving\"\u001b[39;49m:\u001b[K\u001b[19;21Hmy_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[20;21H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (cx,cy) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\r\n\t\t\tacts = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.actions(my_unit,cx,cy)\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu =\u001b[K\u001b[23;29H\u001b[7m81% L337\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[3;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.choices\u001b[5;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.grid\r\n\u001b[K\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.launch_attack(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor)\r\n\t\t\t\u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0,\r\n\t\t\t          my_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\u001b[K\r\n\n\t\t\t\u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\t\t\t\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\r\n\t\t\t\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\r\n\t\t\t\u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\r\n\t\t        \u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)\u001b[19;21H    \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = pos\u001b[K\u001b[20;21H    \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected\u001b[K\r\n\t\t\t\u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[K\r\n\t\t\t\u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[23;29H\u001b[7m77% L326\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[33mend_hp\u001b[39;49m = (unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \\\r\n0,\u001b[K\u001b[A\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;1H\u001b[K\n\u001b[?25l                                  my_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\u001b[22;1H                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\u001b[K\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;59H\u001b[?25lmy_unit.hp \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit\\\r\n\u001b[C\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m 0)\u001b[K\u001b[A\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;1H\u001b[K\n\u001b[K\u001b[22d\u001b[K\u001b[10;25H\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[11;25H\u001b[?25l\u001b[31m# Animate combat stuff                                  \u001b[39;49m\r\n\u001b[22d                        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit:\u001b[K\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;49H\u001b[?25l\u001b[31m# Animate combat stuff          \u001b[39;49m\r\n\t\t\t\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[K\u001b[22;1H                            \u001b[33mmy_unit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\t\t\t\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l            \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[3;13H            \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\t\t        \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\u001b[5;13H            \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\t\t        \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[7;13H            \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t        \u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\n\t\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m my_unit:\r\n\t\t\t    \u001b[33mmy_unit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"moving\"\u001b[39;49m:\u001b[K\u001b[15;21Hmy_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[K\u001b[16;21H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (cx,cy) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\u001b[K\r\n\t\t\tacts = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.actions(my_unit,cx,cy)\u001b[K\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu =\u001b[K\u001b[19;21H\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\u001b[23;29H\u001b[7m82% L337\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[24;1H\u001b[?25lAuto-saving...\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10d\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;29H\u001b[?25l\u001b[33mmy_unit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[22;1H                \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;25H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[11;30Hcurrently = \u001b[35mNone\u001b[39;49m\u001b[22;1H                    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.ready \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.current_team():\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;25H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"moving\"\u001b[39;49m:\u001b[22;1H                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get_move_range(cx,cy)\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;17H\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently == \u001b[32m\"moving\"\u001b[39;49m:\r\n\t\t    my_unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[22;1H                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = cx,cy\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[11;21H\u001b[?25l\u001b[33mmy_unit\u001b[39;49m\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;21H\u001b[?25l\u001b[33mmy_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.unit_at(*\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected)\u001b[11;21H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (cx,cy) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\u001b[K\u001b[22;1H                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[32m\"moving\"\u001b[39;49m\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;21H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (cx,cy) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink:\u001b[11;21H    \u001b[33macts\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.actions(my_unit,cx,cy)\u001b[22;1H                    \u001b[31m#actions = tile.unit.get_actions()                          \u001b[39;49m\r\n\u001b[A\u001b[10d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;25H\u001b[?25l\u001b[33macts\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.actions(my_unit,cx,cy)\r\n\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu =\u001b[K\u001b[22;1H                    \u001b[31m#if actions and len(actions) > 0:                           \u001b[39;49m\r\n\u001b[A\u001b[10d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;25H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu =\u001b[11;21H\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[22;1H                    \u001b[31m#    self.menu = widgets.Menu(actions),cx,cy                \u001b[39;49m\r\n\u001b[A\u001b[10d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;21H\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\b\b\b\b\b    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[22;1H                \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;25H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = \u001b[35mNone\u001b[39;49m\u001b[11;30Hcurrently = \u001b[35mNone\u001b[39;49m\u001b[22;1H                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu([\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]),cx,cy\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;25H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[35mNone\u001b[39;49m\u001b[11;31Ham.blink = []\u001b[K\u001b[22;1H            \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;25H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\r\n\t\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[22;1H                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"w\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world)\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;17H\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m unit:\r\n\t\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.ready \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.current_team():\u001b[22;1H                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"e\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;21H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.ready \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.current_team():\u001b[11;21H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get_move_range(cx,cy)\u001b[K\u001b[22;1H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;25H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.get_move_range(cx,cy)\u001b[11;30Hselected = cx,cy\u001b[K\u001b[22;1H\u001b[K\u001b[10d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;25H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected = cx,cy\u001b[11;30Hcurrently = \u001b[32m\"moving\"\u001b[39;49m\u001b[22;1H    \u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[A\u001b[10d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;25H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.currently = \u001b[32m\"moving\"\u001b[39;49m\u001b[11;21H\u001b[31m#actions = tile.unit.get_actions()                          \u001b[39;49m\r\n\u001b[22d    \u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[A\u001b[10d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;21H\u001b[?25l\u001b[31m#actions = tile.unit.get_actions()                          \u001b[39;49m\r\n\u001b[11;22H\u001b[31mif actions and len(actions) > 0: \u001b[39;49m\u001b[22;1H    \u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[A\u001b[10d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;21H\u001b[?25l\u001b[31m#if actions and len(actions) > 0:                           \u001b[39;49m\r\n\u001b[11;22H\u001b[31m    self.menu = widgets.Menu(actions),cx,cy\u001b[39;49m\u001b[22;1H    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;21H\u001b[?25l\u001b[31m#    self.menu = widgets.Menu(actions),cx,cy                \u001b[39;49m\r\n\t\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[22;1H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;17H\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\r\n\t\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu([\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]),cx,cy\u001b[22;1H        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;21H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu([\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]),cx,cy\u001b[11;13H\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[22;1H\u001b[K\u001b[10d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;29H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;13H\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\b\b\b\b\b    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"w\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world)\u001b[22;1H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;17H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"w\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world)\u001b[11;26H\u001b[32me\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint\u001b[K\u001b[22;1H            \u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;17H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"e\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[22;1H            m.draw(mx+x-cx+2, my+y-cy)\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;9H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[22d\u001b[K\u001b[10d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\u001b[3;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.choices\u001b[K\u001b[5;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.grid\u001b[K\r\n\n\u001b[K\n\t\t\t\u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\u001b[12;51H\u001b[20P\u001b[12;5H\u001b[20@\u001b[12;26H\u001b[31mt2 = start_hp[1]-end_hp[1]                   \u001b[39;49m\u001b[13;5H                    \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[14;5H                    \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[15;5H                    \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\t                \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\t                \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t\t\u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\t                \u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m87% L326\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.camera.cursor\u001b[K\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[10;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\n\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(q)\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\u001b[16;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(pos)\u001b[K\r\n\u001b[K\n\t\u001b[16P\u001b[C\u001b[31m                                              \u001b[39;49m\u001b[16@\u001b[31m                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[22;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[23;30H\u001b[7m3% L317\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = grid\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,grid)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m79% L298\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.camera.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[10;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\r\n                \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(q)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[15;5H        \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\r\n\t        \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(pos)\r\n\u001b[K\n\t\u001b[31m#                                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[23;29H\u001b[7m83\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.choices\u001b[5;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\u001b[6;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.grid\r\n\u001b[K\n\u001b[K\u001b[11;13H            \u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\t\t        \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\t\t        \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\t                \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[15;13H            \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\u001b[16;13H            \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\t\t        \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t\t\u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[19;56H\u001b[16P\r\t\u001b[16@\u001b[19;26H\u001b[31mself.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\u001b[39;49m\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m7% L316\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n\t\u001b[8P\u001b[8;18Hdraw(x,y)\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[12;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[K\u001b[13;13Hm.draw(mx+x-cx+2, my+y-cy)\u001b[K\r\n\u001b[K\n\t\u001b[16P\u001b[C\u001b[31m Display all alerts on the screen un\u001b[39;49m\u001b[16@\u001b[31mtil their timers\u001b[39;49m\r\n\t\u001b[16P\u001b[C\u001b[31m expire.             \u001b[39;49m\u001b[16@\u001b[31m                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts:\u001b[K\u001b[18;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = a\u001b[K\u001b[19;13H\u001b[33mm.time\u001b[39;49m -= 1\u001b[K\u001b[20;13Hm.draw(mx+x-cx, my+y-cy)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = [a \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a[0].time > 0]\u001b[23;29H\u001b[7mBot L335\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[?25lEnd of buffer\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\n\n\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\t\t\u001b[?25l\u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\u001b[4;51H\u001b[20P\u001b[4;5H\u001b[20@\u001b[4;26H\u001b[31mt2 = start_hp[1]-end_hp[1]                   \u001b[39;49m\u001b[5;5H                    \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[6;5H                    \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[7;5H                    \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\t                \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\t                \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t\t\u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\t                \u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[15;5H\u001b[4P\t\b\u001b[31mraw the grid to the terminal using the gfx library. Specify\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[16;5H\u001b[4P\t\b\b\u001b[31mx,y and w,h of the viewport in the terminal, and the cx,cy of\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[17;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[23;29H\u001b[7m90% L334\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[3;1H\u001b[11L\u001b[1;24r\u001b[3;1H\u001b[?25l        \u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.choices\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.grid\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7m87% L323\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.camera.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[5;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t\t\bq:\u001b[K\n\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(q)\u001b[K\u001b[8;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(pos)\r\n\n\t\u001b[16P\u001b[C\u001b[31m                          \u001b[39;49m\u001b[16@\u001b[31m                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\u001b[17;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.choices\u001b[K\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.grid\u001b[K\u001b[23;30H\u001b[7m4% L312\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = grid\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[11;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.camera.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[16;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t\t\bq:\u001b[K\n\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(q)\u001b[K\u001b[19;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[22;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\u001b[23;30H\u001b[7m2% L301\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m299\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[4P\u001b[C\u001b[C\u001b[31mdirect copy of the grid, except for its camera.       \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = grid\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[22;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[23;30H\u001b[7m0% L290\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[?25l(No changes need to be saved)\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;36H\u001b[1;21r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[22d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   80% L292\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\t\b\b\b\b\r\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[14;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = grid\u001b[22;1H    \u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[A\u001b[23;36H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25lrgrid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ligrid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25lgrid\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lugrid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25llgrid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25legrid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lsgrid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.grid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lRgrid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lugrid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25llgrid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25legrid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lsgrid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(grid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[?25l)\r\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[14;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[14;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m300\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = rules.Rules(grid)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,grid)\r\n\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[11;57H\u001b[4P\r\u001b[4@\t\b\b\u001b[31mThis function handles input passed from gfx.get_input.\u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[13;5H    \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.camera.cursor\u001b[K\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\r\n\t    \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\n\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(q)\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[22;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\u001b[23;30H\u001b[7m2% L301\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\b\b\b\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.camera.cursor\u001b[K\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\r\n\t    \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\n\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(q)\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[11;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\u001b[12;5H            \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.process(pos)\r\n\u001b[K\n\t\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[15;12Hr:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\r\n\t\t\br == rules.CTRL_COORD:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.choices\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\u001b[22;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.rules.grid\u001b[23;30H\u001b[7m4% L312\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\t\u001b[C\u001b[C\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.choices\u001b[K\u001b[18;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw.choices\u001b[18;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo.choices\u001b[18;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr.choices\u001b[18;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll.choices\u001b[18;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld.choices\u001b[18;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@w\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@w\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\t\u001b[C\u001b[C\u001b[C\n\n\n\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\u001b[A\b\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lles.grid\u001b[K\u001b[22;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25les.grid\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls.grid\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.grid\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw.grid\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo.grid\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr.grid\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll.grid\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld.grid\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[22;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[22;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[22;43H\r\n\n\u001b[?25l(No changes need to be saved)\u001b[22;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[22;43H\r\n\n\u001b[?25l(No changes need to be saved)\u001b[22;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[4;12Hr:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\r\n\t\t\br == rules.CTRL_COORD:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\u001b[11;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\u001b[14;36H\u001b[16P\r\t\u001b[16@\u001b[14;26H\u001b[31mt1 = start_hp[0]-end_hp[0]\u001b[39;49m\r\n\t                \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\u001b[16;13H            \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[17;13H            \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\t\t        \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\u001b[19;13H            \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\t\t        \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[21;13H            \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t        \u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[23;30H\u001b[7m7% L323\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l(No changes need to be saved)\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25l(No changes need to be saved)\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[3;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[23;29H\u001b[7m90% L334\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l(No changes need to be saved)\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[3;1H\u001b[11L\u001b[1;24r\u001b[3;1H\u001b[?25l        \u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7m87% L323\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[3;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[23;29H\u001b[7m90% L334\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[3;1H\u001b[11L\u001b[1;24r\u001b[3;1H\u001b[?25l        \u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7m87% L323\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.camera.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[5;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t\t\bq:\u001b[K\n\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\u001b[K\u001b[8;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\n\t\u001b[16P\u001b[C\u001b[31m                          \u001b[39;49m\u001b[16@\u001b[31m                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\u001b[17;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\u001b[23;30H\u001b[7m4% L312\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[8;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\n\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[4;12Hr:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\r\n\t\t\br == rules.CTRL_COORD:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\u001b[11;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\u001b[14;36H\u001b[16P\r\t\u001b[16@\u001b[14;26H\u001b[31mt1 = start_hp[0]-end_hp[0]\u001b[39;49m\r\n\t                \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\u001b[16;13H            \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[17;13H            \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\t\t        \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\u001b[19;13H            \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\t\t        \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[21;13H            \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t        \u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[23;30H\u001b[7m7% L323\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.camera.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[5;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t\t\bq:\u001b[K\n\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\u001b[K\u001b[8;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\n\t\u001b[16P\u001b[C\u001b[31m                          \u001b[39;49m\u001b[16@\u001b[31m                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\u001b[17;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\u001b[23;30H\u001b[7m4% L312\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;44H\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[12;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19d\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\b\b\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21d\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\b\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\n\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[4;12Hr:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\r\n\t\t\br == rules.CTRL_COORD:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\u001b[11;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\u001b[14;36H\u001b[16P\r\t\u001b[16@\u001b[14;26H\u001b[31mt1 = start_hp[0]-end_hp[0]\u001b[39;49m\r\n\t                \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\u001b[16;13H            \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[17;13H            \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\t\t        \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\u001b[19;13H            \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\t\t        \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[21;13H            \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t        \u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[23;30H\u001b[7m7% L323\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18d\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\n\b\b\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[3;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[23;29H\u001b[7m90% L334\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[7d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[3;1H\u001b[11L\u001b[1;24r\u001b[3;1H\u001b[?25l        \u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7m87% L323\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[9;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[5;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.camera.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[5;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t\t\bq:\u001b[K\n\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\u001b[K\u001b[8;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\n\t\u001b[16P\u001b[C\u001b[31m                          \u001b[39;49m\u001b[16@\u001b[31m                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\u001b[17;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\u001b[23;30H\u001b[7m4% L312\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;20H\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\n\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[4;12Hr:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\r\n\t\t\br == rules.CTRL_COORD:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\u001b[11;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\u001b[14;36H\u001b[16P\r\t\u001b[16@\u001b[14;26H\u001b[31mt1 = start_hp[0]-end_hp[0]\u001b[39;49m\r\n\t                \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\u001b[16;13H            \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[17;13H            \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\t\t        \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\u001b[19;13H            \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\t\t        \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[21;13H            \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t        \u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[23;30H\u001b[7m7% L323\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 6, in <module>\r\n    from core import game\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 8, in <module>\r\n    from . import grid, widgets\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 6, in <module>\r\n    from . import widgets, rules\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 163\r\n    raise Exception(\"Invalid option.\"):\r\n                                      ^\r\nSyntaxError: invalid syntax\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n        \u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n\u001b[K\n                        \u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\u001b[A\n                        \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\u001b[A\n                        \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[A\n                        \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[A\n                        \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\u001b[A\n                        \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\u001b[A\n                        \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[A\n                        \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[A\n                        \u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   87% L327  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[3;5H\u001b[4P\u001b[3;77H\u001b[31m    \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[6;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m):\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[K\u001b[11;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[14;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;4H\u001b[7mU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L168   (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\b\b\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[8;5H\u001b[4P\t\b\b\u001b[31mState: main menu (expected, menu opt\u001b[39;49m\u001b[4@\u001b[31mion)\u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[11;14H\u001b[1m\u001b[36maise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[22;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[23;29H\u001b[7m85% L160\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 75, in play\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 302, in handle_input\r\n    cx,cy = self.camera.cursor\r\nAttributeError: 'Controller' object has no attribute 'camera'\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n        \u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n    \u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n        \u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n        \u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   85% L160   (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[5;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[6;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[9;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[10;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[11;30H\u001b[32mExpected tuple!\u001b[39;49m\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[17;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[18;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[19;18Haction.append((x,y))\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[22;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m74% L141\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[7;47H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[19;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[23;29H\u001b[7m61% L122\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\tu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\tteam = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m47% L103\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[10;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[11;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[12;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[18;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[20;5H\u001b[4P\t\b\b\u001b[31m    coord: Tell the controller to give it a c\u001b[39;49m\u001b[4@\u001b[31moord\u001b[39;49m\u001b[21;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[23;29H\u001b[7m33% L84 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[8;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mWhen we end the turn, we commit all of our actions to history and\u001b[39;49m\u001b[18;7H\u001b[31mchange the undo point.                     \u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m22% L65\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lchoices = []\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\u001b[8;7H\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[9;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\n\n\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\n\t\b\b\u001b[31mWhen a move is completed and we return to the start state, we\u001b[39;49m\u001b[19;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[23;29H\u001b[7m11% L46\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[?25l\u001b[31m# Constants sent to the controller after processing.                            \u001b[39;49m\r\n\u001b[33mCTRL_COORD\u001b[39;49m = 1\u001b[K\r\n\u001b[33mCTRL_MENU\u001b[39;49m = 2\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = 3\r\n\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[12;14Hgrid = grid\u001b[13;14Hcheckpoint = copy.deepcopy(grid)\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[18;64H\u001b[4P\u001b[18;5H\u001b[4@\u001b[18;11H\u001b[31mThese are the state variables                            \u001b[39;49m\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[21;14Hchoices = []\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m 4% L27\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\n    \u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n        \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\u001b[8;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\t\u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[12;14Haction = []\u001b[13;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[18;5H\u001b[4P\t\b\b\u001b[31mWhen a move is completed and we return to the start state\u001b[39;49m\u001b[4@\u001b[31m, we\u001b[39;49m\u001b[19;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[21;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[23;29H\u001b[7m11\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[8;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.        \u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[10;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\r\n\n\n\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\t\b\b\u001b[31mchange the undo point.                                       \u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m22% L45\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\r\n\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[14;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\t\b\b\u001b[31mHas one of four return values:                                   \u001b[39;49m\u001b[18;7H\u001b[31m    None: Tell the controller to do nothing\u001b[39;49m\u001b[19;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[23;29H\u001b[7m33% L64\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\u001b[5;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[K\u001b[6;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[9;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[16;5H    \u001b[33mx\u001b[39;49m,y = coord\u001b[K\u001b[17;5H    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[18;5H    team = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[20;52H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mIf no unit, check for terrain                \u001b[39;49m\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[23;29H\u001b[7m47% L83\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\u001b[3;5H    \u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[4;12Hr:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[9;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\u001b[11;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n\u001b[K\n\t                \u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\u001b[15;13H            \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\t                \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\t                \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\t                \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\t\t\t\u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\u001b[20;28H\u001b[16P\r\t\u001b[16@\u001b[20;26H\u001b[31ma1.time = t1+t2+50\u001b[39;49m\r\n\t                \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[22;13H            \u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   87% L327  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,grid)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.camera.cursor\u001b[K\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[13;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[14;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\n\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\r\n\u001b[K\n\t\u001b[16P\u001b[C\u001b[31m                                              \u001b[39;49m\u001b[16@\u001b[31m                \u001b[39;49m\u001b[23;30H\u001b[7m3% L314\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;35H\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la.cursor\u001b[K\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.cursor\u001b[K\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm.cursor\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\n\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[8;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\u001b[9;5H            \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\u001b[K\n\t\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[12;12Hr:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\r\n\t\t\br == rules.CTRL_COORD:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[16;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[18;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\u001b[19;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\u001b[22;36H\u001b[16P\r\t\u001b[16@\u001b[22;26H\u001b[31mt1 = start_hp[0]-end_hp[0]\u001b[39;49m\u001b[23;30H\u001b[7m5% L315\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[8;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[13;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t\t\bq:\u001b[K\n\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\u001b[K\u001b[16;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\n\t\u001b[16P\u001b[C\u001b[31m                          \u001b[39;49m\u001b[16@\u001b[31m                \u001b[39;49m\u001b[23;30H\u001b[7m3% L304\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m299\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m300\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;21r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[22d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   83% L304\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[23;36H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[13;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31m>\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mO\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[13;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[13;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;56H\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[23;36H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[14;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[14;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[14;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\t\u001b[31m# does.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\r\n\t    \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\n\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\u001b[8;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\u001b[K\u001b[14;11H\u001b[31m     \u001b[39;49m\n\b\b\b\br:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\r\n\t\t\br == rules.CTRL_COORD:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\u001b[22;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[23;30H\u001b[7m4% L315\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\u001b[23;36H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[15;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[15;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[15;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[2;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[2;4H\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;4H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;4H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 75, in play\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 315, in handle_input\r\n    r = self.world.process(pos)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 85, in process\r\n    if   self.state == None       : return process_none(c)\r\nNameError: global name 'process_none' is not defined\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\u001b[A\n        \u001b[31m# does.                                                                 \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n            \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\r\n                \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\r\n                \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\r\n\u001b[K\n        \u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\u001b[A\n        \u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   83% L318  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[15;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\n\u001b[8P\u001b[3;3H\u001b[?25l\u001b[31mThe controller of the grid. It takes a rules object an\u001b[39;49m\u001b[8@\u001b[31md passes\u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = rules.Rules(grid)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\u001b[K\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\t\u001b[31m# does.                                                                 \u001b[39;49m\r\n\u001b[23;29H\u001b[7m79% L306\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25lunit.hp = 0\r\n\u001b[K\u001b[4;3H\u001b[31m                                                            \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\u001b[8;14Hcolor = color\u001b[K\u001b[9;14Hresources = 0\u001b[10;14Hallies = []\u001b[11;14Hactive = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[8P\u001b[C\u001b[C\u001b[31mThe controller of the grid. It takes a rules object an\u001b[39;49m\u001b[8@\u001b[31md passes\u001b[39;49m\u001b[23;30H\u001b[7m6% L287\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\u001b[6;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\r\n\u001b[K\u001b[9;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\r\n\tu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\tteam = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[23;4H\u001b[7mU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   47% L83    (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[9;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[11;58H\u001b[4P\u001b[11;5H\u001b[4@\u001b[11;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[23;29H\u001b[7m61% L102\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[5;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[7;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[8;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[19;18Haction.append((x,y))\u001b[K\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m74% L121\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[7;47H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[19;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[23;29H\u001b[7m61\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m process_action(c)\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\tu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\tteam = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m47% L103\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m99 \u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[4;63H\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@s\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\t\b\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;9H\u001b[?25l\u001b[33mteam\u001b[39;49m\u001b[6;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[7;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[7;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[2;3H\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;3H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;4H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n    \u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\u001b[K\r\n\u001b[K\n    \u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n        u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n        \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n        \u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\r\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   47% L88    (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[7;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;11H\u001b[?25l\u001b[33my\u001b[39;49m\r\n\t\u001b[33mu\u001b[39;49m\u001b[7;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11L\u001b[1;24r\u001b[2;1H\u001b[?25l        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\n    \u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[A\u001b[23;29H\u001b[7m38% L82\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[?25l    \u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n        \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n        \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n        \u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m47% L93\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m100\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[9;42H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mIf no unit, check for terrain      \u001b[39;49m\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[12;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[23;29H\u001b[7m57% L104\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[13;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[15;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[16;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[23;29H\u001b[7m68% L113\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\n\b\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[15;64H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mIf unit is friendly and ready, switch to moving state and\u001b[39;49m\u001b[16;60H\u001b[4P\u001b[16;5H\u001b[4@\u001b[16;11H\u001b[31mgive the controller the list of valid move locations.\u001b[39;49m\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[23;30H\u001b[7m1% L112\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[4;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\n\b\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\u001b[23;29H\u001b[7m54% L101\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l(No changes need to be saved)\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 75, in play\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 324, in handle_input\r\n    self.menu = widgets.Menu(acts),cx,cy\r\nNameError: global name 'acts' is not defined\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n    \u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n        \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n        \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n        \u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n        \u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n        \u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   54% L101   (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;58H\u001b[4P\u001b[3;5H\u001b[4@\u001b[3;11H\u001b[?25l\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[16;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[18;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[19;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m66% L110\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lC-x\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l-\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24;4H\u001b[?25l C-g is undefined\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 75, in play\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 324, in handle_input\r\n    self.menu = widgets.Menu(acts),cx,cy\r\nNameError: global name 'acts' is not defined\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ \u0007[A\b\b./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n        \u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n        \u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\u001b[A\n        \u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n    \u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   66% L110   (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;13Hunit.hp = 0\r\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.active = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[K\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   76% L287  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp <= 90):\u001b[K\r\n            frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\r\n\u001b[K\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[14;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m unit.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\r\n\u001b[K\u001b[16;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mattack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\r\n\tdamage = \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(30 * 0.01 * \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp)\r\n\tunit.hp -= damage\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.hp < 0:\u001b[21;13Hunit.hp = 0\r\n\u001b[K\u001b[23;30H\u001b[7m1% L268\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function draws the unit at the desired location.                     \u001b[39;49m\r\n\t\u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\u001b[K\u001b[16;60H\u001b[4P\u001b[16;5H\u001b[4@\u001b[16;11H\u001b[31mGray out units that can't act. Units are always bold.\u001b[39;49m\u001b[17;5H    \u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Build the animation for this unit based on values                     \u001b[39;49m\r\n\t\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\u001b[23;29H\u001b[7m67% L249\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/code/core/\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgets.py\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[31m# This module contains \"gui\" widgets that are useful for games.                 \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\r\n\n\u001b[K\n\u001b[31m# A menu is a simple menu of selections. Created using a list of options,       \u001b[39;49m\r\n\u001b[31m# it intercepts input, returning None if nothing has been selected yet,         \u001b[39;49m\r\n\u001b[31m# or the text of the selected option. Handling something like \"cancelling\"      \u001b[39;49m\r\n\u001b[4P\u001b[C\u001b[C\u001b[31mshould be done by the creator.                       \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mMenu\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, items):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items = \u001b[1m\u001b[34mlist\u001b[0m\u001b[39;49m(items)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index = 0\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items) == 0:\u001b[K\u001b[19;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Created a menu with no items.\"\u001b[39;49m)\r\n\u001b[K\u001b[21;5H\u001b[4P\t\b\b\u001b[31mPass the input from gfx.get_input to this funct\u001b[39;49m\u001b[4@\u001b[31mion.\u001b[39;49m\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[23;14H\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1    Git-\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;60H\u001b[4P\r\u001b[4@\t\b\b\u001b[?25l\u001b[31mPass the input from gfx.get_input to this function.      \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index -= 1\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index += 1\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index %= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items)\r\n\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"enter\"\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index]\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# Draw the window on the terminal with the top left corner                  \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# at x,y. Will draw off the side of the screen.                             \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[33mw\u001b[39;49m,h = 0,\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items:\u001b[K\u001b[19;13H\u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(w,\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(s))\u001b[K\u001b[21;5H    draw.border(x,y,w,h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\u001b[22;5H    draw.fill(x,y,w,h)\u001b[K\u001b[23;29H\u001b[7m 8% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    draw.border(x,y,w,h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\u001b[3;5H    draw.fill(x,y,w,h)\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m i,s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34menumerate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items):\r\n\t    draw.string(x,y+i,s,col+(\u001b[32m\"?\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m i==\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m))\r\n\n\u001b[K\n\u001b[31m# An alert is just a window that contains text. Unlike a buffer, it doesn't     \u001b[39;49m\r\n\u001b[31m# scroll. Writing to it will overwrite the current message.                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mAlert\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, msg=\u001b[32m\"\"\u001b[39;49m, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = col\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(msg)\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s):\u001b[K\r\n\t\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[23;29H\u001b[7m15% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\u001b[K\u001b[5;13H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\u001b[K\u001b[6;21H\u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[7;21Hreport.append(old)\r\n                \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n                    report.append(current)\u001b[K\r\n                    \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[K\r\n\t    report.append(current)\r\n\treport.reverse()\n\b\b\b\breport\r\n\u001b[K\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\tdraw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\r\n\tdraw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\r\n\t\u001b[33mw\u001b[39;49m = 0\u001b[K\u001b[23;29H\u001b[7m23% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ldraw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\r\n\t\u001b[33mw\u001b[39;49m = 0\u001b[K\r\n\t\u001b[33mi\u001b[39;49m = y+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\u001b[K\r\n\t\u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\u001b[6;13H\u001b[33mi\u001b[39;49m -= 1\u001b[K\u001b[7;13Hdraw.string(x,i,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text[w],\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\u001b[8;13H\u001b[33mw\u001b[39;49m += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The HPAlert is a special kind of alert that is used when a unit's HP          \u001b[39;49m\r\n\u001b[31m# is going down. The Alert starts at a certain HP and decreases until           \u001b[39;49m\r\n\u001b[31m# it reaches end. In order to facilitate animation, you can also put in         \u001b[39;49m\r\n\u001b[31m# a delay so that another unit's animation can finish before this one           \u001b[39;49m\r\n\u001b[31m# starts.                                                                       \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mHPAlert\u001b[39;49m(Alert):\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, col=\u001b[32m\"w\"\u001b[39;49m, start=100, end=0, delay=0):\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(HPAlert, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(w,h, \u001b[32m\"%d%%\"\u001b[39;49m%start,  col)\u001b[19;5H    \u001b[31m#self.alert = widgets.Alert( 6,1,\"%d%%\"%start, col)                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = start\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end = end\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay = delay\u001b[23;29H\u001b[7m30% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end = end\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay = delay\r\n\u001b[K\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay > 0:\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay -= 1\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start > \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end:\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start -= 1\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(\u001b[32m\"%d%%\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start)\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(HPAlert, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).draw(x,y,col)\u001b[K\r\n\u001b[K\n\u001b[K\u001b[14;3H\u001b[31mA buffer is just a window that contains text. You can add more text to it\u001b[39;49m\u001b[15;3H\u001b[31mand it will automatically scroll to the newest. Each line in the buffer is\u001b[39;49m\r\n\u001b[31m# a (text,color) tuple.                                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mBuffer\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\n\b\b\b\b\bh = h\u001b[K\n\b\b\b\b\bwhere = 0\u001b[22;14Htext = []\u001b[K\u001b[23;29H\u001b[7m40% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lwhere = 0\u001b[3;14Htext = []\u001b[K\u001b[5;5H\u001b[31m# This adds a string 's' to the buffer and rescrolls to the                 \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# end. Word-wraps the text if necessary.                                    \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s, col=\u001b[32m\"w\"\u001b[39;49m):\r\n\t\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[12;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n                    \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[K\r\n                    report.append((old,col))\u001b[K\r\n                \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n                    report.append((current,col))\u001b[18;5H                \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\r\n\t    report.append((current,col))\r\n\treport.reverse()\n\b\b\b\breport + \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\u001b[23;30H\u001b[7m8% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lreport.reverse()\n\b\b\b\breport + \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\r\n\u001b[K\u001b[6;7H\u001b[31mPositive numbers scroll to newer elements, and negative\u001b[39;49m\u001b[7;5H\u001b[31m# numbers scroll to older ones. \"None\" will scroll to the                   \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# end.                                                                      \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mscroll\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, where):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where -= where\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where < 0:\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# The buffer does usually handle input, but when it does,                   \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# up and down scroll it. This handle-input never returns                    \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# anything other than None.                                                 \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(-1)\u001b[19;13H == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(1)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# This draws the buffer with its current width and height such              \u001b[39;49m\r\n\u001b[23;29H\u001b[7m56% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This draws the buffer with its current width and height such              \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# that it starts with the top-left x,y of the terminal. You can             \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# override the colors (gray out) by providing a col parameter.              \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\u001b[7;5H    draw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\u001b[8;5H    draw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\u001b[K\u001b[9;5H    w = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where\u001b[K\r\n\ti = y+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\u001b[K\r\n\t\u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text):\u001b[12;13Hi -= 1\u001b[K\n\b\b\b\b\b\b\u001b[33ms\u001b[39;49m,c = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text[w]\u001b[14;5H        draw.string(x,i,s,c+col)\u001b[K\u001b[15;5H        \u001b[33mw\u001b[39;49m += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A Camera is an interactable widget that serves as a representation of         \u001b[39;49m\r\n\u001b[31m# a Grid.                                                                       \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCamera\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\u001b[23;29H\u001b[7m64% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = 0,0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport = 0,0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim = 0.0\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim_speed = 0.1\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Returns the cursor when the player presses Enter. Moves the               \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# cursor around when the arrow keys are pressed.                            \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[33mx\u001b[39;49m, \u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x, y-1\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x, y+1\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"left\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x-1, y\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"right\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x+1, y\r\n\u001b[K\n\t\u001b[31m# Move the camera to keep the cursor visible.                           \u001b[39;49m\r\n\u001b[23;29H\u001b[7m73% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\u001b[K\u001b[3;14Hteam = team\u001b[4;14Hvariables = {}\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\u001b[K\u001b[8;14Hhp = 100\u001b[K\u001b[9;14Hready = \u001b[35mTrue\u001b[39;49m\u001b[10;14Hmove = 3\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function draws the unit at the desired location.                     \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\u001b[K\r\n\u001b[K\n\t\u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n\t\u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Build the animation for this unit based on values                     \u001b[39;49m\r\n\t\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\u001b[K\u001b[23;14H\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   67% L249  Git:\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp <= 90):\u001b[5;13Hframes.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\r\n\u001b[K\n\t\u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m unit.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\u001b[16;5H\u001b[4P\t\b\b\u001b[31m                                                     \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mattack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[K\r\n\tdamage = \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(30 * 0.01 * \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp)\u001b[K\r\n\tunit.hp -= damage\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.hp < 0:\u001b[K\r\n\t    unit.hp = 0\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m71\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l    unit.hp = 0\u001b[K\r\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.active = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[23;30H\u001b[7m6% L267\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\u001b[?25l\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[4;3H\u001b[31mcontrol back and forth between it. It doesn't usually need a\u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[8;14Hworld = rules.Rules(grid)\u001b[9;14Hw = w\u001b[K\n\b\b\b\b\bh = h\u001b[K\n\b\b\b\b\bcam = widgets.Camera(w,h,grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\n\t\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\t\t\t\t\t\t\t\u001b[8P\r\u001b[8@\u001b[22;11H\u001b[31mdoes.                                                 \u001b[39;49m\u001b[23;30H\u001b[7m9% L286\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\u001b[3;57H\u001b[8P\r\u001b[8@\u001b[3;11H\u001b[31mdoes.                                                 \u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n            \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\u001b[7;5H            \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[20;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(acts),cx,cy\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\u001b[23;29H\u001b[7m83% L305\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[?25l\u001b[1@b\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@k\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@k\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\n\n\n\n\b\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls),cx,cy\u001b[K\u001b[21;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l),cx,cy\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr),cx,cy\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls),cx,cy\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[21;60H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[21;60H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;60H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[K\u001b[21;59H\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\n\n\b\b\b\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\u001b[3;11H\u001b[?25l\u001b[31mIf the rules were processed, figure out if we need to display\u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.highlight = []\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\u001b[8;22Hcam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[10;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\r\n\t\t\br == rules.CTRL_UNDO:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\n\u001b[K\u001b[15;36H\u001b[16P\r\t\u001b[16@\u001b[15;26H\u001b[31mt1 = start_hp[0]-end_hp[0]\u001b[39;49m\r\n\t                \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\u001b[17;13H            \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[18;13H            \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\t\t        \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\u001b[20;13H            \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\t\t        \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[22;13H            \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[23;30H\u001b[7m7% L326\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l = []\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l = []\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l = []\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l = []\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l = []\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l = []\u001b[K\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l = []\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l = []\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l = []\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l = []\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l. = []\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb = []\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll = []\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li = []\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln = []\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk = []\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[6;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[6;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\r\u001b[7d|\u001b[32m\u001b[40m....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Cancel|\r\u001b[8d|\u001b[32m\u001b[40m....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\r\u001b[9d|\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6d\b\b\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[7;3H\u001b(B\u001b[0m\u001b[32m\u001b[40m.....\u001b[8;4H...\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;9H+------+\u001b[6;5H\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;9H|Cancel|\u001b[8;9H+------+\u001b[23;8H\u001b[5;9H\u001b[32m\u001b[40m........\u001b[6;9H........\u001b[7;9H........\u001b[8;9H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n        \u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\u001b[A\n        \u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n\u001b[K\n                        \u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\u001b[A\n                        \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\u001b[A\n                        \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[A\n                        \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[A\n                        \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\u001b[A\n                        \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\u001b[A\n                        \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[A\n                        \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   87% L320  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[6;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24;1H\u001b[?25lNo other backend to switch to\u001b[6;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[6;27H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default widgets.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = 0,0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport = 0,0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim = 0.0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim_speed = 0.1\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Returns the cursor when the player presses Enter. Moves the               \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# cursor around when the arrow keys are pressed.                            \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[33mx\u001b[39;49m, \u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x, y-1\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x, y+1\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"left\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x-1, y\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"right\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x+1, y\u001b[K\r\n\u001b[K\n\t\u001b[16P\u001b[C\u001b[31m Move the camera to keep the\u001b[39;49m\u001b[16@\u001b[31m cursor visible.\u001b[39;49m\u001b[23;14H\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   73% L172  Git-\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\u001b[K\u001b[15;5H                    \u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\t                \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\t                \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\t                \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\t                \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\t                \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\t\t\t\u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[22;38H\u001b[16P\r\t\u001b[16@\u001b[22;26H\u001b[31ma2.time = t1+t2+50          \u001b[39;49m\u001b[23;14H\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   87% L320  Git:\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default widgets.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lwidgets.py\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lrules.py\u001b[K\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[3;14H\u001b[31munit is friendly, but not ready, return nothing.          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[12;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[16;5H\u001b[20P\u001b[C\u001b[31m State    : Moving (expect\u001b[39;49m\u001b[20@\u001b[31med input, tuple)    \u001b[39;49m\u001b[17;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[19;5H\u001b[20P\u001b[C\u001b[31m            If \u001b[39;49m\u001b[20@\u001b[31mout of range, cancel\u001b[39;49m\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[22;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[23;4H\u001b[7mU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   66% L110   (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[11;18Haction.append((x,y))\u001b[K\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[13;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[16;54H\u001b[4P\u001b[16;5H\u001b[4@\u001b[16;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[17;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[20;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[21;12Hopt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\n\b\b\b\b\b\b\u001b[32mInvalid option.\u001b[39;49m\u001b[23;29H\u001b[7m78% L129\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;12H\u001b[?25lopt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[3;30H\u001b[32mInvalid option.\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[9;11H\u001b[31mEnd my turn.                                                     \u001b[39;49m\u001b[10;12Hopt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[11;18Hgrid.end_turn()\u001b[K\u001b[12;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\n\n\b\b\b\b\u001b[4P\u001b[19;5H\u001b[4@\u001b[19;11H\u001b[31mWait.                               \u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[22;14H\u001b[1m\u001b[36meturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\n\b\b\b\b\u001b[7m90% L148\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;36H\r\n\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   90% L168\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[22;13H\u001b[H\n\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\r\n\u001b[K\n\t\t\tcommit()\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L169\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;26H\u001b[1;16r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L167\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;13H\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[10;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[10;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;32H\b\u001b[?25l-1]\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;32H\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;34H\u001b[1;17r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L168\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\b\b\u001b[?25lsel\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\r\u001b[K\u001b[11;13H\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\u001b[?25l\u001b[33munit\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;32H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[K\u001b[23d\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[12;13H\u001b[?25l\u001b[33munit.ready\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lF\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[35mFalse\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[14;13H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\r\n\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6d\b\b\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7d\b\b\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\b\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10d\b\b\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\b\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\b+--------+\u001b[12;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[13;6H|End Turn|\u001b[14;6H+--------+\u001b[23;8H\u001b[12d\bBack\u001b[13;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[11d\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[12;6H..........\u001b[13;6H..........\u001b[14;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\b\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;5H........\u001b[10;5H........\u001b[11;5H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b+--------+\u001b[9;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[10;6H|End Turn|\u001b[11;6H+--------+\u001b[23;8H\u001b[9d\bBack\u001b[10;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b\u001b[32m\u001b[40m..........\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[10;6H..........\u001b[11;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b[32m\u001b[40m.\u001b[8d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;6H|Cancel|\u001b[11;6H+------+\u001b[23;8H\u001b[9d\bWait\u001b[10;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[8d\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;6H........\u001b[11;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b+--------+\u001b[6;7H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[7;7H|End Turn|\u001b[8;7H+--------+\u001b[23;8H\u001b[5d\b\u001b[32m\u001b[40m..........\u001b[6;7H..........\u001b[7;7H..........\u001b[8;7H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n        \u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\r\n            \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\r\n            \u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n            \u001b[33munit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L171   (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[14d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l(No changes need to be saved)\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m69\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[6d\bWait\u001b[7;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[6d\bWait\u001b[7;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7d\b\b+--------+\u001b[8;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[9;6H|End Turn|\u001b[10;6H+--------+\u001b[23;8H\u001b[8d\bBack\u001b[9;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[7d\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[8;6H..........\u001b[9;6H..........\u001b[10;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\bWait\u001b[10;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;5H........\u001b[11;5H........\u001b[12;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H+--------+\u001b[8;5H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[9;5H|End Turn|\u001b[10;5H+--------+\u001b[23;8H\u001b[8d\b\bBack\u001b[9;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[8;5H..........\u001b[9;5H..........\u001b[10;5H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;4H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\bWait\u001b[10;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;5H........\u001b[11;5H........\u001b[12;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n        \u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\r\n            \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\r\n            \u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n            \u001b[33munit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L168   (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[11d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[8;5H\u001b[4P\t\b\b\u001b[31mState: main menu (expected, menu opt\u001b[39;49m\u001b[4@\u001b[31mion)\u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[11;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[22;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[23;29H\u001b[7m84% L160\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[5;5H\u001b[4P\t\b\b\u001b[31mState    : Moving (expected input, tuple)      \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[6;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\t\b\b\u001b[31m           If out of range, cancel      \u001b[39;49m\u001b[9;18H\u001b[1m\u001b[34moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[10;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[11;30H\u001b[32mExpected tuple!\u001b[39;49m\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[17;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[18;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[19;18Haction.append((x,y))\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[22;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m73% L141\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[7;47H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[19;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[23;29H\u001b[7m60% L122\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m46% L103\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[10;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[11;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[12;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[18;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[20;5H\u001b[4P\t\b\b\u001b[31m    coord: Tell the controller to give it a c\u001b[39;49m\u001b[4@\u001b[31moord\u001b[39;49m\u001b[21;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[23;29H\u001b[7m32% L84 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[8;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mWhen we end the turn, we commit all of our actions to history and\u001b[39;49m\u001b[18;7H\u001b[31mchange the undo point.                     \u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m22% L65\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[20;26H\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[3;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# change the undo point.                                                    \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[18;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[19;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[22;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[23;30H\u001b[7m8% L66\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[3;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[17;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# change the undo point.                                                    \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[23;30H\u001b[7m2% L55\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[4;14Haction = []\u001b[K\u001b[5;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\t\boices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[8;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[13;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[14;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[23;29H\u001b[7m15% L44\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   16\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1M\u001b[1;24r\u001b[14;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[15;14Hchoices = []\u001b[22;1H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[16;1H\u001b[1M\u001b[1;24r\u001b[14;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\t\beckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[22;1H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[16;1H\u001b[1M\u001b[1;24r\u001b[14;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[22d        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[16;1H\u001b[1M\u001b[1;24r\u001b[15;5H\u001b[?25l\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[22d        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lC-u\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l-\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l C-y\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[4L\u001b[1;24r\u001b[14;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n    \u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[A\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[4;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[5;14Hchoices = []\r\n\t\t\beckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\u001b[8;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[10;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[13;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[14;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# change the undo point.                                                    \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m22% L55\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\n\b\b\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[?25lMark set\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# When we end the turn, we commit all of our actions to history and         \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# change the undo point.                                                    \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[11;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[15;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[23;30H\u001b[7m8% L68\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[24;1H\u001b[K\u001b[12;9H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[22d        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[5;29H\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\t\b\t\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[24;1H\u001b[?25lAuto-saving...\u001b[4;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[4;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[4;29H\u001b[?25l\u001b[31me commit all of our actions to history and \u001b[39;49m\u001b[4;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m                                          \u001b[39;49m\u001b[23;30H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[6;1H\u001b[1M\u001b[1;24r\u001b[4;33H\u001b[?25l\u001b[31m# change the undo point.\u001b[39;49m\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[22;1H\u001b[K\u001b[4;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m                        \u001b[39;49m\u001b[4;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[1;22r\u001b[6;1H\u001b[1L\u001b[1;24r\u001b[5;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;35H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[5;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[5;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[5;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6d\b\b+--------+\u001b[7;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[8;6H|End Turn|\u001b[9;6H+--------+\u001b[23;8H\u001b[7d\bBack\u001b[8;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[7;6H..........\u001b[8;6H..........\u001b[9;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\bWait\u001b[10;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;5H........\u001b[11;5H........\u001b[12;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\b\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;5H........\u001b[10;5H........\u001b[11;5H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b+--------+\u001b[9;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[10;6H|End Turn|\u001b[11;6H+--------+\u001b[23;8H\u001b[9d\bBack\u001b[10;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b\u001b[32m\u001b[40m..........\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[10;6H..........\u001b[11;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[9d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H.......\u001b[7;3H.....\u001b[8;4H..\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;6H|Cancel|\u001b[11;6H+------+\u001b[23;8H\u001b[8d\b\b\u001b[32m\u001b[40m........\u001b[9;6H........\u001b[10;6H........\u001b[11;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n    \u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   28% L61    (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[5;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\u001b[4;67H\u001b[4P\u001b[4;5H\u001b[4@\u001b[4;11H\u001b[31ma menu or highlight tiles.                                  \u001b[39;49m\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\n\u001b[K\n\t\t\t\t\t\u001b[20P\u001b[15;5H\u001b[20@\u001b[15;26H\u001b[31mt1 = start_hp[0]-end_hp[0]         \u001b[39;49m\u001b[16;5H                    \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\t                \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\t\t\t\u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\t                \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\t                \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\t                \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\t                \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   87% L320  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[6;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[4;5H\u001b[4P\t\b\b\u001b[31mWhen we end the turn, we flush the history buffer and save a\u001b[39;49m\u001b[4@\u001b[31m new\u001b[39;49m\u001b[5;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\u001b[14;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[15;5H\u001b[20P\u001b[C\u001b[31m to the caller for what kind of inp\u001b[39;49m\u001b[20@\u001b[31mut should come next.\u001b[39;49m\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[23;4H\u001b[7mU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   28% L61    (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgrid.py\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lwidgets.py\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgame.py\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\r\nGridView to controller (since that's what we're doing, making an agnostic\r\ncontroller than can play no matter the rules), and then start making the rule\r\nsystem. We may end up having to delete some of our code or comment it out, and\u001b[K\r\nunfortunately, emacs and the terminal are TERRIBLE for refactoring.\u001b[K\r\n\u001b[K\n(sorry, was figuring out how to cut and paste in emacs. ctrl+w cuts the marked\r\narea)\u001b[K\r\n\u001b[K\n\u001b[K\nSO. Let's try this out. We might colosally mess this up, but that's why I'm\r\njust making this game for fun. :)\u001b[K\r\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L67    (Lisp Interaction) \u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m69\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lz\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25lW\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lH\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[K\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\b\b\u001b[K\b\b\u001b[K\u001b[C\b\b\u001b[K\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\r\u001b[K\u001b[18;5H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;29H\u001b[?25l\u001b[7m77% L74\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lW\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\b\u001b[K\b\u001b[K\b\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[20;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lH\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lW\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[22;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\b\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\n\u001b[K\n\u001b[?25lSo far, so good. To summarize what has been done up until now:\u001b[K\r\n    We have abstracted away from having rules in our controller. The entire\u001b[6;5Hpurpose of the controller is to send menu selections and positions to the\r\n    rules implementation.\u001b[K\r\n\u001b[K\nWe don't keep a full history, but it's now (supposedly) possible to undo\r\nactions. However, there is now a problem. We have no idea how to tell the\r\ncontroller to render alerts (like our combat animation).\u001b[K\r\n\u001b[K\n\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\b\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\b\u001b[K\b\u001b[K\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\n    \u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[23;6H\u001b[7m----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   28% L61    (Python) ----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;12r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[2;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[5;7H\u001b[31mWhen a move is completed and we return to the start state, we\u001b[39;49m\u001b[6;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[K\u001b[14;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.\u001b[39;49m\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[16;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[17;14Hgrid = cp\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m18% L59\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[5;64H\u001b[4P\u001b[5;5H\u001b[4@\u001b[5;11H\u001b[31mThese are the state variables                            \u001b[39;49m\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[8;14Hchoices = []\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\u001b[14;7H\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[15;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\n\n\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[23;29H\u001b[7m 8% L40\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# A rules object handles all of the actual game play elements. The rules        \u001b[39;49m\r\n\u001b[31m# are what give meaning to the pieces in a Grid, and is controlled (usually)    \u001b[39;49m\r\n\u001b[31m# by a Controller that provides piecewise input.                                \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Constants sent to the controller after processing.                            \u001b[39;49m\r\n\u001b[33mCTRL_COORD\u001b[39;49m = 1\u001b[K\r\n\u001b[33mCTRL_MENU\u001b[39;49m = 2\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = 3\r\n\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[18;14Hgrid = grid\u001b[19;14Hcheckpoint = copy.deepcopy(grid)\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[K\u001b[4;3H\u001b[?25l\u001b[31m                                              \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(grid)\r\n\u001b[K\n        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\u001b[18;5H\u001b[31m# This is the attack action.                                                \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\r\n\u001b[K\u001b[22;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[23;29H\u001b[7m 6% L22\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;26H\u001b[1;21r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\n\n\n\n\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m    6% L27\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[?25l    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[A\u001b[23;35H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[18;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mH\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[18;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[18;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[18;11H\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\r\n\n\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[19;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[19;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\u001b[8;14Halerts = []\u001b[K\u001b[10;5H\u001b[4P\t\u001b[31mis is the attack action.                            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\r\n\u001b[K\u001b[14;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[19;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[23;30H\u001b[7m9% L33\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[5;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[8;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[14;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.        \u001b[39;49m\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[16;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\r\n\n\n\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m19% L42\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;12r\u001b[8;1H\u001b[1M\u001b[1;24r\u001b[2;9H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint.                                                  \u001b[39;49m\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\n\n\n\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\u001b[14;7H\u001b[31mThis sets the new state and returns the appropriate code   \u001b[39;49m\u001b[15;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[17;14Hstate = new_state\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[23;29H\u001b[7m29% L61\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\u001b[K\u001b[5;7H\u001b[31mThis processes input of two types: coordinates and strings.\u001b[39;49m\u001b[6;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[9;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[10;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[11;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\u001b[15;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\u001b[16;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\u001b[19;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m40% L80\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[7;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[8;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[9;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[11;52H\u001b[4P\u001b[11;5H\u001b[4@\u001b[11;11H\u001b[31mIf no unit, check for terrain                \u001b[39;49m\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[19;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[21;58H\u001b[4P\u001b[21;5H\u001b[4@\u001b[21;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[23;29H\u001b[7m55% L99\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;58H\u001b[4P\u001b[2;5H\u001b[4@\u001b[2;11H\u001b[?25l\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[15;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[17;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[18;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[23;29H\u001b[7m66% L118\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[10;18Haction.append((x,y))\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[15;54H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mIf the coord was out of range, undo everything.\u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\u001b[19;18H\u001b[1m\u001b[34main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[20;12Hopt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\n\b\b\b\b\b\b\u001b[32mInvalid option.\u001b[39;49m\r\n\u001b[K\u001b[23;29H\u001b[7m78% L137\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;30H\u001b[?25l\u001b[32mInvalid option.\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[8;11H\u001b[31mEnd my turn.                                                     \u001b[39;49m\u001b[9;12Hopt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[10;18Hgrid.end_turn()\u001b[K\u001b[11;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\n\n\b\b\b\b\u001b[4P\u001b[18;5H\u001b[4@\u001b[18;11H\u001b[31mWait.                               \u001b[39;49m\u001b[19;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\u001b[21;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[22;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\n\b\b\u001b[7m89% L156\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;30H\u001b[?25l\u001b[32mExpected tuple!\u001b[39;49m\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[8;11H\u001b[31mIf coord was in range, move the unit and return possible actions.\u001b[39;49m\u001b[9;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[10;18Haction.append((x,y))\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[18;5H\u001b[4P\t\b\b\u001b[31mState: main menu (expected, menu opt\u001b[39;49m\u001b[4@\u001b[31mion)\u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[21;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\u001b[23;29H\u001b[7m78\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;47H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default *scratch*): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgrid.py\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[10;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\u001b[12;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\u001b[15;42H\u001b[16P\r\t\u001b[16@\u001b[15;26H\u001b[31mt1 = start_hp[0]-end_hp[0]      \u001b[39;49m\r\n\t                \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\t\t\t\u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[18;5H                    \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[19;5H                    \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\t                \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\u001b[21;13H            \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t\t\u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   87% L320  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[6;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\u001b[K\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\t\u001b[31m# does.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[13;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[14;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\n\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\r\n\u001b[K\n\t\u001b[16P\u001b[C\u001b[31m If the rules were processed, figure out if we\u001b[39;49m\u001b[16@\u001b[31m need to display\u001b[39;49m\u001b[23;30H\u001b[7m2% L317\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[8P\u001b[C\u001b[C\u001b[31mThe controller of the grid. It takes a rules object an\u001b[39;49m\u001b[8@\u001b[31md passes\u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = rules.Rules(grid)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m78% L298\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[3;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m unit.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\r\n\u001b[K\u001b[5;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mattack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\r\n\tdamage = \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(30 * 0.01 * \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp)\r\n\tunit.hp -= damage\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.hp < 0:\u001b[10;13Hunit.hp = 0\r\n\u001b[K\u001b[12;3H\u001b[31m                                                            \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\u001b[16;14Hcolor = color\u001b[K\u001b[17;14Hresources = 0\u001b[18;14Hallies = []\u001b[19;14Hactive = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\u001b[23;30H\u001b[7m4% L279\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\u001b[K\u001b[5;60H\u001b[4P\u001b[5;5H\u001b[4@\u001b[5;11H\u001b[31mGray out units that can't act. Units are always bold.\u001b[39;49m\u001b[6;5H    \u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Build the animation for this unit based on values                     \u001b[39;49m\r\n\t\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp <= 90):\u001b[K\r\n            frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\r\n\u001b[K\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[22;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m unit.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\u001b[23;29H\u001b[7m69% L260\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\u001b[K\n\n\u001b[31m# Units are the pieces that move about the game board. Units belong to a        \u001b[39;49m\r\n\u001b[31m# team and can be moved about by taking actions.                                \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, team):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This function draws the unit at the desired location.                     \u001b[39;49m\r\n\t\u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\u001b[K\u001b[23;30H\u001b[7m5% L241\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[K\u001b[4;5H\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n    \u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[6;45H\u001b[4P\r\u001b[4@\t\b\u001b[31mhe unit's draw will be prioritized.      \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit.draw(x, y, col)\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\r\n\t        \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\u001b[13;13Hdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\u001b[K\u001b[15;5H\u001b[31m# This function draws the terrain without drawing the                       \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# unit. Put into its own function to avoid messing up                       \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# the \"drawable\" interface.                                                 \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw_terrain\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[20;5H        \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\u001b[K\u001b[21;5H    draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\u001b[K\u001b[23;29H\u001b[7m59% L222\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[4;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\u001b[5;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[9;18Hday += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, terrain):\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = terrain\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\".\"\u001b[39;49m\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = \u001b[32m\"g\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[K\u001b[23;30H\u001b[7m5% L203\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\t\u001b[33munit.team\u001b[39;49m = team\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\u001b[K\r\n        \u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[16;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\r\n\u001b[K\u001b[20;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[23;30H\u001b[7m1% L184\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# CHECK FIRST.                                                              \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlaunch_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, attacker, defender):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = attacker\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = defender\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ax,ay).unit\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(dx,dy).unit\r\n\tatk_unit.attack(def_unit)\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp >= 0: \u001b[31m#and can counter\u001b[39;49m\u001b[10;5H        def_unit.attack(atk_unit)\r\n\u001b[K\n\t\u001b[31m# Destroy dead units.                                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(dx,dy)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(ax,ay)\r\n\n\u001b[K\u001b[17;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# This should be the ONLY WAY units are added to the game.                  \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\u001b[K\u001b[21;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\u001b[23;29H\u001b[7m45% L165\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l                _floodfill((a,b+1),r-1)\u001b[K\u001b[3;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\u001b[8;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.\u001b[39;49m\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ox,oy)\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[17;5H    \u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mLaunch an attack from the attack coordinates to the defend\u001b[39;49m\u001b[20;5H\u001b[31m# coordinates. Will throw exception if move is illegal.                     \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# CHECK FIRST.                                                              \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlaunch_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, attacker, defender):\u001b[23;30H\u001b[7m0% L146\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile.unit:\u001b[K\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\r\n\u001b[K\u001b[9;60H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mUse the naive flood-fill algorithm to get neighboring\u001b[39;49m\u001b[10;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(a,b)\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\r\n\t            report.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[19;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[20;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[21;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[22;5H    _floodfill((x,y),unit.move)\u001b[K\u001b[23;29H\u001b[7m34% L127\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;7H\u001b[?25l\u001b[31mReturn the actions that the given unit can take if it were\u001b[39;49m\u001b[3;5H\u001b[31m# at x,y.                                                                   \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mactions\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, x, y):\r\n\t\u001b[33macts\u001b[39;49m = []\u001b[K\r\n\t\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x-1,y)\r\n\t\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x+1,y)\r\n\t\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y-1)\r\n\t\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y+1)\u001b[K\r\n\t\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: acts.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[23;29H\u001b[7m27% L108\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l                    _process_units(u)\u001b[K\u001b[3;5H                \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\u001b[4;5H            \u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[9;5H\u001b[31m# Get the tile at x,y. Returns None if out of range.                        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\u001b[11;12H(x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\u001b[19;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mReturn the actions that the given unit can take if it were\u001b[39;49m\u001b[22;5H\u001b[31m# at x,y.                                                                   \u001b[39;49m\r\n\u001b[23;30H\u001b[7m3% L89 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\t\u001b[31m#   y: (int) y position                                                 \u001b[39;49m\r\n\t\u001b[31m#   terrain: (string) the name of the terrain                           \u001b[39;49m\r\n\t\u001b[31m#   unit: the unit on this terrain, if one                              \u001b[39;49m\r\n\t\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\t\u001b[31m#   variables: (dict) User-defined variables                            \u001b[39;49m\r\n\u001b[9;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"cells\"\u001b[39;49m]:\u001b[K\u001b[10;5H        \u001b[33mthis\u001b[39;49m = Cell(c[\u001b[32m\"terrain\"\u001b[39;49m])\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\u001b[K\u001b[12;13H\u001b[33mthis.variables\u001b[39;49m = c.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"owner\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t\t\u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\u001b[15;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\u001b[16;5H            \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\r\n\t            \u001b[33mu\u001b[39;49m = Unit(unit[\u001b[32m\"type\"\u001b[39;49m],\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]])\r\n\t            \u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[20;21H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\u001b[21;5H                    _process_units(u)\u001b[K\u001b[22;5H                \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\n\u001b[7m16% L70\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = config.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day = 0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\u001b[K\u001b[8;11H\u001b[31mLoad the teams first, since cells and units reference them.\u001b[39;49m\r\n\t\u001b[31m# Then set up the alliances.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\u001b[11;13H\u001b[33mthis\u001b[39;49m = Team( t[\u001b[32m\"name\"\u001b[39;49m], t[\u001b[32m\"color\"\u001b[39;49m] )\u001b[12;30Ht\u001b[13;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams.append(this)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\u001b[K\u001b[15;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist\r\n\t\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\u001b[17;21H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\u001b[K\r\n\u001b[K\n\t\u001b[31m# Load the terrain cells. The units are embedded in these elements      \u001b[39;49m\r\n\t\u001b[31m# of the dictionary. Note that when units are loaded in other units     \u001b[39;49m\r\n\t\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\u001b[23;30H\u001b[7m0% L51\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# provides an API to game rulesets to create, delete, and move entities         \u001b[39;49m\r\n\u001b[31m# around, but essentially has no functionality other than changing its          \u001b[39;49m\r\n\u001b[31m# configuration. The grid should be initialized with a configuration            \u001b[39;49m\r\n\u001b[31m# Dictionary containing the following keys and values.                          \u001b[39;49m\r\n\u001b[31m#   w: (int) width                                                              \u001b[39;49m\r\n\u001b[31m#   h: (int) height                                                             \u001b[39;49m\r\n\u001b[8P\u001b[8;3H\u001b[31m  cells: (list) exactly w*h cells                          \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[8P\u001b[9;3H\u001b[31m  teams: (list) the teams in\u001b[39;49m\u001b[8@\u001b[31m the map\u001b[39;49m\r\n\u001b[31m#   allies: (list) the teams that are allied in a list of lists of ints         \u001b[39;49m\r\n\u001b[31m#   variables: (dictionary) a dictionary of user-defined variables              \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, config):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = config[\u001b[32m\"w\"\u001b[39;49m], config[\u001b[32m\"h\"\u001b[39;49m]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[17;13H\u001b[33mrow\u001b[39;49m = []\u001b[K\u001b[18;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\r\n\t        row.append(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\u001b[23;29H\u001b[7m 3% L32\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11L\u001b[1;24r\u001b[2;1H\u001b[?25l\u001b[31m# A grid is the arena upon which a battle takes place. The entire map should    \u001b[39;49m\r\n\u001b[A\n\u001b[31m# be self-contained. Players interact with the map by taking \"actions\".         \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m widgets, rules\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Grid is a game-agnostic representation of the world's entities. It        \u001b[39;49m\r\n\u001b[A\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[?25lBeginning of buffer\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u0007\u0007\u0007\u0007\n\n\u001b[K\u001b[2;3H\u001b[?25l\u001b[31m  allies: (list) the teams that are allied in a list of lists of ints     \u001b[39;49m\u001b[3;3H\u001b[31m  variables: (dictionary) a dictionary of user-defined variables     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, config):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = config[\u001b[32m\"w\"\u001b[39;49m], config[\u001b[32m\"h\"\u001b[39;49m]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\r\n            \u001b[33mrow\u001b[39;49m = []\u001b[10;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\r\n\t\trow.append(\u001b[35mNone\u001b[39;49m)\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = config.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day = 0\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\u001b[K\u001b[19;62H\u001b[8P\r\u001b[8@\u001b[19;11H\u001b[31mLoad the teams first, since cells and units reference them.\u001b[39;49m\u001b[20;31H\u001b[8P\r\u001b[8@\u001b[20;11H\u001b[31mThen set up the alliances.  \u001b[39;49m\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\r\n            \u001b[33mthis\u001b[39;49m = Team( t[\u001b[32m\"name\"\u001b[39;49m], t[\u001b[32m\"color\"\u001b[39;49m] )\u001b[K\u001b[23;29H\u001b[7m 6%\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\u001b[?25l        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\r\n            \u001b[33mthis\u001b[39;49m = Team( t[\u001b[32m\"name\"\u001b[39;49m], t[\u001b[32m\"color\"\u001b[39;49m] )\u001b[K\r\n            \u001b[33mthis.variables\u001b[39;49m = t.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams.append(this)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[9;13H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\r\n\u001b[K\n\t\u001b[31m# Load the terrain cells. The units are embedded in these elements      \u001b[39;49m\r\n\t\u001b[31m# of the dictionary. Note that when units are loaded in other units     \u001b[39;49m\r\n\t\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\t\u001b[31m#   y: (int) y position                                                 \u001b[39;49m\r\n\t\u001b[31m#   terrain: (string) the name of the terrain                           \u001b[39;49m\r\n\t\u001b[31m#   unit: the unit on this terrain, if one                              \u001b[39;49m\r\n\t\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\u001b[19;11H\u001b[31m  variables: (dict) User-defined variables                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"cells\"\u001b[39;49m]:\u001b[K\r\n\t    \u001b[33mthis\u001b[39;49m = Cell(c[\u001b[32m\"terrain\"\u001b[39;49m])\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\u001b[K\u001b[23;29H\u001b[7m12% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33mthis\u001b[39;49m = Cell(c[\u001b[32m\"terrain\"\u001b[39;49m])\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\u001b[K\u001b[4;30Hc\u001b[5;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"owner\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t        \u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c\r\n\t\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\u001b[9;21H\u001b[33mu\u001b[39;49m = Unit(unit[\u001b[32m\"type\"\u001b[39;49m],\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]])\u001b[10;21H\u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[K\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\u001b[K\r\n\t                _process_units(u)\u001b[K\r\n\t            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\t        \u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# Get the tile at x,y. Returns None if out of range.                        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[23;30H\u001b[7m9% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[4;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\r\n\u001b[K\u001b[7;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Return the actions that the given unit can take if it were                \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# at x,y.                                                                   \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mactions\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, x, y):\u001b[K\r\n\t\u001b[33macts\u001b[39;49m = []\r\n\t\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x-1,y)\r\n\t\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x+1,y)\r\n\t\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y-1)\u001b[20;5H    \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y+1)\u001b[K\u001b[21;5H    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[22;12Ha1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m25% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[3;12Ha1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: acts.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\r\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                           \u001b[39;49m\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\u001b[15;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile.unit:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\u001b[K\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\u001b[23;29H\u001b[7m30% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# Return the actions that the given unit can take if it were                \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# at x,y.                                                                   \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mactions\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, x, y):\u001b[K\r\n\t\u001b[33macts\u001b[39;49m = []\u001b[K\r\n\t\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x-1,y)\u001b[10;5H    \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x+1,y)\u001b[K\u001b[11;5H    \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y-1)\u001b[K\u001b[12;5H    \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y+1)\u001b[K\u001b[13;5H    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[16;12Ha3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: acts.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\r\n\u001b[K\u001b[21;5H\u001b[4P\t\b\b\u001b[31mGet movement range of the unit at x,y. Returns not\u001b[39;49m\u001b[4@\u001b[31mhing\u001b[39;49m\u001b[22;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[23;29H\u001b[7m27% L95\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;9H\u001b[?25l\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x+1,y)\u001b[10;10H\u001b[33m3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y-1\u001b[22;1H    \u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[A\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;9H\u001b[?25l\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y-1)\u001b[10;10H\u001b[33m4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y+\u001b[22;1H    \u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[A\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;9H\u001b[?25l\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y+1)\u001b[10;10H\u001b[33mttackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[22;1H    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;9H\u001b[?25l\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[22;1H        \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[10;13H2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2\u001b[22;1H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile.unit:\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[10;13H3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3\u001b[22;1H            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[10;13H4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4\u001b[22;1H        \u001b[33munit\u001b[39;49m = tile.unit\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[10;13Httackable: acts.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[K\u001b[22;1H\u001b[K\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: acts.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\u001b[K\u001b[22;1H        \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[A\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;9H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\r\n\u001b[K\u001b[22d        \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[A\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[5;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\u001b[6;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[11;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[K\u001b[12;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[15;5H    \u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\r\n\u001b[K\u001b[18;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;4H\u001b[7mU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   78% L146   (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   78% L146\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;13H\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1@+\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[K\u001b[23;36H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[K\u001b[23;36H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1M\u001b[1;24r\u001b[2;9H\u001b[?25l\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x-1,y)\u001b[K\r\n\t\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x+1,y)\r\n\t\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y-1)\r\n\t\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y+1)\u001b[K\r\n\t\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[9;12Ha3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: acts.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[22;1H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\n\b\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[9;12H(x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\n\t\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x-1,y)\u001b[K\r\n\t\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x+1,y)\u001b[K\r\n\t\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y-1)\u001b[K\r\n\t\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y+1)\r\n\t\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[22;12Hattackable: acts.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[23;30H\u001b[7m3% L147\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36msel\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mf\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1@.\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@c\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@h\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25lAuto-saving...\u001b[22;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[22;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[22;33H\u001b[?25l\u001b[1@c\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\n\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\u001b[A\b\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[4@\u001b[13;13H\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[4@\u001b[14;13H\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[4@\u001b[15;13H\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[4@\u001b[23;30H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[4@\u001b[17;13H\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[4@\u001b[18;13H\r\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[4@\u001b[19;13H\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[4@\u001b[20;13H\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[4@\u001b[21;13H\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[4@\u001b[22;13H\u001b[2d\u001b[?25l\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x-1,y)\u001b[K\r\n\t    \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x+1,y)\r\n\t    \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y-1)\r\n\t    \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y+1\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[13;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\n\b\b\b\b\b\b\u001b[7m8% L158\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 75, in play\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 315, in handle_input\r\n    r = self.world.process(pos)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 94, in process\r\n    elif self.state == \"moving\"   : return self.process_moving(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 148, in process_moving\r\n    a1 = self.unit_at(x-1,y)\r\nAttributeError: 'Rules' object has no attribute 'unit_at'\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ \r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n            \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x-1,y)\u001b[K\r\n            \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x+1,y)\u001b[K\r\n            \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y-1)\u001b[K\r\n            \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y+1)\u001b[K\r\n            \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n        \u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n    \u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   78% L158   (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\b\b\b\b\u001b[?25lself\u001b[1@g\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lOverwrite mode enabled\u001b[5;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;47H\u001b[?25l\u001b[7m Ovwrt) \u001b[0m\u001b[39;49m\u001b[27m\u001b[5;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;16H\u001b[?25ldisabled\u001b[5d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;47H\u001b[?25l\u001b[7m) ------\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[5;23H\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1@.\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@g\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[C\u001b[?25l\u001b[1@.\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@g\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1@g\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@g\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[24;1H\u001b[?25lAuto-saving...\u001b[2;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[2;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;24H\u001b[?25l\u001b[1@g\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[23;30H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1@g\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[2;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[2;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6d\b\b+--------+\u001b[7;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[8;6H|End Turn|\u001b[9;6H+--------+\u001b[23;8H\u001b[7d\bBack\u001b[8;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[7;6H..........\u001b[8;6H..........\u001b[9;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;4H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;3H\u001b[32m\u001b[40m..\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Cancel|\r\u001b[11d|\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\r\u001b[12d|\u001b[32m\u001b[40m......\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;5H........\u001b[10;5H........\u001b[11;5H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b+--------+\u001b[9;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[10;6H|End Turn|\u001b[11;6H+--------+\u001b[23;8H\u001b[9d\bBack\u001b[10;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b\u001b[32m\u001b[40m..........\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[10;6H..........\u001b[11;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[9d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 75, in play\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 315, in handle_input\r\n    r = self.world.process(pos)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 94, in process\r\n    elif self.state == \"moving\"   : return self.process_moving(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 153, in process_moving\r\n    if a1 and not a1.allied(unit): attackable = True\r\nNameError: global name 'unit' is not defined\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ \r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n            \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\r\n            \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[K\r\n            \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\r\n            \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[K\r\n            \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n        \u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n    \u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   77% L148   (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[13;13H\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\u001b[14;13H\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[K\u001b[15;13H\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[16;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[20;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[21;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(unit): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[23;30H\u001b[7m2% L147\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\n\b\b\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\b\b\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\b\b\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[21;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[21;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n^[[B\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\b+--------+\u001b[12;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[13;6H|End Turn|\u001b[14;6H+--------+\u001b[23;8H\u001b[12d\bBack\u001b[13;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[11d\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[12;6H..........\u001b[13;6H..........\u001b[14;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\bWait\u001b[10;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;5H........\u001b[11;5H........\u001b[12;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;5H........\u001b[10;5H........\u001b[11;5H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7d\b\b+--------+\u001b[8;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[9;6H|End Turn|\u001b[10;6H+--------+\u001b[23;8H\u001b[8d\bBack\u001b[9;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7d\b\b\u001b[32m\u001b[40m..........\u001b[8;6H..........\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........\u001b[10;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[9d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b[32m\u001b[40m.\u001b[8d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[10;6H|Wait  |\u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[23;8H\u001b[8d\b\b\u001b[32m\u001b[40m........\u001b[9;6H........\u001b[10;6H........\u001b[11;6H........\u001b[12;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 75, in play\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 315, in handle_input\r\n    r = self.world.process(pos)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 95, in process\r\n    elif self.state == \"action\"   : return self.process_action(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 183, in process_action\r\n    raise Exception(\"Invalid option.\")\r\nException: Invalid option.\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n        \u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n        \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n        \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n        \u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n            \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\r\n            \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[K\r\n            \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\r\n            \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[K\r\n            \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[K\r\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   72% L156   (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[21;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[7;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[15;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\n\b\u001b[7m83\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[5;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\n\n\b\b\b\b\u001b[4P\u001b[12;5H\u001b[4@\u001b[12;11H\u001b[31mWait.                               \u001b[39;49m\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\u001b[15;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[16;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7mBot L175\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;35H\u001b[7m94\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[5;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[7;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[10;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[14;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[15;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[16;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[18;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[21;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L185\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l        \u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\u001b[A\u001b[23;29H\u001b[7m92% L186\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\r\t\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\b\u001b[?25l\u001b[33mopt\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25lopt ==\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                             \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mA\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m        # Wait.                                                                 \u001b[39;49m\r\n\u001b[32m        if opt == \"\u001b[39;49mWait\u001b[32m\":                                                       \u001b[39;49m\r\n\u001b[32m            x,y = self.action[-1]                                               \u001b[39;49m\r\n\u001b[32m            unit = self.grid.unit_at(x,y)                                       \u001b[39;49m\r\n\u001b[32m            unit.ready = False                                                  \u001b[39;49m\r\n\u001b[32m            self.action.append(opt)                                             \u001b[39;49m\r\n\u001b[32m            return self.commit()                                                \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        if opt == \"\u001b[39;49mCancel\u001b[32m\":                                                     \u001b[39;49m\r\n\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[12;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;13H\r\n\n\u001b[?25l        \u001b[31m# Wait.                                                                 \u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\r\n            \u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\r\n            unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n            unit.ready = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;36H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[13;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[13;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\u001b[5;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[6;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[7;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[12;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\n\b\u001b[7m82% L176\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\u001b[13;5H        \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\r\n\t    \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[15;13H\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[16;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[20;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[23;29H\u001b[7m71% L157\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   72\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;13H\u001b[?25l\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[14;14H\u001b[33m3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1\u001b[22;1H\u001b[K\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;13H\u001b[?25l\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[14;14H\u001b[33m4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+\u001b[22;1H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[K\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;13H\u001b[?25l\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[14;14H\u001b[33mttackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[22;1H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[K\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;13H\u001b[?25l\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[14;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[22;1H            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\t2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2\u001b[22;1H\u001b[K\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\t3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3\u001b[22;1H        \u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\u001b[A\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\t4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4\u001b[22;1H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\tttackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[K\u001b[22;1H\u001b[K\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\u001b[22d    \u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[A\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lC-u\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l-\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l C-y\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;13H\u001b[?25l\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[14;13H\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[15;13H\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[16;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[K\u001b[17;13H\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[18;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[22;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[K\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\r\n\t    \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\r\n\t    \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\r\n\t    \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[13;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\n\b\b\b\b\b\b\u001b[7m7% L158\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[4;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[12;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[20;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[21;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m84% L169\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[5;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[9;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[K\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[22;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\n\b\b\b\b\b\u001b[7m90% L180\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[K\n\n\n\n\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\r\n\t    \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\r\n\t    \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[5;13H\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[6;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[9;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[12;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\r\n\t    \u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[18;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[19;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m89% L195\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\n\t\u001b[?25l\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[5;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[11;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[14;13H\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\r\n\t    \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[K\r\n\t    \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[17;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[18;13H\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[20;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[22;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[23;30H\u001b[7m5% L184\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\r\n\t    \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\r\n\t    \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[5;13H\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[6;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[7;13H\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[8;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[12;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[17;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\u001b[18;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[19;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[K\u001b[21;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m9% L195\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;13H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[23;30H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                            \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[14;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[14;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[14;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[14;40H\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[14;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[14;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[14;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   88% L196\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;58H\b\b\b\b\u001b[?25lTru\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\r\t\t\t\t\t\u001b[?25lattackable\u001b[K\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[9;41Hattackable\u001b[8;61H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[9;41H\u001b[33mattackable\u001b[39;49m\u001b[8;60H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[5;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[9;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[13;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[14;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n\t\t\b\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[19;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[22;13H\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[23;30H\u001b[7m1% L186\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l        \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\r\n\t    \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[5;13H\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[6;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[9;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[16;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[21;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\u001b[23;29H\u001b[7m71% L167\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[3;9H\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[5;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[8;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[11;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\u001b[22;5H        \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[23;29H\u001b[7m62% L148\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[7;47H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[19;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\r\n\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[23;29H\u001b[7m52% L129\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[11;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[12;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m41% L110\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[10;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[11;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[12;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[18;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[20;5H\u001b[4P\t\b\b\u001b[31m    coord: Tell the controller to give it a c\u001b[39;49m\u001b[4@\u001b[31moord\u001b[39;49m\u001b[21;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[23;29H\u001b[7m29% L91 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[3;1H\u001b[11M\u001b[1;24r\u001b[2;1H\u001b[K\u001b[12d\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\u001b[K\r\n\u001b[K\n    \u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;29H\u001b[7m35% L92\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[5;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[6;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[7;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[9;52H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mIf no unit, check for terrain                \u001b[39;49m\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[17;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[19;58H\u001b[4P\u001b[19;5H\u001b[4@\u001b[19;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[21;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[23;29H\u001b[7m48% L101\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[13;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[15;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[16;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[23;29H\u001b[7m57% L120\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[8;18Haction.append((x,y))\u001b[K\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\n\t    \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\u001b[12;13H\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[13;5H        \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[14;5H        \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[K\u001b[15;5H        \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[16;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[23;29H\u001b[7m67% L139\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[5;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[13;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\n\b\b\b\b\b\b\u001b[7m78% L158\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\u001b[11;5H        \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\r\n\t    \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[13;13H\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[14;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[17;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[18;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[23;29H\u001b[7m67\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[5;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[13;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\n\b\b\b\b\b\b\u001b[7m78\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[11;5H        \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\r\n\t    \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[13;13H\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[14;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append()\u001b[17;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[18;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[23;29H\u001b[7m86% L177\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[12;13H\u001b[?25la1 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-\u001b[13;14H\u001b[33m2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y\u001b[14;14H\u001b[33m3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-\u001b[15;14H\u001b[33m4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[16;13H\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append()\u001b[K\u001b[23;36H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\u001b[?25l\u001b[33ma1\u001b[39;49m\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[12;13Ha1\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[12;13H\u001b[33ma1\u001b[39;49m\u001b[11;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[K\u001b[12d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   85% L187\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;62H\b\u001b[?25l()\r\n\t\t\t\t\tattackable\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;62H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l)\r\n\t\t\t\t\t\u001b[33mattackable\u001b[39;49m\u001b[18;61H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lx))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[K\t\u001b[24;1H\u001b[?25lMark set\u001b[18;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25lTru\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\r\t\t\t\t\t\u001b[?25lattackable\u001b[K\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\t\r\n\n\n\n\n\u001b[?25lMark set\u001b[19;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[19;68H\b\b\b\b\b\u001b[?25l1,y))\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l+1,y))\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25lTru\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\r\t\t\t\t\t\u001b[?25lattackable\u001b[K\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\t\r\n\n\n\n\u001b[?25lMark set\u001b[20;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\u001b[K\u001b[20;68H\b\b\b\b\u001b[?25l,y))\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l,y))\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\t\u001b[?25l-))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25lTru\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\r\t\t\t\t\t\u001b[?25lattackable\u001b[K\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\t\r\n\n\n\u001b[?25lMark set\u001b[21;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[K\u001b[21;68H\b\b\b\b\b\u001b[?25l1,y))\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,y))\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\t\u001b[?25l+))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[3;13H\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[4;13H\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[5;5H        \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[K\u001b[6;5H        \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\u001b[9;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\u001b[13;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[K\u001b[14;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[18;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\u001b[19;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[20;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[K\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\n\b\b\b\u001b[7m8% L198\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1M\u001b[1;24r\u001b[12;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[22;1H\u001b[K\u001b[11d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[11;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\u001b[K\u001b[13;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\u001b[21;13H\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[22;13H\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[23;30H\u001b[7m3% L189\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[3;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[6;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[18;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[21;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\u001b[23;29H\u001b[7m72% L170\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[5;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[8;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\u001b[19;5H        \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\r\n\t    \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[21;13H\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[22;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[23;29H\u001b[7m63% L151\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[4;47H\u001b[4P\u001b[4;5H\u001b[4@\u001b[4;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[16;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\r\n\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[21;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[23;29H\u001b[7m53% L132\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[8;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[9;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[21;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m43% L113\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[7;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[8;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[9;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[15;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[16;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[17;5H\u001b[4P\t\b\b\u001b[31m    coord: Tell the controller to give it a c\u001b[39;49m\u001b[4@\u001b[31moord\u001b[39;49m\u001b[18;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\u001b[23;29H\u001b[7m30% L94 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[5;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[?25l        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;57H\u001b[1;22r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                    \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[9;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[9;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lCloses \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[9;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;41H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l+\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[9;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[9;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[?25l        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\u001b[K\r\n\u001b[K\n    \u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n        \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\n\b\b\b\b\b\u001b[7m8% L95\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;11H\u001b[?25ly\r\n\tu\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;70H\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   38% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\r\u001b[K\t\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                    \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[13;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m    # State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[32m    # Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[32m    # Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[32m    #            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[32m    def process_none(self, coord):                                              \u001b[39;49m\r\n\u001b[32m        if type(coord) is not tuple:                                            \u001b[39;49m\r\n\u001b[32m            raise Exception(\"\u001b[39;49mExpected \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m!\u001b[32m\")                                  \u001b[39;49m\r\n\u001b[32m        x,y = coord                                                             \u001b[39;49m\r\n\u001b[13;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lCloses \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\u001b[13;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l    \u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n    \u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n    \u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n    \u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[13;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;41H\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[13;73H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[13;73H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;73H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[3;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[4;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[5;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[7;51H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mIf no unit, check for terrain               \u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[15;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[17;58H\u001b[4P\u001b[17;5H\u001b[4@\u001b[17;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\u001b[23;29H\u001b[7m50% L104\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[4;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[5;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[6;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[7;5H\u001b[4P\t\b\b\u001b[31m    undo: Tell the controller to reload the \u001b[39;49m\u001b[4@\u001b[31mgrid\u001b[39;49m\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[17;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[18;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[23;29H\u001b[7m37\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[20;13H\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\t\u001b[?25l\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\u001b[20d\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[?25lMark set\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\u001b[K\r\n\u001b[K\u001b[4;7H\u001b[31mState    : None (expected input, tuple)    \u001b[39;49m\u001b[5;7H\u001b[31mExpected : Tuple (unit or friendly factory)   \u001b[39;49m\u001b[6;7H\u001b[31mNext step: If unit: coordinates of range of unit \u001b[39;49m\u001b[7;11H\u001b[31m       If factory: list of possible buildables\u001b[39;49m\r\n\t\t\b\u001b[1m\u001b[34m_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[9;12H\u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[15;42H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mIf no unit, check for terrain      \u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[23;29H\u001b[7m45% L106\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[4;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[6;58H\u001b[4P\u001b[6;5H\u001b[4@\u001b[6;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[19;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[21;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m55% L11\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[14;18Haction.append((x,y))\u001b[K\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\n\t    \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\u001b[18;13H\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[19;5H        \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[20;5H        \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[K\u001b[21;5H        \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m65% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[6;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[11;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[19;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[23;29H\u001b[7m74% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[4;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[9;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\u001b[19;13Ha1 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\u001b[20;13Ha2 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\r\n\t    a3 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\r\n\t    a4 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[23;29H\u001b[7m84% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    a3 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\r\n\t    a4 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[4;13Hattackable = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[5;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\r\n\u001b[K\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[15;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\r\n\t    unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[17;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[23;29H\u001b[7mBot L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;34H\u001b[7m210\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u0007\u001b[24d\u001b[?25lAuto-saving...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lEnd of buffer\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u0007\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[5;13H\r\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[5;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;5H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[6;5H\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34mp\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mc\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mc\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mk\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mi\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mg\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[6;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[8;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[23;36H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[5;6H\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    a3 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[3;13Ha4 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[4;13Hattackable = \u001b[35mFalse\u001b[39;49m\u001b[5;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\r\n\u001b[K\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[11;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\r\n\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[15;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[16;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[17;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[23;29H\u001b[7m88% L211\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[4;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[9;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\u001b[K\u001b[11;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\u001b[19;13Ha1 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[20;13Ha2 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\r\n\t    a3 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[22;13Ha4 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[23;30H\u001b[7m2% L192\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    a3 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\r\n\t    a4 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[4;13Hattackable = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[5;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\r\n\u001b[K\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[15;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\r\n\t    unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[17;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[23;30H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[8;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L210\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[11;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[11;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;9H\u001b[?25lo\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\u001b[?25l\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\u001b[K\n\t\u001b[?25l\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L219\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[4@\u001b[12;13H\u001b[12;36H\u001b[23d\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;13H\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[16;13H\r\t\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l;\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[17;29H\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25lrsel\u001b[1@f\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@u\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36msel\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mf\u001b[0m\u001b[39;49m\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[17;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[17;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;36H\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[12;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16d\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L221\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[?25l)\u001b[13;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[13;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[13;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[17d\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L222\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\u001b[K\u001b[16;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\r\n\n\n\u001b[K\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L223\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;13H\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\r\u001b[K\u001b[15;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;38H\b\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15d\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\u001b[?25lox,oy)\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;37H\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\b\u001b[?25l\u001b[33m.ready\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lF\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[35mFalse\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[15;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[15;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@r\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lrsel\u001b[1@f\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@u\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36msel\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mf\u001b[0m\u001b[39;49m\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L223\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[33m.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m95% L224\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[15;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[15;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[H\n\t\u001b[?25l    a3 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[3;13Ha4 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[4;13Hattackable = \u001b[35mFalse\u001b[39;49m\u001b[5;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\r\n\u001b[K\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[15;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[16;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[17;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[23;29H\u001b[7m85% L211\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[4;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[9;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\u001b[K\u001b[11;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\u001b[19;13Ha1 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[20;13Ha2 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\r\n\t    a3 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[22;13Ha4 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[23;29H\u001b[7m79% L192\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[4;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[5;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[16;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[19;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[23;30H\u001b[7m0% L173\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[6;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\u001b[17;5H        \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\r\n\t    \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[19;13H\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[20;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[23;29H\u001b[7m61% L154\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[6;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[11;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[19;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[23;29H\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[4;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[9;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\u001b[19;13Ha1 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\u001b[20;13Ha2 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\r\n\t    a3 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\r\n\t    a4 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[23;30H\u001b[7m9% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    a3 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\r\n\t    a4 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[4;13Hattackable = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[5;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\r\n\u001b[K\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[15;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\r\n\t    unit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[17;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[23;29H\u001b[7m85% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[8;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[12;13H\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[K\r\n\u001b[K\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.\u001b[K\r\n\u001b[K\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[33m.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[18;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\n\u001b[K\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;29H\u001b[7m94% L210\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;18H\u001b[?25la\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;37H\u001b[?25l.ready\u001b[15;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[15;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[15;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[15;32H\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;45H\u001b[?25l)\u001b[15;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;46H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[15;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[15;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;19r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[22d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   94% L223\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;13H\u001b[18;37H\u001b[?25l\u001b[33m.ready\u001b[39;49m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;36H\u001b[23d\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;13H\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\u001b[?25l\u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[23;36H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;37H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;37H\u001b[?25l.ready\u001b[14;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;44H\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[18;37H\u001b[?25l\u001b[33m.ready\u001b[39;49m\u001b[14;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;37H\u001b[?25l.ready\u001b[14;65H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[14;65H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[14;65H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[14;65H\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;68H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[14;68H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[14;68H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;68H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;37H\u001b[?25l\u001b[33m.ready\u001b[39;49m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l.ready = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[33msel.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[16;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[16;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;47H\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;12Htile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[5;7H\u001b[31mReturn the actions that the given unit can take if it were\u001b[39;49m\u001b[6;5H\u001b[31m# at x,y.                                                                   \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mactions\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, x, y):\u001b[K\r\n\t\u001b[33macts\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\u001b[11;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile.unit:\u001b[18;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\u001b[K\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[23;4H\u001b[7m-:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   28% L92   Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l            \u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[4;21H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\u001b[5;5H                    _process_units(u)\u001b[K\u001b[6;5H                \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\u001b[7;5H            \u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\t\b\b\u001b[31mGet the tile at x,y. Returns None if out of range.          \u001b[39;49m\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\r\n\u001b[K\u001b[18;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m3% L86\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# Return the actions that the given unit can take if it were                \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# at x,y.                                                                   \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mactions\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, x, y):\u001b[K\r\n\t\u001b[33macts\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\u001b[11;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\t\b\b\u001b[31mif the tile is empty or does not exist. All of the positions\u001b[39;49m\u001b[13;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile.unit:\u001b[18;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\u001b[K\u001b[19;5H    \u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\u001b[K\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[23;30H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[5;5H    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[K\u001b[6;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(a,b)\u001b[K\u001b[7;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[11;5H                _floodfill((a-1,b),r-1)\u001b[K\u001b[12;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[13;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[14;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[15;5H    _floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[18;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\u001b[20;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[21;5H\u001b[4P\t\b\b\u001b[31mthrow exception if move is illegal. CHECK FIRST.     \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\n\b\b\b\b\b\b\u001b[7m33% L104\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31mthrow exception if move is illegal. CHECK FIRST.     \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ox,oy)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# Launch an attack from the attack coordinates to the defend                \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# coordinates. Will throw exception if move is illegal.                     \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# CHECK FIRST.                                                              \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlaunch_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, attacker, defender):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = attacker\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = defender\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ax,ay).unit\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(dx,dy).unit\u001b[20;5H    atk_unit.attack(def_unit)\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp >= 0: \u001b[31m#and can counter         \u001b[39;49m\u001b[22;5H        def_unit.attack(atk_unit)\u001b[23;29H\u001b[7m40% L123\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp >= 0: \u001b[31m#and can counter         \u001b[39;49m\u001b[3;5H        def_unit.attack(atk_unit)\r\n\u001b[K\n\t\u001b[31m# Destroy dead units.                                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(dx,dy)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(ax,ay)\r\n\u001b[K\n\u001b[K\u001b[10;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\t\b\b\u001b[31mThis should be the ONLY WAY units are added to the game.  \u001b[39;49m\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\u001b[K\u001b[14;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\r\n\t\u001b[33munit.team\u001b[39;49m = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m#                                        \u001b[39;49m\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\n\b\b\b\u001b[7m5% L142\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# throw exception if move is illegal. CHECK FIRST.\u001b[39;49m\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ox,oy)\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[10;5H    \u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mLaunch an attack from the attack coordinates to the defend\u001b[39;49m\u001b[13;5H\u001b[31m# coordinates. Will throw exception if move is illegal.                     \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# CHECK FIRST.                                                              \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlaunch_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, attacker, defender):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = attacker\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = defender\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ax,ay).unit\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(dx,dy).unit\r\n\tatk_unit.attack(def_unit)\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp >= 0: \u001b[31m#and can counter\u001b[39;49m\u001b[22;5H        def_unit.attack(atk_unit)\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\r\n\u001b[K\u001b[5;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[12;5H        \u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[K\u001b[14;5H        \u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\u001b[K\n\t    \u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid\u001b[K\r\n\u001b[K\n\t    \u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;4H\u001b[7mU:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   93% L225   (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;44H\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;13H\u001b[?25la.ready\u001b[17;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[17;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[17;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[17;47H\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[?25l)\u001b[17;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;51H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[17;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[17;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;13H\u001b[?25l\u001b[33ma.ready\u001b[39;49m\u001b[17;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[20;13H\u001b[?25l\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[21;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   93% L226\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[17;13H\u001b[?25l\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[K\u001b[23;36H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;13H\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\r\u001b[K\u001b[16;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[16;13H\u001b[?25l\u001b[33mstarting_hp\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17d\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\n\n\b\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;51H\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;13H\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[19;13H\u001b[?25l\u001b[33mending_hp\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[19;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[19;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[19;35H\r\n\n\n\n\n\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.                          \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[5;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\u001b[6;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ox,oy)\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\r\n\u001b[K\u001b[12;5H\u001b[31m# Launch an attack from the attack coordinates to the defend                \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# coordinates. Will throw exception if move is illegal.                     \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# CHECK FIRST.                                                              \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlaunch_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, attacker, defender):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = attacker\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = defender\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ax,ay).unit\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(dx,dy).unit\r\n\tatk_unit.attack(def_unit)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp >= 0: \u001b[31m#and can counter                                   \u001b[39;49m\r\n\u001b[22;13Hdef_unit.attack(atk_unit)\u001b[23;4H\u001b[7m-:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   40% L142  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp >= 0: \u001b[31m#and can counter         \u001b[39;49m\u001b[3;5H        def_unit.attack(atk_unit)\r\n\u001b[K\n\t\u001b[31m# Destroy dead units.                                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(dx,dy)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(ax,ay)\r\n\u001b[K\n\u001b[K\u001b[10;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\t\b\b\u001b[31mThis should be the ONLY WAY units are added to the game.  \u001b[39;49m\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\u001b[K\u001b[14;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\r\n\t\u001b[33munit.team\u001b[39;49m = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m#                                        \u001b[39;49m\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\n\b\b\b\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#                                        \u001b[39;49m\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n\t    \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[21;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day += 1\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m51% L161\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, terrain):\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = terrain\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\".\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = \u001b[32m\"g\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[16;5H\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# the unit's draw will be prioritized.                                      \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit:\u001b[K\n\b\b\b\bunit.draw(x, y, col)\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[23;30H\u001b[7m5% L180\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;18H\u001b[?25lunit.draw(x, y, col)\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\b\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\r\n                \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\u001b[K\r\n            draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# This function draws the terrain without drawing the                       \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# unit. Put into its own function to avoid messing up                       \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# the \"drawable\" interface.                                                 \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw_terrain\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[K\r\n\t    \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\r\n\tdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\n\u001b[K\n\u001b[31m# Units are the pieces that move about the game board. Units belong to a        \u001b[39;49m\r\n\u001b[4P\u001b[18;4H\u001b[31meam and can be moved about by taking acti\u001b[39;49m\u001b[4@\u001b[31mons.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, team):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\u001b[23;29H\u001b[7m60% L199\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# This function draws the unit at the desired location.                     \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\r\n\n        \u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n        \u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        \u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Build the animation for this unit based on values                     \u001b[39;49m\r\n\t\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\u001b[23;30H\u001b[7m6% L218\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# Build the animation for this unit based on values                     \u001b[39;49m\r\n\t\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp <= 90):\u001b[6;13Hframes.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\r\n\u001b[K\n\t\u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m unit.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\u001b[17;5H\u001b[4P\t\b\b\u001b[31m                                                     \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mattack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[K\r\n\tdamage = \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(30 * 0.01 * \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp)\u001b[K\r\n\tunit.hp -= damage\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.hp < 0:\u001b[K\r\n\t    unit.hp = 0\u001b[K\u001b[23;29H\u001b[7m70% L237\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.hp < 0:\u001b[K\r\n\t    unit.hp = 0\u001b[K\r\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.active = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;30H\u001b[7m5% L256\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\u001b[K\n\u001b[?25l\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[5;3H\u001b[31mcontrol back and forth between it. It doesn't usually need a\u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[9;14Hworld = rules.Rules(grid)\u001b[10;14Hw = w\u001b[K\n\b\b\b\b\bh = h\u001b[K\n\b\b\b\b\bcam = widgets.Camera(w,h,grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\n\t\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\u001b[23;30H\u001b[7m8% L275\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\n\t\u001b[?25l\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\u001b[4;57H\u001b[8P\r\u001b[8@\u001b[4;11H\u001b[31mdoes.                                                 \u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n            \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\u001b[8;5H            \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\u001b[23;29H\u001b[7m83% L294\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\u001b[K\n\t\t        \u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\t\t        \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\t                \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[11;13H            \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[12;13H            \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\t\t        \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\t\t\t\u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[15;56H\u001b[16P\r\t\u001b[16@\u001b[15;26H\u001b[31ma2.time = t1+t2+50                            \u001b[39;49m\u001b[16;56H\u001b[16P\r\t\u001b[16@\u001b[16;26H\u001b[31mself.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\u001b[39;49m\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[23;30H\u001b[7m8% L313\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n\t\u001b[8P\u001b[5;18Hdraw(x,y)\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[9;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[K\u001b[10;13Hm.draw(mx+x-cx+2, my+y-cy)\u001b[K\r\n\u001b[K\n\t\u001b[16P\u001b[C\u001b[31m Display all alerts on the screen un\u001b[39;49m\u001b[16@\u001b[31mtil their timers\u001b[39;49m\r\n\t\u001b[16P\u001b[C\u001b[31m expire.             \u001b[39;49m\u001b[16@\u001b[31m                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts:\u001b[K\u001b[15;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = a\u001b[K\u001b[16;13H\u001b[33mm.time\u001b[39;49m -= 1\u001b[K\u001b[17;13Hm.draw(mx+x-cx, my+y-cy)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = [a \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a[0].time > 0]\r\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L332\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\u001b[3;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\r\n\t\u001b[8@\u001b[5;26Hgrid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\n\t                \u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\u001b[9;13H            \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\u001b[10;13H            \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\t\t\t\u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[12;46H\u001b[16P\r\t\u001b[16@\u001b[12;26H\u001b[31mx1,y1 = pos                         \u001b[39;49m\u001b[13;31H\u001b[16P\r\t\u001b[16@\u001b[13;26H\u001b[31mx2,y2 = self.selected\u001b[39;49m\r\n\t                \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[15;13H            \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[16;13H            \u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[20;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[23;29H\u001b[7m88%\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[8;25H\u001b[?25l\u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\u001b[9;26H\u001b[31ma1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\u001b[39;49m\u001b[22;1H    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[8;25H\u001b[?25l\u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[9;27H\u001b[31m2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)\u001b[39;49m\u001b[22;1H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;29H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[8;25H\u001b[?25l\u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[9;26H\u001b[31mx1,y1 = pos                                          \u001b[39;49m\u001b[22;1H        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[8;25H\u001b[?25l\u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\u001b[9;27H\u001b[31m2,y2 = self.selected\u001b[39;49m\u001b[22;1H\u001b[K\u001b[8d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[8;25H\u001b[?25l\u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\u001b[9;26H\u001b[31ma1.time = t1+t2+50   \u001b[39;49m\u001b[22;1H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[8;25H\u001b[?25l\u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[9;27H\u001b[31m2\u001b[39;49m\u001b[22;1H            \u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[K\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[8;25H\u001b[?25l\u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[9;26H\u001b[31mself.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\u001b[39;49m\u001b[22;1H            m.draw(mx+x-cx+2, my+y-cy)\u001b[K\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[8;25H\u001b[?25l\u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[K\u001b[22d\u001b[K\u001b[8d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[8;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[12;5H        \u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[K\u001b[14;5H        \u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\u001b[K\n\t    \u001b[33mstarting_hp\u001b[39;49m = a.hp, d.hp\r\n\t    \u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\r\n\t    \u001b[33mending_hp\u001b[39;49m = a.hp, d.hp\r\n\u001b[K\u001b[21;13H\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[23;4H\u001b[7mU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   92% L227   (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[C\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[22;13H\u001b[?25l\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   92% L228\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[?25lMark set\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33mending_hp\u001b[39;49m = a.hp, d.hp\r\n\u001b[K\n\t\t\t\u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\t\t\t\t\b\u001b[20P\u001b[5;5H\u001b[20@\u001b[5;26H\u001b[31mt2 = start_hp[1]-end_hp[1]\u001b[39;49m\u001b[6;5H                    \u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\t                \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[8;13H            \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\t                \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\t\t\t\u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\t                \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[12;13H            \u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[K\u001b[14;14H\u001b[33m.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\r\n\u001b[K\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[23;29H\u001b[7mBot L237\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;72H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;72H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;72H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11L\u001b[1;24r\u001b[2;1H\u001b[?25l            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n            \u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[K\r\n            \u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\u001b[K\n            \u001b[33mstarting_hp\u001b[39;49m = a.hp, d.hp\u001b[K\r\n            \u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[A\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[K\u001b[23;29H\u001b[7m88% L226\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;13H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[4;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\u001b[K\n\u001b[K\n\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[20;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[K\u001b[21;13Hm.draw(mx+x-cx+2, my+y-cy)\u001b[K\r\n\u001b[K\u001b[23;4H\u001b[7m-:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   92% L319  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[8;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[?25l        \u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\u001b[A\u001b[6d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lAuto-saving...\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[6d\t\b\t\t\b\b\b\b\r\t\b\b\b\b\r\u001b[1;22r\u001b[8;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[?25l        \u001b[31m# expire.                                                               \u001b[39;49m\r\n\u001b[A\u001b[6d\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[1;22r\u001b[8;1H\u001b[1M\u001b[1;24r\u001b[7;9H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[22;1H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts:\u001b[K\u001b[6;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[8;1H\u001b[1M\u001b[1;24r\u001b[6;25H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[22d            \u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = a\u001b[K\u001b[6;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[1P\r\t\t\t\b\b\u001b[1P\u001b[23;30H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;22H\u001b[1P\r\t\t\u001b[6;21H\u001b[1P\r\t\t\u001b[6;20H\u001b[1P\b\b\b\u001b[C\u001b[C\u001b[1P\b\b\u001b[C\u001b[1P\b\u001b[1P\b\b\b\b\u001b[4P\r\t\u001b[4P\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\r\n\t\t\bpos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\u001b[8;67H\u001b[4P\u001b[8;5H\u001b[4@\u001b[8;11H\u001b[31ma menu or highlight tiles.                                  \u001b[39;49m\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\r\n\t\u001b[8@\u001b[12;26Hblink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[16;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[19;5H\u001b[4P\t\b\u001b[31mraw the grid to the terminal using the gfx library. Specify\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[20;5H\u001b[4P\t\b\b\u001b[31mx,y and w,h of the viewport in the terminal, and the cx,cy of\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[21;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[23;29H\u001b[7m89% L312\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\t\b\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;36H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;36H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\b\b\r\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[18;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[18;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[18;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[7;2H\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6d\b\b+--------+\u001b[7;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[8;6H|End Turn|\u001b[9;6H+--------+\u001b[23;8H\u001b[7d\bBack\u001b[8;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[7;6H..........\u001b[8;6H..........\u001b[9;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;5H........\u001b[10;5H........\u001b[11;5H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\b+--------+\u001b[10;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[11;6H|End Turn|\u001b[12;6H+--------+\u001b[23;8H\u001b[9d\b\b\u001b[32m\u001b[40m..........\u001b[10;6H..........\u001b[11;6H..........\u001b[12;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\b+--------+\u001b[10;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[11;6H|End Turn|\u001b[12;6H+--------+\u001b[23;8H\u001b[10d\bBack\u001b[11;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........\u001b[10;6H..........\u001b[11;6H..........\u001b[12;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[9d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b[32m\u001b[40m.\u001b[8d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[10;6H|Wait  |\u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[23;8H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 75, in play\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 300, in handle_input\r\n    r = self.world.process(q)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 95, in process\r\n    elif self.state == \"action\"   : return self.process_action(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 189, in process_action\r\n    a1 = self.grid.unit_at(x-1,y)\r\nUnboundLocalError: local variable 'x' referenced before assignment\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\r\n                \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\r\n\u001b[K\n        \u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\u001b[A\n        \u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n        \u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   89% L318  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[18;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[6;13H\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\u001b[K\u001b[10;13H\u001b[33mstarting_hp\u001b[39;49m = a.hp, d.hp\u001b[11;13H\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[K\u001b[13;13H\u001b[33mending_hp\u001b[39;49m = a.hp, d.hp\u001b[K\r\n\u001b[K\u001b[15;13H            \u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\t\t        \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\t\t\t\u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\t                \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\t                \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\t\t\t\u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\u001b[21;51H\u001b[20P\u001b[21;5H\u001b[20@\u001b[21;26H\u001b[31ma1.time = t1+t2+50                           \u001b[39;49m\u001b[22;52H\u001b[20P\u001b[22;5H\u001b[20@\u001b[22;26H\u001b[31ma2.time = t1+t2+50                            \u001b[39;49m\u001b[23;4H\u001b[7mU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   88% L223   (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l            \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\t                \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t\t\u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[K\u001b[6;13H\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[7;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\n\u001b[K\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L235\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[6;13H\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[8;13H\u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[10;13H\u001b[33mstarting_hp\u001b[39;49m = a.hp, d.hp\r\n\t    \u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[13;13H\u001b[33mending_hp\u001b[39;49m = a.hp, d.hp\r\n\n\t\t\t\u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\t\t\t\u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\t\t\t\u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\t\t\t\u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\t\t\t\u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\t\t\t\u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\t\t\t\u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t\t\u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\u001b[23;29H\u001b[7m88%\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\r\n\u001b[K\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[9;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[10;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[11;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[12;18Haction.append(opt)\u001b[K\u001b[13;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[21;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[23;30H\u001b[7m2% L217\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\u001b[K\u001b[5;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\u001b[13;13Ha1 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[14;13Ha2 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\r\n\t    a3 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[16;13Ha4 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[17;13Hattackable = \u001b[35mFalse\u001b[39;49m\u001b[18;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\r\n\u001b[K\u001b[23;29H\u001b[7m74% L198\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[10;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[13;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\n\b\b\b\b\b\b\u001b[7m68% L179\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\u001b[13;13Ha1 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\u001b[14;13Ha2 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\r\n\t    a3 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\r\n\t    a4 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[17;13Hattackable = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[18;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\r\n\u001b[K\u001b[23;29H\u001b[7m74\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l            \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   74% L189\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;13H\n\n\u001b[?25l\u001b[33ma2\u001b[39;49m\n\b\b\u001b[33ma3\u001b[39;49m\n\b\b\u001b[33ma4\u001b[39;49m\n\b\b\u001b[33mattackable\u001b[39;49m\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[14;13Ha1\u001b[13;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;13H\u001b[?25la2\n\b\ba3\n\b\ba4\n\b\battackable\u001b[13;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[14;13H\u001b[33ma1\u001b[39;49m\u001b[13;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[13;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[13;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;13H\u001b[?25l\u001b[33ma2\u001b[39;49m\n\b\b\u001b[33ma3\u001b[39;49m\n\b\b\u001b[33ma4\u001b[39;49m\n\b\b\u001b[33mattackable\u001b[39;49m\u001b[13;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;34H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[13;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6d\b\b+--------+\u001b[7;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[8;6H|End Turn|\u001b[9;6H+--------+\u001b[23;8H\u001b[7d\bBack\u001b[8;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[7;6H..........\u001b[8;6H..........\u001b[9;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\bWait\u001b[10;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;5H........\u001b[11;5H........\u001b[12;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+--------+\u001b[9;5H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[10;5H|End Turn|\u001b[11;5H+--------+\u001b[23;8H\u001b[9d\b\bBack\u001b[10;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b[10;6H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b[8;5H\u001b[32m\u001b[40m..........\u001b[9;5H..........\u001b[10;5H..........\u001b[11;5H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;5H........\u001b[10;5H........\u001b[11;5H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b+--------+\u001b[9;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[10;6H|End Turn|\u001b[11;6H+--------+\u001b[23;8H\u001b[9d\bBack\u001b[10;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b\u001b[32m\u001b[40m..........\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[10;6H..........\u001b[11;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[9d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b[32m\u001b[40m.\u001b[8d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[10;6H|Wait  |\u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[23;8H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 75, in play\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 300, in handle_input\r\n    r = self.world.process(q)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 95, in process\r\n    elif self.state == \"action\"   : return self.process_action(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 195, in process_action\r\n    if a1 and not a1.allied(u): self.choices.append((x-1,y))\r\nNameError: global name 'u' is not defined\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ \u0007./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 68, in play\r\n    self.display_title()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 50, in display_title\r\n    self.g.draw(1,1)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 325, in draw\r\n    self.cam.draw(x,y)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/widgets.py\", line 222, in draw\r\n    tile = self.grid.get(_x,_y)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 78, in get\r\n    if (x < 0 or x >= self.w or y < 0 or y >= self.h):\r\nKeyboardInterrupt\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n            \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\r\n            \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\r\n            \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[K\r\n            \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\r\n            \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[K\r\n            \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\u001b[K\r\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   74% L189   (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[13;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   74% L190\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;13H\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mu\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[15;13Ha1\u001b[14;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[15;13H\u001b[33ma1\u001b[39;49m\u001b[14;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[14;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[14;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[K\u001b[15d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   74% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6d\b\b+--------+\u001b[7;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[8;6H|End Turn|\u001b[9;6H+--------+\u001b[23;8H\u001b[7d\bBack\u001b[8;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[7;6H..........\u001b[8;6H..........\u001b[9;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;5H........\u001b[10;5H........\u001b[11;5H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b+--------+\u001b[9;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[10;6H|End Turn|\u001b[11;6H+--------+\u001b[23;8H\u001b[9d\bBack\u001b[10;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b\u001b[32m\u001b[40m..........\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[10;6H..........\u001b[11;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[9d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b[32m\u001b[40m.\u001b[8d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[10;6H|Wait  |\u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[23;8H\u001b[8d\b\b\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;6H........\u001b[11;6H........\u001b[12;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m8\u001b(B\u001b[0;1m\u001b[30m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[30m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m8\u001b(B\u001b[0;1m\u001b[30m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n            \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\r\n            \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\u001b[K\n            \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\r\n            \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[K\r\n            \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\r\n            \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[K\r\n            \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\u001b[K\r\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   74% L191   (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[15d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[3;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\u001b[4;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\u001b[5;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\u001b[K\r\n\u001b[K\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[8;14H\u001b[1m\u001b[36meturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\r\n\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[12;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[13;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[14;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[23;29H\u001b[7m80% L197\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[5;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[9;13H\u001b[33mox\u001b[39;49m,oy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\u001b[13;13H\u001b[33mstarting_hp\u001b[39;49m = a.hp, d.hp\u001b[K\u001b[14;13H\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[15;18Hgrid.launch_attack((ox,oy),(x,y))\u001b[16;13H\u001b[33mending_hp\u001b[39;49m = a.hp, d.hp\r\n\n\t                \u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\u001b[19;13H            \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\t\t\t\u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[21;5H                    \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[22;5H                    \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\u001b[23;30H\u001b[7m7% L216\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[3;5H        \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\u001b[5;13H    \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\u001b[10;18Hcam.blink = []\u001b[K\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[13;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[14;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\u001b[15;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\u001b[16;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\n\t\u001b[16P\u001b[C\u001b[31m This returns nothing.    \u001b[39;49m\u001b[16@\u001b[31m                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[22;5H\u001b[20P\u001b[C\u001b[31m x,y and w,h of the viewport in the terminal, \u001b[39;49m\u001b[20@\u001b[31mand the cx,cy of the\u001b[39;49m\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   89% L318  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[18;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[5;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,y = coord\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[33mox\u001b[39;49m,oy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\u001b[10;18Haction.append((ox,oy))\u001b[11;13H\u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\u001b[13;13H\u001b[33mstarting_hp\u001b[39;49m = a.hp, d.hp\u001b[14;13H\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[16;13H\u001b[33mending_hp\u001b[39;49m = a.hp, d.hp\u001b[K\n\n\u001b[C\u001b[16P\r\t\u001b[16@\u001b[18;26H\u001b[31mt1 = start_hp[0]-end_hp[0]\u001b[39;49m\r\n\t                \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\t\t\t\u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[21;5H                    \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[22;52H\u001b[20P\u001b[22;5H\u001b[20@\u001b[22;26H\u001b[31mx1,y1 = pos                                   \u001b[39;49m\u001b[23;4H\u001b[7mU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   87% L216   (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l                    \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[3;5H                    \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\t                \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\u001b[5;13H            \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\t                \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t\t\u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[K\u001b[9;13H\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[10;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\n\u001b[K\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L235\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[5;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[9;13H\u001b[33mox\u001b[39;49m,oy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[11;13H\u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[13;13H\u001b[33mstarting_hp\u001b[39;49m = a.hp, d.hp\r\n\t    \u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[16;13H\u001b[33mending_hp\u001b[39;49m = a.hp, d.hp\r\n\n\t\t\t\u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\t\t\t\u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\t\t\t\u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\t\t\t\u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\t\t\t\u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\u001b[23;29H\u001b[7m87%\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\u001b[5;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\r\n\u001b[K\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[12;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[13;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[14;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[15;18Haction.append(opt)\u001b[K\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[23;30H\u001b[7m0% L217\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[8;14H\u001b[1m\u001b[36maise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[K\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\u001b[13;13H\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\u001b[14;13H\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\u001b[16;13H\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[17;13H\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\r\n\t    \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[19;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[20;13H\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[21;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\u001b[23;29H\u001b[7m74% L198\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[10;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[13;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\n\b\b\b\b\b\b\u001b[7m67% L179\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\u001b[11;5H        \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\r\n\t    \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[13;13H\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[14;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[17;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[18;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[23;29H\u001b[7m58% L160\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[8;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[9;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\r\n\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[13;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[16;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[19;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\u001b[23;30H\u001b[7m0% L141\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[15;47H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[23;29H\u001b[7m42% L122\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[6;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[7;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[8;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[9;5H\u001b[4P\t\b\b\u001b[31m    undo: Tell the controller to reload the \u001b[39;49m\u001b[4@\u001b[31mgrid\u001b[39;49m\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[19;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[20;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[23;29H\u001b[7m31% L103\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;7H\u001b[?25l\u001b[31mcheckpoint.                                                \u001b[39;49m\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[17;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[18;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[19;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[23;29H\u001b[7m22% L84 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;9r\u001b[5;1H\u001b[1L\u001b[1;24r\u001b[2;7H\u001b[?25l\u001b[31mWhen a move is completed and we return to the start state, we\u001b[39;49m\u001b[3;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[K\u001b[11;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.\u001b[39;49m\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[13;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[14;14Hgrid = cp\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint.                                                \u001b[39;49m\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;29H\u001b[7m15% L65\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\u001b[4;5H    \u001b[31m# other                                                                 \u001b[39;49m\r\n\u001b[5;14Halerts = []\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\u001b[11;7H\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[12;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\n\n\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\n\t\b\b\u001b[31mWhen a move is completed and we return to the start state, we\u001b[39;49m\u001b[22;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[23;29H\u001b[7m 8% L46\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[?25l\u001b[31m# Constants sent to the controller after processing.                            \u001b[39;49m\r\n\u001b[33mCTRL_COORD\u001b[39;49m = 1\u001b[K\r\n\u001b[33mCTRL_MENU\u001b[39;49m = 2\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = 3\r\n\u001b[K\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[16;14Hhistory = []\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m3% L27\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[3;1H\u001b[6L\u001b[1;24r\u001b[2;1H\u001b[?25l\u001b[31m# A rules object handles all of the actual game play elements. The rules        \u001b[39;49m\r\n\u001b[31m# are what give meaning to the pieces in a Grid, and is controlled (usually)    \u001b[39;49m\r\n\u001b[A\n\u001b[31m# by a Controller that provides piecewise input.                                \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[?25lBeginning of buffer\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u0007\u0007\u0007\n\n\u001b[K\u001b[2d\u001b[?25l        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\n        \u001b[31m# other                                                                 \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\u001b[K\u001b[13;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n        \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[22;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[23;29H\u001b[7m 6%\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[3;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[8;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[17;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.        \u001b[39;49m\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[19;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[23;29H\u001b[7m13% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;15r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[5;9H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint.                                                  \u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\n\n\n\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\u001b[17;7H\u001b[31mThis sets the new state and returns the appropriate code   \u001b[39;49m\u001b[18;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[20;14Hstate = new_state\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[23;29H\u001b[7m20% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[8;7H\u001b[31mThis processes input of two types: coordinates and strings.\u001b[39;49m\u001b[9;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[13;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[14;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[15;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\u001b[18;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\u001b[19;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\r\n\u001b[K\u001b[23;30H\u001b[7m7% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\r\n\u001b[K\u001b[4;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[7;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[11;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[12;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[13;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[15;51H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mIf no unit, check for terrain               \u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[23;29H\u001b[7m39% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[4;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[6;58H\u001b[4P\u001b[6;5H\u001b[4@\u001b[6;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[19;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[21;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m47% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[14;18Haction.append((x,y))\u001b[K\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\n\t    \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\u001b[18;13H\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[19;5H        \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[20;5H        \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[K\u001b[21;5H        \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m56% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[6;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[11;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[19;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[23;29H\u001b[7m64% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[4;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[9;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\u001b[19;13H\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\u001b[20;13H\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\n\t    \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[23;29H\u001b[7m72% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l    \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[4;13H\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[5;13H\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\r\n\t    \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[K\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[9;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\u001b[11;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\u001b[K\r\n\u001b[K\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[14;14H\u001b[1m\u001b[36meturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\r\n\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[18;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[19;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[20;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\n\b\b\b\u001b[7m7% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[11;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[15;13H\u001b[33mox\u001b[39;49m,oy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\u001b[19;13H\u001b[33mstarting_hp\u001b[39;49m = a.hp, d.hp\u001b[K\u001b[20;13H\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[21;18Hgrid.launch_attack((ox,oy),(x,y))\u001b[22;13H\u001b[33mending_hp\u001b[39;49m = a.hp, d.hp\n\b\b\b\b\b\b\u001b[7m86% L210\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;18H\u001b[?25lgrid.launch_attack((ox,oy),(x,y))\u001b[3;13H\u001b[33mending_hp\u001b[39;49m = a.hp, d.hp\r\n\n\t                \u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\u001b[6;13H            \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\t\t\t\u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[8;5H                    \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[9;5H                    \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\t                \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\u001b[11;13H            \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\t                \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t\t\u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[K\u001b[15;13H\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\n\u001b[K\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7mBot L229\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\n\n\n\u001b[K\n\u001b[K\u001b[23;35H\u001b[7m48\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u0007\u0007\u0007\u001b[24d\u001b[K\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[3;13H\u001b[33mending_hp\u001b[39;49m = a.hp, d.hp\r\n\n\t\t\t\u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\t\t\t\u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\t\t\t\u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\t\t\t\u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\t\t\t\u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\t\t\t\u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\t\t\t\u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t\t\u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t\t\u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[15;13H\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\r\n\n\n\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;18H\u001b[?25laction.append(opt)\u001b[K\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[11;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[15;13H\u001b[33mox\u001b[39;49m,oy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[17;13H\u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[19;13H\u001b[33mstarting_hp\u001b[39;49m = a.hp, d.hp\r\n\t    \u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[22;13H\u001b[33mending_hp\u001b[39;49m = a.hp, d.hp\n\b\b\b\b\b\b\u001b[7m86% L230\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;13H\u001b[?25l\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[4;13H\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\r\n\t    \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[6;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[7;13H\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[8;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\r\n\u001b[K\u001b[13;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[18;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[19;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[20;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[21;18Haction.append(opt)\u001b[K\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\n\b\b\b\b\u001b[7m77% L211\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[4;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[9;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[14;14H\u001b[1m\u001b[36maise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[K\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\u001b[19;13H\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\u001b[20;13H\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\u001b[22;13H\u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[23;30H\u001b[7m2% L192\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[4;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[5;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[16;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[19;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[23;29H\u001b[7m64% L173\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[6;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\u001b[17;5H        \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\r\n\t    \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[19;13H\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[20;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[23;29H\u001b[7m56% L154\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;47H\u001b[4P\u001b[2;5H\u001b[4@\u001b[2;11H\u001b[?25l\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[14;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\r\n\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[19;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m47% L135\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[6;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[7;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[19;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[21;47H\u001b[4P\u001b[21;5H\u001b[4@\u001b[21;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[23;29H\u001b[7m39% L116\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[4;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[5;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[6;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[12;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[13;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[14;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[15;5H\u001b[4P\t\b\b\u001b[31m    undo: Tell the controller to reload the \u001b[39;49m\u001b[4@\u001b[31mgrid\u001b[39;49m\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m27% L97 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint.                                                \u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[23;30H\u001b[7m0% L78\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;15r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[5;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[8;7H\u001b[31mWhen a move is completed and we return to the start state, we\u001b[39;49m\u001b[9;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[K\u001b[17;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.\u001b[39;49m\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[19;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[20;14Hgrid = cp\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m13% L59\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[3;14Hhistory = []\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\u001b[10;5H    \u001b[31m# other                                                                 \u001b[39;49m\r\n\u001b[11;14Halerts = []\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\u001b[17;7H\u001b[31mThis sets the state back to start while also restoring the previous\u001b[39;49m\u001b[18;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[23;29H\u001b[7m 6% L40\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# A rules object handles all of the actual game play elements. The rules        \u001b[39;49m\r\n\u001b[31m# are what give meaning to the pieces in a Grid, and is controlled (usually)    \u001b[39;49m\r\n\u001b[31m# by a Controller that provides piecewise input.                                \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Constants sent to the controller after processing.                            \u001b[39;49m\r\n\u001b[33mCTRL_COORD\u001b[39;49m = 1\u001b[K\r\n\u001b[33mCTRL_MENU\u001b[39;49m = 2\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = 3\r\n\u001b[K\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[22;14Hhistory = []\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[?25lBeginning of buffer\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u0007\u0007\n\n\u001b[K\u001b[2d\u001b[?25l        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\n        \u001b[31m# other                                                                 \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\u001b[K\u001b[13;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n        \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[22;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[23;29H\u001b[7m 6%\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[3;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[8;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[17;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.        \u001b[39;49m\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[19;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[23;29H\u001b[7m13% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;51H\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   13% L53\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lC\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[16;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[16;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;22H\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lstate = \u001b[35mNone\u001b[39;49m\u001b[3;14Hchoices = []\r\n\t\t\beckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[9;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[11;14Haction = []\u001b[K\u001b[12;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[13;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[21;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[22;14Hchoices = []\u001b[23;30H\u001b[7m7% L60\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[10;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[11;14Hchoices = []\u001b[12;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[15;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\t\b\b\u001b[31mto the caller for what kind of input should come next.          \u001b[39;49m\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[23;29H\u001b[7m21% L71\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m69\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lstate = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[5;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[10;14Hgrid = cp\u001b[K\u001b[11;14Haction = []\u001b[K\u001b[12;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\n\t\b\b\u001b[31mWhen we end the turn, we flush the history buffer and save a new\u001b[39;49m\u001b[17;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[23;29H\u001b[7m17% L60\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25laction = []\u001b[K\u001b[3;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\t\boices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[8;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[12;14Haction = []\u001b[K\u001b[13;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[16;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[21;14Hgrid = cp\u001b[K\u001b[22;14Haction = []\u001b[K\u001b[23;30H\u001b[7m3% L49\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\t\b\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;37H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[16;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[16;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\n\b\b\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\b\b\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lstate = \u001b[35mNone\u001b[39;49m\u001b[3;14Hchoices = []\r\n\t\t\beckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[9;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[11;14Haction = []\u001b[K\u001b[12;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[13;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[21;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[22;14Hchoices = []\u001b[23;30H\u001b[7m7% L60\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[10;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[11;14Hchoices = []\u001b[12;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[15;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\t\b\b\u001b[31mto the caller for what kind of input should come next.          \u001b[39;49m\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[23;29H\u001b[7m21% L71\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m69\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lstate = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[5;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[10;14Hgrid = cp\u001b[K\u001b[11;14Haction = []\u001b[K\u001b[12;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\n\t\b\b\u001b[31mWhen we end the turn, we flush the history buffer and save a new\u001b[39;49m\u001b[17;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[23;29H\u001b[7m17% L60\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25laction = []\u001b[K\u001b[3;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\t\boices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[8;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[12;14Haction = []\u001b[K\u001b[13;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[16;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[21;14Hgrid = cp\u001b[K\u001b[22;14Haction = []\u001b[K\u001b[23;30H\u001b[7m3% L49\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7d\b\b+--------+\u001b[8;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[9;6H|End Turn|\u001b[10;6H+--------+\u001b[23;8H\u001b[8d\bBack\u001b[9;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[7d\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[8;6H..........\u001b[9;6H..........\u001b[10;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;3H\u001b[32m\u001b[40m..\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Cancel|\r\u001b[11d|\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\r\u001b[12d|\u001b[32m\u001b[40m......\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\bWait\u001b[10;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;5H........\u001b[11;5H........\u001b[12;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;4H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;3H\u001b[32m\u001b[40m..\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Cancel|\r\u001b[11d|\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\r\u001b[12d|\u001b[32m\u001b[40m......\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;5H........\u001b[10;5H........\u001b[11;5H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b+--------+\u001b[9;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[10;6H|End Turn|\u001b[11;6H+--------+\u001b[23;8H\u001b[9d\bBack\u001b[10;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b\u001b[32m\u001b[40m..........\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[10;6H..........\u001b[11;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b[32m\u001b[40m.\u001b[8d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[10;6H|Wait  |\u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[23;8H\u001b[8d\b\b\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;6H........\u001b[11;6H........\u001b[12;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\b\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m8\u001b[30m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d+--------+\u001b[9;8H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[10;8H|End Turn|\u001b[11;8H+--------+\u001b[23;8H\u001b[9;9HBack\u001b[10;9H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\u001b[32m\u001b[40m..........\u001b[9;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m8\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[10;8H..........\u001b[11;8H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m8\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m8\u001b(B\u001b[0;1m\u001b[31m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[7d\b\b...\u001b[8;2H.....\u001b[9;2H..\u001b[10d\b\b.....\u001b[11;3H...\u001b[12d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b[32m\u001b[40m.\u001b[7d\b\b...\u001b[8;2H.....\u001b[9;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[10;2H\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[11;3H...\u001b[12d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[10d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[7d\b\b...\u001b[8;2H.....\u001b[9;2H..\u001b[10d\b\b.....\u001b[11;3H...\u001b[12d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b[32m\u001b[40m.\u001b[7d\b\b...\u001b[8;2H...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\r\u001b[9d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Wait  |\u001b[11;3H\u001b[32m\u001b[40m..\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Cancel|\u001b[12;4H\u001b[32m\u001b[40m.\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[23;8H\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.......\u001b[10;5H........\u001b[11;5H........\u001b[12;5H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\b\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23d\b\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m6\u001b[31m\u001b[40m6\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;9H+--------+\u001b[9;9H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[10;9H|End Turn|\u001b[11;9H+--------+\u001b[23;8H\u001b[9;10HBack\u001b[10;10H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;9H\u001b[32m\u001b[40m..........\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m6\u001b[31m\u001b[40m6\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[10;9H..........\u001b[11;9H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n    \u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n    \u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   13% L49    (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lgrid = cp\u001b[K\u001b[3;14Haction = []\u001b[K\u001b[4;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[5;14Hchoices = []\u001b[K\u001b[8;12H\u001b[31mwe end the turn, we flush the history buffer and save a new\u001b[39;49m\r\n\t\u001b[31meckpoint.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\n\b\b\b = []\u001b[K\u001b[18;7H\u001b[31mThis sets the new state and returns the appropriate code   \u001b[39;49m\u001b[19;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[21;14Hstate = new_state\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[23;29H\u001b[7m20% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lstate = new_state\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[9;7H\u001b[31mThis processes input of two types: coordinates and strings.\u001b[39;49m\u001b[10;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[14;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[15;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[16;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\u001b[19;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\u001b[20;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\u001b[23;30H\u001b[7m7% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\r\n\u001b[K\u001b[5;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[8;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[12;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[13;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[14;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[16;51H\u001b[4P\u001b[16;5H\u001b[4@\u001b[16;11H\u001b[31mIf no unit, check for terrain               \u001b[39;49m\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\u001b[23;29H\u001b[7m39% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[7;58H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[20;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[22;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[23;29H\u001b[7m47% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[3;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[4;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[15;18Haction.append((x,y))\u001b[K\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\n\t    \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\u001b[19;13H\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[20;5H        \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[21;5H        \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[K\u001b[22;5H        \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\n\b\b\u001b[7m55% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[K\u001b[3;5H        \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[12;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[20;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\u001b[23;29H\u001b[7m63% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[5;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[10;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\u001b[20;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\u001b[21;13Hu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\u001b[23;29H\u001b[7m72% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25lu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\n\t    a1 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[5;13Ha2 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[6;13Ha3 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\r\n\t    \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[K\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[9;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\u001b[12;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\u001b[K\r\n\u001b[K\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[15;14H\u001b[1m\u001b[36meturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\r\n\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[19;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[20;13H\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[21;13H\u001b[33munit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\n\b\b\b\b\b\b\u001b[7m7% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[33munit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[4;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[7;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[12;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[16;13H\u001b[33mox\u001b[39;49m,oy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m, d = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\u001b[20;13H\u001b[33mstarting_hp\u001b[39;49m = a.hp, d.hp\u001b[K\u001b[21;13H\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[22;18Hgrid.launch_attack((ox,oy),(x,y))\u001b[23;29H\u001b[7m85% L210\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[3;18Hgrid.launch_attack((ox,oy),(x,y))\u001b[4;13H\u001b[33mending_hp\u001b[39;49m = a.hp, d.hp\r\n\n\t                \u001b[31m#t1 = start_hp[0]-end_hp[0]                             \u001b[39;49m\r\n\u001b[7;13H            \u001b[31m#t2 = start_hp[1]-end_hp[1]                             \u001b[39;49m\r\n\t\t\t\u001b[31m#a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)   \u001b[39;49m\r\n\u001b[9;5H                    \u001b[31m#a2 = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)  \u001b[39;49m\r\n\u001b[10;5H                    \u001b[31m#x1,y1 = pos                                            \u001b[39;49m\r\n\t                \u001b[31m#x2,y2 = self.selected                                  \u001b[39;49m\r\n\u001b[12;13H            \u001b[31m#a1.time = t1+t2+50                                     \u001b[39;49m\r\n\t                \u001b[31m#a2.time = t1+t2+50                                     \u001b[39;49m\r\n\t\t\t\u001b[31m#self.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]         \u001b[39;49m\r\n\u001b[K\u001b[16;13H\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\n\u001b[K\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[23;29H\u001b[7mBot L229\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\t\t\b\u001b[1P\u001b[6;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[1P\u001b[6;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;22H\u001b[1P\u001b[6;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;21H\u001b[1P\u001b[6;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;20H\u001b[1P\u001b[6;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;19H\u001b[1P\u001b[6;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;18H\u001b[1P\u001b[6;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1P\u001b[6;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[1P\u001b[6;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[1P\u001b[6;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[1P\u001b[6;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1P\u001b[6;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[K\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[1P\u001b[7;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[1P\u001b[7;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;22H\u001b[1P\u001b[7;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;21H\u001b[1P\u001b[7;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;20H\u001b[1P\u001b[7;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;19H\u001b[1P\u001b[7;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;18H\u001b[1P\u001b[7;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1P\u001b[7;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[1P\u001b[7;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[1P\u001b[7;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[1P\u001b[7;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1P\u001b[7;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[K\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\t\t\b\u001b[1P\u001b[8;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[1P\u001b[8;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;22H\u001b[1P\u001b[8;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;21H\u001b[1P\u001b[8;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;20H\u001b[1P\u001b[8;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;19H\u001b[1P\u001b[8;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;18H\u001b[1P\u001b[8;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1P\u001b[8;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[1P\u001b[8;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[1P\u001b[8;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[1P\u001b[8;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1P\u001b[8;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\u001b[K\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\t\t\b\u001b[1P\u001b[9;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[1P\u001b[9;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;22H\u001b[1P\u001b[9;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;21H\u001b[1P\u001b[9;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;20H\u001b[1P\u001b[9;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;19H\u001b[1P\u001b[9;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;18H\u001b[1P\u001b[9;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1P\u001b[9;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[1P\u001b[9;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[1P\u001b[9;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[1P\u001b[9;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1P\u001b[9;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)\u001b[K\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[1P\u001b[10;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[1P\u001b[10;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;22H\u001b[1P\u001b[10;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;21H\u001b[1P\u001b[10;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;20H\u001b[1P\u001b[10;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;19H\u001b[1P\u001b[10;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[1P\u001b[10;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1P\u001b[10;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[1P\u001b[10;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[1P\u001b[10;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[1P\u001b[10;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1P\u001b[10;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = pos\u001b[K\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[1P\u001b[11;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[1P\u001b[11;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;22H\u001b[1P\u001b[11;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;21H\u001b[1P\u001b[11;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;20H\u001b[1P\u001b[11;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;19H\u001b[1P\u001b[11;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[1P\u001b[11;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1P\u001b[11;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[1P\u001b[11;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[1P\u001b[11;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[1P\u001b[11;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1P\u001b[11;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected\u001b[K\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[1P\u001b[12;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[1P\u001b[12;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;22H\u001b[1P\u001b[12;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;21H\u001b[1P\u001b[12;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;20H\u001b[1P\u001b[12;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;19H\u001b[1P\u001b[12;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[1P\u001b[12;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1P\u001b[12;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[1P\u001b[12;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[1P\u001b[12;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[1P\u001b[12;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1P\u001b[12;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[K\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[1P\u001b[13;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[1P\u001b[13;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;22H\u001b[1P\u001b[13;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;21H\u001b[1P\u001b[13;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;20H\u001b[1P\u001b[13;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;19H\u001b[1P\u001b[13;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[1P\u001b[13;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1P\u001b[13;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[1P\u001b[13;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[1P\u001b[13;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[1P\u001b[13;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1P\u001b[13;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[K\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[1P\u001b[14;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[1P\u001b[14;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;22H\u001b[1P\u001b[14;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;21H\u001b[1P\u001b[14;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;20H\u001b[1P\u001b[14;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;19H\u001b[1P\u001b[14;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[1P\u001b[14;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1P\u001b[14;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[1P\u001b[14;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[14;15H\u001b[1P\u001b[14;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[1P\u001b[14;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1P\u001b[14;80H\u001b[?25l\u001b[31m \u001b[39;49m\r\n\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\u001b[K\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;59H\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;59H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;59H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[4;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,y = coord\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[8;13H\u001b[33mox\u001b[39;49m,oy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\u001b[K\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[K\u001b[10;13H\u001b[33ma\u001b[39;49m, d = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\u001b[12;13H\u001b[33mstarting_hp\u001b[39;49m = a.hp, d.hp\u001b[13;13H\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[14;18Hgrid.launch_attack((ox,oy),(x,y))\u001b[K\u001b[15;13H\u001b[33mend_hp\u001b[39;49m = a.hp, d.hp\r\n\u001b[K\u001b[17;13H\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[18;13H\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[19;13H\u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\u001b[20;13H\u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)\r\n\t    \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = pos\u001b[22;13H\u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected\u001b[K\n\b\b\b\b\b\u001b[7m89% L228\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1@\u001b[33mt\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[12;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[12;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[4;13H\u001b[33mend_hp\u001b[39;49m = a.hp, d.hp\u001b[K\r\n\u001b[K\u001b[6;13H\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\r\n\t    \u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[8;13H\u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\u001b[9;13H\u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)\u001b[10;13H\u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = pos\u001b[K\u001b[11;13H\u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.selected\u001b[12;13H\u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[K\u001b[13;13H\u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[K\u001b[14;18Halerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\r\n\u001b[K\u001b[16;13H\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[23;29H\u001b[7mBot L239\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[6;1H\u001b[1L\u001b[1;24r\u001b[6;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   93% L233\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;13H\u001b[?25l\u001b[31m#                                                                   \u001b[39;49m\r\n\u001b[6;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mB\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[6;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[6;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\b\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\b\b\u001b[?25lsel\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[12;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[12;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;23H\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[12;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[12;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;23H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[11;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[11;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;13H\u001b[?25l\u001b[33munit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[3;18Haction.append(opt)\u001b[K\u001b[4;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[7;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[12;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[16;13H\u001b[33mox\u001b[39;49m,oy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[18;13H\u001b[33ma\u001b[39;49m, d = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[20;13H\u001b[33mstart_hp\u001b[39;49m = a.hp, d.hp\u001b[21;13H\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[23;29H\u001b[7m86% L230\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25lu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\u001b[4;13Ha1 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[5;13Ha2 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\r\n\t    a3 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[7;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[8;13H\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[9;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\u001b[12;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\r\n\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[19;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[20;13H\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[21;13H\u001b[33munit.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[22;18Haction.append(opt)\u001b[K\u001b[23;29H\u001b[7m78% L211\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[5;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[10;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[15;14H\u001b[1m\u001b[36maise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[K\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\u001b[20;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\u001b[21;13Hu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\u001b[23;30H\u001b[7m3% L192\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[5;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[6;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[12;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\u001b[17;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[20;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\u001b[23;29H\u001b[7m64% L173\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[4;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[7;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\u001b[18;5H        \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\r\n\t    \u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[20;13H\u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[21;13H\u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\r\n\t    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\n\b\b\u001b[7m56% L154\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;47H\u001b[4P\u001b[3;5H\u001b[4@\u001b[3;11H\u001b[?25l\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[15;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\r\n\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[20;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[23;29H\u001b[7m48% L135\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[7;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[8;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[20;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[22;47H\u001b[4P\u001b[22;5H\u001b[4@\u001b[22;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[23;29H\u001b[7m39% L116\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[5;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[6;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[7;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[14;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[15;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[16;5H\u001b[4P\t\b\b\u001b[31m    undo: Tell the controller to reload the \u001b[39;49m\u001b[4@\u001b[31mgrid\u001b[39;49m\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\u001b[K\u001b[23;29H\u001b[7m27% L97 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lgrid = cp\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint.                                                \u001b[39;49m\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[23;30H\u001b[7m0% L78\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25laction = []\u001b[3;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[4;14Hchoices = []\u001b[5;14Hgrid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[8;12H\u001b[31ma move is completed and we return to the start state, we   \u001b[39;49m\r\n\t\u001b[31mange the checkpoint and save the move in our history.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\n\b.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[18;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.\u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[20;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[21;14Hgrid = cp\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[23;29H\u001b[7m13% L59\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[3;14Hhistory = []\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\u001b[10;5H    \u001b[31m# other                                                                 \u001b[39;49m\r\n\u001b[11;14Halerts = []\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[19;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[21;14Haction = []\u001b[22;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[23;29H\u001b[7m 6% L40\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# A rules object handles all of the actual game play elements. The rules        \u001b[39;49m\r\n\u001b[31m# are what give meaning to the pieces in a Grid, and is controlled (usually)    \u001b[39;49m\r\n\u001b[31m# by a Controller that provides piecewise input.                                \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Constants sent to the controller after processing.                            \u001b[39;49m\r\n\u001b[33mCTRL_COORD\u001b[39;49m = 1\u001b[K\r\n\u001b[33mCTRL_MENU\u001b[39;49m = 2\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = 3\r\n\u001b[K\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[22;14Hhistory = []\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\n        \u001b[31m# other                                                                 \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\u001b[K\u001b[13;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n        \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[22;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[23;29H\u001b[7m 6%\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m    6% L35\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\n\u001b[?25l    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[A\u001b[23;35H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;5H\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34mp\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mp\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ml\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ml\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mt\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\r\t\u001b[?25l\u001b[33mreport\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[21;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[21;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[K\u001b[21;22H\r\n\n\n\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[4;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\r\n\t        \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[13;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\u001b[14;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\u001b[18;5H    \u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   89% L318  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[18;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   89% L319\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l+\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[19;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[19;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H+--------+\u001b[5;3H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[6;3H|End Turn|\u001b[7;3H+--------+\u001b[23;8H\u001b[5;4HBack\u001b[6;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b[6;4H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b[5;4HBack\u001b[6;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b[6;4H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b[4;3H\u001b[32m\u001b[40m..........\u001b[5;3H..........\u001b[6;3H..........\u001b[7;3H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\b+--------+\u001b[10;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[11;6H|End Turn|\u001b[12;6H+--------+\u001b[23;8H\u001b[10d\bBack\u001b[11;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b[11;7H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b[10d\bBack\u001b[11;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[9d\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[10;6H..........\u001b[11;6H..........\u001b[12;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\bWait\u001b[10;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b[10;6H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;5H........\u001b[10;5H........\u001b[11;5H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b+--------+\u001b[9;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[10;6H|End Turn|\u001b[11;6H+--------+\u001b[23;8H\u001b[9d\bBack\u001b[10;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b\u001b[32m\u001b[40m..........\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[10;6H..........\u001b[11;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[9d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b[32m\u001b[40m.\u001b[8d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[10;6H|Wait  |\u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[23;8H\u001b[8d\b\b\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;6H........\u001b[11;6H........\u001b[12;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 75, in play\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 305, in handle_input\r\n    r = self.world.process(pos)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 103, in process\r\n    elif self.state == \"attacking\": return self.process_attacking(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 242, in process_attacking\r\n    a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\r\nNameError: global name 'widgets' is not defined\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\r\n                \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\r\n\u001b[K\n        \u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\u001b[A\n        \u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n        \u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.alerts\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   89% L319  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[19;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\u001b[K\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\t\u001b[31m# does.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[17;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\r\n\t        \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[22;5H        \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\u001b[23;30H\u001b[7m4% L303\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lresources = 0\u001b[3;14Hallies = []\u001b[4;14Hactive = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[8P\u001b[C\u001b[C\u001b[31mThe controller of the grid. It takes a rules object an\u001b[39;49m\u001b[8@\u001b[31md passes\u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = rules.Rules(grid)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\u001b[23;30H\u001b[7m0% L284\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\r\n\u001b[K\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[7;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m unit.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\r\n\u001b[K\u001b[9;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mattack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\r\n\tdamage = \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(30 * 0.01 * \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp)\r\n\tunit.hp -= damage\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.hp < 0:\u001b[14;13Hunit.hp = 0\r\n\u001b[K\u001b[16;3H\u001b[31m                                                            \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\u001b[20;14Hcolor = color\u001b[K\u001b[21;14Hresources = 0\u001b[22;14Hallies = []\u001b[23;29H\u001b[7m76% L265\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# This function draws the unit at the desired location.                     \u001b[39;49m\r\n\t\u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\u001b[K\u001b[9;60H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mGray out units that can't act. Units are always bold.\u001b[39;49m\u001b[10;5H    \u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Build the animation for this unit based on values                     \u001b[39;49m\r\n\t\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp <= 90):\u001b[K\r\n            frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\u001b[23;30H\u001b[7m0% L246\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# the \"drawable\" interface.                                                 \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw_terrain\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[5;5H        \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\u001b[K\u001b[6;5H    draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\u001b[K\n\n\u001b[31m# Units are the pieces that move about the game board. Units belong to a        \u001b[39;49m\r\n\u001b[31m# team and can be moved about by taking actions.                                \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, team):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\u001b[K\u001b[23;29H\u001b[7m65% L227\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\".\"\u001b[39;49m\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = \u001b[32m\"g\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[K\u001b[8;5H\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n    \u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[10;45H\u001b[4P\r\u001b[4@\t\b\u001b[31mhe unit's draw will be prioritized.      \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit.draw(x, y, col)\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\r\n\t        \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\u001b[17;13Hdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\u001b[K\u001b[19;5H\u001b[31m# This function draws the terrain without drawing the                       \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# unit. Put into its own function to avoid messing up                       \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# the \"drawable\" interface.                                                 \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw_terrain\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[23;29H\u001b[7m59% L208\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\r\n\u001b[K\u001b[5;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[8;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\u001b[9;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[13;18Hday += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, terrain):\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = terrain\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\".\"\u001b[39;49m\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = \u001b[32m\"g\"\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m5% L189\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# This should be the ONLY WAY units are added to the game.                  \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\u001b[K\u001b[6;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\t\u001b[33munit.team\u001b[39;49m = team\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\u001b[K\r\n        \u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[20;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[23;29H\u001b[7m49% L170\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[4;7H\u001b[31mLaunch an attack from the attack coordinates to the defend\u001b[39;49m\u001b[5;5H\u001b[31m# coordinates. Will throw exception if move is illegal.                     \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# CHECK FIRST.                                                              \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlaunch_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, attacker, defender):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = attacker\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = defender\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ax,ay).unit\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(dx,dy).unit\r\n\tatk_unit.attack(def_unit)\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp >= 0: \u001b[31m#and can counter\u001b[39;49m\u001b[14;5H        def_unit.attack(atk_unit)\r\n\u001b[K\n\t\u001b[31m# Destroy dead units.                                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(dx,dy)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(ax,ay)\r\n\n\u001b[K\u001b[21;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\u001b[23;30H\u001b[7m4% L151\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[4;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[5;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[6;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[7;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\u001b[12;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.\u001b[39;49m\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ox,oy)\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[21;5H    \u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m37% L132\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile.unit:\u001b[K\u001b[10;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\r\n\u001b[K\u001b[13;60H\u001b[4P\u001b[13;5H\u001b[4@\u001b[13;11H\u001b[31mUse the naive flood-fill algorithm to get neighboring\u001b[39;49m\u001b[14;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(a,b)\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\r\n\t            report.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[23;30H\u001b[7m1% L113\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[3d\u001b[K\u001b[4;7H\u001b[?25l\u001b[31mGet the tile at x,y. Returns None if out of range.          \u001b[39;49m\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[K\u001b[7;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\r\n\u001b[K\u001b[10;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# Return the actions that the given unit can take if it were                \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# at x,y.                                                                   \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mactions\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, x, y):\u001b[K\r\n\t\u001b[33macts\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[23;29H\u001b[7m26% L94 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\t\u001b[31m#   variables: (dict) User-defined variables                            \u001b[39;49m\r\n\u001b[4;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"cells\"\u001b[39;49m]:\u001b[K\u001b[5;5H        \u001b[33mthis\u001b[39;49m = Cell(c[\u001b[32m\"terrain\"\u001b[39;49m])\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\u001b[K\u001b[7;13H\u001b[33mthis.variables\u001b[39;49m = c.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"owner\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t\t\u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\u001b[10;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\u001b[11;5H            \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\r\n\t            \u001b[33mu\u001b[39;49m = Unit(unit[\u001b[32m\"type\"\u001b[39;49m],\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]])\r\n\t            \u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[15;21H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\u001b[16;5H                    _process_units(u)\u001b[K\u001b[17;5H                \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\u001b[18;5H            \u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\r\n\u001b[K\n\u001b[K\n\n\u001b[K\u001b[23;29H\u001b[7m19% L75\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;11H\u001b[?25l\u001b[31mLoad the teams first, since cells and units reference them.\u001b[39;49m\r\n\t\u001b[31m# Then set up the alliances.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\u001b[6;13H\u001b[33mthis\u001b[39;49m = Team( t[\u001b[32m\"name\"\u001b[39;49m], t[\u001b[32m\"color\"\u001b[39;49m] )\u001b[7;30Ht\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams.append(this)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\u001b[K\u001b[10;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist\r\n\t\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\u001b[12;21H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\u001b[K\r\n\u001b[K\n\t\u001b[31m# Load the terrain cells. The units are embedded in these elements      \u001b[39;49m\r\n\t\u001b[31m# of the dictionary. Note that when units are loaded in other units     \u001b[39;49m\r\n\t\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\t\u001b[31m#   y: (int) y position                                                 \u001b[39;49m\r\n\t\u001b[31m#   terrain: (string) the name of the terrain                           \u001b[39;49m\r\n\t\u001b[31m#   unit: the unit on this terrain, if one                              \u001b[39;49m\r\n\t\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\t\u001b[31m#   variables: (dict) User-defined variables                            \u001b[39;49m\r\n\u001b[23;30H\u001b[7m2% L56\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m#   h: (int) height                                                             \u001b[39;49m\r\n\u001b[8P\u001b[3;3H\u001b[31m  cells: (list) exactly w*h cells                          \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[8P\u001b[4;3H\u001b[31m  teams: (list) the teams in\u001b[39;49m\u001b[8@\u001b[31m the map\u001b[39;49m\r\n\u001b[31m#   allies: (list) the teams that are allied in a list of lists of ints         \u001b[39;49m\r\n\u001b[31m#   variables: (dictionary) a dictionary of user-defined variables              \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, config):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = config[\u001b[32m\"w\"\u001b[39;49m], config[\u001b[32m\"h\"\u001b[39;49m]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[12;13H\u001b[33mrow\u001b[39;49m = []\u001b[K\u001b[13;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\r\n\t        row.append(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = config.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day = 0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\u001b[K\u001b[22;11H\u001b[31mLoad the teams first, since cells and units reference them.\u001b[39;49m\u001b[23;29H\u001b[7m 6% L37\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;3H\u001b[?25l\u001b[31mA grid is the arena upon which a battle takes place. The entire map should\u001b[39;49m\u001b[3;3H\u001b[31mbe self-contained. Players interact with the map by taking \"actions\".\u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m widgets, rules\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Grid is a game-agnostic representation of the world's entities. It        \u001b[39;49m\r\n\u001b[31m# provides an API to game rulesets to create, delete, and move entities         \u001b[39;49m\r\n\u001b[31m# around, but essentially has no functionality other than changing its          \u001b[39;49m\r\n\u001b[31m# configuration. The grid should be initialized with a configuration            \u001b[39;49m\r\n\u001b[31m# Dictionary containing the following keys and values.                          \u001b[39;49m\r\n\u001b[31m#   w: (int) width                                                              \u001b[39;49m\r\n\u001b[31m#   h: (int) height                                                             \u001b[39;49m\r\n\u001b[31m#   cells: (list) exactly w*h cells                                             \u001b[39;49m\r\n\u001b[31m#   teams: (list) the teams in the map                                          \u001b[39;49m\r\n\u001b[31m#   allies: (list) the teams that are allied in a list of lists of ints         \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  variables: (dictionary) a dictionary of user-defined vari\u001b[39;49m\u001b[8@\u001b[31mables   \u001b[39;49m\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[?25lBeginning of buffer\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u0007\u0007\u0007\u0007\n\n\u001b[K\u001b[22d\u0007\n\n\u001b[?25lC-x SPC is undefined\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[K\u001b[22d\u001b[?25lb\u001b[31m#   variables: (dictionary) a dictionary of user-defined variables\u001b[39;49m\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m#   variables: (dictionary) a dictionary of user-defined variables \u001b[39;49m\r\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\n        \u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\u001b[K\n    \u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\u001b[K\r\n        \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\t\b\b\u001b[4P\r\u001b[4@\t\u001b[31m          \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[23;4H\u001b[7mU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m    6% L39    (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[?25l\u001b[31m# A rules object handles all of the actual game play elements. The rules        \u001b[39;49m\r\n\u001b[31m# are what give meaning to the pieces in a Grid, and is controlled (usually)    \u001b[39;49m\r\n\u001b[31m# by a Controller that provides piecewise input.                                \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Constants sent to the controller after processing.                            \u001b[39;49m\r\n\u001b[33mCTRL_COORD\u001b[39;49m = 1\u001b[K\r\n\u001b[33mCTRL_MENU\u001b[39;49m = 2\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = 3\r\n\u001b[K\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(grid)\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[?25lBeginning of buffer\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9 \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[6;1H\u001b[1L\u001b[1;24r\u001b[6;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\n\u001b[?25l\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\u001b[23;34H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\b\u001b[?25l\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[6;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[6;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6d\b\b+--------+\u001b[7;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[8;6H|End Turn|\u001b[9;6H+--------+\u001b[23;8H\u001b[7d\bBack\u001b[8;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[7;6H..........\u001b[8;6H..........\u001b[9;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\bWait\u001b[10;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;5H........\u001b[11;5H........\u001b[12;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;5H........\u001b[10;5H........\u001b[11;5H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b+--------+\u001b[9;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[10;6H|End Turn|\u001b[11;6H+--------+\u001b[23;8H\u001b[9d\bBack\u001b[10;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b[10;7H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b[9d\bBack\u001b[10;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b\u001b[32m\u001b[40m..........\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[10;6H..........\u001b[11;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[9d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H.......\u001b[7;3H.....\u001b[8;4H..\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[10;6H|Wait  |\u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[23;8H\u001b[8d\b\b\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;6H........\u001b[11;6H........\u001b[12;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 75, in play\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 305, in handle_input\r\n    r = self.world.process(pos)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 105, in process\r\n    elif self.state == \"attacking\": return self.process_attacking(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/rules.py\", line 244, in process_attacking\r\n    a1 = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\r\nNameError: global name 'c1' is not defined\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[31m# A rules object handles all of the actual game play elements. The rules        \u001b[39;49m\r\n\u001b[A\n\u001b[31m# are what give meaning to the pieces in a Grid, and is controlled (usually)    \u001b[39;49m\r\n\u001b[A\n\u001b[31m# by a Controller that provides piecewise input.                                \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m widgets\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Constants sent to the controller after processing.                            \u001b[39;49m\r\n\u001b[A\n\u001b[33mCTRL_COORD\u001b[39;49m = 1\u001b[K\r\n\u001b[33mCTRL_MENU\u001b[39;49m = 2\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = 3\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[A\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mRules\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, grid):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(grid)\u001b[K\r\n\u001b[K\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L5     (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[6;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(grid)\u001b[K\r\n\u001b[K\u001b[4;57H\u001b[8P\r\u001b[8@\u001b[4;11H\u001b[31mThe history contains all actions for this player turn.\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\n        \u001b[31m# other                                                                 \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\u001b[K\u001b[15;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n        \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[23;29H\u001b[7m 5% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[10;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[13;14Hgrid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[16;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[22;14Hchoices = []\u001b[23;29H\u001b[7m11% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[3;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[7;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[9;5H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[10;14Hgrid = cp\u001b[K\u001b[11;14Haction = []\u001b[K\u001b[12;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[13;14Hchoices = []\u001b[K\u001b[16;12H\u001b[31mwe end the turn, we flush the history buffer and save a new\u001b[39;49m\r\n\t\u001b[31meckpoint.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\n\b\b\b = []\u001b[K\u001b[23;30H\u001b[7m9% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;7H\u001b[?25l\u001b[31mThis sets the new state and returns the appropriate code   \u001b[39;49m\u001b[8;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[10;14Hstate = new_state\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\n\t\b\b\u001b[31mThis processes input of two types: coordinates and strings.\u001b[39;49m\u001b[18;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[23;29H\u001b[7m25% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[4;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[5;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\u001b[8;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\u001b[9;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\r\n\u001b[K\u001b[13;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[16;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[20;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[21;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[22;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[23;29H\u001b[7m35% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[3;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[5;51H\u001b[4P\u001b[5;5H\u001b[4@\u001b[5;11H\u001b[31mIf no unit, check for terrain               \u001b[39;49m\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[15;58H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[23;29H\u001b[7m46% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[9;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[11;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[12;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\n\b\b\b\b\b\u001b[7m53% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[4;18Haction.append((x,y))\u001b[K\u001b[5;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\n\t    \u001b[33ma1\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[K\u001b[8;13H\u001b[33ma2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[9;5H        \u001b[33ma3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\u001b[K\u001b[10;5H        \u001b[33ma4\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[K\u001b[11;5H        \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[12;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[15;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\u001b[23;29H\u001b[7m61% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# State: main menu (expected, menu option)                                  \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[9;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[13;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[18;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[23;29H\u001b[7m70% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[7;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\u001b[9;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\u001b[10;13Hu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\n\t    a1 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x-1,y)\u001b[13;13Ha2 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x+1,y)\u001b[14;13Ha3 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y-1)\r\n\t    a4 = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y+1)\u001b[K\r\n\t    attackable = \u001b[35mFalse\u001b[39;49m\u001b[17;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a1 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a1.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x-1,y))\u001b[18;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a2 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a2.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x+1,y))\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a3 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a3.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y-1))\u001b[20;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a4 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a4.allied(u): \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((x,y+1))\u001b[K\r\n\u001b[K\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\n\b\b\b\b\b\b\u001b[7m6% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[4;14H\u001b[1m\u001b[36meturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\r\n\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[8;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[9;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[10;14Hnit.ready = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[12;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[20;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\u001b[K\u001b[23;29H\u001b[7m84% L210\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[5;13H\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\u001b[9;13H\u001b[33mstart_hp\u001b[39;49m = a.hp, d.hp\u001b[K\u001b[10;13H\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[11;18Hgrid.launch_attack((ox,oy),(x,y))\u001b[12;13H\u001b[33mend_hp\u001b[39;49m = a.hp, d.hp\u001b[K\r\n\n\t    \u001b[31m# Build the animation.                                              \u001b[39;49m\r\n\u001b[15;13H\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[16;13H\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[17;5H        \u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\u001b[K\u001b[18;5H        \u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)\r\n\t    \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = x,y\u001b[K\u001b[20;13H\u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = ox,oy\u001b[K\r\n\t    \u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[22;13H\u001b[33ma2.time\u001b[39;49m = t1+t2+50\n\b\b\u001b[7m90% L229\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[3;13H\u001b[33ma2.time\u001b[39;49m = t1+t2+50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\r\n\u001b[K\u001b[6;13H\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[7;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\r\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L248\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[4;13H\u001b[33mend_hp\u001b[39;49m = a.hp, d.hp\u001b[K\u001b[6;13H\u001b[31m# Build the animation.                                              \u001b[39;49m\r\n\u001b[7;13H\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[8;13H\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[9;13H\u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,c1,start_hp[0],end_hp[0],0)\u001b[10;13H\u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,c2,start_hp[1],end_hp[1],t1)\r\n\t    \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = x,y\u001b[12;13H\u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = ox,oy\u001b[K\u001b[13;13H\u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[14;13H\u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\u001b[17;13H\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[18;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\r\n\n\n\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[23;29H\u001b[7m93% L247\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[24;1H\u001b[?25lAuto-saving...\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;27H\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@c\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@c\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[10;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[10;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6d\b\b+--------+\u001b[7;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[8;6H|End Turn|\u001b[9;6H+--------+\u001b[23;8H\u001b[7d\bBack\u001b[8;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[7;6H..........\u001b[8;6H..........\u001b[9;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;5H........\u001b[10;5H........\u001b[11;5H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b+--------+\u001b[9;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[10;6H|End Turn|\u001b[11;6H+--------+\u001b[23;8H\u001b[9d\bBack\u001b[10;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b\u001b[32m\u001b[40m..........\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[10;6H..........\u001b[11;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[9d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b[32m\u001b[40m.\u001b[8d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[10;6H|Wait  |\u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[23;8H\u001b[8d\b\b\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;6H........\u001b[11;6H........\u001b[12;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d------+\r\u001b[7d\u001b[31m\u001b[40m100%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\r\u001b[8d------+\u001b[9;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[10d\b\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[11;5H|\u001b[34m\u001b[40m99%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m   |\u001b[12;5H+------+\u001b[23;8H\u001b[11d\b\u001b[34m\u001b[40m7\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m4\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m0\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\b\u001b[34m\u001b[40m85\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\b\u001b[34m\u001b[40m79\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[7d\u001b[31m\u001b[40m93%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[23;8H\r\u001b[7d\u001b[31m\u001b[40m85\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[7d\u001b[31m\u001b[40m76\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m0\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m8\u001b(B\u001b[0;1m\u001b[30m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m8\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[30m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m8\u001b[30m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[30m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m8\u001b[30m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[30m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m8\u001b[30m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[30m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m8\u001b[30m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n            \u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[A\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[K\r\n            \u001b[33mend_hp\u001b[39;49m = a.hp, d.hp\u001b[K\r\n\u001b[K\n            \u001b[31m# Build the animation.                                              \u001b[39;49m\r\n\u001b[A\n            \u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[K\r\n            \u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[K\r\n            \u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,d.team.color,start_hp[0],end_hp[0],0)\u001b[K\r\n            \u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,a.team.color,start_hp[1],end_hp[1],t1)\u001b[K\r\n            \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = x,y\u001b[K\r\n            \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = ox,oy\u001b[K\r\n            \u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[K\r\n            \u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\u001b[K\r\n\u001b[K\n            \u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   93% L245   (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[10;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[4;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[8;13H\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\u001b[K\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[K\u001b[10;14H, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\u001b[K\u001b[12;13H\u001b[33mstart_hp\u001b[39;49m = a.hp, d.hp\u001b[13;13H\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[15;13H\u001b[33mend_hp\u001b[39;49m = a.hp, d.hp\u001b[K\u001b[17;13H\u001b[31m# Build the animation.                                              \u001b[39;49m\r\n\u001b[18;13H\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[19;13H\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[20;13H\u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,d.team.color,start_hp[0],end_hp[0],0)\u001b[21;13H\u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,a.team.color,start_hp[1],end_hp[1],t1)\r\n\t    \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = x,y\u001b[23;29H\u001b[7m88% L236\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l.hp\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la.hp\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l.hp\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la.hp\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[15;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[15;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\b+--------+\u001b[10;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[11;6H|End Turn|\u001b[12;6H+--------+\u001b[23;8H\u001b[10d\bBack\u001b[11;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[9d\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[10;6H..........\u001b[11;6H..........\u001b[12;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\bWait\u001b[10;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;5H........\u001b[11;5H........\u001b[12;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+--------+\u001b[9;5H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[10;5H|End Turn|\u001b[11;5H+--------+\u001b[23;8H\u001b[8;5H\u001b[32m\u001b[40m..........\u001b[9;5H..........\u001b[10;5H..........\u001b[11;5H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\b.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;5H........\u001b[10;5H........\u001b[11;5H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b+--------+\u001b[9;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[10;6H|End Turn|\u001b[11;6H+--------+\u001b[23;8H\u001b[9d\bBack\u001b[10;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\b\u001b[32m\u001b[40m..........\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[10;6H..........\u001b[11;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[9d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b[32m\u001b[40m.\u001b[8d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[10;6H|Wait  |\u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[23;8H\u001b[8d\b\b\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;6H........\u001b[11;6H........\u001b[12;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d------+\r\u001b[7d\u001b[31m\u001b[40m100%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\r\u001b[8d------+\u001b[9;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[10d\b\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[11;5H|\u001b[34m\u001b[40m99%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m   |\u001b[12;5H+------+\u001b[23;8H\u001b[11d\b\u001b[34m\u001b[40m7\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m4\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m0\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\b\u001b[34m\u001b[40m85\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\b\u001b[34m\u001b[40m79\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m2\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[7d\u001b[31m\u001b[40m94%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[11;7H\u001b[34m\u001b[40m0\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[7d\u001b[31m\u001b[40m85\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[7d\u001b[31m\u001b[40m79\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m8\u001b[30m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[30m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m8\u001b[30m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[30m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n            \u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[K\r\n            \u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\u001b[K\n            \u001b[33mstart_hp\u001b[39;49m = d.hp, a.hp\u001b[K\r\n            \u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[A\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[K\r\n            \u001b[33mend_hp\u001b[39;49m = d.hp, a.hp\u001b[K\r\n\u001b[K\n            \u001b[31m# Build the animation.                                              \u001b[39;49m\r\n\u001b[A\n            \u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[K\r\n            \u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[K\r\n            \u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,d.team.color,start_hp[0],end_hp[0],0)\u001b[K\r\n            \u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,a.team.color,start_hp[1],end_hp[1],t1)\u001b[K\r\n            \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = x,y\u001b[K\r\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   88% L239   (Python) --------------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[15;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,a.team.color,start_hp[1],end_hp[1],t1)\r\n\t    \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = x,y\u001b[K\u001b[4;13H\u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = ox,oy\u001b[K\r\n\t    \u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[6;13H\u001b[33ma2.time\u001b[39;49m = t1+t2+50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\r\n\u001b[K\u001b[9;13H\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[10;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\r\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L245\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[K\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[4;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[8;13H\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[10;13H\u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[12;13H\u001b[33mstart_hp\u001b[39;49m = d.hp, a.hp\u001b[13;13H\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[15;13H\u001b[33mend_hp\u001b[39;49m = d.hp, a.hp\u001b[K\u001b[17;13H\u001b[31m# Build the animation.                                              \u001b[39;49m\r\n\u001b[18;13H\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[19;13H\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[20;13H\u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,d.team.color,start_hp[0],end_hp[0],0)\u001b[21;13H\u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,a.team.color,start_hp[1],end_hp[1],t1)\u001b[22;13H\u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = x,y\u001b[23;29H\u001b[7m88%\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[31m# A grid is the arena upon which a battle takes place. The entire map should    \u001b[39;49m\r\n\u001b[31m# be self-contained. Players interact with the map by taking \"actions\".         \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\r\n\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m widgets, rules\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\n\u001b[31m# The Grid is a game-agnostic representation of the world's entities. It        \u001b[39;49m\r\n\u001b[12P\u001b[C\u001b[31m provides an API to game rulesets to create, delete, and m\u001b[39;49m\u001b[12@\u001b[31move entities\u001b[39;49m\r\n\u001b[31m# around, but essentially has no functionality other than changing its          \u001b[39;49m\r\n\u001b[31m# configuration. The grid should be initialized with a configuration            \u001b[39;49m\r\n\u001b[31m# Dictionary containing the following keys and values.                          \u001b[39;49m\r\n\u001b[12P\u001b[C\u001b[C\u001b[31m  w: (int) width    \u001b[39;49m\u001b[12@\u001b[31m            \u001b[39;49m\r\n\u001b[31m#   h: (int) height                                                             \u001b[39;49m\r\n\u001b[31m#   cells: (list) exactly w*h cells                                             \u001b[39;49m\r\n\u001b[31m#   teams: (list) the teams in the map                                          \u001b[39;49m\r\n\u001b[31m#   allies: (list) the teams that are allied in a list of lists of ints         \u001b[39;49m\r\n\u001b[31m#   variables: (dictionary) a dictionary of user-defined variables              \u001b[39;49m\r\n\u001b[23;4H\u001b[7m-:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L21   Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;3H\u001b[?25l\u001b[31m  allies: (list) the teams that are allied in a list of lists of ints     \u001b[39;49m\u001b[3;3H\u001b[31m  variables: (dictionary) a dictionary of user-defined variables     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, config):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = config[\u001b[32m\"w\"\u001b[39;49m], config[\u001b[32m\"h\"\u001b[39;49m]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\r\n            \u001b[33mrow\u001b[39;49m = []\u001b[10;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\r\n\t\trow.append(\u001b[35mNone\u001b[39;49m)\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = config.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day = 0\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\u001b[K\u001b[19;62H\u001b[8P\r\u001b[8@\u001b[19;11H\u001b[31mLoad the teams first, since cells and units reference them.\u001b[39;49m\u001b[20;31H\u001b[8P\r\u001b[8@\u001b[20;11H\u001b[31mThen set up the alliances.  \u001b[39;49m\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\r\n            \u001b[33mthis\u001b[39;49m = Team( t[\u001b[32m\"name\"\u001b[39;49m], t[\u001b[32m\"color\"\u001b[39;49m] )\u001b[K\u001b[23;29H\u001b[7m 7%\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\u001b[?25l        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\r\n            \u001b[33mthis\u001b[39;49m = Team( t[\u001b[32m\"name\"\u001b[39;49m], t[\u001b[32m\"color\"\u001b[39;49m] )\u001b[K\r\n            \u001b[33mthis.variables\u001b[39;49m = t.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams.append(this)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[9;13H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\r\n\u001b[K\n\t\u001b[31m# Load the terrain cells. The units are embedded in these elements      \u001b[39;49m\r\n\t\u001b[31m# of the dictionary. Note that when units are loaded in other units     \u001b[39;49m\r\n\t\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\t\u001b[31m#   y: (int) y position                                                 \u001b[39;49m\r\n\t\u001b[31m#   terrain: (string) the name of the terrain                           \u001b[39;49m\r\n\t\u001b[31m#   unit: the unit on this terrain, if one                              \u001b[39;49m\r\n\t\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\u001b[19;11H\u001b[31m  variables: (dict) User-defined variables                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m config[\u001b[32m\"cells\"\u001b[39;49m]:\u001b[K\r\n\t    \u001b[33mthis\u001b[39;49m = Cell(c[\u001b[32m\"terrain\"\u001b[39;49m])\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\u001b[K\u001b[23;29H\u001b[7m13% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33mthis\u001b[39;49m = Cell(c[\u001b[32m\"terrain\"\u001b[39;49m])\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\u001b[K\u001b[4;30Hc\u001b[5;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"owner\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t        \u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c\r\n\t\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\u001b[9;21H\u001b[33mu\u001b[39;49m = Unit(unit[\u001b[32m\"type\"\u001b[39;49m],\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]])\u001b[10;21H\u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[K\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\u001b[K\r\n\t                _process_units(u)\u001b[K\r\n\t            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\t        \u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# Get the tile at x,y. Returns None if out of range.                        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[23;29H\u001b[7m21% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[4;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\r\n\u001b[K\u001b[7;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Return the actions that the given unit can take if it were                \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# at x,y.                                                                   \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mactions\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, x, y):\u001b[K\r\n\t\u001b[33macts\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m acts+[\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Back\"\u001b[39;49m]\u001b[19;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\t\b\b\u001b[31mif the tile is empty or does not exist. All of the positions\u001b[39;49m\u001b[21;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[23;30H\u001b[7m7% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m tile.unit:\u001b[7;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\u001b[K\u001b[8;5H    \u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\u001b[K\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[13;5H    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[K\u001b[14;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(a,b)\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[19;5H                _floodfill((a-1,b),r-1)\u001b[K\u001b[20;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[21;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[22;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[23;29H\u001b[7m32% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l                _floodfill((a,b-1),r-1)\u001b[K\u001b[3;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[4;5H    _floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[7;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\u001b[9;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[10;5H\u001b[4P\t\b\b\u001b[31mthrow exception if move is illegal. CHECK FIRST.     \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ox,oy)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# Launch an attack from the attack coordinates to the defend                \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# coordinates. Will throw exception if move is illegal.                     \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# CHECK FIRST.                                                              \u001b[39;49m\r\n\u001b[23;30H\u001b[7m8% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# coordinates. Will throw exception if move is illegal.                     \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# CHECK FIRST.                                                              \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlaunch_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, attacker, defender):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = attacker\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = defender\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(ax,ay).unit\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(dx,dy).unit\u001b[9;5H    atk_unit.attack(def_unit)\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp >= 0: \u001b[31m#and can counter         \u001b[39;49m\u001b[11;5H        def_unit.attack(atk_unit)\r\n\u001b[K\n\t\u001b[31m# Destroy dead units.                                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(dx,dy)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.remove_unit(ax,ay)\r\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\t\b\b\u001b[31mThis should be the ONLY WAY units are added to the game.  \u001b[39;49m\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\u001b[K\u001b[22;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\n\u001b[7m44% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\u001b[K\u001b[3;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\r\n\t\u001b[33munit.team\u001b[39;49m = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m#                                        \u001b[39;49m\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[17;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;29H\u001b[7m51% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n\t    \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[10;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, terrain):\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = terrain\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\".\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = \u001b[32m\"g\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[23;30H\u001b[7m5% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[5;5H\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# the unit's draw will be prioritized.                                      \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit:\u001b[K\n\b\b\b\bunit.draw(x, y, col)\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\b\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\r\n                \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\u001b[K\r\n            draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# This function draws the terrain without drawing the                       \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# unit. Put into its own function to avoid messing up                       \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# the \"drawable\" interface.                                                 \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw_terrain\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[K\r\n\t    \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\r\n\tdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\u001b[23;29H\u001b[7m60% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m\r\n\tdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\n\u001b[K\n\u001b[31m# Units are the pieces that move about the game board. Units belong to a        \u001b[39;49m\r\n\u001b[4P\u001b[7;4H\u001b[31meam and can be moved about by taking acti\u001b[39;49m\u001b[4@\u001b[31mons.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, team):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c = \u001b[32m\"@\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = team\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This function draws the unit at the desired location.                     \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\u001b[K\n\b\u001b[7m6% L210\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This function draws the unit at the desired location.                     \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\r\n\n        \u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n        \u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        \u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Build the animation for this unit based on values                     \u001b[39;49m\r\n\t\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\t\u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.c]\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp <= 90):\u001b[14;13Hframes.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\r\n\u001b[K\n\t\u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[K\n\u001b[C\u001b[7m70% L229\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m unit.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m unit.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\u001b[6;5H\u001b[4P\t\b\b\u001b[31m                                                     \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mattack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit):\u001b[K\r\n\tdamage = \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(30 * 0.01 * \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp)\u001b[K\r\n\tunit.hp -= damage\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit.hp < 0:\u001b[K\r\n\t    unit.hp = 0\u001b[K\r\n\u001b[K\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.active = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[23;30H\u001b[7m6% L248\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[C\u001b[C\u001b[31mcontrol back and forth between it. It doesn't usually need a\u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[17;14Hworld = rules.Rules(grid)\u001b[18;14Hw = w\u001b[K\n\b\b\b\b\bh = h\u001b[K\n\b\b\b\b\bcam = widgets.Camera(w,h,grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[23;29H\u001b[7m80% L267\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lAuto-saving...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\n\t\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\t\t\t\t\t\t\t\u001b[8P\r\u001b[8@\u001b[12;11H\u001b[31mdoes.                                                 \u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n            \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\u001b[16;5H            \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\u001b[K\u001b[23;30H\u001b[7m5% L286\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\u001b[7;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\t\u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\n\b\b\b\b\b\b\u001b[7m9% L305\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,cy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[8;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[K\u001b[9;13Hm.draw(mx+x-cx+2, my+y-cy)\u001b[K\r\n\u001b[K\n\t\u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\t\u001b[31m# expire.                                                               \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts:\u001b[K\u001b[14;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = a\r\n\t    \u001b[33mm.time\u001b[39;49m -= 1\u001b[K\r\n\t    m.draw(mx+x-cx, my+y-cy)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = [a \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a[0].time > 0]\r\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L324\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u0007\u001b[24d\u001b[K\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\u001b[3;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\n\t\u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.alerts\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[11;5H\u001b[4P\t\b\u001b[31mraw the grid to the terminal using the gfx library. Specify\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[12;5H\u001b[4P\t\b\b\u001b[31mx,y and w,h of the viewport in the terminal, and the cx,cy of\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[13;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\r\n\t\u001b[33mcx\u001b[39;49m,cy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[19;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[20;13Hm.draw(mx+x-cx+2, my+y-cy)\r\n\n\t\u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\u001b[23;29H\u001b[7m92% L323\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\r\n\t\t\bpos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\u001b[7;11H\u001b[31mIf the rules were processed, figure out if we need to display\u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[11;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\u001b[12;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\u001b[14;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\n\t\u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.alerts\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[22;5H\u001b[4P\t\b\u001b[31mraw the grid to the terminal using the gfx library. Specify\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[23;29H\u001b[7m89% L312\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,cy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[11;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[K\u001b[12;13Hm.draw(mx+x-cx+2, my+y-cy)\u001b[K\r\n\u001b[K\n\t\u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\t\u001b[31m# expire.                                                               \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts:\u001b[K\u001b[17;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = a\r\n\t    \u001b[33mm.time\u001b[39;49m -= 1\u001b[K\r\n\t    m.draw(mx+x-cx, my+y-cy)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = [a \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a[0].time > 0]\r\n\n\u001b[K\u001b[23;29H\u001b[7mBot L321\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[3;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\u001b[4;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\u001b[6;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\n\t\u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.alerts\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[14;5H\u001b[4P\t\b\u001b[31mraw the grid to the terminal using the gfx library. Specify\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[15;5H\u001b[4P\t\b\b\u001b[31mx,y and w,h of the viewport in the terminal, and the cx,cy of\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[16;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\r\n\t\u001b[33mcx\u001b[39;49m,cy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[22;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\n\b\b\b\u001b[7m91% L320\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[11;41H\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[19;12H\u001b[?25l\u001b[33mcy\u001b[39;49m\u001b[11;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[11;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[11;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6d\b\b+--------+\u001b[7;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[8;6H|End Turn|\u001b[9;6H+--------+\u001b[23;8H\u001b[7d\bBack\u001b[8;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[7;6H..........\u001b[8;6H..........\u001b[9;6H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+------+\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[10;5H|Cancel|\u001b[11;5H+------+\u001b[12;4H\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m........\u001b[9;5H........\u001b[10;5H........\u001b[11;5H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H+--------+\u001b[8;5H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[9;5H|End Turn|\u001b[10;5H+--------+\u001b[23;8H\u001b[8d\b\bBack\u001b[9;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m..........\u001b[8;5H..........\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m..........\u001b[10;5H..........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40m@\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b[4d\b\b...\u001b[5;3H.....\u001b[6;2H...\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[7;3H.....\u001b[8;4H...\u001b[9d\b\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b[32m\u001b[40m.\u001b[8d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[10;6H|Wait  |\u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[23;8H\u001b[8d\b\b\u001b[32m\u001b[40m........\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40m@\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[10;6H........\u001b[11;6H........\u001b[12;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m@\u001b(B\u001b[0;1m\u001b[31m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d------+\r\u001b[7d\u001b[31m\u001b[40m100%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\r\u001b[8d------+\u001b[9;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m@\u001b[10d\b\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[11;5H|\u001b[34m\u001b[40m99%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m   |\u001b[12;5H+------+\u001b[23;8H\u001b[11d\b\u001b[34m\u001b[40m8\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m7\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m6\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m5\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m4\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m3\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m2\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m1\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m0\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\b\u001b[34m\u001b[40m89\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m8\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m7\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m6\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m5\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m4\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m3\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m2\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m1\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m0\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\b\u001b[34m\u001b[40m79\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m8\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m7\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m6\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m5\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m4\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m3\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m2\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m1\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[34m\u001b[40m0\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[7d\u001b[31m\u001b[40m99%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[23;8H\u001b[7;2H\u001b[31m\u001b[40m8\u001b[9;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m8\u001b(B\u001b[0;1m\u001b[30m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m7\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m6\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m5\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m4\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m3\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m2\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m1\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m0\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[7d\u001b[31m\u001b[40m89\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m7\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m6\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m5\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m4\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m3\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m2\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m1\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;2H\u001b[31m\u001b[40m0\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[7d\u001b[31m\u001b[40m79\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m8\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m@\u001b[30m\u001b[40m@\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b[32m\u001b[40m......\r\u001b[7d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m......\r\u001b[8d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m......\u001b[10;5H........\u001b[11;5H........\u001b[12;5H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;1m\u001b[34m\u001b[40m8\u001b[30m\u001b[40m8\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_COORD:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_MENU:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == rules.CTRL_UNDO:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n        \u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pop_alerts()\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n            \u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   91% L319  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[11;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n\t    \u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[K\r\n\t    m.draw(mx+x-cx+2, my+y-cy)\u001b[14;67H\u001b[4P\u001b[14;5H\u001b[4@\u001b[14;12H\u001b[31misplay all alerts on the screen until their timers         \u001b[39;49m\n\b\b\b\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mexpire.                                                      \u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts:\u001b[K\u001b[17;5H        \u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = a\u001b[K\r\n\t    \u001b[33mm.time\u001b[39;49m -= 1\u001b[K\r\n\t    m.draw(mx+x-cx, my+y-cy)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = [a \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a[0].time > 0]\r\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L331\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19d\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\b\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\n\u001b[?25lEnd of buffer\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u0007\u0007\u0007\u0007\n\n\n\u001b[K\u001b[21d\n\n\n\u001b[?25l\u001b[34mSwitch to buffer (default rules.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[5;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\r\n\t    \u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\r\n\t    \u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\u001b[12;13H\u001b[33mstart_hp\u001b[39;49m = d.hp, a.hp\u001b[K\u001b[13;13H\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[K\r\n\t    \u001b[33mend_hp\u001b[39;49m = d.hp, a.hp\u001b[K\r\n\u001b[K\u001b[17;13H\u001b[31m# Build the animation.                                              \u001b[39;49m\r\n\u001b[18;13H\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[19;13H\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\r\n\t    \u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,d.team.color,start_hp[0],end_hp[0],0)\u001b[21;13H\u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,a.team.color,start_hp[1],end_hp[1],t1)\u001b[22;13H\u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = x,y\u001b[23;4H\u001b[7mU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   88% L245   (Python) -----------\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[4;13H\u001b[33mend_hp\u001b[39;49m = d.hp, a.hp\u001b[K\r\n\u001b[K\u001b[6;13H\u001b[31m# Build the animation.                                              \u001b[39;49m\r\n\t    \u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[8;13H\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[9;13H\u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,d.team.color,start_hp[0],end_hp[0],0)\u001b[10;14H\u001b[33m2\u001b[39;49m = widgets.HPAlert(6,1,a.team.color,start_hp[1],end_hp[1],t1)\u001b[11;13H\u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = x,y\u001b[12;13H\u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = ox,oy\u001b[K\u001b[13;13H\u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[K\u001b[14;13H\u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[K\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\u001b[17;13H\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[18;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;29H\u001b[7m93% L247\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[K\u001b[3;13H\u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[K\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\u001b[6;13H\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[7;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\r\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\n\n\n\u001b[K\u001b[23;29H\u001b[7mBot L258\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.launch_attack((ox,oy),(x,y))\u001b[4;13H\u001b[33mend_hp\u001b[39;49m = d.hp, a.hp\u001b[K\u001b[6;13H\u001b[31m# Build the animation.                                              \u001b[39;49m\r\n\u001b[7;13H\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[8;13H\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[9;13H\u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,d.team.color,start_hp[0],end_hp[0],0)\u001b[10;13H\u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,a.team.color,start_hp[1],end_hp[1],t1)\r\n\t    \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = x,y\u001b[12;13H\u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = ox,oy\u001b[K\u001b[13;13H\u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[14;13H\u001b[33ma2.time\u001b[39;49m = t1+t2+50\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\u001b[17;13H\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[18;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\r\n\n\n\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[23;29H\u001b[7m93% L247\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;13H\u001b[?25l\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\r\n\u001b[K\n\n\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mrules.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;28H\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\u001b[23;29H\u001b[7m93% L252\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/rules.py...\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/rules.py\u001b[K\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[17d\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgrid.py\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\n\u001b[K\nSo far, so good. To summarize what has been done up until now:\u001b[5;5HWe have abstracted away from having rules in our controller. The entire\u001b[6;5Hpurpose of the controller is to send menu selections and positions to the\u001b[K\u001b[7;5Hrules implementation.\u001b[K\r\n\u001b[K\nWe don't keep a full history, but it's now (supposedly) possible to undo\u001b[K\r\nactions. However, there is now a problem. We have no idea how to tell the\u001b[K\r\ncontroller to render alerts (like our combat animation).\r\n\u001b[K\nI suppose one way to do this is to store the alerts in the rules and then\r\nhave the controller take them out in order to render them. The problem being,\r\n\u001b[K\n... well... the problem being that the rules don't know the best place on the\r\nscreen to render them. I suppose the rules could provide a suggestion...\r\nor maybe do it based on the location of the camera cursor. Let's try that.\r\n\n\n\n\u001b[K\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L83    (Lisp Interaction) \u001b[0m\u001b[39;49m\u001b[27m\u001b[18;75H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l(No files need saving)\u001b[18;75H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[K\u001b[20d\u001b[K\u001b[23;29H\u001b[?25l\u001b[7m79% L84\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[23;30H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lj\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;60H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[?25l\u001b[7mBot L88\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m90\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l2\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                      \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[14;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[14;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l3\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[15;6H\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\b\b\u001b[K\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;29H\u001b[?25l\u001b[7m82% L94\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\b\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;72H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[K\b\u001b[K\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[23;29H\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\t\b\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lz\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\n\n\n\b\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mthe\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\r\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;45H\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;68H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[?25l\u001b[7mBot L99\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m100\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lW\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lW\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[13;80H\u001b[?25l\\\r\ns\n\b\u001b[K\u001b[A\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;80H\u001b[K\r\n\u001b[K\u001b[22d\u001b[K\u001b[13;80H\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l!\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;29H\u001b[?25l\u001b[7m87% L102\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mFile to save in: \u001b[39;49m~/Documents/open-tactics/\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l7\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25lWrote /home/isharacomix/day7\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;33H\u001b[?25l\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[23;6H\u001b[7m----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mday7     \u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[16d\u001b[24d\u001b[?25l(No files need saving)\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ git co\b\u001b[K\b\u001b[Kadd -A.\b\u001b[K .\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ git commit\r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?12l\u001b[?25h\u001b[?1h\u001b=\u001b[?1h\u001b=\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b(B\u001b[m\u001b[H\u001b[2J\u001b(B\u001b[0;7m  GNU nano 2.2.6           File: .git/COMMIT_EDITMSG                            \u001b[4;1H\u001b(B\u001b[m# Please enter the commit message for your changes. Lines starting\r\u001b[5d# with '#' will be ignored, and an empty message aborts the commit.\r\u001b[6d# On branch master\r\u001b[7d# Changes to be committed:\r\u001b[8d#   (use \"git reset HEAD <file>...\" to unstage)\r\u001b[9d#\u001b[10d\b#\u001b[9Gmodified:   code/core/game.py\r\u001b[11d#\u001b[9Gmodified:   code/core/grid.py\r\u001b[12d#\u001b[9Gnew file:   code/core/rules.py\r\u001b[13d#\u001b[22;32H\u001b(B\u001b[0;7m[ Read 11 lines ]\r\u001b[23d^G\u001b(B\u001b[m Get Help  \u001b(B\u001b[0;7m^O\u001b(B\u001b[m WriteOut  \u001b(B\u001b[0;7m^R\u001b(B\u001b[m Read File \u001b(B\u001b[0;7m^Y\u001b(B\u001b[m Prev Page \u001b(B\u001b[0;7m^K\u001b(B\u001b[m Cut Text  \u001b(B\u001b[0;7m^C\u001b(B\u001b[m Cur Pos\r\u001b[24d\u001b(B\u001b[0;7m^X\u001b(B\u001b[m Exit\u001b[14G\u001b(B\u001b[0;7m^J\u001b(B\u001b[m Justify   \u001b(B\u001b[0;7m^W\u001b(B\u001b[m Where Is  \u001b(B\u001b[0;7m^V\u001b(B\u001b[m Next Page \u001b(B\u001b[0;7m^U\u001b(B\u001b[m UnCut Text\u001b(B\u001b[0;7m^T\u001b(B\u001b[m To Spell\r\u001b[3d\u001b[2;21r\u001b[2;1H\u001bM\u001b[1;24r\u001b[1;71H\u001b(B\u001b[0;7mModified\r\u001b[4d\u001b(B\u001b[m\u001b[2;21r\u001b[2;1H\u001bM\u001b[1;24r\u001b[5;1H\u001b[A\u001b[A\u001b[2;21r\u001b[21;1H\n\u001b[1;24r\u001b[3;1HCrated \b\b \b\b \b\b \b\b \beated Ru\r\u001b[22d\u001b[K\u001b[3;11Hles ssytem\b \b\b \b\b \b\b \b\b \bystme.\b \b\b \b\b \be,\u001b7\u001b[4;22r\u001b8\r\u001b[4d\u001bM\u001b[1;24r\u001b[4;1H\u001b[4;22r\u001b[22;1H\n\u001b[1;24r\u001b[3;21H\b \bm\u001b7\u001b[4;22r\u001b8\r\u001b[4d\u001bM\u001b[1;24r\u001b[4;1H * REn\b \b\b \benamed gridview to controller\u001b7\u001b[5;22r\u001b8\r\u001b[5d\u001bM\u001b[1;24r\u001b[5;1H  \b( \b\r\u001b[K * Controller is responsible for sending pieces o inf\b \b\b \b\b \b\bf infoi\b \brmation to u\b \btu\b \b\b \brules.\u001b7\u001b[6;22r\u001b8\r\u001b[6d\u001bM\u001b[1;24r\u001b[6;1H ** Ru\b \b\b \b\b\b \b Rules creates alerts that controller has to fetch.\r\u001b[22d\u001b(B\u001b[0;7mSave modified buffer (ANSWERING \"No\" WILL DESTROY CHANGES) ?                    \u001b[23;1H Y\u001b(B\u001b[m Yes\u001b[K\r\u001b[24d\u001b(B\u001b[0;7m N\u001b(B\u001b[m No  \u001b[14G   \u001b(B\u001b[0;7m^C\u001b(B\u001b[m Cancel\u001b[K\u001b[22;62H\r\u001b(B\u001b[0;7mFile Name to Write: .git/COMMIT_EDITMSG                     \r\u001b[23d^G\u001b(B\u001b[m Get Help\u001b[23;21H\u001b(B\u001b[0;7mM-D\u001b(B\u001b[m DOS Format\u001b[41G\u001b(B\u001b[0;7mM-A\u001b(B\u001b[m Append\u001b[23;61H\u001b(B\u001b[0;7mM-B\u001b(B\u001b[m Backup File\r\u001b[24d\u001b(B\u001b[0;7m^C\u001b(B\u001b[m Cancel\u001b[17G    \u001b(B\u001b[0;7mM-M\u001b(B\u001b[m Mac Format\u001b[41G\u001b(B\u001b[0;7mM-P\u001b(B\u001b[m Prepend\u001b[22;40H\u001b(B\u001b[0;7mg\u001b(B\u001b[m\b\u001b(B\u001b[0;7m \b\u001b(B\u001b[m\r\u001b[23d\u001b[39;49m\u001b(B\u001b[m\u001b[J\u001b[1;71H\u001b(B\u001b[0;7m        \u001b[22;31H\u001b(B\u001b[m\u001b[1K \u001b(B\u001b[0;7m[ Wrote 15 lines ]\u001b(B\u001b[m\u001b[K\u001b[24;80H\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>[master f635377] Created Rules system  * Renamed gridview to controller  * Controller is responsible for sending pieces of information to rules.  * Rules creates alerts that controller has to fetch.\r\n 3 files changed, 286 insertions(+), 85 deletions(-)\r\n create mode 100644 code/core/rules.py\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ git push\r\nCounting objects: 12, done.\r\nDelta compression using up to 2 threads.\r\nCompressing objects:  14% (1/7)   \rCompressing objects:  28% (2/7)   \rCompressing objects:  42% (3/7)   \rCompressing objects:  57% (4/7)   \rCompressing objects:  71% (5/7)   \rCompressing objects:  85% (6/7)   \rCompressing objects: 100% (7/7)   \rCompressing objects: 100% (7/7), done.\r\nWriting objects:  14% (1/7)   \rWriting objects:  28% (2/7)   \rWriting objects:  42% (3/7)   \rWriting objects:  57% (4/7)   \rWriting objects:  71% (5/7)   \rWriting objects:  85% (6/7)   \rWriting objects: 100% (7/7)   \rWriting objects: 100% (7/7), 3.35 KiB | 0 bytes/s, done.\r\nTotal 7 (delta 3), reused 0 (delta 0)\r\nTo git@github.com:isharacomix/open-tactics\r\n   ea36fbc..f635377  master -> master\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ exit\r\n\nScript done on Wed 08 Jan 2014 11:57:48 PM EST\n","shell":"/bin/bash","xdg_current_desktop":"XFCE","timing":"0.344890 50\n0.266052 1\n1.069280 4\n0.439933 1\n0.119825 1\n0.087653 1\n0.056361 1\n0.103801 1\n0.112093 1\n0.136127 1\n0.055904 7\n0.117914 1\n0.762465 1\n0.023989 11\n0.100928 2\n0.170596 96\n0.002176 1\n4.318233 1\n0.111755 2\n0.473261 89\n0.004571 96\n0.002501 1\n1.695685 1\n0.104221 1\n0.079839 1\n0.095926 1\n0.064292 2\n0.457329 24\n0.014780 7\n0.038704 8\n0.000038 36\n0.000028 24\n0.000432 7\n0.001764 188\n0.008105 63\n0.008256 43\n0.001871 87\n0.000980 43\n0.002218 73\n0.000826 57\n0.003860 106\n0.026667 124\n0.003342 68\n0.000031 276\n0.000314 11\n0.002021 55\n0.000032 104\n0.000655 43\n0.002055 87\n0.000449 5\n0.031322 123\n0.002145 68\n0.000032 266\n0.000341 103\n0.003760 35\n0.000032 188\n0.016548 918\n0.000031 59\n0.000012 528\n0.000232 12\n0.339201 102\n0.306428 29\n0.000036 565\n0.296258 64\n1.494998 28\n0.214985 3\n0.071835 28\n0.160034 28\n0.112183 28\n0.031896 28\n0.263991 1\n0.080055 28\n0.239981 3\n0.103980 28\n0.112087 28\n0.119983 28\n0.031977 28\n0.200065 28\n0.031860 28\n0.176396 3\n0.047561 28\n0.208352 28\n0.031966 28\n0.055882 28\n0.183961 3\n0.088113 28\n0.143706 28\n0.128374 28\n0.096202 28\n0.151795 28\n0.048249 28\n0.303774 3\n0.080053 28\n0.231965 2\n0.064247 28\n0.135116 7\n0.384908 1\n0.127616 8\n0.143780 1\n0.776015 3\n0.496366 28\n0.208093 28\n0.183963 63\n1.024062 63\n0.144234 63\n0.128604 64\n0.135115 63\n0.416207 63\n0.119082 28\n0.384359 28\n0.344231 28\n0.151756 3\n0.064184 28\n0.175986 28\n0.056064 28\n0.127697 28\n0.111935 28\n0.071938 28\n0.104194 28\n0.144222 28\n0.039838 28\n0.111855 3\n0.104170 28\n0.048084 28\n0.111783 28\n0.031935 3\n0.088227 28\n0.168131 28\n0.167949 3\n0.087634 28\n0.128141 28\n0.320231 28\n0.088015 28\n0.103812 28\n0.031738 3\n0.080091 28\n0.232417 28\n0.063731 28\n0.144025 2\n0.064184 28\n0.192004 28\n0.191811 28\n0.015673 28\n0.096338 3\n0.111897 28\n0.096650 28\n0.079734 28\n0.175574 28\n0.040190 28\n0.095845 28\n0.072166 4\n0.303972 4\n0.120201 4\n0.127579 4\n0.128396 28\n0.047793 28\n0.048154 28\n0.152190 28\n0.023826 28\n0.160441 28\n0.095192 28\n0.168364 3\n0.055786 28\n0.056308 28\n0.088081 28\n0.047434 3\n0.120089 28\n0.088443 28\n0.079851 28\n0.087845 28\n0.096178 2\n0.024021 28\n0.087793 3\n0.079845 28\n0.136078 28\n0.080035 28\n0.168263 28\n0.071559 3\n0.096416 28\n0.159860 28\n0.048046 28\n0.152957 28\n0.047021 28\n0.079698 28\n0.040328 28\n0.112010 3\n0.095766 28\n0.128228 28\n0.072288 28\n0.127566 63\n0.272594 28\n0.175675 28\n0.143879 28\n0.136007 28\n0.080088 28\n0.144044 3\n0.071575 28\n0.048149 28\n0.087780 3\n0.040459 28\n0.231973 3\n0.943975 28\n0.088064 28\n0.085237 28\n0.130511 28\n0.144088 28\n0.103904 28\n0.152190 3\n0.111724 1\n0.496174 4\n0.122706 28\n0.069236 28\n0.064017 3\n0.120121 28\n0.144140 28\n0.135918 28\n0.095711 2\n0.104079 28\n0.071869 28\n0.128430 3\n0.087750 28\n0.495909 28\n0.384374 28\n0.071970 28\n0.079837 2\n0.071940 28\n0.096093 28\n0.280080 28\n0.111752 28\n0.111861 28\n0.064259 28\n0.023812 3\n0.144572 28\n0.063404 28\n0.240236 28\n0.151989 28\n0.095896 28\n0.047866 3\n0.144572 28\n0.048466 28\n0.103022 28\n0.056356 28\n0.104940 28\n0.119127 28\n0.039756 28\n0.095852 3\n0.104133 28\n0.087739 28\n0.080010 28\n0.112725 28\n0.095827 3\n0.063945 28\n0.479740 28\n0.032632 3\n0.151169 28\n0.160481 28\n0.127806 2\n0.360151 28\n0.111700 28\n0.152330 28\n0.263545 3\n3.496195 28\n0.142468 28\n0.145689 3\n0.097372 28\n0.094347 28\n0.112281 28\n0.152023 28\n0.079848 28\n0.072078 28\n0.151965 4\n0.360048 4\n0.119935 4\n0.144001 28\n0.151970 28\n0.112143 28\n0.039723 28\n0.071802 64\n0.160768 28\n0.103588 28\n0.095793 28\n0.080197 3\n0.111821 28\n0.152700 28\n0.031604 28\n0.047996 28\n0.063679 3\n0.112324 28\n0.039791 28\n0.047741 28\n0.087857 28\n0.080490 3\n0.111663 28\n0.144543 28\n0.063875 3\n0.047635 28\n0.064175 3\n0.103948 28\n0.064194 28\n0.128320 28\n0.111637 2\n0.103935 28\n0.143913 28\n0.192118 28\n0.072042 3\n0.055751 28\n0.088217 28\n0.055919 3\n0.095782 28\n0.072103 28\n0.088058 28\n0.111999 28\n0.079976 28\n0.137213 28\n0.151193 28\n0.063881 3\n0.135948 28\n0.088009 28\n0.064522 28\n0.159617 28\n0.031865 28\n0.064047 3\n0.096051 28\n0.039958 28\n0.104003 28\n0.071519 1\n0.104274 28\n0.055988 28\n0.128200 28\n0.064112 28\n0.119602 28\n0.071755 28\n0.120361 2\n0.087895 28\n0.015820 28\n0.120493 28\n0.087803 3\n0.160349 28\n0.111938 28\n0.152110 4\n0.191786 8\n0.098287 28\n0.189680 28\n0.039830 28\n0.048008 28\n0.154314 28\n0.118000 28\n0.048673 3\n0.103048 28\n0.127989 28\n0.104255 3\n0.064831 28\n0.126868 28\n0.112004 1\n0.103866 28\n0.112221 28\n0.087764 3\n0.112504 28\n0.399752 28\n0.087859 28\n0.143848 65\n0.257082 28\n0.119278 28\n0.191845 28\n0.008072 28\n0.127913 3\n0.095974 28\n0.112031 28\n0.047959 1\n0.048292 28\n0.055655 28\n0.112372 28\n0.063704 3\n0.136155 28\n0.127948 28\n0.111895 28\n0.128128 28\n0.096087 28\n0.087773 28\n0.120193 3\n0.063819 28\n0.071887 3\n0.104796 1\n0.647332 28\n0.184067 3\n0.095725 28\n0.120617 28\n0.183546 28\n0.136276 3\n0.064045 28\n0.152258 28\n0.063833 28\n0.095649 28\n0.104078 2\n0.079927 28\n0.079982 28\n0.040322 3\n0.055882 28\n0.264162 28\n0.183929 28\n0.183823 28\n0.120214 2\n0.023789 28\n0.055930 28\n0.160063 28\n0.031757 28\n0.184085 28\n0.047839 3\n0.184365 28\n0.103579 28\n0.112310 28\n0.047985 28\n0.144027 28\n0.135972 28\n0.032221 28\n0.039697 3\n0.136285 28\n0.055897 28\n0.055390 28\n0.176603 28\n0.288582 4\n0.063238 4\n0.128451 28\n0.112705 28\n0.014776 28\n0.168295 3\n0.104027 28\n0.055897 28\n0.112066 3\n0.063563 28\n0.096465 28\n0.111836 3\n0.072037 28\n0.079943 28\n0.103804 28\n0.576147 28\n0.112369 3\n0.112130 28\n0.863818 28\n0.079721 28\n0.048187 28\n0.183872 64\n0.640831 28\n0.183307 28\n0.079838 28\n0.128030 28\n0.064039 28\n0.143997 28\n0.039868 28\n0.192117 28\n0.152229 28\n0.119858 28\n0.055915 28\n0.040215 28\n0.199985 64\n0.248547 64\n0.119695 64\n0.143950 64\n0.120024 64\n0.120106 64\n0.264932 64\n0.110200 64\n0.248332 28\n0.528256 28\n0.183500 28\n0.280101 3\n0.127823 28\n0.136038 28\n0.248464 28\n0.091033 28\n0.132862 3\n0.103587 28\n0.104400 28\n0.071699 28\n0.048020 28\n0.048081 28\n0.280132 2\n0.135902 28\n0.112255 28\n0.047593 3\n0.872435 28\n0.167631 28\n0.015876 28\n0.120332 28\n0.039901 28\n0.144244 28\n0.071344 4\n0.432308 4\n0.112269 4\n0.127748 4\n0.103875 28\n0.256107 28\n0.048151 28\n0.047538 28\n0.120317 28\n0.192890 3\n0.095316 28\n0.144090 28\n0.039578 3\n0.072172 28\n0.152036 28\n0.096662 28\n0.047173 28\n0.176893 28\n0.167526 28\n0.079530 28\n0.064149 28\n0.079878 3\n0.128161 28\n0.128001 28\n0.127898 28\n0.063818 3\n0.128430 28\n0.223848 28\n0.127898 28\n0.248449 3\n0.248010 28\n0.127787 28\n0.103785 28\n0.088368 3\n0.071747 28\n0.143962 28\n0.072261 28\n0.511881 28\n0.096050 28\n0.143949 28\n0.112060 28\n0.215882 3\n0.071921 28\n0.056096 8\n0.623989 28\n0.544124 28\n0.079843 28\n0.127941 28\n0.103999 28\n0.136118 28\n0.071803 28\n0.120136 3\n0.136259 28\n0.495998 28\n0.127870 28\n0.095875 28\n0.167875 28\n0.047999 1\n0.168514 28\n0.631967 28\n0.063674 28\n0.239876 99\n0.272491 28\n0.079560 28\n0.160104 28\n0.055966 28\n0.039584 28\n0.200608 3\n0.056329 28\n0.119553 28\n0.071961 28\n0.079871 3\n0.104336 28\n0.055813 28\n0.120125 28\n0.103867 28\n0.087932 28\n0.112236 1\n0.071783 28\n0.048092 3\n0.152918 28\n0.095090 28\n0.159860 4\n0.376418 8\n0.119869 1\n0.495907 28\n0.208150 3\n0.039993 28\n0.143764 28\n0.119702 3\n0.168325 28\n0.152327 28\n0.015956 4\n0.375913 8\n0.111889 28\n0.047932 28\n0.047609 28\n0.080442 3\n0.143756 28\n0.192203 28\n0.071772 28\n0.136280 28\n0.111874 28\n0.240105 28\n0.119780 3\n5.944426 28\n0.319565 28\n0.151919 28\n0.168357 28\n0.031828 28\n0.071966 28\n0.264166 1\n0.072582 28\n0.039201 28\n0.032392 3\n0.119734 28\n0.087937 28\n0.128109 3\n0.103706 28\n0.080045 8\n0.536449 28\n0.960134 28\n0.135717 28\n0.104142 3\n0.072167 28\n0.151727 28\n0.055572 3\n0.072193 28\n0.097027 28\n0.062847 28\n0.136121 3\n0.063963 28\n0.136066 28\n0.056088 28\n0.296862 28\n0.143096 28\n0.136227 28\n0.031844 28\n0.039745 3\n0.128272 28\n0.144065 28\n0.095894 28\n0.063743 28\n0.104227 4\n0.328681 28\n0.215462 28\n0.111926 28\n0.095840 28\n0.136266 28\n0.031832 28\n0.047520 28\n0.176645 99\n0.096386 28\n0.191425 28\n0.082546 3\n0.077756 28\n0.175560 28\n0.208204 28\n0.072007 28\n0.104070 1\n0.064121 28\n0.311628 6\n0.296250 28\n0.112442 28\n0.239322 28\n0.015600 28\n0.040009 4\n0.376454 4\n0.128039 4\n0.120092 28\n0.024409 28\n0.063365 28\n0.176175 28\n0.136147 28\n0.095850 28\n0.047957 1\n0.208131 1\n0.295720 28\n0.440096 3\n0.136066 28\n0.448077 28\n0.096268 28\n0.079461 3\n0.120176 28\n0.103999 28\n0.088043 28\n0.183939 28\n0.071842 3\n0.136047 28\n0.096351 28\n0.212961 28\n0.074731 28\n0.167945 28\n0.008199 28\n0.175758 28\n0.248129 4\n0.256074 4\n0.096190 28\n0.263903 99\n0.336562 99\n0.120602 105\n0.127016 99\n0.113099 64\n0.433688 64\n0.084687 28\n0.304159 28\n0.184125 28\n0.120097 28\n0.087679 28\n0.103988 3\n0.087811 28\n0.136372 28\n0.119982 28\n0.120399 3\n0.175675 1\n0.487774 28\n0.208151 3\n0.047958 28\n0.072135 28\n0.063850 3\n0.103954 28\n0.184247 28\n0.279964 28\n0.071986 28\n0.159700 3\n0.056458 28\n0.087577 28\n0.080246 28\n0.095937 2\n0.103989 28\n0.103699 28\n0.096765 28\n0.151793 28\n0.096393 28\n0.127441 28\n0.111663 28\n0.080170 28\n0.023660 28\n0.080379 3\n0.087963 28\n0.184047 28\n0.048051 28\n0.047835 28\n0.120073 28\n0.119955 28\n0.063861 28\n0.200422 28\n0.119995 28\n0.135778 28\n0.080311 28\n0.159667 28\n0.096022 28\n0.056219 28\n0.056007 99\n0.328233 25\n0.103889 74\n0.000079 65\n0.119925 3\n0.407800 3\n0.136027 28\n0.496131 28\n0.191543 28\n0.104310 28\n0.055825 28\n0.248542 1\n0.087280 28\n0.544105 3\n0.176713 28\n0.095448 28\n0.031761 28\n0.136017 28\n0.120629 28\n1.071714 1\n0.063982 28\n0.231950 28\n0.215976 4\n0.343842 6\n0.096015 28\n0.031856 28\n0.176455 28\n0.047782 28\n0.120238 3\n0.087715 28\n0.103908 28\n0.200335 1\n0.056563 28\n0.095224 28\n0.167980 28\n0.056174 28\n0.088032 28\n0.175708 28\n0.032151 28\n0.031997 28\n0.048004 3\n0.135986 28\n0.031685 28\n0.192286 28\n0.056027 3\n0.136092 28\n0.136169 28\n0.055885 28\n0.215870 28\n0.055779 4\n0.296098 4\n0.120102 28\n0.048340 28\n0.095768 28\n0.048376 28\n0.191493 28\n0.071897 28\n0.159867 28\n0.087829 28\n0.056180 1\n0.072407 28\n0.128082 28\n0.103717 28\n0.135754 28\n0.256124 28\n0.064055 28\n0.032058 28\n0.184315 28\n0.167764 28\n0.007754 28\n0.089107 61\n0.343764 357\n0.121205 70\n0.000090 99\n0.118622 64\n0.304311 64\n0.102725 3\n0.144674 3\n0.135936 28\n5.247860 28\n0.192128 28\n0.112074 28\n0.087734 28\n0.224031 1\n0.111738 28\n0.456309 28\n0.192259 28\n0.128872 28\n0.038697 28\n0.023831 28\n0.184493 2\n0.087754 28\n0.383983 28\n0.113045 28\n0.118918 28\n0.040019 28\n0.080124 4\n0.343913 3\n0.088383 28\n0.063534 28\n0.064115 28\n0.079732 1\n0.104320 28\n0.087795 28\n0.087894 28\n0.096187 28\n0.184061 28\n0.344305 28\n0.127955 28\n0.032385 1\n0.079602 28\n0.119610 28\n0.064044 28\n0.048107 28\n0.127951 28\n0.007681 28\n0.208565 4\n0.223863 4\n0.501020 4\n0.050434 4\n0.050547 4\n0.050979 6\n0.051401 1\n0.050319 4\n0.050661 4\n0.050971 4\n0.050757 4\n0.050864 4\n0.050257 4\n0.051381 6\n0.050802 1\n0.051008 4\n0.050646 4\n0.050485 8\n0.050088 1\n0.050685 28\n0.308986 3\n0.087932 28\n0.072064 28\n0.071955 28\n0.191951 28\n0.348904 28\n0.001562 28\n0.121220 28\n0.040186 28\n0.287956 3\n0.056043 28\n0.055965 28\n0.063995 28\n0.168019 28\n0.024032 3\n0.175983 28\n0.145432 28\n0.086832 28\n0.047605 28\n0.129195 28\n0.087062 28\n0.119845 28\n0.112155 28\n0.031797 28\n0.135895 28\n0.048014 28\n0.127948 99\n0.312755 3\n0.527488 3\n0.127759 28\n3.264200 10\n0.375863 28\n0.088039 28\n0.160038 28\n0.112165 28\n0.367914 28\n0.255846 28\n0.007656 4\n0.472491 28\n0.200216 28\n0.023656 28\n0.047950 28\n0.288453 3\n0.103440 28\n0.592194 8\n0.360107 28\n0.207936 28\n0.119914 28\n0.079721 28\n0.112229 28\n0.039830 28\n0.120205 28\n0.072109 3\n0.088072 28\n0.167757 28\n0.047991 28\n0.184026 28\n0.184266 28\n0.064061 28\n1.288042 28\n0.393533 28\n0.005869 4\n0.440267 28\n0.232170 28\n0.111955 28\n0.127750 28\n0.184280 28\n0.079675 99\n0.320481 3\n0.112015 3\n0.144722 28\n0.303049 28\n0.135999 28\n0.112183 28\n0.048057 28\n0.239968 28\n0.119656 28\n0.527820 3\n0.072413 28\n0.151933 28\n0.200150 28\n0.087704 4\n0.480638 28\n0.071797 28\n0.103470 28\n0.160130 1\n0.112103 28\n0.079915 3\n0.039860 28\n0.168175 28\n0.128012 28\n0.112128 28\n0.079806 28\n0.328146 99\n0.344554 105\n0.144791 99\n0.134994 99\n0.151793 64\n0.440917 64\n0.159200 64\n0.175322 64\n0.168151 3\n0.207234 3\n0.499933 3\n0.049923 3\n0.050188 3\n0.049804 3\n0.053305 2\n0.051129 1\n0.049711 3\n0.049710 3\n0.050744 3\n0.053953 1\n0.545449 32\n0.184839 32\n0.176962 32\n0.095263 32\n0.144238 32\n0.096264 32\n0.183705 32\n0.080165 32\n0.071785 32\n0.231839 31\n0.216046 32\n0.328297 32\n0.272021 32\n0.083357 32\n0.028347 32\n0.103923 32\n0.160277 64\n0.297522 64\n0.166192 64\n0.151830 64\n0.351942 65\n0.824255 28\n0.127614 28\n0.128603 3\n0.063642 28\n0.528337 28\n0.023673 2\n0.128160 28\n0.103830 28\n0.040224 3\n0.103730 28\n0.152225 28\n0.160053 28\n0.119917 28\n0.376276 2\n0.135937 28\n0.208049 28\n0.072706 28\n0.103147 66\n0.111948 28\n0.167945 4\n0.416040 28\n0.015697 28\n0.032266 28\n0.152391 28\n0.055397 28\n0.312512 28\n0.280011 3\n0.047789 28\n1.447909 28\n0.168355 28\n0.055596 3\n0.104159 28\n0.120104 28\n0.063963 3\n0.103923 28\n0.031798 28\n0.136031 28\n0.055873 65\n0.128301 28\n0.079521 28\n0.096228 28\n0.071927 28\n0.152275 28\n0.104125 28\n0.055999 28\n0.007730 3\n0.111843 28\n0.192502 28\n0.071738 28\n0.079663 28\n0.104319 28\n0.128313 28\n0.063680 28\n0.127934 28\n0.063802 3\n0.128449 28\n0.095698 66\n0.064060 3\n0.056234 28\n0.079827 28\n0.072313 28\n0.095684 3\n0.095828 28\n0.104425 28\n0.128183 28\n0.072855 28\n0.198941 28\n0.039990 28\n0.103907 3\n0.095759 28\n0.064234 28\n0.120158 2\n0.079600 28\n0.080374 28\n0.058612 28\n0.109007 99\n0.152647 65\n0.159610 28\n0.128296 28\n0.063401 28\n0.152254 28\n0.072013 28\n0.071776 2\n0.104201 28\n0.123923 28\n0.068277 3\n0.096035 28\n0.055907 28\n0.103674 28\n0.040213 28\n0.047499 2\n0.104528 28\n0.031951 28\n0.136269 28\n0.039777 28\n0.031777 28\n0.088293 65\n0.071798 28\n0.136134 28\n0.056017 1\n0.088229 28\n0.119653 28\n0.208225 3\n0.055825 28\n0.088070 8\n0.335897 1\n0.112189 28\n0.200068 3\n0.111782 28\n0.103825 28\n0.128110 28\n0.095994 28\n0.047874 3\n0.056240 28\n0.120231 28\n0.087931 28\n0.080033 28\n0.095907 3\n0.055817 28\n0.144271 28\n0.119802 28\n0.071950 66\n0.144384 28\n0.119710 3\n0.119963 28\n0.392315 28\n0.064589 2\n0.087362 28\n0.064020 28\n0.080371 28\n0.054838 3\n0.152558 28\n0.583912 28\n0.159924 28\n0.120090 28\n0.088312 28\n0.215821 28\n0.120203 28\n0.087769 28\n0.047941 28\n0.280273 3\n2.111734 28\n0.352296 28\n0.159610 28\n0.144336 67\n0.064046 28\n0.063656 28\n0.096297 28\n0.223823 28\n0.232003 3\n0.063959 28\n0.120147 28\n0.111777 28\n0.071740 3\n0.168538 99\n0.192373 100\n0.271727 1\n0.175871 99\n0.256005 28\n0.127763 28\n0.367916 28\n0.152261 28\n0.080370 28\n0.143447 28\n0.151982 28\n0.111678 28\n0.088094 28\n0.080593 28\n0.479654 28\n0.152170 4\n0.559710 4\n0.080866 28\n0.183104 28\n0.151982 28\n0.152096 28\n0.048202 66\n0.135829 2\n0.063849 28\n0.112475 28\n0.056823 3\n0.102877 28\n0.040017 28\n0.088191 28\n0.072019 3\n0.122026 28\n0.037791 28\n0.056321 28\n0.103527 28\n0.096024 28\n0.184108 28\n0.127951 28\n0.063635 28\n0.048315 2\n0.096038 28\n0.120003 28\n0.055882 3\n0.128043 28\n0.088114 28\n0.128039 3\n0.047841 66\n0.400381 28\n0.127902 28\n0.039785 28\n0.200072 28\n0.063953 3\n0.144328 28\n0.055485 28\n0.104209 28\n0.184278 28\n0.063759 28\n0.032921 28\n0.167263 28\n0.071598 3\n0.096181 28\n0.071737 28\n0.088271 28\n0.047949 28\n0.056436 1\n0.087921 28\n0.055411 28\n0.112293 28\n0.048233 3\n0.136108 28\n1.367977 28\n0.119755 66\n0.192191 28\n0.095837 28\n0.063888 3\n0.280286 1\n0.239964 4\n0.111900 3\n0.104128 28\n0.047669 28\n0.184161 28\n0.039911 28\n0.120042 28\n0.059575 28\n0.116228 1\n0.248272 28\n0.151918 28\n0.031722 28\n0.088512 25\n1.536457 74\n0.000066 28\n0.503778 28\n0.071436 28\n0.032009 28\n0.103971 28\n0.048058 28\n0.135987 28\n0.063557 28\n0.064181 28\n0.096278 28\n0.208125 3\n2.408053 28\n0.831972 66\n0.151745 3\n0.103678 28\n0.128584 28\n0.095961 3\n0.208078 28\n0.416081 28\n0.039717 28\n0.184096 28\n0.184079 28\n0.079834 2\n0.143903 28\n0.079953 28\n0.176355 28\n0.031864 28\n0.200076 28\n0.047839 3\n0.192133 28\n0.135927 28\n0.128216 28\n0.095439 28\n0.232146 28\n0.064160 3\n0.136142 28\n0.087728 28\n0.144169 28\n0.143855 28\n0.080296 28\n0.055952 66\n0.151771 28\n0.079766 3\n0.208338 28\n0.351900 8\n0.313116 28\n0.174915 28\n0.136226 28\n0.103816 2\n0.124334 28\n0.213662 28\n0.173973 28\n0.039714 28\n0.088263 28\n0.055874 3\n0.072323 28\n0.136070 28\n0.071789 1\n0.079722 28\n0.152274 28\n0.072081 28\n0.071933 28\n0.127948 4\n0.192105 4\n0.089160 28\n0.046632 28\n0.264218 28\n0.079774 3\n0.128095 28\n0.071672 28\n0.064246 3\n0.087846 28\n0.055965 3\n0.064412 28\n0.079662 66\n0.104119 28\n0.048159 28\n0.064001 28\n0.144078 25\n0.200818 74\n0.000039 100\n0.111649 64\n0.119793 64\n0.329479 28\n0.606425 28\n0.167608 28\n0.039947 3\n0.143925 28\n0.031906 28\n0.136131 28\n0.095826 28\n0.088192 3\n0.136093 1\n0.336196 4\n0.135657 4\n0.160282 4\n0.151745 8\n0.127694 28\n0.080654 28\n0.231933 28\n0.135705 28\n0.144695 28\n0.343367 28\n0.175888 28\n0.071760 28\n0.048292 28\n0.103977 3\n0.072087 28\n0.071782 28\n0.079933 28\n0.064175 28\n0.080035 28\n0.128021 3\n0.016077 28\n0.151919 28\n0.224017 28\n0.120131 65\n0.056001 28\n0.071633 28\n0.088572 28\n0.063561 28\n0.168031 4\n0.351914 28\n0.176210 28\n0.024042 28\n0.167883 28\n0.031868 28\n0.416412 3\n0.135988 28\n0.055607 28\n0.072203 28\n0.071935 28\n0.155459 28\n0.052418 2\n0.096220 28\n0.072075 28\n0.039703 28\n0.104065 28\n0.079691 28\n0.112455 28\n0.127869 28\n0.064120 28\n0.047751 1\n0.096209 28\n0.064263 28\n0.087739 3\n0.072292 28\n0.143971 28\n0.127419 28\n0.120313 28\n0.055988 66\n0.047552 28\n0.120339 28\n0.160179 28\n0.112732 28\n0.063074 28\n0.040384 3\n0.135891 28\n0.144050 28\n0.063764 4\n0.256059 8\n0.111987 1\n0.119859 28\n0.176416 1\n0.047738 1\n0.000183 28\n0.071862 28\n0.071844 28\n0.072120 3\n0.128419 28\n0.143612 28\n0.096033 28\n0.087613 28\n0.081419 28\n0.103033 28\n0.055995 3\n0.192268 28\n0.447695 8\n0.368085 1\n0.103870 4\n0.728073 4\n0.499954 4\n0.049954 4\n0.050207 4\n0.049614 8\n0.134312 28\n0.087615 28\n0.176608 28\n0.047717 28\n0.151716 28\n0.112336 28\n0.031636 28\n0.168199 28\n0.152182 28\n0.207962 64\n0.249144 28\n0.070899 28\n0.111892 28\n0.071942 28\n0.056207 3\n0.080214 28\n0.119554 28\n0.048148 28\n0.111575 3\n0.072208 28\n0.256459 28\n0.167661 66\n0.128021 28\n0.007872 28\n0.056052 2\n0.392361 28\n0.127948 28\n0.087812 3\n0.064194 28\n0.640142 8\n0.375582 28\n0.160257 28\n0.063787 28\n0.119878 28\n0.200240 28\n0.199978 28\n0.095898 28\n0.064075 28\n0.087587 28\n0.184228 3\n0.096153 28\n0.087876 3\n0.135775 28\n0.104850 28\n0.103652 28\n0.112384 28\n0.071472 28\n0.160113 28\n0.136022 28\n0.055984 28\n0.071920 28\n0.031734 28\n0.055889 28\n0.200294 3\n0.087797 28\n0.064144 28\n0.096004 28\n0.040280 28\n0.087910 66\n0.015983 1\n0.103770 1\n0.480074 66\n0.104000 4\n0.112265 3\n0.055826 67\n0.055915 1\n0.192079 1\n7.632998 71\n0.498994 1\n0.050222 4\n0.049763 4\n0.049871 8\n0.049887 1\n0.119769 28\n0.228517 4\n0.271975 3\n0.056038 28\n0.103702 28\n0.095998 3\n0.120316 28\n0.063729 66\n0.816822 28\n0.071383 28\n0.047983 28\n0.112190 28\n0.167893 28\n0.072105 3\n0.111967 28\n0.184012 8\n0.264353 28\n0.063522 28\n0.047974 28\n0.127990 28\n0.023980 3\n0.055982 28\n0.087926 3\n0.024063 28\n0.256268 28\n0.136101 28\n0.072014 28\n0.047593 28\n0.216196 28\n0.008016 4\n0.383887 4\n0.104009 28\n0.360406 3\n0.247798 28\n0.847991 28\n0.119886 28\n0.079913 3\n0.111879 28\n0.120316 28\n0.552168 28\n0.231904 4\n0.255741 4\n0.096314 8\n0.127670 28\n0.472814 28\n0.151248 28\n0.176007 28\n0.079604 61\n0.152602 28\n0.103601 28\n0.144041 28\n0.047749 28\n0.088875 28\n0.055806 28\n0.087479 28\n0.192280 62\n0.031829 28\n0.111786 28\n0.064364 28\n0.047663 28\n0.176313 28\n0.119859 3\n0.112113 28\n0.240160 28\n0.127754 3\n0.119749 28\n0.096418 28\n0.063864 28\n0.096015 3\n0.136060 28\n0.136004 28\n0.055827 28\n0.040385 28\n0.087703 28\n0.047873 28\n0.176202 28\n0.096247 28\n0.159831 3\n0.087863 28\n0.104268 28\n0.071897 28\n0.071997 28\n0.079604 3\n0.088516 28\n0.103651 28\n0.336290 3\n0.111772 1\n0.320106 4\n0.159972 28\n0.840545 3\n0.111214 28\n0.464665 28\n0.119142 3\n0.088130 28\n0.184169 28\n0.152045 3\n0.111930 28\n0.112091 28\n0.095877 66\n0.176121 28\n0.063837 28\n0.128106 28\n0.087923 28\n0.176976 3\n0.151847 1\n0.247424 4\n0.111756 28\n0.256070 28\n0.080022 3\n0.112200 28\n0.111715 28\n0.560567 28\n0.111530 28\n0.047882 28\n0.688435 3\n0.079908 28\n1.368281 28\n0.079275 3\n0.120589 28\n0.183642 28\n0.167939 28\n0.144306 28\n0.200040 28\n0.103551 28\n0.088108 28\n0.112275 28\n0.136035 28\n0.544008 28\n0.111826 28\n0.296176 3\n0.351711 28\n0.112253 25\n0.298875 34\n0.000521 86\n0.000295 28\n0.060021 28\n0.144188 28\n0.063868 28\n0.104697 28\n0.103597 3\n0.335680 28\n0.184312 28\n0.047420 28\n0.160566 66\n0.064065 28\n0.063531 28\n0.120043 28\n0.048607 3\n0.215852 28\n0.191867 28\n0.128069 28\n0.047683 28\n0.032159 3\n0.152148 28\n0.712000 28\n0.071686 28\n0.080222 28\n0.096086 28\n0.040635 3\n0.071340 28\n0.135887 28\n0.064069 28\n0.184058 28\n0.159760 28\n0.048137 2\n0.103972 28\n0.200296 28\n0.111467 28\n0.096260 65\n0.103830 28\n0.120280 28\n0.143845 28\n0.047934 28\n0.007890 28\n0.111868 28\n0.096242 28\n0.200098 28\n0.071674 28\n0.072273 3\n0.136212 28\n0.039550 28\n0.256364 28\n0.159978 3\n0.071985 1\n0.335930 4\n0.112014 1\n0.055834 28\n0.048232 3\n0.119949 28\n0.063561 28\n0.136242 28\n0.040101 28\n0.047912 28\n0.184233 99\n0.200342 99\n0.127801 99\n0.120189 3\n0.200382 3\n0.135192 66\n0.232118 3\n0.111803 28\n0.120075 28\n0.111581 28\n0.136314 28\n0.167923 28\n0.048338 4\n0.283485 4\n0.084152 28\n0.088045 28\n0.095839 3\n0.079978 28\n0.088123 28\n0.159981 3\n0.072017 28\n0.248396 28\n0.095760 28\n0.240047 99\n0.384544 3\n0.175413 3\n0.344088 28\n0.167834 28\n0.176019 28\n0.056720 28\n0.063013 28\n0.096277 28\n0.047660 28\n0.136540 3\n0.032847 28\n0.151169 28\n0.119835 66\n0.080001 28\n0.200225 28\n0.055914 28\n0.119844 28\n0.104106 3\n0.080135 28\n0.079642 28\n0.120215 28\n0.056030 28\n0.031991 28\n0.079830 99\n0.216347 3\n0.135623 3\n0.216381 28\n0.271912 3\n0.056367 28\n0.111282 28\n0.072328 28\n0.143662 28\n0.112081 28\n0.063887 3\n0.144445 28\n0.111589 28\n0.136135 3\n0.095955 28\n0.128154 28\n0.215979 28\n0.384063 25\n0.168416 79\n0.000077 3\n0.095440 3\n0.127860 28\n0.304320 28\n0.079579 28\n0.111864 28\n0.168766 28\n0.071598 1\n0.096048 28\n0.159958 28\n0.079667 3\n0.088117 28\n0.032379 3\n0.095862 1\n0.272044 28\n0.207903 3\n0.088113 28\n0.119765 28\n0.031786 28\n0.488419 28\n0.087748 4\n0.327936 4\n0.096385 28\n0.095654 28\n0.048146 28\n0.103883 28\n0.080023 28\n0.127992 28\n0.072309 2\n0.095653 28\n0.210742 28\n0.046072 28\n0.087330 28\n0.039870 28\n0.104292 63\n0.087863 3\n0.079679 28\n0.200838 28\n0.151741 28\n0.119518 28\n0.040205 4\n0.408092 4\n0.128087 4\n0.143961 8\n0.120231 28\n0.143826 28\n0.135927 28\n0.063928 28\n0.047952 3\n0.104002 28\n0.160076 28\n0.095863 3\n0.104194 28\n0.039809 1\n0.071766 28\n3.808386 28\n0.112041 28\n0.248023 4\n0.327780 28\n0.120230 28\n0.056001 28\n0.143754 28\n0.135920 28\n0.016206 28\n0.088051 28\n0.055898 28\n0.056038 3\n0.087823 28\n0.152276 28\n0.039910 3\n0.072018 28\n0.432301 28\n0.327681 4\n0.223998 8\n0.103844 28\n0.087865 28\n0.208346 28\n0.151975 66\n0.063866 28\n0.112037 28\n0.144280 28\n0.055767 28\n0.352248 28\n0.095818 28\n0.248257 28\n0.239642 28\n0.072226 28\n0.088019 28\n0.087481 28\n0.032079 25\n0.368312 75\n0.000094 3\n0.111783 3\n0.152294 28\n0.335684 3\n0.063838 28\n0.096552 28\n0.111382 28\n0.144215 28\n0.063948 28\n0.087821 3\n0.080265 28\n0.095799 28\n0.144099 3\n0.056044 28\n1.480139 28\n0.152000 28\n1.808005 25\n0.872204 74\n0.000037 3\n0.199994 64\n0.119920 28\n0.927636 3\n0.096062 28\n0.063709 28\n0.104404 28\n0.192165 28\n0.087783 3\n0.079889 28\n0.096146 28\n0.111957 28\n0.048298 28\n0.039273 3\n0.112274 28\n0.064233 28\n0.095816 28\n0.071858 3\n0.095931 28\n0.128580 28\n0.055988 28\n0.063317 28\n0.139693 28\n0.084307 28\n0.192457 4\n0.432278 4\n0.127614 28\n0.272346 4\n0.463998 4\n0.127912 28\n0.103700 28\n0.120285 28\n0.111708 28\n0.016192 28\n0.103922 3\n0.248230 28\n0.984021 28\n0.127837 3\n0.087673 28\n0.112355 28\n0.119802 28\n0.096292 66\n0.136033 68\n0.383946 66\n0.215967 3\n0.084414 28\n0.211537 28\n0.152133 28\n0.055673 28\n0.128143 28\n0.047919 28\n0.031840 3\n0.760568 1\n0.639806 4\n0.143900 4\n0.160017 4\n0.135901 4\n0.152080 4\n0.135877 8\n0.136279 28\n0.111472 28\n0.137303 28\n0.078914 28\n0.048098 1\n0.095985 28\n0.224133 28\n0.155988 3\n0.164129 28\n0.088077 28\n0.087632 3\n0.184444 28\n0.079899 28\n0.103761 28\n0.184316 28\n0.095765 28\n0.047987 28\n0.168261 3\n0.215733 172\n1.472220 41\n0.176071 41\n0.263742 41\n0.111803 41\n0.072097 57\n0.208004 28\n0.152389 3\n0.079645 164\n0.160038 133\n0.502246 41\n0.073997 41\n0.184206 41\n0.103677 43\n0.264029 43\n0.119897 43\n0.136131 41\n0.079543 41\n0.208483 41\n0.103761 41\n0.159891 41\n0.032026 79\n0.160535 57\n0.239504 28\n0.199993 2\n0.063642 154\n0.464518 41\n0.192182 41\n0.071567 43\n0.408359 43\n0.111785 41\n0.104294 41\n0.127617 41\n0.095919 41\n0.104176 41\n0.048831 41\n0.167228 57\n0.384112 14\n0.502267 64\n0.090187 3\n0.167632 3\n0.151907 28\n0.512247 28\n0.159557 28\n0.136304 28\n0.135942 28\n0.047824 28\n0.159697 28\n0.304275 61\n0.256612 3\n0.055303 3\n0.127816 3\n0.168513 1\n0.279491 28\n1.040510 28\n0.159593 28\n0.128202 3\n0.088092 28\n0.167595 28\n0.143995 4\n0.256418 8\n0.239871 1\n0.152059 4\n0.127957 28\n0.080076 28\n0.039726 2\n0.120162 28\n0.208007 28\n0.104021 3\n0.136060 28\n0.047699 65\n0.080078 28\n0.416093 28\n0.223987 28\n0.144059 28\n0.120111 28\n0.184045 28\n0.632230 28\n0.055464 28\n0.063825 28\n0.048193 28\n0.071954 2\n0.111852 28\n0.224175 28\n0.040069 3\n0.079948 28\n2.384438 28\n0.615604 28\n0.224110 28\n0.119804 28\n0.168653 28\n0.119394 28\n0.280096 28\n0.456238 28\n0.120317 28\n0.063442 28\n0.135959 28\n0.072219 28\n0.063892 378\n0.385774 80\n0.000105 99\n0.118935 64\n0.400284 3\n0.151154 3\n0.143695 28\n1.671966 64\n0.087997 28\n0.080064 28\n0.071933 28\n0.167916 28\n0.112114 28\n0.167895 3\n0.144189 28\n0.135889 28\n0.184261 3\n0.144558 28\n0.296074 28\n0.351237 4\n0.471778 28\n0.176201 28\n0.047899 99\n0.216441 3\n0.087357 3\n0.120185 3\n0.208246 1\n0.319816 28\n0.728005 3\n0.168199 28\n0.159692 28\n0.087933 28\n0.600105 28\n0.136260 65\n0.095730 28\n0.744207 28\n0.119785 28\n0.056048 3\n0.039590 28\n0.176585 28\n0.015659 28\n0.160212 3\n0.039841 28\n0.152774 28\n0.063305 28\n0.095977 4\n0.520247 28\n0.055504 28\n0.144415 28\n0.048028 28\n0.089908 28\n0.158084 28\n0.096076 4\n0.384002 28\n0.184154 3\n0.087457 28\n0.048223 28\n0.103985 3\n0.064075 28\n0.103824 28\n0.136166 66\n0.136185 28\n0.144009 28\n0.075742 28\n0.084169 3\n0.088089 28\n0.071818 28\n0.039993 28\n0.103669 1\n0.088197 28\n0.079977 28\n0.080286 28\n0.495925 28\n0.055780 3\n0.096400 28\n0.055898 28\n0.055813 1\n0.135776 28\n0.240335 28\n0.175780 28\n0.128318 28\n0.471816 3\n0.992188 1\n1.240023 99\n0.264167 3\n0.328124 64\n0.343568 64\n1.711931 1\n0.135850 3\n0.119907 65\n0.256398 68\n0.543958 1\n0.143889 100\n0.128195 3\n0.127870 28\n0.151830 66\n0.192120 28\n0.128072 4\n0.360565 28\n0.063218 28\n0.024194 3\n0.127804 28\n0.224186 28\n0.151706 3\n0.120259 28\n0.095852 28\n0.079881 28\n0.136280 3\n0.103963 28\n0.480099 28\n0.159900 28\n0.112022 28\n0.111787 28\n0.280275 28\n0.031727 28\n0.160161 28\n0.088281 4\n0.287622 4\n0.127950 4\n0.120330 4\n0.127687 28\n0.047905 28\n0.232436 28\n0.031695 28\n0.071861 28\n0.024362 28\n0.055737 65\n0.257501 65\n0.500918 65\n0.050164 64\n0.050363 64\n0.050098 65\n0.049809 64\n0.050217 64\n0.050871 64\n0.055607 62\n0.164306 24\n0.377425 72\n0.000045 3\n0.110653 3\n0.144029 64\n0.255747 28\n0.119976 28\n0.088296 3\n0.120171 28\n0.087531 28\n0.072246 28\n0.088074 28\n0.047953 3\n0.095974 28\n0.136014 28\n0.095980 28\n0.023722 2\n0.081160 28\n0.055109 28\n0.168062 28\n0.168276 4\n0.327957 28\n0.063500 28\n0.064224 28\n0.111974 28\n0.039990 28\n0.184134 28\n0.072135 1\n0.096316 28\n0.247458 6\n0.288448 28\n0.079651 28\n0.127673 66\n0.072244 28\n0.063935 3\n0.079998 28\n0.152284 28\n0.063827 1\n0.112007 28\n0.088228 28\n0.087604 28\n0.112755 3\n0.143547 28\n0.143737 8\n0.280453 28\n0.063548 28\n0.152169 28\n0.112420 28\n0.080388 28\n0.143297 28\n0.087768 28\n0.056001 28\n0.047797 28\n0.048436 28\n0.047543 28\n0.336489 64\n0.384006 64\n0.500307 64\n0.050178 65\n0.051172 64\n0.051077 65\n0.050913 65\n0.051248 65\n0.049573 65\n0.050596 65\n0.050536 64\n0.050815 64\n0.049694 64\n0.050364 64\n0.495099 28\n0.448581 28\n0.175568 3\n0.089410 28\n0.110790 65\n0.039861 3\n0.056109 28\n0.191948 28\n0.215908 28\n0.007819 28\n0.200359 4\n0.248060 4\n0.120005 4\n0.103710 28\n0.072044 28\n0.136561 28\n0.015206 4\n0.392773 4\n0.087871 28\n0.191887 28\n0.040055 28\n0.039381 3\n0.112437 28\n0.039645 28\n0.112067 28\n0.016030 28\n0.224194 28\n0.031831 28\n0.119937 4\n0.264346 4\n0.127931 4\n0.143959 4\n0.135858 4\n0.127948 28\n0.184132 28\n0.048160 28\n0.144113 28\n0.072000 28\n0.088527 3\n0.135460 28\n0.047795 28\n0.103910 28\n0.055966 2\n0.120302 28\n0.032646 28\n0.103043 28\n0.048418 28\n0.127819 28\n0.039971 28\n0.047695 3\n0.112097 66\n0.488132 28\n0.088194 28\n0.128022 28\n0.135708 28\n0.120326 28\n0.095424 28\n0.064522 28\n0.143954 28\n0.127760 28\n0.039945 28\n0.176128 4\n0.184182 4\n0.135975 4\n0.144090 4\n0.127522 28\n0.128497 28\n0.552022 28\n0.031890 4\n0.415737 4\n0.128118 4\n0.152127 4\n0.112494 28\n0.703631 28\n0.239901 28\n0.103701 28\n0.072163 28\n0.136189 3\n0.096772 28\n0.062681 28\n0.112487 3\n0.115996 28\n0.436217 28\n0.103944 28\n0.055725 28\n0.055823 28\n0.096056 28\n0.072016 28\n0.080015 28\n0.040110 3\n0.144017 28\n0.064122 28\n0.095833 66\n0.071741 3\n0.080166 28\n0.079836 28\n0.063848 28\n0.096162 28\n0.096206 2\n0.114491 28\n0.045771 28\n0.127521 28\n0.112448 28\n0.191799 28\n0.048145 28\n0.063945 3\n0.119915 28\n0.079978 28\n0.063777 28\n0.088295 3\n0.103807 28\n0.112207 28\n0.063771 99\n0.169735 28\n0.079283 28\n0.111282 28\n0.127873 28\n0.248203 3\n0.096009 28\n0.135848 65\n0.056116 1\n0.087981 28\n0.023865 28\n0.104307 28\n0.047663 28\n0.055960 3\n0.128041 28\n0.119738 28\n0.168285 28\n0.039757 28\n0.088006 3\n0.096262 28\n0.136031 28\n0.136036 3\n0.079461 28\n0.208758 28\n0.047875 28\n0.031625 28\n0.072183 28\n0.096177 28\n0.111642 28\n0.103986 28\n0.152483 28\n0.063714 28\n0.040239 28\n0.144026 3\n0.095766 28\n0.128264 66\n0.152023 28\n0.023519 28\n0.144427 28\n0.048211 28\n0.095357 28\n0.248279 3\n0.095835 28\n0.591982 28\n0.208044 28\n0.071999 3\n0.047938 28\n0.072344 28\n0.119799 28\n0.080122 28\n0.104002 28\n0.007650 28\n0.039908 3\n0.161031 28\n0.295323 28\n0.063763 28\n0.119993 28\n0.032079 3\n0.104297 28\n0.208597 28\n0.119243 28\n0.095791 3\n0.120424 28\n0.559705 66\n0.143787 28\n0.192247 28\n0.064161 28\n0.031645 3\n0.176397 28\n0.223928 28\n0.152078 28\n0.111698 2\n0.184378 1\n0.335937 25\n0.272350 75\n0.000038 28\n0.119291 28\n0.128304 28\n0.095980 28\n0.071773 28\n0.184504 28\n0.055449 28\n0.032327 4\n0.440007 4\n0.111948 4\n0.128127 28\n0.031618 28\n0.192041 28\n0.015803 28\n0.055895 28\n0.023871 28\n0.064329 3\n0.256381 1\n0.295868 28\n0.143788 3\n0.071766 28\n2.824461 3\n0.111691 28\n0.071870 28\n0.152315 28\n0.119962 28\n0.096081 28\n0.143970 28\n0.031765 28\n0.071948 4\n0.344273 4\n0.111919 4\n0.112124 28\n0.087719 28\n0.136374 28\n0.023660 66\n0.071823 28\n0.032085 28\n0.056189 3\n0.119782 28\n0.152279 28\n0.152177 28\n0.048129 3\n0.119535 28\n0.056090 2\n0.072417 1\n0.287869 8\n0.096017 28\n0.112038 28\n0.095503 1\n0.104460 28\n0.047532 3\n0.064306 28\n0.152064 28\n0.087920 28\n0.103991 28\n0.080423 28\n0.072374 1\n0.071100 28\n0.096255 28\n0.143915 28\n0.055958 28\n0.048116 3\n0.087996 28\n0.127826 28\n0.087990 1\n0.071935 28\n0.104030 28\n0.079926 28\n0.112460 66\n0.135972 28\n0.184050 28\n0.111946 28\n0.055700 28\n0.071878 28\n0.024402 28\n0.080029 28\n0.191944 28\n0.127614 3\n0.080119 28\n0.160181 28\n0.064002 1\n0.143824 28\n2.137346 28\n0.086788 28\n0.064307 3\n0.135782 28\n0.223913 28\n0.144075 28\n0.095816 28\n0.095888 28\n0.024182 28\n0.168061 3\n0.088684 28\n0.135204 8\n0.431903 1\n0.160251 4\n0.499995 4\n0.050392 4\n0.049499 4\n0.050134 4\n0.050217 8\n0.049746 1\n0.049868 4\n0.050940 4\n0.049751 6\n0.287188 28\n0.804293 28\n0.135854 3\n0.552036 28\n0.120487 28\n0.063315 28\n0.079773 28\n0.152798 28\n0.047570 28\n0.192297 3\n0.119744 28\n0.080121 28\n0.144044 28\n0.071902 28\n0.032828 25\n0.951544 74\n0.000039 28\n0.111434 3\n0.152185 28\n0.184062 65\n0.095795 28\n0.088091 28\n0.039577 28\n0.232301 28\n0.008307 4\n0.663498 4\n0.112320 28\n0.824107 28\n11.125496 3\n0.226466 28\n0.023764 8\n0.296289 1\n0.127850 4\n0.143933 1\n0.095841 28\n0.136368 6\n0.759795 1\n0.136173 25\n0.416330 74\n0.000041 64\n0.144198 64\n0.561309 64\n0.245080 1\n0.209474 28\n0.151263 28\n0.168354 28\n0.023845 28\n0.095924 3\n0.120071 28\n0.063835 28\n0.192374 28\n0.048050 4\n0.223822 4\n0.095859 8\n0.127708 28\n0.088171 28\n0.111886 28\n0.176342 28\n0.104051 3\n0.040264 28\n0.063557 28\n0.112115 28\n0.175930 3\n0.152205 28\n0.063634 28\n1.488276 3\n0.167994 28\n0.072077 28\n0.040011 28\n0.055592 28\n0.096093 28\n0.063817 28\n0.120029 28\n0.096186 28\n0.184308 67\n0.063723 28\n0.039609 28\n0.136414 3\n0.071867 28\n0.048037 28\n0.072258 1\n0.072193 28\n0.015506 28\n0.055727 28\n0.080726 3\n0.111709 28\n0.295952 28\n0.072013 28\n0.055930 28\n0.047786 28\n0.136253 28\n0.039946 28\n0.184076 3\n0.120128 28\n0.103954 28\n0.047989 2\n0.136094 28\n0.055392 28\n0.088358 28\n0.071894 3\n0.120348 28\n0.184100 28\n0.063797 28\n0.080051 28\n0.055662 28\n0.104519 3\n0.106008 28\n24.374381 66\n0.143506 28\n0.103799 3\n0.160076 28\n0.400058 28\n0.103765 28\n0.080185 3\n0.192150 28\n0.255814 8\n0.751938 1\n0.128300 25\n0.216304 74\n0.000110 28\n0.095169 28\n0.184226 28\n0.064237 28\n0.111641 28\n0.072022 28\n0.399948 2\n0.096066 28\n0.096265 28\n0.079709 28\n0.152062 28\n0.168016 28\n0.079891 3\n0.096105 28\n0.248365 28\n0.143730 28\n0.031958 28\n0.040193 3\n0.127624 28\n0.096222 28\n0.016015 3\n0.127700 28\n0.120390 28\n0.175635 28\n0.048207 28\n0.055976 28\n0.168237 66\n0.199960 3\n0.095748 28\n0.168130 28\n0.127878 28\n0.064301 28\n0.183687 28\n0.136231 28\n0.199965 3\n0.079866 28\n0.192160 28\n0.071914 28\n0.031874 28\n0.216329 28\n0.056485 3\n0.167244 28\n0.112071 28\n0.095829 28\n0.048232 3\n0.129310 28\n0.894724 28\n0.055996 28\n0.071593 28\n0.144244 28\n0.119981 4\n0.255947 4\n0.095723 28\n0.112495 28\n0.031907 28\n0.143800 28\n0.104294 28\n0.191961 28\n0.064014 28\n0.039966 28\n0.159870 28\n0.015741 3\n0.144538 28\n0.031790 28\n0.128053 28\n0.055931 66\n0.055797 2\n0.064109 28\n0.039850 28\n0.152024 3\n0.111955 1\n0.248522 4\n0.103949 28\n0.184633 28\n0.070758 3\n0.088596 28\n0.160088 28\n0.111771 28\n0.055889 2\n0.136044 28\n0.072146 28\n0.039736 3\n0.119877 28\n0.192357 28\n0.080043 64\n0.268652 28\n0.259214 28\n0.135646 28\n0.160332 28\n0.175890 28\n0.079757 3\n0.248274 28\n0.504449 28\n0.151728 28\n0.015754 28\n0.152465 28\n0.039449 3\n0.480407 28\n0.143636 28\n0.112404 28\n0.039673 1\n0.159992 1\n3.072556 4\n0.499472 4\n0.050954 8\n0.049356 1\n0.050936 4\n0.188917 4\n0.503978 4\n0.049957 4\n0.051253 8\n0.050681 1\n0.051188 4\n0.051783 28\n0.577576 3\n0.103711 28\n0.199758 28\n0.055973 28\n0.039693 28\n0.120277 28\n0.056133 3\n0.103878 28\n0.079939 28\n0.087758 28\n0.072538 28\n0.111738 3\n0.048119 28\n0.336086 28\n0.071905 28\n0.113308 66\n0.022738 3\n0.071982 28\n0.079891 1\n0.072354 28\n0.223937 28\n0.135863 28\n0.039621 28\n0.024048 28\n0.128184 4\n10.552754 3\n0.263414 28\n0.367832 28\n0.200180 28\n0.023839 28\n0.168026 28\n0.079807 28\n0.080585 28\n0.055595 4\n0.288018 4\n0.136075 4\n0.144048 4\n0.144129 4\n0.143995 4\n0.127903 28\n0.127912 28\n0.087899 28\n0.176307 28\n0.119567 4\n0.224459 4\n0.119793 4\n0.128143 4\n0.103691 28\n0.193070 28\n0.094730 28\n0.104155 28\n0.111987 28\n0.088209 28\n0.072231 28\n0.047528 28\n0.216470 2\n0.071462 28\n0.112494 28\n0.039852 28\n0.055900 4\n0.408106 28\n0.248214 28\n0.031468 28\n0.047819 3\n0.128881 28\n0.031637 28\n0.103960 28\n0.056073 3\n0.127977 28\n0.039762 28\n0.192262 28\n0.135843 28\n0.119654 28\n0.144263 2\n0.071995 28\n0.112339 28\n0.151835 66\n0.112143 28\n0.071562 3\n0.112346 28\n0.079895 28\n0.184063 28\n0.079704 28\n0.056262 28\n0.056117 3\n0.104384 28\n0.159518 28\n0.087700 28\n0.192498 28\n0.063892 28\n0.055938 28\n0.095912 28\n0.063966 36\n0.218782 36\n0.189296 61\n0.641061 25\n0.128796 120\n0.000036 64\n0.359514 64\n0.174194 64\n0.159769 64\n0.152240 64\n0.208511 64\n0.159658 64\n0.159585 64\n0.144181 40\n0.160684 101\n0.159920 40\n0.159887 40\n0.143803 40\n0.144093 40\n0.136081 40\n0.136812 40\n0.143052 64\n0.113157 64\n0.158446 64\n0.232108 64\n0.151922 40\n0.232731 40\n0.183985 53\n0.552321 1\n0.103447 1\n0.176477 1\n0.168197 72\n0.263539 64\n0.192840 28\n8.846704 28\n0.144723 3\n0.239708 28\n0.319924 3\n0.135620 28\n0.119899 28\n0.136250 28\n0.143910 28\n0.087818 3\n0.112256 28\n0.080051 28\n0.080127 28\n0.055954 28\n0.023836 28\n0.168037 1\n0.087726 28\n0.024335 28\n0.071913 28\n0.096182 3\n0.071843 28\n0.119794 28\n0.056289 28\n0.055607 28\n0.064257 28\n0.111979 28\n0.087858 3\n0.104120 28\n0.087902 28\n0.200430 28\n0.071927 28\n0.023959 1\n0.120079 28\n0.055686 28\n0.184106 28\n0.103745 28\n0.088049 28\n0.048302 3\n0.064495 28\n0.079363 28\n0.096065 28\n0.136243 28\n0.023539 28\n0.096922 3\n0.111482 28\n0.032346 28\n0.127484 1\n0.024921 1\n0.000083 28\n0.079106 28\n0.063647 28\n0.072096 28\n0.096138 3\n0.039884 28\n0.096152 28\n0.119774 28\n0.176456 1\n0.079234 28\n0.088809 28\n0.099901 28\n0.083968 28\n0.048040 28\n0.063947 28\n0.135914 2\n0.096195 28\n0.007791 28\n0.080554 28\n0.183522 28\n0.104096 28\n0.103803 28\n0.071790 3\n0.104255 28\n0.056044 28\n0.087732 28\n0.063990 64\n0.304528 28\n0.279588 4\n0.344624 28\n0.087410 28\n0.159886 28\n0.200781 4\n0.375460 28\n0.184121 28\n0.175705 28\n0.199737 28\n0.200224 28\n0.064492 28\n0.039690 3\n0.087911 28\n0.096342 28\n0.039796 3\n0.064061 28\n0.143677 28\n0.048245 28\n0.128099 28\n0.095664 28\n0.032104 28\n0.056006 28\n0.144019 28\n0.112026 28\n0.048198 28\n0.031661 2\n0.087843 28\n0.112362 28\n0.192057 28\n0.107322 28\n0.028760 28\n0.055932 28\n0.047820 3\n0.080685 28\n0.119608 28\n0.039916 28\n0.087541 28\n0.056430 28\n0.095875 28\n0.063972 3\n0.095817 28\n0.103897 28\n0.129211 28\n0.078865 28\n0.016201 3\n0.104054 28\n0.071845 28\n0.152177 28\n0.127764 28\n0.072113 28\n0.048230 1\n0.056214 28\n0.087477 28\n0.080287 28\n0.144174 28\n0.015654 28\n0.320054 28\n0.071608 2\n0.088677 28\n0.111560 28\n0.040362 28\n0.175778 28\n0.192565 28\n0.039435 28\n0.056126 3\n0.119859 28\n0.008335 28\n0.271719 3\n0.152203 28\n0.119817 28\n0.191992 28\n0.240866 28\n0.135056 28\n0.055927 28\n0.056142 28\n0.079717 28\n0.144620 64\n0.168271 28\n0.121125 28\n0.085930 28\n0.143978 28\n0.039917 28\n0.048028 28\n0.072237 28\n0.151814 28\n0.103901 28\n0.055832 28\n0.023854 3\n0.112209 28\n0.064213 28\n0.096327 28\n0.039404 28\n0.127890 1\n0.032495 28\n0.135887 28\n0.063757 28\n0.087891 3\n0.080580 28\n0.351901 28\n0.143836 28\n0.087891 28\n0.112024 3\n0.240375 28\n0.143672 28\n0.128328 3\n0.383731 28\n0.055989 28\n0.103948 28\n0.072081 28\n0.144045 28\n0.047543 28\n0.064411 3\n0.127971 28\n0.056013 28\n0.079807 28\n0.071963 2\n0.120074 28\n0.032087 28\n0.103831 28\n0.176244 28\n0.039840 66\n0.258334 76\n0.326154 28\n0.095869 66\n0.193757 74\n0.230422 2\n0.071788 28\n0.055676 28\n0.081298 28\n0.038851 3\n0.120229 28\n0.095788 28\n0.071706 28\n0.071986 28\n0.088175 1\n0.055917 28\n3.448303 28\n0.151908 28\n0.199969 28\n0.071903 28\n0.144142 3\n0.064091 28\n0.159908 28\n0.104245 28\n0.065030 28\n0.166955 28\n0.031512 28\n0.064083 3\n0.112582 28\n0.047193 28\n0.087997 28\n0.064199 3\n0.128300 28\n0.201080 28\n0.030713 28\n0.360364 28\n0.087718 64\n0.128640 28\n0.071334 28\n0.239941 28\n0.136241 28\n0.160002 28\n0.039619 28\n0.072262 28\n0.232168 1\n0.240293 1\n0.599668 1\n1.192154 28\n0.639681 28\n1.016352 3\n0.095633 28\n0.161489 28\n0.062654 28\n0.144021 2\n0.071984 28\n0.079922 28\n0.095850 28\n0.111836 3\n0.088491 28\n0.119788 28\n0.192193 3\n0.063973 28\n0.111811 28\n0.071748 28\n0.088191 28\n0.160146 28\n0.047869 28\n0.072124 3\n0.112018 28\n0.040040 28\n0.120091 1\n0.039516 28\n0.136513 28\n0.112494 28\n0.167578 28\n0.099898 28\n0.044118 28\n0.087698 2\n0.080019 28\n0.119734 28\n0.064180 28\n0.042410 28\n0.069787 3\n0.103907 28\n0.111952 28\n0.128035 2\n0.040063 28\n0.143825 28\n0.152435 28\n0.056040 3\n0.095661 28\n0.095799 28\n0.104222 28\n0.096055 28\n0.055975 1\n0.063842 28\n0.128239 28\n0.056129 3\n0.135837 28\n0.240110 28\n0.064026 28\n0.151733 28\n0.104104 28\n0.087800 28\n0.080046 28\n0.096230 3\n0.087783 28\n0.112123 28\n0.120084 3\n0.055959 28\n0.143949 28\n0.175884 28\n0.079810 28\n0.136228 3\n0.064193 28\n0.119555 28\n0.080247 28\n0.087876 64\n0.192606 28\n0.271583 28\n0.039712 28\n0.096975 28\n0.151704 28\n0.023387 28\n0.240204 28\n0.103860 28\n0.071993 28\n0.071884 28\n0.056096 28\n0.064115 28\n0.080023 28\n0.207921 3\n0.288080 1\n0.376011 28\n0.143940 2\n0.192145 28\n0.200163 28\n0.087442 28\n0.120273 28\n0.047897 28\n0.087960 3\n0.144225 28\n0.264075 28\n0.111496 28\n0.048372 3\n0.120008 28\n0.031803 28\n0.095777 28\n0.056289 3\n0.112602 28\n0.023353 8\n0.424387 28\n0.111837 28\n0.087593 28\n0.072057 28\n0.104273 28\n0.111836 28\n0.056150 28\n0.096053 28\n0.112371 3\n0.071364 28\n0.120053 28\n0.048103 28\n0.064117 3\n0.103946 28\n0.471900 28\n0.104182 28\n0.055841 28\n0.112152 28\n0.183844 28\n0.240617 28\n0.287760 28\n0.079652 3\n0.135698 28\n0.088085 28\n0.120271 28\n0.024039 2\n0.176489 28\n0.135652 28\n0.039878 28\n0.159892 28\n0.184039 28\n0.072003 28\n0.183971 28\n0.080028 28\n0.063711 28\n0.144231 28\n0.232077 28\n0.056171 28\n0.191703 1\n1.991365 1\n0.160063 32\n0.152781 32\n0.071833 35\n0.919998 1\n0.799371 1\n0.423687 3\n0.448200 34\n0.192946 1\n0.222994 34\n0.704984 34\n0.064110 37\n0.679854 37\n0.128139 34\n0.281209 34\n0.470837 37\n1.216069 37\n0.135667 79\n0.553220 28\n0.000039 90\n2.103845 18\n2.286070 1\n0.500301 1\n0.050706 1\n0.051112 1\n0.050884 1\n0.050853 1\n0.049874 1\n0.050286 1\n0.050470 1\n0.050461 1\n0.051298 1\n0.051517 1\n0.050174 1\n0.051250 1\n0.050628 1\n0.049907 1\n0.050788 1\n0.050611 1\n0.050657 1\n0.050253 1\n0.050664 1\n0.050633 1\n0.050763 1\n0.050843 1\n0.049914 1\n0.050513 1\n0.050950 1\n0.050928 1\n0.050795 1\n0.049858 1\n0.050642 1\n0.050058 1\n0.050226 1\n0.051266 1\n0.050924 1\n0.050083 1\n0.050476 1\n0.050546 1\n0.050867 1\n0.050036 1\n0.050156 1\n0.050567 1\n0.049698 1\n0.050489 1\n0.050667 59\n1.422546 59\n0.000041 127\n1.247897 50\n34.296766 64\n0.533818 72\n0.002176 123\n0.500535 43\n0.883289 21\n0.000046 25\n0.499838 21\n0.000049 25\n0.049775 21\n0.000048 25\n0.050201 21\n0.000049 25\n0.049471 21\n0.000048 25\n0.050011 21\n0.000048 25\n0.051334 21\n0.000050 25\n0.050548 21\n0.000118 25\n0.050830 21\n0.000072 25\n0.050228 21\n0.000048 25\n0.050213 21\n0.000049 25\n0.050812 21\n0.000045 25\n0.050997 21\n0.000047 25\n0.051437 21\n0.000091 25\n0.050339 21\n0.000049 25\n0.050878 21\n0.000047 25\n0.050811 21\n0.000051 25\n0.050367 21\n0.000048 25\n0.049343 21\n0.000045 25\n0.050535 21\n0.000043 105\n0.167153 43\n1.119736 22\n0.000069 26\n0.499775 22\n0.000051 26\n0.050042 22\n0.000050 26\n0.050092 22\n0.000051 26\n0.050585 22\n0.000077 26\n0.050131 22\n0.000084 26\n0.050414 22\n0.000052 26\n0.050432 22\n0.000076 26\n0.049297 22\n0.000050 26\n0.050585 22\n0.000094 26\n0.050108 22\n0.000050 26\n0.050856 22\n0.000083 26\n0.050880 22\n0.000072 48\n0.051103 26\n0.050778 22\n0.000120 26\n0.050096 22\n0.000078 26\n0.050774 22\n0.000049 26\n0.049899 22\n0.000069 26\n0.049899 22\n0.000049 26\n0.049956 22\n0.001372 26\n0.049349 22\n0.000048 26\n0.050356 22\n0.000090 32\n30.572222 8\n0.742252 3\n0.410484 99\n0.390893 18\n2.166337 1\n0.500760 1\n0.050150 1\n0.050034 1\n0.049834 1\n0.054232 1\n0.049732 1\n0.050726 1\n0.049940 1\n0.050520 1\n0.051410 61\n0.612193 18\n0.182307 48\n0.161122 18\n0.534793 117\n0.297607 18\n0.630560 88\n1.001383 381\n0.105308 18\n0.598063 65\n1.056960 64\n0.119599 28\n0.559589 28\n0.135963 28\n0.232568 28\n0.111612 28\n0.119804 28\n0.096151 28\n0.232010 1\n0.055991 28\n0.039747 28\n0.168245 28\n0.039963 3\n0.111990 28\n0.232036 28\n0.096025 28\n0.143924 28\n0.103914 28\n0.104091 28\n0.136028 28\n0.064004 28\n0.063814 3\n0.104640 28\n0.119661 28\n0.151881 28\n0.056310 3\n0.095681 28\n0.144072 28\n0.159939 28\n0.095593 3\n0.097791 28\n0.062735 28\n0.072103 1\n0.055508 28\n0.104426 28\n0.064883 28\n0.150943 3\n0.080135 28\n0.087950 28\n0.100094 28\n0.075663 1\n0.063975 28\n0.168320 28\n0.039754 28\n0.072011 28\n0.120166 28\n0.111893 3\n0.024019 28\n0.223880 28\n0.072278 3\n0.127756 28\n0.239929 28\n0.144194 28\n0.079749 28\n0.184411 28\n0.072028 28\n0.176035 1\n0.247977 28\n0.159882 28\n0.159930 28\n0.127978 28\n0.103846 28\n0.424084 28\n0.240175 2\n0.344232 28\n1.215880 28\n0.167733 28\n0.104226 28\n0.047704 3\n0.200131 28\n0.584254 28\n0.056101 28\n0.095522 1\n0.112011 28\n0.168343 28\n0.103677 28\n0.167955 28\n0.176898 28\n0.079117 28\n0.296160 3\n0.183949 31\n0.087775 28\n0.048374 28\n0.175721 28\n0.071969 28\n0.152042 4\n0.409091 4\n0.499291 4\n0.049829 4\n0.051164 24\n0.049874 1\n0.049929 64\n0.443381 28\n0.287707 4\n0.296007 28\n0.087754 28\n0.056899 28\n0.103200 28\n0.079988 65\n0.267418 64\n0.420926 64\n0.120179 61\n0.127865 28\n0.304212 28\n0.095245 28\n0.287993 3\n0.063650 28\n0.168665 28\n0.095398 28\n0.040832 28\n0.079755 28\n0.111665 3\n0.087998 28\n0.087821 28\n0.112524 28\n0.063664 3\n0.104108 28\n0.056112 28\n0.055857 28\n0.064496 28\n0.071422 3\n0.088028 28\n0.152106 28\n0.135890 28\n0.063769 28\n0.136242 1\n0.072183 28\n0.079830 28\n0.175977 3\n0.096730 28\n0.159554 28\n0.207931 28\n0.135963 28\n0.055468 28\n0.088087 3\n0.120372 28\n0.159842 28\n0.072030 28\n0.192120 28\n0.112001 28\n0.167900 28\n0.111965 4\n0.320333 4\n0.120029 4\n0.103922 28\n0.200094 28\n0.079713 28\n0.192197 28\n0.056116 28\n0.103788 28\n0.215844 3\n0.072130 28\n0.135934 28\n0.039970 28\n0.168007 28\n0.136179 1\n0.031930 28\n0.120767 28\n0.055187 28\n0.055949 28\n0.088910 3\n0.087125 28\n0.103928 28\n0.183948 28\n0.119915 3\n0.064058 28\n0.120996 28\n0.031122 28\n0.087914 3\n0.192405 28\n0.399804 28\n0.040148 28\n0.087831 28\n0.040683 28\n0.095831 28\n0.079618 3\n0.111734 28\n0.328045 28\n0.119785 28\n0.232497 1\n0.592023 28\n0.136006 28\n0.207569 28\n0.152221 3\n0.047871 28\n0.152676 28\n0.143638 28\n0.095833 528\n0.049275 38\n0.000039 64\n0.159064 28\n0.295845 4\n0.375836 64\n0.176172 24\n0.151959 4\n0.144260 4\n0.159564 8\n0.136662 1\n0.127121 64\n0.232795 28\n0.240246 28\n0.111201 28\n0.064241 28\n0.023703 3\n0.104270 28\n0.152066 28\n0.055525 28\n0.080233 28\n0.152313 28\n0.042059 28\n0.069316 3\n0.104244 28\n0.066055 28\n0.093823 28\n0.040240 28\n0.063904 3\n0.103747 28\n0.048334 28\n0.064159 28\n0.080041 28\n0.071857 3\n0.064410 28\n0.103694 28\n0.023748 28\n0.111992 3\n0.072304 28\n0.135721 28\n0.368268 28\n0.039799 28\n0.208203 2\n0.103593 28\n0.120107 71\n0.120430 28\n0.002120 74\n1.086710 53\n0.151492 1\n0.128011 13\n0.440488 109\n0.248228 29\n0.000041 28\n1.229962 28\n0.151932 28\n0.080052 4\n0.271809 4\n0.104261 4\n0.096778 28\n0.159402 28\n0.143903 30\n0.062677 28\n1.081359 28\n0.143688 34\n0.234335 4\n0.814026 4\n0.499660 4\n0.049864 4\n0.050312 4\n0.049761 4\n0.050033 4\n0.050507 4\n0.050368 4\n0.151449 28\n1.416077 31\n0.410173 28\n0.637416 28\n0.168390 32\n0.106060 1\n0.235846 54\n0.109301 46\n0.011822 144\n0.062103 1662\n0.000739 527\n0.680481 635\n0.000045 409\n0.000624 422\n0.504653 504\n0.000105 815\n0.000702 1\n0.042778 914\n0.000057 90\n0.000031 434\n0.000552 100\n0.051862 1\n0.000081 233\n0.000061 1\n0.000053 264\n0.000060 1\n0.000063 59\n0.000051 1\n0.000049 72\n0.000050 1\n0.000049 178\n0.000095 203\n0.000205 1\n0.000063 24\n0.000050 1\n0.000048 60\n0.000059 1\n0.000076 58\n0.000055 2\n0.000210 1\n0.000062 370\n0.000163 325\n0.047441 646\n0.000042 535\n0.000205 6\n0.000030 89\n0.000029 175\n0.000031 95\n0.052609 706\n0.000039 209\n0.000039 116\n0.000045 404\n0.000708 150\n0.046435 782\n0.000117 139\n0.000033 236\n0.006850 52\n0.043158 886\n0.000052 69\n0.000075 327\n0.000463 109\n0.054749 843\n0.000053 2\n0.000078 89\n0.000455 205\n0.000071 164\n0.000362 546\n0.047448 580\n0.000118 233\n0.000041 1\n0.049151 918\n0.000046 267\n0.000083 298\n0.000484 55\n0.049819 905\n0.000050 295\n0.000540 95\n0.055212 814\n0.000113 12\n0.000032 266\n0.000033 150\n0.000605 310\n0.036536 535\n0.000048 169\n0.000042 579\n0.057008 110\n0.000042 396\n0.000540 1\n0.055057 975\n0.000046 601\n0.000606 93\n0.055310 661\n0.000040 131\n0.000026 96\n0.000034 521\n0.000565 1\n0.039563 1134\n0.000408 269\n0.000378 2\n0.063763 379\n0.000037 335\n0.000029 300\n0.000095 650\n0.000625 221\n0.041121 934\n0.000530 1\n0.039294 24\n0.002934 25\n0.000074 1\n0.047922 1\n0.049403 1\n0.050661 1\n0.050329 1\n0.050723 1\n0.050507 1\n0.050053 191\n0.282015 720\n0.000045 645\n0.000563 121\n0.668341 792\n0.000110 70\n0.000027 725\n0.000589 115\n0.231702 432\n0.000081 124\n0.000440 1\n0.000095 1\n0.000055 1\n0.000061 41\n0.000052 1\n0.000048 1\n0.000049 1\n0.000048 67\n0.000051 1\n0.000052 1\n0.000050 1\n0.000062 68\n0.000051 1\n0.000049 1\n0.000048 45\n0.000062 85\n0.000238 1\n0.000051 1\n0.000062 1\n0.000048 36\n0.000049 1\n0.000050 1\n0.000050 1\n0.000065 34\n0.000053 229\n0.000189 69\n0.214518 868\n0.000049 609\n0.000588 60\n0.215323 586\n0.000100 312\n0.000035 3\n0.000591 79\n0.000073 2\n0.000340 293\n0.000035 5\n0.716376 918\n0.000541 98\n0.218092 951\n0.000047 47\n0.000096 136\n0.000801 4\n0.442681 768\n0.000048 133\n0.000095 61\n0.441646 62\n0.167234 63\n0.505406 63\n0.045381 63\n0.051318 64\n0.050808 63\n0.050070 63\n0.049522 64\n0.050343 64\n0.050768 64\n0.049836 64\n0.050617 64\n0.141463 64\n0.167893 3\n0.207340 3\n0.500498 3\n0.050735 3\n0.051246 3\n0.050501 3\n0.050375 24\n0.423849 56\n0.000099 45\n0.307476 45\n0.151958 45\n0.016435 45\n0.047599 45\n0.120074 45\n0.176306 45\n0.104285 45\n0.111861 45\n0.023623 31\n0.216259 31\n0.500082 31\n0.049698 31\n0.050043 31\n0.049667 31\n0.051306 31\n0.154926 31\n0.160038 65\n0.352444 2\n0.229242 2\n0.000051 43\n0.329975 43\n0.499993 43\n0.049505 43\n0.050427 43\n0.049624 1\n0.050334 43\n0.049802 43\n0.049917 43\n0.050715 1\n0.050284 43\n0.050180 43\n0.049794 1\n0.049953 43\n0.050173 43\n0.049732 43\n0.050485 43\n0.050223 43\n0.050273 43\n0.050770 1\n0.050207 43\n0.050044 43\n0.050086 43\n0.120888 43\n0.128214 41\n0.168609 41\n0.735886 41\n0.127374 41\n0.048004 41\n0.047673 56\n0.000929 47\n0.001459 59\n0.094660 41\n0.159610 41\n0.095617 41\n0.064042 41\n0.048959 3\n0.079061 41\n0.128260 41\n0.104158 3\n0.055762 41\n0.071863 41\n0.096115 41\n0.048018 1\n0.120149 41\n0.039660 41\n0.072119 41\n0.111804 41\n0.104011 41\n0.120645 3\n0.111950 41\n0.663667 41\n0.160077 3\n0.120152 41\n2.439876 41\n0.080827 41\n0.153292 41\n0.046079 41\n0.048036 2\n0.111863 41\n0.111916 3\n0.039936 41\n0.312991 41\n0.143338 41\n0.128341 41\n0.087216 3\n0.208528 41\n0.119798 41\n0.232417 41\n0.079460 41\n0.128995 3\n0.023011 1\n0.464008 43\n0.500114 43\n0.049975 43\n0.050140 43\n0.049972 1\n0.050564 43\n0.051071 43\n0.050410 43\n0.050107 43\n0.050996 1\n0.376931 3\n0.399926 41\n0.336060 41\n0.121055 41\n0.262944 41\n0.103653 41\n0.208808 2\n0.367477 41\n0.231950 41\n0.151990 41\n0.087560 41\n0.072388 41\n0.039858 41\n0.240273 3\n0.224029 41\n0.087976 41\n0.047751 41\n0.096256 3\n0.096847 41\n0.175160 41\n0.088000 41\n0.048249 41\n0.143814 41\n0.175933 41\n0.047966 183\n0.352825 128\n0.390422 3\n0.128160 41\n0.120491 41\n0.079854 41\n0.111728 41\n0.064152 41\n0.040145 41\n0.111787 41\n0.144354 41\n0.112276 41\n0.047483 41\n0.056199 43\n0.608064 43\n0.112770 43\n0.118992 3\n0.104895 41\n0.167075 41\n0.096042 41\n0.192153 43\n0.424236 41\n0.039561 41\n0.135855 2\n0.056054 41\n0.056116 41\n0.087627 41\n0.080026 3\n0.304177 41\n0.112475 41\n0.119797 41\n0.063917 41\n0.192220 41\n0.088110 3\n0.152022 41\n0.184721 41\n0.063119 41\n0.151982 41\n0.072077 41\n0.048633 41\n0.143358 41\n0.159777 3\n0.080165 41\n0.079800 41\n0.056030 41\n0.559962 3\n0.312764 41\n0.175472 41\n0.103804 1\n0.136503 41\n0.119960 41\n0.111362 41\n0.152606 41\n0.015600 41\n0.048158 43\n0.440319 43\n0.127865 43\n0.136238 41\n0.103591 41\n0.048414 41\n0.119372 41\n0.192533 41\n0.079875 1\n0.112200 41\n0.176390 41\n0.072511 41\n0.574998 41\n0.135776 41\n0.096193 41\n0.111963 41\n0.208458 1\n0.055266 41\n0.136427 41\n0.034139 41\n0.173874 41\n0.039771 3\n0.135887 41\n0.055900 2\n0.064435 1\n0.439962 183\n0.176525 128\n0.142754 3\n0.136074 41\n0.088014 41\n0.152277 41\n0.040199 41\n0.031442 41\n0.399917 41\n0.200395 3\n0.071668 41\n0.176359 41\n0.096703 41\n0.207673 41\n0.207590 3\n0.120020 41\n0.096006 41\n0.103521 3\n0.040271 41\n0.080218 41\n0.081221 41\n0.654804 3\n0.152083 41\n0.143737 41\n0.031790 41\n0.120100 41\n0.080371 41\n0.095703 43\n2.464331 41\n0.231897 3\n0.071791 41\n0.087710 41\n0.216266 41\n0.488958 41\n0.102747 43\n0.336317 41\n0.288009 41\n0.304936 41\n0.070879 3\n0.128366 41\n0.048414 41\n0.103766 41\n0.031872 3\n0.111945 41\n0.087648 41\n0.080325 41\n0.160122 41\n0.024828 43\n0.263378 43\n0.103921 43\n0.136031 43\n0.120029 41\n0.207755 41\n0.008103 41\n0.039522 43\n0.280627 43\n0.103670 43\n0.120221 41\n0.199701 41\n0.055973 41\n0.047857 3\n0.112152 41\n0.176328 41\n0.056059 41\n0.127822 41\n0.096280 41\n0.079868 41\n0.088355 41\n0.159495 66\n1.473025 65\n0.497644 62\n0.050827 65\n0.051001 65\n0.050629 65\n0.050264 529\n0.054302 716\n0.000127 65\n0.046496 64\n0.700171 65\n0.176215 65\n0.152012 64\n0.159991 64\n0.167973 64\n6.303766 65\n0.144062 112\n2.666816 29\n0.000040 4\n0.780221 4\n0.120216 4\n0.152105 4\n0.127994 4\n0.103591 28\n0.095756 28\n0.145647 49\n0.195640 4\n0.229975 4\n0.126165 28\n0.199440 35\n0.067424 4\n0.804200 4\n0.500047 4\n0.050073 4\n0.050976 4\n0.051072 4\n0.050779 4\n0.050512 4\n0.150384 28\n0.168516 4\n0.151612 4\n0.120172 28\n0.087581 31\n0.043872 28\n0.164242 47\n0.468764 4\n0.142347 4\n0.117177 28\n0.151797 48\n0.028498 4\n0.286463 28\n0.197175 28\n0.104072 47\n0.044288 4\n0.310277 4\n0.109083 28\n0.128018 28\n0.071947 56\n0.046724 67\n0.034366 383\n0.000043 192\n0.000040 28\n0.695259 75\n0.188552 232\n0.000077 431\n0.000485 1\n0.397042 49\n0.049569 1265\n0.000795 314\n0.788079 633\n0.000045 71\n0.000031 327\n0.000505 2\n0.668598 1172\n0.000460 331\n0.921136 444\n0.000040 212\n0.000080 62\n1.409630 64\n0.499418 63\n0.049791 63\n0.050679 183\n0.135489 538\n0.000050 453\n0.000081 178\n1.333772 525\n0.000081 243\n0.000490 398\n0.000040 903\n0.876484 124\n0.000034 185\n0.000075 324\n0.598073 646\n0.000071 135\n0.000069 91\n0.000529 57\n0.164995 818\n0.000049 344\n0.000608 62\n0.673424 63\n0.499597 63\n0.051298 63\n0.050404 63\n0.051112 63\n0.052667 63\n0.050120 64\n0.049883 65\n0.049879 64\n0.049851 64\n0.049451 64\n0.050996 3\n1.042034 1\n0.166751 65\n0.317131 1\n0.163119 70\n0.495361 32\n0.445028 32\n0.176670 32\n0.030959 32\n0.056245 32\n0.104995 32\n0.159013 32\n0.104016 32\n0.040028 32\n0.040107 31\n0.248092 31\n0.500710 31\n0.050456 31\n0.050852 31\n0.050625 31\n0.050321 31\n0.050891 31\n0.231905 115\n0.307019 109\n0.043339 146\n0.011597 18\n1.535356 112\n0.188215 29\n0.000062 28\n1.020420 28\n0.207738 28\n0.208270 28\n0.127999 28\n0.047921 4\n0.567755 4\n0.128233 4\n0.143985 4\n0.120086 4\n0.111561 28\n0.320542 28\n0.151805 28\n0.216111 28\n0.392016 28\n0.127937 28\n0.215908 28\n0.224180 28\n0.240049 49\n0.333891 93\n0.004057 43\n0.033327 231\n0.000044 32\n0.981811 57\n0.000056 156\n0.255204 41\n0.168118 100\n0.111881 57\n0.000059 41\n0.135752 63\n0.152225 63\n0.111474 3\n0.168670 41\n0.272081 3\n0.199668 41\n0.079573 41\n0.128256 41\n0.200719 41\n0.055322 41\n0.039834 3\n0.104428 41\n0.232368 41\n0.111601 41\n0.088050 41\n0.064134 41\n0.071912 41\n0.168252 3\n0.104045 41\n0.303928 41\n0.055460 41\n0.120470 41\n0.079670 41\n0.120285 41\n0.031739 41\n0.048111 3\n0.128903 41\n0.527495 41\n0.208016 41\n0.127659 3\n0.080065 41\n0.079884 41\n0.064074 1\n0.104005 41\n0.063776 41\n0.087980 41\n0.080088 3\n0.096422 41\n0.080175 41\n0.207530 41\n0.216440 43\n0.119701 21\n0.096046 22\n0.000039 41\n0.079684 41\n0.160340 41\n0.031878 41\n0.144316 41\n0.095828 3\n0.095961 41\n0.055786 41\n0.072325 41\n0.143838 41\n0.103797 1\n0.136490 41\n0.151749 41\n0.136025 41\n0.103891 41\n0.136145 3\n0.079630 41\n0.064359 41\n0.112071 41\n0.047897 41\n0.111746 41\n0.088017 41\n0.072314 41\n0.087930 41\n0.040562 41\n0.119239 63\n0.472244 63\n0.639249 63\n0.455991 64\n0.152343 2\n0.384603 41\n0.983721 41\n0.168025 41\n0.072181 3\n0.111975 41\n0.079912 41\n0.080116 41\n0.192214 41\n0.039910 41\n0.024001 63\n0.471807 3\n0.143799 41\n0.127849 41\n0.128416 41\n0.023767 3\n0.079716 41\n0.111961 41\n0.168297 41\n0.088070 41\n0.023444 3\n0.104204 41\n0.208386 41\n0.079572 41\n0.104109 41\n0.056075 1\n0.063618 41\n0.144659 41\n0.063976 41\n0.263774 41\n0.168060 43\n0.248010 41\n0.143912 43\n0.128273 43\n0.103834 41\n0.071790 41\n0.136354 41\n0.072037 41\n0.071789 41\n0.055367 1\n0.104931 142\n0.073318 37\n0.078472 21\n0.000051 3\n0.079540 41\n0.023957 41\n0.072135 41\n0.080150 2\n0.088048 41\n0.168319 41\n0.151666 41\n0.064727 41\n0.135115 41\n0.040119 41\n0.160157 3\n0.064016 41\n0.144116 41\n0.047931 3\n0.063795 41\n0.111978 3\n0.088037 41\n0.240262 41\n0.152066 41\n0.087579 41\n0.096502 41\n0.136010 3\n0.167750 41\n0.015687 41\n0.152310 41\n0.064221 3\n0.111934 41\n0.720346 41\n0.079631 1\n0.152350 41\n0.439667 41\n0.119680 41\n0.144238 41\n0.048126 41\n0.047848 41\n0.088227 41\n0.144020 41\n0.112063 41\n0.039783 41\n0.136164 3\n0.135699 1\n0.528147 3\n0.240318 41\n0.175811 41\n0.216156 41\n0.079669 41\n0.096245 41\n0.071719 21\n0.320354 22\n0.000098 21\n0.103843 22\n0.000097 21\n0.127671 22\n0.000117 21\n0.096056 22\n0.000046 41\n0.208287 41\n0.071197 41\n0.072585 41\n0.080500 41\n0.127599 41\n0.096511 41\n0.207480 48\n0.360655 63\n0.526917 41\n0.168413 41\n0.127406 41\n0.296083 4\n0.367662 41\n0.479973 41\n0.104149 41\n0.408123 41\n0.183977 41\n0.111535 41\n0.304488 4\n0.311833 41\n0.224096 41\n0.239988 41\n0.063948 41\n0.064024 41\n0.120030 41\n0.152083 41\n0.096035 41\n0.047915 41\n0.031740 41\n0.408410 41\n0.247997 41\n0.135850 41\n0.047884 41\n0.016806 41\n0.415571 41\n2.119961 41\n0.248033 41\n0.135730 41\n0.104311 41\n0.200600 41\n0.095161 41\n0.135979 41\n0.039868 41\n0.144327 41\n0.192182 41\n0.183927 41\n0.095538 41\n0.120202 41\n0.056021 41\n0.616261 41\n0.103793 41\n0.080089 41\n0.039792 41\n0.120649 41\n0.103671 4\n0.383766 41\n0.200167 41\n0.048539 41\n0.167606 41\n0.007980 41\n0.095854 4\n0.519692 4\n0.120361 41\n0.311886 41\n0.055701 41\n0.192205 55\n1.984949 1\n0.167021 1\n0.184305 70\n0.272454 57\n0.000057 63\n0.150870 63\n0.127910 63\n0.143981 63\n0.135987 64\n0.144026 63\n0.272623 63\n0.126988 63\n0.144087 63\n0.128027 28\n1.656310 28\n0.160119 28\n0.079694 28\n0.024200 54\n0.120065 3\n0.272156 41\n0.680037 41\n0.119600 41\n0.192241 41\n0.055822 41\n0.040142 63\n0.312558 64\n0.327092 28\n0.872348 30\n0.033364 63\n0.703470 64\n0.494856 1\n0.359569 63\n1.345341 147\n0.551964 147\n0.111706 63\n0.360376 63\n0.295086 128\n0.249255 63\n0.431453 7\n0.391163 1\n0.207633 30\n0.984911 30\n0.079979 30\n0.111895 30\n0.048467 30\n0.079865 61\n0.159923 63\n0.416418 3\n1.599275 3\n0.159903 3\n0.168197 3\n0.447786 1\n0.257213 3\n1.519164 3\n0.159698 3\n0.167934 3\n0.160020 28\n1.848203 28\n0.105123 53\n0.055353 1\n0.215360 49\n0.240158 49\n0.103892 49\n0.248370 49\n0.015676 49\n0.104015 4\n0.624527 49\n0.167554 49\n0.040114 49\n0.256057 49\n0.095765 28\n0.248165 28\n0.208462 28\n0.143789 28\n0.087698 55\n0.055924 28\n0.488259 2\n0.103938 28\n0.191823 28\n0.128611 28\n0.113334 28\n0.046339 10\n0.193339 21\n0.000033 35\n0.760253 64\n0.615415 28\n0.264341 64\n0.376340 64\n0.149903 1\n0.265556 1\n1.485436 1\n0.215879 1\n0.200353 1\n1.503714 65\n0.178118 64\n0.254876 64\n0.375711 64\n0.241501 53\n0.159522 1\n0.151988 72\n0.231133 65\n0.368378 28\n2.175958 28\n0.071838 28\n0.120019 54\n0.072183 28\n0.111849 28\n0.063961 28\n0.136231 131\n0.137800 25\n0.053983 21\n0.000051 3\n0.152213 28\n0.112134 3\n0.071640 28\n0.192477 28\n0.151753 28\n0.128119 28\n0.072099 65\n5.024346 64\n0.519328 64\n0.159771 1\n0.289390 4\n0.375063 28\n0.239589 28\n0.112324 53\n0.023820 1\n0.664124 49\n0.383934 49\n0.056272 49\n0.168051 49\n0.111613 49\n0.040152 49\n0.152140 49\n0.223779 49\n0.216029 49\n0.208057 49\n0.095985 28\n0.047668 21\n0.000108 4\n1.280290 4\n0.160031 4\n0.263753 4\n0.104170 49\n0.152055 28\n0.063795 21\n0.000052 49\n0.128114 49\n0.160070 49\n0.031707 49\n0.088110 28\n0.424467 30\n0.065583 30\n0.847648 1\n0.421043 1\n0.160159 32\n0.625196 32\n0.152001 32\n0.095990 59\n0.047998 32\n1.585306 32\n0.038460 32\n7.848644 32\n0.223830 32\n0.159976 32\n0.200074 35\n0.656198 35\n0.152669 35\n0.159139 35\n0.167905 32\n0.880111 32\n0.071973 32\n0.151860 32\n0.279982 32\n0.175928 32\n0.152095 32\n0.127724 32\n0.184404 32\n0.111649 32\n0.144202 32\n0.087999 34\n0.096285 23\n0.000097 38\n0.319825 32\n0.199979 32\n0.183933 32\n0.120148 35\n0.280486 32\n0.080035 64\n0.272684 1\n0.712474 4\n0.366888 125\n0.296819 3\n0.190855 41\n0.223908 41\n0.175887 41\n0.039696 41\n0.064126 3\n0.144172 41\n0.112343 41\n0.055835 3\n0.128212 41\n0.064448 41\n0.103306 41\n0.056188 3\n0.135855 41\n0.248044 41\n0.087872 21\n0.280082 22\n0.000096 41\n0.079815 41\n0.111988 41\n0.167994 41\n0.080652 41\n0.063024 3\n0.128944 41\n0.095376 41\n0.064072 41\n0.184225 41\n0.087906 41\n0.023897 41\n0.144065 41\n0.208057 65\n0.488592 64\n0.246401 1\n0.489735 28\n0.390455 28\n0.103953 28\n0.031895 54\n0.112130 64\n0.351916 64\n0.176005 64\n0.424186 64\n0.273668 1\n0.192289 4\n0.437870 125\n0.247966 3\n0.432341 64\n6.560296 7\n0.233455 28\n0.486188 28\n0.111665 53\n0.048286 1\n0.223809 49\n0.432127 49\n0.063957 4\n0.344147 6\n0.128028 64\n3.498006 64\n0.497559 64\n0.047969 64\n0.049837 64\n0.050056 64\n0.049944 65\n0.050664 63\n0.169351 64\n0.287966 2\n0.160023 35\n0.261497 65\n0.000718 1\n0.109856 28\n0.206475 28\n0.168216 28\n0.112040 1\n0.071924 53\n0.000385 28\n0.127401 28\n0.152251 28\n0.112481 28\n0.063291 28\n0.072082 28\n0.039631 3\n0.144298 28\n0.104298 3\n0.079617 28\n0.336210 28\n0.159992 28\n0.207999 47\n0.071772 64\n0.753761 65\n0.134182 65\n0.175732 65\n0.160215 64\n0.175850 64\n0.415555 64\n7.408589 49\n3.007999 49\n0.160230 49\n0.167694 49\n0.176264 28\n0.055666 21\n0.000048 49\n0.368406 49\n0.127782 28\n2.808186 28\n0.127618 28\n0.152033 28\n0.056078 55\n0.088088 28\n0.135957 3\n0.120162 28\n1.319971 30\n0.023754 21\n0.000851 32\n0.207574 28\n0.175887 36\n0.055992 21\n0.000050 10\n0.322971 22\n0.000048 8\n0.643685 41\n0.281301 33\n0.144154 36\n0.159814 22\n0.000049 35\n0.160030 33\n0.144193 30\n0.679735 64\n0.242333 65\n0.925046 64\n0.432360 41\n0.456711 41\n0.175491 41\n0.031884 41\n0.096124 3\n0.120364 41\n0.160478 41\n0.063219 41\n0.079825 41\n0.104140 41\n0.055917 41\n0.176066 41\n0.169133 41\n0.063158 41\n0.072090 3\n0.151982 41\n0.264110 41\n0.055842 41\n0.185523 41\n0.166396 41\n0.136346 3\n0.055775 41\n0.135781 41\n0.104589 3\n0.079886 41\n0.159541 41\n0.079991 41\n0.056549 3\n0.151607 41\n0.048041 41\n0.207917 41\n0.256076 41\n0.055649 41\n0.016088 41\n1.032476 3\n0.095675 41\n0.344111 41\n0.119973 41\n0.128042 41\n0.096108 41\n0.152295 41\n0.135585 41\n0.064003 41\n0.015912 41\n0.160120 41\n0.015706 56\n0.000989 47\n0.001184 38\n0.078336 21\n0.000070 3\n0.664055 41\n0.095745 41\n0.103911 41\n0.072065 3\n0.104341 41\n0.095400 41\n0.176233 41\n0.224202 41\n0.128231 41\n0.031633 41\n0.056098 41\n0.047908 41\n0.208110 159\n0.536840 101\n0.198410 27\n0.000052 4\n0.448853 7\n0.129447 97\n0.381847 28\n0.000050 3\n0.183987 41\n0.632061 1\n0.215946 41\n0.047982 41\n0.135851 41\n0.144087 41\n0.112095 41\n0.248130 41\n0.079919 2\n2.024101 41\n0.359879 41\n0.079762 3\n0.152135 41\n0.296425 41\n0.087482 41\n0.088239 3\n0.104228 41\n0.151762 41\n0.055959 41\n0.192357 41\n0.151681 41\n0.088071 3\n0.095997 41\n0.087803 41\n0.144263 41\n0.071870 41\n0.040008 3\n0.112066 41\n0.120021 3\n0.159982 41\n11.216459 21\n0.295784 22\n0.000100 41\n0.183775 41\n0.112291 41\n0.056055 41\n0.055241 41\n0.280720 3\n0.303835 41\n0.496032 41\n0.088203 41\n0.111695 41\n0.104246 3\n0.103575 41\n0.056342 41\n0.047663 3\n0.104291 41\n0.225842 41\n0.142269 41\n0.107862 41\n0.140200 41\n0.096103 41\n0.088582 41\n0.103079 41\n0.208379 3\n0.087659 41\n0.112121 41\n0.056211 3\n0.113096 41\n0.182922 41\n0.120156 41\n0.063792 41\n0.096325 41\n0.079783 41\n0.128385 41\n0.279923 21\n0.287851 22\n0.000053 21\n0.103700 22\n0.000524 41\n0.199748 41\n0.216018 159\n0.272913 7\n0.312843 125\n0.333466 3\n0.184023 41\n0.280042 41\n0.127590 41\n0.080015 3\n0.136905 41\n0.112263 41\n0.103189 43\n0.512053 43\n0.127812 1\n0.144136 43\n0.151838 43\n0.136077 43\n0.119928 41\n0.071817 1\n0.159989 41\n0.240399 41\n0.159942 41\n0.120113 41\n0.071555 41\n0.192369 41\n0.119817 41\n0.039950 41\n0.095666 41\n0.024266 41\n0.064036 3\n0.168116 41\n0.168047 41\n0.120162 3\n0.095618 65\n2.290900 65\n0.496808 64\n0.049795 65\n0.049978 65\n0.050104 65\n0.050140 64\n0.049929 65\n0.178247 4\n0.399534 285\n0.242612 312\n0.000101 1\n0.184983 28\n0.213704 28\n0.175504 28\n0.032011 54\n0.128525 28\n0.081586 28\n1.678682 28\n0.175562 28\n0.169059 28\n0.042507 28\n0.052260 28\n0.064320 28\n0.175780 3\n0.144191 28\n0.079894 2\n0.080121 28\n0.352124 30\n0.027400 64\n0.558657 65\n0.496885 65\n0.050529 65\n0.050529 64\n0.050776 65\n0.050903 65\n0.050644 65\n0.050461 65\n0.363890 65\n0.500979 64\n0.050894 65\n0.050138 65\n0.049941 65\n0.050214 64\n0.201782 65\n0.160130 4\n0.272930 6\n0.121159 1\n0.000035 28\n0.471042 6\n1.488221 1\n0.000054 28\n0.175833 30\n0.034783 64\n0.502019 65\n0.497610 65\n0.050022 65\n0.050286 64\n0.050017 65\n0.049593 65\n0.051249 65\n0.050140 41\n2.959704 41\n0.128176 3\n0.199797 1\n6.056266 43\n0.135665 43\n0.119837 41\n18.400258 1\n0.159675 41\n0.240133 41\n0.168035 41\n0.096063 41\n0.007887 41\n0.184143 41\n0.039823 41\n0.031927 41\n0.160458 43\n0.232723 43\n0.143137 43\n0.136029 43\n0.135763 43\n0.136171 43\n0.111830 41\n0.096259 41\n0.055680 41\n0.088110 41\n0.144330 43\n0.384033 43\n0.327936 43\n0.143889 43\n0.136022 43\n0.136914 43\n0.134987 1\n0.111999 41\n0.224250 3\n0.063413 41\n0.096402 41\n0.119986 41\n0.224814 3\n0.207147 41\n0.152011 41\n0.120137 41\n0.064003 41\n0.079826 41\n0.111807 41\n0.072363 41\n0.016519 41\n0.167595 3\n0.079747 41\n0.080088 41\n0.128187 3\n0.023696 41\n0.040098 41\n0.072002 41\n0.072127 3\n0.104095 41\n0.047452 41\n0.056441 54\n0.000959 47\n0.000995 57\n0.085747 41\n0.113410 41\n0.062840 66\n0.850358 61\n0.156741 65\n0.311932 66\n0.192251 3\n1.872968 41\n0.863946 41\n0.135569 41\n0.088118 2\n0.143981 1\n0.536253 43\n0.152119 43\n0.161015 43\n0.151503 1\n0.143329 3\n0.720025 41\n0.319949 41\n0.183852 3\n0.063973 41\n0.080119 41\n0.064018 41\n0.167976 3\n0.152283 41\n0.129267 41\n0.094359 41\n0.168203 41\n0.023599 41\n0.200276 1\n0.152294 41\n0.240163 41\n0.135743 41\n0.071608 160\n0.233223 128\n0.230355 4\n0.304023 7\n0.098884 125\n0.325389 3\n0.159758 41\n1.864430 41\n0.071766 41\n0.088139 41\n0.151835 41\n0.080044 3\n0.104460 41\n0.167484 41\n0.063880 41\n0.080021 41\n0.127963 41\n0.112052 41\n0.096108 41\n0.072006 41\n0.087968 3\n0.143866 41\n0.208432 41\n0.135789 41\n0.080253 41\n0.071774 3\n0.184217 41\n0.320267 41\n0.055473 3\n0.488110 41\n0.223974 41\n0.047813 1\n0.120085 1\n0.768543 43\n0.143758 43\n0.120005 41\n0.215996 41\n0.159822 41\n0.159942 41\n0.056025 43\n0.248104 43\n0.499953 43\n0.049941 43\n0.050045 1\n0.051047 43\n0.051527 43\n0.049973 1\n0.050772 43\n0.050368 43\n0.050582 43\n0.051144 41\n0.268688 41\n0.184093 3\n0.119783 41\n0.112176 41\n0.103992 41\n0.071584 41\n0.080178 41\n0.048229 41\n0.023412 1\n0.128632 41\n0.136001 41\n0.160022 3\n0.175745 41\n0.168077 41\n0.111982 41\n0.119962 41\n0.064166 41\n0.071532 41\n0.096887 41\n0.023306 41\n0.112175 41\n0.064226 3\n0.143813 41\n0.272250 41\n0.071864 41\n0.096183 41\n0.231840 41\n0.048064 41\n0.064000 3\n0.088056 41\n0.127801 41\n0.096315 2\n0.048438 41\n0.823552 41\n0.191762 41\n0.103853 41\n0.160238 41\n0.096009 41\n0.232562 41\n0.055743 41\n0.159869 41\n0.256062 3\n0.079943 41\n0.104088 41\n0.047687 72\n0.208759 7\n0.457936 125\n0.285604 3\n0.199230 41\n0.168216 41\n0.151624 41\n0.103762 41\n0.176868 3\n0.079593 41\n0.072108 41\n0.089471 41\n0.046409 41\n0.088027 41\n0.073086 3\n0.086782 41\n0.079721 41\n0.080237 41\n0.087960 41\n0.112094 41\n0.120157 41\n0.104010 41\n0.191932 3\n0.055869 41\n0.184401 41\n0.135921 41\n0.135913 41\n0.048239 41\n0.047538 2\n0.112479 41\n0.159919 41\n0.031656 41\n0.112468 3\n0.103686 41\n0.080094 41\n0.095834 3\n0.056216 41\n0.087811 41\n0.072054 41\n0.087657 3\n0.072374 41\n0.160284 41\n0.039803 41\n0.128208 41\n0.047958 41\n0.135777 1\n0.232052 41\n1.112028 41\n0.143934 41\n0.216286 41\n0.128038 41\n0.087845 41\n0.119616 41\n0.056364 41\n0.151982 3\n0.416319 41\n0.079662 41\n0.056303 41\n0.095684 41\n0.176373 41\n0.047858 41\n0.031617 1\n0.131591 41\n0.196725 41\n0.119941 43\n0.288167 43\n0.135999 1\n0.135873 25\n0.218949 135\n0.000040 80\n0.000036 7\n0.599686 97\n0.252921 28\n0.000110 3\n0.167487 41\n0.176597 41\n0.047809 41\n0.055949 41\n0.127989 41\n0.104366 41\n0.167652 3\n0.047877 41\n0.112009 41\n0.031988 1\n0.103864 41\n0.056384 41\n0.024084 41\n0.079611 41\n0.112263 3\n0.352503 1\n0.224795 21\n0.110814 22\n0.000046 41\n0.048105 3\n0.159803 41\n0.056148 41\n0.191977 41\n0.007726 41\n0.056329 21\n0.551912 22\n0.000049 21\n0.111762 22\n0.000050 41\n0.208085 41\n0.055722 41\n0.168399 41\n0.032387 41\n0.055950 41\n0.136901 41\n0.375395 21\n0.591604 22\n0.000048 41\n0.255900 65\n0.305234 28\n0.680434 1\n0.292316 1\n0.500137 1\n0.049910 1\n0.050554 1\n0.050416 1\n0.049828 1\n0.050905 1\n0.050256 1\n0.050505 1\n0.147499 1\n0.208071 2\n0.392074 64\n2.715382 53\n0.167220 1\n0.175910 72\n0.622848 64\n0.273735 1\n0.288886 74\n16.415032 103\n0.000242 1\n0.000069 1\n0.000052 1\n0.000050 22\n0.000058 259\n2.688320 109\n0.044082 149\n0.001197 24\n0.000037 65\n0.002929 258\n0.510248 108\n0.037318 25\n0.011629 17\n0.000525 46\n1.195692 135\n0.001750 1\n0.734185 1\n0.263869 1\n0.071973 1\n0.079895 1\n0.168357 1\n0.143693 2\n0.153498 70\n0.036210 74\n0.000035 4\n0.019720 1\n1.958769 1\n0.119656 1\n0.256155 1\n0.047798 1\n0.176222 1\n0.471916 1\n0.264025 20\n0.224554 7\n1.127526 1\n0.456036 1\n0.279788 1\n0.111929 1\n0.280161 1\n0.039752 1\n0.048212 139\n0.232704 13\n0.471728 1\n0.199587 1\n0.168416 1\n0.159722 1\n0.152070 13\n0.256297 9\n0.359572 9\n0.112415 12\n0.176209 14\n0.359393 1\n0.584208 1\n0.175974 1\n0.500728 1\n0.050248 1\n0.049667 1\n0.050124 1\n0.050138 1\n0.050874 24\n0.488204 4\n0.247833 4\n0.112099 4\n0.119848 1\n0.160211 1\n0.383765 1\n0.200319 1\n0.023476 1\n0.096374 1\n0.408250 1\n0.499688 1\n0.050602 1\n0.050522 1\n0.050974 1\n0.140140 17\n0.287795 17\n0.120078 13\n0.519817 13\n0.112056 13\n0.136428 16\n0.311623 1\n0.088282 1\n0.500339 1\n0.051150 1\n0.050774 1\n0.050716 1\n0.051090 1\n0.050039 1\n0.050786 1\n0.051383 1\n0.050021 5\n0.685692 5\n0.103441 123\n0.128912 18\n0.479576 1\n0.088045 1\n0.499666 1\n0.050020 1\n0.050006 1\n0.049801 1\n0.050226 1\n0.050086 1\n0.050924 1\n0.050944 1\n0.050543 1\n0.050861 1\n0.051172 1\n0.243471 5\n0.600161 3\n0.384142 3\n0.143737 3\n0.120109 9\n0.575876 12\n0.232423 1\n0.831492 4\n0.656029 2\n0.798590 96\n0.001715 6\n0.624045 15\n0.441299 11\n0.743874 9\n0.126211 1\n0.152329 1\n0.608148 1\n0.039754 9\n0.136237 1312\n0.004047 66\n1.352126 30\n0.077840 21\n0.000054 3\n0.127776 28\n0.223758 28\n0.152106 28\n0.248177 34\n0.031763 21\n0.000053 28\n0.255709 28\n0.392401 31\n0.938560 8\n0.157308 65\n1.338582 4\n0.212864 7\n0.233146 116\n0.000106 1\n0.081631 28\n0.741836 28\n0.183918 28\n0.239862 1\n0.513251 1\n0.000078 36\n0.000073 21\n0.000118 3\n0.079170 28\n0.480830 28\n0.143168 28\n0.175789 26\n0.063739 21\n0.000050 28\n0.168231 28\n0.288156 28\n0.176654 28\n0.159644 26\n0.063802 21\n0.000050 1\n0.942195 1\n0.499997 1\n0.053580 1\n0.050348 1\n0.049960 1\n0.049858 1\n0.049866 1\n0.742426 1\n0.135867 1\n0.176208 1\n0.159724 32\n0.186321 3\n0.574249 65\n2.667126 28\n1.837660 51\n0.071870 3\n0.128177 28\n0.159741 28\n0.088043 28\n0.192273 28\n0.103575 36\n0.064225 21\n0.000053 28\n0.994474 65\n0.928404 37\n0.734357 4\n0.499537 4\n0.050126 4\n0.050903 4\n0.049969 37\n0.050588 4\n0.051156 4\n0.050210 8\n0.050408 1\n0.050680 2\n0.050693 36\n0.000032 1\n0.050206 4\n0.050440 4\n0.159930 5\n0.144274 28\n3.503876 28\n0.320043 28\n0.127659 28\n0.064128 28\n0.160237 3\n0.367644 28\n0.545168 21\n0.000057 1\n0.143313 28\n0.160232 28\n0.175539 28\n0.088044 28\n0.176015 2\n0.047901 46\n0.000078 65\n1.450003 64\n0.181220 65\n0.672272 8\n0.247395 64\n0.449007 8\n0.170270 28\n0.517262 28\n0.208193 28\n0.103715 28\n0.104250 28\n0.143904 3\n0.144531 32\n0.119829 21\n0.000041 3\n0.079714 28\n0.200069 28\n0.176048 28\n0.071705 47\n0.096981 65\n4.514064 65\n0.165122 7\n3.010557 214\n0.000038 1\n0.104181 28\n0.285441 28\n0.264160 3\n0.520038 28\n0.823967 3\n0.472146 2\n0.064341 59\n0.000034 2\n0.119858 28\n0.192111 28\n0.167780 28\n0.144279 47\n0.079861 28\n0.152231 3\n0.063446 28\n0.216396 28\n0.151850 28\n0.136034 47\n0.088178 65\n0.347045 65\n0.139773 64\n0.352502 8\n0.098674 28\n0.357179 28\n0.176367 2\n0.359282 1\n0.304261 28\n0.327888 1\n0.071915 41\n0.248561 21\n0.000077 3\n0.112020 28\n0.063880 64\n2.560341 65\n0.448830 8\n0.361480 2\n0.838256 28\n1.270611 51\n0.079631 3\n10.432575 28\n0.527571 3\n0.144484 28\n0.120236 8\n0.383859 1\n0.135731 3\n0.624202 28\n0.183692 8\n0.472087 1\n0.152879 8\n0.895119 28\n1.383941 28\n0.184100 28\n0.071917 28\n0.071901 28\n0.072033 3\n0.520104 53\n0.144259 42\n0.120016 3\n0.071992 28\n1.592563 28\n0.207291 28\n0.160012 47\n0.064219 28\n0.259189 65\n0.744206 5\n0.268914 117\n0.000082 8\n0.098775 2\n0.445205 122\n0.215792 3\n0.151899 41\n1.176128 41\n0.183892 41\n0.072239 41\n0.135746 2\n0.135963 41\n0.111747 41\n0.120752 41\n0.095398 41\n0.048051 41\n0.071788 3\n0.192374 41\n0.136288 41\n0.079575 1\n0.096181 41\n0.175880 41\n0.160315 41\n0.151720 41\n0.063747 41\n0.160642 3\n0.095757 41\n0.576768 41\n0.103361 41\n0.087840 3\n0.128060 60\n14.043338 61\n0.147894 50\n0.338187 1\n0.328177 70\n0.333900 65\n1.235804 65\n0.495649 65\n0.050321 65\n0.049875 65\n0.049929 65\n0.050376 65\n0.050220 65\n0.050718 65\n0.050391 65\n0.050811 65\n0.393557 65\n0.499952 65\n0.050051 56\n0.000764 47\n0.000607 75\n0.048801 65\n0.050257 65\n0.054210 65\n0.050244 64\n0.050004 66\n0.283007 65\n0.207858 65\n1.448465 8\n4.215502 61\n10.660529 65\n0.147834 65\n0.160204 65\n0.183749 65\n0.160681 65\n0.119642 1\n0.278821 1\n0.499915 1\n0.050122 1\n0.050125 1\n0.054718 1\n0.049571 1\n0.050581 1\n0.050057 1\n0.051322 1\n0.050420 1\n0.050797 1\n0.050116 1\n0.184178 64\n9.723824 64\n0.497039 64\n0.050098 64\n0.049621 64\n0.050098 65\n0.050073 64\n0.049920 61\n0.050097 50\n0.053686 1\n0.046238 1\n0.050157 238\n0.284648 467\n0.000046 64\n0.125445 64\n0.329892 8\n0.192326 2\n0.462356 4\n0.335730 28\n0.183682 28\n0.080142 32\n0.082923 21\n0.000048 1\n0.204862 49\n0.688394 49\n0.071600 49\n0.112451 49\n0.103543 49\n0.040152 49\n0.192374 49\n0.295954 49\n0.199749 49\n0.216372 49\n0.159682 49\n0.152300 4\n0.304075 4\n0.119942 4\n0.111867 49\n0.192160 49\n0.111606 49\n0.112289 28\n0.087701 21\n0.000049 64\n0.353656 75\n0.342567 58\n0.000049 8\n0.089979 2\n0.398364 4\n0.231904 97\n0.343677 28\n0.000049 3\n1.712186 41\n2.367808 41\n0.167884 41\n0.063778 41\n0.128306 3\n0.080205 41\n0.127886 41\n0.064106 3\n0.071797 41\n0.056217 41\n0.087679 41\n0.080104 3\n0.119965 41\n0.232076 41\n0.191835 41\n0.136117 41\n0.079764 2\n0.104561 41\n0.071740 41\n0.080262 41\n0.087817 41\n0.047861 41\n0.047855 41\n0.192537 3\n0.079826 41\n2.328043 41\n0.119817 41\n0.056317 3\n0.127955 41\n0.168134 41\n0.039986 41\n0.183962 41\n0.183955 21\n0.287908 22\n0.000036 21\n0.128370 22\n0.000052 21\n0.143793 22\n0.000049 21\n0.103772 22\n0.000050 41\n0.079475 41\n0.192669 41\n0.079863 21\n0.240051 22\n0.000102 21\n0.103874 22\n0.000055 41\n0.087897 41\n0.111544 41\n0.097119 41\n0.087446 41\n0.176112 41\n0.063742 41\n0.143886 3\n0.064002 41\n0.152273 41\n0.065355 41\n0.158674 41\n0.159806 41\n0.056000 3\n0.111878 41\n0.144398 41\n0.055973 3\n0.111838 41\n0.047686 3\n0.056318 41\n0.168146 41\n0.103753 41\n0.384148 41\n0.080106 41\n0.095959 76\n1.008493 58\n0.000092 8\n0.129279 2\n0.350144 4\n0.319867 97\n0.280050 28\n0.000070 3\n0.127124 41\n0.176303 41\n0.160107 41\n0.064147 3\n0.104001 65\n2.713810 8\n0.213224 3\n0.209212 41\n0.031898 41\n0.208970 41\n0.070964 65\n0.449505 1\n0.374539 21\n0.143979 22\n0.000093 21\n0.175716 22\n0.000039 43\n0.176886 1\n0.575014 11\n0.152028 1\n0.152148 76\n0.152352 59\n0.000053 1\n0.375962 41\n0.671814 41\n0.080011 3\n0.159928 41\n0.176369 41\n0.176168 41\n0.095602 41\n0.104053 41\n0.031957 41\n0.055853 76\n0.328913 58\n0.000036 8\n0.177324 2\n0.541904 4\n0.135786 97\n0.360225 28\n0.000048 3\n0.135281 41\n0.168125 1\n0.199921 41\n0.216380 41\n0.071637 41\n0.112362 41\n0.111667 3\n0.336602 41\n0.239783 41\n0.095564 41\n0.056382 41\n0.031507 3\n0.128309 41\n0.464171 41\n0.223945 41\n0.071997 3\n0.040042 41\n0.073294 41\n0.054403 41\n0.071994 3\n0.088143 41\n0.120008 41\n0.095921 41\n0.088141 41\n0.039772 2\n0.144484 41\n0.160048 41\n0.055949 41\n0.144066 3\n0.007623 3\n0.119941 1\n0.480311 1\n0.119946 21\n0.120091 22\n0.000039 56\n0.001339 47\n0.001325 18\n0.085101 41\n0.040091 3\n0.144006 41\n1.855945 41\n0.088424 41\n0.073381 41\n0.390563 41\n0.216058 41\n0.216690 41\n0.311217 3\n0.111781 41\n0.072184 41\n0.271763 41\n0.055878 1\n0.088161 41\n0.192096 41\n0.072010 41\n0.055896 3\n0.088005 41\n0.128273 41\n0.143803 41\n0.048091 41\n0.192062 41\n0.079606 3\n0.087970 41\n0.208423 3\n0.087844 41\n0.167967 41\n0.063940 41\n0.104595 41\n0.111578 3\n0.071909 41\n0.113427 41\n0.182934 41\n0.071648 41\n0.023978 41\n0.208174 76\n0.496614 58\n0.000035 8\n0.161423 2\n0.357747 4\n0.176167 97\n0.351711 28\n0.000079 3\n0.175646 41\n0.592274 41\n0.128233 41\n0.199550 41\n0.104156 3\n0.072760 41\n0.040433 41\n0.063259 41\n0.135398 41\n0.104967 41\n0.039050 41\n0.136081 3\n0.071610 41\n0.120595 41\n0.103611 41\n0.071782 3\n0.112350 41\n0.200979 41\n0.071117 41\n0.144279 41\n0.087876 41\n0.087752 41\n0.096136 41\n0.048182 41\n0.080066 2\n0.095639 41\n0.120363 41\n0.191752 41\n0.152238 41\n0.071184 41\n0.040786 3\n0.087738 41\n0.152127 41\n0.071962 1\n0.039651 41\n0.024122 41\n0.096072 41\n0.040326 3\n0.152179 41\n0.023608 41\n0.088083 41\n0.048042 41\n0.072090 3\n0.065129 41\n0.150688 41\n0.104021 3\n0.048536 41\n0.055775 3\n0.063786 41\n0.152196 41\n0.063827 41\n0.103926 41\n0.104319 3\n0.272050 41\n0.087985 41\n0.111710 41\n0.063767 1\n0.112140 1\n0.000471 41\n0.559901 41\n0.143896 41\n0.120023 3\n0.199976 41\n0.496005 41\n0.079994 41\n0.096077 41\n0.048185 76\n0.328445 58\n0.000043 8\n0.201449 2\n0.693572 4\n0.151993 97\n0.231646 28\n0.000051 3\n0.127668 41\n0.216670 41\n0.055736 21\n0.328160 22\n0.000049 41\n0.087568 3\n0.128115 41\n0.160311 41\n0.231935 41\n0.039887 41\n0.120194 41\n0.103676 41\n0.104289 41\n0.063945 41\n0.184021 41\n0.135978 41\n0.071729 41\n0.072041 41\n0.008170 41\n0.056155 2\n0.359974 41\n0.152495 41\n0.063361 3\n0.047890 41\n0.016020 41\n0.097664 41\n0.038337 3\n0.152210 41\n0.040139 41\n0.087816 41\n0.056228 41\n0.039933 41\n0.023479 3\n0.048140 41\n0.144475 41\n0.063666 2\n0.104486 41\n0.047545 43\n0.200501 1\n0.095793 21\n0.152069 22\n0.000099 21\n0.151910 22\n0.000100 1\n0.135852 21\n0.111933 22\n0.000102 3\n0.105002 41\n0.102505 41\n0.056529 3\n0.127761 41\n0.032202 1\n0.071987 41\n0.119936 41\n0.079719 41\n0.080002 41\n0.168696 41\n0.063628 41\n0.079863 41\n0.120270 41\n0.224062 3\n1.720060 65\n3.954227 65\n0.180594 65\n0.351873 65\n0.192018 65\n0.656154 65\n0.167963 65\n0.176111 65\n0.231776 65\n0.183918 65\n0.143987 65\n0.768424 65\n0.151921 65\n0.143961 1\n0.458322 3\n0.316492 3\n0.151994 3\n0.159837 3\n0.144217 3\n0.159937 1\n1.376010 3\n0.714473 129\n0.202397 81\n0.000044 36\n0.000029 3\n0.189455 130\n0.248845 116\n0.000108 3\n0.342980 35\n0.192899 5\n0.000044 8\n0.477204 1\n0.233690 21\n0.500373 22\n0.000047 21\n0.049265 22\n0.000046 21\n0.075056 22\n0.000047 21\n0.025195 22\n0.000048 21\n0.050277 22\n0.000080 21\n0.051061 22\n0.000048 21\n0.050167 22\n0.000047 21\n0.050447 22\n0.000093 1\n0.050266 21\n0.050107 22\n0.000048 1\n0.049749 21\n0.050148 22\n0.000046 21\n0.050054 22\n0.000053 1\n0.051041 21\n0.049408 22\n0.000049 21\n0.051895 22\n0.000068 21\n0.049531 22\n0.000049 21\n0.050614 22\n0.000045 1\n0.050066 21\n0.050082 22\n0.000065 21\n0.051376 22\n0.000040 21\n0.050709 22\n0.000115 1\n0.050622 21\n0.051266 22\n0.000061 21\n0.049271 22\n0.000105 1\n0.049954 21\n0.050427 22\n0.000047 21\n0.049533 22\n0.000068 21\n0.050250 22\n0.000041 21\n0.049515 22\n0.000069 21\n0.050360 22\n0.000040 21\n0.049841 22\n0.000052 21\n0.050143 22\n0.000038 21\n0.049961 22\n0.000115 21\n0.050662 22\n0.000110 21\n0.050258 22\n0.000109 21\n0.051303 22\n0.000043 21\n0.050375 22\n0.000106 21\n0.049785 22\n0.000100 1\n0.049804 43\n0.113234 21\n0.135821 22\n0.000048 41\n0.119636 41\n0.264088 41\n0.063961 41\n0.072186 21\n0.520108 22\n0.000052 21\n0.128116 22\n0.000050 21\n0.135645 22\n0.000053 41\n0.087965 41\n0.104029 41\n0.023910 41\n0.344157 41\n0.072121 21\n0.208010 22\n0.000050 21\n0.119848 22\n0.000049 21\n0.144079 22\n0.000049 41\n0.071537 41\n0.024689 41\n0.303853 56\n0.001500 47\n0.001050 18\n0.149379 1\n0.255966 21\n0.119970 22\n0.000769 3\n0.087248 41\n0.104104 41\n0.104779 2\n0.087013 41\n0.208438 41\n0.159683 41\n0.167998 41\n0.039780 3\n0.336053 41\n0.128009 41\n0.175975 41\n0.160319 41\n0.143905 41\n0.079843 41\n0.088190 41\n0.191869 41\n0.023760 41\n0.160093 3\n0.088059 41\n0.160446 41\n0.039794 41\n0.184975 41\n0.175207 41\n0.103755 41\n0.120012 3\n0.095930 41\n0.640286 41\n0.039591 41\n0.216123 41\n0.127898 41\n0.087874 49\n0.186838 76\n0.390199 58\n0.000101 8\n0.497406 2\n0.501771 4\n0.175817 1\n0.184145 8\n0.426271 2\n0.109865 4\n0.471804 97\n0.319655 28\n0.000049 3\n0.184207 41\n0.159852 41\n0.191966 41\n0.151969 41\n0.088126 41\n0.080097 41\n0.200928 41\n0.046555 41\n0.152205 65\n1.794234 79\n0.286570 79\n0.111685 77\n0.128179 80\n0.192055 80\n0.143929 53\n0.144891 24\n0.000054 52\n0.167091 23\n0.000052 65\n1.441164 2\n0.222623 1\n0.175713 41\n0.231912 41\n0.608092 41\n0.207938 41\n0.080219 41\n0.113779 3\n0.142157 41\n0.616030 41\n0.528043 41\n0.056013 41\n0.136612 41\n0.095407 3\n0.167901 41\n0.095925 41\n0.056209 2\n0.143975 41\n3.487885 41\n0.176357 41\n0.143903 41\n0.087686 41\n0.103930 41\n0.048328 41\n0.120996 41\n0.199037 1\n0.087637 41\n0.088057 41\n0.096126 41\n0.320138 41\n0.256097 41\n0.376095 41\n0.079834 41\n0.320170 21\n0.736024 22\n0.000103 41\n0.231775 49\n0.306775 76\n0.397771 58\n0.000091 8\n0.265573 2\n0.397875 4\n0.215570 97\n0.495858 28\n0.000078 13\n0.619187 2\n1.060778 66\n0.000067 42\n0.336081 28\n0.000051 3\n0.464691 41\n5.326985 41\n0.152025 41\n0.192216 41\n0.215969 18\n0.667150 68\n0.525624 44\n0.392387 29\n0.000107 3\n1.406885 41\n0.855971 41\n0.192238 41\n0.048583 41\n0.118607 1\n0.536468 1\n1.198503 41\n0.617418 3\n0.095872 65\n0.177956 1\n0.076571 1\n0.184130 56\n0.577811 21\n0.000048 84\n0.071739 65\n0.241771 1\n0.100330 1\n0.152245 51\n0.322275 22\n0.000065 80\n0.151894 65\n0.472668 81\n0.062616 65\n0.329882 77\n0.302872 65\n0.160692 65\n0.149880 41\n3.368796 41\n0.320044 41\n0.159865 41\n0.127980 41\n0.240058 21\n0.328227 22\n0.000100 21\n0.167817 22\n0.000052 21\n0.168120 22\n0.000050 21\n0.151663 22\n0.000049 21\n0.128331 22\n0.000050 41\n0.263305 41\n0.120418 3\n0.087505 41\n0.152442 41\n0.056102 41\n0.104817 41\n0.087157 41\n0.224087 3\n0.119744 41\n0.216194 41\n0.087471 41\n0.104517 41\n0.112001 41\n0.152037 41\n0.127826 41\n0.039974 41\n0.167960 41\n0.071995 21\n0.352393 22\n0.000050 43\n0.121071 41\n0.014849 41\n0.087652 41\n0.047983 41\n0.096240 3\n0.184167 41\n0.271897 41\n0.064086 3\n0.200036 41\n0.375909 41\n0.055944 41\n0.111926 41\n0.087975 41\n0.023957 2\n0.088088 41\n0.176175 41\n0.159855 3\n0.168309 41\n0.231970 41\n0.032209 41\n0.135687 41\n0.119803 76\n0.361034 58\n0.000098 8\n0.521549 2\n0.805391 4\n0.391836 97\n0.359664 28\n0.000052 3\n0.199959 2\n0.499995 1\n0.049948 3\n0.050168 3\n0.050232 3\n0.049726 3\n0.050226 3\n0.051042 3\n0.051330 2\n0.050772 1\n0.050568 3\n0.052177 41\n0.442024 41\n0.216495 3\n0.087606 41\n0.207667 41\n0.106235 41\n0.077893 41\n0.160269 41\n0.087912 41\n0.320056 41\n0.104053 41\n0.344019 41\n0.007883 3\n0.088358 1\n0.304017 21\n0.112236 22\n0.000043 3\n0.127389 41\n0.208601 41\n0.175281 41\n0.039916 41\n0.039831 3\n0.096107 41\n0.128314 41\n0.079654 3\n0.056470 41\n0.167925 41\n0.151941 41\n0.071767 41\n0.128368 41\n0.087975 41\n0.103958 41\n0.096977 41\n0.079018 3\n0.111840 41\n0.095945 41\n0.176477 41\n0.064215 41\n0.199612 41\n0.160236 41\n1.671973 41\n0.071843 41\n0.111992 41\n0.103989 41\n0.031867 65\n0.586119 64\n0.205001 65\n0.615959 28\n0.768381 28\n0.496531 28\n0.231645 28\n0.031756 34\n0.136418 21\n0.000051 28\n0.111312 3\n0.089108 28\n2.343712 28\n0.183660 28\n0.103981 56\n0.001295 47\n0.001286 25\n0.085650 21\n0.000099 28\n0.207982 36\n0.379773 36\n0.438777 61\n0.413323 1\n0.098121 28\n1.405625 51\n0.055790 3\n0.144369 28\n1.335731 28\n0.144122 28\n0.256053 34\n0.031682 21\n0.000054 28\n0.263945 28\n0.384365 28\n0.296042 28\n0.128836 28\n0.078899 28\n0.160033 65\n0.915300 65\n0.497035 65\n0.049684 65\n0.050580 65\n0.050193 64\n0.051137 65\n0.050516 64\n0.050721 64\n0.051109 64\n0.051347 64\n0.050192 64\n0.049599 64\n0.050777 64\n0.050957 1\n0.403737 3\n0.827552 24\n0.183276 83\n0.000072 140\n0.000446 3\n0.166597 24\n0.152458 199\n0.000039 3\n0.151510 24\n0.160691 129\n0.000039 3\n0.159466 24\n0.160003 51\n0.000034 33\n0.000031 3\n0.167312 24\n0.152804 132\n0.000042 24\n0.168388 100\n0.000074 89\n0.000597 3\n0.374392 24\n0.680282 68\n0.000044 33\n0.000037 7\n0.506181 3\n0.469414 28\n2.136138 28\n0.079723 28\n0.104075 28\n0.272020 28\n0.096334 59\n0.119792 3\n0.095735 28\n0.232257 28\n0.080126 28\n0.104059 28\n0.119817 28\n0.064081 28\n0.233131 28\n0.158753 28\n0.279884 28\n0.288121 28\n0.143894 28\n0.160372 28\n0.072389 28\n0.248002 28\n1.551550 31\n0.233566 64\n0.838505 64\n0.798744 64\n0.632232 1\n0.183019 64\n0.537023 63\n1.103776 64\n0.824460 3\n0.207154 64\n0.665417 902\n0.179041 392\n0.000038 315\n0.000696 65\n0.355163 65\n0.248208 64\n0.368075 65\n0.327880 99\n0.417367 1\n0.171017 28\n0.459917 28\n0.095569 28\n0.160286 28\n0.007708 4\n0.440991 4\n0.103511 28\n0.207857 2\n0.072018 52\n0.000033 3\n0.176046 28\n0.592245 28\n0.240058 28\n0.136013 28\n0.023793 28\n0.071860 3\n1.112363 53\n0.337334 42\n0.134875 3\n1.935769 1\n2.982302 3\n0.969452 163\n0.393247 64\n0.544972 64\n0.497416 64\n0.050627 64\n0.049692 65\n0.050240 65\n0.221239 64\n0.499923 64\n0.049896 64\n0.050229 64\n0.051384 64\n0.050790 64\n0.050687 64\n0.050684 64\n0.548373 64\n0.500020 64\n0.049919 64\n0.050200 64\n0.049978 64\n0.049521 64\n0.051167 65\n0.050738 64\n0.050304 61\n0.049940 50\n0.052514 1\n0.049724 1\n0.046844 69\n0.157247 64\n0.168057 8\n0.303417 62\n0.332707 3\n0.155394 66\n0.508967 60\n0.283361 61\n0.312309 50\n0.234241 408\n0.783997 427\n0.000049 64\n0.431030 64\n0.486328 8\n0.263354 9\n0.819183 23\n0.000087 8\n0.500328 1\n0.500225 1\n0.050996 1\n0.050711 104\n0.053590 18\n0.049073 1\n0.050096 1\n0.050365 4\n0.267363 1\n0.255584 1\n0.499987 1\n0.049973 1\n0.050243 1\n0.049910 1\n0.049811 1\n0.050310 1\n0.569989 3\n0.240427 2\n0.400830 28\n0.704108 30\n0.063776 21\n0.000121 3\n0.127750 28\n0.152086 28\n0.152104 32\n0.031906 21\n0.000041 3\n0.168250 28\n1.968111 28\n0.104155 28\n0.199859 28\n0.071637 36\n0.104416 21\n0.000054 28\n0.250165 64\n0.213815 8\n0.121791 28\n8.621843 28\n0.039859 28\n0.328242 28\n0.104162 36\n0.031683 21\n0.000073 3\n0.215928 28\n0.255921 28\n0.215896 28\n0.064043 28\n0.152118 28\n0.095952 28\n0.127848 28\n0.128137 28\n0.048081 28\n0.175939 28\n0.344276 30\n0.042553 6\n0.261643 4\n0.119633 4\n0.143986 36\n0.208269 21\n0.000051 28\n0.295853 30\n0.058560 3\n0.595558 168\n0.818252 29\n0.000086 21\n0.079686 22\n0.000081 21\n0.199989 22\n0.000048 21\n0.272368 22\n0.000361 21\n0.063104 22\n0.000050 21\n0.104046 22\n0.000047 21\n0.191938 22\n0.000050 21\n0.272001 22\n0.000049 21\n0.184055 22\n0.000046 21\n0.096199 22\n0.000055 21\n0.175867 22\n0.000047 21\n0.064019 22\n0.000055 21\n0.201231 22\n0.000065 21\n0.078487 22\n0.000045 21\n0.055774 22\n0.000043 21\n0.144115 22\n0.000047 21\n0.039865 22\n0.000045 21\n0.079977 22\n0.000049 43\n0.120589 21\n0.071208 22\n0.000052 21\n0.168313 22\n0.000050 22\n1.064211 23\n0.000049 22\n0.499529 23\n0.000582 22\n0.049470 23\n0.000048 22\n0.050119 23\n0.000051 22\n0.051234 23\n0.000076 22\n0.332634 23\n0.000049 29\n1.087917 29\n0.000152 1\n0.725836 22\n0.482709 23\n0.000087 3\n0.709658 65\n1.131208 64\n0.133649 65\n0.200341 65\n0.319227 62\n0.192207 65\n0.168240 64\n0.191468 64\n0.216056 53\n0.249749 16\n0.567701 2\n0.550737 28\n1.104191 51\n0.055717 3\n0.256040 28\n0.480559 28\n0.255486 28\n0.336044 55\n0.095813 37\n0.688067 4\n0.500354 4\n0.050700 8\n0.051314 1\n0.051270 33\n0.122394 5\n0.136216 28\n0.271988 28\n0.184035 28\n0.271913 3\n0.111832 2\n0.160898 58\n0.000037 3\n0.119671 28\n0.096012 28\n0.560354 28\n0.087281 4\n0.360709 28\n0.153911 28\n0.013915 28\n0.152148 64\n0.577446 108\n0.464233 65\n0.375923 56\n0.174967 74\n0.552328 64\n0.142988 64\n0.135398 64\n0.314262 1\n0.144336 101\n28.004452 45\n0.497246 51\n0.079322 3\n0.344361 1\n0.840105 33\n0.151866 5\n0.159957 115\n6.816573 173\n0.044058 17\n0.577834 102\n0.634796 29\n0.000038 1\n0.952090 49\n0.001801 55\n0.000275 1\n0.000210 622\n0.000203 232\n0.000157 97\n0.000288 342\n0.000130 103\n0.766109 29\n0.000040 1\n0.187841 49\n0.003269 93\n0.000589 732\n0.000034 85\n0.000030 233\n0.000322 102\n0.430800 29\n0.000040 41\n0.461356 37\n0.288452 1383\n0.611444 655\n0.789699 265\n0.000052 773\n0.000821 508\n2.204884 349\n0.000046 2\n0.000080 316\n0.000481 580\n0.968403 161\n0.000047 166\n0.001109 4\n0.216310 968\n0.000043 418\n0.000548 5\n0.176224 897\n0.000096 296\n0.000450 42\n0.872044 885\n0.000113 377\n0.000080 197\n0.000530 611\n0.199808 477\n0.000045 278\n0.000539 106\n0.471032 852\n0.000054 331\n0.000032 130\n0.000510 139\n2.415624 812\n0.000159 429\n0.000614 111\n2.381883 802\n0.000088 353\n0.000498 130\n0.928232 872\n0.000089 485\n0.000714 60\n0.785436 915\n0.000115 833\n0.000547 98\n3.117795 29\n0.000040 1209\n1.023332 102\n1.423322 29\n0.000040 1\n0.448697 49\n0.002468 176\n0.000761 1\n0.000251 808\n0.000215 299\n0.000540 1\n0.000241 56\n0.000185 1\n0.000202 153\n0.000187 1\n0.000206 29\n0.000171 3\n0.000301 1\n0.000173 87\n0.000166 1\n0.000186 87\n0.000164 1\n0.000185 179\n0.000788 5\n0.566282 800\n0.000040 209\n0.000039 116\n0.000031 399\n0.000598 110\n0.941180 81\n0.000087 1\n0.000483 879\n0.000281 236\n0.000500 104\n0.520109 896\n0.000124 115\n0.000032 369\n0.000575 60\n0.172319 915\n0.000051 546\n0.000528 287\n0.000057 314\n0.177434 668\n0.000054 192\n0.000076 434\n0.000833 98\n1.555928 29\n0.000043 1\n0.164558 49\n0.002171 1046\n0.000631 66\n2.255514 3\n0.325854 24\n0.176348 21\n0.000097 3\n0.087670 28\n0.272212 28\n0.032115 28\n0.136003 28\n0.079897 28\n0.240022 4\n0.664199 4\n0.160277 4\n0.143826 4\n0.152032 8\n0.128110 28\n0.167713 28\n0.128039 28\n0.095777 34\n0.071748 21\n0.000050 28\n0.104149 28\n0.080109 28\n0.143900 28\n0.136046 28\n0.087965 28\n0.128270 28\n0.207853 28\n0.032223 28\n0.136670 28\n0.094969 28\n0.512241 28\n0.168013 28\n0.095836 28\n0.384299 28\n1.088155 28\n0.144105 28\n0.191936 33\n0.243360 8\n1.001789 61\n0.170992 1\n0.233986 28\n0.845140 30\n0.079785 21\n0.000052 3\n0.152938 65\n1.290068 8\n0.724473 62\n0.563211 28\n3.301773 28\n0.175725 53\n0.055905 2\n0.120103 28\n0.145207 28\n0.281828 64\n0.301007 8\n0.147180 28\n1.236972 28\n0.047693 28\n0.103964 28\n0.144025 28\n0.055877 59\n0.136279 3\n0.031802 28\n0.192142 28\n0.167845 28\n0.112437 47\n0.064044 64\n1.343834 64\n0.512333 8\n0.226933 2\n0.532954 64\n0.410861 64\n0.180691 64\n0.159689 64\n0.168240 64\n0.232032 70\n1.442302 170\n0.000046 65\n0.400320 8\n0.188709 162\n0.258122 162\n0.239054 1\n0.154862 122\n0.412840 3\n0.159737 41\n0.176317 41\n0.151837 3\n0.129123 41\n0.927120 41\n0.136169 1\n0.199879 41\n0.160432 41\n0.055498 41\n0.144179 41\n0.122370 41\n0.125663 3\n0.143640 41\n1.976492 41\n0.127790 41\n0.071723 41\n0.040368 41\n0.111823 3\n0.192222 41\n1.095866 41\n0.095994 41\n0.087666 1\n0.113025 41\n0.599363 41\n0.088087 41\n0.079751 41\n0.136101 41\n0.103975 41\n0.152010 41\n0.024048 65\n0.498811 65\n0.172213 64\n0.344952 65\n0.543100 28\n1.240442 51\n0.063523 3\n0.128409 28\n0.368147 65\n4.227639 6\n0.340687 90\n0.000041 8\n0.099022 2\n0.452946 122\n0.319722 3\n0.119539 1\n0.440615 3\n0.703582 41\n0.248407 41\n0.159744 3\n0.087853 41\n0.168221 41\n0.039942 41\n0.119811 41\n0.096201 3\n0.079833 41\n0.128383 41\n0.071847 3\n0.079706 41\n0.128463 41\n0.135791 41\n0.079777 3\n0.088043 41\n0.112490 41\n0.183733 41\n0.120081 41\n0.056754 41\n0.103338 41\n0.056158 41\n0.096092 41\n0.199754 41\n0.232019 3\n0.087821 41\n0.049254 41\n0.102848 41\n0.072281 41\n0.160072 41\n0.143779 43\n0.616453 41\n0.079491 41\n0.144407 3\n0.079589 41\n0.088154 41\n0.128048 41\n0.079543 41\n0.096175 41\n0.056171 41\n0.088401 41\n0.095689 41\n0.176250 65\n0.522701 54\n0.000899 47\n0.000864 16\n1.715225 28\n0.095500 28\n0.224056 53\n0.064098 3\n0.103717 28\n1.040471 28\n0.031742 4\n0.512295 28\n0.232560 28\n0.087470 28\n0.055434 28\n0.136218 28\n0.072028 1\n0.120095 28\n0.456200 51\n0.056135 3\n0.127696 28\n0.152110 28\n0.152137 28\n0.007738 4\n0.520293 4\n0.119986 28\n0.135868 53\n0.071821 1\n0.216483 1\n0.000417 28\n0.479552 5\n0.384054 2\n0.000403 28\n0.079105 28\n0.096263 28\n0.088130 55\n0.087780 28\n0.087712 28\n0.080243 28\n0.128345 28\n0.095860 28\n0.079890 28\n0.128131 28\n0.392055 28\n0.192190 28\n0.159905 28\n0.128376 28\n0.079843 28\n0.095589 28\n0.064341 28\n0.247955 28\n0.103915 28\n0.016790 28\n0.071388 28\n0.072545 28\n0.303511 30\n0.052799 30\n0.263162 64\n0.388330 8\n0.082588 28\n0.612406 28\n0.063909 28\n0.112073 28\n0.111790 28\n0.088186 4\n0.496190 28\n0.391873 59\n0.095702 3\n0.088274 28\n0.119760 28\n0.160138 28\n0.120139 47\n0.048590 61\n0.391749 82\n0.225686 621\n0.000049 8\n0.344456 2\n0.421922 93\n0.527283 29\n0.000033 3\n0.216124 41\n0.151869 41\n0.208346 3\n0.072070 41\n0.383893 41\n0.057114 41\n0.094733 41\n0.080037 3\n5.360234 41\n0.143996 41\n0.079665 3\n0.104406 41\n0.063808 41\n0.152342 41\n0.063555 41\n0.096151 41\n0.079999 41\n0.087654 41\n0.144387 41\n0.247965 3\n0.773522 41\n0.056004 41\n0.160113 41\n0.063909 3\n0.144101 1\n1.394490 21\n0.151906 22\n0.000044 21\n0.144046 22\n0.000053 43\n0.144327 1\n0.143510 41\n0.456007 2\n0.095983 41\n0.111820 41\n0.048058 41\n0.105504 3\n0.070535 41\n0.152064 41\n0.120095 41\n0.087705 1\n0.073164 1\n0.000093 41\n0.127075 41\n0.031973 41\n0.127931 41\n0.031819 41\n0.144159 41\n0.240222 3\n0.071696 41\n0.040256 41\n0.056102 41\n0.104007 41\n0.087560 41\n0.079980 41\n0.112188 3\n0.072049 41\n0.079824 41\n0.136338 41\n0.080039 41\n0.095839 41\n0.040019 41\n0.120372 41\n0.055950 41\n0.695967 64\n0.896360 1\n0.481521 28\n0.485722 51\n0.087623 3\n0.144432 28\n1.031955 3\n0.208855 28\n0.223838 28\n0.439322 53\n0.104135 3\n0.319495 28\n0.200423 28\n0.295998 28\n0.152017 28\n0.095553 4\n0.417116 28\n0.054970 28\n0.032284 28\n0.143936 1\n0.176109 28\n0.448032 30\n0.111591 21\n0.000084 3\n0.368052 28\n0.424310 28\n0.120033 28\n0.063920 34\n0.120090 21\n0.000976 28\n0.094864 28\n0.144134 4\n0.535901 28\n0.063972 28\n0.136208 28\n0.119997 28\n0.079935 28\n0.183958 65\n0.593890 64\n0.497424 65\n0.050592 64\n0.050451 64\n0.050440 64\n0.049628 64\n0.050437 64\n0.049924 64\n0.050928 62\n0.051014 64\n0.050578 102\n0.054877 811\n0.000049 2\n0.000073 301\n0.000490 363\n0.000101 65\n0.044895 65\n0.441952 65\n0.167539 35\n0.282746 64\n0.000107 1\n0.185678 28\n0.220422 28\n0.040048 28\n0.071719 28\n0.152088 3\n0.088147 2\n0.168291 46\n0.000034 2\n0.087865 66\n0.064260 28\n0.128044 28\n0.072011 55\n0.103819 28\n0.079722 28\n0.088616 28\n0.120077 28\n0.047540 28\n0.136265 28\n0.096251 28\n0.111669 28\n0.120326 28\n0.071704 28\n0.112800 28\n0.087641 28\n0.119781 28\n0.071679 28\n0.264361 28\n0.144220 28\n0.039684 28\n0.048088 28\n0.111731 28\n0.304619 30\n0.013533 64\n0.677209 65\n0.002616 64\n0.284963 65\n0.171760 65\n0.159939 65\n0.151919 65\n0.160079 65\n0.160063 65\n0.168119 1\n0.222824 1\n0.505476 1\n0.045520 1\n0.049836 1\n0.050166 1\n0.049937 1\n0.050892 1\n0.144182 37\n0.250535 53\n0.000771 47\n0.000946 46\n0.498164 31\n0.049821 31\n0.050105 31\n0.049933 31\n0.050157 56\n0.049940 33\n0.049725 31\n0.050937 31\n0.050045 31\n0.049841 31\n0.050786 33\n0.050392 31\n0.049972 31\n0.049804 31\n0.050079 18\n0.050568 26\n0.000096 44\n0.050260 42\n0.076104 40\n0.024757 38\n0.084247 36\n0.343878 34\n0.152021 66\n0.135965 43\n0.104184 21\n0.000033 30\n0.039698 30\n0.048305 30\n0.151690 33\n0.593426 30\n0.622695 60\n0.348103 79\n0.157428 824\n0.000059 62\n0.157397 62\n0.576274 3\n0.374821 1\n0.648039 1\n0.499926 1\n0.049969 1\n0.053061 1\n0.051219 1\n0.050088 1\n0.050648 1\n0.050297 1\n0.050806 8\n0.984453 4\n0.505396 4\n0.499809 4\n0.049844 4\n0.050116 4\n0.050058 4\n0.050336 37\n0.051051 4\n0.050573 4\n0.050272 8\n0.147576 28\n0.216257 28\n0.049012 28\n0.038683 28\n0.431960 4\n0.560540 28\n1.151691 1\n0.087577 28\n0.072504 28\n0.375820 4\n0.728059 28\n1.760113 32\n0.096069 21\n0.000054 3\n0.287888 28\n0.519948 8\n0.520195 28\n3.815941 28\n0.191816 32\n0.095743 21\n0.000097 1\n0.152315 28\n0.175742 28\n0.344285 28\n0.055894 4\n0.312316 4\n0.111446 6\n0.128261 28\n0.119708 28\n0.055983 4\n0.256352 5\n0.095992 1\n0.000047 28\n0.216141 28\n0.223843 28\n0.071809 28\n0.055914 28\n0.104012 28\n0.023820 28\n0.480232 28\n0.642903 64\n0.325290 8\n0.114186 28\n0.269264 28\n0.047770 28\n0.104292 28\n0.072034 28\n0.104037 38\n0.105005 21\n0.000056 3\n0.094971 28\n0.319813 28\n0.175906 28\n0.128087 26\n0.064424 21\n0.000068 64\n0.288231 64\n0.143650 8\n0.186977 2\n0.461088 93\n0.335782 29\n0.000420 3\n0.135574 41\n0.137035 41\n0.190744 3\n0.127789 41\n0.216360 41\n0.160253 41\n0.095781 3\n0.112042 41\n0.224821 41\n0.095183 3\n0.104092 1\n0.559960 21\n0.135967 22\n0.000035 43\n0.152332 1\n0.143759 21\n0.135930 22\n0.000048 21\n0.119976 22\n0.000052 41\n0.216033 41\n0.055540 41\n0.088122 41\n0.063826 3\n0.153088 1\n0.327591 21\n0.119554 22\n0.000041 3\n0.055602 41\n0.128545 41\n0.063679 3\n0.112214 41\n0.064030 41\n0.151878 41\n0.079853 41\n0.120164 41\n0.095926 41\n0.528282 41\n0.104237 41\n0.199930 3\n0.031929 41\n0.055382 41\n0.104283 41\n0.056031 3\n0.119812 41\n0.048128 41\n0.064308 41\n0.119702 21\n0.577680 22\n0.000119 41\n0.310523 41\n0.031873 41\n0.152083 41\n0.255909 3\n0.040038 41\n0.031708 41\n0.184454 41\n0.176005 41\n0.103710 41\n0.176244 41\n0.135915 21\n0.256240 22\n0.000101 21\n0.119764 22\n0.000106 21\n0.127911 22\n0.000049 41\n0.279856 41\n0.184224 41\n0.095644 1\n0.072000 41\n0.072089 41\n0.040052 3\n0.119846 41\n0.161312 64\n2.017330 65\n0.497021 64\n0.531896 65\n0.167842 41\n0.952836 41\n0.128065 41\n0.135949 41\n0.015835 41\n0.064239 3\n0.169475 41\n0.030935 41\n0.071330 41\n0.112300 41\n0.071938 41\n0.048041 1\n1.120060 41\n0.063891 41\n0.095729 56\n0.001303 47\n0.001199 38\n0.069791 21\n0.000048 65\n0.360723 1\n0.282165 93\n0.324771 29\n0.000053 3\n0.199754 41\n0.160177 41\n0.160002 41\n0.055853 41\n0.048016 1\n0.217363 1\n0.000051 1\n0.262731 21\n0.144017 22\n0.000107 21\n0.144044 22\n0.000068 21\n0.136109 22\n0.000048 21\n0.127593 22\n0.000051 41\n0.120132 41\n0.128006 41\n0.047623 41\n0.056169 2\n0.120200 41\n0.471683 41\n0.144123 41\n0.064169 3\n0.160032 41\n2.560108 41\n0.079752 41\n0.136087 41\n0.064103 41\n0.031465 41\n0.096140 41\n0.152041 41\n0.120153 41\n0.040209 41\n0.055513 3\n0.112474 41\n0.223963 41\n0.103594 41\n0.064164 3\n0.104146 41\n0.168294 41\n0.136307 41\n0.047391 41\n0.056264 2\n0.055868 41\n0.145267 41\n0.110648 3\n0.071823 41\n0.160363 41\n0.071755 41\n0.104082 41\n0.152919 41\n0.079813 1\n0.087646 41\n0.167670 41\n0.045125 41\n0.131634 41\n0.103432 3\n0.103733 41\n0.136416 41\n0.143980 41\n0.031593 41\n0.032054 41\n0.152359 41\n0.055910 41\n0.047828 41\n0.144363 41\n0.071496 41\n0.128549 64\n1.408417 1\n0.082094 28\n0.428744 51\n0.079547 3\n0.120528 28\n0.128145 3\n0.199708 28\n0.087845 28\n0.088304 53\n0.055808 3\n0.119836 28\n0.136591 28\n0.271984 28\n0.127942 28\n0.079727 28\n0.063902 28\n0.168215 1\n0.592245 28\n0.127638 51\n0.087970 3\n0.104229 28\n0.088081 28\n0.064053 28\n0.072100 28\n0.135653 1\n0.552382 28\n0.055674 28\n0.096183 53\n0.072498 3\n0.111267 28\n0.168144 28\n0.232003 28\n0.055905 28\n0.048101 28\n0.103837 28\n0.048101 28\n0.328104 28\n0.371807 64\n0.308264 8\n0.179414 28\n2.604632 28\n0.167871 28\n0.071995 55\n0.135685 28\n0.096506 28\n0.103469 28\n0.136169 28\n0.063879 28\n0.064479 28\n0.042340 2\n0.133382 28\n0.112160 3\n0.079846 105\n0.192460 41\n0.232228 41\n0.151824 41\n0.087804 41\n0.120296 41\n0.039816 41\n0.071941 44\n0.272508 62\n0.304390 8\n0.082585 28\n0.171925 28\n0.184145 28\n0.064046 55\n0.095897 28\n0.087667 1\n0.918915 5\n0.476982 910\n0.000052 536\n0.000528 133\n0.000092 190\n0.000268 649\n0.404986 417\n0.000042 453\n0.000592 217\n0.756166 739\n0.000115 2\n0.000076 713\n0.000673 279\n0.229090 783\n0.000100 74\n0.000584 63\n0.691477 63\n0.499969 63\n0.050229 63\n0.050391 63\n0.076414 63\n0.023155 63\n0.050176 64\n0.051204 64\n0.049924 64\n0.050781 65\n0.050819 64\n0.050583 64\n0.050690 64\n0.225029 8\n0.127224 28\n0.424993 28\n0.232780 28\n0.175381 28\n0.039705 28\n0.088062 28\n0.032315 28\n0.199894 3\n0.704233 28\n0.119869 3\n0.056385 28\n3.736187 28\n0.135615 28\n0.031856 55\n0.128571 28\n0.079467 28\n0.087973 28\n0.144358 28\n0.111639 28\n0.089234 28\n0.127065 28\n1.120401 28\n0.103496 28\n0.056227 28\n0.183947 28\n0.225338 28\n0.118685 28\n0.016362 28\n0.031858 28\n0.272167 28\n0.095776 28\n0.087670 28\n0.056118 28\n0.129008 28\n0.010702 28\n0.340704 28\n0.448250 28\n0.096411 28\n0.255495 33\n0.308028 1\n0.545611 116\n0.041515 175\n0.038264 148\n1.261525 8\n0.399406 28\n0.292458 28\n0.064101 28\n0.111780 28\n0.127809 28\n0.104259 38\n0.152039 21\n0.000103 3\n0.127944 28\n0.088053 28\n0.167907 28\n0.056128 34\n0.119868 21\n0.000107 28\n0.111946 28\n0.208136 28\n0.111923 28\n0.160079 28\n0.047940 28\n0.047935 28\n0.047867 28\n0.272246 116\n1.088072 175\n0.056072 221\n72.770858 761\n0.000050 659\n0.000586 65\n1.634003 64\n0.494108 64\n0.050289 64\n0.050448 64\n0.050403 64\n0.050423 64\n0.050692 64\n0.050448 64\n0.051756 64\n0.050373 65\n0.053681 64\n0.049992 63\n0.050581 63\n0.050821 63\n0.049797 63\n0.152374 6\n0.231531 24\n0.229783 146\n0.000584 1\n0.142911 28\n0.284417 51\n0.087723 3\n0.120300 28\n0.119572 28\n0.177465 28\n0.070782 28\n0.056074 28\n0.032113 3\n0.280041 53\n0.144203 42\n0.128144 3\n0.255933 204\n0.152245 41\n0.472162 41\n0.143842 41\n0.095972 41\n0.120130 41\n0.047755 41\n0.024748 993\n0.508512 408\n0.000042 56\n1.003141 28\n0.098577 3\n0.221382 28\n0.167879 28\n0.063617 28\n0.112853 28\n0.079656 28\n0.095913 59\n0.080405 3\n0.120137 28\n0.159670 28\n0.079649 28\n0.087783 28\n0.200463 65\n0.032900 28\n0.183400 28\n0.135793 28\n0.170205 28\n0.181801 28\n0.111842 934\n0.509736 253\n0.000121 28\n0.049992 28\n0.128250 28\n0.047685 28\n0.047835 28\n0.368531 28\n0.432073 31\n0.156467 64\n0.379895 1\n0.092233 1\n0.500746 1\n0.050959 1\n0.050909 1\n0.050444 1\n0.050479 1\n0.050561 1\n0.050565 1\n0.050859 1\n0.050323 1\n0.050767 1\n0.050995 1\n0.050946 1\n0.050645 1\n0.049758 1\n0.050724 1\n0.050513 1\n0.050557 1\n0.050616 1\n0.051238 64\n0.470287 334\n0.763228 1\n0.000093 469\n0.000070 1\n0.000055 87\n0.000056 1\n0.000062 123\n0.000067 2\n0.000205 1\n0.000051 61\n0.000054 1\n0.000051 92\n0.000053 1\n0.000052 68\n0.000072 75\n0.000133 582\n0.659458 382\n0.000038 761\n0.000615 64\n2.531851 64\n0.493485 64\n0.050409 64\n0.049813 64\n0.049917 64\n0.050745 64\n0.050840 64\n0.049916 64\n0.049939 65\n0.050974 64\n0.050254 63\n0.175629 66\n0.689954 128\n0.136871 99\n0.000065 66\n0.151398 129\n0.144702 195\n0.000033 66\n0.151223 388\n0.144997 66\n0.142700 368\n0.144511 66\n0.167066 293\n0.368800 46\n0.762862 831\n0.000117 343\n0.511233 681\n0.000050 65\n0.000031 161\n0.000102 75\n0.000038 1\n0.589456 24\n0.004610 25\n0.000122 71\n0.345169 63\n0.499586 63\n0.049738 63\n0.050339 63\n0.050203 63\n0.049871 63\n0.050609 64\n0.050030 64\n0.051051 64\n0.050461 65\n0.050838 64\n0.051123 64\n0.050732 64\n0.050127 64\n0.051327 64\n0.050712 64\n0.050273 1\n0.049842 24\n0.003229 28\n0.000271 1\n0.047342 1\n0.050723 72\n0.335644 961\n0.535186 72\n0.514729 64\n0.141605 161\n0.354150 71\n0.174082 63\n0.367945 3\n0.302874 3\n0.499896 3\n0.050238 3\n0.049876 3\n0.049855 3\n0.050152 2\n0.050723 1\n0.050749 3\n0.049772 3\n0.049692 3\n0.050064 3\n0.050041 3\n0.051059 3\n0.051031 2\n0.050999 1\n0.050835 3\n0.451090 75\n0.362479 74\n0.135940 73\n0.127810 72\n0.137009 72\n0.694955 72\n0.152093 72\n0.111650 72\n0.112653 72\n0.032021 46\n0.047551 24\n0.000062 64\n0.576042 64\n0.166616 66\n0.175994 65\n0.175761 1\n0.263152 1\n0.176018 1\n0.143987 32\n0.298195 32\n0.135784 32\n0.128251 32\n0.136917 32\n0.286562 21\n0.000049 32\n0.215928 21\n0.000049 32\n0.528446 32\n0.463539 21\n0.000121 32\n0.160083 21\n0.000051 32\n0.127829 21\n0.000050 32\n0.048064 21\n0.000051 32\n0.071717 21\n0.000066 65\n0.321365 65\n0.126009 64\n0.128321 2\n0.366876 1\n0.335770 1\n0.295795 45\n0.291057 26\n0.000110 47\n0.499526 23\n0.000056 46\n0.050019 23\n0.000055 43\n0.050188 25\n0.000097 42\n0.050623 1\n0.000441 1\n0.000202 1\n0.000241 22\n0.000202 41\n0.049135 1\n0.000081 1\n0.000054 1\n0.000054 22\n0.000078 41\n0.050907 24\n0.000081 41\n0.050724 23\n0.000055 38\n0.050707 25\n0.000101 38\n0.050067 24\n0.000092 61\n0.051880 37\n0.048503 23\n0.000057 35\n0.076172 24\n0.000056 34\n0.024778 24\n0.000706 33\n0.049462 24\n0.000087 33\n0.052508 23\n0.000057 32\n0.050013 23\n0.000065 29\n0.049386 25\n0.000071 28\n0.051028 25\n0.000908 28\n0.051090 24\n0.000088 52\n0.051249 50\n0.049960 48\n0.050517 46\n0.204687 44\n0.168932 42\n0.143138 41\n0.639914 41\n0.072035 3\n0.072155 41\n0.079885 41\n0.048019 41\n0.145273 41\n0.046887 41\n0.047811 64\n0.360524 1\n0.317319 1\n0.500447 1\n0.049440 1\n0.050133 1\n0.050056 1\n0.050373 1\n0.050960 1\n0.050723 1\n0.050814 1\n0.051281 1\n0.095737 81\n0.298461 80\n0.500112 79\n0.050019 78\n0.050029 77\n0.049805 76\n0.049819 55\n0.000816 46\n0.002220 92\n0.047295 76\n0.050055 73\n0.050327 72\n0.050342 71\n0.050482 70\n0.052599 69\n0.047879 68\n0.049989 67\n0.050977 66\n0.049187 65\n0.050323 64\n0.052108 63\n0.049303 62\n0.049919 61\n0.050829 60\n0.049506 59\n0.049706 58\n0.050211 57\n0.050041 56\n0.049659 55\n0.052067 54\n0.050118 52\n0.049970 50\n0.051504 48\n0.050660 46\n0.106036 44\n0.159865 42\n0.128870 41\n0.631143 41\n0.071848 2\n0.007917 41\n0.488175 41\n0.082088 41\n0.125802 41\n0.063776 41\n0.033489 41\n0.430738 3\n0.151779 41\n1.256390 41\n0.144172 41\n0.063635 41\n0.072106 66\n0.512453 1\n0.253661 1\n0.499997 1\n0.055068 1\n0.046972 1\n0.051095 1\n0.050390 1\n0.050188 1\n0.052073 1\n0.049803 1\n0.050183 1\n0.050907 1\n0.049612 1\n0.052270 1\n0.050534 56\n0.621185 29\n0.000051 56\n0.167995 29\n0.000080 56\n0.079462 26\n0.000116 56\n0.112088 25\n0.000118 56\n0.144118 29\n0.000077 58\n0.057115 29\n0.000053 56\n0.102437 29\n0.000096 56\n0.111741 29\n0.000049 56\n0.056426 29\n0.000062 56\n0.095724 29\n0.000059 56\n0.071978 27\n0.000045 56\n0.032553 26\n0.000039 56\n0.183729 29\n0.000049 56\n0.071516 29\n0.000094 56\n0.128069 29\n0.000085 56\n0.095601 29\n0.000047 56\n0.088223 29\n0.000095 56\n0.120183 29\n0.000084 56\n0.040308 29\n0.000834 56\n0.071265 27\n0.000041 55\n0.528714 27\n0.000113 54\n0.499260 27\n0.000039 53\n0.050066 27\n0.000040 52\n0.050469 27\n0.000040 51\n0.049533 27\n0.000041 50\n0.050194 27\n0.000039 49\n0.050693 27\n0.000041 48\n0.050147 27\n0.000038 47\n0.050652 27\n0.000040 46\n0.049686 27\n0.000040 45\n0.050359 27\n0.000040 44\n0.050095 27\n0.000052 43\n0.052874 27\n0.000041 42\n0.049187 27\n0.000040 41\n0.050853 27\n0.000040 40\n0.050541 27\n0.000041 39\n0.049988 27\n0.000039 38\n0.050294 27\n0.000038 37\n0.050746 27\n0.000092 38\n0.050039 27\n0.000039 35\n0.050377 27\n0.000040 34\n0.050221 27\n0.000040 33\n0.050158 27\n0.000042 32\n0.075174 27\n0.000042 31\n0.024759 27\n0.000039 30\n0.049871 27\n0.000041 29\n0.050210 27\n0.000041 28\n0.050955 27\n0.000038 56\n0.001154 47\n0.001198 45\n0.048801 27\n0.000039 26\n0.050750 27\n0.000041 25\n0.051450 27\n0.000044 24\n0.050144 26\n0.000112 23\n0.049991 25\n0.000122 22\n0.051041 24\n0.000110 44\n0.132936 42\n0.183667 65\n0.544825 61\n3.272290 64\n0.500901 63\n0.051017 64\n0.051471 64\n0.050777 64\n0.049891 64\n0.050592 99\n0.055207 1091\n0.000102 450\n0.000756 65\n0.043595 65\n0.050955 64\n0.051802 64\n0.050049 389\n0.476626 621\n0.000120 346\n0.000035 292\n0.000586 757\n0.252240 334\n0.000037 449\n0.000077 25\n0.693758 1093\n0.000456 64\n0.207221 64\n0.499542 63\n0.049978 63\n0.050063 64\n0.050389 63\n0.049817 63\n0.050406 63\n0.050419 62\n0.050723 61\n0.050679 25\n0.053427 726\n0.000413 64\n0.046500 64\n0.525314 8\n0.183429 35\n0.267778 64\n0.000040 1\n0.113197 28\n0.180512 28\n0.176233 28\n0.063950 1\n0.112391 53\n0.000051 28\n0.095432 28\n0.128275 28\n0.079976 28\n0.160387 28\n0.119671 28\n0.048058 28\n0.151934 3\n0.080400 28\n0.223773 3\n0.072166 28\n1.127820 30\n0.027767 17\n0.714304 979\n0.000047 685\n0.000523 31\n0.513076 58\n0.000048 818\n2.194069 688\n0.000051 17\n12.971566 979\n0.000058 720\n0.000575 271\n2.299326 744\n0.000088 1\n0.000473 92\n0.000087 69\n0.000376 12\n0.000337 428\n0.000108 351\n0.462457 78\n0.000050 171\n0.688182 925\n0.000047 59\n0.000035 444\n1.000079 471\n0.000052 269\n0.000035 4\n0.000586 88\n0.000032 259\n0.000040 323\n0.207366 802\n0.000138 1\n0.000332 101\n0.000259 12\n0.000340 442\n0.000038 582\n0.403324 578\n0.000041 52\n0.000035 379\n0.000592 171\n0.187960 816\n0.000048 114\n0.000033 74\n0.000030 63\n1.035795 63\n0.184128 63\n0.191564 63\n0.159898 63\n0.151903 63\n0.160159 7\n0.176148 174\n0.410600 7\n0.265613 28\n0.516401 28\n0.168062 28\n0.119681 55\n0.096629 28\n0.079632 28\n0.175997 28\n0.104393 28\n0.151707 28\n0.151900 28\n0.024058 28\n0.200163 4\n4.136581 4\n0.500683 4\n0.049844 4\n0.050362 4\n0.049478 4\n0.051314 4\n0.050935 37\n0.049843 4\n0.050193 4\n0.051142 11\n0.051123 2\n0.050370 4\n0.050542 1\n0.344037 99\n0.249265 68\n0.000100 64\n0.463201 443\n0.680499 472\n0.000051 269\n0.000034 351\n0.000620 65\n1.243104 64\n0.494231 64\n0.049501 64\n0.049379 64\n0.050551 64\n0.050570 64\n0.050258 64\n0.049812 64\n0.051146 64\n0.050101 65\n0.053504 64\n0.050470 63\n0.051322 63\n0.050064 63\n0.050897 63\n0.052217 63\n0.054115 63\n0.424085 323\n0.616672 1358\n0.000562 64\n0.515563 163\n0.164863 71\n0.166151 64\n0.143450 64\n0.128818 64\n0.175932 65\n0.246967 206\n0.357144 1\n0.145034 28\n0.260650 28\n0.191756 28\n0.064044 2\n0.152029 52\n0.000032 28\n0.055960 28\n0.208147 28\n0.032820 28\n0.183182 28\n0.103819 28\n0.040243 28\n0.151898 28\n0.240246 28\n0.056801 28\n0.167332 28\n0.119681 28\n0.039945 28\n0.136466 28\n0.047518 28\n0.216483 3\n2.168302 28\n0.167877 28\n0.407886 28\n0.103606 28\n0.016276 28\n0.071845 28\n0.464322 3\n0.135812 1\n1.156466 1\n0.501613 1\n0.050328 1\n0.051278 1\n0.050997 1\n0.050464 1\n0.049871 40\n0.665329 8\n0.340569 1\n0.683392 28\n0.111628 36\n0.180482 2\n0.603983 2\n0.000028 36\n0.259876 3\n1.001806 1\n21.390361 1\n0.167714 1\n0.167916 3\n6.825108 35\n3.250982 1\n0.340344 1\n0.215722 3\n0.392120 37\n0.299841 37\n0.144301 37\n0.159607 37\n0.160010 37\n0.160242 37\n0.151747 37\n0.136068 3\n0.684067 32\n0.557190 1\n0.163100 1\n0.167570 34\n0.228004 65\n0.488894 635\n8.072585 1011\n0.000580 62\n0.883749 63\n0.499757 63\n0.050874 63\n0.049465 63\n0.051142 63\n0.050606 63\n0.049120 64\n0.050247 64\n0.050430 65\n0.050871 64\n0.050526 64\n0.050093 64\n0.051183 64\n0.050801 64\n0.525879 64\n0.176767 64\n0.159729 8\n0.199313 160\n0.314751 8\n0.157279 28\n0.282338 28\n0.344210 28\n0.663621 55\n0.136416 28\n0.039820 28\n0.152219 28\n0.047867 28\n0.168425 28\n0.152425 28\n0.015833 4\n0.391477 4\n0.128053 28\n0.207822 28\n0.034265 28\n0.173756 1\n0.128192 3\n0.231898 1\n0.425846 28\n0.142265 3\n0.145002 28\n0.087161 30\n0.036556 65\n0.860534 64\n0.497254 65\n0.050072 65\n0.050448 8\n0.342494 25\n0.283813 135\n0.000041 8\n0.098133 28\n0.621202 28\n0.175191 28\n0.103656 55\n0.128161 28\n0.103940 28\n0.408122 66\n0.071954 28\n0.160181 28\n0.111722 28\n0.032960 28\n0.175122 1\n0.105006 28\n0.279368 3\n0.336297 28\n0.151838 30\n0.037063 65\n0.613139 64\n0.495289 66\n0.050004 280\n0.053861 692\n0.000114 189\n0.000034 273\n0.000567 65\n0.045583 64\n0.051186 65\n1.330819 65\n0.168368 65\n0.168110 65\n0.175396 64\n0.320617 64\n0.119560 1\n0.390577 3\n0.714899 216\n0.160419 63\n0.536277 63\n0.149776 63\n0.151570 63\n0.160419 62\n0.127905 65\n0.778208 24\n0.121649 191\n0.000045 63\n0.492961 160\n0.500668 71\n0.048380 63\n0.050456 63\n0.049628 63\n0.049939 64\n0.050839 65\n0.049968 64\n0.050104 64\n0.050003 64\n0.051011 64\n0.051070 64\n0.051213 65\n0.881406 170\n0.355338 8\n0.155183 28\n0.212052 28\n0.184001 28\n0.064049 55\n0.192077 28\n0.136073 28\n0.152339 28\n0.311785 28\n0.191767 28\n0.088204 28\n0.063742 28\n0.160161 66\n0.288071 28\n0.200234 28\n0.143655 28\n0.128029 28\n0.088012 28\n0.111884 28\n0.072112 28\n0.208051 28\n0.672213 31\n0.364497 4\n1.001918 1\n1.014203 33\n0.323776 418\n1.537325 494\n0.000049 751\n0.000515 138\n0.811058 1\n0.000460 187\n0.000196 1\n0.000063 469\n0.000071 1\n0.000054 87\n0.000071 1\n0.000052 123\n0.000066 2\n0.000228 1\n0.000056 47\n0.000070 1\n0.000053 64\n0.000054 1\n0.000051 90\n0.000058 327\n0.000196 63\n0.591049 63\n0.499277 63\n0.050112 63\n0.050295 63\n0.050541 63\n0.049836 64\n0.050743 65\n0.050538 64\n0.050561 64\n0.049791 64\n0.051025 64\n0.050568 64\n0.049977 64\n0.233960 64\n0.191950 65\n0.231408 1\n0.327874 65\n0.197098 1\n0.108176 30\n0.346263 30\n0.264074 30\n0.104009 30\n0.055956 30\n0.192133 33\n0.759858 33\n0.135840 33\n0.128228 33\n0.152120 33\n0.143701 30\n0.568265 30\n0.153116 30\n0.110609 30\n0.152192 30\n0.144080 33\n0.328007 33\n0.119868 30\n0.207790 33\n0.560164 30\n0.312114 37\n0.276347 418\n0.428517 494\n0.000046 751\n0.000589 393\n0.486089 652\n0.000044 460\n0.000534 17\n0.852968 932\n0.000121 492\n0.000033 291\n0.000660 63\n0.559795 63\n0.367613 66\n0.804377 241\n0.222509 31\n0.517944 60\n0.000123 271\n0.775228 682\n0.000084 638\n0.000459 211\n1.033915 297\n0.000118 1219\n0.760945 64\n0.507804 64\n0.535916 65\n0.499845 64\n0.050256 64\n0.049998 64\n0.049650 64\n0.294610 444\n0.627367 484\n0.000045 615\n0.000532 65\n0.899147 64\n0.499221 64\n0.049579 64\n0.050181 64\n0.050903 64\n0.050764 64\n0.050353 64\n0.049480 64\n0.050095 171\n8.004612 801\n0.000179 1\n0.000355 256\n0.000479 443\n0.802139 485\n0.000041 614\n0.000513 64\n2.476227 64\n0.493860 64\n0.049728 64\n0.050105 64\n0.050617 64\n0.049774 64\n0.049856 64\n0.051241 64\n0.051473 65\n0.275417 64\n0.191810 64\n0.279900 6\n0.199612 66\n0.419432 65\n0.509008 37\n1.409982 4\n0.175707 4\n0.152126 8\n0.128372 171\n0.679033 790\n0.000127 268\n0.000041 443\n0.735529 467\n0.000039 614\n0.000609 64\n0.740441 52\n0.000915 46\n0.001058 71\n0.492263 64\n0.049197 64\n0.050594 64\n0.050399 64\n0.049608 64\n0.049928 64\n0.138035 8\n0.215641 65\n0.275945 142\n0.230384 8\n0.163795 28\n0.187753 28\n0.192354 28\n0.071700 55\n0.119849 28\n0.064401 28\n0.144056 28\n0.151728 28\n0.176353 28\n0.031522 28\n0.072096 28\n0.055937 28\n0.160050 3\n0.272149 28\n0.529278 3\n0.080997 28\n0.142652 197\n0.255717 389\n0.508251 409\n0.000176 41\n0.579913 41\n0.207706 41\n0.056064 41\n0.071840 96\n0.304220 28\n0.272881 190\n0.247533 41\n0.119813 79\n0.144168 41\n0.272271 43\n0.360123 80\n0.103775 43\n0.136055 41\n0.127738 79\n0.137231 41\n0.110688 1\n0.088155 41\n0.167835 41\n0.192088 41\n0.072047 41\n0.056035 96\n0.528198 36\n0.232035 65\n0.720835 640\n0.509753 28\n1.120008 28\n0.191744 28\n0.048248 55\n0.088182 28\n0.095711 28\n0.087718 28\n0.160322 28\n0.175909 28\n0.032181 28\n0.049028 28\n0.038742 28\n0.176226 65\n0.370827 65\n0.139464 266\n1.434765 8\n0.115857 28\n0.349099 28\n0.158776 28\n0.047994 55\n0.104007 28\n0.103805 28\n0.056177 28\n0.176394 28\n0.135561 28\n0.048136 4\n0.360495 4\n0.095639 28\n0.080065 28\n0.064413 28\n0.047424 2\n0.168242 28\n0.135878 3\n0.063929 226\n1.305452 389\n0.508455 409\n0.000109 41\n1.642651 41\n0.135724 76\n0.144138 41\n0.055938 2\n0.944022 41\n0.136296 41\n0.087448 41\n0.136074 41\n0.072471 150\n0.376009 309\n0.509089 348\n0.000041 65\n1.388492 66\n4.915068 64\n0.499748 64\n0.050324 64\n0.050659 61\n0.050558 64\n0.049666 64\n0.051733 64\n0.050181 61\n0.049713 64\n0.050470 649\n0.056238 282\n0.000044 856\n0.002032 65\n0.043016 64\n0.050246 64\n0.051862 64\n0.049850 64\n0.049660 64\n0.050568 64\n0.050474 64\n0.051030 64\n0.745673 64\n0.167930 64\n0.144149 64\n0.161497 64\n0.166630 64\n0.288158 2\n0.191396 33\n0.300869 71\n0.000040 1\n0.145476 28\n0.420247 28\n0.079789 3\n0.128107 28\n0.095835 8\n0.336329 1\n0.128578 4\n0.143295 5\n0.119971 28\n0.296024 3\n0.152159 1\n0.231899 5\n0.112043 28\n0.210088 51\n0.069476 3\n0.096455 28\n0.103496 28\n0.112876 28\n0.087619 28\n0.079626 28\n0.016217 3\n0.280205 53\n0.184156 42\n0.103964 3\n0.287874 217\n0.151968 78\n0.328749 41\n0.487521 43\n0.264165 79\n0.111646 78\n0.169114 41\n0.071388 41\n0.111149 41\n0.032734 3\n0.087912 41\n0.111801 41\n0.079843 41\n0.104140 41\n0.055929 165\n0.320777 28\n0.243615 3\n0.115837 28\n0.344352 28\n0.055862 28\n0.103649 28\n0.096248 28\n0.079794 59\n0.072048 1\n0.104119 28\n0.160220 28\n0.063997 28\n0.088035 28\n0.095887 28\n0.047985 28\n0.240042 28\n0.112732 28\n0.263182 28\n0.224014 28\n0.080111 28\n0.112796 28\n0.030944 28\n0.248210 28\n0.191944 28\n0.111835 28\n0.080036 28\n0.056188 28\n0.240003 28\n0.095984 31\n0.149348 65\n0.762548 64\n0.497254 65\n0.049577 66\n0.050342 65\n0.049597 65\n0.050592 65\n0.050922 62\n0.050975 65\n0.051283 65\n0.050898 55\n0.000933 47\n0.001080 74\n0.049259 60\n0.050111 60\n0.050609 635\n0.056955 539\n0.000084 415\n0.000730 65\n0.042885 65\n0.050558 508\n14.229808 403\n0.000054 387\n0.000034 172\n0.000765 63\n0.633932 63\n0.499643 63\n0.050152 63\n0.050178 63\n0.049491 63\n0.050024 63\n0.050957 64\n0.050602 64\n0.049563 64\n0.049921 65\n0.050384 64\n0.050886 64\n0.050774 64\n0.051228 64\n0.051116 64\n0.050701 64\n0.050797 64\n0.050816 52\n0.052609 1\n0.049403 1\n0.050713 1\n0.050365 1\n0.050684 71\n0.798849 8\n0.367442 63\n0.460275 1\n0.427747 65\n0.508117 62\n0.172143 52\n0.186445 72\n0.598057 62\n0.583606 64\n1.448754 64\n0.283149 1\n0.160933 114\n1.519058 836\n0.000049 658\n0.000538 65\n1.873247 64\n0.496034 64\n0.049920 64\n0.049677 64\n0.050135 64\n0.049663 64\n0.051092 64\n0.050586 64\n0.049461 64\n0.049969 65\n0.051690 64\n0.050667 63\n0.050868 63\n0.051526 63\n0.050979 63\n0.258985 419\n4.181356 492\n0.000114 387\n0.000039 172\n0.000033 114\n0.714898 836\n0.000050 331\n0.000644 178\n0.000331 148\n0.000037 323\n0.330236 627\n0.000048 97\n0.000081 97\n0.000508 1\n0.000030 214\n0.000072 213\n0.000461 148\n0.000041 548\n1.810390 383\n0.000045 239\n0.000031 163\n0.000089 1\n0.000650 332\n0.000040 418\n0.580122 492\n0.000046 311\n0.000527 76\n0.000034 172\n0.000335 63\n1.002320 63\n0.500468 63\n0.050177 63\n0.050280 63\n0.049222 63\n0.050305 63\n0.050529 64\n0.050455 64\n0.050107 64\n0.049706 65\n0.050098 64\n0.050067 64\n0.050020 64\n0.049599 64\n0.050162 64\n0.050060 64\n0.049884 64\n0.050181 64\n0.050047 51\n0.053111 1\n0.050232 120\n0.364441 781\n0.000050 713\n0.000706 65\n0.521380 64\n0.494341 64\n0.050269 64\n0.049967 64\n0.049387 64\n0.050323 64\n0.050383 64\n0.049813 64\n0.050072 64\n0.051146 65\n0.050503 64\n0.052065 63\n0.050362 52\n0.001196 45\n0.001355 71\n0.047755 63\n0.050283 63\n0.374140 3\n0.722296 121\n0.177197 230\n0.000032 66\n0.174689 76\n0.185418 154\n0.000033 3\n0.246248 99\n0.251243 132\n0.000030 3\n0.229104 234\n0.672608 66\n0.334453 251\n1.025190 46\n0.449740 172\n0.003013 456\n0.000095 340\n0.531215 579\n0.000047 558\n0.000574 1\n0.156692 24\n0.002974 25\n0.000264 71\n0.340639 63\n0.499082 63\n0.050264 63\n0.050825 63\n0.048999 63\n0.050943 63\n0.051019 64\n0.050335 64\n0.050815 64\n0.052500 65\n0.049539 64\n0.050688 64\n0.050135 64\n0.049802 64\n0.050125 64\n0.051207 64\n0.050151 64\n0.050479 64\n0.050760 64\n0.449323 46\n1.165532 992\n0.003301 72\n0.658076 64\n0.141256 64\n0.208697 7\n0.246822 78\n0.306293 125\n0.000047 1\n0.336641 28\n0.726109 28\n0.055859 28\n0.160086 28\n0.471955 28\n0.248155 3\n0.159995 62\n0.624566 1\n0.303499 28\n0.376145 28\n0.160042 28\n0.487920 55\n0.079846 28\n0.175984 450\n1.209306 471\n0.000042 332\n0.000573 326\n0.000381 102\n1.562404 807\n0.000113 2\n0.000076 137\n0.000493 133\n0.000067 67\n0.000263 159\n0.000036 1\n0.000409 353\n0.000042 179\n1.234152 763\n0.000052 242\n0.000577 94\n0.000034 3\n0.000370 323\n0.000040 486\n1.378476 487\n0.000042 74\n0.000077 62\n0.403517 63\n0.500194 63\n0.050491 63\n0.049701 63\n0.076005 63\n0.024773 63\n0.050006 65\n0.050500 8\n0.533585 28\n0.257283 28\n0.055803 28\n0.160134 28\n0.127848 28\n0.056186 28\n0.144072 10\n0.680126 30\n0.000035 28\n0.215868 10\n0.170861 43\n0.000041 65\n0.726532 36\n1.134800 1\n0.157893 3\n0.391973 32\n0.089785 62\n3.417648 61\n0.213242 64\n0.800331 1\n1.330045 122\n0.645978 3\n0.159833 41\n0.192672 41\n0.159512 3\n0.119792 41\n0.785504 41\n0.110337 41\n0.105566 41\n0.086982 41\n0.159827 3\n0.063901 41\n0.184380 41\n0.127815 41\n0.039926 2\n0.071849 41\n0.144121 41\n0.056097 3\n0.063849 41\n0.111823 41\n0.064214 41\n0.127911 41\n0.048519 41\n0.031308 41\n0.136633 3\n0.071560 41\n0.096145 41\n0.088007 41\n0.079988 41\n0.040015 3\n0.144187 41\n0.159910 41\n0.031874 41\n0.112111 3\n0.096057 41\n0.192021 41\n0.055803 41\n0.112059 41\n0.095781 2\n0.264625 41\n0.215767 41\n0.088154 41\n0.079731 3\n0.104049 41\n0.192045 41\n0.072212 41\n0.104001 41\n0.071790 41\n0.095539 41\n0.088636 3\n0.143673 41\n0.952122 41\n0.144288 41\n0.087768 41\n0.103923 41\n0.096374 41\n0.079482 41\n0.104304 41\n0.079742 3\n0.152250 41\n0.039919 41\n0.039900 41\n0.168287 41\n0.095881 41\n0.040237 41\n0.135919 41\n0.072115 41\n0.160103 64\n0.384967 64\n0.126522 64\n0.135630 1\n0.130286 122\n0.325664 3\n0.344020 41\n0.136225 41\n0.199943 3\n0.304065 41\n0.079741 41\n0.080038 41\n0.088237 3\n0.087881 41\n0.184139 41\n0.103965 43\n0.248098 43\n0.104007 41\n0.079578 41\n0.144470 41\n0.111893 41\n0.031747 41\n0.160059 2\n0.064107 41\n0.095940 41\n0.136041 41\n0.031990 3\n0.112293 41\n0.288189 41\n0.175854 41\n0.079618 2\n0.079988 41\n0.144138 41\n0.057064 3\n0.103480 41\n0.079604 41\n0.055609 41\n0.080095 41\n0.079878 41\n0.040169 41\n0.120422 3\n0.095688 41\n0.528271 41\n0.023787 41\n0.087750 41\n0.096652 3\n0.127628 144\n0.138252 38\n0.365754 21\n0.000050 41\n0.137963 41\n0.037872 41\n0.104143 41\n0.039869 41\n0.136416 41\n0.063726 41\n0.103959 41\n0.056272 41\n0.199876 450\n1.082335 469\n0.000045 662\n0.000689 102\n0.426093 807\n0.000049 852\n0.000800 287\n0.861384 852\n0.000047 449\n0.000590 64\n0.641050 64\n0.635420 64\n0.159558 64\n0.168013 64\n0.500410 65\n0.049549 64\n0.049589 64\n0.176053 35\n0.715226 64\n0.000110 198\n0.119194 64\n0.320409 1\n0.217102 4\n1.141360 28\n0.519997 28\n0.039852 53\n0.271817 1\n0.209141 49\n0.087041 49\n0.137463 49\n0.070974 49\n0.087633 49\n0.144167 3\n0.232095 28\n0.183864 8\n0.240063 1\n0.079316 49\n0.176521 49\n0.319982 49\n0.072493 49\n0.095417 49\n0.055957 64\n0.433766 163\n0.311023 1\n0.162347 4\n0.373525 125\n0.263699 3\n1.296298 41\n0.527851 41\n0.175664 41\n0.073629 41\n0.103332 3\n0.079445 41\n0.064185 41\n0.071723 41\n0.311926 41\n0.087666 1\n0.096402 41\n0.079996 41\n0.087595 41\n0.080361 41\n0.079912 3\n0.112122 41\n0.088072 43\n0.328225 41\n0.103895 41\n0.063847 1\n0.183996 41\n0.169899 41\n0.038230 41\n0.160079 41\n0.080061 41\n0.103645 41\n0.071985 1\n0.048324 1\n0.000031 41\n0.111821 41\n0.096002 41\n0.080205 41\n0.095678 3\n0.112327 41\n0.047884 41\n0.055964 1\n0.063792 1\n0.000034 41\n0.032098 41\n0.079851 41\n0.032980 3\n0.135314 41\n0.032121 41\n0.199840 41\n0.032112 2\n0.105538 41\n0.070701 41\n0.079872 3\n0.097446 41\n0.047198 41\n0.126894 41\n0.072537 3\n0.096305 41\n0.135751 41\n0.032469 41\n0.407352 41\n0.312236 41\n0.055828 41\n0.176087 3\n0.079806 41\n0.256101 41\n0.160396 41\n0.119593 41\n0.145089 41\n0.151135 65\n0.488306 28\n0.438922 28\n0.136117 28\n0.160201 28\n0.127607 55\n0.048159 34\n0.195964 29\n0.190784 100\n0.221380 1\n0.065984 28\n0.165738 28\n0.199847 28\n0.063940 54\n0.412222 28\n0.288744 28\n0.112010 28\n0.055989 28\n0.178636 28\n0.061666 66\n0.032037 28\n0.163127 3\n0.063766 3\n0.304035 1\n0.224957 28\n0.175151 3\n0.127675 28\n0.096398 30\n0.036023 25\n0.235963 74\n0.000101 1\n0.098147 28\n0.678428 5\n0.391089 28\n0.160051 28\n0.176254 28\n0.031725 2\n0.127745 52\n0.000044 28\n0.096017 28\n0.088149 28\n0.120117 28\n0.184196 28\n0.023820 28\n0.039913 28\n0.055609 28\n0.153202 3\n0.127227 3\n0.168118 1\n0.248107 28\n0.167861 2\n0.112046 28\n0.119958 30\n0.028095 25\n0.332396 74\n0.000038 1\n0.073890 28\n0.173512 28\n0.167903 28\n0.064064 54\n0.096446 28\n0.095351 28\n0.160433 28\n0.159856 28\n0.056077 28\n0.080035 28\n0.015768 3\n0.160257 3\n0.160041 1\n0.375784 28\n0.088130 3\n0.127980 28\n0.143849 28\n0.159962 28\n0.120368 47\n0.079717 65\n0.298368 65\n0.496507 66\n0.049750 65\n0.050119 64\n0.049579 65\n0.049655 65\n0.050503 65\n0.050158 64\n0.049756 64\n0.051193 64\n0.051140 64\n0.050891 65\n0.204961 94\n0.203112 638\n0.000055 1\n0.104458 28\n0.200737 28\n0.108952 28\n0.248209 2\n0.160065 52\n0.000030 28\n0.071928 28\n0.167865 28\n0.103609 28\n0.104625 28\n0.064339 28\n0.152359 28\n0.279053 28\n0.200283 28\n0.071861 28\n0.088249 28\n0.055907 28\n0.184282 30\n0.027171 64\n0.396231 1\n0.221453 3\n0.594575 226\n0.136551 3\n0.144349 207\n0.143645 3\n0.135198 256\n0.393660 120\n0.423740 785\n0.000039 956\n0.000541 418\n0.539284 681\n0.000076 484\n0.000482 166\n0.784843 775\n0.000049 3\n0.000070 501\n0.000477 62\n2.768010 51\n0.001144 44\n0.001157 17\n0.743613 891\n0.000119 235\n0.000030 393\n0.000590 64\n1.162646 71\n2.130208 870\n0.000043 500\n0.000534 62\n0.880015 63\n0.499359 63\n0.050455 63\n0.050364 63\n0.051264 63\n0.050245 63\n0.049860 65\n0.050847 64\n0.051370 64\n0.050970 64\n0.050370 64\n0.050032 64\n0.050204 64\n0.051246 64\n0.051071 64\n0.050401 64\n0.050691 65\n0.050495 64\n0.050458 61\n0.053304 50\n0.324719 12\n0.742177 28\n1.143800 28\n0.119454 28\n0.033131 54\n0.119177 28\n0.087454 28\n0.088758 28\n0.103571 53\n0.232196 35\n0.399775 28\n0.104315 28\n0.055661 28\n0.111940 28\n0.392018 28\n0.216339 28\n0.071964 28\n0.104127 28\n0.056022 28\n0.223733 30\n0.035889 53\n0.414233 549\n0.000042 64\n0.639550 64\n0.498406 63\n0.049554 64\n0.050500 63\n0.051005 63\n0.052428 63\n0.048980 63\n0.050465 62\n0.051673 61\n0.050625 69\n0.055494 884\n0.000045 115\n0.000570 134\n0.000069 87\n0.000353 187\n0.003776 8\n0.874190 65\n4.227563 65\n0.496498 65\n0.050244 65\n0.050819 64\n0.049842 65\n0.051192 64\n0.050280 65\n0.050818 65\n0.333516 1\n0.786757 28\n1.117043 51\n0.071800 3\n0.215984 28\n3.951931 28\n0.144006 28\n0.224030 28\n0.248223 33\n0.300719 29\n0.003136 3\n0.103824 1\n0.400075 4\n0.095951 3\n0.144024 28\n0.120213 51\n0.079874 3\n0.007542 28\n0.088437 28\n0.167964 28\n0.064150 55\n0.088034 28\n0.087623 28\n0.087966 28\n0.112349 28\n0.167993 28\n0.023690 28\n0.024653 28\n0.072408 28\n0.151890 28\n0.300767 25\n0.427066 80\n0.000044 8\n0.122605 28\n5.669215 28\n0.191651 28\n0.120226 55\n0.087943 28\n0.127868 28\n0.088109 28\n0.063785 28\n0.176311 28\n0.128155 28\n0.015709 28\n0.160008 28\n0.273037 28\n0.079212 28\n0.120024 28\n0.103753 28\n0.073332 28\n0.118653 28\n0.064355 28\n0.256044 28\n6.767987 28\n0.255776 28\n0.151829 28\n0.280136 66\n1.183681 43\n0.606081 70\n0.746629 8\n0.147379 118\n0.508634 3\n0.118959 41\n0.160577 41\n0.063990 41\n0.039446 41\n0.009054 61\n0.335930 8\n0.114377 28\n0.276892 28\n0.159965 28\n0.047958 55\n0.104192 28\n0.071599 65\n0.694651 3\n0.219447 43\n0.271297 43\n0.135117 43\n0.151934 43\n0.152128 1\n0.144107 12\n0.127883 28\n0.119747 28\n0.152046 28\n0.087740 55\n0.080769 28\n0.183856 28\n0.303552 28\n0.168093 28\n0.096027 66\n0.080101 28\n0.183824 4\n1.185287 28\n1.167220 28\n0.183668 28\n0.128382 28\n0.055601 28\n0.104108 28\n0.304143 113\n1.247917 172\n0.044418 15\n0.617947 99\n0.251870 29\n0.000215 1716\n0.785080 186\n0.804372 785\n0.000043 801\n0.000571 97\n0.741099 916\n0.000053 116\n0.000031 404\n0.000601 101\n1.563363 29\n0.000041 1768\n0.697745 69\n0.961108 28\n0.499401 28\n0.320110 28\n0.055784 28\n0.087982 28\n0.080938 28\n0.215169 28\n1.800830 28\n0.279423 28\n0.143869 28\n0.168908 28\n0.447183 28\n0.215954 11\n1.134207 22\n0.000049 30\n0.225663 28\n0.215975 28\n0.552968 28\n0.375356 28\n0.264055 33\n0.325145 12\n0.104424 26\n0.000108 65\n0.606538 52\n0.001483 43\n0.000743 59\n0.179119 728\n0.000046 80\n0.000034 65\n0.277309 98\n11.043629 861\n0.000121 298\n0.000036 393\n0.000618 10\n0.249152 907\n0.000089 389\n0.000686 3\n0.000310 147\n0.000029 206\n0.000039 231\n0.433262 696\n0.000049 96\n0.000030 772\n0.000868 726\n0.513189 306\n0.000044 234\n0.000077 64\n0.658079 65\n0.496539 64\n0.050251 64\n0.050455 64\n0.049525 64\n0.049654 64\n0.050995 64\n0.051296 64\n0.048981 64\n0.049983 64\n0.050653 65\n0.050082 63\n0.050928 63\n0.050404 63\n0.048908 63\n0.050161 63\n0.049911 63\n0.155588 63\n0.303706 96\n0.209219 96\n0.120058 63\n0.239572 28\n0.640328 4\n0.321446 156\n0.110778 28\n0.223735 4\n0.375984 96\n0.200099 28\n0.207998 28\n0.055794 28\n0.159949 28\n0.127936 28\n0.024561 55\n0.079297 1\n0.128548 1\n0.000032 28\n0.159887 28\n0.098123 28\n0.125733 28\n0.361052 63\n1.318632 225\n0.272603 63\n0.311384 63\n0.375006 195\n0.346839 63\n0.206059 64\n0.500859 65\n0.050479 64\n0.051037 64\n0.051050 64\n0.457818 3\n0.184286 149\n0.258876 1\n0.128843 28\n0.189648 28\n0.168083 28\n0.031952 2\n0.208299 52\n0.000033 28\n0.064033 28\n0.127840 28\n0.128105 28\n0.087667 28\n0.033189 28\n0.103001 28\n0.232196 28\n0.144008 28\n0.200336 28\n0.039584 28\n0.047885 1\n0.312359 28\n0.063788 3\n0.104093 28\n0.555501 28\n0.372567 28\n0.167824 28\n0.072297 103\n28.029974 215\n35.138170 730\n0.000055 426\n0.000081 432\n0.000521 205\n0.794692 755\n0.000120 341\n0.000034 383\n0.000558 63\n1.770962 63\n0.498676 63\n0.051028 63\n0.053673 63\n0.047395 63\n0.049798 63\n0.051504 64\n0.049372 64\n0.051591 64\n0.050684 65\n0.050945 64\n0.050530 64\n0.217227 64\n0.352752 5\n0.174886 4\n0.370631 4\n0.500260 4\n0.051042 4\n0.050766 4\n0.050798 4\n0.051361 4\n0.050334 4\n0.050933 37\n0.049929 4\n0.050635 4\n0.051693 8\n0.130205 206\n0.759937 41\n0.295921 41\n0.055745 41\n0.128597 41\n0.047927 57\n0.296351 64\n0.545907 65\n0.495191 65\n0.050421 65\n0.050791 64\n0.050033 65\n0.049757 65\n1.019679 65\n0.615799 175\n0.364027 732\n0.000050 123\n0.000594 57\n0.000067 156\n0.000287 334\n0.000467 65\n0.338078 65\n0.501029 65\n0.050107 65\n0.050116 65\n0.049935 65\n0.049797 65\n0.050890 2\n0.311963 4\n0.306258 4\n0.499465 4\n0.049900 4\n0.050135 4\n0.049786 4\n0.050117 4\n0.077157 4\n0.023674 37\n0.051220 4\n0.050817 4\n0.121189 8\n0.143673 206\n0.768170 41\n0.448145 41\n0.143850 41\n0.112766 41\n0.072052 41\n0.167264 57\n0.240442 64\n0.492710 65\n0.493275 66\n0.050377 5\n0.054587 975\n0.000049 500\n0.000573 233\n0.000042 65\n0.044472 65\n0.050204 65\n0.050816 65\n0.537680 65\n0.500260 65\n0.050134 65\n0.050977 65\n0.049640 65\n0.050129 65\n0.050044 11\n0.550172 930\n0.000134 321\n0.000046 65\n3.313979 65\n0.199991 65\n0.184026 64\n0.175777 65\n0.168093 65\n0.159932 64\n0.376808 1\n0.218620 28\n0.244940 28\n0.056027 28\n0.136035 28\n0.303685 28\n0.128254 56\n0.111563 2\n0.112353 112\n0.208318 41\n0.231658 41\n0.144119 41\n0.096586 41\n0.071535 41\n0.143968 41\n0.511813 41\n0.216100 41\n0.095767 41\n0.104505 41\n0.047724 44\n0.240308 1\n0.790682 1\n0.183805 1\n0.160071 1\n0.159973 1\n0.152174 54\n0.345373 3\n0.686479 2\n0.175918 1\n0.151956 3\n0.144305 46\n0.257680 46\n0.499624 46\n0.050265 46\n0.049563 46\n0.050077 46\n0.050145 46\n0.052556 46\n0.050277 46\n0.309090 43\n0.408857 43\n0.031060 43\n0.087796 43\n0.095863 115\n2.296810 109\n0.031888 65\n0.005049 74\n1.326281 52\n0.198215 276\n0.545587 840\n0.000120 457\n0.000037 5\n0.482680 939\n0.000052 717\n0.000603 482\n0.324847 792\n0.000045 381\n0.000694 776\n0.451574 226\n0.000039 298\n0.000312 205\n0.613669 730\n0.000048 855\n0.000507 63\n0.537543 63\n0.499710 63\n0.051359 63\n0.048877 63\n0.050875 63\n0.049773 3\n0.649746 3\n0.199984 3\n0.279962 3\n0.216084 3\n0.559925 63\n1.531027 63\n1.125739 3\n2.359661 2\n0.499758 1\n0.049803 3\n0.050044 3\n0.051074 3\n0.049821 3\n0.050020 3\n0.050292 3\n0.049694 2\n0.049984 1\n0.050582 3\n0.050529 3\n0.051025 3\n0.051232 3\n0.050955 3\n0.050773 3\n0.050700 2\n0.050286 1\n0.050746 3\n0.049824 3\n0.050614 3\n0.050360 3\n0.050662 3\n0.050973 3\n0.050813 2\n0.050267 1\n0.050245 3\n0.050514 3\n0.050948 3\n0.050074 3\n0.049906 3\n0.049614 3\n0.050495 2\n0.051054 1\n0.050039 3\n0.049851 3\n0.050557 3\n0.050792 3\n0.050617 3\n0.050487 3\n0.050945 2\n0.050449 1\n0.050405 3\n0.050024 3\n0.181647 38\n0.751306 58\n0.000102 158\n0.165078 364\n0.480181 1\n0.352053 153\n0.000064 257\n0.279602 1\n0.287730 120\n0.000089 253\n0.376130 43\n0.508912 55\n0.000892 46\n0.000941 199\n0.057175 3\n0.934768 3\n0.191672 3\n0.112207 3\n0.447816 125\n0.185251 3\n0.142470 41\n0.235662 41\n0.124636 41\n0.024047 3\n0.087951 41\n0.192084 41\n0.152250 41\n0.079403 3\n0.096407 41\n0.127839 41\n0.104194 3\n0.080124 41\n0.160013 41\n0.048078 41\n0.167688 41\n0.079909 3\n0.088488 41\n0.047736 41\n0.056251 41\n0.112038 41\n0.119986 41\n0.079992 41\n0.127555 3\n0.096551 41\n0.144097 41\n0.063697 41\n0.111952 41\n0.144195 41\n0.047644 41\n0.024254 41\n0.417698 191\n0.262847 7\n0.266387 125\n0.461205 65\n0.408224 12\n0.543469 3\n0.336160 2\n0.175649 1\n0.120220 3\n0.136065 3\n0.135614 41\n0.200364 41\n0.135623 41\n0.137048 41\n0.039281 41\n0.297633 1\n0.126226 41\n0.175930 41\n0.208349 41\n0.087702 41\n0.120351 3\n0.087784 41\n0.039833 41\n0.096326 41\n0.079967 3\n0.096071 41\n9.056059 41\n0.095698 41\n0.176065 41\n0.063967 41\n0.041217 41\n0.105069 41\n0.143383 41\n0.102551 41\n0.039918 41\n0.048406 3\n0.087421 41\n0.047927 41\n0.112446 2\n0.047895 41\n0.080542 41\n0.095676 3\n0.103692 41\n0.104155 41\n0.144695 41\n0.071729 41\n0.087605 41\n0.047969 41\n0.151890 41\n0.031842 192\n0.392790 7\n0.186371 125\n0.396693 65\n0.648576 12\n0.407516 3\n0.400182 2\n0.143624 1\n0.152314 3\n0.128253 3\n0.143487 41\n2.264359 41\n0.151780 41\n0.120967 41\n0.062681 43\n0.368385 43\n0.120206 43\n0.127691 43\n0.135891 41\n0.256152 41\n0.111788 41\n0.104059 41\n0.065064 41\n0.848772 65\n0.630415 3\n0.184638 1\n0.399286 41\n0.264556 41\n0.159886 41\n0.071715 41\n0.103704 3\n0.112145 41\n0.031941 41\n0.088179 41\n0.079621 3\n0.088134 41\n0.064178 41\n0.128037 41\n0.096058 41\n0.098174 41\n0.006494 41\n0.071669 41\n0.151950 41\n0.111888 41\n0.056077 41\n0.039679 3\n0.080067 41\n0.071836 41\n0.089795 2\n0.078701 41\n0.087445 41\n0.057304 41\n0.151330 41\n0.111541 41\n0.368255 41\n0.023829 3\n0.087830 2\n0.136534 41\n0.168976 41\n0.079082 43\n0.487922 43\n0.135685 1\n0.103909 41\n0.096469 1\n0.135614 41\n0.112042 41\n0.103787 43\n0.496601 43\n0.087707 41\n0.264790 41\n0.495555 43\n0.183773 43\n0.095808 41\n0.176160 41\n0.087601 41\n0.096530 41\n0.072079 191\n0.304336 7\n0.282970 125\n0.411909 65\n0.369039 3\n0.231312 6\n0.227796 2\n0.000045 2\n0.388245 1\n0.143951 3\n0.143850 3\n0.127864 41\n0.144254 41\n0.144110 41\n0.119853 41\n0.079983 41\n0.151767 41\n0.337627 3\n0.118397 41\n0.200324 41\n0.183893 41\n0.056046 41\n0.120180 3\n0.063848 41\n0.039746 41\n0.115980 41\n0.044401 3\n0.095930 41\n0.072595 41\n0.119005 41\n0.104691 41\n0.087210 41\n0.025018 41\n0.047479 41\n0.168090 41\n0.103973 41\n0.055947 41\n0.047859 3\n0.071941 41\n0.080327 41\n0.095674 1\n0.048237 41\n0.088086 41\n0.071910 41\n0.136600 3\n0.087757 41\n0.167467 43\n0.624148 1\n0.144061 43\n0.111901 41\n0.111883 41\n0.024380 3\n0.096016 41\n0.143711 2\n0.176121 41\n0.080003 3\n0.033455 1\n0.367614 43\n0.103168 1\n0.120167 41\n0.111793 1\n0.111754 41\n0.071735 3\n0.128198 41\n0.151903 41\n0.128306 41\n0.112016 41\n0.071965 41\n0.152246 41\n0.615968 43\n0.519807 191\n0.512827 3\n0.110722 3\n0.136119 3\n0.144387 3\n0.135665 125\n0.248038 3\n0.199572 2\n0.144107 1\n0.152283 3\n0.152053 3\n0.143848 41\n13.392138 41\n0.032436 41\n0.111450 41\n0.079713 41\n0.481266 1\n0.094637 41\n0.184521 43\n0.312117 41\n0.095420 41\n0.120220 41\n0.087921 41\n0.104157 3\n0.112038 41\n0.024039 41\n0.112103 41\n0.079521 3\n0.112395 41\n0.784320 41\n0.111739 41\n0.176173 41\n0.007694 41\n0.064066 41\n0.151788 41\n0.152297 43\n0.264013 43\n0.111886 43\n0.120078 43\n0.128275 43\n0.119765 41\n0.191793 41\n0.096059 41\n0.032523 41\n0.095696 41\n0.175956 41\n0.096404 41\n0.047455 41\n0.079925 3\n0.104174 41\n0.072128 41\n0.111653 2\n0.104332 41\n0.063765 41\n0.047933 41\n0.128186 41\n0.176319 41\n0.151806 41\n0.047944 3\n0.088027 41\n0.072136 41\n0.103982 41\n0.071927 3\n0.097540 41\n0.062408 41\n0.048085 41\n0.144277 41\n0.063833 56\n0.001246 47\n0.001483 59\n0.141389 43\n0.368064 65\n0.352983 65\n0.496557 66\n0.050211 65\n0.049839 64\n0.050072 64\n0.050204 64\n0.050299 63\n0.050402 64\n0.050597 64\n0.049165 64\n0.050082 64\n0.050254 227\n0.054663 713\n0.000048 354\n0.000036 64\n0.045865 65\n0.051167 64\n0.051144 64\n0.050667 63\n0.473569 64\n0.399777 64\n0.568246 4\n1.010980 4\n0.168191 4\n0.120243 8\n0.125677 28\n0.136306 28\n0.176051 28\n0.016319 28\n0.375529 28\n0.296030 28\n0.551954 28\n0.168038 28\n0.120088 28\n0.111814 28\n0.272149 28\n0.135943 28\n0.103787 28\n0.023945 28\n0.272685 28\n0.239754 28\n0.143857 28\n0.256617 28\n0.287668 28\n0.063919 34\n0.219039 3\n0.594032 115\n0.049635 109\n0.031121 64\n0.004199 181\n0.444152 1\n1.238370 1\n0.192012 1\n0.120005 1\n0.039730 1\n0.152148 1\n0.127989 2\n0.161285 49\n0.040978 95\n0.000036 4\n0.003755 1\n0.593929 4\n0.807852 1\n0.183937 1\n0.048111 1\n0.143857 1\n0.143946 1\n0.039960 1\n0.072216 1\n0.071960 1\n0.208282 4\n0.247837 1\n0.111728 1\n0.056354 1\n0.055880 1\n0.200200 6\n0.226304 1\n0.245761 1\n0.087407 1\n0.112313 1\n0.039834 1\n0.224039 1\n0.128158 1\n0.184087 1\n0.007661 1\n0.288117 4\n0.280033 4\n0.104007 4\n0.105350 1\n0.166592 1\n0.048084 1\n0.215901 1\n1.063899 2\n0.216952 16\n0.199781 418\n0.000287 218\n0.000133 19\n3.296007 6\n0.000860 2\n0.845369 96\n0.007459 6\n0.641421 12\n0.153541 33\n0.913546 125\n0.001089 901\n0.000417 168\n0.000030 577\n0.000332 1\n1.228040 1\n0.500001 1\n0.049795 1\n0.050669 1\n0.050020 1\n0.050218 1\n0.050823 1\n0.050187 1\n0.050259 1\n0.049968 1\n0.049597 68\n0.309842 64\n0.596304 63\n0.499057 64\n0.049896 61\n0.049792 65\n0.050062 64\n0.049953 62\n0.050229 66\n0.050978 65\n0.051109 65\n0.195982 65\n0.183949 99\n0.299942 1\n0.160437 28\n0.341075 28\n0.167892 28\n0.087638 2\n0.104600 52\n0.000031 28\n0.175893 28\n0.231830 28\n0.031695 28\n0.152443 28\n0.071660 3\n0.184569 28\n0.103799 3\n0.135919 28\n1.912076 28\n0.151998 28\n0.184354 28\n0.231904 28\n0.263583 28\n0.096407 28\n0.072251 28\n0.175647 28\n0.240227 28\n0.239866 28\n0.168685 28\n0.151473 28\n0.207729 28\n0.257000 28\n0.479352 28\n0.159578 28\n0.063970 55\n0.095933 28\n0.104474 28\n0.095784 28\n0.128501 28\n0.119563 28\n0.168206 28\n0.127773 28\n0.226500 28\n0.101855 28\n0.191811 28\n0.024256 28\n0.048566 36\n0.291346 8\n0.488739 116\n0.049663 110\n0.035785 65\n0.004366 35\n7.060323 146\n0.000044 1\n0.727338 28\n0.332886 28\n0.136119 28\n0.175607 28\n0.120316 28\n0.232191 4\n0.383739 28\n0.063998 2\n0.136400 54\n0.000084 1\n0.055578 1\n0.000052 86\n0.168028 124\n0.000041 41\n0.289028 41\n0.035399 41\n0.083482 41\n0.088008 23\n0.232397 34\n0.000114 116\n0.382636 175\n0.038664 666\n0.373910 271\n0.000040 1006\n0.000555 554\n0.202446 585\n0.000125 364\n0.000095 95\n0.378006 876\n0.000051 701\n0.000745 218\n0.433857 306\n0.000106 62\n0.419529 63\n0.499360 63\n0.049697 63\n0.050127 64\n0.050329 63\n0.173267 63\n0.200224 64\n0.192030 8\n0.127985 82\n0.282045 59\n0.000039 21\n0.127210 22\n0.000071 43\n0.143605 43\n0.151975 43\n0.111929 7\n0.127852 28\n0.087815 28\n0.047994 28\n0.176117 28\n0.007617 28\n0.088072 4\n0.488488 4\n0.127853 55\n0.119870 28\n0.151833 28\n0.104128 28\n0.096209 28\n0.119886 28\n0.039958 28\n0.160257 28\n0.335784 4\n0.312149 28\n0.167950 28\n0.400187 4\n0.287950 28\n0.175858 28\n0.063719 28\n0.104208 28\n0.071995 4\n0.233022 4\n0.127091 4\n0.135972 4\n0.120029 131\n0.114106 25\n0.118838 21\n0.000047 28\n0.102896 28\n0.064077 28\n0.216070 30\n0.041848 64\n0.407355 1\n0.237379 3\n0.665518 78\n0.111991 24\n0.000063 63\n0.440946 63\n0.498763 64\n0.051527 63\n0.050100 63\n0.050142 62\n0.050240 61\n0.050052 403\n0.059257 564\n0.000040 456\n0.000548 64\n0.042494 64\n0.769361 64\n0.499833 64\n0.050003 64\n0.053210 64\n0.050550 64\n0.049775 8\n0.368165 4\n0.505126 37\n0.159872 4\n0.143647 4\n0.152046 12\n0.136228 28\n1.080016 28\n0.143712 28\n0.032002 55\n0.168211 28\n0.143957 28\n1.736009 28\n0.168202 28\n0.159642 28\n0.031989 28\n0.064172 28\n0.031667 28\n0.176247 3\n0.146067 28\n0.053804 3\n0.072255 198\n0.242127 18\n0.438009 28\n0.360156 197\n0.223850 41\n0.200119 41\n0.016246 41\n0.135491 41\n0.096446 43\n0.383906 43\n0.128015 43\n0.119872 43\n0.120059 41\n0.136729 41\n0.159480 41\n0.079703 41\n0.376348 57\n0.344094 28\n1.023818 190\n0.159997 41\n0.135904 41\n0.088477 41\n0.087394 43\n0.304293 43\n0.104198 43\n0.119818 41\n0.097166 41\n0.214716 41\n0.168401 41\n0.335702 41\n0.048295 41\n0.111472 57\n0.408387 36\n0.302507 25\n0.873674 75\n0.000036 8\n0.202394 28\n0.228619 28\n0.167824 28\n0.104111 34\n0.760241 21\n0.000046 28\n0.143916 28\n0.583847 28\n0.168074 28\n0.071656 28\n0.064303 28\n0.064240 2\n0.151704 28\n0.120233 3\n0.079768 76\n0.416299 124\n0.000046 228\n0.503347 23\n1.288953 34\n0.000108 210\n0.503299 338\n27.458801 729\n0.000048 11\n0.000072 341\n0.000525 5\n0.135308 948\n0.000124 3\n0.000516 187\n0.000063 71\n0.000062 88\n0.000253 55\n0.000029 294\n0.000404 5\n0.171159 1232\n0.000047 461\n0.000586 804\n0.176995 213\n0.000032 301\n0.000388 64\n0.850746 65\n0.495794 64\n0.050770 64\n0.050933 64\n0.050482 64\n0.050568 64\n0.049419 64\n0.050337 64\n0.050734 64\n0.050244 64\n0.051108 65\n0.050213 63\n0.051507 63\n0.050453 63\n0.050262 63\n0.147620 63\n0.655101 33\n0.242697 63\n0.000039 98\n0.142258 99\n0.135922 63\n0.224502 28\n2.615284 28\n0.193459 28\n0.110853 28\n0.079780 28\n0.105041 4\n0.478955 4\n0.135956 4\n0.167979 4\n0.184197 4\n0.144290 28\n2.087782 28\n0.264195 28\n0.088015 28\n0.672048 28\n0.128122 28\n0.119703 28\n0.104446 28\n0.095602 28\n0.135898 99\n0.330560 28\n0.221377 28\n0.103972 28\n0.063830 28\n0.320359 28\n6.599857 28\n0.127965 28\n0.112085 28\n0.088217 100\n0.528220 65\n1.424079 63\n0.134369 39\n0.257365 38\n0.151578 37\n0.144148 38\n1.072009 40\n0.112236 40\n0.167865 40\n0.079544 40\n0.152511 40\n0.112444 15\n0.143502 22\n0.000070 64\n0.383979 1\n0.269989 40\n0.353785 43\n1.184176 43\n0.136449 43\n0.071135 43\n0.096163 40\n0.008378 16\n0.167713 23\n0.000836 17\n0.383496 1\n0.000091 22\n0.000067 16\n0.159869 23\n0.000044 15\n0.127761 23\n0.000503 8\n0.325842 100\n0.249942 28\n0.199545 28\n0.464222 28\n0.135741 28\n0.055938 28\n0.079770 28\n0.048115 28\n0.160172 28\n0.288379 28\n0.303914 28\n0.047298 28\n0.056313 28\n0.112198 66\n0.520548 56\n0.000873 47\n0.001341 18\n0.707492 64\n0.282249 3\n0.157900 3\n0.162053 56\n0.487974 1\n0.071992 28\n0.079792 65\n0.199805 3\n0.192187 28\n0.167967 2\n0.128166 28\n0.071756 6\n0.327929 1\n0.000030 1\n0.120430 8\n0.127941 28\n0.175674 2\n0.096103 28\n0.056213 5\n0.335978 1\n0.000078 1\n0.000068 1\n0.119905 8\n0.128926 55\n0.174869 28\n0.183971 1\n0.047800 1\n0.512420 1\n0.263614 1\n0.168049 4\n0.111983 2\n0.064025 28\n0.071863 66\n0.193062 3\n0.319458 55\n0.095887 2\n0.143890 28\n0.063980 66\n0.360539 66\n0.245902 66\n0.248341 64\n0.119915 63\n0.136051 66\n0.209194 113\n0.000125 128\n0.247707 3\n0.151854 41\n0.096047 41\n0.151779 41\n0.192398 41\n0.015806 41\n0.064299 43\n0.307805 43\n0.347867 43\n0.144021 43\n0.128014 41\n0.184952 41\n0.199010 41\n0.080000 43\n0.248242 43\n0.111849 43\n0.114539 41\n0.285392 41\n0.120083 41\n0.135956 41\n0.368053 64\n0.567984 1\n0.278020 32\n0.754007 32\n0.263758 45\n0.720170 1\n0.181738 1\n0.144381 32\n0.290348 32\n0.111883 65\n0.303842 31\n0.247878 31\n0.135894 3\n0.582139 31\n0.226425 31\n0.127714 64\n0.192868 64\n0.525952 45\n0.161214 64\n0.288180 1\n0.077697 1\n0.159881 31\n0.202506 31\n0.127629 31\n0.127987 45\n0.744323 3\n0.261578 31\n0.362629 64\n0.448369 65\n0.150003 63\n0.159993 2\n0.271388 41\n1.313899 41\n0.519897 43\n0.343918 41\n0.184044 41\n0.079622 41\n0.057040 3\n0.070930 41\n0.136218 41\n0.144276 41\n0.119547 41\n0.096251 3\n0.080037 41\n0.071940 41\n0.080019 3\n0.079959 41\n0.025562 41\n0.086648 41\n0.079951 1\n0.104106 41\n0.055773 41\n0.120716 41\n0.111280 41\n0.064066 41\n0.039846 41\n0.088981 41\n0.144049 41\n0.103431 41\n0.048369 41\n0.055467 3\n0.079668 41\n0.080162 41\n0.136192 41\n0.192061 41\n0.095967 41\n0.064256 3\n0.095501 41\n0.200403 41\n0.072213 41\n0.095542 41\n0.095870 41\n0.040443 41\n0.176252 41\n0.137817 41\n0.085599 41\n0.048426 41\n0.055904 41\n0.135954 65\n0.440155 66\n0.498104 65\n0.050258 64\n0.050263 64\n0.050380 262\n3.991623 224\n2.096009 905\n0.000043 419\n0.000537 103\n0.640150 1\n0.000194 65\n0.000093 1\n0.000107 64\n0.000103 1\n0.000116 97\n0.000100 1\n0.000139 617\n0.000130 102\n0.000329 1\n0.000123 397\n0.000173 6\n0.000246 1\n0.000099 1\n0.000082 1\n0.000082 1\n0.000133 1\n0.000091 1\n0.000082 280\n0.000094 79\n0.362000 1026\n0.000049 109\n0.000085 333\n0.000492 64\n0.396432 64\n0.498718 64\n0.049865 64\n0.050820 64\n0.050014 64\n0.050044 64\n0.052750 64\n0.155437 8\n0.231619 206\n0.258294 43\n0.151687 43\n0.144195 43\n0.151763 43\n0.128079 15\n0.128038 1\n0.000054 28\n0.167318 28\n0.192757 28\n0.159642 28\n0.127859 28\n0.296136 28\n0.360154 28\n0.071770 28\n0.064182 28\n0.159852 169\n2.538065 781\n0.000120 500\n0.000036 292\n0.000643 303\n3.153900 767\n0.000077 457\n0.000469 62\n1.169646 161\n0.501727 71\n0.047966 63\n0.050339 63\n0.050364 63\n0.050305 63\n0.051130 64\n0.049538 64\n0.051082 64\n0.049987 64\n0.051237 65\n0.049503 64\n0.050072 64\n0.049851 64\n0.050143 64\n0.050327 64\n0.050533 64\n0.050220 64\n0.247136 8\n0.119882 201\n0.276761 43\n0.140982 43\n0.151966 43\n0.143937 43\n0.143861 43\n0.136171 18\n0.127917 28\n0.151565 28\n0.176394 28\n0.151576 28\n0.128406 28\n0.011014 4\n0.428994 28\n0.239688 28\n0.160180 28\n0.136015 28\n0.112149 28\n0.079957 28\n0.144046 61\n0.332118 66\n0.498639 856\n0.000044 794\n0.000521 66\n0.045845 65\n0.050327 65\n0.049722 65\n0.051532 65\n0.050573 65\n0.050224 190\n0.509182 65\n0.200261 65\n0.500929 65\n0.050103 65\n0.049843 65\n0.050302 66\n0.049560 64\n0.050487 65\n0.050635 64\n0.051121 64\n0.050825 64\n0.050950 64\n0.049530 64\n0.050885 64\n0.050810 62\n0.050425 65\n0.051416 2\n0.055412 956\n0.000110 259\n0.000034 65\n0.000551 208\n0.000030 65\n0.044711 64\n0.051116 64\n0.051230 37\n0.880086 4\n0.149920 4\n0.151569 8\n0.136048 28\n0.208321 28\n0.224005 28\n0.143897 28\n0.319790 65\n0.288328 28\n0.138518 28\n0.150549 28\n0.094696 28\n0.063932 28\n0.168090 64\n0.329248 65\n0.181565 65\n0.169496 65\n0.134451 37\n0.305332 4\n0.119911 4\n0.144010 8\n0.143851 28\n0.135901 28\n0.184503 28\n0.159731 28\n0.095754 28\n0.272267 28\n0.111743 28\n0.143878 28\n0.112436 28\n0.048020 28\n0.176149 65\n0.297591 65\n0.496722 65\n0.050004 65\n0.050395 65\n0.049666 65\n0.054076 65\n0.050086 65\n0.049754 61\n0.050922 59\n0.054537 856\n0.000050 12\n0.000619 407\n0.000102 3\n0.000068 118\n0.000265 195\n0.000030 66\n0.045258 65\n0.050194 65\n0.050119 65\n0.049879 65\n0.050249 65\n0.050200 65\n0.337978 65\n0.499637 65\n0.050049 65\n0.049968 210\n0.059447 759\n0.000043 615\n0.000668 65\n0.041541 65\n0.049756 65\n0.688481 65\n0.272236 65\n0.175940 65\n0.248069 64\n0.247815 65\n0.175635 64\n1.144519 65\n0.144082 25\n1.401059 74\n0.000047 8\n0.339174 28\n1.420026 28\n0.072019 28\n0.079911 28\n0.136286 28\n0.079768 59\n0.103664 3\n0.104247 28\n0.135868 28\n0.192258 55\n0.001002 47\n0.001173 45\n0.133741 28\n0.103841 28\n0.208334 28\n0.248044 28\n0.112487 28\n0.087540 28\n0.055489 64\n0.876396 65\n0.495158 67\n0.049715 339\n0.052604 447\n0.000048 53\n0.049169 1\n0.050588 1\n0.050250 1\n0.047808 1\n0.049836 1\n0.050081 1\n0.050980 457\n0.424423 609\n0.000078 482\n0.000553 5\n0.509911 1016\n0.000057 48\n0.000031 345\n0.000603 405\n0.455299 575\n0.000073 973\n0.000620 554\n1.730289 571\n0.000044 360\n0.000638 405\n1.785355 573\n0.000115 605\n0.000077 365\n0.000766 514\n0.607146 540\n0.000048 360\n0.000044 64\n1.201627 64\n0.187629 64\n0.175544 64\n0.168169 3\n0.351431 25\n0.530517 74\n0.000107 25\n0.127109 74\n0.000054 1\n0.242570 4\n0.397372 28\n0.135745 28\n0.072095 53\n0.072317 1\n0.247809 49\n0.689351 49\n0.158652 49\n0.055871 49\n0.688649 49\n0.135309 49\n0.184593 49\n0.103778 49\n0.016030 49\n0.472121 49\n0.055768 4\n0.536814 4\n0.499507 4\n0.050352 4\n0.050468 4\n0.049714 4\n0.050136 4\n0.051280 4\n0.049514 4\n0.050566 6\n0.811915 1\n0.607855 35\n0.500207 4\n0.050608 11\n0.051216 1\n0.293738 25\n0.416040 169\n0.000041 25\n0.689469 170\n0.000117 65\n0.769089 65\n0.372370 25\n8.409571 74\n0.000043 25\n0.175245 74\n0.000039 1\n0.242526 4\n0.445551 28\n0.160106 28\n0.135487 53\n0.032337 1\n0.496259 49\n6.591767 49\n0.080269 49\n0.039582 49\n0.320912 49\n0.271735 4\n0.247855 4\n0.160494 4\n0.151667 4\n0.151331 6\n0.111959 49\n0.776435 49\n0.039886 49\n0.120810 49\n0.103265 49\n0.063832 2\n0.104140 54\n0.000041 1\n0.239905 56\n0.000055 49\n0.279852 49\n0.168410 49\n0.063305 49\n0.064491 49\n0.023752 28\n0.360375 28\n0.360080 28\n0.159523 28\n0.088299 55\n0.056132 34\n0.308429 4\n0.457162 1\n0.499921 1\n0.049990 1\n0.049906 1\n0.049992 1\n0.050365 1\n0.049748 1\n0.049791 1\n0.050747 1\n0.050440 1\n0.050124 1\n0.144887 2\n0.344081 32\n0.242389 32\n0.144153 32\n0.159735 32\n0.152163 32\n0.151976 32\n0.199811 32\n0.080595 8\n0.365559 1\n0.239829 30\n0.866314 30\n0.087523 30\n0.160487 33\n0.391690 30\n0.817126 30\n0.128427 30\n0.022871 30\n0.311618 30\n0.480354 30\n0.231629 30\n0.063957 30\n0.063822 33\n0.448685 33\n0.127801 33\n0.135904 30\n0.088324 30\n0.079781 30\n0.057096 30\n0.070938 3\n0.646118 28\n0.820240 70\n0.173525 1\n0.130068 28\n2.129128 51\n0.116256 3\n0.136290 28\n0.303993 28\n0.191918 28\n0.063810 28\n0.320141 28\n0.232022 28\n0.183984 28\n0.064011 28\n0.119856 4\n0.539888 28\n0.060621 28\n0.063532 3\n0.104432 59\n0.128062 47\n0.135829 1\n0.055756 28\n0.201103 28\n0.142915 28\n0.128042 47\n0.064129 61\n0.267220 61\n0.704939 8\n0.182742 314\n0.483965 720\n0.000124 452\n0.000043 65\n0.407546 65\n0.168336 65\n0.591820 28\n0.553196 28\n0.200206 28\n0.095911 55\n0.144106 28\n0.087609 28\n0.216236 28\n0.201346 28\n0.334596 28\n0.119717 28\n0.040360 28\n0.167982 1\n0.177026 28\n0.151093 3\n0.127618 28\n0.232212 30\n0.020014 65\n0.613290 64\n0.497740 63\n0.049771 64\n0.050361 119\n0.880896 46\n0.001058 75\n0.150058 64\n0.167703 64\n0.136269 1\n0.454794 63\n0.689479 3\n0.632637 304\n0.166351 3\n0.145935 123\n0.153915 216\n0.000034 3\n0.157549 111\n0.176712 3\n0.415954 256\n0.296105 63\n0.574777 64\n0.143305 63\n0.136085 63\n0.135909 196\n0.266342 63\n0.215828 394\n0.945096 72\n0.615548 1\n0.349123 64\n0.258469 8\n0.896047 5\n0.408059 5\n0.344017 63\n0.479597 63\n0.149957 11\n0.252630 64\n0.213352 1\n0.149840 12\n0.181305 65\n0.124637 1\n0.061094 13\n0.133877 65\n0.116986 1\n0.036966 1\n0.101969 12\n0.000034 65\n0.581682 64\n0.181701 65\n0.263857 65\n0.167908 8\n0.311638 99\n0.250182 8\n0.154483 28\n0.517070 12\n0.280021 2\n0.137732 4\n0.158272 8\n0.403002 2\n0.461041 28\n0.328953 28\n0.102970 28\n0.407933 1\n0.024267 53\n0.000048 35\n1.720018 4\n0.063391 28\n0.408252 4\n0.273209 28\n0.239066 4\n0.512306 4\n0.135425 5\n0.120549 28\n0.231554 3\n0.200011 1\n0.327991 51\n0.071704 3\n0.136294 28\n0.111999 28\n0.152046 28\n0.143904 4\n0.440060 28\n0.079816 28\n0.056150 28\n0.048078 3\n0.183960 53\n0.176019 42\n0.128171 3\n0.071768 65\n2.057662 65\n0.497240 64\n0.051180 64\n0.050963 64\n0.049763 64\n0.050779 65\n0.049957 63\n0.049855 64\n0.051236 64\n0.050667 289\n0.054013 749\n0.000045 340\n0.000595 64\n0.045666 65\n0.330855 65\n0.144050 1\n0.223104 64\n0.332820 3\n0.734815 251\n0.191634 68\n0.344303 114\n0.175051 3\n0.319737 164\n0.280681 328\n0.586939 64\n0.477460 64\n0.157707 63\n0.152405 63\n0.135906 63\n0.159570 64\n0.144286 7\n0.295648 1\n0.487287 1\n0.471869 35\n0.243220 35\n0.135439 35\n0.159864 35\n0.152022 35\n0.151935 35\n0.160059 35\n0.151817 32\n0.384096 32\n0.072029 3\n0.310190 30\n0.321874 33\n0.496179 30\n0.223571 30\n0.160379 30\n0.112034 49\n0.087810 64\n0.384190 64\n0.498423 64\n0.051020 65\n0.049774 64\n0.295058 197\n0.306075 1\n0.154349 4\n0.357550 125\n0.208026 3\n0.111405 41\n0.104528 41\n0.135426 41\n0.081174 41\n0.063325 3\n0.120045 41\n0.040030 41\n0.152229 41\n0.079990 41\n0.111747 1\n0.087867 41\n0.063783 41\n0.096285 41\n0.071929 3\n0.104320 41\n0.119883 41\n0.056095 41\n0.048106 1\n0.095785 41\n0.072891 41\n0.175074 41\n0.080013 41\n0.079928 41\n0.119818 3\n0.352312 41\n0.088132 41\n0.079835 41\n0.111875 43\n0.344301 43\n0.103825 41\n0.175967 41\n0.064038 3\n0.104019 41\n0.056062 41\n0.072058 41\n0.127825 41\n0.112122 41\n0.087783 41\n0.112802 41\n0.095400 3\n0.040097 41\n0.104143 41\n0.079756 41\n0.079876 3\n0.095998 41\n0.096214 41\n0.120177 41\n0.105796 41\n0.102160 41\n0.064106 80\n0.167841 41\n0.161653 56\n0.001124 47\n0.001337 59\n0.140013 41\n0.159915 41\n0.072010 41\n0.071935 3\n0.184580 41\n0.079636 41\n0.147150 41\n0.044860 41\n0.055934 197\n0.376696 7\n0.329635 125\n0.445153 3\n0.111872 41\n0.103887 41\n0.087961 3\n0.056167 41\n0.056066 41\n0.079819 41\n0.057687 3\n0.134486 41\n1.138480 41\n0.045732 41\n0.111928 41\n0.104225 41\n0.079705 41\n0.040057 41\n0.127842 43\n0.544698 3\n0.119547 41\n0.400225 41\n0.103790 41\n0.056161 1\n0.119885 41\n0.087875 41\n0.120273 41\n0.087828 41\n0.032921 3\n0.079367 41\n0.136312 41\n0.127635 41\n0.063775 41\n0.055995 3\n0.111766 41\n0.108864 41\n0.103917 3\n0.047999 41\n0.128144 41\n0.103761 41\n0.267776 41\n0.184048 41\n0.063876 3\n0.079960 41\n0.152154 41\n0.096016 41\n0.135967 41\n0.152112 41\n0.151982 41\n0.087638 3\n0.079851 41\n0.104269 41\n0.072880 41\n0.063241 41\n0.071804 2\n0.088870 41\n0.135581 41\n0.055948 41\n0.199833 41\n0.208960 41\n0.119028 65\n0.592890 354\n0.570188 704\n0.000038 204\n0.000040 454\n0.000715 62\n0.714379 61\n0.671496 25\n0.203728 810\n0.000644 64\n0.204751 64\n0.303147 64\n0.183815 8\n0.415341 200\n0.711384 763\n0.000049 853\n0.000760 364\n1.527886 664\n0.000041 443\n0.000592 64\n0.685218 64\n0.494903 65\n0.049909 64\n0.050292 64\n0.049524 64\n0.049845 64\n0.050987 64\n0.161232 8\n0.287661 205\n0.954201 41\n0.255940 41\n0.139955 41\n0.092140 41\n0.023766 415\n0.506718 409\n0.000102 3\n0.213237 41\n0.199999 41\n0.096171 41\n0.096640 41\n0.039062 57\n0.328532 707\n0.508500 28\n0.527368 99\n0.364110 8\n0.186640 2\n1.140912 4\n0.320060 1\n0.183870 195\n0.208688 65\n0.793078 65\n0.148900 65\n0.160099 64\n0.151729 65\n0.159835 64\n0.136275 64\n0.136024 268\n0.291021 173\n0.000057 1\n0.161351 28\n0.197233 28\n0.183923 28\n0.080140 54\n0.097177 28\n0.126781 28\n0.200061 28\n0.247980 28\n0.072052 28\n0.088153 28\n0.055785 3\n0.095945 28\n0.104464 3\n0.095569 28\n0.184878 28\n0.063076 28\n0.048234 28\n0.183957 28\n0.128245 28\n0.191942 28\n0.071916 28\n0.067504 28\n0.036578 64\n0.423383 1\n0.229457 1\n0.500020 1\n0.049661 1\n0.050399 1\n0.050767 1\n0.050056 1\n0.051041 1\n0.049890 1\n0.049540 1\n0.050284 1\n0.050250 1\n0.050114 1\n0.050035 1\n0.148118 32\n0.347004 32\n0.151987 32\n0.135803 32\n0.128206 36\n0.087783 32\n0.152197 32\n0.095889 32\n0.088243 61\n0.135899 65\n1.863667 65\n0.157947 65\n0.176248 1\n0.198748 3\n0.876156 302\n0.192299 64\n0.655131 3\n0.308374 3\n0.500204 3\n0.049855 3\n0.049903 3\n0.049969 3\n0.050056 2\n0.050033 1\n0.050021 3\n0.050346 65\n0.112983 1\n0.277039 36\n0.474870 80\n0.215690 56\n0.000898 47\n0.001142 18\n0.476800 3\n0.313387 28\n0.064324 28\n0.055659 28\n0.119924 28\n0.103927 28\n0.088047 59\n0.128004 3\n0.072167 28\n1.887846 28\n0.200180 28\n0.159985 28\n0.119990 4\n0.440004 28\n0.152648 28\n0.159370 28\n0.216095 28\n0.152143 28\n0.087928 28\n0.064039 65\n5.977004 65\n1.388986 65\n0.175976 64\n0.192010 65\n0.320080 1\n0.366604 39\n0.547701 49\n1.304181 39\n5.255655 33\n0.144514 33\n0.159379 33\n0.144161 199\n0.855748 43\n0.320124 43\n0.024642 43\n0.095065 43\n0.120026 82\n0.400333 22\n0.000032 65\n0.623488 153\n1.112416 8\n0.106365 28\n0.141065 28\n0.184403 28\n0.039556 55\n0.136358 28\n0.095537 66\n0.128579 28\n0.159812 28\n0.095788 28\n0.056250 28\n0.080011 2\n0.143846 28\n0.104210 3\n0.111859 28\n0.186663 28\n0.133415 28\n0.120204 47\n0.079822 116\n0.646485 110\n0.044430 65\n0.005156 74\n1.968397 65\n0.497745 64\n0.049995 64\n0.050854 64\n0.050116 64\n0.050454 62\n0.050372 64\n0.050886 285\n0.054181 721\n0.000047 332\n0.000527 65\n0.766140 65\n0.504466 65\n0.143991 64\n0.151799 65\n0.127109 64\n0.186701 64\n0.342171 1\n0.110959 75\n0.509811 33\n0.133460 33\n0.143061 33\n0.136156 205\n0.663969 43\n0.359913 43\n0.039781 43\n0.097013 43\n0.087355 57\n0.232075 65\n4.848273 65\n0.497766 65\n0.050228 65\n0.050483 64\n0.049226 65\n0.050151 65\n0.051202 65\n0.049712 65\n0.959518 65\n0.255861 66\n0.192060 65\n0.295748 65\n0.263902 52\n0.545396 854\n0.000052 98\n0.000029 457\n0.000537 116\n0.542566 110\n0.034250 65\n0.004311 75\n3.860054 65\n0.497442 64\n0.049605 65\n0.050022 64\n0.050775 64\n0.050335 64\n0.051524 64\n0.054677 62\n0.256716 64\n20.152238 62\n0.399394 24\n0.717447 146\n0.000044 195\n0.132970 63\n0.270466 1\n0.555201 4\n0.669211 28\n0.104899 28\n0.079279 53\n0.063947 1\n0.232248 49\n0.199793 49\n0.152204 49\n0.080036 49\n0.063865 49\n0.128176 49\n0.208039 49\n0.224035 49\n0.007586 49\n0.072207 49\n0.119842 49\n0.048054 4\n0.256195 4\n0.127781 4\n0.144250 4\n0.119703 49\n0.095984 49\n0.096336 49\n0.063983 28\n0.407949 30\n0.034669 35\n0.680413 96\n0.476909 1\n0.211494 96\n1.980410 1\n0.141160 28\n0.234868 28\n0.071905 28\n0.087991 28\n0.183608 28\n0.136139 2\n0.352050 54\n0.000110 1\n0.247927 1\n0.000057 28\n0.160318 28\n0.671925 28\n0.103731 28\n0.056252 28\n0.055770 28\n0.515129 28\n0.260861 28\n0.136379 28\n0.207958 4\n0.383977 4\n0.103990 4\n0.127717 28\n0.208388 28\n0.151951 28\n0.128599 47\n0.072160 34\n0.177977 7\n1.001878 63\n0.115322 64\n0.498151 65\n0.050191 65\n0.050220 65\n0.049731 65\n1.302288 65\n0.592497 65\n0.631177 100\n0.193332 72\n0.241695 3\n1.159008 241\n0.136774 3\n0.159595 274\n0.144854 67\n0.151289 302\n0.160474 3\n0.158859 79\n0.168959 229\n0.000058 3\n0.208167 270\n0.415778 64\n0.400299 64\n0.497173 64\n0.050158 63\n0.050036 64\n0.050135 63\n0.049640 63\n0.050029 63\n0.474059 46\n1.412891 78\n0.001109 875\n0.000131 63\n0.000103 72\n0.787693 64\n0.901903 63\n0.304208 64\n0.575761 64\n0.499765 64\n0.050340 64\n0.050374 64\n0.050286 64\n0.050920 64\n0.051174 64\n0.447670 64\n0.223874 64\n0.375838 64\n0.545241 64\n0.254769 4\n0.071014 1\n0.127625 1\n0.500222 2\n0.292032 209\n0.284630 45\n0.143010 45\n0.135789 45\n0.152100 45\n0.127923 151\n0.112157 30\n0.383478 30\n0.224240 30\n0.151839 49\n0.055937 3\n0.325898 2\n0.202286 28\n0.064134 28\n0.123706 28\n0.116310 28\n0.104100 28\n0.079968 59\n0.136466 3\n0.127339 28\n0.920315 28\n0.464029 28\n0.175694 28\n0.007596 4\n0.568650 4\n0.111752 28\n0.136243 28\n0.159714 65\n9.849941 65\n0.139874 65\n0.151984 65\n0.152100 64\n0.151969 65\n0.120054 4\n0.298429 37\n0.500304 4\n0.049800 4\n0.051045 4\n0.049940 4\n0.051126 4\n0.049393 4\n0.050587 4\n0.116835 4\n0.135999 6\n0.120051 1\n0.000030 28\n0.119601 28\n0.192250 28\n0.144008 28\n0.095743 28\n0.544314 28\n0.656095 28\n0.047994 28\n0.055751 28\n0.120330 64\n0.728221 65\n0.165827 65\n0.200281 65\n1.344069 64\n0.152241 65\n0.167833 64\n0.175788 64\n0.160037 65\n0.167812 64\n0.152691 64\n0.135422 64\n0.151971 1\n0.366732 12\n0.283572 12\n0.199499 12\n0.167747 6\n0.175922 63\n0.321782 12\n0.174085 12\n0.152087 12\n0.160319 6\n0.128018 63\n0.295468 12\n0.169219 12\n0.120827 12\n0.167477 6\n0.111713 63\n0.270731 12\n0.169305 12\n0.112065 12\n0.144889 6\n0.126845 64\n0.208651 3\n0.863494 205\n0.135770 207\n0.275745 66\n0.155690 241\n1.057014 74\n0.527702 64\n0.125421 1\n0.319296 3\n0.802974 205\n0.128179 207\n0.167949 64\n0.559698 63\n0.497956 63\n0.051371 52\n0.001188 45\n0.001302 71\n0.046934 63\n0.050580 62\n0.051258 61\n0.153637 62\n0.383973 24\n0.449371 139\n0.000035 1\n0.266510 4\n0.821223 124\n0.176941 3\n0.134949 41\n0.056327 41\n0.215794 41\n0.032337 41\n0.135806 3\n0.127781 41\n0.007803 41\n0.224476 41\n0.063980 41\n0.224116 1\n0.183910 41\n0.095998 41\n0.121756 41\n0.054119 3\n0.159886 41\n0.688429 41\n0.199700 41\n0.095622 41\n0.056482 41\n0.088033 3\n0.128113 41\n0.079991 41\n0.144161 41\n0.047937 41\n0.135483 2\n0.104292 41\n0.088161 41\n0.111589 3\n0.056129 41\n0.104267 41\n0.071902 41\n0.136010 41\n0.056038 41\n0.176126 1\n0.160001 41\n0.135934 41\n0.087782 41\n0.216252 41\n0.007835 41\n0.168398 43\n0.255936 43\n0.103657 41\n0.144006 41\n0.112378 3\n0.079719 41\n0.304155 41\n0.079828 41\n0.095944 41\n0.112216 3\n0.063942 41\n0.064475 41\n0.063339 41\n0.128278 41\n0.064128 41\n0.199891 41\n0.087879 41\n0.104067 41\n0.056293 41\n0.055685 3\n0.087972 41\n0.088086 41\n0.079985 41\n0.079931 3\n0.105057 41\n0.191125 41\n0.048085 41\n0.084565 41\n0.356008 41\n0.103242 41\n0.024092 41\n0.143926 41\n0.104029 163\n0.160716 6\n0.105556 124\n0.301189 3\n0.136397 41\n0.207969 41\n0.111758 41\n0.040058 41\n0.071911 41\n0.104009 41\n0.184518 41\n0.135673 41\n0.167864 41\n0.057059 41\n0.023000 3\n0.136438 41\n0.119484 41\n0.040303 3\n0.127789 41\n0.023909 41\n0.095796 41\n0.048850 1\n0.127484 41\n0.055960 41\n0.079850 41\n0.064188 41\n0.087918 41\n0.007769 41\n0.112275 41\n0.184047 43\n0.320006 43\n0.120147 43\n0.135872 41\n0.047877 41\n0.160155 2\n0.656041 41\n0.279989 41\n0.160017 41\n0.071832 41\n0.120211 3\n0.023970 41\n0.063966 41\n0.080032 41\n0.071951 1\n0.120343 41\n0.073298 41\n0.118461 41\n0.136032 41\n0.047999 41\n0.039685 41\n0.112269 41\n0.144442 41\n0.095486 41\n0.056304 41\n0.047752 3\n0.128091 41\n0.047923 41\n0.104089 41\n0.048602 41\n0.135546 1\n0.296131 41\n0.375783 41\n0.168728 41\n0.135285 41\n0.095969 3\n0.248027 1\n0.455974 41\n0.516335 41\n0.196665 41\n0.054915 41\n0.048205 41\n0.144069 41\n0.200760 3\n0.095122 41\n0.128706 41\n0.071531 3\n0.135983 41\n0.191878 41\n0.152243 163\n0.224697 6\n0.401163 124\n0.373171 3\n0.143863 41\n0.123856 41\n0.068650 41\n0.207856 41\n0.103929 41\n0.144168 41\n0.023773 41\n0.048003 41\n0.144252 2\n0.055790 41\n0.104007 41\n0.096019 3\n0.095571 41\n5.104752 41\n0.135888 41\n0.007556 3\n0.136222 41\n0.168066 41\n0.080039 41\n0.048156 3\n0.144027 41\n0.568014 41\n0.055953 41\n0.135895 41\n0.088144 43\n1.096028 43\n0.208193 43\n0.175900 43\n0.167786 41\n0.176878 41\n0.038924 41\n0.128365 41\n0.095580 41\n0.064240 41\n0.096016 41\n0.224304 41\n0.079685 3\n0.128293 41\n0.232082 41\n0.144106 41\n0.151758 41\n0.080038 1\n0.152030 41\n0.200119 41\n0.079903 3\n0.112065 41\n0.055852 41\n0.224242 41\n0.072130 43\n2.087595 41\n0.392272 2\n0.128027 41\n0.159909 41\n0.087865 41\n0.063993 3\n0.056170 41\n0.145412 41\n0.118402 41\n0.079704 41\n0.104305 64\n0.335847 64\n0.498280 62\n0.049821 64\n0.050085 924\n0.054037 169\n0.000084 201\n0.000457 65\n0.045619 64\n0.627723 65\n0.512261 4\n0.233993 201\n0.498909 43\n0.049833 43\n0.050046 43\n0.050009 43\n0.050187 16\n0.050876 4\n0.049803 4\n0.051115 4\n0.308320 4\n1.335826 4\n0.159910 4\n0.175864 28\n3.088195 28\n0.167844 28\n0.119932 28\n0.063919 28\n0.128159 28\n1.288062 28\n0.224156 28\n0.219248 4\n0.252655 4\n0.095845 28\n0.168099 28\n0.071999 28\n0.095932 28\n0.056239 28\n0.215871 30\n0.050958 65\n0.917838 65\n0.166020 65\n0.499967 65\n0.050072 64\n0.050608 53\n0.001108 46\n0.001352 73\n0.048075 65\n0.050274 65\n0.538422 65\n0.328223 65\n0.500106 66\n0.049927 65\n0.049915 65\n0.049807 5\n0.058525 912\n0.000050 178\n0.000032 273\n0.000526 64\n0.041913 65\n0.051613 65\n0.049471 65\n0.051228 65\n0.051392 65\n1.317477 8\n1.151870 28\n1.827674 28\n0.247134 28\n0.119955 28\n0.103940 28\n0.064010 28\n0.160050 116\n0.541891 175\n0.047601 75\n1.236896 65\n0.171550 65\n0.151672 65\n0.152342 64\n0.127424 25\n0.285359 156\n0.000125 64\n0.277044 64\n0.497330 64\n0.049831 64\n0.050216 65\n0.050325 64\n0.050767 64\n0.051443 61\n0.050462 444\n0.060817 744\n0.000080 464\n0.000623 64\n0.042209 64\n0.049484 64\n0.196041 64\n0.184204 64\n0.159571 64\n0.136064 274\n0.178914 64\n0.799528 64\n0.497502 64\n0.051730 64\n0.049353 64\n2.839631 64\n0.159438 64\n0.144286 64\n0.144142 63\n0.160012 7\n0.199403 99\n0.266872 1\n0.138366 28\n0.244230 28\n0.032094 28\n0.120048 4\n0.472287 4\n0.103707 28\n0.231985 28\n0.160012 2\n0.080080 52\n0.000055 3\n0.175950 28\n0.087675 28\n0.112285 28\n0.128029 28\n0.023743 28\n0.064018 3\n0.312564 53\n0.119976 42\n0.119996 3\n0.128018 203\n0.192201 700\n0.512718 422\n0.000111 41\n12.943645 41\n0.135716 41\n0.112078 41\n0.087679 41\n0.056164 41\n0.047925 57\n0.272347 147\n0.408248 28\n0.006882 18\n0.144852 28\n0.119740 28\n0.087908 28\n0.115186 28\n0.069107 28\n0.087607 59\n0.112328 2\n0.040664 28\n0.135346 28\n0.183960 28\n0.143903 28\n0.088160 28\n0.199940 674\n0.513454 443\n0.000041 28\n0.022824 28\n0.079526 66\n0.120365 28\n0.087862 28\n0.144232 99\n0.808263 1\n0.074543 28\n0.188203 28\n0.112127 28\n0.159842 28\n0.079923 4\n0.272410 4\n0.103546 28\n0.152261 2\n0.095595 52\n0.000035 3\n0.128512 28\n0.063782 28\n0.207940 28\n0.072005 28\n0.039912 28\n0.072140 1\n0.717444 3\n0.682603 280\n0.343153 113\n0.407714 171\n0.037454 72\n0.420836 64\n0.497405 64\n0.049801 64\n0.050240 64\n0.049865 64\n0.049838 65\n0.050220 64\n0.050729 64\n0.050067 64\n0.049933 61\n0.050313 25\n0.054395 1031\n0.000487 64\n0.047371 64\n0.050543 64\n0.050660 64\n0.050271 65\n0.051057 64\n0.050238 64\n0.051130 64\n0.051048 64\n0.051177 61\n0.049959 646\n0.336643 493\n0.000041 313\n0.000852 64\n0.485417 64\n0.050736 64\n0.051672 65\n0.050377 64\n0.049919 64\n0.050500 64\n0.050749 64\n0.050126 64\n0.050232 61\n0.050907 390\n0.060230 542\n0.000075 576\n0.000623 64\n0.039773 64\n0.050224 65\n0.050811 64\n0.050120 64\n0.049707 64\n0.050759 64\n0.050536 64\n0.050613 64\n0.051199 61\n0.050083 98\n0.062279 861\n0.000045 790\n0.000796 64\n0.038476 65\n0.049324 64\n0.050675 64\n0.050975 64\n0.049765 64\n0.049776 64\n0.050711 64\n0.050722 64\n0.050064 61\n0.049868 315\n0.055204 587\n0.000048 3\n0.000029 404\n0.000034 259\n0.000828 272\n1.877502 74\n0.000050 49\n0.829849 849\n0.000042 58\n0.000032 64\n0.460302 64\n0.208144 65\n0.183875 68\n2.223562 106\n0.345708 817\n0.000053 298\n0.000034 394\n0.000559 11\n1.057890 906\n0.000052 375\n0.001070 349\n0.000087 854\n1.160727 1\n0.000212 78\n0.000115 292\n0.000322 1\n0.000141 97\n0.000086 1\n0.000101 109\n0.000086 1\n0.000100 109\n0.000090 207\n0.000239 1\n0.000105 246\n0.000092 220\n0.604396 849\n0.000047 460\n0.000334 246\n1.859773 722\n0.000048 192\n0.000030 774\n0.000657 305\n0.573863 663\n0.000041 736\n0.000535 406\n0.392314 571\n0.000052 385\n0.000085 399\n0.000820 1\n0.516917 876\n0.000562 62\n0.978984 61\n0.383567 68\n0.504574 865\n0.000052 45\n0.000079 654\n0.000706 64\n0.045183 64\n0.050924 63\n0.050382 63\n0.051121 63\n0.050629 63\n3.878495 64\n0.499335 63\n0.050159 62\n0.050937 61\n0.050228 174\n0.054509 1570\n0.000586 64\n0.046049 64\n0.049883 63\n0.050672 63\n0.049692 63\n0.050923 64\n0.050957 63\n0.049467 63\n0.050511 62\n0.050620 61\n0.051154 50\n0.055008 998\n0.000050 56\n0.000038 372\n0.000438 64\n0.044972 64\n0.051774 63\n0.051424 63\n0.050826 64\n0.051483 63\n0.049344 63\n0.050062 63\n0.051257 62\n0.050491 61\n0.049478 105\n0.056447 820\n0.000116 272\n0.000084 423\n0.000718 64\n0.045684 64\n0.049508 63\n0.050381 64\n0.049989 63\n0.050488 63\n0.051195 63\n0.050063 63\n0.050960 62\n0.051066 61\n0.050120 25\n0.054001 1072\n0.000613 64\n0.045345 64\n0.050160 64\n0.050173 63\n0.050637 63\n0.050574 63\n0.050826 63\n0.050210 63\n0.318094 62\n0.499787 61\n0.050123 25\n0.054301 873\n0.000550 64\n0.046509 65\n0.049337 63\n0.050389 63\n0.050235 63\n0.050310 63\n0.049953 63\n0.169937 63\n0.500764 62\n0.051120 61\n0.049258 220\n0.054085 713\n0.000050 425\n0.000468 65\n0.045392 64\n0.050559 64\n7.080516 65\n0.499876 64\n0.050118 64\n0.050109 64\n0.049728 64\n0.050240 64\n0.050631 64\n0.049959 64\n0.050882 64\n0.050724 64\n0.530184 62\n0.499343 5\n0.054458 1125\n0.000162 504\n0.000877 64\n0.045544 64\n0.719844 64\n0.239926 65\n0.191605 64\n0.351305 65\n6.610626 25\n0.667015 148\n0.000114 1\n1.111340 64\n0.382191 64\n0.284932 3\n0.143149 3\n0.320395 3\n0.143571 3\n0.120214 3\n0.143911 36\n0.115160 32\n0.183909 32\n0.888347 32\n0.087549 61\n0.080140 65\n0.368969 1\n0.213432 1\n0.158430 1\n0.160334 1\n0.143960 1\n0.111873 36\n0.170913 32\n0.071962 32\n0.183687 32\n0.160251 61\n0.063912 65\n0.377674 65\n0.141020 3\n0.335155 3\n0.499643 3\n0.049818 3\n0.049818 2\n0.049930 1\n0.049960 3\n0.052371 3\n0.048600 3\n0.050858 3\n0.050372 3\n0.050107 32\n0.275270 32\n0.499691 32\n0.050984 32\n0.050351 32\n0.049736 32\n0.050081 32\n0.050081 32\n0.051565 32\n0.357488 65\n0.128478 1\n0.148379 1\n0.167753 1\n0.128086 62\n0.115811 32\n0.287132 32\n0.144037 32\n0.127947 65\n0.361982 65\n0.124567 1\n0.174571 1\n0.500727 1\n0.050288 1\n0.049871 1\n0.050128 1\n0.049989 1\n0.050163 1\n0.051055 1\n0.049322 1\n0.050621 1\n0.049875 1\n0.050343 1\n0.050524 1\n0.050386 1\n0.050503 1\n0.050160 1\n0.050526 1\n0.050352 1\n0.050613 1\n0.051723 1\n0.048831 1\n0.050627 1\n0.050378 98\n0.052309 18\n0.048906 1\n0.049978 1\n0.050107 32\n0.413641 32\n0.151148 3\n0.140707 2\n0.500048 1\n0.050154 3\n0.050146 3\n0.049842 3\n0.050198 3\n0.049851 3\n0.049844 3\n0.050966 2\n0.050308 1\n0.049705 3\n0.050809 3\n0.050618 3\n0.049488 3\n0.050136 3\n0.050301 3\n0.050459 2\n0.050485 1\n0.051081 14\n0.185144 24\n0.000051 15\n0.119895 24\n0.000079 116\n0.405927 175\n0.041051 75\n0.512711 65\n4.045739 64\n0.500138 65\n0.049906 65\n0.049578 65\n0.050133 65\n0.050126 65\n0.050652 64\n0.050088 63\n0.050382 25\n0.061389 1111\n0.000786 65\n0.039800 65\n1.167469 65\n0.499726 65\n0.049914 64\n0.050130 65\n0.049534 65\n0.050088 65\n0.050979 65\n0.050050 63\n0.050140 25\n0.089566 912\n0.000717 65\n0.010228 65\n0.050002 65\n5.854529 65\n0.256010 64\n0.272044 68\n1.366699 72\n0.286860 65\n0.494297 64\n0.050085 64\n0.050072 61\n0.050060 133\n0.062088 769\n0.000120 243\n0.000035 3\n0.000028 137\n0.000083 151\n0.000500 64\n0.038287 64\n0.049459 64\n0.050054 64\n0.050339 64\n0.049695 65\n0.050444 64\n0.050901 64\n0.050183 64\n0.209837 61\n0.191882 99\n0.140018 807\n0.000050 778\n0.000778 64\n0.187343 5\n0.347608 926\n0.000049 716\n0.000574 98\n0.732455 837\n0.000052 161\n0.000029 146\n0.000030 442\n0.000498 11\n0.170658 914\n0.000044 110\n0.000031 241\n0.000556 363\n1.088809 597\n0.000111 739\n0.000522 102\n1.564434 804\n0.000090 522\n0.000740 871\n0.754405 98\n0.000038 427\n0.000084 603\n0.000613 3\n0.912391 3\n0.175902 3\n0.151986 64\n0.431559 64\n0.346229 8\n0.382857 97\n0.710539 28\n0.511340 4\n0.580527 28\n0.127745 112\n0.847013 171\n0.054348 736\n0.650167 177\n0.000054 319\n0.000032 337\n0.000596 98\n1.069406 837\n0.000049 753\n0.000670 607\n1.217656 333\n0.000046 2\n0.000030 161\n0.000081 552\n0.000739 5\n0.693959 930\n0.000047 66\n0.000520 241\n0.000075 208\n0.000413 233\n0.000037 11\n0.387030 1265\n0.000606 62\n4.955490 63\n0.499227 63\n0.050117 63\n0.049995 63\n0.050000 65\n0.049636 63\n0.051746 64\n0.049365 64\n0.050457 64\n0.050408 64\n0.050248 64\n0.049928 64\n0.125774 64\n0.176175 8\n0.215826 1\n0.126945 1\n0.208575 3\n0.368024 21\n5.989699 59\n0.000113 43\n0.116563 43\n0.120168 43\n0.040114 43\n0.263864 43\n0.232324 43\n0.111762 43\n0.168175 43\n0.120005 116\n0.559979 110\n0.035425 65\n0.001614 75\n32.589464 65\n0.495175 65\n0.050225 61\n0.049895 64\n0.049999 51\n0.052657 1\n0.050745 142\n0.458431 1\n0.334469 4\n0.446338 28\n0.191429 28\n0.071995 53\n0.096415 1\n0.224040 49\n0.496088 6\n0.288123 49\n0.175796 49\n0.063896 49\n0.151829 49\n0.056207 49\n0.048023 49\n0.216171 49\n0.191979 4\n0.224051 4\n0.119710 49\n0.079841 49\n0.128588 49\n0.199584 49\n0.304221 49\n0.279916 49\n0.128089 49\n0.055797 49\n0.240187 49\n0.191800 49\n0.120354 49\n0.087660 49\n0.040058 64\n0.564834 65\n0.131026 65\n0.144014 64\n0.151945 66\n0.144104 65\n0.343637 3\n0.223289 31\n0.276285 59\n0.127133 57\n0.159536 55\n0.144106 53\n0.144503 51\n0.152182 49\n0.143167 47\n0.135736 45\n0.352169 43\n0.216184 43\n0.623942 43\n0.176473 43\n0.111277 43\n0.024459 43\n0.175791 116\n0.902705 175\n0.036595 221\n0.350295 1288\n0.000515 5\n0.785256 939\n0.000052 717\n0.000682 969\n0.607079 576\n0.000043 381\n0.000644 64\n0.921138 64\n0.493456 64\n0.049836 64\n0.050079 64\n0.049674 64\n0.050163 64\n0.050135 65\n0.050538 64\n0.051036 64\n0.051647 64\n0.050279 64\n0.050282 63\n0.050721 63\n0.161505 7\n0.215616 25\n0.277325 147\n0.000036 1\n0.119154 28\n0.204651 28\n0.168065 28\n0.199851 2\n0.063829 52\n0.000031 3\n0.224243 28\n0.072000 28\n0.528033 28\n0.143683 55\n0.048053 28\n0.152139 28\n0.088109 28\n0.167924 28\n0.088332 28\n0.039766 28\n0.063905 1\n0.128398 28\n0.136477 28\n0.111440 3\n0.095970 197\n0.176343 41\n0.232113 41\n0.079580 41\n0.160308 41\n0.087928 41\n0.040076 41\n0.152031 56\n0.440260 11\n0.283635 4\n0.000049 134\n0.781735 121\n1.407709 14\n0.252014 6\n0.224880 7\n0.651534 7\n0.158181 6\n0.152049 5\n0.144061 7\n0.165708 3\n0.516352 64\n0.149875 3\n0.120025 173\n0.279527 28\n0.006928 17\n0.169294 28\n0.168409 28\n0.072566 28\n0.103233 28\n0.087785 28\n0.087976 59\n0.104310 2\n0.079862 28\n0.136462 28\n0.175757 28\n0.143612 28\n0.099567 28\n0.164427 28\n0.344438 28\n0.191757 4\n0.400092 28\n0.231817 28\n0.136099 28\n0.055818 115\n0.463167 109\n0.029807 64\n0.005040 745\n1.563394 403\n0.000034 4\n0.000025 221\n0.000076 308\n0.000642 98\n0.846521 837\n0.000115 209\n0.000028 443\n0.000510 114\n0.637432 817\n0.000050 199\n0.000031 242\n0.000557 183\n0.805940 71\n0.000082 271\n0.365205 646\n0.000048 528\n0.000566 269\n0.186545 717\n0.000039 451\n0.000544 120\n0.748222 825\n0.000046 665\n0.000884 205\n0.438136 698\n0.000049 678\n0.000164 470\n0.000663 25\n0.516397 983\n0.000765 64\n0.219064 64\n0.295361 64\n0.136549 8\n0.207404 25\n0.270536 148\n0.000043 1\n0.238750 73\n0.509246 55\n0.001056 46\n0.000936 45\n0.157052 51\n0.087826 3\n0.120240 28\n0.152973 28\n0.255216 28\n0.063970 28\n0.071689 1\n0.255940 1\n0.320274 4\n0.120054 4\n0.240170 4\n0.175889 28\n0.120040 28\n0.095374 28\n0.040460 28\n0.064117 3\n0.103501 53\n0.152366 42\n0.112048 3\n0.064146 205\n0.183876 41\n0.215920 41\n0.048849 41\n0.175554 41\n0.088170 41\n0.023150 41\n0.161510 57\n0.239395 28\n0.123379 3\n0.075881 28\n0.151981 66\n0.089025 28\n0.063588 28\n0.055551 28\n0.112448 59\n0.064472 3\n0.135360 28\n0.160004 28\n0.088160 28\n0.088001 28\n0.111783 28\n0.051595 28\n0.148598 28\n0.135940 28\n0.216347 28\n0.183471 28\n0.039984 28\n0.191960 28\n0.072035 28\n0.032182 28\n0.144812 28\n0.207179 28\n0.088038 31\n0.141434 3\n0.583691 116\n0.028055 175\n0.040018 75\n0.481661 1\n0.122544 1\n0.500485 1\n0.050308 1\n0.049949 1\n0.050849 1\n0.050719 1\n0.049954 1\n0.050717 1\n0.050979 1\n0.050749 1\n0.049305 1\n0.050350 1\n0.050459 1\n0.049879 1\n0.050712 1\n0.050284 1\n0.050065 1\n0.050700 1\n0.049201 1\n0.050924 1\n0.052611 1\n0.048690 1\n0.050448 1\n0.052255 1\n0.049899 1\n0.050859 1\n0.051189 1\n0.049876 1\n0.049905 1\n0.050519 1\n0.050651 1\n0.050676 1\n0.051176 1\n0.050841 1\n0.050763 1\n0.050378 1\n0.050578 1\n0.051127 1\n0.050822 1\n0.049568 1\n0.051147 1\n0.050654 1\n0.051006 1\n0.051006 65\n0.204705 1\n0.155879 1\n0.207912 72\n0.455729 80\n0.147576 65\n0.368348 1\n0.188170 1\n0.160178 36\n0.139239 80\n0.408925 65\n0.359963 1\n0.187790 1\n0.136047 36\n0.146764 80\n0.120067 3\n0.421252 65\n0.492828 65\n0.156362 64\n0.144106 64\n0.167757 64\n0.271845 32\n0.107390 32\n0.151108 3\n0.316640 2\n0.499898 1\n0.049911 3\n0.050258 3\n0.051087 3\n0.050757 3\n0.050196 3\n0.050998 3\n0.050823 2\n0.051147 1\n0.051076 3\n0.139866 3\n0.199917 32\n0.139599 32\n0.499777 32\n0.049789 32\n0.050396 32\n0.049965 32\n0.050438 32\n0.050481 65\n0.369002 65\n0.213943 1\n0.198723 104\n0.170018 18\n0.142259 32\n0.122885 32\n0.136319 32\n0.128011 65\n0.304960 1\n0.011475 1\n0.144143 1\n0.151768 32\n0.362785 32\n0.104129 32\n0.464059 437\n1.252062 723\n0.000044 364\n0.000726 110\n0.386083 165\n0.040792 106\n0.924657 867\n0.000119 701\n0.000540 677\n1.037576 404\n1.105003 573\n0.000045 621\n0.000537 64\n0.625670 64\n0.500300 64\n0.049876 64\n0.050435 64\n0.050506 65\n0.049758 64\n0.050841 64\n0.050462 64\n0.269733 64\n0.447908 64\n0.128476 8\n0.327415 1\n0.079230 1\n0.500244 1\n0.049977 1\n0.049841 1\n0.050065 1\n0.050121 1\n0.049937 1\n0.049845 1\n0.050547 70\n0.274828 32\n0.164765 32\n0.071995 32\n0.047588 32\n0.568467 32\n0.360608 46\n0.505933 44\n0.497437 42\n0.050219 40\n0.052492 38\n0.049991 36\n0.049999 34\n0.153306 32\n0.143969 3\n0.159700 200\n0.401072 41\n0.167933 41\n0.063255 41\n0.176203 41\n0.202569 43\n0.365949 41\n0.207324 41\n0.032217 41\n0.159696 57\n0.240827 10\n0.190389 22\n0.000056 65\n0.373115 1\n0.257982 67\n1.106719 95\n0.135912 37\n0.000051 64\n0.474704 64\n0.495128 64\n0.050040 61\n0.049824 493\n0.052469 332\n0.000047 64\n0.275621 64\n0.500202 63\n0.049773 63\n0.050019 63\n0.051161 64\n0.050684 63\n0.051197 63\n0.050450 62\n0.051075 61\n0.051344 403\n0.054584 1\n0.000079 225\n0.000106 918\n0.001707 64\n0.043687 64\n0.050714 63\n0.050380 63\n0.050381 65\n0.531454 63\n0.184344 63\n0.143649 63\n0.499520 62\n0.049860 61\n0.050672 422\n0.055025 500\n0.000036 205\n0.000120 537\n0.000434 64\n0.045779 64\n0.050789 63\n0.050489 64\n0.050621 63\n0.050272 63\n0.511846 64\n0.167680 64\n1.680494 8\n0.239448 4\n0.260202 4\n0.498260 4\n0.049745 4\n0.050167 4\n0.049649 4\n0.050237 4\n0.050844 4\n0.050099 4\n0.049889 8\n0.117053 28\n0.232458 28\n0.207950 28\n0.127284 28\n0.016152 28\n0.055716 28\n1.056317 200\n0.224283 41\n0.271956 41\n0.128430 41\n0.055569 41\n0.151961 41\n0.032042 41\n0.023856 57\n0.472656 66\n0.245806 64\n0.363339 65\n0.124803 55\n0.001166 46\n0.000884 14\n0.196520 66\n0.308073 225\n0.136714 63\n0.430442 63\n0.498358 63\n0.049633 63\n0.049649 62\n0.049666 61\n0.050815 128\n0.056531 789\n0.000091 87\n0.000585 177\n0.000041 326\n0.002608 64\n0.041294 64\n0.050427 64\n0.050989 65\n0.216919 64\n0.559804 64\n0.232422 6\n0.287853 65\n0.259168 4\n1.023619 4\n0.499979 4\n0.049914 4\n0.050125 4\n0.051453 4\n0.048521 4\n0.050836 4\n0.050102 4\n0.166199 8\n0.144001 28\n0.975982 28\n0.279846 28\n0.016158 4\n0.352184 4\n0.127643 28\n0.095754 28\n0.104319 28\n0.031676 28\n0.064266 28\n0.215849 28\n0.184275 28\n0.179890 28\n0.187912 47\n0.128088 10\n0.180758 22\n0.000059 65\n0.869140 65\n0.125089 64\n0.151394 65\n0.119732 4\n0.266323 4\n0.136574 4\n0.142816 4\n0.144354 4\n0.143978 4\n0.143988 4\n0.143802 4\n0.143904 4\n0.144155 8\n0.135841 28\n0.080130 28\n0.095725 28\n0.104526 28\n0.047652 28\n0.063858 28\n1.056276 28\n0.184725 28\n0.223852 28\n0.170957 47\n0.092483 10\n0.212064 22\n0.000050 64\n0.365219 64\n0.497196 63\n0.049635 64\n0.130236 201\n0.441976 43\n0.167448 43\n0.159999 43\n0.160081 43\n0.160871 17\n0.150660 28\n0.303908 28\n0.191911 28\n0.128140 28\n0.023701 28\n0.056123 28\n0.296038 199\n5.672503 41\n0.231722 41\n0.096465 41\n0.119890 41\n0.047873 2\n0.079814 41\n0.136431 41\n0.079690 41\n0.103974 41\n0.056199 56\n0.328240 10\n1.179954 22\n0.000056 64\n0.540027 64\n0.358358 1\n0.270899 199\n0.677640 736\n0.000049 885\n0.000836 313\n0.752049 1094\n0.000120 444\n0.000927 64\n0.726903 64\n0.494468 64\n0.050036 64\n0.049704 65\n0.050008 64\n0.051000 64\n0.051009 64\n0.050990 64\n0.050544 64\n0.050749 64\n0.050857 64\n0.050372 63\n0.050881 63\n0.151496 64\n0.176364 63\n0.200126 3\n0.422795 3\n0.184184 3\n0.152275 3\n0.151452 3\n0.152231 3\n0.159995 2\n0.167681 1\n0.136053 31\n9.334022 31\n0.141489 31\n0.151704 31\n0.144055 31\n0.127868 53\n0.160141 53\n0.160032 53\n0.095906 53\n0.519909 53\n0.376450 53\n0.063917 53\n0.216169 53\n0.119632 53\n0.024005 53\n0.176445 64\n0.516995 64\n0.168163 64\n0.168820 551\n2.013825 399\n0.000103 648\n0.000039 293\n0.000590 62\n1.169289 63\n0.499589 63\n0.049981 63\n0.050292 63\n0.050031 63\n0.049657 64\n0.049804 64\n0.051113 64\n0.050712 53\n0.000865 46\n0.001218 72\n0.051590 64\n0.050950 64\n0.050740 64\n0.577818 64\n0.499510 64\n0.049748 64\n0.050584 63\n0.050403 64\n0.050843 63\n0.051210 63\n0.050276 63\n0.051144 63\n0.178077 3\n0.262211 3\n0.500435 3\n0.050697 3\n0.050855 3\n0.050074 3\n0.051036 2\n0.050460 1\n0.050586 3\n0.051455 3\n0.050277 3\n0.049787 3\n0.049994 3\n0.050535 36\n0.379796 32\n0.127944 32\n0.195592 32\n0.044444 61\n0.088946 64\n0.501628 1\n0.373798 1\n0.135983 1\n0.119809 1\n0.151894 1\n0.152178 36\n0.172321 32\n0.095736 32\n0.112222 32\n0.119912 61\n0.096442 1\n0.331272 1\n0.439908 1\n0.135876 1\n0.160053 1\n0.144081 64\n0.122595 36\n0.321987 32\n0.087750 32\n0.856522 32\n0.127952 61\n0.041041 64\n0.589766 1\n0.140711 1\n0.151955 1\n0.144159 1\n0.143592 1\n0.128004 72\n0.155907 32\n0.023961 32\n0.791795 32\n0.095765 61\n0.080044 63\n0.720689 65\n0.497472 65\n0.050459 65\n0.051247 65\n0.050758 65\n0.050915 65\n0.049901 65\n0.050417 65\n0.050984 65\n0.050743 65\n0.051033 65\n0.050565 65\n0.050515 65\n0.051143 65\n0.050594 344\n0.064225 568\n0.000041 6\n0.000070 88\n0.000510 116\n0.000031 64\n0.000029 2\n0.000383 365\n0.000084 65\n0.036555 1\n0.873065 3\n0.464434 3\n0.151838 31\n0.611629 31\n0.143338 31\n0.151924 31\n0.143993 31\n0.136060 32\n0.170548 32\n0.557702 32\n0.127658 32\n0.152089 32\n0.048016 80\n0.096158 32\n0.127820 32\n0.168173 32\n0.160123 32\n0.039664 32\n0.161126 32\n0.055057 32\n0.127926 32\n0.095882 32\n0.104186 32\n0.023736 32\n0.152584 61\n0.457619 65\n0.171690 62\n0.500469 62\n0.049757 65\n0.250132 66\n0.200051 1\n0.118749 1\n0.500715 1\n0.050646 1\n0.050315 1\n0.050445 1\n0.155709 56\n0.236442 56\n0.142949 56\n0.151958 56\n0.144166 56\n0.128071 53\n0.111624 53\n0.040058 53\n0.144149 80\n0.111972 28\n0.152070 23\n0.000055 53\n0.207742 53\n0.152386 53\n0.103660 53\n0.160803 53\n0.072046 53\n0.255423 56\n0.000913 47\n0.001129 71\n0.118748 29\n0.095045 23\n0.000101 53\n0.032575 53\n0.151515 64\n0.386692 65\n0.138907 61\n0.127780 60\n0.160196 1\n0.199284 1\n0.499952 1\n0.050310 1\n0.050395 1\n0.049833 1\n0.050032 1\n0.050925 1\n0.050091 1\n0.050894 1\n0.050388 1\n0.050896 1\n0.134859 3\n0.287245 36\n0.140741 32\n0.121594 32\n0.606974 32\n0.141862 61\n0.071718 32\n0.392373 32\n0.184166 32\n0.071738 32\n0.200317 36\n0.056300 32\n0.415673 32\n0.112097 32\n0.079817 68\n0.023656 32\n0.168367 31\n0.295922 68\n0.135979 59\n0.144036 57\n0.135952 55\n0.136399 55\n0.211456 117\n0.150239 805\n0.000049 767\n0.000542 62\n0.146527 62\n0.384510 62\n0.143978 62\n0.151819 66\n0.128145 1\n0.206979 1\n0.500629 1\n0.049342 1\n0.049953 1\n0.050854 1\n0.049043 1\n0.050930 1\n0.050381 1\n0.050999 1\n0.347831 32\n0.383513 32\n0.114896 32\n0.135921 32\n0.127994 32\n0.111790 32\n0.160334 80\n0.119626 32\n0.112486 32\n0.176114 32\n0.159803 32\n0.056162 32\n0.127994 32\n0.112083 32\n0.103804 32\n0.112131 32\n0.088028 32\n0.047682 32\n0.160528 8\n0.621935 25\n0.749929 74\n0.000114 25\n0.387884 74\n0.000120 8\n0.379183 2\n0.372206 28\n1.407868 28\n0.096562 28\n0.151815 28\n0.111292 2\n0.024318 53\n0.000062 3\n0.120058 28\n0.127874 8\n0.359974 28\n0.111926 28\n0.136464 28\n0.191847 4\n0.399798 28\n0.103580 28\n0.024128 28\n0.117338 28\n0.103982 28\n0.119977 28\n0.032047 54\n0.144112 28\n0.251245 30\n0.197485 1\n0.351988 201\n0.746679 43\n0.152021 43\n0.208104 43\n0.159714 43\n0.152301 43\n0.168052 43\n0.047652 43\n0.129661 43\n0.254699 25\n0.007455 202\n0.000091 88\n0.104104 45\n0.408109 45\n0.143944 45\n0.144033 45\n0.144960 45\n0.151624 45\n0.167056 45\n0.152506 45\n0.151556 80\n0.162763 25\n0.501967 189\n0.000042 43\n0.271517 80\n0.128368 43\n0.071604 43\n0.096181 43\n0.055964 43\n0.063947 43\n0.192303 43\n0.031727 43\n0.039993 43\n0.095971 43\n0.192114 58\n0.479946 64\n0.483880 65\n0.762400 64\n1.168349 65\n0.168206 1\n0.486430 67\n1.098042 47\n1.001085 1\n0.000784 150\n0.000044 73\n0.538906 65\n0.494099 64\n0.050079 98\n0.054988 903\n0.000116 234\n0.000097 42\n0.000067 374\n0.000719 62\n0.043766 65\n0.050203 65\n0.051417 67\n0.049559 65\n0.431125 65\n0.183908 62\n0.664085 62\n0.255915 63\n0.423822 65\n0.232236 11\n0.247239 949\n0.000045 532\n0.000578 65\n0.636740 65\n0.123166 66\n0.168076 65\n0.176157 1\n0.294819 104\n0.502904 18\n0.048601 1\n0.050858 1\n0.050858 1\n0.050756 1\n0.049734 1\n0.050481 1\n0.050957 1\n0.050965 1\n0.050329 1\n0.050153 1\n0.051160 1\n0.050457 1\n0.284081 36\n0.201899 32\n0.071948 32\n0.280047 32\n0.360220 61\n0.127994 32\n0.519977 32\n0.168105 32\n0.071897 32\n0.103866 36\n0.144367 32\n0.480081 32\n0.103726 32\n0.095788 32\n0.048223 32\n0.152381 31\n0.432140 31\n0.167808 31\n0.159892 31\n0.143794 31\n0.136009 64\n0.434923 65\n0.171586 116\n1.000680 175\n0.033702 74\n3.906456 65\n0.691010 65\n0.848346 64\n0.175718 65\n0.175955 68\n1.079095 81\n1.510458 30\n0.280790 3\n0.369703 30\n0.112840 30\n0.159861 30\n0.176084 33\n0.351968 30\n0.232040 57\n0.087990 30\n0.120239 30\n0.104052 30\n1.199741 30\n0.047911 30\n0.368385 58\n0.444696 164\n0.291200 1\n0.139778 4\n0.452129 125\n0.216150 322\n0.235842 595\n0.000047 724\n0.000584 210\n1.122970 695\n0.000124 338\n0.000038 256\n0.000634 63\n0.431706 65\n0.499650 63\n0.049569 63\n0.049786 63\n0.050201 63\n0.049834 64\n0.050087 64\n0.049753 64\n0.050382 64\n0.050818 64\n0.050526 65\n0.051007 64\n0.050636 64\n0.051112 64\n0.050858 64\n0.050068 64\n0.051186 64\n0.327312 7\n0.119554 41\n0.257622 41\n0.303847 1\n0.088085 41\n0.087858 43\n0.264266 1\n0.135850 43\n0.128382 43\n0.143736 3\n0.055656 41\n0.136145 41\n0.239877 41\n0.063804 41\n0.072569 41\n0.039933 3\n0.647866 1\n1.088308 41\n0.175890 3\n0.113083 41\n0.262850 43\n0.304298 41\n0.199663 41\n0.063671 41\n0.088335 41\n0.092512 3\n0.035359 41\n0.103841 41\n0.072204 41\n0.087983 41\n0.064217 1\n0.358025 235\n0.541513 682\n0.000110 269\n0.000034 84\n0.000031 377\n0.000561 218\n1.200683 690\n0.000042 785\n0.000544 430\n0.565871 630\n0.000085 539\n0.000757 114\n0.312695 815\n0.000050 1060\n0.000738 463\n0.439233 899\n0.000042 448\n0.000650 823\n0.955652 921\n0.000043 304\n0.000676 63\n2.485965 63\n0.499164 63\n0.050757 63\n0.050951 63\n0.049301 63\n0.050114 64\n0.052267 238\n0.199337 859\n0.000084 450\n0.000502 155\n0.000070 203\n0.253469 710\n0.000117 350\n0.000030 336\n0.000623 187\n0.364262 490\n0.000051 62\n0.580685 64\n0.499255 63\n0.050389 63\n0.049558 63\n0.050152 63\n0.050030 63\n0.050344 64\n0.233490 108\n0.209327 18\n0.455793 41\n0.328910 41\n0.190835 41\n0.144084 41\n0.120202 41\n0.384084 43\n0.320081 41\n0.111705 41\n0.047919 21\n0.272362 22\n0.000089 41\n0.199786 41\n0.191930 41\n0.064027 41\n0.159916 41\n0.183970 3\n0.071932 41\n0.256370 21\n3.048079 22\n0.000082 41\n0.679844 41\n0.111814 41\n0.080007 41\n0.048035 1\n0.127733 1\n0.000396 41\n0.159837 41\n0.063976 41\n0.120388 41\n0.111383 41\n0.032155 41\n0.160072 23\n0.266324 23\n0.000092 8\n1.001778 62\n0.249202 28\n0.844716 64\n0.157668 1\n0.113765 176\n0.641457 727\n0.000044 3\n0.000591 242\n0.000032 359\n0.000289 64\n0.666110 64\n0.493256 64\n0.050109 64\n0.050138 64\n0.050602 64\n0.050817 64\n0.051278 64\n0.049842 64\n0.051513 66\n0.202781 67\n0.771797 123\n0.142752 169\n0.000032 67\n0.288008 78\n0.687928 206\n0.000033 502\n0.337321 194\n0.657774 1\n0.000078 267\n0.000067 1\n0.000308 150\n0.000203 79\n0.000365 62\n0.448625 64\n0.499436 63\n0.051025 63\n0.050010 63\n0.050617 63\n0.051828 63\n0.050103 64\n0.050355 64\n0.050471 64\n0.050427 335\n0.769419 73\n0.568720 64\n0.149436 8\n0.511340 1\n0.367385 1\n0.499882 1\n0.049805 1\n0.050372 1\n0.049483 1\n0.050476 1\n0.049819 1\n0.505987 1\n0.500041 1\n0.049935 1\n0.049752 1\n0.050108 1\n0.050274 1\n0.148013 1\n0.167868 32\n0.234805 32\n0.151801 32\n0.152081 32\n0.135846 32\n0.127881 32\n0.568287 32\n0.023679 32\n0.080214 8\n0.294185 1\n0.135233 1\n0.167990 3\n0.312037 41\n0.362421 33\n0.152158 33\n0.144027 33\n0.151898 33\n0.128053 30\n0.135819 30\n0.079976 55\n0.152098 65\n2.345519 8\n0.199374 240\n0.279370 1\n0.113712 28\n0.253433 51\n0.128023 3\n0.097020 28\n0.215465 28\n0.047848 28\n0.095966 2\n0.184148 28\n0.255657 28\n0.144189 53\n0.103751 3\n0.096125 28\n0.192031 51\n0.060752 3\n0.123602 28\n0.072029 28\n0.160017 28\n0.023726 28\n0.168201 28\n0.143839 4\n0.498215 4\n0.150046 4\n0.135767 4\n0.104131 28\n0.111794 28\n0.087867 55\n0.112058 28\n0.080289 28\n0.103851 28\n0.520250 28\n0.199903 28\n0.007741 28\n0.056023 28\n0.040216 28\n0.184437 28\n0.210466 62\n0.470272 1\n0.860582 3\n0.625866 100\n0.192482 24\n0.000603 8\n0.589566 1\n0.271412 1\n0.176750 25\n0.297992 23\n0.000050 25\n0.499289 23\n0.000057 25\n0.049828 23\n0.000052 25\n0.052743 23\n0.000050 25\n0.049960 23\n0.000048 25\n0.051355 23\n0.000039 25\n0.049854 23\n0.000110 25\n0.049923 23\n0.000437 25\n0.049970 23\n0.000117 25\n0.050518 23\n0.000051 25\n0.049896 23\n0.000109 25\n0.051037 23\n0.000041 25\n0.050083 23\n0.000039 25\n0.144239 23\n0.000104 25\n0.399527 23\n0.000650 22\n1.407077 23\n0.000100 22\n0.199542 23\n0.000052 22\n0.096315 23\n0.000093 22\n0.167676 23\n0.000048 22\n0.087692 23\n0.000050 25\n0.448670 23\n0.000072 25\n0.103612 23\n0.000051 22\n0.079672 23\n0.000049 22\n0.128218 23\n0.000050 22\n0.184398 23\n0.000072 22\n0.079475 23\n0.000050 22\n0.144399 23\n0.000057 22\n0.263323 23\n0.000049 22\n0.048284 23\n0.000054 22\n0.087675 23\n0.000053 22\n0.111758 23\n0.000050 22\n0.032078 23\n0.000049 22\n0.168922 23\n0.000054 22\n0.271182 23\n0.000051 25\n0.560326 23\n0.000065 22\n0.687381 23\n0.000051 3\n0.382715 65\n0.537558 64\n0.134889 8\n0.291374 2\n0.389031 28\n0.655835 51\n0.071327 32\n0.336504 28\n0.039707 28\n0.080177 4\n0.280444 56\n0.000987 47\n0.001220 21\n0.117821 55\n0.120047 3\n0.071287 28\n0.168254 28\n0.032111 28\n0.080041 2\n0.152055 28\n0.120102 21\n0.000105 38\n0.112105 3\n0.063875 178\n0.328239 29\n0.000113 177\n0.922696 769\n0.000047 143\n0.000030 359\n0.001129 102\n0.424539 865\n0.000044 96\n0.000030 581\n0.000667 202\n8.034788 711\n0.000047 2\n0.000068 92\n0.000489 118\n0.000065 64\n0.000157 74\n0.000295 2\n0.000336 330\n0.000041 187\n0.194554 818\n0.000049 62\n0.403551 64\n0.499913 63\n0.050898 63\n0.049880 63\n0.049725 63\n0.050283 63\n0.050348 64\n0.050678 64\n0.050990 64\n0.050681 64\n0.050991 65\n0.049834 64\n0.146856 8\n0.335711 41\n0.339331 41\n0.230300 41\n0.015702 41\n0.111970 28\n0.784691 27\n0.000040 28\n0.187244 64\n0.260944 8\n0.121598 28\n0.461407 28\n0.119649 28\n0.033069 28\n0.142834 28\n0.055708 38\n0.144430 21\n0.000041 3\n0.088019 28\n1.743994 28\n0.152273 28\n0.023573 34\n0.121241 21\n0.000053 28\n0.094819 28\n0.199951 28\n0.152158 28\n0.096006 28\n0.071774 28\n0.168577 28\n0.399613 28\n0.116255 28\n0.052841 28\n0.031875 28\n0.151127 28\n0.311954 28\n0.488374 28\n0.159633 28\n0.127998 26\n0.048121 21\n0.000048 34\n0.204236 1\n0.466042 116\n0.050020 175\n0.035909 75\n0.207131 64\n0.139965 6\n0.836581 284\n0.000043 8\n0.087796 2\n0.349552 122\n0.303694 3\n0.279835 41\n3.263975 41\n0.200279 41\n0.071702 41\n0.168267 41\n0.103584 1\n0.208440 41\n0.063706 41\n0.096035 41\n0.104022 3\n0.095853 41\n0.176269 41\n0.112162 41\n0.088030 41\n0.063654 41\n0.384561 43\n0.440026 41\n0.208531 116\n0.405942 175\n0.034080 75\n0.304996 65\n0.148514 64\n0.183661 139\n1.083079 8\n0.800952 2\n0.540688 122\n0.176274 3\n0.167772 41\n1.071842 41\n0.200003 41\n0.015669 3\n0.168111 41\n0.584348 41\n0.175694 3\n0.104098 41\n0.072046 41\n0.087988 41\n0.104177 41\n0.031756 41\n0.264052 64\n0.256463 1\n0.107238 28\n0.252330 51\n0.111879 3\n0.103923 28\n0.248879 28\n0.039281 28\n0.048222 2\n0.151860 49\n0.152407 38\n0.119732 3\n0.071773 112\n0.232495 41\n1.392232 41\n0.127620 41\n0.120519 2\n0.087756 41\n0.184447 41\n0.167584 41\n0.055762 41\n0.103974 44\n0.256668 28\n0.204064 4\n0.460490 28\n0.531683 64\n0.259946 8\n0.130605 28\n0.324082 28\n0.071877 28\n0.128149 28\n0.143962 28\n0.079805 59\n0.130819 3\n0.069938 28\n0.072127 28\n0.191538 28\n0.144221 55\n0.487869 65\n0.388557 8\n0.266741 130\n0.321957 8\n0.083813 28\n0.147884 28\n0.175158 28\n0.079517 55\n0.136522 28\n0.079790 28\n0.096016 28\n0.200086 28\n0.096124 28\n0.087826 28\n0.439898 4\n1.960281 28\n0.547808 28\n0.356164 28\n0.232172 4\n0.311998 28\n0.207729 28\n0.055792 28\n0.248641 28\n0.231577 4\n0.328514 4\n0.111981 28\n0.135482 28\n0.167962 28\n0.120234 28\n0.208105 28\n0.015724 4\n0.368606 4\n0.103927 28\n0.079547 28\n0.112110 28\n0.296343 30\n0.052804 65\n0.510572 65\n2.059665 65\n1.052991 28\n2.259330 28\n0.447993 28\n0.199862 28\n0.184027 28\n0.112060 28\n0.071821 28\n0.119895 28\n0.272285 30\n0.741605 1\n0.488788 112\n0.057914 170\n0.036311 107\n0.289797 618\n0.000044 53\n0.170475 73\n0.486782 1\n0.863018 1\n0.151944 71\n0.347825 35\n0.142052 35\n0.151772 35\n0.144212 35\n0.151955 35\n0.128027 32\n0.144307 32\n0.239327 32\n0.063812 32\n0.376256 32\n0.207774 32\n0.111965 32\n0.119976 32\n0.080618 116\n0.423846 110\n0.050729 65\n0.003114 94\n0.324474 998\n0.000093 263\n0.000571 98\n0.250464 853\n0.000051 12\n0.000524 335\n0.000037 228\n0.000427 99\n0.000027 1733\n0.295804 962\n0.448091 194\n0.000084 1001\n0.000710 208\n0.589588 815\n0.000043 615\n0.000673 64\n1.207888 64\n0.495343 64\n0.050398 64\n0.049656 65\n0.050694 64\n0.050493 64\n0.050307 64\n0.050148 64\n0.049877 64\n0.050791 64\n0.080356 64\n0.304485 25\n0.412516 148\n0.000072 1\n0.279515 4\n0.372522 28\n0.152199 28\n0.047666 53\n0.128192 1\n0.176023 49\n0.247976 49\n0.112098 49\n0.063790 49\n0.224060 49\n0.376471 49\n0.087708 49\n0.097020 49\n0.079233 28\n0.351870 30\n0.236868 34\n0.270416 64\n0.454315 164\n0.166513 1\n0.115130 4\n0.308965 125\n0.327893 3\n0.219671 41\n0.380658 41\n0.223646 43\n0.320353 41\n0.159937 41\n0.055621 41\n0.216090 3\n0.248032 41\n0.103774 41\n0.056052 3\n0.119865 41\n0.232312 41\n0.072004 41\n0.080507 3\n0.095592 41\n0.072124 41\n0.073132 41\n0.105909 3\n0.060654 41\n0.056043 41\n0.119719 41\n0.064246 41\n0.080158 41\n0.216193 3\n0.063702 41\n0.048393 41\n0.031489 2\n0.128471 41\n0.152006 41\n0.136442 41\n0.135504 41\n0.096204 41\n0.175801 41\n0.111944 3\n0.111744 41\n0.168332 41\n0.047950 41\n0.112030 3\n0.096028 41\n0.063729 41\n0.072155 3\n0.112270 41\n0.120878 41\n0.151919 41\n0.063142 3\n0.120096 41\n0.159880 41\n0.176757 41\n0.175473 41\n0.071884 41\n0.047808 41\n0.151942 41\n0.024463 3\n0.119852 41\n0.119921 41\n0.103948 3\n0.104203 41\n0.095800 41\n0.048048 41\n0.152278 41\n0.032335 41\n0.135525 41\n0.040226 41\n0.159820 3\n0.063871 41\n0.048015 41\n0.095891 41\n0.032180 169\n0.312854 7\n0.129631 125\n0.437856 3\n0.142909 41\n0.824248 41\n0.176256 41\n0.143859 103\n28.029783 59\n1.594778 41\n0.175630 41\n0.049076 3\n0.180176 41\n0.066410 41\n0.104010 41\n0.079806 3\n0.120432 41\n0.200687 41\n0.063318 41\n0.103872 41\n0.936526 3\n0.127685 41\n0.407790 41\n0.168128 41\n0.207954 41\n0.040037 41\n0.073965 41\n0.198441 116\n0.494115 175\n0.036893 75\n0.477776 25\n1.737600 156\n0.000041 1\n0.311478 28\n0.493207 28\n0.087510 28\n0.080026 28\n0.120573 28\n0.079591 2\n0.096226 54\n0.000033 2\n0.104337 28\n0.191894 28\n0.199888 28\n0.160159 28\n0.087461 4\n2.752747 4\n0.143800 4\n0.160238 6\n0.175639 1\n0.000030 28\n1.031917 28\n0.168083 28\n0.064259 28\n0.111540 28\n0.112136 28\n0.160013 28\n0.080035 28\n0.128096 28\n0.056183 28\n0.151845 28\n0.207721 28\n0.351970 4\n0.496306 28\n0.727981 28\n0.167914 28\n0.112138 47\n0.087931 34\n0.140754 3\n0.296739 1\n0.499988 1\n0.049698 1\n0.050062 1\n0.050038 1\n0.049823 1\n0.050506 1\n0.050642 1\n0.050593 1\n0.050392 1\n0.050411 1\n0.050450 1\n0.049700 1\n0.050503 1\n0.049681 1\n0.175371 32\n0.163806 32\n0.167043 32\n0.080142 32\n0.111619 61\n0.088023 116\n0.486307 110\n0.057385 65\n0.025175 75\n0.833720 65\n0.972125 65\n0.199780 64\n0.159777 25\n0.821153 148\n0.000067 198\n0.117138 64\n0.216444 1\n0.193332 4\n0.389433 28\n0.135728 28\n0.079902 53\n0.088166 1\n0.184151 49\n0.143769 49\n0.103869 49\n0.176387 49\n0.103947 49\n0.048031 49\n0.088153 28\n0.215163 30\n0.268511 29\n0.335095 64\n0.279781 162\n0.173450 1\n0.114330 4\n0.301565 125\n0.263939 3\n0.121475 41\n0.094638 41\n0.199723 41\n0.144264 43\n0.288275 43\n0.119888 41\n0.248047 43\n0.447967 43\n0.328053 41\n0.119140 1\n0.176489 1\n0.360280 43\n0.127723 41\n0.488710 41\n0.087575 41\n0.095951 41\n0.095792 3\n0.095797 41\n0.103970 3\n0.072256 41\n0.200305 41\n0.032048 41\n0.103665 41\n0.031933 3\n0.120232 41\n0.864115 41\n0.056002 3\n0.144837 41\n0.151690 41\n0.095540 41\n0.119674 41\n0.176376 41\n0.127550 41\n0.071991 41\n0.072289 41\n0.088505 41\n0.119437 2\n0.079820 41\n0.096187 41\n0.055769 41\n0.072356 3\n0.104159 41\n0.039952 41\n0.032040 3\n0.111852 41\n0.192732 41\n0.063388 41\n0.120103 41\n0.127953 41\n0.123189 41\n0.100918 3\n0.071809 41\n0.048042 41\n0.127797 1\n0.073584 41\n0.046480 41\n0.095730 41\n0.088286 3\n0.136216 41\n0.656099 41\n0.095629 41\n0.121039 41\n0.038933 41\n0.136393 3\n0.079759 41\n0.088067 41\n0.056153 41\n0.111805 41\n0.064139 41\n0.401619 41\n0.166560 3\n0.120714 41\n0.039117 41\n0.047782 162\n0.432841 7\n0.337780 125\n0.413104 3\n0.135637 41\n0.096178 41\n0.104284 41\n0.080019 41\n0.080003 41\n0.063759 41\n0.047986 3\n0.072263 41\n0.056874 41\n0.095210 41\n0.071589 3\n0.112256 41\n0.048571 41\n0.447500 41\n0.056076 41\n0.048171 43\n0.463971 43\n0.120525 43\n0.111448 41\n0.185871 41\n0.045901 41\n0.064185 41\n0.151832 41\n0.200397 41\n0.151923 41\n0.191864 41\n0.056053 41\n0.055903 3\n0.136008 41\n0.072215 41\n0.072109 41\n0.079898 1\n0.096106 41\n0.032529 41\n0.151390 41\n0.112075 41\n0.064089 3\n0.087588 41\n0.072333 41\n0.056825 41\n0.111178 3\n0.071783 41\n0.159853 41\n0.056045 41\n0.031902 41\n0.072046 3\n0.136106 41\n0.112331 41\n0.047562 3\n0.072214 41\n0.131413 41\n0.117410 41\n0.062994 3\n0.089787 41\n0.174641 41\n0.063962 41\n0.064605 41\n0.063279 41\n0.103907 41\n0.071834 41\n0.136754 41\n0.255785 116\n0.342332 175\n0.042961 75\n0.615655 25\n0.568996 156\n0.000043 1\n0.087561 28\n1.805535 28\n0.199811 56\n0.001186 47\n0.001014 46\n0.093770 2\n0.095931 52\n0.000036 28\n0.079782 28\n0.304452 28\n0.055841 28\n0.184228 28\n0.111668 28\n0.056608 28\n0.192499 3\n0.183443 28\n0.121076 3\n0.078973 28\n0.135820 30\n0.085178 99\n0.434888 1\n0.642712 28\n0.189083 28\n0.167869 28\n0.072020 1\n0.127972 53\n0.000079 28\n0.064274 28\n0.159620 28\n0.151908 28\n0.104443 28\n0.039560 28\n0.088231 3\n0.192491 28\n0.103359 3\n0.104150 28\n0.176365 28\n0.183791 28\n0.176253 28\n0.103671 4\n0.864235 4\n0.144084 4\n0.111886 28\n0.240028 28\n0.287896 47\n0.097373 25\n0.590988 75\n0.000038 1\n0.266129 28\n0.261332 28\n0.183975 28\n0.031520 33\n0.169438 21\n0.000047 28\n0.086949 28\n0.576265 28\n0.143746 28\n0.240494 28\n0.039604 28\n0.063492 28\n0.055713 28\n0.184861 3\n1.424292 28\n1.080975 2\n0.079138 28\n0.207945 7\n0.327717 28\n0.296172 30\n0.060052 25\n0.732092 74\n0.000180 1\n0.201816 28\n0.293251 28\n0.167996 28\n0.072010 2\n0.152286 52\n0.000033 28\n0.135974 28\n0.463767 28\n0.151974 28\n0.192056 4\n0.664669 4\n0.143305 4\n0.120348 28\n0.432006 28\n0.223752 4\n0.688198 28\n0.223720 28\n0.048480 28\n0.063704 28\n0.104092 28\n0.407975 28\n0.168070 28\n0.192181 28\n0.071839 28\n0.071738 1\n0.352402 28\n0.103664 3\n0.087802 28\n0.208234 28\n0.111776 28\n0.064402 28\n0.271847 28\n0.256111 28\n0.408017 28\n0.151942 28\n0.120066 28\n0.151789 28\n0.352160 28\n0.303970 28\n0.184061 28\n0.216509 28\n0.271524 28\n0.152075 28\n0.144440 28\n0.071524 55\n0.104227 28\n0.088501 28\n0.311452 4\n0.344106 28\n0.047961 28\n0.032032 28\n0.151818 28\n0.056022 36\n0.204503 8\n0.304558 115\n0.065487 174\n0.038339 17\n4.608087 70\n0.032299 73\n2.004903 65\n0.331682 68\n0.767776 71\n7.244861 65\n0.496889 65\n0.050699 66\n0.050302 65\n0.049942 65\n0.050354 65\n0.050170 65\n0.050684 64\n0.050346 65\n0.050357 65\n0.051110 64\n0.050680 64\n0.050354 65\n0.049979 64\n0.051283 64\n0.050616 64\n0.049717 64\n0.050805 61\n0.050242 593\n0.053732 402\n0.000117 291\n0.000040 65\n0.046952 65\n4.756541 64\n0.159636 65\n0.176361 65\n0.143770 65\n0.168071 65\n0.119712 65\n0.152191 1\n0.375165 67\n1.140702 89\n0.285416 53\n0.000036 3\n0.207480 76\n0.252566 194\n0.000041 3\n0.156963 122\n0.167613 171\n0.000040 378\n2.345020 70\n0.561527 64\n0.496245 65\n0.050135 64\n0.050049 64\n0.050116 64\n0.050070 64\n0.049852 64\n0.049590 64\n0.051050 64\n0.050661 64\n0.050658 63\n0.150735 64\n0.192293 7\n1.579661 8\n0.497509 11\n0.050381 11\n0.050513 11\n0.049840 11\n0.050115 8\n0.050713 4\n0.050463 35\n0.050941 31\n0.050947 31\n0.051080 52\n0.000902 45\n0.000995 43\n0.048424 31\n0.050186 31\n0.050095 31\n0.050068 31\n0.050163 39\n0.050274 38\n0.051184 37\n0.050406 36\n0.050946 35\n0.049806 34\n0.050091 33\n0.052137 32\n0.127148 3\n0.159605 293\n0.673368 13\n0.332813 113\n0.033713 171\n0.053264 35\n0.326596 118\n0.000041 113\n0.428237 107\n0.041882 64\n0.004352 72\n0.354798 64\n0.499105 64\n0.050842 64\n0.049022 64\n0.050004 64\n0.050280 64\n0.050848 65\n0.051158 64\n0.049751 64\n0.049842 61\n0.050904 576\n0.060190 489\n0.000044 217\n0.000079 64\n0.042372 64\n0.049864 64\n0.050932 64\n0.283431 64\n0.499586 65\n0.049963 64\n0.050176 64\n0.049589 64\n0.050118 61\n0.050892 159\n0.059524 905\n0.000123 323\n0.000042 64\n0.041766 64\n0.050320 64\n0.050386 64\n0.050180 65\n0.049922 64\n3.274869 64\n0.500373 64\n0.056672 64\n0.049959 61\n0.049852 592\n0.061772 403\n0.000043 390\n0.000033 455\n0.000606 64\n0.040253 64\n0.049691 64\n0.367735 64\n0.500310 64\n0.049677 64\n0.050156 64\n0.406051 166\n1.459642 258\n0.000038 37\n0.913797 326\n0.000112 113\n0.804152 107\n0.031532 64\n0.004935 13\n8.321641 68\n0.104487 72\n4.099746 64\n0.497267 64\n0.049947 64\n0.050968 65\n0.049646 64\n0.049827 64\n0.050865 64\n0.050276 64\n0.050194 64\n0.050808 61\n0.050838 25\n0.061614 1249\n0.000709 64\n0.040872 64\n0.050012 65\n0.050047 64\n0.050575 64\n0.049387 64\n0.050539 64\n0.049932 64\n0.050323 64\n0.050466 61\n0.050533 25\n0.062001 563\n0.000432 399\n0.000061 64\n0.039136 64\n0.518088 64\n0.500497 64\n0.050717 63\n0.050592 63\n0.051197 63\n0.050680 63\n0.051185 63\n0.050734 63\n0.050251 63\n0.050683 61\n0.049385 25\n0.054343 1082\n0.000464 64\n0.000040 64\n0.044825 64\n0.050696 63\n0.050762 63\n0.050524 63\n0.051133 63\n0.050381 63\n0.051080 64\n0.078528 62\n0.022680 61\n0.050863 25\n0.054616 976\n0.000464 64\n0.046434 64\n0.050689 63\n0.050225 63\n0.051076 63\n0.050254 63\n0.050931 64\n0.050535 63\n0.051360 62\n0.049562 61\n0.050142 458\n0.054767 596\n0.000043 369\n0.000577 64\n0.045241 64\n0.050610 63\n0.050722 63\n0.049957 63\n0.050233 64\n0.051012 63\n0.050809 63\n0.050651 62\n0.050881 61\n0.049980 120\n0.059340 942\n0.000050 90\n0.000075 154\n0.000488 64\n0.042689 64\n0.049560 63\n0.050645 63\n0.050667 64\n0.049847 63\n0.050142 63\n0.050006 63\n0.049673 62\n0.050535 61\n0.051608 714\n0.053647 1\n0.000087 31\n0.000053 1\n0.000050 180\n0.000062 98\n0.000119 129\n0.000173 1\n0.000049 102\n0.000056 64\n0.046754 64\n0.050487 63\n0.050418 64\n0.050296 63\n0.050649 63\n0.050744 63\n0.050278 4\n0.406186 1450\n0.000677 238\n0.159690 931\n0.000161 343\n0.000448 588\n0.000149 299\n0.327883 620\n0.000040 939\n0.000509 111\n0.397906 835\n0.000055 373\n0.000164 349\n0.000664 211\n0.502558 758\n0.000049 694\n0.000622 533\n3.489362 453\n0.000051 82\n0.854301 917\n0.000118 114\n0.000034 93\n0.000028 204\n0.000032 64\n0.495159 64\n0.050667 63\n0.050201 63\n0.050751 63\n0.051512 63\n0.050388 64\n0.050172 63\n0.050928 62\n0.051162 61\n0.051300 5\n0.055328 930\n0.000054 253\n0.000072 365\n0.000509 64\n0.044839 64\n0.050521 63\n0.050678 63\n0.050795 63\n0.050547 64\n0.050183 63\n0.051303 63\n0.050505 62\n0.051567 61\n0.049181 95\n0.056070 814\n0.000122 391\n0.000034 495\n0.000540 64\n0.045548 64\n0.049966 63\n0.050766 63\n0.049919 65\n0.050241 63\n0.049845 63\n0.050176 63\n0.050642 62\n0.049434 61\n0.049810 79\n0.055179 867\n0.000048 207\n0.000080 231\n0.000591 208\n0.000036 64\n0.044931 159\n3.079993 813\n0.000117 212\n0.000031 133\n0.000031 279\n0.000890 279\n0.502313 765\n0.000047 213\n0.000088 194\n0.715929 75\n0.000082 211\n0.840279 757\n0.000071 64\n0.496096 64\n0.050769 63\n0.050702 63\n0.049868 63\n0.049935 63\n0.051500 63\n0.050227 63\n0.050759 62\n0.049740 62\n0.050855 1\n0.055674 1360\n0.001416 64\n0.044712 64\n0.050245 63\n0.051837 63\n0.050739 63\n0.052569 63\n0.049928 63\n0.051391 63\n0.050611 63\n0.049914 61\n0.051312 504\n0.055647 1050\n0.000520 64\n0.044344 64\n0.050252 63\n0.051545 63\n0.051029 63\n0.049732 63\n0.050253 63\n0.050514 64\n0.049928 62\n0.049741 61\n0.050230 1815\n0.057181 64\n0.044708 64\n0.051645 63\n0.051072 63\n0.049483 63\n0.050855 63\n0.050677 65\n0.050166 63\n0.049473 62\n0.051512 61\n0.050184 95\n0.054944 880\n0.000047 643\n0.000526 64\n0.045455 64\n0.050967 63\n0.050488 63\n0.049255 63\n0.050073 64\n0.689580 63\n0.500036 63\n0.049970 62\n0.050939 61\n0.050480 11\n0.055250 968\n0.000050 607\n0.000746 64\n0.043919 64\n0.050410 63\n0.050783 63\n0.054614 64\n0.049994 63\n0.049886 63\n0.051377 63\n0.049255 62\n0.051824 61\n0.050173 1\n0.419524 986\n0.000049 948\n0.000604 64\n0.426258 64\n1.280446 63\n0.500604 64\n0.049967 63\n0.049898 63\n0.049986 63\n0.049858 63\n0.050048 62\n0.051119 61\n0.050472 25\n0.055338 1026\n0.000468 64\n0.000037 64\n0.046158 64\n0.048950 64\n0.049971 63\n0.051754 63\n0.049947 63\n0.049966 63\n0.051139 63\n0.048490 62\n0.051646 61\n0.050607 95\n0.054216 1173\n0.000173 395\n0.000437 395\n2.897318 574\n0.000046 294\n0.000073 932\n0.000483 772\n0.806522 193\n0.000031 313\n0.000036 412\n0.000685 65\n1.071399 17\n0.560928 454\n0.000040 399\n0.000097 821\n0.000662 72\n6.541598 965\n0.000089 301\n0.000514 1\n0.404785 485\n0.000046 1\n0.629352 1421\n0.000892 102\n0.604637 812\n0.000049 1\n0.000027 280\n0.000030 313\n0.000611 5\n0.414870 907\n0.000043 231\n0.000630 87\n0.000030 148\n0.000417 244\n0.000038 599\n1.280212 405\n0.000038 3\n0.000528 272\n0.000066 349\n0.000373 87\n0.000030 204\n0.000374 285\n0.000038 843\n0.709690 462\n0.000036 400\n0.000622 227\n4.507682 851\n0.000043 67\n0.000066 216\n0.000514 5\n2.100711 1005\n0.000044 380\n0.000529 64\n0.399362 280\n0.344849 835\n0.000045 294\n0.000705 64\n0.523095 64\n0.495254 64\n0.050004 64\n0.050099 65\n0.049889 64\n0.050027 64\n0.050075 64\n0.049299 64\n0.050854 64\n0.050876 64\n0.049607 64\n0.496925 63\n5.984393 63\n0.175851 64\n0.168014 63\n0.159961 7\n1.064381 24\n0.683866 146\n0.000046 146\n0.108851 64\n0.432376 1\n0.410037 28\n0.341227 28\n0.224007 28\n0.376313 2\n0.151879 52\n0.000031 28\n0.049044 28\n0.383211 28\n0.455843 28\n0.143890 28\n0.015699 28\n0.104181 28\n0.079857 28\n0.144207 3\n0.592043 28\n0.216311 2\n0.224053 28\n0.783907 30\n0.034944 7\n0.178583 115\n0.049760 173\n0.040013 239\n3.304939 1137\n0.001139 335\n1.138425 933\n0.000209 787\n0.000627 239\n0.385349 776\n0.000046 357\n0.000529 64\n0.476402 64\n0.496127 65\n0.049681 64\n0.050241 64\n0.050005 64\n0.049495 64\n0.051258 64\n0.049897 64\n0.051397 64\n0.148099 3\n0.239055 65\n0.274887 25\n0.250100 148\n0.000037 1\n0.552024 28\n0.244758 28\n0.192068 28\n0.415980 1\n0.159941 1\n0.000080 90\n0.000153 28\n0.079944 28\n0.336077 28\n0.135793 28\n0.087936 28\n0.048068 28\n0.128215 28\n0.055836 28\n0.184094 28\n0.272098 28\n0.096693 28\n0.119441 28\n0.111891 28\n0.047898 28\n0.136323 28\n0.080080 28\n0.167693 28\n0.768081 28\n0.151999 28\n0.063864 55\n0.104160 28\n0.088198 28\n0.095652 28\n0.040141 28\n0.176379 28\n0.079495 28\n0.024821 28\n0.175602 36\n0.219720 2\n0.408996 116\n0.057755 110\n0.038698 65\n0.004357 18\n3.579611 1\n0.500448 1\n0.050893 1\n0.050803 1\n0.049738 1\n0.050999 1\n0.049614 3\n0.543549 3\n0.199830 3\n0.199946 3\n0.247965 3\n0.736058 2\n0.200046 1\n0.160111 1\n0.501118 1\n0.049719 1\n0.050273 1\n0.049954 1\n0.050658 1\n0.050938 1\n0.050490 1\n0.050385 1\n0.050565 1\n0.050581 78\n2.051145 32\n0.189230 32\n0.103685 32\n0.071957 98\n0.104169 48\n0.120058 32\n0.144044 32\n0.055842 32\n0.056244 32\n0.096313 32\n0.271690 32\n0.159973 32\n0.192197 32\n0.056896 32\n0.071497 69\n0.183905 1\n0.372656 1\n0.499763 1\n0.049788 1\n0.050162 1\n0.049964 1\n0.051640 1\n0.050782 1\n0.050799 1\n0.050599 1\n0.050353 1\n0.050571 1\n0.050060 1\n0.050351 1\n0.051146 104\n0.053180 18\n0.216687 32\n0.675020 8\n0.357600 1\n0.191471 39\n0.758991 8\n0.272782 116\n0.025525 175\n0.043995 18\n3.402681 71\n0.031861 75\n11.683619 65\n0.357785 65\n0.423869 65\n0.176051 65\n0.663913 65\n0.287849 65\n0.184019 65\n0.175843 64\n0.240161 25\n0.598709 156\n0.000074 35\n0.115868 163\n0.000047 64\n0.208594 1\n0.297846 4\n0.453642 125\n2.342860 3\n0.255935 41\n0.455970 41\n0.151797 41\n0.088155 41\n0.096310 3\n0.056046 41\n0.064040 41\n0.047971 3\n0.071749 41\n0.256161 41\n0.048047 41\n0.096063 41\n0.095780 41\n0.224426 3\n0.103873 41\n0.276148 41\n0.019833 2\n0.191941 41\n0.967941 41\n0.143945 3\n0.047917 41\n0.128227 41\n0.087778 41\n0.096173 41\n0.103963 2\n0.144058 41\n0.063860 41\n0.033990 3\n0.142031 41\n0.040121 3\n0.096080 41\n0.215961 41\n0.039939 41\n0.184288 41\n0.199936 41\n0.095964 41\n0.064032 41\n0.199879 41\n0.047832 3\n0.152353 41\n0.079752 41\n0.152285 41\n0.152070 41\n0.112013 3\n0.087573 41\n0.152447 41\n0.064606 3\n0.047070 41\n0.031955 41\n0.104450 41\n0.064280 3\n0.135726 41\n1.967887 41\n0.087521 41\n0.088288 41\n0.103795 41\n0.080162 41\n0.152254 41\n0.064007 41\n0.287830 99\n0.352758 7\n0.154241 28\n0.444824 28\n0.119626 32\n0.023870 21\n0.000033 1\n0.176134 28\n0.216254 21\n0.000056 28\n0.039725 21\n0.000047 49\n0.104561 28\n0.079418 21\n0.000056 28\n0.280116 30\n0.724570 3\n0.376370 30\n0.123393 30\n0.167791 30\n0.176059 33\n0.375914 30\n0.279990 35\n0.072014 22\n0.000056 38\n0.228433 12\n0.555488 3\n0.277619 28\n0.581807 65\n0.326367 65\n0.124273 65\n0.136010 65\n0.135683 1\n0.199069 1\n0.160007 1\n0.112339 55\n0.093119 55\n0.150311 37\n0.625499 37\n0.386413 1\n0.224540 35\n0.243753 21\n0.000030 60\n0.400066 1\n0.260295 3\n0.272008 32\n0.163555 32\n0.160719 32\n0.159623 59\n0.072066 65\n0.242181 65\n0.494894 64\n0.050492 66\n0.050660 65\n0.050882 64\n0.049660 65\n0.054217 65\n0.050118 65\n0.050500 65\n0.050301 65\n0.051589 65\n0.169581 1\n0.174737 1\n0.167829 32\n0.196573 32\n0.070438 32\n0.120270 59\n0.168405 64\n0.176010 65\n0.497430 63\n0.050001 64\n0.049922 64\n0.049987 64\n0.049709 64\n0.051303 64\n0.050293 869\n0.053669 457\n0.000042 65\n0.045897 65\n0.050084 65\n0.049697 66\n0.551435 65\n0.167866 65\n0.159839 32\n0.348756 32\n0.061172 32\n0.160165 59\n0.095366 65\n0.273310 65\n0.497544 65\n0.049747 65\n0.050496 65\n0.050700 64\n0.051278 65\n0.053255 66\n0.050183 65\n0.050329 164\n0.052920 67\n0.061168 941\n0.000045 341\n0.000660 65\n0.038606 65\n0.049698 65\n0.050731 64\n0.050235 65\n0.050810 65\n0.050971 65\n0.051654 65\n0.050148 65\n0.049911 65\n0.049963 61\n0.060458 973\n0.000044 604\n0.000654 64\n0.041363 65\n0.049669 65\n0.050302 65\n0.050714 65\n0.987519 65\n0.499770 64\n0.049801 65\n0.050568 65\n0.050108 65\n0.050888 64\n0.050417 63\n0.050039 65\n0.050339 64\n0.050040 63\n0.049619 64\n0.051607 64\n0.050767 64\n0.050766 63\n0.060206 898\n0.000129 85\n0.000035 358\n0.000036 65\n0.041827 65\n0.160661 65\n0.501128 65\n0.049863 65\n0.049976 64\n0.050162 65\n0.050351 65\n0.051371 25\n0.426309 75\n0.000040 1\n0.130140 28\n7.164679 28\n0.184155 28\n0.151639 2\n0.056173 52\n0.000033 28\n0.088013 102\n28.030108 20\n150.953506 1\n0.152809 1\n0.000432 33\n0.000198 4\n0.159202 4\n0.136839 5\n0.127089 28\n1.895840 28\n0.136323 28\n0.399666 28\n0.664231 28\n0.039703 4\n0.760160 4\n0.144116 28\n0.359775 28\n0.376128 28\n0.280768 28\n0.351421 28\n0.047799 28\n0.728021 3\n0.424078 2\n0.408648 64\n0.000033 3\n0.223778 28\n0.808057 28\n0.096323 28\n0.323388 55\n0.428622 28\n0.447839 28\n0.304160 28\n0.088663 28\n0.111015 28\n0.048027 28\n0.112445 28\n0.039590 28\n0.224097 28\n0.520207 28\n2.072079 28\n0.072057 28\n0.087951 28\n0.440041 30\n0.020979 3\n0.862816 115\n0.090631 174\n0.051632 180\n0.819070 1\n0.493979 1\n0.255952 1\n0.096555 1\n0.415444 1\n0.160151 1\n0.112040 2\n0.184608 70\n0.039906 74\n0.000040 4\n0.003571 1\n0.355849 1\n0.159960 4\n0.415705 4\n0.104363 1\n0.103966 1\n0.151945 1\n0.119932 1\n0.175762 1\n0.160123 1\n0.455874 1\n0.112350 1\n0.199996 1\n0.199832 1\n0.152199 1\n0.056069 1\n0.231811 1\n0.023716 9\n0.208755 98\n1.008022 6\n0.503602 12\n0.145493 1813\n0.458992 64\n0.562333 65\n0.419320 25\n0.437293 148\n0.000079 1\n0.247616 28\n0.516644 28\n0.159972 28\n0.039909 1\n0.128771 53\n0.001699 28\n0.085613 28\n0.424120 28\n0.136066 28\n0.103987 28\n0.087819 28\n0.192383 3\n0.120316 28\n0.231813 8\n0.208163 1\n0.104109 4\n0.127574 3\n0.063806 28\n0.128349 3\n0.080918 28\n0.063011 28\n0.072138 70\n0.288016 1\n0.130992 28\n0.212290 28\n0.175756 28\n0.056104 2\n0.152393 52\n0.000032 28\n0.023631 28\n2.412597 4\n0.451631 28\n0.119942 28\n0.071728 28\n0.192124 28\n0.135824 28\n0.048327 28\n0.368060 3\n0.191880 28\n0.161463 3\n0.062902 28\n0.208241 28\n0.007920 4\n0.359875 8\n0.119993 28\n0.191897 30\n0.020917 65\n0.573452 65\n0.147478 1\n0.222813 1\n0.500488 1\n0.049608 1\n0.049884 1\n0.049905 1\n0.050856 65\n0.336566 65\n0.155795 1\n0.287663 61\n0.315075 1\n0.121822 28\n0.189235 28\n0.168173 28\n0.055837 2\n0.111918 52\n0.000031 28\n0.088215 28\n0.167980 28\n0.192435 28\n0.095705 28\n0.039625 28\n0.072018 3\n0.127936 28\n0.080830 3\n0.343551 28\n0.296123 28\n0.240232 28\n0.128323 47\n0.080087 61\n0.203619 1235\n0.000171 1\n0.103327 28\n0.203770 28\n0.161049 28\n0.075531 2\n0.107625 52\n0.000037 28\n0.080098 28\n0.296221 4\n0.368094 28\n0.071403 28\n0.497996 28\n0.190216 28\n0.023801 28\n0.071892 28\n0.032674 28\n0.255716 3\n0.231959 28\n0.296216 2\n0.072153 28\n0.167895 30\n0.052232 99\n0.300296 1\n0.115058 28\n3.868273 28\n0.071731 28\n0.104941 28\n0.167106 28\n0.104110 2\n0.120264 54\n0.000035 2\n0.080019 65\n0.576785 217\n1.429976 799\n0.000052 3\n0.000643 342\n0.000040 124\n0.549315 797\n0.000049 360\n0.000119 63\n0.345187 63\n0.499413 63\n0.049791 63\n0.050265 64\n0.050065 63\n0.050084 64\n0.049726 64\n0.049677 64\n0.050641 64\n0.181934 3\n0.167557 28\n0.290309 28\n0.200358 28\n0.191753 28\n0.096242 28\n0.247942 28\n0.231932 28\n0.023748 28\n0.063863 28\n0.152345 116\n0.398691 175\n0.038266 227\n5.106243 799\n0.000042 344\n0.000899 497\n0.533857 1\n0.000468 60\n0.000193 1\n0.000206 156\n0.000262 299\n0.000391 64\n0.665574 64\n0.497581 64\n0.049978 64\n0.050340 64\n0.049940 64\n0.049662 65\n0.050693 64\n0.176536 8\n0.271444 25\n0.372281 148\n0.000078 150\n0.133438 1\n0.386082 122\n1.246135 3\n0.175465 41\n0.080030 41\n0.128326 41\n0.103767 3\n0.079703 41\n0.200321 41\n0.119722 41\n0.080197 43\n0.320079 43\n0.131898 41\n0.108074 41\n0.055973 41\n0.064262 41\n0.119698 41\n0.015858 41\n0.200208 3\n0.096046 41\n0.103862 41\n0.080243 43\n0.351790 41\n0.192411 41\n0.119793 41\n0.007692 41\n0.200377 41\n0.232136 41\n0.071684 41\n0.135732 2\n0.120471 41\n0.095620 41\n0.120429 41\n0.104139 56\n0.000946 47\n0.000950 18\n0.069540 41\n0.064184 41\n0.240321 41\n0.208164 41\n0.071987 41\n0.031515 41\n0.176513 41\n0.095794 41\n0.191828 3\n0.096314 41\n0.167919 41\n0.016144 43\n0.351957 43\n0.111771 1\n0.128225 43\n0.128521 3\n0.095412 41\n0.048189 41\n0.071960 41\n0.127907 2\n0.079900 41\n0.080115 41\n0.111956 41\n0.023817 41\n0.104204 3\n0.088021 41\n0.168136 41\n0.135812 41\n0.056190 41\n0.167891 41\n0.079880 41\n0.048021 3\n0.080027 41\n0.087750 41\n0.136260 41\n0.096071 41\n0.072703 41\n0.223346 65\n0.801250 64\n0.180939 25\n0.537424 123\n0.000037 1\n0.114183 122\n0.429718 3\n0.208029 41\n3.032594 41\n0.303332 41\n0.103851 41\n0.128509 41\n0.047901 1\n0.127786 41\n0.080412 41\n0.047452 41\n0.064317 3\n0.055725 41\n0.089167 41\n0.086693 41\n0.088203 1\n0.095998 41\n0.560331 41\n0.191678 41\n0.063730 41\n0.056637 41\n0.015432 3\n0.173079 41\n0.051414 41\n0.135840 41\n0.048142 41\n0.080075 41\n0.087536 41\n0.080238 41\n0.136333 41\n0.063612 41\n0.016110 115\n0.935469 109\n0.036613 65\n0.003860 74\n0.273431 65\n0.497254 65\n0.051462 944\n0.054070 302\n0.000061 65\n0.046297 65\n0.051184 66\n0.050714 71\n0.533449 72\n9.116484 888\n0.000050 88\n0.000030 201\n0.000297 65\n1.403070 163\n1.341131 866\n0.000137 419\n0.000041 398\n2.838939 575\n0.000046 623\n0.000655 504\n0.000095 906\n0.766065 277\n0.000184 439\n0.000646 66\n3.836115 408\n8.562107 575\n0.000047 1122\n0.000542 970\n1.708772 313\n0.000110 418\n0.000087 110\n0.576807 835\n0.000050 763\n0.000737 82\n0.878433 828\n0.000051 168\n0.000029 246\n0.000597 1\n1.090380 99\n0.000386 1\n0.000223 87\n0.000222 1\n0.000205 87\n0.000201 1\n0.000205 125\n0.000200 1\n0.000192 220\n0.000271 1\n0.000214 96\n0.000189 1\n0.000202 181\n0.000202 98\n0.000417 1\n0.000225 244\n0.000193 38\n0.000359 1\n0.000205 39\n0.000184 1\n0.000201 74\n0.000184 1\n0.000199 121\n0.000190 111\n0.214542 812\n0.000048 318\n0.000659 1\n0.000330 237\n0.000033 154\n0.000034 606\n0.584635 406\n0.000045 612\n0.000944 498\n0.000061 64\n8.710897 64\n0.169138 64\n0.159590 64\n0.160394 65\n0.143764 64\n0.143563 64\n0.153008 64\n0.143910 64\n0.144443 64\n0.159789 64\n0.687539 8\n0.255267 65\n7.139075 65\n0.497324 65\n0.050061 65\n0.049784 64\n0.050183 65\n0.049893 66\n0.050268 65\n0.050429 65\n0.049992 65\n0.049936 65\n0.050225 25\n0.055712 827\n0.000495 65\n0.044805 65\n0.051162 65\n0.051006 64\n0.050970 67\n0.051055 65\n0.050830 65\n0.050819 65\n0.050879 65\n0.050284 61\n0.050986 53\n0.054807 850\n0.000112 702\n0.000545 65\n0.044503 65\n2.590271 64\n0.500514 66\n0.054191 65\n0.051088 65\n0.051041 64\n0.051236 65\n0.050443 65\n0.051058 65\n0.050815 126\n0.056587 779\n0.000051 792\n0.000737 65\n0.043870 65\n0.050915 65\n0.050436 65\n0.704766 210\n0.425480 695\n0.000113 152\n0.000078 186\n0.000504 87\n0.000318 187\n0.000034 1\n0.731572 819\n0.000045 1\n0.467601 1056\n0.000048 328\n0.000550 322\n0.900361 595\n0.000116 353\n0.000085 386\n0.000770 209\n0.497596 696\n0.000049 607\n0.000725 360\n0.218794 463\n0.000041 62\n0.579541 63\n0.499814 63\n0.049896 63\n0.049940 64\n0.049566 63\n0.049960 63\n0.051215 64\n0.050477 64\n0.050686 64\n0.050746 64\n0.051402 64\n0.050303 64\n0.050418 329\n0.988861 732\n0.000093 329\n0.000460 322\n0.186108 595\n0.000044 739\n0.000743 218\n0.182833 690\n0.000048 411\n0.000609 375\n0.000107 951\n0.184791 1190\n0.000740 193\n0.252568 870\n0.000087 108\n0.000771 246\n0.000036 468\n0.549581 818\n0.000053 190\n0.717528 593\n0.000043 291\n0.000278 294\n0.364803 1065\n0.000816 1\n0.543888 926\n0.000127 330\n0.000039 62\n1.569495 63\n0.499317 63\n0.050156 63\n0.050014 63\n0.049969 63\n0.050875 63\n0.050274 64\n0.051078 64\n0.050909 65\n0.258911 64\n0.191985 64\n0.232166 4\n0.151614 25\n0.341410 156\n0.000071 1\n1.095536 28\n0.485202 28\n0.184237 28\n0.055693 2\n0.120078 52\n0.000029 28\n0.080225 28\n0.872193 28\n0.063570 28\n0.087840 28\n0.160926 28\n0.143374 28\n0.592220 28\n0.119998 3\n0.103769 28\n0.307684 2\n0.036480 28\n0.208002 30\n0.043846 4\n1.001894 5\n5.803279 950\n0.000047 592\n0.000615 295\n0.000490 193\n0.000118 1\n0.281683 908\n0.000040 818\n0.000517 95\n0.230672 867\n0.000046 2\n0.000509 252\n0.000031 90\n0.000028 208\n0.000390 236\n0.000035 11\n0.178608 950\n0.000170 184\n0.000746 94\n0.000032 178\n0.000285 117\n0.000032 363\n0.202236 459\n0.000043 1\n0.269072 24\n0.002848 25\n0.000583 70\n0.563178 63\n0.499549 63\n0.050162 63\n0.050060 64\n0.050322 63\n0.049609 63\n0.049785 64\n0.050182 64\n0.050434 64\n0.050263 64\n0.050776 64\n0.050521 64\n0.049850 64\n0.050461 1\n0.055450 52\n0.000735 1\n0.046875 73\n0.283173 64\n0.111497 64\n0.202717 8\n0.152577 28\n0.324659 12\n0.312196 2\n0.136445 4\n0.176066 28\n0.487616 28\n0.079305 32\n0.072572 21\n0.000070 1\n0.160304 65\n0.434182 41\n0.229943 59\n0.000087 8\n0.114733 2\n0.316972 4\n0.239931 125\n0.223853 3\n0.232041 64\n0.666501 1\n0.356641 49\n1.249093 49\n0.039834 49\n0.183966 28\n0.031963 21\n0.000119 28\n0.063805 21\n0.000037 28\n0.183939 21\n0.000103 49\n0.120262 4\n0.199980 4\n0.135836 4\n0.144166 4\n0.135765 4\n0.144268 4\n0.127977 5\n0.119971 1\n0.000403 28\n0.175498 21\n0.000461 28\n0.071499 21\n0.000347 28\n0.135496 21\n0.000108 28\n0.071852 21\n0.000061 49\n0.032040 28\n0.192113 21\n0.000097 28\n0.127778 21\n0.000108 28\n0.303883 21\n0.000110 28\n0.272048 21\n0.000473 28\n0.063570 21\n0.000047 28\n0.167890 21\n0.000115 28\n0.095423 21\n0.000051 49\n0.024640 28\n0.167904 21\n0.000051 28\n0.303852 28\n0.183847 28\n0.136035 28\n0.152214 28\n0.111975 4\n0.247933 4\n0.104110 28\n0.151750 34\n0.200396 21\n0.000050 28\n0.095611 3\n0.152112 28\n0.240292 28\n0.058764 28\n0.100885 36\n0.308247 36\n0.247986 64\n0.436140 1\n0.139012 28\n0.516910 55\n0.001486 47\n0.002263 66\n0.091566 3\n0.111859 28\n0.416610 28\n0.039541 28\n0.184331 65\n0.859193 64\n0.497007 65\n0.051056 104\n0.284348 1290\n0.000458 403\n1.096392 542\n0.000041 602\n0.001174 118\n0.000070 5\n1.047529 947\n0.000046 743\n0.000542 4\n1.160715 1\n0.000234 900\n0.000146 305\n0.000417 1\n0.000138 275\n0.000109 1\n0.000135 130\n0.000102 2\n0.000311 1\n0.000109 137\n0.000113 1\n0.000130 134\n0.000182 1\n0.000182 202\n0.000139 5\n0.905598 908\n0.000053 361\n0.000086 453\n0.000754 4\n1.754746 961\n0.000051 788\n0.000530 10\n1.855118 951\n0.000122 183\n0.000081 390\n0.000482 62\n2.057604 63\n0.499446 63\n0.050823 64\n0.049241 63\n0.050219 63\n0.050442 63\n0.050331 64\n0.049994 64\n0.051146 64\n0.049620 64\n0.050729 64\n0.050812 64\n0.049593 65\n0.050101 64\n0.050201 64\n1.927187 64\n0.499607 64\n0.050935 64\n0.050236 61\n0.050461 242\n0.054795 701\n0.000053 509\n0.000511 64\n0.045044 64\n0.050435 65\n4.829989 64\n0.499330 64\n0.049998 8\n0.769975 65\n0.788765 64\n0.495520 65\n0.049672 65\n0.050437 65\n0.050397 1008\n0.053518 64\n0.847913 65\n0.199766 65\n0.215846 65\n0.192153 199\n8.028489 810\n0.000048 204\n0.000638 262\n0.000039 233\n1.010688 688\n0.000134 64\n0.545360 63\n0.262743 63\n0.511942 63\n0.144553 61\n0.152203 3\n0.746606 24\n0.119968 14\n0.000039 44\n0.386133 24\n0.028488 187\n0.000481 72\n0.879237 63\n0.270383 63\n0.519867 63\n0.144460 61\n0.120149 62\n0.647777 61\n0.560663 3\n0.674333 24\n0.191943 14\n0.000039 3\n0.335117 342\n0.746312 74\n0.740772 64\n0.498908 64\n0.050651 64\n0.050768 63\n0.050504 64\n0.050340 65\n0.050944 65\n0.054388 65\n0.046466 64\n0.050502 65\n0.050840 65\n0.050562 65\n0.050469 1\n0.374409 322\n1.051329 54\n0.791731 29\n0.000049 44\n0.499255 29\n0.000064 44\n0.049806 29\n0.000068 44\n0.051865 29\n0.000051 40\n0.048660 29\n0.000078 1\n0.051078 36\n0.000045 29\n0.000033 38\n0.049704 28\n0.000071 36\n0.050238 27\n0.000117 40\n0.049397 38\n0.050278 36\n0.051199 34\n0.183174 32\n0.144028 3\n0.191752 56\n0.000968 47\n0.001096 25\n0.649879 21\n0.000078 64\n0.316259 64\n0.406890 8\n0.387751 2\n0.564793 122\n0.319135 3\n0.119829 41\n0.416726 41\n0.175436 41\n0.127997 41\n0.072206 41\n0.280022 64\n0.400790 8\n0.091186 28\n0.156033 51\n0.135889 2\n0.079726 1\n0.296460 33\n0.152027 12\n0.167961 2\n0.144127 28\n0.463560 51\n0.104659 3\n0.152808 28\n0.422900 28\n0.047679 28\n0.119903 2\n0.160435 49\n0.080366 38\n0.120081 3\n0.039850 112\n0.183923 41\n0.625079 41\n0.143224 41\n0.103966 41\n0.079885 44\n0.256399 28\n0.388602 64\n0.643694 61\n0.126728 8\n0.260176 28\n0.219705 12\n0.288266 1\n0.112708 1\n0.000237 4\n0.143247 8\n0.435770 2\n0.499918 28\n0.312011 51\n0.095749 3\n0.128008 28\n0.240245 28\n0.039720 28\n0.057289 2\n0.158887 49\n0.112488 38\n0.111957 3\n0.063915 112\n0.296252 41\n0.168376 41\n0.191426 41\n0.200624 41\n0.079671 41\n0.032131 41\n0.127835 44\n0.400462 28\n0.412825 328\n2.485754 393\n0.000051 8\n0.167063 28\n2.021324 28\n0.095713 28\n0.056235 28\n0.135907 28\n0.063993 59\n0.120793 3\n0.094933 28\n0.104273 28\n0.152304 28\n0.063880 34\n0.080139 21\n0.000051 28\n0.119976 28\n0.055962 28\n0.152424 28\n0.071482 28\n0.125685 28\n0.090317 4\n0.448251 28\n0.039782 28\n0.223902 28\n0.248149 28\n0.104949 28\n0.103317 28\n0.055959 28\n0.247958 30\n0.034327 8\n0.435968 116\n0.057676 110\n0.037361 65\n0.003519 75\n0.200715 64\n0.142944 64\n0.126925 8\n0.452191 269\n0.000046 8\n0.319676 116\n1.868465 175\n0.047267 25\n1.979381 59\n0.000039 28\n0.149818 28\n0.111515 55\n0.072152 28\n0.104170 28\n0.079795 28\n0.136595 28\n0.136768 28\n0.102852 28\n0.144156 28\n0.192200 28\n0.376091 30\n0.042247 4\n0.363282 116\n0.049511 175\n0.043227 74\n0.134351 60\n0.850337 263\n0.000052 8\n0.087578 28\n0.205224 28\n0.185042 28\n0.080225 55\n0.214871 28\n0.121568 28\n0.174520 28\n0.151787 28\n0.256163 28\n0.111712 28\n0.052899 28\n0.411699 290\n1.313265 698\n0.000084 425\n0.000692 110\n1.994815 809\n0.000053 158\n0.000029 345\n0.000888 64\n0.358609 899\n0.000047 679\n0.000524 331\n0.512179 609\n0.000041 941\n0.000502 408\n1.486258 1094\n0.000046 445\n0.000555 5\n0.820652 968\n0.000047 63\n0.000038 307\n0.000591 5\n0.740365 963\n0.000052 299\n0.000149 585\n0.000750 4\n2.366960 1031\n0.000097 301\n0.000391 244\n1.569730 613\n0.000048 190\n0.000076 215\n0.000472 257\n0.356495 624\n0.000121 292\n0.000040 4\n0.198477 963\n0.000045 889\n0.000597 123\n1.049461 909\n0.000093 304\n0.000692 5\n0.711094 963\n0.000111 443\n0.000036 440\n0.000605 629\n0.174314 327\n0.000034 707\n0.000734 293\n0.000398 145\n0.239165 852\n0.000113 359\n0.000035 345\n0.000605 5\n0.790695 923\n0.000052 662\n0.000621 95\n0.382867 894\n0.000046 266\n0.000574 62\n0.737930 63\n0.499586 63\n0.049975 63\n0.049556 63\n0.050320 63\n0.050084 63\n0.050563 64\n0.050644 64\n0.050296 328\n0.066044 536\n0.000057 63\n0.490614 63\n0.499405 63\n0.050005 63\n0.050215 63\n0.050026 63\n0.050248 63\n0.050562 64\n0.050101 4\n0.286441 28\n0.442255 4\n0.833019 28\n0.214665 28\n0.104389 28\n0.128085 28\n0.103880 28\n0.111769 28\n0.089531 28\n0.094786 28\n0.159744 194\n1.074083 336\n0.503906 65\n0.134641 22\n0.000031 160\n0.504373 29\n0.000054 28\n0.054838 4\n0.384595 28\n0.183410 28\n0.072096 28\n0.095993 33\n0.242636 8\n0.386805 116\n0.025871 175\n0.042680 300\n0.303841 604\n0.000049 95\n0.000842 143\n0.000040 281\n0.000033 9\n1.329784 910\n0.000051 158\n0.000030 345\n0.000575 95\n3.874600 894\n0.000048 261\n0.000681 327\n0.948512 546\n0.000050 63\n2.489810 63\n0.499323 63\n0.050177 63\n0.051131 63\n0.048897 63\n0.050444 63\n0.049902 64\n0.050142 8\n0.454885 71\n2.919813 74\n1.314920 65\n0.317723 71\n0.271539 75\n0.418487 71\n27.197333 18\n8.039866 71\n0.040302 18\n4.239420 71\n0.176749 74\n0.482640 65\n0.453956 71\n2.991252 75\n0.538856 65\n0.886509 1\n0.174387 1\n0.500527 1\n0.049206 1\n0.050434 1\n0.050877 1\n0.049915 1\n0.051128 1\n0.051174 1\n0.050062 1\n0.050619 1\n0.051106 1\n0.050599 1\n0.202042 74\n0.124680 32\n0.061411 32\n0.088270 32\n0.600261 32\n0.079746 32\n0.079911 115\n0.080138 116\n0.391233 175\n0.040593 18\n1.238025 102\n0.309857 29\n0.000040 1583\n0.846052 151\n0.777362 781\n0.000112 139\n0.000032 236\n0.000070 139\n0.487906 802\n0.000042 114\n0.000080 279\n0.000611 109\n0.663754 843\n0.000050 91\n0.000080 369\n0.000734 493\n0.567991 722\n0.000049 144\n0.000028 1\n0.550658 1483\n0.000710 98\n0.511239 956\n0.000090 201\n0.000744 95\n1.039371 814\n0.000120 278\n0.000034 2\n0.000072 148\n0.000583 1\n0.638770 844\n0.000051 169\n0.000041 557\n0.359416 263\n0.000081 306\n0.000504 62\n0.779755 63\n0.499883 63\n0.049901 64\n0.049693 63\n0.050070 63\n0.050556 63\n0.051490 64\n0.048935 64\n0.050852 64\n0.050812 64\n0.049682 64\n0.050679 64\n0.050582 66\n0.314703 64\n0.183718 67\n1.028695 225\n0.390062 64\n0.480308 3\n0.831283 25\n0.392844 215\n0.000043 64\n1.456663 64\n0.124627 66\n0.191471 64\n0.152688 64\n3.535904 3\n1.217481 196\n0.232208 3\n0.239610 250\n0.185125 279\n0.199919 64\n0.983598 64\n0.498494 66\n0.050218 64\n0.049736 64\n0.050163 64\n0.050113 64\n0.050371 64\n0.050557 61\n0.050952 5\n0.061275 902\n0.000051 829\n0.000942 64\n0.039551 64\n0.653640 64\n0.144091 64\n0.159998 63\n0.223857 63\n0.175908 63\n1.048108 7\n0.231287 64\n1.018129 7\n0.253952 164\n1.746956 166\n0.143371 63\n0.255642 7\n0.212739 48\n0.512396 55\n0.000796 46\n0.001128 74\n8.338219 64\n0.165093 64\n0.400135 7\n0.207710 163\n1.066786 1\n0.179172 28\n0.348386 3\n0.192047 45\n0.272037 3\n0.072044 28\n0.553104 28\n0.198629 28\n0.128077 47\n0.087762 64\n0.383555 64\n0.158324 65\n0.167969 28\n0.521873 3\n0.160264 45\n0.376311 1\n0.184133 28\n0.599800 28\n0.167820 28\n0.208240 4\n0.376118 28\n0.835205 55\n0.076514 28\n0.151877 28\n1.648188 28\n0.224078 28\n0.232197 28\n0.095851 28\n0.033317 28\n0.734830 28\n0.768059 28\n0.047664 28\n0.128921 28\n0.191438 28\n0.056046 28\n0.200343 28\n0.119716 28\n0.352456 28\n1.047275 31\n0.284460 4\n1.001827 4\n0.393778 4\n0.144281 28\n0.111604 31\n0.324592 4\n0.680293 115\n0.065558 109\n0.044708 65\n0.013955 35\n2.410524 147\n0.000073 8\n0.288957 5\n0.352422 785\n0.000040 145\n0.000036 4\n0.000599 91\n0.000031 91\n0.000030 119\n0.000442 211\n0.000038 57\n0.513519 50\n0.000041 50\n0.001274 43\n0.001356 61\n0.441324 851\n0.000087 3\n0.000655 124\n0.000032 64\n0.000431 430\n0.000037 64\n0.534571 64\n0.494421 64\n0.050258 64\n0.050746 64\n0.050097 64\n0.050272 65\n0.050364 64\n0.050506 64\n0.050780 64\n0.050684 64\n0.051388 64\n0.356647 8\n0.103336 28\n0.530588 28\n0.175975 28\n0.119908 55\n0.079858 28\n0.112677 28\n0.223609 28\n0.072500 28\n0.135306 28\n0.080147 49\n0.506910 56\n0.000849 47\n0.001491 18\n0.322957 28\n0.096051 1\n0.095960 28\n0.167869 28\n0.188263 28\n0.107855 47\n0.071733 64\n1.081596 331\n0.813002 3\n0.155049 162\n0.152303 1\n0.000077 1\n0.000055 227\n0.000148 3\n0.498566 156\n0.051186 160\n0.000086 3\n0.049704 259\n0.050515 67\n0.049250 233\n0.052813 3\n0.048710 215\n0.051762 3\n0.050875 325\n0.051634 3\n0.049609 164\n0.052250 190\n0.000057 3\n0.049002 351\n0.052054 67\n0.049640 159\n0.051090 137\n0.000096 3\n0.049253 208\n0.052296 3\n0.049306 221\n0.356956 67\n0.199877 286\n0.272217 3\n0.176090 288\n0.167533 3\n0.183132 262\n0.216679 3\n0.400005 283\n0.312257 3\n0.210757 92\n0.181020 134\n0.000034 3\n0.303895 55\n0.507086 81\n0.000046 67\n0.245096 150\n0.000033 64\n0.864564 64\n0.341254 8\n0.599405 64\n2.083034 7\n0.236754 111\n0.243246 151\n0.000034 8\n0.154285 28\n0.292730 51\n0.120030 2\n0.136123 28\n0.103998 28\n0.299395 65\n0.340807 1\n0.204571 13\n0.158953 65\n0.204757 1\n0.220643 13\n0.134225 65\n2.469469 65\n4.237140 8\n0.367746 66\n1.091683 156\n0.472449 156\n0.137588 64\n0.262071 2\n0.273600 28\n0.771992 3\n0.208125 45\n0.280266 3\n0.112055 28\n0.055936 28\n0.184181 28\n0.096001 55\n0.127860 28\n0.104355 28\n0.271698 28\n0.112147 28\n0.207925 28\n0.064973 28\n0.046949 28\n0.112194 28\n0.143972 28\n0.063881 28\n0.224325 28\n0.168072 4\n0.191926 4\n0.128101 4\n0.127777 4\n0.128118 28\n0.240154 28\n0.103527 28\n0.392208 28\n0.087737 28\n0.032301 28\n0.191961 28\n0.136243 28\n0.408120 28\n0.224312 28\n0.151697 28\n0.080629 33\n0.179863 8\n0.456389 115\n0.073242 109\n0.040809 65\n0.012317 74\n0.877896 25\n6.809993 149\n0.000043 64\n0.366332 25\n3.429714 74\n0.000039 2\n0.379438 4\n0.612960 2\n0.407973 28\n0.931445 30\n0.051744 21\n0.000045 3\n0.163459 28\n0.460977 3\n0.223719 24\n1.560270 21\n0.000046 34\n0.144092 1\n0.832027 28\n0.864290 28\n0.239734 4\n0.759853 6\n0.160234 28\n0.471704 28\n0.135789 28\n0.248313 28\n0.304094 28\n0.039983 115\n2.158953 109\n0.039272 65\n0.013398 118\n3.699319 757\n0.000044 223\n0.000499 549\n0.151819 453\n0.000037 236\n0.000609 77\n0.169489 928\n0.000042 588\n0.000605 472\n0.165400 362\n0.000071 273\n0.000555 5\n0.200434 913\n0.000049 621\n0.000522 100\n0.207352 1028\n0.000048 214\n0.000676 112\n0.500422 815\n0.000052 187\n0.000030 350\n0.000737 218\n0.053011 750\n0.000049 98\n0.000060 374\n0.000522 101\n0.050484 816\n0.000049 552\n0.000607 262\n0.049222 677\n0.000041 450\n0.000505 309\n0.053656 715\n0.000040 856\n0.000679 592\n0.050811 518\n0.000036 232\n0.000043 5\n0.050907 941\n0.000050 848\n0.000904 4\n0.048752 1\n0.000378 47\n0.000203 1\n0.000266 41\n0.000184 1\n0.000192 82\n0.000177 1\n0.000188 38\n0.000161 1\n0.000175 123\n0.000163 1\n0.000185 87\n0.000159 1\n0.000178 229\n0.000163 1\n0.000195 161\n0.000162 1\n0.000185 1\n0.000159 157\n0.000170 6\n0.000336 1\n0.000176 87\n0.000163 1\n0.000176 87\n0.000195 1\n0.000200 87\n0.000162 1\n0.000181 148\n0.000163 957\n0.045319 179\n0.000983 1\n0.000324 40\n0.000249 1\n0.000257 111\n0.000282 1\n0.000281 254\n0.000245 2\n0.000392 1\n0.000238 42\n0.000231 1\n0.000248 51\n0.000232 1\n0.000248 41\n0.000229 1\n0.000246 99\n0.000235 25\n0.043290 505\n0.003902 61\n0.000543 1\n0.038164 27\n0.004393 28\n0.000718 1\n0.044077 1\n0.049770 1\n0.049302 1\n0.049992 1\n0.049852 1\n0.051680 35\n0.326441 639\n0.000410 271\n0.000202 25\n0.516957 566\n0.000432 1\n0.346594 27\n0.003006 28\n0.000227 69\n0.287386 65\n0.496615 64\n0.054367 64\n0.050306 64\n0.049870 64\n0.050164 64\n0.050236 64\n0.049629 64\n0.050562 64\n0.050760 64\n0.050296 65\n0.050112 63\n0.050159 63\n0.051982 64\n0.299002 65\n0.692094 2\n0.093660 28\n0.055805 28\n0.151950 28\n0.199979 28\n0.079603 28\n0.048315 114\n0.503905 108\n0.037401 64\n0.013484 371\n0.424823 1\n0.000530 157\n0.000387 398\n0.000047 237\n0.000031 409\n0.000582 328\n0.263648 598\n0.000041 815\n0.000650 1\n0.312545 914\n0.000057 90\n0.000031 434\n0.000596 334\n0.543568 577\n0.000047 721\n0.000685 325\n0.308339 646\n0.000113 99\n0.000029 363\n0.000032 73\n0.000085 6\n0.000682 1\n0.000068 88\n0.000240 175\n0.000033 95\n0.489917 915\n0.000080 116\n0.000629 110\n0.000357 294\n0.000042 150\n0.402196 782\n0.000049 2\n0.000083 71\n0.000828 66\n0.000033 236\n0.000437 54\n0.943462 887\n0.000040 114\n0.000068 279\n0.000423 165\n0.793565 787\n0.000048 3\n0.000563 89\n0.000031 88\n0.000065 116\n0.000256 164\n0.000320 493\n0.577493 633\n0.000045 234\n0.000800 1\n0.650706 918\n0.000046 267\n0.000031 297\n0.000536 1\n0.284987 54\n0.000377 1\n0.000252 42\n0.000200 1\n0.000213 49\n0.000194 1\n0.000210 404\n0.000204 1\n0.000214 406\n0.000210 6\n0.000335 1\n0.000199 87\n0.000185 1\n0.000203 87\n0.000176 1\n0.000190 113\n0.000229 95\n0.162981 814\n0.000041 427\n0.000521 1\n0.147325 844\n0.000156 169\n0.000702 558\n0.417935 645\n0.000461 1414\n0.527096 62\n1.065810 63\n0.499516 63\n0.049961 63\n0.050154 64\n0.049899 63\n0.050802 63\n0.050767 64\n0.050238 64\n0.049586 64\n0.487133 8\n0.140901 66\n0.694677 99\n0.203203 8\n0.219099 65\n0.469627 63\n0.149870 147\n0.457783 2\n0.146579 4\n0.365014 2\n0.352152 122\n0.263939 33\n0.506546 67\n0.000123 65\n1.685797 4\n0.525668 1\n0.127491 33\n0.474320 33\n0.500035 33\n0.049858 33\n0.050992 33\n0.049891 33\n0.050086 52\n0.050924 37\n0.049960 33\n0.142130 65\n0.553389 3\n1.111003 65\n2.168650 65\n0.181543 8\n0.239511 28\n0.969655 51\n0.063823 2\n0.144989 1\n0.759286 33\n0.175960 51\n0.560367 1\n0.311818 1\n0.000687 28\n0.295305 3\n0.224120 45\n0.327868 34\n0.112104 3\n0.119893 28\n0.232026 28\n0.584219 28\n0.311933 28\n0.079620 28\n0.048119 28\n0.152051 28\n1.944414 28\n0.239864 28\n0.151910 28\n0.095859 28\n1.320225 28\n10.160044 28\n0.176030 28\n0.128058 28\n0.088014 28\n0.168006 28\n0.603184 99\n2.493025 2\n0.306601 4\n0.164985 1\n0.456203 1\n0.000031 4\n0.159694 1\n0.195935 2\n0.172835 28\n0.519134 28\n0.183924 28\n0.103977 55\n0.088195 28\n0.095852 28\n0.095879 28\n0.088117 28\n0.079997 28\n0.216299 28\n0.256970 28\n0.094739 28\n0.152407 28\n0.064390 28\n0.223461 28\n0.137005 4\n0.350884 28\n0.184071 28\n0.104246 28\n0.095931 28\n0.088124 3\n0.192158 28\n0.127659 3\n0.120054 28\n0.184138 28\n0.927692 28\n0.096065 28\n0.088255 28\n0.144444 4\n0.376496 4\n0.102904 55\n0.128222 28\n0.184053 28\n0.127781 28\n0.111978 28\n0.176196 28\n0.079686 28\n0.096514 28\n0.359973 28\n1.119994 28\n0.159923 28\n0.167734 28\n0.048165 28\n0.047908 28\n0.039941 28\n0.192144 99\n2.104653 2\n0.321958 4\n0.525192 28\n1.799817 51\n0.095807 1\n0.136112 1\n0.000435 28\n0.151630 3\n0.200004 45\n0.120199 34\n0.135900 3\n0.072003 28\n0.568317 28\n0.159902 28\n0.207643 28\n0.072090 28\n0.032325 28\n0.199941 28\n0.400586 28\n0.183123 28\n0.144000 28\n0.105011 28\n0.207097 28\n0.495803 28\n0.112302 28\n0.089301 28\n0.062430 28\n0.299206 99\n0.317195 1\n0.090493 1\n0.000064 28\n0.180937 28\n0.175918 28\n0.112022 55\n0.095838 28\n0.120298 28\n3.329477 28\n0.110601 28\n0.151957 28\n0.039826 3\n0.233158 28\n0.271210 3\n0.200021 111\n0.913518 834\n0.000048 3\n0.000577 77\n0.000030 42\n0.000064 2\n0.000251 80\n0.000028 42\n0.000030 48\n0.000349 189\n0.000040 59\n2.198826 548\n0.000082 1\n0.000444 848\n0.000720 62\n2.603933 160\n0.502375 71\n0.049073 63\n0.050318 63\n0.051079 63\n0.050820 64\n0.050453 64\n0.050373 64\n0.050029 8\n0.312763 1\n0.119401 1\n0.499891 1\n0.049950 1\n0.050807 1\n0.050305 1\n0.049996 1\n0.049899 1\n0.050007 1\n0.050272 1\n0.050767 1\n0.050234 1\n0.051282 1\n0.050516 1\n0.050978 1\n0.050572 1\n0.050532 1\n0.050700 1\n0.050573 1\n0.051030 1\n0.050430 1\n0.050766 1\n0.050183 1\n0.050231 1\n0.183891 7\n0.701683 210\n0.437036 544\n0.000087 41\n0.000469 1\n0.000219 69\n0.000061 2\n0.000342 67\n0.000038 3\n0.000317 168\n0.000072 3\n0.000427 199\n0.000041 110\n0.343085 665\n0.000042 64\n0.000034 3\n0.000690 461\n0.000076 64\n1.481712 64\n0.496258 64\n0.050061 64\n0.049858 64\n0.051188 65\n0.219008 65\n0.279967 50\n3.893781 51\n0.000789 18\n2.433639 1\n0.499319 1\n0.049970 1\n0.049844 1\n0.049825 1\n0.050157 2\n0.500363 485\n4.442517 513\n0.000109 2\n0.000124 299\n0.000512 64\n1.418390 64\n0.155469 64\n0.152053 64\n0.143881 65\n0.207158 52\n0.276323 228\n0.000091 1\n0.168076 28\n0.293095 28\n0.040457 28\n0.208133 28\n0.199189 28\n0.184183 3\n0.136588 2\n0.199555 60\n0.000054 1\n0.144232 28\n0.079479 28\n0.176263 28\n0.072046 34\n0.096296 21\n0.000049 28\n0.111654 28\n0.079924 28\n0.048360 28\n0.128081 28\n0.103970 28\n0.063938 28\n0.096187 28\n3.176285 28\n2.159798 28\n0.167843 28\n0.119815 28\n0.079776 28\n0.160540 28\n0.071663 506\n0.851945 434\n0.000044 450\n0.000800 62\n0.690262 63\n0.499319 63\n0.050261 63\n0.049853 64\n0.049786 63\n0.050927 63\n6.699272 64\n0.499955 64\n0.050237 64\n0.050608 64\n0.051021 64\n0.676282 64\n0.168051 64\n0.199777 8\n0.551567 100\n0.418651 2\n0.154737 58\n0.506421 4\n0.026229 28\n0.319754 51\n0.095972 2\n0.128014 28\n0.071880 3\n0.168465 45\n0.080240 34\n0.111869 3\n0.071985 28\n0.184752 28\n0.111003 28\n0.280087 28\n0.087915 28\n0.056386 28\n0.127421 28\n0.208207 28\n0.424148 4\n0.368313 28\n0.055744 28\n0.143956 28\n0.109474 28\n0.690513 28\n2.623829 28\n0.048403 28\n0.064956 28\n0.118682 28\n0.513033 25\n1.159116 74\n0.000069 2\n0.283008 65\n0.727120 66\n0.156390 65\n3.935906 8\n12.103697 163\n0.298299 63\n0.000092 2\n0.114701 28\n0.181088 28\n0.199660 28\n0.104056 55\n0.168340 28\n0.087785 28\n0.120205 28\n0.103504 28\n0.120487 28\n0.191824 28\n0.224065 28\n0.087710 28\n0.128280 56\n0.000933 47\n0.001608 46\n0.069261 28\n0.232541 28\n0.199825 28\n0.071913 28\n0.119990 3\n0.216225 1\n0.311973 28\n0.136197 3\n0.079597 28\n0.096681 3\n0.095331 19\n0.506527 34\n0.000054 28\n0.581544 30\n0.028057 1\n0.368930 3\n1.378537 294\n0.512723 64\n0.369015 64\n0.133021 64\n0.135546 32\n0.507191 67\n0.000057 476\n0.896258 52\n0.506166 72\n0.101483 8\n0.366809 9\n0.183891 13\n0.184125 13\n0.159952 64\n0.400876 64\n0.149352 64\n0.264148 65\n0.135741 64\n0.168215 64\n0.175816 2\n0.287154 28\n0.644811 28\n0.173150 28\n0.032079 55\n0.152593 28\n0.087501 29\n0.506534 46\n0.000060 28\n7.709643 28\n0.111943 28\n0.095973 28\n0.216106 28\n0.039715 28\n0.088683 28\n0.199368 28\n0.040040 3\n0.184078 28\n0.136160 1\n0.072157 1\n0.497051 8\n0.126666 28\n0.104370 1\n0.135619 28\n0.368191 28\n0.096273 28\n0.103670 55\n0.136276 28\n0.095884 28\n0.180484 28\n0.115582 28\n0.200119 28\n0.055636 28\n0.032240 28\n0.104596 28\n0.103653 28\n0.152679 28\n0.071134 28\n0.144926 64\n5.305319 65\n0.179906 65\n0.199839 64\n0.195834 911\n0.000052 53\n0.000030 75\n0.000029 386\n0.000735 65\n0.195872 65\n0.271926 65\n0.151972 65\n0.127975 63\n0.151798 79\n1.042903 192\n0.000091 3\n0.167036 104\n0.500860 202\n0.000034 3\n0.049355 144\n0.051384 191\n0.000047 66\n0.048868 130\n0.050607 216\n0.000055 62\n0.049783 375\n0.052014 3\n0.049699 294\n0.051921 66\n0.049333 85\n0.051094 166\n0.000109 3\n0.048912 195\n0.058346 3\n0.043299 77\n0.052440 212\n0.000051 3\n0.049690 380\n0.051607 66\n0.048174 130\n0.050601 117\n0.000055 3\n0.050051 205\n0.049654 66\n0.049678 220\n0.051553 111\n0.051614 158\n0.000054 3\n0.049501 238\n0.052019 3\n0.048867 82\n0.052771 205\n0.000030 67\n0.050002 149\n4.030367 12\n0.404037 43\n0.196174 37\n0.003833 170\n0.000036 12\n0.248102 113\n0.147525 12\n0.228411 43\n0.162761 180\n0.001655 12\n0.219854 147\n0.139178 12\n0.236569 43\n0.170705 35\n0.002744 1\n0.000078 1\n0.000055 1\n0.000266 170\n0.000101 12\n1.098061 208\n0.178810 12\n0.513908 184\n0.142308 12\n0.357059 192\n0.147347 12\n0.276861 162\n0.099298 12\n0.236590 43\n0.129238 35\n0.003529 1\n0.000368 1\n0.000063 1\n0.000051 234\n0.000076 12\n0.162833 43\n0.122861 3\n0.001424 181\n0.000103 12\n0.139012 349\n0.156877 12\n0.139150 110\n0.148622 12\n0.163478 300\n0.140507 12\n0.179731 107\n0.123451 12\n0.204381 204\n0.099615 12\n0.180509 117\n0.131564 12\n0.260506 68\n0.115701 133\n0.005386 1220\n0.000146 105\n10.801451 815\n0.000053 208\n0.000078 1\n0.000708 105\n0.000248 522\n0.000408 46\n1.686953 12\n0.684796 238\n0.276228 12\n0.547502 46\n0.283682 12\n3.308520 332\n0.244845 12\n0.299423 46\n0.235777 12\n0.243915 423\n0.213270 12\n0.274681 109\n0.187236 12\n0.252401 290\n0.196411 12\n0.299986 46\n0.154942 12\n0.309139 248\n0.123234 12\n0.332639 109\n0.170751 12\n0.269478 263\n0.155286 12\n0.308519 312\n0.155897 12\n0.316170 46\n0.155069 12\n0.245518 281\n0.171338 12\n0.252312 46\n0.194722 12\n0.269098 330\n0.188290 12\n0.267416 110\n0.171525 12\n0.252713 149\n0.203963 12\n0.292246 250\n0.235993 12\n0.276089 113\n0.179373 12\n0.252200 223\n0.195740 12\n0.196904 147\n0.251024 12\n0.308804 251\n0.171475 12\n0.332194 208\n0.114840 12\n0.277270 184\n0.179074 12\n0.276878 192\n0.141441 12\n0.242566 162\n0.147602 12\n0.323955 315\n0.123895 12\n0.444379 227\n0.108602 12\n0.420601 349\n0.139687 72\n1.292227 64\n0.154327 3\n0.172915 3\n0.500629 3\n0.050269 3\n0.049810 3\n0.049951 3\n0.050409 2\n0.050616 1\n0.050036 3\n0.050388 3\n0.050782 106\n0.052767 18\n0.048291 3\n0.050607 3\n0.050273 2\n0.051125 1\n0.051301 3\n0.050237 3\n0.050601 3\n0.050815 3\n0.049941 3\n0.050283 3\n0.050734 65\n0.181498 2\n0.252555 1\n0.143995 349\n0.652250 5\n0.214806 1\n0.005270 3\n0.691157 3\n0.781070 3\n0.499817 3\n0.050141 3\n0.050660 3\n0.050089 3\n0.050076 2\n0.050842 1\n0.049975 3\n0.050720 3\n0.050434 3\n0.050117 3\n0.050127 3\n0.049850 3\n0.050321 2\n0.050970 1\n0.050856 3\n0.050629 3\n0.050376 3\n0.050450 3\n0.050247 3\n0.051338 3\n0.050520 2\n0.283441 1\n0.384064 371\n0.201746 65\n0.408858 65\n0.497736 65\n0.049950 65\n0.049793 65\n0.049882 66\n0.050252 65\n0.050166 65\n0.049870 65\n0.050116 65\n0.050896 65\n0.050924 64\n0.051507 105\n0.062888 475\n0.000037 75\n0.000077 511\n0.000644 169\n0.000072 65\n0.040228 65\n0.708857 65\n0.501435 65\n0.049522 64\n0.050119 64\n0.050242 64\n0.049654 64\n0.050239 64\n0.049612 65\n0.050860 64\n0.050402 64\n0.050174 1345\n0.055544 65\n0.784179 65\n0.408324 69\n1.137628 2\n0.448158 128\n0.000082 277\n0.431717 98\n0.351532 21\n0.000029 55\n0.296038 203\n0.424461 89\n0.313722 186\n0.000059 5\n1.549813 2\n0.000047 65\n0.736237 106\n0.240004 65\n0.207830 1\n0.020856 106\n0.187683 65\n0.183704 1\n0.004573 106\n0.188069 1\n0.156325 65\n0.011067 106\n0.208948 1\n0.147905 65\n0.011863 106\n0.208505 1\n0.155691 66\n0.011872 106\n0.175680 65\n0.176535 1\n0.003406 106\n0.195821 65\n0.137004 1\n0.003640 77\n0.187894 29\n0.000081 65\n0.824680 1\n0.019148 106\n0.403358 65\n1.477234 65\n0.152691 65\n0.215923 188\n0.371601 580\n0.000086 1\n0.000462 730\n0.000816 65\n0.411109 65\n0.192111 104\n0.137783 15\n0.645227 3\n0.460985 90\n0.238010 143\n0.000087 67\n0.415171 308\n0.280730 3\n0.199186 98\n0.208842 240\n0.000077 3\n0.199076 130\n0.344965 194\n0.000077 95\n0.199418 362\n0.501797 3\n0.049021 348\n0.080942 3\n0.021249 116\n0.051481 168\n0.000085 67\n0.048442 239\n0.050975 3\n0.050260 209\n0.055951 3\n0.045698 286\n0.051212 3\n0.048785 194\n0.051390 67\n0.050663 82\n0.050902 221\n0.000059 3\n0.049611 74\n0.051885 295\n0.000088 3\n0.049872 356\n0.052073 67\n0.050167 193\n0.050609 3\n0.048875 253\n0.051903 67\n0.050571 310\n0.544225 3\n0.168167 299\n0.424732 3\n0.219589 327\n0.148346 67\n0.183063 114\n0.160319 116\n0.000169 3\n0.166769 68\n0.184979 221\n0.000060 3\n0.159047 210\n0.168556 68\n0.174993 308\n0.160810 3\n0.159600 398\n0.169062 67\n0.367130 158\n0.216255 125\n0.000742 3\n0.814601 122\n0.271962 63\n0.520778 63\n0.498133 63\n0.049669 63\n0.050106 63\n0.050042 64\n0.050393 62\n0.050290 61\n0.050177 118\n0.054466 806\n0.000800 456\n0.001258 64\n0.044963 64\n0.050051 63\n0.051276 63\n0.049390 63\n0.049686 63\n0.050069 64\n0.049908 63\n0.050219 62\n0.051708 63\n0.279016 63\n0.500068 64\n0.049980 63\n0.050003 63\n0.049891 53\n0.823192 871\n0.000044 303\n0.000547 107\n0.887770 755\n0.000049 3\n0.000087 224\n0.000462 5\n2.916466 975\n0.000179 277\n0.001065 60\n0.357338 672\n0.000041 178\n0.000035 172\n0.000590 74\n0.000067 15\n0.000380 193\n0.000036 1\n0.384556 933\n0.000052 151\n0.000084 292\n0.001054 109\n3.792755 103\n0.038586 61\n0.012423 70\n1.012753 63\n0.500178 63\n0.051519 63\n0.049828 64\n0.049927 63\n0.050378 63\n0.050396 64\n0.050798 64\n0.050448 64\n0.050061 64\n0.051152 64\n0.050670 64\n0.050200 64\n0.051252 65\n0.051086 64\n0.050607 64\n0.050655 64\n0.050756 64\n0.217577 61\n0.176012 50\n0.194522 1\n0.183840 1\n0.186378 69\n0.411766 64\n0.499440 64\n0.050110 64\n0.050280 64\n0.050176 65\n0.049576 64\n0.051293 64\n0.049654 64\n0.050895 64\n0.050320 64\n0.050049 64\n0.049512 63\n0.050494 63\n0.050065 63\n0.051138 64\n0.050788 63\n0.051201 63\n0.050716 62\n0.050377 61\n0.050921 6\n0.054716 954\n0.000049 568\n0.001288 64\n0.045047 64\n0.050978 63\n0.050536 63\n0.049969 64\n0.050111 63\n0.050628 63\n0.050247 63\n0.052304 62\n0.049431 61\n0.049785 25\n0.052880 744\n0.000474 64\n0.046889 64\n0.050126 63\n0.050553 64\n0.049563 63\n0.049758 63\n0.050413 63\n0.051420 63\n0.050210 62\n0.050362 61\n0.050537 1201\n0.054982 64\n0.045530 64\n0.052535 64\n0.048189 63\n0.050149 63\n0.050790 63\n0.050272 63\n0.050415 63\n0.049566 62\n0.050234 61\n0.052066 149\n0.054580 734\n0.000160 68\n0.000676 198\n0.000030 64\n0.050277 66\n0.049833 63\n0.051176 63\n0.050388 63\n0.050012 63\n0.050921 63\n0.050706 63\n0.050621 62\n0.050126 61\n0.050493 663\n0.053737 176\n0.000040 45\n0.000030 217\n0.000036 65\n0.048242 64\n0.050221 64\n0.433187 65\n0.499983 64\n0.050547 64\n0.049669 64\n0.049745 64\n0.051157 64\n0.049014 64\n0.049819 64\n0.050857 64\n0.049934 67\n0.938798 71\n0.484191 64\n0.164230 64\n0.216243 64\n0.136069 64\n0.167927 64\n0.168200 64\n0.152152 8\n0.239329 25\n0.453763 157\n0.000081 1\n0.358011 28\n1.581727 4\n1.223747 1\n0.000473 4\n0.344772 1\n0.478961 240\n0.184545 62\n0.640655 1\n0.204551 1\n0.152214 1\n0.160023 1\n0.127694 36\n0.370321 36\n0.264107 39\n0.792172 36\n0.311837 36\n0.207920 36\n0.080170 36\n0.063770 36\n0.089283 36\n0.198788 36\n0.280224 36\n0.215973 36\n0.079596 36\n0.056294 36\n0.247815 4\n0.446288 10\n0.677266 23\n0.000057 3\n0.561914 115\n0.065876 109\n0.034616 65\n0.012427 75\n0.603059 65\n0.497112 65\n0.049813 64\n0.050276 65\n0.050016 65\n0.049902 64\n0.051242 67\n0.050310 111\n0.054941 825\n0.000094 270\n0.000456 65\n0.046299 65\n3.545151 65\n0.247970 65\n0.519488 65\n0.500151 65\n0.050032 65\n0.051251 65\n0.050776 66\n0.050877 62\n0.201025 134\n0.207655 779\n0.000049 327\n0.001022 64\n0.199631 65\n0.223647 65\n0.215844 65\n0.191877 62\n0.169225 65\n0.183063 2\n1.207289 1\n0.167669 3\n0.144306 3\n0.136582 69\n0.214474 31\n0.140110 31\n0.151669 31\n0.144181 46\n0.103852 44\n0.136237 44\n0.559906 44\n0.079665 44\n0.096405 44\n0.095658 65\n0.386385 65\n0.495792 62\n0.050884 65\n0.050632 64\n0.050662 65\n0.051944 65\n0.049998 65\n0.050032 65\n0.052542 64\n0.049566 64\n0.141950 1\n0.286955 1\n0.499794 1\n0.050051 1\n0.050224 1\n0.049899 1\n0.052600 1\n0.050183 1\n0.050202 1\n0.050891 1\n0.113985 1\n0.167898 32\n0.420104 32\n0.143000 32\n0.152114 32\n0.143850 32\n0.135923 32\n0.136103 32\n0.175748 32\n0.132626 32\n0.091328 32\n0.079803 64\n0.328270 64\n0.166097 66\n0.159920 65\n0.200093 65\n0.288075 32\n0.297640 32\n0.127992 32\n0.151933 32\n0.151949 32\n0.119953 32\n0.136074 32\n0.152017 32\n0.175876 32\n0.344195 32\n0.224030 32\n0.119899 32\n0.047897 32\n0.200155 32\n0.095938 115\n0.519060 109\n0.045753 65\n0.015046 74\n0.309922 65\n0.180289 65\n0.168950 65\n0.167370 65\n0.175936 65\n0.152368 65\n0.167683 66\n0.183875 66\n0.624318 66\n0.495706 2\n0.159076 1\n0.501200 3\n0.049774 3\n0.050230 3\n0.049800 59\n0.882241 55\n0.371651 3\n0.175295 3\n0.152137 69\n0.274861 46\n0.119785 44\n0.175699 42\n0.177059 40\n0.142866 38\n0.925836 38\n0.154349 38\n0.079841 38\n0.128224 38\n0.119889 111\n0.414843 105\n0.047557 65\n0.015326 14\n3.167466 67\n0.080442 14\n3.887508 67\n0.040432 171\n0.440137 796\n0.000044 92\n0.000648 316\n0.000034 68\n1.863103 13\n4.831715 68\n0.016520 72\n1.154832 64\n0.497504 64\n0.050070 64\n0.051263 64\n0.050156 64\n0.051810 65\n0.049638 64\n0.050407 64\n0.049771 61\n0.051212 25\n0.062859 764\n0.000559 64\n0.039374 64\n0.193018 68\n0.655419 72\n0.619693 64\n0.497590 64\n0.050847 64\n0.050659 63\n0.052487 63\n0.049525 64\n0.054321 63\n0.051042 63\n0.051077 63\n0.050400 62\n0.050455 61\n0.050067 25\n0.053108 679\n0.000666 65\n0.000030 64\n0.046841 64\n0.049886 64\n0.438046 64\n0.499819 64\n0.050764 64\n0.050112 64\n0.050026 64\n0.050756 64\n1.052114 64\n0.198262 65\n0.184232 64\n0.191868 64\n0.175946 61\n0.184165 25\n0.195760 764\n0.000704 64\n0.195320 3\n0.375184 3\n0.168025 3\n0.167698 3\n0.160014 3\n0.152050 3\n0.159938 2\n0.143921 1\n0.208496 64\n0.292128 64\n0.496668 64\n0.050082 63\n0.050001 63\n0.049644 64\n0.050320 63\n0.051582 63\n0.049206 63\n0.051115 63\n0.049747 62\n0.050093 25\n0.053643 679\n0.000117 65\n0.000037 64\n0.048293 64\n0.049918 63\n0.050039 64\n0.051899 63\n0.054318 63\n0.045924 63\n0.278015 63\n0.176551 63\n0.503951 61\n0.050224 1201\n0.055885 64\n0.046640 64\n0.050596 64\n0.050457 63\n0.050908 69\n0.438100 73\n0.706578 65\n0.205774 64\n0.224193 64\n0.191739 64\n0.200162 64\n0.712021 70\n0.375142 74\n0.419875 64\n0.497065 64\n0.049721 64\n0.050232 64\n0.050845 65\n0.049866 64\n0.050455 62\n0.051037 165\n0.054551 796\n0.000122 408\n0.000329 64\n0.455074 64\n0.499893 63\n0.050022 64\n0.050060 63\n0.050997 63\n0.049794 63\n0.050687 63\n0.050136 63\n0.051043 61\n0.052574 83\n0.290948 798\n0.000044 320\n0.000611 64\n0.339014 64\n0.560094 8\n0.543810 71\n0.582951 74\n0.428463 65\n0.496481 65\n0.050088 65\n0.049930 62\n0.050215 65\n0.049618 62\n0.050787 64\n0.051033 62\n0.050602 60\n0.050896 9\n0.053608 873\n0.000117 79\n0.000029 92\n0.000093 316\n0.000608 65\n0.046020 65\n0.050543 65\n0.051041 65\n0.050807 65\n0.051146 62\n0.178640 65\n0.499195 65\n0.050300 65\n0.049938 65\n0.051109 25\n0.054884 490\n0.000421 275\n0.000092 65\n0.046728 64\n0.049948 65\n0.548108 65\n0.500583 65\n0.051063 65\n0.050712 64\n0.049562 64\n0.049939 62\n0.050911 64\n0.049872 64\n0.050507 64\n0.051029 64\n0.050487 64\n0.049666 25\n0.053985 744\n0.000670 65\n0.047048 62\n0.050882 64\n0.051358 70\n0.438934 72\n4.626299 64\n0.254556 64\n0.207786 64\n0.392090 70\n1.398959 74\n4.449683 61\n0.498870 61\n0.050299 61\n0.081937 61\n0.500803 61\n0.050171 61\n0.050318 64\n0.049692 61\n0.050371 232\n0.055955 649\n0.000049 321\n0.000573 62\n0.045380 71\n2.173163 18\n8.710363 71\n0.016228 75\n1.579805 64\n0.498043 65\n0.049829 65\n0.050114 65\n0.051121 65\n0.050824 65\n0.050747 65\n0.050521 66\n0.050186 65\n0.050965 65\n0.050960 9\n0.054119 952\n0.000120 91\n0.000077 317\n0.000500 65\n0.046093 65\n0.050924 65\n0.050754 65\n0.051160 181\n0.502431 1\n1.342196 1\n0.047719 1\n0.280269 1\n0.031749 14\n0.112462 2\n0.176392 36\n0.259278 166\n0.000014 4\n0.000028 29\n0.000182 90\n0.000011 4\n0.000095 30\n0.000011 75\n0.000114 9\n0.000013 41\n0.000024 3\n0.000023 2\n0.000091 4\n0.000024 2\n0.000014 3\n0.000011 2\n0.000014 3\n0.000022 2\n0.000093 4\n0.000023 2\n0.000014 3\n0.000011 2\n0.000012 2\n0.000012 3\n0.000011 13\n0.000023 16\n0.000151 96\n0.015690 18\n1.363229 23\n0.161419 9\n1.310660 1894\n0.004024 103\n0.880835 29\n0.000110 991\n0.686660 65\n1.552268 64\n0.149428 64\n0.144368 63\n0.135932 64\n0.128605 5\n0.207212 68\n0.284933 203\n0.357396 873\n0.000083 336\n0.000735 110\n0.949320 165\n0.049904 176\n0.638232 2\n0.389927 20\n0.121588 2\n0.271583 36\n0.288151 7\n0.000013 1595\n0.014345 55\n0.000014 151\n0.000346 193\n0.000088 96\n0.019703 18\n0.787987 23\n0.162392 33\n2.862911 125\n0.004396 1669\n0.000690 9\n0.617262 910\n0.000047 503\n0.000611 65\n0.952979 904\n0.000093 673\n0.000724 199\n0.563683 741\n0.000050 941\n0.000533 408\n1.041659 1094\n0.000110 109\n0.000075 336\n0.000554 126\n0.700243 910\n0.000101 307\n0.000455 244\n0.991960 613\n0.000053 307\n0.000087 98\n0.000524 509\n0.931634 430\n0.000048 5\n0.597504 976\n0.000047 380\n0.000727 103\n0.158306 778\n0.000041 143\n0.000114 153\n0.000517 1\n0.168347 963\n0.000108 443\n0.000035 446\n0.000557 956\n0.169080 707\n0.000094 293\n0.000630 100\n0.835373 29\n0.000040 1583\n0.159743 5\n0.830149 912\n0.000094 276\n0.000660 64\n2.538315 64\n0.495971 64\n0.049423 64\n0.050566 65\n0.049184 64\n0.050637 64\n0.051311 64\n0.050592 64\n0.051390 64\n0.050765 64\n0.160005 64\n0.183908 8\n0.239426 1\n0.110954 1\n0.500236 1\n0.050015 1\n0.051011 1\n0.050228 1\n0.051101 1\n0.050506 1\n0.050624 1\n0.051299 1\n0.050444 1\n0.050930 69\n0.233914 1\n0.338194 1\n0.231825 31\n0.106722 21\n0.152091 22\n0.000031 17\n0.128099 25\n0.000061 15\n0.735688 24\n0.000054 115\n0.286653 109\n0.041392 65\n0.012835 75\n1.715745 65\n0.497657 65\n0.049920 65\n0.050085 65\n0.049662 65\n0.050182 65\n0.868151 66\n0.499775 65\n0.050142 65\n0.050083 64\n0.049725 65\n0.049871 5\n0.058225 901\n0.000129 222\n0.000041 65\n0.042987 65\n0.051584 65\n0.915651 65\n0.499642 65\n0.050367 64\n0.049584 64\n0.050514 64\n0.050007 64\n0.050179 65\n0.050510 64\n0.051386 64\n0.050622 64\n0.050336 64\n0.050844 45\n0.055276 817\n0.000051 254\n0.000535 65\n4.580120 65\n0.500752 64\n0.050898 64\n0.049316 65\n0.049946 64\n0.050486 64\n0.050324 63\n0.050165 64\n0.050489 64\n0.050529 64\n0.160752 63\n0.500021 64\n0.049728 64\n0.051317 63\n0.051095 66\n0.049705 64\n0.050632 65\n0.050729 65\n0.051148 65\n0.051155 65\n0.050229 65\n0.050055 65\n0.050430 65\n0.050764 65\n0.050364 66\n0.050884 65\n0.050121 65\n0.142031 66\n0.499867 65\n0.050166 65\n0.049540 65\n0.050320 65\n0.050204 65\n0.050673 65\n0.233165 25\n1.100085 157\n0.000545 166\n0.332510 1\n0.330821 122\n0.677001 3\n0.207835 41\n0.296128 41\n0.527900 41\n0.216439 41\n0.047723 2\n0.072774 1\n0.279171 43\n0.112036 43\n0.119887 3\n0.136293 41\n0.023701 41\n0.056347 1\n0.047304 41\n0.209338 79\n0.055080 41\n0.112005 41\n0.040032 3\n0.079994 41\n0.079761 2\n0.048241 41\n0.152069 41\n0.079825 41\n0.096130 41\n0.048224 41\n0.239845 3\n0.119945 41\n2.024202 41\n0.111750 1\n0.095791 41\n0.152488 41\n0.071779 41\n0.160139 41\n0.232137 41\n0.032039 43\n0.376087 43\n0.096100 41\n0.111727 41\n0.119807 41\n0.072350 41\n0.047753 1\n0.111812 41\n0.088328 41\n0.063857 41\n0.136097 3\n0.056016 41\n0.344334 41\n0.047788 41\n0.200045 41\n0.151910 41\n0.071860 3\n0.191891 41\n0.305334 43\n0.214789 1\n0.104168 41\n0.168123 3\n0.152034 41\n0.062136 43\n0.633817 41\n0.135646 41\n0.167691 41\n0.136607 41\n0.064000 56\n0.000956 47\n0.001236 59\n0.045642 41\n0.137450 41\n0.294758 41\n0.088106 41\n0.023549 41\n0.136516 3\n0.047670 41\n0.064027 41\n0.087719 41\n0.009022 3\n0.151934 41\n0.039565 41\n0.071891 41\n0.240319 41\n0.103889 41\n0.063996 41\n0.039719 166\n0.472827 1\n0.146042 122\n0.364641 3\n0.135917 41\n0.071684 41\n0.120321 41\n0.047996 41\n0.024003 41\n0.111998 115\n0.406917 109\n0.045535 65\n0.012591 75\n0.201106 65\n0.496657 65\n0.049873 66\n0.050014 65\n0.049775 65\n0.050070 65\n0.051050 65\n0.050056 98\n0.058421 797\n0.000051 327\n0.000704 64\n0.041013 65\n0.054965 65\n0.049801 65\n0.049946 65\n0.304250 65\n0.176072 79\n0.548709 41\n0.139969 3\n0.096144 41\n0.080073 41\n0.111777 41\n0.097109 3\n0.831594 41\n1.183523 41\n0.152599 41\n0.239574 41\n0.048038 41\n0.048030 1\n0.303982 1\n0.000533 41\n0.175585 41\n0.184224 41\n0.056070 41\n0.111690 3\n0.056028 41\n0.208391 41\n0.015897 43\n0.584321 43\n0.127777 41\n0.183580 41\n0.064400 41\n0.159451 41\n0.104025 43\n0.360151 41\n0.071656 41\n0.015960 41\n0.240592 41\n0.112036 41\n0.160128 41\n0.151606 41\n0.104093 2\n0.151918 41\n0.483486 41\n0.100289 41\n0.072288 41\n0.120219 41\n0.039927 41\n0.056081 3\n0.079992 41\n0.160069 41\n0.151887 41\n0.072189 3\n0.112080 41\n0.168135 41\n0.079661 3\n0.112122 41\n0.096183 41\n0.023716 1\n0.087720 41\n0.232433 41\n0.063878 41\n0.168171 41\n0.031920 3\n0.096090 41\n0.136026 41\n0.087495 1\n0.096060 41\n0.144297 41\n0.296308 43\n0.231854 41\n0.184032 41\n0.095907 41\n0.087945 41\n0.048095 41\n0.151132 41\n0.153016 137\n0.376724 1\n0.122887 122\n0.307905 3\n0.111554 41\n0.112504 41\n0.103818 41\n0.183734 41\n0.112009 43\n0.288481 43\n0.111919 43\n0.119625 3\n0.063897 41\n0.136153 41\n0.112025 41\n0.079838 41\n0.064366 3\n0.127999 41\n0.095941 41\n0.087705 3\n0.088189 41\n2.288351 41\n0.079348 41\n0.120181 41\n0.056431 41\n0.191791 41\n0.144184 41\n0.071737 41\n0.112241 41\n0.056041 3\n0.144177 41\n0.031457 41\n0.128555 41\n0.159964 41\n0.048683 41\n0.063678 79\n0.087713 115\n0.382968 109\n0.062082 65\n0.012613 181\n1.420653 2\n0.334245 20\n0.129613 2\n0.423699 36\n0.289753 7\n0.000013 1595\n0.014777 76\n0.556159 76\n0.173895 81\n0.172167 81\n0.176976 81\n0.118017 81\n0.175249 83\n0.231592 85\n0.173853 7\n0.057470 48\n0.000038 487\n0.001849 96\n0.058631 18\n1.286746 23\n0.152950 1799\n3.563233 494\n0.830593 483\n0.000047 76\n0.000029 284\n0.000526 439\n0.214458 1\n0.000198 140\n0.000105 1\n0.000114 160\n0.000110 173\n0.000301 98\n1.184251 29\n0.000038 2038\n0.218725 235\n0.962749 762\n0.000051 95\n0.000028 609\n0.000551 5\n0.639909 923\n0.000051 3\n0.000025 659\n0.000572 61\n1.354682 898\n0.000117 359\n0.000031 173\n0.000573 144\n0.000034 199\n0.490974 741\n0.000039 12\n0.000646 427\n0.000031 121\n0.000064 53\n0.000299 52\n0.000029 6\n0.000301 143\n0.000029 127\n0.000029 64\n1.023441 64\n0.492350 64\n0.049774 66\n0.050611 64\n0.049466 64\n0.050156 64\n0.051366 64\n0.050273 64\n0.050491 64\n0.049970 64\n0.050903 64\n0.050040 63\n0.049912 64\n0.049551 63\n0.050948 63\n0.050278 63\n0.051036 63\n0.234196 7\n0.191165 1\n0.096028 1\n0.501743 1\n0.051099 1\n0.050729 1\n0.049858 1\n0.050762 1\n0.050720 1\n0.050367 1\n0.050163 1\n0.052225 1\n0.050019 1\n0.051361 1\n0.050363 1\n0.050849 1\n0.408804 69\n0.167580 32\n0.059703 32\n0.160218 32\n0.104864 61\n0.079205 64\n0.399150 1\n0.061059 1\n0.500894 1\n0.050378 1\n0.050548 1\n0.050485 1\n0.051501 2\n0.472523 64\n0.011037 30\n0.516709 28\n0.000069 64\n0.185872 32\n0.370482 32\n0.175252 32\n0.136004 32\n0.064512 61\n0.103672 64\n0.359735 1\n0.076340 1\n0.500932 1\n0.050862 1\n0.050839 1\n0.052294 32\n0.324686 32\n0.167976 32\n0.176132 32\n0.088222 61\n0.079788 64\n0.352354 1\n0.051910 1\n0.224248 1\n0.135890 1\n0.151932 1\n0.127823 32\n0.163431 32\n0.168033 32\n0.239929 32\n0.112048 61\n0.064691 115\n0.389784 173\n0.049417 181\n0.318102 2\n0.254326 20\n0.121093 2\n0.489576 36\n0.297769 7\n0.000013 1595\n0.014261 76\n0.314755 81\n0.170820 81\n0.168842 81\n0.168828 81\n0.113510 85\n0.226516 85\n0.625666 76\n0.113910 81\n0.281249 81\n0.167367 81\n0.170071 82\n0.114466 83\n0.171608 85\n0.113574 92\n0.621121 90\n0.171818 89\n0.113382 7\n0.644815 12\n0.000036 36\n0.000029 96\n0.052260 18\n0.360564 23\n0.121147 33\n0.433618 125\n0.002209 980\n0.000448 1241\n0.000450 45\n0.541008 28\n0.000051 64\n2.186954 64\n0.388595 64\n0.161221 64\n0.182676 64\n0.295641 25\n0.397366 1120\n0.000530 65\n0.000082 65\n0.345245 65\n0.192245 71\n3.135319 75\n1.349019 65\n0.495665 65\n0.049965 65\n0.050150 64\n0.050136 66\n0.049596 65\n0.050127 65\n0.049751 25\n0.055984 657\n0.000550 307\n0.001221 65\n0.042463 65\n0.050409 65\n0.050239 65\n1.103291 65\n0.499850 65\n0.050571 66\n0.050675 65\n0.050683 65\n0.051097 65\n0.049814 344\n0.059996 599\n0.000122 302\n0.000035 399\n0.000636 65\n0.041516 64\n0.049065 65\n0.792355 65\n0.223772 65\n0.160309 65\n0.176060 64\n3.431933 63\n0.199786 197\n0.481541 748\n0.000047 763\n0.000747 1\n1.308808 992\n0.000124 281\n0.000035 97\n0.000700 247\n0.000044 64\n1.376320 64\n0.207094 64\n0.217484 63\n0.215394 63\n0.191588 63\n0.183674 63\n0.192545 63\n0.176331 62\n0.191667 61\n0.176137 537\n0.164746 415\n0.000040 644\n0.000534 68\n1.897536 44\n18.022972 135\n0.001661 2\n0.270541 20\n0.129220 2\n0.335648 36\n0.331865 7\n0.000013 1595\n0.014415 76\n0.244308 7\n0.224675 12\n0.000040 36\n0.000032 36\n0.001163 209\n0.000039 44\n0.000034 46\n0.000029 2\n0.000028 96\n0.049592 18\n0.668684 23\n0.105547 33\n1.105448 125\n0.001906 947\n0.000423 447\n0.000292 507\n0.000142 454\n0.876282 456\n0.000118 381\n0.000034 492\n0.000697 78\n1.566381 56\n0.984016 179\n0.416443 2\n3.270549 20\n0.528962 2\n0.751789 36\n0.296704 7\n0.000013 1595\n0.014227 81\n1.681707 7\n0.113407 48\n0.000038 36\n0.001020 115\n0.000033 136\n0.000072 50\n0.000235 96\n0.050728 3\n0.808858 20\n0.353499 23\n0.727740 33\n0.977705 125\n0.002183 1369\n0.000488 625\n0.000361 100\n2.518748 29\n0.000131 1\n0.494136 49\n0.001404 300\n0.000444 176\n0.000061 360\n0.000264 263\n0.000038 99\n0.437228 873\n0.000052 198\n0.000104 79\n0.000032 141\n0.000031 62\n0.432601 840\n0.000052 296\n0.000731 107\n1.288216 29\n0.000039 28\n1.076446 28\n0.119820 28\n0.080093 34\n0.116349 1\n0.329970 49\n0.043681 1126\n0.000454 407\n0.000333 17\n0.715215 897\n0.000146 282\n0.000040 231\n0.000532 94\n0.156508 849\n0.000047 147\n0.000030 226\n0.000511 65\n0.160942 757\n0.000045 369\n0.000514 82\n0.387208 828\n0.000055 314\n0.000102 143\n0.000092 142\n0.000754 208\n0.148464 894\n0.000048 147\n0.000638 391\n0.156160 621\n0.000045 2\n0.000082 192\n0.000554 70\n0.414382 852\n0.000043 186\n0.000101 70\n0.000111 214\n0.000482 695\n0.377017 380\n0.000040 379\n0.000548 294\n0.709780 639\n0.000071 104\n0.000037 362\n0.000611 100\n2.776704 29\n0.000128 1211\n1.016464 5\n1.467447 1331\n0.000445 4\n0.349894 844\n0.000052 169\n0.000042 568\n0.158975 375\n0.000036 126\n0.000030 152\n0.000312 1\n0.160330 906\n0.000114 152\n0.000030 333\n0.000614 62\n1.290919 63\n0.499418 63\n0.050110 63\n0.050253 64\n0.049973 63\n0.080887 63\n0.019635 64\n0.050316 64\n0.050680 64\n0.050081 64\n0.050331 64\n0.050746 64\n0.051253 64\n0.050134 65\n0.050593 64\n0.050442 64\n0.226764 64\n0.200177 3\n0.078424 64\n0.277536 3\n0.091013 3\n0.499802 3\n0.050061 3\n0.050442 3\n0.050279 2\n0.050311 1\n0.050433 3\n0.050516 3\n0.050061 3\n0.050076 3\n0.049885 3\n0.050068 3\n0.050065 2\n0.049681 1\n0.050006 3\n0.050081 3\n0.050597 3\n0.050513 3\n0.050674 3\n0.050075 3\n0.050038 2\n0.050177 1\n0.049723 3\n0.158394 70\n0.407087 32\n0.227979 32\n0.232235 32\n0.064058 32\n0.111760 32\n0.009217 32\n0.575188 32\n0.111915 32\n0.567930 31\n0.304053 31\n0.143722 31\n0.151936 31\n0.160250 31\n0.161069 63\n0.158850 31\n0.167992 31\n0.160142 31\n0.135921 65\n0.337387 65\n0.148222 65\n0.192093 65\n0.312238 2\n0.158875 1\n0.499711 3\n0.050389 3\n0.049656 3\n0.050672 3\n0.050225 3\n0.049977 3\n0.050103 2\n0.119090 1\n0.160150 3\n0.135743 31\n0.235789 31\n0.143450 46\n0.161119 44\n0.110893 42\n0.128022 42\n0.152126 42\n0.152147 69\n0.144174 42\n0.079813 42\n0.120038 42\n0.111891 73\n0.072091 42\n0.111846 42\n0.080068 42\n0.119986 42\n0.160149 42\n0.192002 42\n0.272101 42\n0.039911 42\n0.088058 42\n0.040323 42\n0.235371 112\n0.522485 106\n0.050054 65\n0.014383 15\n0.237968 1\n0.499814 1\n0.050196 1\n0.050055 1\n0.049549 1\n0.050912 1\n0.049584 1\n0.050928 1\n0.050089 1\n0.050822 1\n0.051070 1\n0.051043 1\n0.050898 1\n0.050694 1\n0.050146 1\n0.051190 1\n0.050624 1\n0.050216 1\n0.051140 1\n0.049681 1\n0.050912 57\n0.178871 97\n0.349788 881\n0.000051 2\n0.000549 407\n0.000063 62\n0.780181 65\n0.832041 61\n0.159808 64\n2.719993 64\n0.168255 1\n0.174868 1\n0.499754 1\n0.049874 1\n0.050074 1\n0.049938 1\n0.050043 1\n0.050871 64\n0.043684 73\n0.363337 41\n0.497886 41\n0.050193 41\n0.050401 41\n0.049974 18\n0.049946 22\n0.000056 41\n0.049632 41\n0.050097 41\n0.050758 41\n0.156033 38\n0.720299 38\n0.087704 38\n0.120381 14\n0.223969 23\n0.000047 38\n0.392008 38\n0.023701 114\n0.374763 108\n0.045833 64\n0.012420 46\n0.627519 2\n0.000550 35\n0.000569 2\n0.000378 96\n0.002285 2\n0.372360 20\n0.105400 2\n0.543178 36\n0.290847 7\n0.000013 1595\n0.014371 81\n0.553254 81\n0.170020 81\n0.113265 83\n0.170345 106\n0.286570 87\n0.420307 76\n0.121069 178\n0.057301 76\n0.114794 146\n0.399531 350\n0.355525 97\n0.861723 90\n0.743601 81\n0.229913 88\n0.686923 90\n0.115080 165\n0.233919 87\n0.242233 74\n0.121079 188\n0.240514 181\n0.174370 97\n0.404010 7\n0.644990 12\n0.000033 36\n0.000472 96\n0.053945 18\n0.243424 23\n0.097015 1929\n0.427175 1\n1.465769 42\n0.004137 28\n0.000502 17\n1.205846 105\n0.244076 29\n0.000129 1\n0.678043 49\n0.002521 754\n0.000533 164\n0.000033 97\n0.000071 393\n0.000386 100\n0.789804 29\n0.000042 1\n0.181369 49\n0.003630 7\n0.000632 302\n0.000071 89\n0.000301 208\n0.000108 444\n0.000079 89\n0.000497 176\n0.000030 165\n0.000038 105\n0.645040 29\n0.000039 45\n0.356738 46\n0.376047 1875\n0.661147 143\n0.712328 806\n0.000104 176\n0.000035 322\n0.000642 145\n0.514861 1193\n0.000506 62\n4.328035 64\n0.499226 63\n0.049551 63\n0.050318 63\n0.050353 63\n0.050625 63\n0.050086 64\n0.051720 64\n0.050235 64\n0.050606 64\n0.051581 65\n0.049145 64\n0.050644 64\n0.050712 64\n0.050274 64\n0.050233 64\n0.050356 64\n0.050313 64\n0.229122 8\n0.783643 141\n0.492712 8\n0.175992 329\n2.021288 541\n0.000055 65\n0.382405 116\n1.168686 175\n0.036507 75\n1.924967 64\n0.197568 65\n0.167987 65\n0.184106 65\n0.687878 64\n0.136135 7\n0.215754 25\n0.308278 149\n0.000040 8\n0.103551 28\n1.869381 28\n0.128119 28\n0.231882 1\n0.111673 62\n0.232950 3\n0.151965 28\n0.095996 28\n0.192120 28\n0.159936 55\n0.104104 28\n0.111728 28\n2.232498 28\n0.407670 28\n0.240342 28\n0.103105 28\n0.003340 4\n0.301250 4\n0.136135 4\n0.112274 28\n0.111694 28\n0.111761 28\n0.032041 28\n0.168317 28\n0.248054 28\n0.119979 31\n0.098258 1\n1.001848 116\n0.290511 175\n0.033046 18\n2.357521 1\n0.144147 68\n0.820500 116\n0.284726 110\n0.040826 65\n0.003549 18\n3.130023 71\n0.200604 18\n1.440603 25\n2.284188 149\n0.000044 8\n0.151608 28\n0.317132 28\n0.175849 28\n0.128364 55\n0.472193 28\n0.095575 4\n4.168105 37\n0.143870 4\n0.144325 4\n0.135694 12\n0.487967 28\n0.336019 28\n0.047982 28\n0.160206 28\n0.104148 3\n0.160156 51\n0.152190 3\n0.039546 28\n0.473077 28\n0.143297 28\n0.063881 55\n0.088009 28\n0.103620 28\n0.696303 28\n0.063979 28\n0.159923 28\n0.079742 28\n0.176451 28\n0.944203 28\n0.047880 56\n0.001151 47\n0.001104 46\n0.110097 28\n0.111372 28\n0.240489 28\n0.255785 28\n0.128217 28\n0.271792 28\n0.384233 28\n0.103955 28\n0.256155 33\n1.011071 156\n0.677090 8\n0.201673 28\n0.309292 28\n0.024691 28\n0.127158 28\n0.079977 28\n0.584133 28\n0.074673 28\n0.053482 28\n0.119826 28\n0.032321 28\n0.215850 2\n0.136026 60\n0.176314 3\n0.047531 28\n0.256446 28\n0.159808 28\n0.176276 28\n0.096057 49\n0.048025 116\n0.527120 175\n0.036520 76\n1.773394 65\n0.165051 1\n0.535140 139\n0.762544 133\n0.000048 113\n0.535263 171\n0.078861 44\n0.543014 2\n0.000029 37\n0.000177 96\n0.001812 2\n0.349793 20\n0.097505 2\n0.423459 36\n0.303683 7\n0.000012 1595\n0.014487 81\n0.491231 81\n0.112025 81\n0.170574 83\n0.168975 106\n0.286590 87\n0.290875 76\n0.118396 76\n0.116454 133\n0.055763 181\n0.168594 97\n0.453482 85\n0.558900 81\n0.336714 81\n0.112860 81\n0.168402 82\n0.170482 83\n0.112138 83\n0.168591 84\n0.226430 86\n0.227809 86\n0.680428 126\n0.286216 83\n0.858569 140\n0.287049 86\n0.457156 170\n0.230173 94\n0.179099 83\n0.182198 183\n0.234794 212\n0.449589 99\n0.398901 85\n0.728511 124\n0.227848 82\n0.285376 172\n0.522525 88\n0.396914 88\n0.171264 90\n0.114973 165\n0.232388 92\n0.356564 81\n0.119570 188\n0.115920 81\n0.056937 209\n0.447774 80\n0.849493 195\n0.398837 88\n0.953423 88\n0.169637 90\n0.169015 90\n0.399109 81\n0.172175 88\n0.328835 90\n0.134825 85\n0.499894 121\n0.337202 104\n0.457669 85\n0.670030 7\n1.490346 48\n0.000033 96\n0.051479 18\n0.422716 23\n0.105573 1470\n0.529999 68\n1.629550 72\n2.995790 65\n0.497431 64\n7.411921 179\n5.783498 2\n0.462586 20\n0.177088 2\n0.399661 36\n0.280632 7\n0.000012 1595\n0.014561 81\n0.266657 81\n0.182901 81\n0.113755 83\n0.342757 106\n0.233233 87\n0.306371 76\n0.095986 178\n0.108422 76\n0.084598 181\n0.397342 79\n0.408542 181\n0.288029 83\n0.342910 83\n0.171775 85\n0.171715 106\n0.173872 87\n0.353536 76\n0.178069 178\n0.058845 76\n0.056850 181\n0.343922 79\n0.692604 181\n0.286688 83\n0.169967 83\n0.171106 85\n0.171174 106\n0.173808 87\n0.239798 76\n0.119844 76\n0.179897 133\n0.056985 181\n0.172218 97\n0.978206 90\n0.228524 81\n0.172888 123\n0.290566 81\n0.233873 137\n0.118173 81\n0.286503 82\n0.169617 83\n0.169322 83\n0.171724 86\n0.230652 170\n0.237220 94\n0.244065 83\n0.181913 82\n0.122093 142\n0.056910 212\n0.173098 81\n0.348670 203\n0.235454 82\n0.170743 83\n0.171199 85\n0.171614 92\n0.741015 90\n0.171864 89\n0.623993 88\n0.172867 123\n0.289271 82\n0.291218 138\n0.402583 81\n0.227459 82\n0.174234 83\n0.173626 85\n0.174031 170\n0.235441 94\n0.240405 83\n0.180626 82\n0.120966 142\n0.057102 212\n0.174278 81\n0.466534 203\n0.231601 7\n0.479468 48\n0.000034 96\n0.053648 18\n0.376596 23\n0.145121 33\n0.441605 125\n0.012045 1312\n0.000065 290\n3.557963 704\n0.000039 144\n0.000039 281\n0.000570 110\n2.090105 809\n0.000121 158\n0.000033 345\n0.000075 64\n0.401642 899\n0.000052 183\n0.000086 496\n0.000766 357\n0.391099 589\n0.000047 110\n0.000727 518\n0.000033 109\n0.000028 65\n0.000030 7\n0.000510 269\n0.000039 408\n0.532892 1094\n0.000042 445\n0.000640 126\n0.748185 910\n0.000092 307\n0.000569 64\n2.241763 64\n0.130291 8\n1.663749 65\n13.061020 61\n0.163335 63\n0.172199 1093\n0.000161 139\n0.000754 291\n0.000040 64\n0.818613 65\n0.200559 64\n0.304047 64\n0.159792 64\n0.160222 64\n0.167617 64\n0.151831 64\n0.153893 64\n0.166316 64\n0.160225 177\n0.156075 850\n0.000046 291\n0.000521 65\n0.155104 65\n0.168071 64\n0.168055 64\n0.168029 63\n0.159782 65\n0.176317 64\n0.151680 64\n0.168426 64\n0.143707 64\n0.144686 266\n0.164430 929\n0.000102 181\n0.000581 65\n0.634057 65\n0.967861 1\n1.263290 136\n1.396997 192\n0.166639 3\n0.166308 80\n0.169349 154\n0.000033 3\n0.166924 209\n0.184652 3\n0.366863 210\n0.385387 84\n3.437666 542\n0.924203 72\n0.640321 64\n0.499084 64\n0.050212 65\n0.050005 64\n0.049824 64\n0.050845 64\n0.052186 61\n0.050369 237\n0.054005 731\n0.000147 299\n0.000046 64\n0.047275 64\n0.050532 64\n0.297001 64\n0.502475 65\n0.050033 64\n0.050178 64\n0.050536 64\n0.211068 64\n0.183882 65\n0.567404 7\n1.669338 142\n0.000032 45\n0.696448 5\n0.006488 994\n0.000052 57\n0.000029 450\n0.000583 304\n0.759575 64\n0.663005 64\n0.496872 63\n0.050449 63\n0.049614 63\n0.049861 63\n0.051386 63\n0.378868 7\n0.431355 64\n0.441675 3\n1.069855 3\n0.499907 2\n0.050174 1\n0.050294 64\n0.128953 64\n1.304003 1\n0.142598 1\n0.200188 1\n0.176774 101\n0.003275 17\n0.139935 90\n0.138701 119\n1.760595 203\n0.209549 72\n0.390366 41\n0.423307 41\n0.055864 2\n0.136320 41\n0.127700 41\n0.136162 41\n0.200074 41\n0.088550 41\n0.103417 3\n0.039868 41\n0.088124 41\n0.088535 41\n0.111472 3\n0.088115 41\n0.184072 41\n0.055979 41\n0.096032 41\n0.039705 41\n0.128088 41\n0.048301 41\n0.159981 3\n0.079729 41\n0.195078 41\n0.133021 41\n0.128055 41\n0.120048 41\n0.095832 41\n0.056708 1\n0.382886 41\n0.040519 41\n0.103841 41\n0.063918 3\n0.120206 41\n0.048118 41\n0.168226 41\n0.079624 41\n0.160343 43\n0.327743 43\n0.112192 41\n0.048303 41\n0.047563 3\n0.112130 41\n0.047659 3\n0.088119 41\n0.112296 41\n0.071753 41\n0.048541 2\n0.087487 1\n0.880888 186\n0.215980 63\n0.194290 124\n0.356656 3\n0.143998 41\n0.119798 41\n0.097832 41\n0.021779 43\n0.536723 43\n0.119704 43\n0.119920 41\n0.153096 41\n0.086941 41\n0.096196 41\n0.031950 41\n0.119923 41\n0.288922 41\n0.159300 41\n0.168114 41\n0.047911 41\n0.063679 41\n0.193038 115\n0.398165 173\n0.043588 181\n1.195917 2\n0.501969 20\n0.121354 2\n0.321667 36\n0.292383 7\n0.000013 1595\n0.015196 81\n0.883090 81\n0.177047 81\n0.118417 83\n0.119338 106\n0.297848 87\n0.245158 76\n0.184762 178\n0.180930 76\n0.117085 181\n0.239205 97\n0.712097 90\n0.241759 122\n0.235400 81\n0.120652 132\n0.178437 81\n0.178427 81\n0.118127 82\n0.177766 83\n0.118639 83\n0.176379 86\n0.236141 170\n0.123366 94\n0.249339 83\n0.125189 82\n0.125137 142\n0.124527 212\n0.177361 81\n0.300556 171\n0.415904 82\n0.234518 83\n0.177400 85\n0.119684 170\n0.241330 94\n0.201111 83\n0.148007 183\n0.112330 212\n0.175626 99\n0.241840 85\n0.401393 124\n0.194042 82\n0.163685 172\n0.159682 88\n0.282673 88\n0.117860 90\n0.176387 165\n0.181883 92\n0.126016 81\n0.188361 81\n0.125214 257\n0.185097 99\n0.354096 87\n0.177657 87\n0.465095 85\n0.176634 7\n0.375691 48\n0.000032 96\n0.054720 18\n0.321272 23\n0.121490 9\n0.638822 1998\n0.004997 102\n12.783309 29\n0.000211 1628\n0.480304 103\n1.103124 29\n0.000472 1791\n0.169084 102\n0.614942 29\n0.000037 41\n0.212032 45\n0.160319 44\n0.375475 44\n0.408550 775\n0.577454 64\n0.495313 64\n0.127908 65\n0.127945 64\n0.144002 64\n0.232916 65\n0.118463 28\n0.664159 28\n0.168082 3\n0.312277 28\n0.071713 28\n0.064041 28\n0.063998 28\n0.111636 1\n0.080063 28\n0.064094 28\n0.071954 3\n0.104332 28\n0.200117 28\n0.135787 28\n0.104552 28\n0.087441 28\n0.160281 3\n0.311651 28\n0.664008 28\n0.160357 3\n0.063973 28\n0.095669 28\n0.096195 28\n0.215861 28\n0.104179 28\n0.039654 28\n0.056155 28\n0.143966 28\n0.168056 4\n0.400098 28\n0.055714 28\n0.016814 3\n0.127361 28\n0.112084 28\n0.103703 28\n0.104060 28\n0.048081 3\n0.063701 28\n0.152564 28\n0.079548 28\n0.032042 2\n0.096210 28\n0.112297 28\n0.199824 28\n0.127866 3\n0.048140 28\n0.104792 8\n0.375052 1\n0.072134 4\n0.112079 28\n0.111845 28\n0.112253 3\n0.071990 28\n0.055637 28\n0.160331 28\n0.064076 4\n0.335650 4\n0.112181 28\n0.151958 28\n0.136276 28\n0.095804 28\n0.192014 28\n0.095909 4\n0.328120 4\n0.095655 3\n0.079950 28\n0.144518 28\n0.191960 3\n0.096053 28\n0.167747 8\n0.248057 28\n0.175919 28\n0.031706 28\n0.104399 28\n0.039747 28\n0.192215 3\n0.072022 28\n0.127649 28\n0.121570 28\n0.062637 28\n0.223882 65\n0.208766 64\n0.119559 64\n0.128533 64\n0.329048 64\n0.110150 3\n0.200255 3\n0.159871 3\n0.160161 3\n0.128570 28\n0.231336 28\n0.151813 2\n0.064923 28\n0.151500 28\n0.072439 28\n0.111452 28\n0.055977 3\n0.103614 28\n0.480879 28\n0.183495 28\n0.135772 28\n0.120235 28\n0.200077 28\n0.055912 28\n0.136093 28\n0.167894 28\n0.079836 28\n0.103991 2\n0.111892 28\n0.096001 28\n0.167984 4\n0.503786 28\n0.144603 28\n0.015643 28\n0.079838 3\n0.256304 28\n0.047823 28\n0.168555 28\n0.039349 28\n0.088475 3\n0.096613 28\n0.151605 28\n0.143508 28\n0.127783 28\n0.015828 4\n0.304412 4\n0.112015 4\n0.111622 28\n0.049361 28\n0.039373 28\n0.143777 28\n0.023986 28\n0.007745 1\n0.520178 28\n0.095717 28\n0.105194 28\n0.183030 28\n0.048265 28\n0.023380 3\n0.080303 28\n0.136300 28\n0.047589 3\n0.024097 28\n0.119853 28\n0.136207 28\n0.039997 3\n0.120251 28\n0.079658 28\n0.079964 28\n0.120388 28\n0.071783 28\n0.015976 28\n0.071769 28\n0.152470 28\n0.104051 28\n0.047508 28\n0.040130 28\n0.096147 3\n0.071661 28\n0.103839 28\n0.072483 28\n0.087554 3\n0.152833 1\n0.327636 4\n0.104150 4\n0.111668 28\n0.176047 28\n0.007648 4\n0.504260 4\n0.088355 28\n0.184741 28\n0.086738 3\n0.152615 28\n0.088191 28\n0.087801 28\n0.095642 28\n0.096314 28\n0.063867 28\n0.039919 99\n0.152630 3\n0.103298 3\n0.136257 3\n0.287837 3\n0.200090 28\n0.178583 28\n0.141448 28\n0.096151 28\n0.207963 28\n0.111614 28\n0.088296 4\n0.183770 4\n0.112166 4\n0.136283 4\n0.135527 4\n0.120104 28\n0.216179 28\n0.111962 28\n0.280180 28\n0.079319 4\n0.224187 4\n0.095844 28\n0.152713 28\n0.167680 28\n0.055804 28\n0.048143 3\n0.103684 28\n0.112381 28\n0.103595 2\n0.048269 28\n0.064088 28\n0.088185 28\n0.063839 3\n0.119682 28\n0.080119 28\n0.096152 28\n0.104014 28\n0.087685 28\n0.136446 28\n0.023608 28\n0.200410 28\n0.111800 28\n0.096244 28\n0.023566 3\n0.104438 28\n0.135719 28\n0.071679 3\n0.096411 28\n0.071826 28\n0.096155 3\n0.063724 28\n2.856541 28\n0.144029 28\n0.087725 28\n0.063937 3\n0.120069 28\n1.424221 28\n0.040143 28\n0.159886 28\n0.031721 3\n0.111985 28\n0.055971 28\n0.160012 28\n0.128046 28\n0.040102 28\n0.407845 28\n0.071750 4\n0.280942 4\n0.095255 28\n0.072049 28\n0.160128 28\n0.078060 28\n0.025462 28\n0.160356 28\n0.048040 3\n0.128487 28\n0.063274 28\n0.072159 28\n0.096024 3\n0.071803 28\n0.568363 28\n0.352019 28\n0.111828 28\n0.128203 28\n0.152158 28\n0.047965 28\n0.039542 28\n0.600348 3\n0.111887 28\n0.104061 28\n0.079777 3\n0.103949 28\n0.040171 28\n0.079839 4\n0.248080 8\n0.127882 1\n0.128271 4\n0.136017 8\n0.135798 1\n0.128336 4\n0.127727 28\n0.168085 28\n0.087948 2\n0.087919 28\n0.096067 28\n0.103924 3\n0.080060 28\n0.041220 28\n0.078790 28\n0.111997 25\n0.160200 74\n0.000063 3\n0.215983 3\n0.151929 3\n0.311797 3\n0.424321 28\n0.199933 28\n0.199725 4\n0.400394 11\n0.103916 28\n0.143887 28\n0.120009 28\n0.183733 28\n0.064322 28\n0.031761 3\n0.088046 28\n0.143950 28\n0.055872 28\n0.144301 28\n0.152012 28\n0.087839 28\n0.096080 28\n0.095914 28\n0.047664 28\n0.344623 28\n0.135892 28\n0.055857 28\n0.103901 28\n0.072010 28\n0.144309 28\n0.335738 99\n1.120563 105\n0.136096 28\n0.759841 28\n0.159470 3\n0.103860 28\n0.120163 28\n0.079796 28\n0.128086 28\n0.168051 28\n0.056110 3\n0.135641 28\n0.160178 28\n0.007563 4\n0.400445 8\n0.080052 28\n0.191917 28\n0.007682 28\n0.160356 28\n0.152234 4\n0.200093 4\n0.112006 4\n0.127666 8\n0.128289 28\n0.144052 28\n0.239971 28\n0.135891 28\n0.039582 4\n0.296135 4\n0.112334 28\n0.103727 28\n0.087850 3\n0.096241 28\n0.095798 1\n0.080101 28\n0.120282 28\n0.063738 28\n0.184398 28\n0.103618 3\n0.048296 28\n0.120311 28\n0.063343 28\n0.088281 28\n0.039865 28\n0.152355 28\n0.071830 28\n0.192008 4\n0.407963 4\n0.112124 4\n0.127712 28\n0.295936 28\n0.112310 28\n0.151844 28\n0.231887 3\n0.063789 28\n0.192175 28\n0.007654 28\n0.432613 3\n0.184012 28\n0.207709 28\n0.096042 28\n0.120301 28\n0.111897 66\n0.248055 28\n0.175762 28\n0.120195 3\n0.232047 28\n0.135844 28\n0.152342 28\n0.087608 28\n0.232010 4\n0.304119 4\n0.128026 4\n0.144101 8\n0.143784 1\n0.152207 4\n0.143769 4\n0.136765 69\n0.127332 65\n0.096055 28\n0.159970 28\n0.183965 28\n0.095767 3\n0.112302 28\n0.287859 8\n0.271875 28\n0.192092 28\n0.223916 28\n0.087790 28\n0.216239 28\n0.103808 28\n0.128432 28\n0.079695 28\n0.024232 28\n0.279893 28\n0.072009 28\n0.352254 4\n0.719972 28\n0.234158 4\n0.213897 4\n0.111942 28\n0.079981 28\n0.263967 36\n0.314391 2\n0.133599 28\n0.385918 28\n0.190002 28\n0.208120 28\n0.151911 28\n0.095680 28\n0.128322 28\n0.056006 28\n0.119937 3\n0.040106 28\n0.103758 28\n0.072209 3\n0.120020 28\n0.432004 28\n0.032585 28\n0.086998 28\n0.136434 64\n0.464228 28\n0.087694 28\n0.047983 28\n0.224045 28\n0.095767 28\n0.056176 28\n0.144184 28\n0.103729 28\n0.128371 3\n5.176227 66\n1.343409 28\n0.190633 28\n0.057137 28\n0.023990 28\n0.216399 28\n0.096039 28\n0.056078 28\n0.095616 3\n0.072722 28\n0.055477 28\n0.144001 28\n0.055839 28\n0.039911 28\n0.104126 1\n0.064008 28\n0.144107 28\n0.071875 3\n0.095843 28\n0.136248 28\n0.143967 28\n0.103769 2\n0.104019 28\n0.040192 3\n0.072913 28\n0.191040 28\n0.071901 28\n0.080420 28\n0.151848 28\n0.111991 28\n0.072105 28\n0.095779 28\n0.176181 3\n0.047900 28\n0.167860 28\n0.640590 3\n0.087513 28\n0.180038 28\n0.068555 28\n0.111646 28\n0.079635 3\n0.064171 28\n0.152113 28\n0.152130 3\n0.216025 28\n0.160037 66\n0.120119 28\n0.144158 28\n0.055524 3\n0.087910 28\n0.304053 28\n0.136239 28\n0.071700 3\n0.112302 28\n0.063906 28\n0.095841 3\n0.087832 28\n0.368213 28\n0.048035 28\n0.111857 28\n0.112298 3\n0.095522 28\n0.040125 28\n0.080139 28\n0.088256 61\n0.312305 28\n0.111463 28\n0.184141 28\n0.191717 4\n0.367896 28\n0.192064 28\n0.048024 28\n0.047976 28\n0.103972 28\n0.168098 28\n0.104135 28\n0.048003 28\n0.055738 3\n0.104095 28\n0.048029 28\n0.128209 3\n0.048073 28\n0.079461 28\n0.072308 28\n0.127982 28\n0.112200 28\n0.112310 28\n0.047407 3\n0.112239 28\n0.119599 28\n0.112481 28\n0.111413 28\n0.064199 28\n0.151975 64\n0.072086 3\n0.160262 28\n0.535946 28\n0.303602 28\n0.168314 28\n0.136079 28\n0.080246 3\n0.071562 28\n0.152162 28\n0.143772 28\n0.072118 3\n0.055949 28\n0.127987 28\n0.080199 28\n0.048359 28\n0.215574 4\n0.344011 28\n0.031822 28\n0.136381 28\n0.047948 3\n0.079937 28\n0.095916 28\n0.072007 28\n0.167966 28\n0.056059 28\n0.184069 28\n0.119895 28\n0.456144 28\n0.063808 28\n0.152138 36\n0.250903 33\n0.245228 506\n0.554136 77\n0.000083 99\n0.117763 99\n0.152340 64\n0.384698 64\n0.118428 65\n0.519709 64\n0.010233 64\n0.214177 28\n1.584717 3\n0.119424 28\n0.056086 28\n0.087812 28\n0.224225 28\n0.111800 28\n0.111929 28\n0.080063 28\n0.031856 3\n0.112713 28\n0.135574 28\n0.103827 28\n0.104454 3\n0.111504 28\n0.055994 28\n0.087947 28\n0.071821 3\n0.104248 28\n0.071885 28\n0.080258 3\n0.071761 28\n0.144212 28\n0.111926 1\n0.055847 28\n0.305065 28\n0.095065 28\n0.056083 28\n0.096021 3\n0.112164 28\n0.144019 28\n0.207752 1\n0.128235 28\n0.128032 28\n0.135353 3\n0.104319 28\n0.144383 28\n0.151954 28\n0.144359 28\n0.047307 28\n0.039940 3\n0.136084 28\n0.136309 28\n0.095826 28\n0.079850 3\n0.112235 28\n0.087769 28\n0.120283 28\n0.055810 28\n0.063499 28\n0.112456 28\n0.072032 3\n0.087844 28\n0.200444 28\n0.039788 2\n0.079891 28\n0.031963 28\n0.111796 28\n0.072203 3\n0.128027 28\n0.103939 28\n0.096064 28\n0.200257 28\n0.063364 28\n0.016307 3\n0.360420 28\n0.055664 28\n0.103904 28\n0.056349 3\n0.119818 28\n0.055727 28\n0.088150 28\n0.088064 28\n0.096000 99\n0.326755 28\n0.241679 28\n0.112042 28\n0.079322 28\n0.104321 3\n0.096028 28\n0.095865 28\n0.088206 28\n0.096858 3\n0.078645 28\n3.504350 28\n0.079651 28\n0.128464 28\n0.095621 28\n0.040031 28\n0.081311 28\n0.166906 28\n0.104350 28\n0.039692 28\n0.063841 3\n0.120005 28\n0.121432 28\n0.062859 28\n0.087971 28\n0.096342 3\n0.080309 28\n0.103341 28\n0.072632 28\n0.103088 28\n0.168036 3\n0.192441 28\n0.327562 8\n0.368049 28\n0.176220 28\n0.152173 28\n0.111588 3\n0.031901 28\n0.176328 28\n0.064086 3\n0.103819 28\n0.095692 28\n0.088320 28\n0.168172 28\n0.159769 28\n0.064026 3\n0.119777 28\n0.072170 28\n0.128030 3\n0.040282 28\n0.064040 28\n0.111704 28\n0.056342 4\n0.407869 4\n0.103922 28\n0.055936 28\n0.160110 28\n0.047759 28\n0.079938 28\n0.072211 3\n0.112218 28\n0.047529 28\n0.112295 28\n0.055896 28\n0.152578 28\n0.175675 3\n0.063625 28\n0.120256 28\n0.088096 28\n0.079771 2\n0.095861 28\n0.168292 28\n0.055822 28\n0.112056 28\n0.176262 4\n0.319910 28\n0.031557 28\n0.144334 28\n0.135896 28\n0.136265 2\n0.136014 28\n0.607744 28\n0.039818 28\n0.144165 28\n0.056156 28\n0.080042 28\n0.224102 28\n0.119926 4\n0.919730 4\n0.121072 28\n0.215045 100\n0.488460 99\n0.135992 28\n0.231699 28\n0.119777 28\n0.135795 3\n0.080087 28\n0.039956 28\n0.047723 28\n0.112007 28\n0.112174 28\n0.256378 28\n0.128107 28\n0.119981 3\n0.184003 28\n0.247610 28\n0.095786 28\n0.096022 1\n0.088257 28\n0.176205 28\n0.087486 28\n0.048373 28\n0.128416 28\n0.063392 28\n0.096685 28\n0.079439 1\n0.127940 28\n0.120157 6\n0.311831 28\n0.064147 28\n0.088024 28\n0.112199 28\n0.015521 28\n0.096053 3\n0.080032 28\n0.104321 28\n0.079745 28\n0.079624 28\n0.024362 3\n0.095830 28\n0.089071 28\n0.079097 28\n0.080118 2\n0.111830 28\n0.640174 7\n0.376186 28\n0.535786 28\n0.111824 28\n0.184363 28\n0.047918 28\n0.047844 3\n0.071670 28\n0.080112 28\n0.080537 28\n0.104855 28\n0.158989 28\n0.072045 3\n0.079868 28\n0.120015 28\n0.064699 28\n0.143325 28\n0.080031 1\n0.104470 28\n0.039354 28\n0.104029 28\n0.072093 3\n0.120151 28\n0.048110 28\n0.111450 28\n0.160175 28\n0.024293 3\n0.103934 28\n0.167808 28\n0.112123 28\n0.080093 28\n0.039856 28\n0.056139 2\n0.087863 28\n0.144206 28\n0.112028 3\n0.079602 28\n0.080091 28\n0.079984 28\n0.111990 99\n0.240609 28\n0.127557 28\n0.223963 28\n0.056019 4\n0.279988 4\n0.119869 4\n0.120067 28\n0.064262 28\n0.071819 28\n0.184240 28\n0.055640 28\n0.144364 28\n0.119593 2\n0.071931 28\n0.032335 28\n0.071842 3\n0.095815 28\n0.048325 28\n0.063607 28\n0.152422 28\n0.079918 28\n0.080726 28\n0.055076 3\n0.168118 28\n0.328282 28\n0.103900 28\n0.088217 28\n0.143845 3\n0.127764 28\n0.055942 28\n0.007915 28\n0.239331 28\n0.001734 4\n0.327202 4\n0.119879 4\n0.127918 8\n0.136157 1\n0.127615 28\n0.360568 2\n0.984058 28\n0.295559 3\n0.135810 28\n0.144317 8\n0.408057 28\n0.079894 28\n0.128160 28\n0.208054 28\n0.103742 28\n0.144062 28\n0.040133 28\n0.031329 3\n0.144644 28\n0.047737 28\n0.128353 28\n0.055686 3\n0.128381 28\n0.383886 8\n0.360140 28\n0.079495 28\n0.104230 28\n0.176267 28\n0.071640 28\n0.031957 3\n0.079803 28\n0.384597 28\n0.016290 28\n0.151584 28\n0.168172 28\n0.079689 3\n0.071995 28\n0.184088 28\n0.007878 28\n0.176349 28\n0.087939 28\n0.159801 28\n0.095581 28\n0.048397 3\n0.120203 28\n0.087956 3\n0.088226 28\n0.183895 28\n0.127697 28\n0.088073 28\n0.135829 28\n0.087832 28\n0.096391 28\n0.039691 28\n0.256368 28\n0.047943 28\n0.159862 3\n0.151993 28\n0.256015 28\n0.304013 28\n0.080123 4\n0.407947 4\n0.144060 8\n0.152070 1\n0.159846 28\n0.688010 28\n0.152123 28\n0.680294 25\n1.528174 74\n0.000036 28\n0.271682 28\n0.103813 3\n0.087560 28\n0.176245 28\n0.080068 28\n0.135606 28\n0.144022 28\n0.056124 3\n0.111917 28\n0.784297 28\n0.103770 28\n0.184289 28\n0.103724 3\n0.112220 28\n0.119712 28\n0.152467 28\n0.015592 4\n0.280246 4\n0.120030 8\n0.143973 1\n0.143952 4\n0.119962 4\n0.129151 3\n0.150821 28\n0.104929 28\n0.127022 2\n0.095941 28\n0.120215 28\n0.121039 28\n0.031273 28\n0.095292 28\n0.136520 3\n0.095860 28\n0.151973 28\n0.120100 1\n0.063880 28\n0.072067 28\n0.055914 28\n0.096063 3\n0.087716 28\n0.160410 28\n0.127881 28\n0.063930 28\n0.152062 28\n0.072104 28\n0.063692 28\n0.031939 28\n0.160362 3\n0.039840 28\n0.120145 28\n0.063446 1\n0.072252 28\n0.064148 28\n0.104178 28\n0.063872 3\n0.112024 28\n0.080122 28\n0.087872 28\n0.103904 28\n0.087889 28\n0.096280 28\n0.079931 3\n0.200149 28\n0.175976 28\n0.127816 28\n0.103943 28\n0.192116 28\n0.143915 28\n0.056042 28\n0.472366 3\n8.063802 28\n0.239761 28\n0.208532 28\n0.031682 28\n0.088157 28\n0.119910 3\n0.119788 28\n0.039923 28\n0.128130 28\n0.103758 3\n0.104202 28\n0.064010 28\n0.095970 28\n0.071752 28\n0.031912 28\n0.160138 112\n0.657693 29\n0.000591 1788\n0.881833 24\n0.892243 1058\n0.000708 98\n0.528792 895\n0.000080 186\n0.000508 711\n0.565636 316\n0.000039 256\n1.038626 592\n0.000042 307\n0.000587 64\n0.168601 64\n0.240052 64\n0.176644 64\n0.231714 64\n0.175785 64\n0.160021 64\n0.160204 64\n0.111829 64\n0.199902 64\n0.312978 8\n0.934862 25\n0.412407 155\n0.000043 195\n1.349318 99\n1.312004 25\n0.111469 74\n0.000043 1\n0.155894 93\n0.404168 29\n0.000049 3\n0.143626 41\n0.368263 41\n0.111933 21\n0.440148 22\n0.000046 21\n0.128032 22\n0.000071 56\n0.000959 47\n0.000992 38\n0.373731 21\n0.000057 41\n0.119877 41\n0.112157 41\n0.040004 41\n0.047470 25\n0.241077 74\n0.000109 1\n0.137818 28\n0.261637 28\n0.215848 28\n0.063776 54\n0.120833 28\n0.103397 28\n0.112204 28\n0.159618 28\n0.096027 28\n0.056080 28\n0.136044 28\n0.040054 3\n0.592294 28\n0.136038 3\n0.063978 28\n0.151981 30\n0.052359 1\n0.289295 115\n0.057873 174\n0.035752 74\n4.174805 65\n0.204653 64\n0.208017 99\n0.203666 935\n0.000050 36\n0.000649 251\n0.000044 64\n0.219767 65\n2.248140 65\n0.183897 65\n0.152168 1\n0.327336 65\n15.853565 41\n0.476809 41\n0.193312 41\n0.054452 41\n0.087882 3\n0.104252 41\n0.128134 41\n0.047898 3\n0.136042 41\n0.055700 41\n0.119924 41\n0.056355 3\n0.136041 41\n0.464064 41\n0.119904 43\n0.272021 43\n0.129556 41\n0.118396 43\n0.287930 1\n0.672061 43\n0.152178 43\n0.167903 43\n0.119920 41\n0.103974 41\n0.144300 41\n0.071628 41\n0.032467 3\n0.114534 41\n0.101264 41\n0.031589 41\n0.200199 41\n0.152117 43\n0.335776 41\n0.200927 41\n0.102813 41\n0.096261 41\n0.103876 41\n0.192435 2\n0.047948 41\n0.127962 41\n0.087874 41\n0.032120 3\n0.135959 41\n0.103938 41\n0.120040 41\n0.160821 2\n0.159468 1\n0.303897 43\n0.103902 41\n0.040049 41\n0.095937 1\n0.121252 41\n0.078970 41\n0.072134 41\n0.159863 41\n0.111670 41\n0.056037 41\n0.168055 41\n0.032133 41\n0.120061 65\n0.759643 65\n0.150262 116\n15.144191 175\n0.040731 110\n2.140562 979\n0.000130 112\n0.000042 24\n0.262163 1352\n0.000472 135\n0.440397 791\n0.000053 1317\n0.000630 903\n0.233604 471\n0.000039 421\n0.000852 360\n0.710344 543\n0.000046 305\n0.000555 174\n0.000033 108\n0.000407 329\n0.000066 98\n0.399243 806\n0.000123 142\n0.000033 270\n0.000032 135\n0.283212 858\n0.000049 287\n0.000580 84\n0.545401 895\n0.000056 370\n0.000620 64\n0.554628 64\n0.493215 64\n0.049350 64\n0.050700 64\n0.050570 64\n0.050044 65\n0.049773 64\n0.051520 64\n0.050557 64\n0.138955 8\n0.263420 104\n16.995607 29\n0.000051 44\n1.355952 44\n0.192078 1602\n0.420354 991\n0.597311 276\n0.000111 108\n0.168626 775\n0.000084 219\n0.000518 472\n0.499537 572\n0.000083 200\n0.000535 77\n0.053195 928\n0.000048 2\n0.000026 44\n0.000024 177\n0.000073 366\n0.000469 514\n0.048455 592\n0.000056 5\n0.050567 913\n0.000117 316\n0.000031 306\n0.000574 99\n0.049264 853\n0.000053 176\n0.000028 216\n0.000572 112\n0.052148 815\n0.000047 95\n0.000027 92\n0.000028 350\n0.000549 219\n0.047472 847\n0.000046 375\n0.000566 101\n0.051351 816\n0.000041 551\n0.000523 206\n0.048581 733\n0.000047 452\n0.000606 309\n0.054022 715\n0.000041 856\n0.000568 557\n0.047582 460\n0.000034 325\n0.000465 98\n0.057731 848\n0.000110 848\n0.000742 5\n0.049700 1392\n0.000485 957\n0.054863 827\n0.000546 25\n0.038602 573\n0.000428 1\n0.042528 27\n0.003925 28\n0.000040 1\n0.046202 1\n0.050740 1\n0.050770 1\n0.053226 1\n0.048432 1\n0.050212 367\n0.143080 555\n0.000037 237\n0.000029 406\n0.000638 425\n0.213855 504\n0.000038 1\n0.000072 439\n0.000460 375\n0.000100 1005\n1.128104 434\n0.000040 334\n0.439564 577\n0.000044 721\n0.000573 325\n1.127362 646\n0.000040 98\n0.000664 437\n0.000036 7\n0.000310 176\n0.000028 88\n0.000036 76\n1.398906 888\n0.000041 816\n0.000585 64\n5.305795 64\n0.439854 64\n2.321460 64\n0.358670 64\n0.175770 64\n0.161264 63\n0.150923 63\n0.183758 63\n0.615751 66\n8.165982 289\n0.108750 3\n0.175222 288\n0.160885 3\n0.151210 284\n0.160569 3\n0.158990 84\n0.161401 236\n0.000060 3\n0.167217 394\n0.160995 3\n0.158827 315\n0.145187 3\n0.166680 310\n0.144879 66\n0.151342 265\n0.160592 3\n0.215764 109\n0.319952 208\n0.000050 3\n0.351071 244\n0.432140 101\n0.992630 29\n0.000040 1666\n0.849988 65\n1.047152 25\n0.715273 149\n0.000127 8\n0.239752 65\n1.652174 3\n0.268538 3\n0.500797 2\n0.049773 1\n0.050904 3\n0.049910 3\n0.050273 3\n0.050785 3\n0.050387 3\n0.049915 3\n0.051168 2\n0.050813 1\n0.050633 65\n0.006453 3\n0.227907 32\n0.973477 65\n0.351002 65\n0.124616 28\n0.602728 28\n0.168154 28\n0.064309 55\n0.111274 28\n0.095845 28\n0.088188 28\n0.200278 28\n0.176184 28\n0.071754 28\n0.056172 28\n0.047904 28\n0.144336 3\n0.127511 28\n0.096500 3\n0.079766 28\n0.119941 30\n0.045410 170\n0.314955 170\n0.119754 47\n2.122277 25\n0.010488 452\n0.000573 473\n0.000038 181\n0.000338 72\n0.972171 64\n0.495801 63\n0.049959 63\n0.050207 63\n0.051144 63\n0.050436 63\n0.050383 63\n0.050248 63\n0.050802 61\n0.290462 95\n0.212617 715\n0.000081 249\n0.000596 557\n0.000044 64\n0.202468 64\n0.391670 64\n0.500168 64\n0.050158 65\n0.050796 64\n0.051172 64\n0.050822 64\n0.050521 64\n0.050833 64\n0.156028 64\n0.168697 3\n0.398037 3\n0.499796 3\n0.050130 3\n0.049889 3\n0.049788 3\n0.050401 2\n0.050007 1\n0.050784 3\n0.050700 3\n0.050160 3\n0.050106 3\n0.050248 3\n0.049859 3\n0.049857 2\n0.050042 1\n0.049833 3\n0.051097 3\n0.050372 3\n0.050515 3\n0.050231 3\n0.050110 3\n0.050113 65\n0.023292 2\n0.312410 31\n0.285380 31\n0.128163 31\n0.143506 31\n0.119946 32\n0.120311 32\n0.159676 32\n0.478604 80\n0.041584 36\n0.119840 32\n0.504278 32\n0.224019 32\n0.183863 32\n0.033014 52\n0.001303 47\n0.001849 46\n0.060137 32\n0.071873 32\n0.136052 57\n0.515878 59\n0.280729 60\n0.499761 61\n0.050100 62\n0.049521 65\n0.050162 65\n0.049999 66\n0.050597 65\n0.305845 64\n0.151372 65\n0.783857 1\n0.486933 3\n0.880192 3\n0.500432 3\n0.049319 3\n0.050600 3\n0.050459 3\n0.660936 2\n0.167887 13\n0.514071 65\n0.282254 1\n0.195967 13\n0.280586 66\n0.083969 1\n0.059161 13\n0.169905 65\n0.162793 1\n0.011210 70\n0.145902 1\n0.174158 64\n0.012825 13\n0.140566 65\n0.155899 1\n0.010730 13\n0.130162 1\n0.166302 64\n0.013701 13\n0.116053 65\n0.180842 1\n0.001426 13\n0.130340 65\n0.172608 1\n0.000607 13\n0.130715 61\n0.197655 13\n0.195626 74\n0.364180 932\n0.000127 410\n0.000035 389\n0.000675 113\n1.232879 171\n0.050955 179\n10.100610 2\n0.454321 20\n0.145351 2\n0.343348 36\n0.277731 7\n0.000014 1595\n0.014525 81\n0.568458 81\n0.115054 81\n0.114645 83\n0.173797 106\n0.233593 87\n0.296456 76\n0.118633 76\n0.118430 133\n0.057074 7\n0.282834 12\n0.000133 36\n0.000174 34\n0.001140 2\n0.000076 85\n0.000089 2\n0.000055 26\n0.000079 2\n0.000064 94\n0.000067 2\n0.000064 31\n0.000063 2\n0.000069 89\n0.000065 2\n0.000055 65\n0.000075 2\n0.000052 97\n0.000067 2\n0.000065 28\n0.000073 2\n0.000105 57\n0.000066 2\n0.000063 2\n0.000089 96\n0.054493 98\n0.139926 18\n0.846470 23\n0.137518 2221\n1.276763 64\n0.760739 64\n0.155511 63\n0.143958 63\n0.544073 63\n0.159964 63\n0.159507 63\n0.151995 3\n0.182700 3\n0.499757 3\n0.050181 3\n0.049787 3\n0.049973 3\n0.050179 2\n0.050179 1\n0.050694 3\n0.050232 3\n0.051009 3\n0.051010 3\n0.051168 3\n0.050556 3\n0.050389 2\n0.051168 1\n0.050748 3\n0.050547 3\n0.050477 3\n0.049759 3\n0.170049 3\n0.480174 77\n0.129215 32\n0.036066 63\n0.570861 71\n0.005484 118\n0.103513 48\n2.119684 61\n0.111631 36\n0.327981 32\n0.231956 32\n0.006384 32\n0.113647 32\n0.087871 1\n0.539494 1\n0.136054 1\n0.304008 64\n0.099208 1\n0.132931 1\n0.192093 36\n0.797089 32\n0.103631 32\n0.032562 32\n0.143352 32\n0.127976 65\n0.285823 1\n0.181346 1\n0.160050 1\n0.135976 1\n0.151937 32\n0.356814 32\n0.015485 32\n0.184131 32\n0.087964 32\n0.321720 32\n0.094302 32\n0.136075 32\n0.192046 32\n0.296116 32\n0.143937 32\n0.087601 32\n0.336395 32\n0.103959 32\n0.095820 32\n0.120891 32\n0.070922 32\n0.120271 64\n0.285921 1\n0.189574 1\n0.168324 1\n0.144049 102\n0.113983 28\n0.189578 21\n0.000049 69\n0.031703 69\n0.351865 32\n0.111929 1\n0.288680 32\n0.222981 69\n0.015910 32\n0.200170 32\n0.160110 32\n0.176117 115\n0.456993 173\n0.049261 181\n1.319448 2\n0.422346 20\n0.121370 2\n0.303338 36\n0.332429 7\n0.000014 1595\n0.014755 81\n0.147547 81\n0.171457 81\n0.169806 83\n0.171141 106\n0.232339 87\n0.236834 76\n0.117648 76\n0.118280 133\n0.115192 181\n0.115208 97\n0.457215 90\n0.170943 122\n0.170703 81\n0.173418 132\n0.172929 81\n0.114707 81\n0.170894 82\n0.113482 83\n0.170037 83\n0.113654 86\n0.232244 170\n0.231357 94\n0.238959 83\n0.120049 82\n0.120534 142\n0.117734 88\n0.056027 162\n0.451343 81\n0.060914 320\n0.237143 99\n0.170705 85\n0.452687 124\n0.172221 82\n0.172457 172\n0.114128 88\n0.454120 88\n0.114306 90\n0.112966 90\n0.227928 90\n0.511500 165\n0.176059 92\n0.239051 81\n0.120768 81\n0.119988 137\n0.115825 7\n0.168002 12\n0.000034 36\n0.000030 36\n0.001480 209\n0.000036 35\n0.000033 156\n0.000072 203\n0.000313 96\n0.050614 98\n0.212446 18\n0.870497 23\n0.121773 33\n1.480126 125\n0.006534 1571\n0.000637 514\n0.000506 139\n0.790577 794\n0.000117 198\n0.000034 622\n0.000542 65\n0.496781 65\n0.208193 66\n0.183960 65\n0.199949 65\n0.320416 66\n0.151899 65\n0.175811 65\n2.607989 66\n0.200001 65\n0.191916 65\n0.183989 65\n0.183816 65\n0.768495 65\n0.128140 65\n0.499765 66\n0.050829 65\n0.049402 64\n0.050647 65\n0.051347 64\n2.529704 65\n0.159512 65\n0.176249 66\n0.176103 65\n0.175893 65\n0.176342 65\n0.207742 3\n0.359122 3\n0.500328 3\n0.049850 2\n0.049911 1\n0.050009 3\n0.049708 3\n0.050657 3\n0.050482 3\n0.050863 3\n0.260218 69\n0.561938 31\n0.131016 31\n0.152232 64\n0.216851 31\n0.159330 31\n0.151871 31\n0.144241 63\n0.192715 31\n0.087606 31\n0.152028 31\n0.155945 62\n0.101978 31\n0.101636 31\n0.152073 31\n0.136379 113\n0.827721 107\n0.038750 65\n0.005634 178\n0.546968 2\n0.222222 20\n0.113281 2\n0.799629 4\n0.338085 36\n0.081768 7\n0.000013 1595\n0.014867 81\n0.141387 81\n0.252853 81\n0.113207 83\n0.168319 106\n0.173597 87\n0.299364 76\n0.117970 76\n0.119111 133\n0.057180 181\n0.171417 97\n0.285624 90\n0.341356 81\n0.169954 81\n0.170346 82\n0.114268 83\n0.172625 83\n0.114890 126\n0.230409 83\n0.173492 140\n0.174033 86\n0.288856 170\n0.176843 94\n0.240971 83\n0.181781 82\n0.120336 142\n0.057048 212\n0.114946 81\n0.287498 171\n0.230443 76\n0.404237 83\n0.746026 82\n0.231304 83\n0.173084 85\n0.115229 170\n0.233698 94\n0.182060 83\n0.182646 82\n0.120705 142\n0.118392 212\n0.059323 99\n0.229247 85\n0.226605 88\n0.507312 123\n0.171742 81\n0.174193 144\n0.232773 88\n0.171724 90\n0.507186 165\n0.235507 92\n0.179370 81\n0.180137 81\n0.120086 137\n0.116575 224\n0.395827 114\n1.328510 87\n0.684751 7\n0.171110 48\n0.000034 36\n0.001395 209\n0.000071 360\n0.000424 2\n0.000030 96\n0.052869 18\n1.282411 23\n1.137179 2150\n0.708261 260\n0.730065 730\n0.000050 538\n0.000553 95\n0.415466 856\n0.000110 162\n0.000032 7\n0.000075 196\n0.000522 139\n0.444421 65\n0.000081 95\n0.611517 1151\n0.000464 64\n0.428891 64\n0.495501 64\n0.050350 64\n0.049671 65\n0.049997 64\n0.050532 64\n0.050238 64\n0.050928 64\n0.158409 64\n0.159729 174\n0.446114 205\n0.389000 64\n0.224055 8\n0.131624 2\n0.676263 28\n0.367297 5\n0.376320 28\n0.223639 51\n0.095686 3\n0.088553 28\n0.255750 28\n0.048602 28\n0.095210 2\n0.112174 49\n0.136771 38\n0.111854 3\n0.103923 207\n0.240480 41\n0.232267 41\n0.223541 41\n0.104278 41\n0.136947 41\n0.062997 41\n0.119647 497\n0.505374 422\n0.000045 43\n0.071176 41\n0.199703 57\n0.304386 28\n0.156430 99\n0.387988 8\n0.146637 305\n0.505547 222\n0.000040 56\n0.001218 47\n0.001111 46\n12.304025 28\n0.199794 28\n0.175831 55\n0.112200 28\n0.119920 28\n0.135937 28\n0.072187 28\n0.192030 28\n0.111920 28\n0.040252 28\n0.183824 28\n0.264318 28\n0.440299 28\n0.215411 28\n0.320379 28\n0.119575 28\n0.144302 28\n0.072368 28\n0.159758 28\n0.264114 28\n0.071804 28\n0.311891 33\n0.268034 8\n0.480628 116\n0.057706 110\n0.037838 65\n0.004555 75\n0.280580 155\n0.946394 842\n0.000180 95\n0.000595 143\n0.000036 297\n0.000526 100\n0.441430 834\n0.000050 2\n0.000028 55\n0.000026 138\n0.000028 596\n0.000795 64\n0.926143 64\n0.152998 64\n0.175939 64\n0.168780 64\n0.166716 64\n0.175919 64\n0.151917 65\n0.143937 64\n0.168001 136\n5.526434 207\n0.497295 3\n0.049560 275\n0.051386 67\n0.049782 286\n0.050209 3\n0.201896 362\n0.153331 67\n0.142982 177\n0.145186 90\n0.000085 3\n0.150555 177\n0.145146 185\n0.000083 67\n0.142823 177\n0.145339 166\n0.000034 67\n0.134811 177\n0.145199 113\n0.000087 3\n0.142698 272\n0.144569 67\n0.190898 84\n2.701401 92\n0.157313 493\n0.005865 602\n0.000419 72\n0.767771 65\n0.496616 64\n0.049987 64\n0.050072 64\n0.049816 64\n0.050189 64\n0.050502 64\n0.049718 61\n0.050493 82\n0.064673 829\n0.000106 517\n0.000507 389\n0.000073 64\n0.038403 65\n0.589607 64\n0.500702 64\n0.050371 64\n0.050116 64\n0.050663 64\n0.051224 64\n0.050567 64\n0.050107 61\n0.051865 256\n0.062241 665\n0.000046 240\n0.000073 267\n0.000496 65\n0.038735 64\n0.048259 64\n0.049939 64\n0.053730 64\n0.050863 64\n0.050111 64\n0.050454 64\n0.050379 64\n0.050918 61\n0.050227 102\n0.391779 843\n0.000047 389\n0.000528 64\n0.739427 64\n0.184135 64\n0.184556 64\n0.167554 64\n0.167694 64\n0.176087 65\n0.263519 35\n0.277536 120\n0.000919 47\n0.927364 5\n0.044056 962\n0.000048 442\n0.000200 237\n0.000131 75\n0.739861 65\n0.179394 64\n0.159680 64\n0.502398 64\n0.048624 65\n0.049936 64\n0.049954 64\n0.049846 64\n0.219134 64\n0.159935 99\n0.174086 804\n0.000046 196\n0.000030 632\n0.000776 65\n0.344747 65\n0.191876 65\n0.208578 65\n0.175318 65\n0.184253 66\n0.175853 65\n0.176207 65\n0.183940 65\n0.168106 41\n0.183898 22\n0.000052 4\n0.237931 976\n0.000045 110\n0.000599 142\n0.000030 179\n0.000088 240\n0.000274 65\n0.968750 99\n0.882446 8\n0.233891 28\n0.709020 28\n0.063079 28\n0.168090 28\n0.112859 28\n0.095144 59\n0.096256 3\n0.367878 28\n0.552187 28\n0.167741 28\n1.001004 55\n0.103214 28\n0.079928 28\n0.624072 28\n0.215910 28\n0.192233 28\n0.112263 28\n0.087470 28\n0.240483 66\n0.103706 28\n0.063991 28\n0.040081 28\n0.159933 28\n0.208159 190\n0.232202 41\n0.160925 41\n0.262933 41\n0.136144 56\n0.000820 47\n0.000908 59\n0.142529 41\n0.039739 41\n0.103871 41\n0.168725 41\n0.039573 41\n0.023632 57\n0.240523 36\n0.246304 3\n0.486970 116\n0.056690 175\n0.032650 75\n0.301823 62\n0.282366 2\n0.207350 25\n0.223758 149\n0.000121 64\n0.357927 64\n0.155249 64\n0.216051 63\n0.408288 63\n0.159699 63\n0.199638 64\n0.231951 64\n0.335896 63\n0.175744 63\n0.224223 64\n0.432109 64\n0.224070 64\n0.336454 63\n0.159947 63\n0.167902 63\n0.167715 63\n0.311774 7\n0.135973 37\n1.037017 4\n0.497851 4\n0.049554 8\n0.050124 1\n0.050812 3\n0.050141 46\n0.000093 1\n0.050128 4\n0.051261 4\n0.050093 4\n0.050152 4\n0.050554 4\n0.050458 4\n0.050285 4\n0.050713 4\n0.126344 4\n0.160712 6\n0.632145 28\n0.200516 28\n0.135072 28\n0.104162 55\n0.088214 28\n0.111790 28\n0.216156 28\n0.152236 28\n0.176108 28\n0.047875 28\n0.040078 28\n0.047380 28\n0.168606 28\n0.144021 28\n0.208119 28\n0.071601 28\n0.104217 28\n0.079998 28\n0.136019 28\n0.055908 52\n0.312138 37\n0.244562 28\n0.000109 64\n0.380129 65\n0.188742 419\n0.642453 513\n0.000045 208\n0.000085 1\n0.000479 85\n0.000034 96\n0.000400 188\n0.000037 93\n0.307176 832\n0.000049 797\n0.000549 597\n0.397431 414\n0.000083 74\n0.000476 1\n0.000032 88\n0.000030 91\n0.000038 3\n0.000348 241\n0.000038 5\n2.087570 958\n0.000052 6\n0.000031 667\n0.000872 199\n0.792947 747\n0.000051 1078\n0.000603 408\n0.653796 1539\n0.000493 25\n0.606137 1415\n0.000813 64\n0.498925 64\n0.264739 65\n0.214095 781\n1.649938 195\n0.000101 726\n0.000788 110\n0.164591 835\n0.000051 763\n0.000770 82\n0.455802 918\n0.000119 290\n0.000051 144\n0.000855 232\n0.000036 72\n0.366578 852\n0.000049 154\n0.000031 333\n0.000590 79\n0.603718 913\n0.000052 661\n0.000779 64\n0.787231 64\n0.493829 64\n0.050857 64\n0.051027 64\n2.917102 64\n0.500197 64\n0.050053 64\n0.050883 76\n0.472276 852\n0.000048 154\n0.000068 327\n0.000413 332\n0.524504 616\n0.000046 793\n0.000523 62\n1.169123 63\n0.500461 64\n0.049775 63\n0.050049 63\n0.050438 63\n0.049779 63\n0.203379 64\n0.175570 64\n0.176128 65\n0.279270 565\n0.262122 29\n0.160130 59\n0.000039 28\n0.188179 28\n0.207859 28\n0.032106 28\n0.368016 4\n0.368003 55\n0.152078 28\n0.264049 28\n0.144066 28\n0.455677 28\n0.184451 28\n0.023690 28\n0.031980 28\n0.064025 28\n0.048258 3\n0.304238 28\n0.247702 3\n0.087924 46\n0.296022 30\n0.053054 29\n0.000097 4\n0.447824 116\n0.177816 175\n0.043342 35\n0.746193 147\n0.000036 113\n0.618458 107\n0.036626 64\n0.000578 72\n0.261282 64\n0.496748 65\n0.050222 64\n0.049989 64\n0.050151 64\n0.049508 64\n0.050437 64\n5.730008 64\n0.192188 61\n0.207849 64\n0.392659 64\n0.231217 64\n0.200808 64\n0.247892 8\n0.543204 1\n0.126911 12\n0.849493 72\n0.000078 13\n0.041119 56\n0.000104 3\n0.933426 32\n1.764351 32\n0.455505 32\n0.120785 32\n0.167254 32\n3.984407 65\n1.305826 65\n0.571728 1\n0.134314 1\n0.499721 1\n0.050129 1\n0.050199 1\n0.049494 1\n0.050127 1\n0.050909 1\n0.049903 1\n0.050474 1\n0.049735 1\n0.049883 1\n0.050077 1\n0.050087 1\n0.049977 1\n0.049882 1\n0.050084 1\n0.050777 1\n0.051678 1\n0.049426 1\n0.049952 1\n0.050120 1\n0.050116 1\n0.049775 1\n0.051181 1\n0.049925 1\n0.050111 5\n0.739560 126\n0.241403 75\n0.458496 37\n0.349095 4\n0.499886 4\n0.051053 8\n0.048957 1\n0.050110 4\n0.052816 45\n0.000110 1\n0.048912 4\n0.050803 4\n0.051959 4\n0.050454 4\n0.050711 4\n0.050458 4\n0.050254 4\n0.050278 4\n0.051076 4\n0.050665 6\n0.191666 125\n0.608233 17\n0.491485 1\n0.143616 1\n0.160144 1\n0.175800 1\n0.191934 41\n0.252603 38\n0.425308 65\n0.344970 37\n0.221999 4\n0.500017 4\n0.049692 8\n0.050233 1\n0.049866 2\n0.049673 47\n0.000080 1\n0.050771 4\n0.050332 4\n0.051153 4\n0.050784 4\n0.051346 4\n0.050099 4\n0.082489 4\n0.019072 4\n0.051216 4\n0.049158 6\n0.193442 124\n0.577273 16\n0.386932 1\n0.499551 1\n0.049876 1\n0.050363 39\n0.332799 39\n0.127971 2\n0.291215 1\n0.111802 32\n0.692941 32\n0.088419 65\n0.346017 37\n0.285161 4\n0.500298 4\n0.049319 8\n0.050514 1\n0.050085 2\n0.049580 47\n0.000058 1\n0.051044 4\n0.049772 4\n0.049920 4\n0.049847 4\n0.051879 4\n0.049689 4\n0.049423 4\n0.051365 4\n0.049849 4\n0.050909 6\n0.051388 47\n0.690710 76\n0.001107 15\n0.456935 1\n0.119952 1\n0.607964 1\n0.159665 1\n0.160093 41\n0.501462 38\n0.296237 2\n0.242438 1\n0.127911 32\n0.575142 32\n0.205249 40\n0.211103 23\n0.000047 360\n0.415381 585\n0.000047 266\n0.000261 89\n0.000520 120\n0.000033 291\n0.000339 65\n0.281528 1\n0.286207 67\n0.890800 119\n0.368502 113\n1.742384 107\n0.043333 64\n0.004884 109\n6.474799 829\n0.000120 151\n0.000032 257\n0.000129 205\n3.149242 739\n0.000056 199\n0.000078 629\n0.000720 773\n0.508374 138\n0.000042 78\n0.000075 283\n0.000639 355\n0.000972 516\n0.604677 417\n0.000046 692\n0.000876 5\n0.625691 989\n0.000052 3\n0.000669 335\n0.000072 72\n0.000360 140\n0.000034 3\n0.000383 329\n0.000037 210\n0.615940 699\n0.000115 681\n0.000071 97\n0.000797 543\n0.000037 64\n2.590702 64\n0.493262 64\n0.049480 64\n0.050164 65\n0.049548 64\n0.050043 64\n0.051231 64\n0.049949 64\n0.050023 64\n0.050284 64\n0.050200 64\n0.050053 63\n0.050618 63\n0.049809 64\n0.209477 63\n0.216051 63\n0.159203 63\n0.160331 63\n0.543758 24\n0.151066 239\n0.000512 63\n0.458253 63\n0.166201 64\n0.176072 7\n0.159430 98\n0.266705 1\n0.323190 28\n0.339560 28\n0.119888 28\n0.159997 2\n0.089377 52\n0.000038 3\n0.190942 28\n0.127369 28\n0.232813 4\n0.375935 28\n0.080085 28\n0.079745 55\n0.080036 28\n0.120245 28\n0.087545 28\n0.176419 28\n0.104049 28\n0.063951 28\n0.047979 1\n0.168043 28\n0.128071 28\n0.103975 3\n0.079804 197\n0.160414 41\n0.231975 41\n0.152155 41\n0.127936 41\n0.088059 41\n0.080065 41\n0.087965 41\n0.135961 41\n0.056240 41\n0.039817 56\n0.247811 172\n0.136280 28\n0.007893 17\n0.664301 28\n0.151505 28\n0.063964 28\n0.128396 28\n0.063492 28\n0.096361 59\n0.072180 2\n0.119538 28\n1.791927 28\n0.184456 28\n0.159776 28\n0.136514 28\n0.375963 4\n0.479831 28\n0.175785 28\n0.912812 28\n0.103380 28\n0.104037 28\n0.063609 28\n0.144399 115\n0.622583 109\n0.044515 64\n0.000945 74\n0.333362 65\n0.496094 65\n0.054403 65\n0.051148 65\n0.050679 65\n0.051195 65\n0.050791 65\n0.050824 66\n0.050600 65\n0.050606 65\n0.051402 65\n0.050813 65\n0.050602 25\n0.068341 684\n0.000674 429\n0.000420 64\n0.032770 18\n0.543440 29\n0.000034 65\n0.028805 8\n0.206847 25\n0.375138 148\n0.000087 1\n0.168401 28\n0.330321 28\n0.175856 28\n0.096034 4\n0.288741 4\n0.103369 5\n0.112176 28\n0.079413 28\n0.128510 28\n0.151995 2\n0.072071 52\n0.000136 3\n0.231905 28\n0.079726 28\n0.144222 28\n0.056045 55\n0.103917 66\n0.071968 28\n0.079892 28\n0.168270 28\n0.096055 28\n0.048141 28\n0.055879 1\n0.143975 28\n0.176393 28\n0.111803 3\n0.079523 198\n0.152705 41\n0.207956 41\n0.111896 41\n0.144406 41\n0.096027 41\n0.119995 41\n0.087428 389\n0.509349 443\n0.000042 41\n0.411218 41\n0.087790 41\n0.079681 57\n0.232458 207\n0.088591 28\n0.008060 389\n0.513433 423\n0.000546 18\n0.013512 28\n0.208192 28\n0.079937 28\n0.095643 28\n0.088151 28\n0.088292 59\n0.071847 2\n0.071911 28\n0.081184 28\n0.142914 28\n0.080430 55\n0.087338 28\n0.088229 28\n0.111975 4\n0.272485 28\n0.223746 4\n0.255784 28\n0.160937 28\n0.087340 28\n0.136394 28\n0.087509 28\n0.032307 28\n0.167787 28\n0.175599 28\n0.112118 28\n0.063865 28\n0.071954 4\n0.728668 4\n0.163845 4\n0.107813 28\n0.255847 28\n0.312016 28\n0.176061 28\n0.104215 28\n0.263942 28\n0.033735 28\n0.158340 28\n0.152059 28\n0.056828 28\n0.022907 28\n0.384282 28\n0.167721 31\n0.094790 1\n0.381101 116\n0.089509 110\n0.037158 65\n0.005981 74\n0.522190 461\n2.390865 1\n0.003769 67\n0.000084 1\n0.000057 90\n0.000055 1\n0.000062 103\n0.000055 1\n0.000048 87\n0.000106 1\n0.000052 112\n0.000082 360\n0.000356 104\n0.000240 1\n0.000065 87\n0.000066 1\n0.000068 149\n0.000060 674\n0.907639 321\n0.000038 887\n0.000464 105\n0.000297 327\n0.000209 64\n1.586124 67\n1.015081 97\n0.157307 132\n0.000111 67\n0.166776 47\n0.192944 156\n0.000121 3\n0.238691 69\n0.465313 97\n0.000097 46\n1.295928 449\n0.008714 453\n0.000047 319\n0.000180 377\n0.000371 72\n1.317892 98\n0.313818 868\n0.000051 787\n0.000644 11\n0.509068 950\n0.000052 663\n0.000601 650\n0.041467 257\n0.000044 885\n0.000769 95\n0.046472 830\n0.000122 426\n0.000529 67\n0.048626 851\n0.000046 635\n0.000540 194\n0.042726 70\n0.000079 50\n0.048457 1\n0.050386 1\n0.049421 51\n0.054066 52\n0.047442 1\n0.002108 1\n0.050459 1\n0.056825 70\n0.327809 63\n0.158582 52\n0.128440 1\n0.192335 71\n0.231977 63\n0.119580 63\n0.224393 7\n0.289466 1\n0.454606 1\n0.000092 4\n0.311682 124\n0.352170 63\n0.600311 6\n0.241258 28\n0.414173 10\n0.407899 28\n0.047583 28\n0.112238 53\n0.057582 1\n0.110480 49\n0.472071 49\n0.104212 49\n0.095922 49\n0.127893 28\n0.047764 21\n0.000047 49\n0.176269 49\n0.120587 49\n0.135094 49\n0.224398 49\n0.128071 28\n0.151772 21\n0.000048 28\n0.112108 21\n0.000076 28\n0.056062 21\n0.000050 28\n0.095950 21\n0.000051 28\n0.151737 21\n0.000052 28\n0.047881 21\n0.000051 28\n0.015958 21\n0.000047 28\n0.240069 28\n0.176106 28\n0.184250 28\n0.087445 34\n0.080211 21\n0.000049 28\n0.096335 1\n0.087561 28\n0.136114 6\n0.328706 28\n0.031556 28\n0.176120 28\n0.095798 28\n0.056164 28\n0.167953 35\n0.121508 1\n0.680623 31\n0.000056 63\n0.277819 372\n0.738544 71\n1.174816 63\n0.142248 63\n0.143823 63\n0.160589 63\n0.167541 6\n0.735411 63\n0.433244 63\n0.175133 63\n0.183846 63\n0.176029 5\n0.562814 915\n0.000049 4\n0.000029 351\n0.000085 263\n0.000637 98\n1.808454 828\n0.000110 117\n0.000032 118\n0.000067 174\n0.000527 4\n0.535838 1\n0.000080 65\n0.000058 1\n0.000053 244\n0.000063 1\n0.000290 149\n0.000307 1\n0.000069 456\n0.000086 6\n0.000459 1\n0.000064 87\n0.000064 1\n0.000176 119\n0.000153 1\n0.000130 145\n0.000157 79\n0.000333 1\n0.000065 189\n0.000062 4\n0.140825 726\n0.000051 62\n0.620479 63\n0.499752 63\n0.050547 63\n0.051141 63\n0.050791 63\n0.050485 63\n0.050271 64\n0.050376 64\n0.050215 53\n0.052206 1\n0.048628 72\n0.461022 64\n2.375497 53\n0.201756 72\n0.334561 63\n0.280012 64\n0.368132 64\n0.840206 1\n0.154401 115\n0.862274 173\n0.035385 24\n19.598320 59\n0.000082 28\n0.157434 28\n0.320030 28\n0.471991 28\n0.264245 3\n0.207700 2\n0.272798 60\n0.000055 1\n0.136111 28\n0.808137 28\n0.191915 28\n0.079591 34\n0.096345 21\n0.000116 28\n0.087477 28\n0.144362 28\n0.031790 28\n0.185672 28\n0.110267 28\n0.023980 28\n0.152251 28\n13.560320 28\n0.455771 28\n0.072315 32\n0.162701 2\n0.538899 116\n0.177734 175\n0.044251 75\n1.381173 66\n0.726229 64\n5.455808 6\n0.915460 209\n0.000042 1\n0.296312 28\n0.965406 30\n0.025481 21\n0.000050 3\n0.150711 28\n0.111502 28\n0.168271 28\n0.104168 28\n0.103634 28\n0.152282 3\n0.121024 28\n0.559050 30\n0.040010 21\n0.000075 3\n0.119699 28\n0.392374 28\n0.239474 28\n0.096032 34\n0.095870 21\n0.000045 28\n0.112644 28\n0.223963 28\n0.143822 28\n0.224081 28\n0.008120 28\n0.024075 28\n0.055745 28\n0.783972 28\n0.282793 66\n0.358171 1\n0.188409 13\n0.117280 8\n0.235417 61\n0.361812 64\n0.143168 64\n0.127695 64\n0.143853 8\n0.154858 28\n0.261317 12\n0.280010 2\n0.120543 28\n0.407520 28\n0.119702 28\n0.127910 33\n0.031989 21\n0.000061 28\n0.240024 4\n0.744282 28\n0.227073 64\n0.348936 8\n0.139038 28\n0.244772 28\n0.183844 28\n0.176164 4\n0.320289 28\n0.167852 55\n0.104021 28\n0.103676 28\n0.544406 28\n0.175740 28\n0.103807 28\n0.056535 28\n0.159580 28\n0.064156 4\n0.368103 4\n0.103774 28\n0.096407 28\n0.216790 28\n0.206839 28\n0.079774 28\n0.128579 28\n0.023702 28\n0.240398 30\n0.043356 4\n0.354912 116\n0.041426 175\n0.060604 18\n0.146141 1\n0.501004 1\n0.051042 1\n0.048663 1\n0.050320 1\n0.050180 1\n0.050372 1\n0.050190 1\n0.050652 1\n0.050809 1\n0.050015 1\n0.050843 1\n0.050920 1\n0.051314 1\n0.050977 1\n0.050836 1\n0.167748 74\n0.149461 32\n0.059888 32\n0.089073 32\n0.224527 32\n0.110587 32\n0.095773 115\n0.088485 116\n0.343964 175\n0.033326 75\n0.417259 64\n0.132513 64\n0.151937 64\n0.136248 65\n0.216455 8\n0.326955 71\n1.112269 20\n3.108559 236\n0.000040 8\n0.119214 28\n0.308932 28\n0.159837 28\n0.095819 55\n0.087951 28\n0.104442 28\n0.071959 28\n0.039710 28\n0.200370 28\n0.079952 28\n0.040013 28\n0.152102 28\n0.103756 28\n0.120252 4\n0.400200 4\n0.095941 28\n0.359906 28\n0.095921 28\n0.168476 28\n0.103802 28\n0.063749 28\n0.128822 28\n0.055226 28\n0.208180 28\n1.008013 28\n0.399890 4\n0.336158 28\n0.120019 28\n0.103821 28\n0.111897 28\n0.160280 28\n0.223914 35\n0.259615 2\n0.544525 38\n0.000034 3\n0.313987 116\n0.025481 175\n0.036709 20\n0.510088 236\n0.000041 99\n0.133041 8\n0.163288 28\n0.364748 28\n0.168054 28\n0.095954 55\n0.087834 28\n0.079774 28\n0.112325 28\n0.128193 28\n0.168005 28\n0.111989 28\n0.031959 28\n0.143943 28\n0.263905 30\n0.035770 4\n0.619285 116\n0.065455 110\n0.044805 65\n0.027690 74\n0.145803 52\n0.216535 239\n0.000042 8\n0.144322 64\n1.367115 65\n0.141029 64\n0.527691 65\n0.303982 64\n0.751985 65\n0.177541 116\n3.295512 175\n0.039388 74\n0.483711 65\n0.156080 66\n1.483526 28\n0.013025 28\n0.152028 28\n0.080039 4\n0.448268 4\n0.135598 4\n0.144253 12\n0.120061 28\n0.175864 28\n0.063716 28\n0.176240 55\n0.096001 28\n0.223972 28\n0.408017 28\n0.175983 28\n0.111975 28\n0.184131 28\n0.199866 28\n0.247987 28\n0.031956 28\n0.144159 28\n0.056279 28\n0.231717 28\n0.159932 28\n0.087913 28\n0.240175 28\n0.464171 28\n0.255759 28\n0.128153 28\n0.247977 28\n0.240170 28\n0.271980 35\n0.332035 8\n1.001823 1\n1.432310 65\n0.011987 62\n0.428878 1\n0.111312 1\n0.501050 1\n0.050315 1\n0.050578 1\n0.051183 1\n0.050753 42\n0.225822 8\n0.150604 28\n1.105301 28\n0.183940 28\n0.039955 28\n0.128136 28\n0.025266 28\n0.158720 3\n0.128032 55\n0.289183 3\n0.095232 28\n0.071837 28\n0.119996 28\n0.136490 28\n0.087307 28\n0.056425 4\n0.192391 4\n0.128157 4\n0.143607 4\n0.143915 8\n0.120350 28\n0.079372 28\n0.136113 28\n0.129011 28\n0.103261 49\n0.096112 116\n0.510937 175\n0.046340 74\n0.469013 65\n2.187945 65\n0.191997 1\n0.247134 1\n0.501200 1\n0.049947 1\n0.049775 1\n0.050425 1\n0.049653 1\n0.049794 1\n0.050205 1\n0.049744 1\n0.050097 1\n0.050921 1\n0.050166 1\n0.051031 1\n0.147811 70\n0.171407 32\n0.461634 3\n0.254095 40\n0.113792 32\n0.047961 32\n0.088061 32\n0.207930 32\n0.056306 32\n0.351712 32\n0.088153 32\n0.271869 32\n0.120006 32\n0.095619 115\n0.120604 116\n0.456050 110\n0.045163 65\n0.003924 75\n0.361938 64\n0.148052 65\n0.937993 65\n0.526309 66\n0.159795 64\n0.209430 65\n0.694428 66\n0.136383 65\n0.167732 64\n0.159832 25\n0.396287 149\n0.000045 207\n0.141355 64\n0.217710 65\n0.128823 28\n0.268431 28\n0.167856 28\n0.128482 55\n0.055625 28\n0.135867 116\n1.016664 110\n0.032399 65\n0.001340 15\n1.434284 914\n0.000043 623\n0.000565 98\n0.142871 828\n0.000042 410\n0.000605 64\n0.178139 931\n0.000117 778\n0.000584 307\n0.231417 667\n0.000040 654\n0.000578 369\n0.338103 538\n0.000101 880\n0.000584 97\n0.132039 831\n0.000057 128\n0.000032 181\n0.000601 116\n0.000035 67\n0.142625 851\n0.000048 6\n0.000278 433\n0.001147 196\n0.000207 1\n0.133758 1064\n0.000113 103\n0.000037 62\n0.547047 63\n0.499255 63\n0.049868 63\n0.050197 63\n0.049930 63\n0.051537 63\n0.050431 64\n0.050069 64\n0.050652 65\n0.050287 64\n0.051004 64\n0.050144 64\n0.050641 8\n0.232457 66\n0.332350 28\n0.012671 28\n0.312007 28\n0.120075 28\n0.056066 28\n0.143937 28\n0.351931 4\n0.256299 28\n0.159685 28\n0.152267 28\n0.216003 28\n0.216166 28\n0.175988 28\n0.047998 28\n0.135960 28\n0.320220 49\n0.504070 103\n0.002185 46\n0.213836 28\n0.463414 4\n0.472746 28\n0.359487 28\n0.120052 28\n0.192113 4\n0.527898 28\n0.202092 28\n0.101937 28\n0.248150 35\n0.292004 2\n0.340157 30\n0.000063 28\n0.288617 28\n0.471285 28\n0.128156 28\n0.215343 4\n0.328548 4\n0.095915 28\n0.167957 28\n0.239845 33\n0.375662 44\n0.132888 8\n0.481700 116\n0.177701 175\n0.042317 74\n0.248604 25\n0.344526 157\n0.000041 8\n0.168298 62\n0.504425 64\n1.658177 65\n0.433021 65\n0.167904 8\n0.311777 62\n0.915047 61\n0.141093 8\n1.444313 28\n0.916296 28\n0.063896 28\n0.104546 28\n0.439537 28\n0.024092 28\n0.184002 28\n0.175908 28\n0.081206 28\n0.398648 3\n0.128324 28\n0.087658 8\n0.320614 1\n0.500116 4\n0.049716 4\n0.050091 4\n0.049988 4\n0.050468 4\n0.050407 4\n0.051204 4\n0.050460 4\n0.115436 28\n0.295770 2\n0.120011 28\n0.063647 3\n0.160334 64\n0.120839 3\n0.087793 28\n1.232320 28\n0.199847 28\n0.087671 55\n0.080672 28\n0.144102 28\n0.031605 28\n0.160066 66\n0.103881 28\n0.096066 28\n0.152174 28\n0.208513 28\n0.039250 28\n0.128032 28\n0.080336 28\n0.303762 28\n0.256001 28\n0.168949 66\n0.368017 73\n0.615736 28\n0.247403 28\n0.336269 28\n0.263981 28\n0.143678 49\n0.504660 4\n0.319884 4\n0.095801 4\n0.112230 28\n0.471435 4\n0.280524 28\n0.288432 4\n0.287552 28\n0.183830 28\n0.079735 28\n0.136020 4\n0.512015 28\n0.191874 28\n0.144427 28\n0.208006 35\n0.276055 36\n0.819954 3\n0.167796 33\n0.504562 29\n0.000040 28\n0.003572 28\n0.147796 28\n0.079877 55\n0.088735 28\n0.111387 28\n0.087959 28\n0.160329 28\n0.127749 28\n0.072451 28\n0.151666 28\n0.200141 28\n0.062857 28\n0.113012 28\n0.056201 28\n0.288214 28\n0.327764 28\n0.104046 28\n0.200270 28\n0.215873 49\n0.504882 56\n0.001102 47\n0.001201 46\n0.076690 28\n0.239899 33\n0.332854 8\n0.439913 116\n0.049885 175\n0.037143 75\n0.463149 33\n0.504919 29\n0.000050 65\n1.633809 64\n0.136113 65\n0.423838 1\n0.223650 1\n0.499813 1\n0.049810 1\n0.050252 1\n0.049700 1\n0.049909 1\n0.051365 1\n0.049597 1\n0.050631 1\n0.050751 1\n0.049498 1\n0.049960 1\n0.142325 1\n0.208227 37\n0.205686 59\n0.000042 32\n0.497840 32\n0.051288 32\n0.049461 32\n0.051020 32\n0.051727 32\n0.048991 32\n0.050560 32\n0.050872 32\n0.050865 32\n0.049624 32\n0.050528 32\n0.050947 32\n0.050857 32\n0.051088 32\n0.050892 32\n0.050610 32\n0.050360 32\n0.051162 32\n0.050893 56\n0.146896 25\n0.000089 32\n0.167807 32\n0.152198 32\n0.143837 24\n0.487833 21\n0.000082 64\n0.770750 65\n0.963993 116\n0.680526 110\n0.038362 65\n0.003990 75\n0.905136 71\n2.227191 75\n5.516588 89\n0.536384 59\n0.000042 8\n0.315359 99\n0.354131 8\n0.147119 28\n0.211525 28\n0.199970 28\n1.231916 55\n0.112699 28\n0.111500 28\n0.247960 28\n0.159847 28\n0.152250 28\n0.095686 102\n1.121961 29\n0.000104 1\n0.765695 49\n0.003720 53\n0.000520 382\n0.000036 466\n0.000033 104\n0.000369 211\n0.000031 3\n0.000306 371\n0.000034 5\n0.420852 1021\n0.000050 362\n0.000588 5\n1.190038 927\n0.000103 606\n0.000567 97\n0.167345 808\n0.000052 1\n0.000078 321\n0.000520 115\n0.000406 253\n0.000038 11\n1.098832 928\n0.000047 464\n0.000679 229\n0.293795 681\n0.000046 460\n0.000562 180\n0.339210 758\n0.000048 2\n0.000076 387\n0.001215 99\n1.145919 29\n0.000040 1486\n0.577140 4\n1.533683 4\n0.135766 4\n0.136057 4\n0.135879 28\n0.311760 28\n0.160164 28\n0.127969 28\n0.087678 28\n0.144247 28\n0.208025 28\n0.079913 28\n0.240344 28\n0.081249 28\n0.094554 28\n0.136536 28\n0.247519 28\n0.120015 28\n0.112318 28\n0.143824 28\n0.120959 28\n0.079220 28\n0.151845 28\n0.328192 28\n0.111997 28\n0.361458 28\n0.150560 28\n0.159765 28\n0.296183 28\n0.232341 35\n0.421628 36\n0.249849 28\n0.296003 28\n0.295948 50\n0.503661 56\n0.001292 47\n0.002344 46\n0.381472 28\n0.231627 33\n0.253538 40\n0.119292 8\n0.456647 116\n0.081706 175\n0.038679 63\n0.504224 75\n3.269619 65\n0.522808 267\n1.148646 25\n0.132271 74\n0.000041 25\n0.904108 74\n0.000077 100\n0.160343 65\n0.509566 65\n0.153393 264\n0.521751 8\n0.548474 28\n4.242911 28\n0.488017 66\n0.311778 69\n0.520351 4\n0.135802 12\n0.152221 28\n0.927358 28\n0.263996 66\n0.104440 28\n0.071963 28\n0.136412 28\n0.207152 28\n0.048064 28\n0.055798 28\n0.232308 28\n0.191908 28\n0.208336 1\n0.104408 61\n0.160067 3\n0.127888 28\n1.264234 28\n0.167946 28\n0.401675 28\n0.342027 28\n0.736295 1\n0.144005 28\n0.507356 28\n0.148353 28\n0.248672 28\n0.207732 62\n2.954047 61\n0.147951 8\n0.615502 25\n0.946066 74\n0.000102 8\n0.163152 28\n0.635707 28\n0.176206 28\n0.111462 28\n0.072618 28\n0.055537 28\n0.032151 28\n0.273673 28\n0.214663 28\n0.199953 3\n0.119763 59\n0.144488 1\n0.047904 28\n0.328051 28\n0.864160 28\n0.208052 28\n0.207987 28\n0.191761 3\n0.104075 28\n0.103728 28\n0.184372 28\n0.360194 28\n0.200011 115\n0.775805 109\n0.033983 65\n0.004456 17\n1.895275 101\n0.252234 29\n0.000038 1556\n0.592161 142\n0.915215 768\n0.000041 454\n0.000659 169\n0.270413 750\n0.000046 551\n0.000527 600\n0.160078 465\n0.000036 291\n0.000553 36\n0.161689 913\n0.000047 188\n0.000027 334\n0.000745 98\n0.180525 806\n0.000050 343\n0.000546 95\n0.266318 902\n0.000045 343\n0.000577 80\n0.000060 49\n0.232067 834\n0.000046 77\n0.000039 573\n0.332842 562\n0.000046 2\n0.501750 906\n0.000052 95\n0.000026 362\n0.000755 166\n0.161701 749\n0.000088 574\n0.001201 344\n0.159786 895\n0.000464 242\n0.359624 1\n0.000179 61\n0.000104 1\n0.000115 268\n0.000103 1\n0.000138 1\n0.000104 1\n0.000087 85\n0.000107 1\n0.000126 76\n0.000109 1\n0.000165 49\n0.000124 1\n0.000129 178\n0.000375 95\n0.000446 1\n0.000203 48\n0.000172 354\n0.000500 64\n0.417761 64\n0.495616 65\n0.050433 64\n0.050147 64\n0.050161 64\n0.049580 64\n0.050338 64\n0.050556 64\n0.050800 64\n0.050807 64\n0.050296 63\n0.050448 64\n0.180289 63\n0.175612 63\n0.279874 66\n0.859084 329\n0.499820 3\n0.049209 265\n0.052126 67\n0.050124 299\n0.051778 3\n0.049133 184\n0.051125 3\n0.049474 280\n0.051629 3\n0.049934 258\n0.050510 3\n0.185793 250\n0.136769 66\n0.143573 145\n0.144175 3\n0.150901 101\n1.009048 29\n0.000036 1578\n0.473582 63\n0.465013 65\n0.443634 197\n0.275877 69\n0.108502 45\n1.132675 5\n0.010096 468\n0.000148 464\n0.000041 178\n0.001046 75\n0.826265 65\n0.165254 64\n0.499851 61\n0.050011 64\n0.049850 64\n0.050177 64\n0.050004 65\n0.050798 62\n0.049937 64\n0.050997 25\n0.053695 854\n0.000457 65\n0.046515 62\n0.050744 64\n0.049457 115\n0.491882 109\n0.046235 64\n0.004455 17\n0.299498 102\n0.203687 29\n0.000039 1301\n0.176814 63\n0.438363 63\n0.382060 160\n1.249698 52\n1.951270 45\n0.001884 12\n0.048071 2\n0.896779 1\n0.541357 1\n0.844513 4\n0.475936 2\n0.407917 4\n0.216014 1\n0.335725 160\n0.274910 2\n1.055963 211\n0.573802 185\n1.810106 8\n1.677318 1\n0.000053 71\n0.144237 14\n0.159897 13\n0.151748 1\n0.000035 14\n0.160637 12\n0.159491 8\n0.143895 4\n0.152073 8\n0.328331 1\n0.151835 5\n0.000063 63\n0.616148 63\n0.498399 63\n0.050736 41\n0.050348 21\n0.000033 108\n0.054924 827\n0.000050 492\n0.000498 64\n0.046493 64\n0.049736 64\n0.495136 64\n0.500815 64\n0.050298 64\n0.200796 64\n0.152793 64\n0.175384 6\n0.223820 156\n0.402890 35\n0.606586 121\n0.000441 2\n0.170025 4\n0.309481 2\n0.287978 93\n0.223857 29\n0.000052 3\n0.159973 41\n0.103709 41\n0.168389 41\n0.047683 41\n0.071891 2\n0.136691 41\n0.063682 41\n0.048663 41\n0.103589 41\n0.103755 41\n0.071704 41\n0.080347 41\n0.087774 2\n0.103893 41\n0.136687 41\n0.159668 41\n0.120051 41\n0.072122 41\n0.040083 41\n0.121403 41\n0.174630 41\n0.184868 115\n0.318400 109\n0.035957 65\n0.013986 181\n1.165725 2\n0.414177 20\n0.129255 2\n0.391472 36\n0.307197 7\n0.000013 1595\n0.015401 81\n0.463234 81\n0.174813 81\n0.119581 83\n0.175295 106\n0.236809 87\n0.302719 76\n0.120597 178\n0.179021 181\n0.232912 97\n0.296268 90\n0.236666 122\n0.236557 81\n0.178655 132\n0.118460 81\n0.176655 81\n0.232226 82\n0.173649 83\n0.117086 83\n0.115963 86\n0.236604 170\n0.179913 94\n0.246811 83\n0.125502 82\n0.184859 142\n0.058233 212\n0.177761 99\n0.471060 91\n0.234167 77\n0.231947 125\n0.233647 108\n0.237579 125\n0.412793 83\n0.118971 136\n0.236083 89\n0.117106 88\n0.177344 88\n0.116718 90\n0.117528 165\n0.237633 92\n0.184721 81\n0.126755 81\n0.186109 137\n0.120087 224\n0.176836 7\n0.417341 48\n0.000070 36\n0.001373 209\n0.000070 395\n0.000363 96\n0.051945 18\n1.235365 23\n0.609525 9\n2.542757 1731\n0.004171 103\n1.263501 29\n0.000041 1646\n0.361019 181\n1.017314 412\n0.000131 146\n0.339418 821\n0.000054 74\n0.000030 356\n0.000738 212\n0.428693 747\n0.000052 110\n0.000087 333\n0.000543 331\n0.495349 748\n0.000047 517\n0.000707 360\n0.575272 719\n0.000048 333\n0.000593 448\n0.403113 640\n0.000045 507\n0.000580 64\n0.895021 63\n0.498651 63\n0.054365 63\n0.049919 63\n0.050148 63\n0.051344 64\n0.050155 64\n0.172366 64\n0.160065 25\n7.356850 95\n0.000035 133\n0.000544 8\n0.288392 85\n0.510802 29\n0.000049 28\n0.348387 28\n0.344302 28\n0.359976 1\n0.192735 62\n0.167241 3\n0.152317 28\n0.384047 28\n0.199925 28\n0.103740 55\n0.104078 28\n0.144147 28\n0.392200 28\n0.071912 28\n0.216022 28\n0.111739 28\n0.049060 28\n0.151027 46\n0.623949 39\n0.510685 29\n0.000052 28\n1.249595 28\n0.136070 30\n0.124771 29\n0.000107 4\n0.496003 116\n0.161782 175\n0.053606 91\n0.511335 29\n0.000143 18\n0.112940 102\n0.245056 29\n0.000103 84\n1.831785 181\n0.380766 2\n0.269811 20\n0.105683 2\n0.199419 36\n0.291917 7\n0.000013 1595\n0.014405 81\n0.144738 81\n0.177814 81\n0.170352 83\n0.120452 106\n0.341395 87\n0.235071 76\n0.119385 76\n0.119250 133\n0.116212 181\n0.115929 97\n0.291091 90\n0.460918 122\n0.114963 81\n0.117862 132\n0.115211 81\n0.173127 81\n0.173466 82\n0.170937 83\n0.114788 83\n0.172182 86\n0.174828 170\n0.177490 94\n0.181710 83\n0.180653 82\n0.121367 142\n0.120903 212\n0.060252 81\n0.232441 171\n0.230613 124\n0.346846 83\n0.351020 83\n0.117870 107\n0.514722 82\n0.233598 83\n0.116106 85\n0.175157 170\n0.178257 94\n0.181560 83\n0.121790 82\n0.181182 142\n0.116812 212\n0.057923 99\n0.228080 85\n0.229680 124\n0.174484 82\n0.175562 172\n0.177749 88\n0.172875 88\n0.171707 90\n0.115038 165\n0.231607 92\n0.182104 81\n0.182679 81\n0.122767 137\n0.117353 224\n0.117107 7\n0.174106 12\n0.000033 36\n0.000032 36\n0.001531 115\n0.000034 491\n0.000276 96\n0.054065 1\n0.133676 18\n0.847764 2\n2.232811 36\n0.293424 7\n0.000014 1595\n0.014539 7\n2.379116 12\n0.000032 36\n0.000028 36\n0.001423 209\n0.000037 108\n0.000144 309\n0.000260 4\n0.000027 96\n0.051642 18\n0.258558 23\n0.129498 2129\n0.436214 25\n1.129513 149\n0.000438 8\n0.230955 28\n0.772711 3\n0.095875 45\n0.176217 1\n0.119992 28\n0.087983 28\n0.143806 28\n0.064408 55\n0.103730 28\n0.079901 28\n0.080080 28\n0.240024 28\n0.007667 4\n0.352425 4\n0.103802 28\n0.088360 28\n0.207807 4\n0.327969 28\n0.183967 28\n0.063936 28\n1.056663 28\n0.279493 28\n0.023835 28\n0.136289 28\n0.079979 28\n0.231996 28\n0.143914 28\n0.071900 46\n0.232294 28\n0.488323 28\n0.127911 28\n0.295739 30\n0.309206 29\n0.000084 3\n0.351600 116\n0.082137 175\n0.047454 35\n0.207348 147\n0.000120 113\n0.344959 171\n0.041728 179\n0.261469 2\n0.326524 20\n0.113470 2\n0.167977 36\n0.376658 7\n0.000014 1595\n0.014538 81\n0.363852 81\n0.171487 81\n0.113869 83\n0.115002 106\n0.229468 87\n0.236489 76\n0.118763 76\n0.119828 133\n0.117450 181\n0.172961 97\n0.230006 90\n0.289184 122\n0.116661 81\n0.117365 132\n0.117384 81\n0.231549 81\n0.173508 82\n0.116840 83\n0.172957 84\n0.230029 85\n0.347677 170\n0.176965 94\n0.182327 83\n0.121265 82\n0.180921 142\n0.116712 212\n0.171666 99\n0.518808 85\n0.228184 124\n0.174248 82\n0.177318 172\n0.233299 88\n0.174633 88\n0.172950 90\n0.172149 165\n0.176526 92\n0.184407 81\n0.122499 81\n0.120691 137\n0.177014 224\n0.115937 172\n0.294006 57\n0.289814 87\n0.113636 57\n0.339809 87\n0.230365 92\n0.231079 57\n0.114102 88\n0.057404 59\n0.454966 57\n0.637233 59\n0.508936 57\n0.628305 68\n0.229600 59\n0.283602 57\n0.626682 59\n0.508194 57\n0.632442 59\n0.511759 79\n0.286702 7\n0.196007 12\n0.000033 36\n0.000031 96\n0.052673 18\n0.419116 23\n0.137481 1893\n0.395688 759\n1.247747 843\n0.000592 442\n0.784949 519\n0.000108 175\n0.000063 422\n0.000551 100\n4.212925 29\n0.000038 1466\n1.360570 103\n5.919141 29\n0.000042 28\n0.004341 4\n0.784483 1655\n0.356441 201\n0.832110 666\n0.000087 213\n0.700415 1281\n0.000424 1587\n3.397226 334\n0.960411 676\n0.000048 498\n0.000602 273\n0.166846 655\n0.000048 154\n0.000032 336\n0.000528 83\n0.177814 913\n0.000051 664\n0.000922 104\n0.497122 804\n0.000048 776\n0.000691 111\n0.051657 812\n0.000045 710\n0.000584 696\n0.055562 330\n0.000040 2\n0.000075 852\n0.000457 12\n0.000030 291\n0.000074 195\n0.000315 893\n0.046750 46\n0.000032 2\n0.000076 132\n0.000458 401\n0.000036 402\n0.000389 23\n0.043310 675\n0.000513 1\n0.000073 42\n0.000055 1\n0.000061 56\n0.000052 1\n0.000051 43\n0.000053 1\n0.000062 40\n0.000054 103\n0.000183 1\n0.000064 227\n0.000062 396\n0.048995 495\n0.000039 279\n0.000040 606\n0.047438 410\n0.000045 24\n0.049057 353\n0.000084 61\n0.000408 1\n0.045602 27\n0.003093 28\n0.000043 1\n0.046465 1\n0.050627 1\n0.051958 1\n0.049017 1\n0.050949 166\n0.196923 827\n0.000169 323\n0.000047 84\n0.543708 1173\n0.000548 25\n1.552591 648\n0.000766 133\n0.000563 313\n0.000036 261\n0.499223 659\n0.000111 926\n0.000467 559\n0.000472 1\n0.051270 907\n0.000045 365\n0.000526 156\n0.000065 3\n0.000416 365\n0.000074 1\n0.048357 93\n0.000080 1\n0.000055 570\n0.000152 1\n0.000072 87\n0.000053 1\n0.000049 87\n0.000053 1\n0.000050 120\n0.000119 2\n0.000221 1\n0.000052 149\n0.000062 1\n0.000052 100\n0.000054 1\n0.000059 90\n0.000056 207\n0.000194 1\n0.000077 236\n0.000098 11\n0.049164 950\n0.000050 663\n0.000512 369\n0.050075 538\n0.000040 885\n0.000620 94\n0.049904 959\n0.000100 283\n0.000486 5\n0.048326 937\n0.000054 7\n0.000079 354\n0.000030 282\n0.000533 136\n0.049939 820\n0.000097 135\n0.000034 284\n0.000077 270\n0.049211 741\n0.000045 174\n0.000546 133\n0.046086 67\n0.000037 1\n0.047996 24\n0.001390 25\n0.000090 1\n0.050780 1\n0.050309 1\n0.050065 1\n0.049931 1\n0.050422 126\n0.428427 369\n0.000081 1\n0.000472 536\n0.000576 110\n1.067614 949\n0.000112 48\n0.000083 258\n0.000516 156\n1.699486 794\n0.000041 59\n0.000072 568\n0.000474 98\n1.389757 1228\n0.000826 64\n0.502586 931\n0.000119 367\n0.000031 112\n0.000029 300\n0.000689 307\n0.052898 667\n0.000040 654\n0.000529 316\n0.046896 629\n0.000044 764\n0.000609 5\n0.050931 936\n0.000073 437\n0.000504 385\n0.000277 5\n0.053377 971\n0.000051 898\n0.000517 556\n0.000432 4\n0.051898 1\n0.000074 48\n0.000054 1\n0.000048 56\n0.000049 1\n0.000047 43\n0.000046 1\n0.000047 142\n0.000051 1\n0.000047 683\n0.000080 98\n0.000123 107\n0.000262 1\n0.000052 48\n0.000048 1\n0.000046 130\n0.000050 1\n0.000046 184\n0.000053 25\n0.045508 970\n0.000696 123\n0.048472 787\n0.000048 250\n0.000030 857\n0.047678 247\n0.000103 1\n0.044950 55\n0.003545 1\n0.045832 1\n0.050963 1\n0.050214 1\n0.050701 301\n0.216003 1015\n0.000539 84\n1.734215 1173\n0.000539 63\n1.555065 63\n0.499300 63\n0.050364 63\n0.050669 63\n0.050577 63\n0.050408 63\n0.050390 64\n0.050826 64\n0.049836 64\n0.049596 65\n0.050773 64\n0.050465 64\n0.049786 8\n0.513977 25\n0.421167 148\n0.000040 1\n0.590791 28\n0.341110 28\n0.064172 28\n0.103860 28\n0.208060 28\n0.103937 2\n0.119873 54\n0.000030 2\n0.232592 28\n0.935470 28\n0.216242 28\n0.136174 28\n0.111729 28\n0.240044 28\n0.168830 103\n0.003357 46\n0.123891 28\n0.112285 28\n0.063970 28\n0.160094 116\n0.519347 110\n0.028838 65\n0.004870 74\n0.337650 65\n0.495934 65\n0.051377 65\n0.051216 65\n0.050470 64\n0.051035 61\n3.316287 837\n0.000054 209\n0.000031 65\n1.843754 65\n0.199592 64\n0.184151 65\n0.499684 65\n0.050154 65\n0.050086 65\n0.049871 65\n0.051923 65\n0.218508 66\n0.192004 28\n0.282296 968\n0.000108 575\n0.000716 65\n5.916939 66\n0.500007 64\n0.050277 64\n0.361677 64\n0.500379 64\n0.051060 64\n0.050858 63\n0.050467 64\n0.051542 64\n0.050359 81\n2.137369 843\n0.000048 253\n0.000581 66\n0.227368 65\n0.536114 64\n0.500832 64\n0.050505 64\n0.050182 63\n0.049076 64\n0.050050 64\n0.050497 64\n0.481424 64\n1.909029 64\n0.160101 64\n0.167993 61\n0.153514 1\n0.000037 1\n0.000022 16\n0.000020 1\n0.000020 86\n0.000025 1\n0.000127 478\n0.000081 1\n0.000048 40\n0.000066 1\n0.000049 239\n0.000060 90\n0.000119 1\n0.000049 183\n0.000052 66\n0.367696 65\n0.704308 65\n0.255590 65\n0.303955 69\n1.356423 4\n0.164854 4\n0.168177 4\n0.159757 4\n0.176022 4\n0.159775 4\n0.176334 4\n0.152076 4\n0.167988 6\n0.143841 1\n0.000032 28\n0.200177 28\n0.175563 28\n0.200789 55\n0.095289 28\n0.087729 28\n0.305023 28\n0.199588 28\n0.047647 28\n0.112063 28\n0.095971 28\n0.104099 28\n0.104401 28\n0.111285 28\n0.048256 28\n0.144397 28\n0.191656 28\n0.184128 28\n0.191907 28\n0.127923 47\n0.072247 34\n0.228795 8\n0.368909 116\n0.049504 175\n0.038815 74\n1.181179 65\n0.495415 64\n0.050536 65\n0.050629 62\n0.052962 64\n0.049642 120\n0.054174 874\n0.000080 158\n0.000504 65\n0.045489 65\n0.050571 64\n0.050563 65\n0.051008 65\n0.588099 65\n0.500226 65\n0.051005 65\n0.050861 65\n0.050814 66\n0.051078 28\n0.061440 968\n0.000048 575\n0.000775 65\n0.039678 64\n0.053582 65\n0.047609 64\n0.556955 65\n0.500685 65\n0.049677 65\n0.049519 66\n0.050493 64\n0.049453 64\n0.050124 64\n0.051148 64\n0.050203 64\n0.051802 63\n0.049850 64\n0.050157 64\n0.050649 81\n0.054802 888\n0.000043 3\n0.000601 144\n0.000032 106\n0.000069 66\n1.842906 65\n0.499987 64\n0.050985 64\n0.051121 64\n0.049863 63\n0.050890 64\n0.051045 64\n0.050197 64\n0.051400 64\n0.050295 1245\n0.055792 71\n1.701595 181\n1.424750 2\n0.310197 20\n0.449401 2\n0.391427 36\n0.312659 7\n0.000013 1595\n0.015610 81\n0.358291 81\n0.176447 81\n0.175533 83\n0.118331 106\n0.239651 87\n0.305731 76\n0.122852 178\n0.181623 76\n0.175949 181\n0.352013 97\n0.175406 90\n0.296037 81\n0.177004 123\n0.178212 81\n0.242121 137\n0.118852 81\n0.118539 82\n0.178299 83\n0.176162 83\n0.117340 86\n0.175163 170\n0.180525 94\n0.188311 83\n0.125552 82\n0.186178 320\n0.122609 81\n0.240932 171\n0.176501 82\n0.764349 83\n0.119181 85\n0.178378 170\n0.121829 94\n0.250928 83\n0.126598 82\n0.127281 189\n0.122323 81\n0.469542 155\n0.062605 320\n0.122552 99\n0.175793 85\n0.295276 124\n0.295287 82\n0.181487 172\n0.155891 88\n0.192593 88\n0.141726 90\n0.176285 165\n0.181081 92\n0.249336 81\n0.187313 171\n0.184183 224\n0.236556 172\n0.359806 87\n0.118958 57\n0.175397 87\n0.476745 85\n0.118665 74\n0.476926 68\n1.247846 122\n1.474390 83\n0.241808 188\n0.178497 81\n0.352287 85\n0.116762 87\n0.176729 115\n0.239831 87\n0.123026 93\n0.432741 187\n0.058457 91\n0.351874 115\n0.179463 358\n0.246291 152\n0.420053 57\n0.178712 87\n0.117093 57\n0.233994 85\n0.178313 74\n0.177824 74\n0.177728 68\n0.292218 124\n1.001507 85\n1.007157 202\n0.239842 7\n0.139459 12\n0.000028 36\n0.000388 96\n0.050972 18\n0.306378 23\n0.097435 1805\n0.675040 66\n0.575933 250\n0.420865 380\n0.000082 186\n0.000765 33\n0.346249 914\n0.000118 751\n0.000128 729\n0.000731 1\n0.468443 970\n0.000052 875\n0.000767 98\n0.165547 868\n0.000118 339\n0.000032 351\n0.000609 114\n0.522068 852\n0.000048 598\n0.000556 449\n0.157914 538\n0.000039 830\n0.000633 98\n1.690571 832\n0.000040 123\n0.000030 193\n0.000593 237\n0.458529 723\n0.000049 156\n0.000028 142\n0.000028 301\n0.000666 190\n0.592443 765\n0.000104 173\n0.000041 247\n0.000036 359\n0.727489 610\n0.000047 133\n0.000029 169\n0.000612 63\n1.689595 63\n0.190478 63\n0.184411 63\n0.159390 63\n0.168224 63\n0.336036 3\n0.310961 3\n0.499986 3\n0.050086 3\n0.050110 3\n0.051103 3\n0.049817 2\n0.050683 1\n0.050183 3\n0.050704 3\n0.050578 3\n0.192866 3\n0.208176 1\n0.694161 93\n0.000039 65\n0.496071 68\n0.050011 68\n0.049992 68\n0.049916 68\n0.050016 68\n0.050175 62\n0.051154 1\n0.050562 62\n0.000097 64\n0.050410 64\n0.049771 61\n0.160090 76\n0.535851 64\n0.207106 1\n0.097280 63\n0.000088 2\n0.500835 63\n0.000033 68\n0.051314 68\n0.049921 68\n0.081506 68\n0.019138 68\n0.050979 62\n0.050347 63\n0.051326 1\n0.050101 63\n0.000046 64\n0.050391 61\n0.051078 76\n0.185062 31\n0.359629 45\n1.096108 64\n0.111182 1\n0.286011 2\n0.075256 62\n0.000035 2\n0.499854 63\n0.000033 68\n0.050481 68\n0.050656 68\n0.049752 68\n0.050139 68\n0.050236 1\n0.049703 61\n0.000059 1\n0.050181 62\n0.000092 64\n0.050873 64\n0.051039 61\n0.051119 102\n0.050979 31\n0.208862 45\n0.511788 64\n0.246984 1\n0.181693 1\n0.027529 1\n0.000073 62\n0.000071 2\n0.499873 63\n0.000032 55\n0.000800 46\n0.000991 78\n0.052324 68\n0.047659 68\n0.050776 68\n0.049755 68\n0.050912 62\n0.048932 63\n0.051047 64\n0.051606 64\n0.049795 61\n0.212828 103\n0.328077 65\n0.199968 2\n0.095549 64\n0.000033 2\n0.500238 65\n0.000059 71\n0.050149 71\n0.051295 71\n0.050330 71\n0.050129 67\n0.050645 1\n0.050296 63\n0.000034 65\n0.051947 66\n0.049935 66\n0.050764 63\n0.148302 75\n0.320057 65\n0.215942 2\n0.096544 64\n0.000035 67\n0.499435 71\n0.050055 71\n0.050728 71\n0.048964 71\n0.050164 67\n0.050734 64\n0.083038 65\n0.017633 66\n0.051716 66\n0.048405 63\n0.160201 106\n0.184486 65\n0.216459 2\n0.111909 64\n0.000037 1\n0.500942 1\n0.000080 65\n0.000076 71\n0.049056 71\n0.051086 71\n0.051114 71\n0.052138 1\n0.049423 66\n0.000048 64\n0.050232 1\n0.050392 64\n0.000961 66\n0.049520 66\n0.214274 63\n0.184649 69\n0.151811 66\n0.208254 2\n0.088505 64\n0.000060 2\n0.182717 65\n0.000033 71\n0.500153 71\n0.050625 71\n0.050935 71\n0.050101 67\n0.051042 64\n0.050536 1\n0.050511 64\n0.000081 1\n0.051032 65\n0.000050 66\n0.050785 63\n0.181770 69\n0.344152 65\n0.241007 2\n0.151048 64\n0.000035 2\n0.501782 65\n0.000035 71\n0.050868 71\n0.050732 71\n0.055766 71\n0.050191 67\n0.050495 64\n0.050787 65\n0.050487 56\n0.001277 47\n0.001710 81\n0.047335 66\n0.051009 63\n0.189150 105\n0.264020 8\n0.494685 65\n5.979227 66\n0.497111 65\n0.050489 65\n0.049914 64\n0.049827 64\n0.050036 64\n0.050101 64\n0.050705 63\n0.223040 64\n2.400206 63\n0.287329 64\n0.167884 1\n0.500040 1\n0.050503 1\n0.050882 1\n0.051477 1\n0.050518 1\n0.049873 1\n0.050218 1\n0.050875 1\n0.049709 1\n0.050024 1\n0.049883 1\n0.050556 1\n0.051034 1\n0.050734 1\n0.050286 1\n0.050315 1\n0.134545 1\n0.175884 1\n0.392086 31\n0.164260 31\n0.158621 31\n0.143252 64\n0.199620 65\n0.159167 116\n0.148311 916\n0.000047 334\n0.000592 65\n0.475461 65\n0.247474 31\n0.187173 45\n0.854847 49\n0.064831 31\n0.262762 31\n0.152283 31\n0.160080 31\n0.159956 116\n0.895123 110\n0.044276 65\n0.004631 75\n0.273466 66\n0.496668 65\n0.050013 64\n0.051810 65\n0.050195 65\n0.049811 65\n0.050622 65\n0.049445 65\n0.050639 65\n0.211527 103\n0.252532 746\n0.000085 164\n0.000693 65\n1.763088 65\n0.500248 64\n0.050597 64\n0.051385 64\n0.050436 64\n0.915079 63\n0.193266 24\n0.610210 147\n0.000077 7\n0.704058 117\n0.565558 3\n0.222823 41\n0.153318 41\n0.255842 41\n0.031822 41\n0.192442 3\n0.208009 1\n0.327728 41\n0.064445 3\n0.135544 41\n0.055868 41\n0.112473 41\n0.055753 1\n0.143802 41\n0.112223 41\n0.087892 41\n0.120388 41\n0.119556 41\n0.184376 41\n0.103424 41\n0.048861 41\n0.144040 43\n0.383765 43\n0.120071 43\n0.135518 43\n0.192786 41\n0.015431 41\n0.040030 41\n0.112081 41\n0.231987 43\n0.736021 41\n0.199873 41\n0.160641 41\n0.207129 115\n0.366851 173\n0.035899 74\n5.698642 64\n0.161359 64\n0.183944 65\n0.176251 65\n0.399846 69\n2.077494 4\n0.188353 8\n0.143955 28\n0.720352 28\n0.103385 28\n0.176288 28\n0.399724 28\n0.264251 116\n0.573255 175\n0.034329 75\n0.473464 4\n0.444722 69\n2.580655 4\n0.498111 4\n0.049043 4\n0.049801 4\n0.050740 4\n0.049509 4\n0.050083 4\n0.051131 4\n0.049725 37\n0.051051 4\n0.051950 4\n0.141680 8\n0.152228 28\n0.591786 28\n0.507119 56\n0.000836 47\n0.001175 46\n0.315415 116\n0.310732 175\n0.038857 21\n2.365353 65\n0.000204 4\n0.140790 8\n0.135721 28\n0.647915 28\n0.087556 28\n0.160388 28\n0.167819 28\n0.216230 65\n0.625634 4\n0.214487 4\n0.120147 4\n0.136225 4\n0.135875 8\n0.127765 28\n0.161053 28\n0.639331 4\n0.399988 28\n0.199736 28\n1.112271 116\n0.255080 110\n0.032665 65\n0.002741 171\n5.470509 1193\n0.000766 182\n0.154997 782\n0.000046 583\n0.000507 9\n0.341103 928\n0.000047 297\n0.000578 133\n0.244296 826\n0.000052 829\n0.000844 404\n0.356442 575\n0.000046 600\n0.000767 411\n0.391157 541\n0.000121 305\n0.000036 361\n0.000627 5\n0.423939 963\n0.000048 830\n0.000728 59\n0.234207 869\n0.000044 832\n0.000609 489\n0.000244 226\n0.000385 70\n0.387908 929\n0.000049 443\n0.000795 290\n0.411520 220\n0.000038 300\n0.000302 5\n0.381735 905\n0.000110 305\n0.000037 857\n0.398142 247\n0.000043 161\n0.701580 827\n0.000041 323\n0.000318 63\n2.994694 63\n0.499000 63\n0.050412 63\n0.050056 63\n0.049850 63\n0.050537 64\n0.050380 64\n0.051113 65\n0.049683 64\n0.050050 64\n0.050361 64\n0.168255 64\n0.191443 25\n0.652852 148\n0.000155 35\n0.126227 163\n0.000045 64\n0.247552 1\n0.232910 4\n0.397373 125\n0.287995 3\n0.264010 41\n0.079725 41\n0.152110 43\n0.352119 43\n0.111928 25\n2.192853 74\n0.000223 7\n0.169591 28\n0.197537 28\n0.087994 32\n0.071975 21\n0.000051 1\n0.184043 28\n0.704058 21\n0.000081 28\n0.191849 21\n0.000924 28\n0.166852 21\n0.000048 28\n0.288005 4\n0.424338 28\n0.151793 21\n0.000044 28\n0.241128 21\n0.000081 4\n0.366822 28\n0.047611 21\n0.000048 28\n0.136400 21\n0.000088 28\n0.087623 21\n0.000056 28\n0.041149 21\n0.000094 28\n0.151426 21\n0.000090 28\n0.271689 21\n0.000081 28\n0.431846 28\n0.295776 28\n0.160264 28\n0.095818 34\n0.055980 21\n0.000084 34\n0.188617 29\n0.198092 25\n0.261286 74\n0.000046 1\n0.153980 28\n1.789735 28\n0.047831 28\n0.127992 28\n0.160040 28\n0.095762 28\n0.032213 2\n0.184111 2\n0.049872 48\n0.000033 28\n0.158444 4\n0.511870 3\n0.031716 28\n0.056030 28\n0.152183 28\n0.063935 55\n0.088096 28\n0.088274 28\n0.119697 28\n0.136412 28\n0.071592 28\n0.032305 28\n0.144088 28\n0.047695 25\n0.576471 74\n0.000043 1\n0.337877 28\n0.533664 28\n0.159922 28\n0.079680 2\n0.104333 52\n0.000091 28\n0.095999 28\n0.223891 28\n0.296001 28\n0.071974 28\n0.031762 28\n0.136374 28\n0.067881 3\n0.164160 28\n0.111869 3\n0.096105 28\n0.136205 30\n0.027919 70\n0.364202 1\n0.114155 28\n0.173373 28\n0.079942 28\n0.152028 28\n0.135537 28\n0.080257 56\n0.176417 2\n0.039460 28\n0.055997 28\n0.096726 28\n0.407603 28\n0.152345 28\n0.071581 28\n0.031724 113\n0.488131 172\n0.039240 15\n2.086692 99\n0.243128 29\n0.000048 1471\n0.505855 65\n1.344014 65\n0.484570 64\n0.151959 65\n0.303783 25\n0.532310 149\n0.000045 1\n0.247081 28\n0.373659 28\n0.207841 28\n0.056598 1\n0.111335 1\n0.000081 52\n0.000133 28\n0.095778 28\n0.104307 28\n0.199824 28\n0.024104 4\n0.280195 4\n0.088454 28\n0.127465 28\n0.031542 28\n0.096195 28\n0.120403 28\n0.082679 3\n0.149328 28\n0.255978 28\n0.320034 2\n0.143588 28\n0.143849 28\n0.232454 28\n0.143901 55\n0.120177 28\n0.144041 28\n0.279734 28\n0.063966 28\n0.079743 28\n0.104297 28\n0.064749 28\n0.144068 28\n0.079926 28\n0.159794 28\n0.087479 28\n0.064438 28\n0.136752 28\n0.087327 114\n0.622682 108\n0.045788 65\n0.012979 45\n3.147321 135\n0.001666 2\n0.438838 20\n0.096652 2\n0.503523 36\n0.328224 7\n0.000014 1595\n0.014471 81\n0.377193 81\n0.168314 81\n0.167809 122\n0.394852 82\n0.290010 82\n0.514266 82\n0.396611 82\n0.288769 105\n0.173689 83\n0.224945 106\n0.457303 87\n0.238225 76\n0.118724 178\n0.231964 76\n0.170028 181\n0.227317 97\n0.227848 90\n0.227572 81\n0.172410 81\n0.112257 82\n0.167473 125\n0.227807 83\n0.174137 83\n0.462570 83\n0.458472 139\n0.172224 83\n0.114963 83\n0.171786 86\n0.226017 170\n0.117311 94\n0.241788 83\n0.179717 82\n0.119155 142\n0.057390 212\n0.228355 81\n0.344988 81\n0.344635 99\n0.229821 85\n0.227319 124\n0.229239 82\n0.171928 172\n0.172151 88\n0.172617 88\n0.171388 90\n0.112437 165\n0.228779 92\n0.178688 81\n0.119772 81\n0.179514 137\n0.115611 224\n0.113600 172\n0.285450 87\n0.170090 7\n0.113194 12\n0.000036 36\n0.000031 36\n0.001634 506\n0.000242 111\n0.000251 96\n0.050820 18\n0.710942 23\n0.105535 1728\n0.764624 44\n0.557364 1165\n0.000503 83\n0.150575 684\n0.000053 290\n0.000348 103\n0.498983 917\n0.000049 177\n0.000321 64\n0.051729 840\n0.000155 296\n0.000368 46\n0.000316 238\n0.000035 225\n0.048443 707\n0.000077 176\n0.000450 54\n0.000068 99\n0.000232 181\n0.051725 776\n0.000049 92\n0.000031 476\n0.000685 101\n0.048311 1041\n0.000050 338\n0.000577 512\n0.051995 435\n0.000043 630\n0.000551 487\n0.046702 423\n0.000049 176\n0.000147 263\n0.000595 5\n0.050050 899\n0.000056 44\n0.000029 94\n0.000029 212\n0.000552 503\n0.049888 447\n0.000047 554\n0.000569 831\n0.052010 380\n0.000160 273\n0.000629 4\n0.049882 1\n0.000078 93\n0.000057 1\n0.000051 247\n0.000058 1\n0.000051 159\n0.000054 1\n0.000051 80\n0.000054 1\n0.000054 1\n0.000069 256\n0.000056 1\n0.000052 119\n0.000064 2\n0.000269 1\n0.000062 78\n0.000092 1\n0.000058 333\n0.000072 75\n0.000154 95\n0.049814 817\n0.000052 89\n0.000077 587\n0.000638 661\n0.047498 260\n0.000052 634\n0.000572 960\n0.048519 95\n0.000036 453\n0.000035 1\n0.041313 27\n0.002655 28\n0.000328 1\n0.050173 1\n0.051035 1\n0.050609 1\n0.051667 1\n0.050435 1\n0.085282 10\n0.426234 57\n0.330331 154\n0.011708 109\n0.873077 98\n0.621574 29\n0.000114 1284\n0.607435 857\n0.541031 255\n0.000043 1\n0.493520 27\n0.002983 28\n0.000254 1\n0.047706 69\n0.291721 65\n0.495964 64\n0.051175 64\n0.050893 64\n0.050338 64\n0.050433 64\n0.048534 64\n0.050524 64\n0.051084 64\n0.050142 64\n0.050905 65\n0.052952 63\n0.048167 63\n0.050846 63\n0.050943 63\n0.050939 63\n0.050557 24\n0.346049 145\n0.000041 132\n0.124632 63\n0.280007 28\n0.127842 28\n0.145808 28\n0.174163 53\n0.063823 3\n0.072200 28\n0.144031 2\n0.087736 28\n0.184307 28\n0.047806 28\n0.200178 28\n0.135935 28\n0.064159 2\n0.056855 55\n0.000032 3\n0.062813 28\n0.103757 28\n0.087933 28\n0.089257 28\n0.159416 28\n0.080009 28\n0.103748 28\n0.071901 115\n0.543853 173\n0.048801 181\n0.334278 2\n0.470846 20\n0.097310 2\n0.495683 36\n0.289308 7\n0.000014 1595\n0.014591 81\n0.488919 81\n0.169954 81\n0.169505 83\n0.113393 106\n0.287095 87\n0.234494 76\n0.118888 76\n0.117609 133\n0.115202 181\n0.281796 97\n0.342524 90\n0.340015 122\n0.113568 81\n0.171672 132\n0.114935 81\n0.504874 81\n0.167485 82\n0.168897 83\n0.170633 83\n0.112880 86\n0.227284 170\n0.228859 94\n0.179137 83\n0.178602 82\n0.119629 142\n0.115284 212\n0.448873 81\n0.170745 171\n0.169902 76\n0.282024 83\n0.448276 82\n0.226466 83\n0.168668 85\n0.112231 170\n0.284950 94\n0.179013 83\n0.119550 82\n0.178838 142\n0.115904 212\n0.057795 99\n0.400138 85\n0.170139 124\n0.226523 82\n0.173588 82\n0.454126 82\n0.456977 172\n0.116728 88\n0.168153 88\n0.168785 90\n0.113067 165\n0.228603 92\n0.178461 81\n0.177937 81\n0.119056 137\n0.115008 150\n0.507635 272\n0.058043 172\n0.287105 87\n0.171608 7\n0.056857 48\n0.000035 36\n0.001428 115\n0.000035 127\n0.000065 370\n0.003972 96\n0.058118 18\n0.686492 23\n0.121138 1359\n2.410227 221\n0.498186 632\n0.000049 191\n0.000074 60\n0.000488 99\n0.000038 67\n0.160058 977\n0.000169 181\n0.000782 135\n0.000039 1\n0.168352 81\n0.000081 1\n0.000057 86\n0.000059 1\n0.000053 527\n0.000073 1\n0.000064 68\n0.000054 1\n0.000049 57\n0.000064 72\n0.000141 440\n0.220682 1140\n0.000544 995\n0.218057 1336\n0.000629 381\n0.390902 597\n0.000048 262\n0.000034 416\n0.000552 130\n0.463614 826\n0.000044 410\n0.000485 78\n0.000116 239\n0.000037 95\n0.537279 837\n0.000053 3\n0.000074 790\n0.000744 99\n0.565287 818\n0.000052 183\n0.000030 382\n0.000720 224\n0.482654 903\n0.000118 312\n0.000086 109\n0.000604 5\n1.517214 932\n0.000043 338\n0.000580 221\n0.510058 759\n0.000050 231\n0.000538 83\n0.228534 408\n0.000049 995\n0.880983 64\n0.483763 64\n0.167895 63\n0.216119 3\n0.262804 3\n0.500019 3\n0.049800 3\n0.050444 3\n0.049487 3\n0.050127 2\n0.050761 1\n0.050572 3\n0.049622 3\n0.050134 3\n0.049804 3\n0.050426 3\n0.050136 3\n0.049560 2\n0.050104 1\n0.050029 3\n0.050889 3\n0.050088 3\n0.051146 3\n0.049834 3\n0.049996 3\n0.049973 2\n0.049925 1\n0.050107 104\n0.052574 17\n0.047450 3\n0.050110 3\n0.051181 3\n0.051151 3\n0.050200 2\n0.050642 1\n0.050727 3\n0.050170 3\n0.051109 3\n0.050314 3\n0.050380 3\n0.135283 68\n1.206559 31\n0.125880 32\n14.815468 32\n0.312038 32\n0.752061 32\n0.071883 32\n0.119903 32\n0.087547 32\n0.296428 32\n0.111847 32\n0.088774 32\n0.175551 32\n0.111843 32\n0.089214 65\n0.389501 1\n0.197525 1\n0.499968 1\n0.051209 1\n0.050569 1\n0.050500 1\n0.050671 1\n0.050261 1\n0.050689 1\n0.050913 1\n0.185092 32\n0.477418 32\n0.102840 32\n0.175729 32\n0.159830 32\n0.168411 32\n0.079793 32\n0.104186 32\n0.104362 32\n0.199693 32\n0.151776 32\n0.087957 32\n0.152401 32\n0.127999 32\n0.039833 116\n0.461373 175\n0.037832 10\n0.519660 36\n0.000105 2\n0.000217 35\n0.000144 2\n0.000058 96\n0.001679 2\n0.253947 20\n0.153700 2\n0.471366 36\n0.303112 7\n0.000013 1595\n0.014688 81\n0.329072 81\n0.172840 81\n0.172581 83\n0.177681 106\n0.289082 87\n0.238885 76\n0.119539 76\n0.121868 133\n0.117429 181\n0.116483 97\n0.232037 90\n0.231808 122\n0.174529 81\n0.116833 132\n0.174066 81\n0.115359 81\n0.173675 82\n0.113645 83\n0.114349 83\n0.170418 86\n0.173438 170\n0.177506 94\n0.301575 83\n0.123093 82\n0.120721 142\n0.057470 212\n0.173548 99\n0.290766 85\n0.464200 124\n0.174209 82\n0.235818 172\n0.232349 88\n0.115100 88\n0.171119 90\n0.113930 165\n0.404870 92\n0.244867 81\n0.121581 81\n0.121682 137\n0.118252 224\n0.116497 172\n0.234769 87\n0.174557 205\n0.117916 46\n0.059508 46\n0.060647 46\n0.062419 48\n0.063447 48\n0.063455 50\n0.064188 48\n0.065116 48\n0.065645 48\n0.066585 87\n0.383453 91\n0.590082 68\n2.331871 68\n2.921709 68\n2.932171 68\n2.923837 68\n2.929580 68\n2.625243 68\n2.925307 68\n2.924372 7\n0.020129 12\n0.000033 36\n0.000252 96\n0.055835 18\n0.430415 23\n0.153518 1446\n0.329980 64\n23.120575 64\n0.497420 64\n0.050462 64\n0.049660 63\n0.049842 65\n0.050737 64\n0.050407 64\n0.241082 116\n0.188457 1006\n0.000048 324\n0.000666 1\n0.305764 1\n0.499742 1\n0.049928 1\n0.050110 1\n0.050268 1\n0.050691 1\n0.049957 1\n0.050255 1\n0.050297 1\n0.050641 69\n0.416425 32\n0.036592 3\n0.228944 3\n0.151933 3\n0.136270 3\n0.143834 3\n0.128140 36\n0.219962 34\n0.127123 65\n0.177128 65\n0.132257 65\n0.152029 1\n0.207539 1\n0.159692 37\n0.267164 34\n0.087380 1\n0.149534 1\n0.143984 1\n0.160022 1\n0.144003 1\n0.127953 1\n0.551976 32\n0.188339 32\n0.110432 116\n9.750873 110\n0.040499 65\n0.002554 181\n0.420455 2\n0.406630 20\n0.121369 2\n2.607131 36\n0.293213 7\n0.000014 1595\n0.014601 81\n0.479171 81\n0.170377 81\n0.113034 83\n0.170584 106\n0.231488 87\n0.237292 76\n0.117240 76\n0.176490 133\n0.056682 181\n0.113476 97\n0.285468 90\n0.172508 81\n0.171718 81\n0.394830 82\n0.169714 125\n0.113791 83\n0.174176 139\n0.091654 84\n0.226685 84\n0.192901 83\n0.167603 77\n0.400262 85\n0.172050 170\n0.234284 94\n0.239904 83\n0.119203 82\n0.181376 142\n0.055776 212\n0.115161 81\n0.230451 171\n0.227674 124\n0.566110 107\n0.745373 82\n0.226290 83\n0.172732 85\n0.174573 170\n0.175108 94\n0.356548 83\n0.121047 193\n0.116691 89\n0.056425 212\n0.227504 99\n0.691037 85\n0.171167 124\n0.228422 82\n0.174326 172\n0.293986 88\n0.397099 88\n0.170778 90\n0.112938 165\n0.177194 92\n0.178771 81\n0.180404 81\n0.121132 137\n0.117271 224\n0.114414 172\n0.229405 87\n0.113341 205\n0.175021 46\n0.060196 46\n0.059932 46\n0.059607 48\n0.061971 48\n0.062543 46\n0.063606 90\n0.063997 48\n0.064342 48\n0.064076 91\n0.611113 68\n0.514952 68\n2.870720 68\n2.878072 68\n2.871633 7\n2.719362 48\n0.000035 96\n0.056674 18\n1.020622 2\n0.288786 36\n0.315294 7\n0.000013 1595\n0.014265 7\n0.728257 48\n0.000963 96\n0.048171 18\n0.236409 23\n0.128847 33\n0.201790 125\n0.001721 952\n0.000502 283\n0.000157 478\n0.000334 194\n0.514746 474\n0.000049 1\n0.145317 24\n0.002560 25\n0.000044 1\n0.141892 124\n0.593050 1003\n0.000055 319\n0.000086 98\n0.864891 29\n0.000040 1634\n0.671849 518\n0.401131 399\n0.000113 237\n0.000036 406\n0.000544 331\n0.499825 598\n0.000050 815\n0.000580 1\n0.059453 914\n0.000047 3\n0.000029 87\n0.000031 435\n0.000853 101\n0.038926 810\n0.000120 303\n0.000034 430\n0.000317 303\n0.048266 618\n0.000049 567\n0.000584 146\n0.055174 765\n0.000050 3\n0.000028 535\n0.000604 361\n0.089974 730\n0.000046 405\n0.000541 350\n0.012780 285\n0.000035 153\n0.000029 660\n0.000382 290\n0.048428 664\n0.000116 212\n0.000032 283\n0.000426 617\n0.052711 573\n0.000044 405\n0.000615 86\n0.048191 788\n0.000050 305\n0.000598 616\n0.044040 292\n0.000111 589\n0.003899 5\n0.046701 884\n0.000064 89\n0.000276 39\n0.000124 210\n0.000456 150\n0.053046 833\n0.000427 50\n0.000702 43\n0.001322 17\n0.047068 1203\n0.000524 2\n0.048148 876\n0.000137 133\n0.000030 468\n0.003115 218\n0.044714 1\n0.000074 44\n0.000052 1\n0.000047 68\n0.000049 1\n0.000046 189\n0.000050 1\n0.000047 87\n0.000047 1\n0.000047 87\n0.000048 1\n0.000045 147\n0.000050 1\n0.000046 33\n0.000046 1\n0.000047 31\n0.000056 2\n0.000159 1\n0.000047 160\n0.000053 80\n0.000121 1\n0.042946 24\n0.002965 25\n0.000274 1\n0.048027 1\n0.050113 1\n0.050394 1\n0.049776 1\n0.052875 1\n0.047976 1\n0.053094 1\n0.047121 188\n2.386300 778\n0.000079 3\n0.000708 166\n0.000031 125\n0.000395 152\n0.000104 64\n0.494185 64\n0.049693 63\n0.050491 64\n0.050273 63\n0.050362 63\n0.050283 63\n0.052250 63\n0.050282 62\n0.050799 61\n0.051378 1\n0.053774 900\n0.000048 91\n0.000029 297\n0.000551 64\n0.045889 64\n0.050128 64\n0.050867 63\n0.051388 63\n0.687640 65\n0.499786 64\n0.053078 64\n0.051015 64\n0.051168 64\n0.051357 64\n0.050478 64\n0.049871 64\n0.225236 64\n0.175699 64\n0.232002 464\n0.462462 437\n0.000042 1\n0.000075 148\n0.000501 31\n0.000089 3\n0.000297 262\n0.000033 441\n1.221681 513\n0.000044 529\n0.000613 65\n0.594607 101\n0.962247 29\n0.000036 83\n7.896376 16\n0.740908 4\n0.404761 4\n0.165043 4\n0.151824 4\n0.151862 4\n0.136143 4\n0.128094 58\n0.508860 28\n0.067234 28\n0.111932 28\n0.056142 28\n0.311979 28\n0.191603 28\n0.112187 28\n0.103943 28\n0.048046 28\n0.152111 28\n0.039915 28\n0.296026 30\n0.019992 3\n0.313138 115\n0.065877 109\n0.048429 65\n0.016319 181\n0.358887 2\n0.349997 20\n0.121628 2\n0.199890 36\n0.289111 7\n0.000014 1595\n0.014337 81\n0.385868 81\n0.186975 81\n0.171711 83\n0.229730 106\n0.289807 87\n0.237677 76\n0.122727 76\n0.177307 133\n0.057059 181\n0.171372 97\n0.286034 90\n0.344990 122\n0.171031 81\n0.116453 132\n0.114360 90\n0.285844 90\n0.058679 81\n0.170724 81\n0.228843 82\n0.115400 83\n0.172668 84\n0.516710 85\n0.228469 170\n0.232668 94\n0.183111 83\n0.182753 82\n0.122847 142\n0.117466 212\n0.059769 99\n0.579831 90\n0.229502 123\n0.293797 82\n0.235044 143\n0.177780 88\n0.174664 88\n0.173183 78\n0.173909 165\n0.287977 92\n0.363548 81\n0.120778 171\n0.118362 224\n0.462491 172\n0.412623 87\n0.116682 205\n0.175015 46\n0.058355 46\n0.059670 46\n0.059978 46\n0.060082 46\n0.058763 46\n0.057912 46\n0.060720 46\n0.059889 46\n0.059976 48\n0.057903 46\n0.058303 46\n0.059318 46\n0.059409 46\n0.059125 46\n0.058312 46\n0.057955 46\n0.059242 46\n0.058713 46\n0.058962 48\n0.058053 46\n0.060161 46\n0.059813 46\n0.059002 46\n0.058358 46\n0.058651 46\n0.060151 46\n0.058517 46\n0.059300 46\n0.059083 50\n0.058221 104\n0.058791 48\n0.058128 48\n0.057825 48\n0.058298 48\n0.059450 48\n0.059145 48\n0.059840 48\n0.058397 48\n0.057905 48\n0.059626 48\n0.059889 48\n0.059609 48\n0.058639 48\n0.058790 48\n0.059531 48\n0.059402 48\n0.058942 48\n0.058771 48\n0.058667 48\n0.059091 91\n0.058518 83\n0.116801 68\n1.625800 190\n1.173982 68\n1.715135 7\n0.312098 12\n0.000037 36\n0.000032 96\n0.052269 18\n0.527746 23\n0.129426 1865\n0.451209 66\n4.599575 64\n0.497975 65\n0.051098 65\n0.050227 65\n0.049806 65\n0.050817 62\n0.050106 65\n0.050569 64\n0.051342 65\n0.050245 66\n0.050037 467\n0.055696 464\n0.000046 168\n0.000110 301\n0.000722 64\n0.042964 65\n0.050387 65\n0.050147 65\n0.049632 65\n0.050810 65\n0.050448 62\n0.050531 62\n0.050449 65\n0.050888 51\n0.052526 1\n0.046680 1\n0.050197 1\n0.049901 1\n0.049985 1\n0.050510 1\n0.050336 11\n0.791011 99\n0.284441 29\n0.000039 1614\n0.504417 61\n2.377602 104\n0.230010 943\n0.000054 64\n5.300663 64\n0.183922 65\n0.183864 64\n0.144004 64\n0.175930 64\n0.168070 64\n0.175876 64\n0.191962 64\n0.175810 61\n0.176013 491\n0.161692 64\n0.414550 64\n0.500400 63\n0.051401 63\n0.048801 63\n0.050453 63\n0.050326 63\n0.050722 63\n0.050575 63\n0.051155 61\n0.050286 555\n0.053393 460\n0.000129 64\n0.047075 64\n2.907578 64\n0.176003 64\n0.167813 65\n0.159895 64\n0.152084 130\n0.404236 231\n0.000043 8\n0.931251 184\n0.305200 113\n1.624024 171\n0.057653 13\n9.500804 129\n0.315284 41\n1.197037 44\n0.167869 1092\n0.722595 64\n0.455432 35\n1.095166 78\n0.000038 25\n0.119623 74\n0.000040 64\n0.144094 61\n0.183966 64\n0.609947 28\n0.478003 28\n0.087713 28\n0.120020 65\n0.063879 3\n0.128256 28\n0.143930 28\n0.127998 28\n0.023948 3\n0.168084 28\n0.200067 28\n0.095710 28\n0.032068 28\n0.223955 28\n0.112038 28\n0.080287 28\n0.208080 28\n0.111658 3\n0.072020 28\n0.103702 28\n0.056046 28\n0.104422 3\n0.096027 28\n0.152014 28\n0.087733 28\n0.128293 28\n0.063898 3\n0.104118 28\n0.079728 3\n0.032091 28\n0.103982 28\n0.184226 28\n0.143710 28\n0.015998 28\n0.176294 28\n0.168010 3\n0.407696 28\n0.296051 28\n0.143697 2\n0.064206 28\n0.064094 28\n0.048018 28\n0.175959 28\n0.088301 28\n0.151670 28\n0.528343 61\n0.359916 3\n0.512122 3\n0.151719 28\n0.207994 28\n0.127685 3\n0.080026 28\n0.184427 28\n0.048497 62\n0.175328 28\n0.880231 28\n0.225261 28\n0.078819 28\n0.039291 28\n0.080426 28\n0.048068 28\n0.200282 1\n0.095862 28\n0.071910 3\n0.039636 28\n0.152379 28\n0.096104 28\n0.047896 3\n0.072040 28\n0.135798 28\n0.103997 28\n0.199948 28\n0.056283 28\n0.023191 3\n0.072457 28\n0.152099 28\n0.055708 28\n0.112173 28\n0.032078 28\n0.424364 28\n0.183813 28\n0.248047 3\n0.112167 28\n0.183988 28\n0.127800 28\n0.120022 1\n0.103900 1\n0.624588 28\n0.263622 3\n0.088121 28\n0.119695 28\n0.088473 28\n0.087443 3\n0.096089 28\n0.288165 28\n0.184052 28\n0.127888 28\n0.095747 28\n0.128069 28\n0.056286 28\n0.047716 3\n0.071918 28\n0.144256 28\n0.104049 1\n0.071963 28\n0.112194 28\n0.079618 66\n0.080010 3\n0.608596 28\n0.847740 28\n0.151641 28\n0.168109 28\n0.016103 28\n0.448255 28\n0.239875 28\n0.040040 28\n0.063675 3\n0.176160 28\n0.144197 28\n0.079949 1\n0.256555 28\n0.071131 28\n0.120036 25\n0.274305 120\n0.000046 3\n0.117472 3\n0.136419 3\n0.151792 3\n0.144108 3\n0.159867 28\n0.240217 28\n0.088091 28\n0.015559 28\n0.136505 3\n0.207519 28\n1.336319 28\n0.135670 28\n0.168171 28\n0.095831 28\n0.160361 28\n0.111544 28\n0.120322 28\n0.072104 28\n0.031682 28\n0.056069 28\n0.177974 3\n0.085691 28\n0.112436 28\n0.039948 28\n0.111941 3\n0.063671 28\n0.096240 28\n0.136573 28\n0.383557 28\n0.136031 28\n0.120101 28\n0.128134 28\n0.031808 28\n0.047900 3\n0.080102 28\n0.119874 28\n0.056478 3\n0.071337 28\n0.064190 28\n0.055937 28\n0.080147 3\n0.128489 28\n0.063379 28\n0.103961 28\n0.200418 28\n0.055492 28\n0.032218 1\n0.104019 28\n0.192334 28\n0.031754 28\n0.104037 28\n0.039977 28\n0.095893 28\n0.119967 28\n0.048205 1\n0.144137 28\n0.167980 28\n0.095702 3\n0.072043 28\n0.608173 28\n0.112040 28\n0.159997 28\n0.039754 28\n0.072068 3\n0.111916 28\n0.047846 28\n0.127908 28\n0.088208 3\n0.088895 28\n0.063101 28\n0.032203 28\n0.095767 3\n0.095858 28\n0.088850 28\n0.071183 28\n0.063993 28\n0.080026 99\n0.224614 3\n0.071583 3\n0.144017 3\n0.136013 3\n0.151890 3\n0.168241 28\n0.175940 28\n0.111956 28\n0.015483 28\n0.064051 28\n0.112388 28\n0.088013 3\n0.535792 1\n0.296066 100\n0.240597 3\n0.111607 3\n0.159938 28\n0.128409 28\n0.143179 3\n0.120885 28\n0.071565 28\n0.040011 28\n0.895955 28\n0.063922 28\n0.088455 28\n0.063470 28\n0.056103 3\n0.104707 28\n0.383263 28\n0.144076 28\n0.169348 28\n0.270837 28\n0.200027 28\n0.303925 28\n0.095848 28\n0.031979 3\n0.095955 28\n0.096093 28\n0.047961 3\n0.072162 200\n0.255861 41\n0.191848 41\n0.120121 41\n0.224354 41\n0.143638 41\n0.023987 41\n0.064249 41\n0.272107 41\n0.119863 41\n0.103811 41\n0.015539 418\n0.502646 57\n0.025899 99\n0.280616 3\n0.111163 3\n0.225986 28\n0.150159 28\n0.240010 3\n0.135890 25\n0.502262 28\n5.186155 28\n0.191946 28\n0.047963 3\n0.103657 28\n0.120359 28\n0.071847 4\n0.272375 8\n0.119471 1\n0.144047 4\n0.128305 4\n0.119557 28\n0.079892 28\n0.064106 28\n0.088264 3\n0.095993 28\n0.119781 28\n0.064019 28\n0.096023 3\n0.096100 28\n0.111829 28\n0.072091 28\n0.184090 28\n0.080337 28\n0.023677 3\n0.095871 28\n0.048087 28\n0.176922 28\n0.055295 28\n0.143734 28\n0.039897 28\n0.087871 4\n0.280475 4\n0.103983 4\n0.135660 4\n0.120312 4\n0.111527 28\n0.224401 28\n0.088120 28\n0.072080 28\n0.015500 28\n0.080076 4\n0.592178 4\n0.104004 4\n0.119862 28\n0.088095 28\n0.039957 28\n0.081282 3\n0.110749 28\n0.065756 28\n0.030015 28\n0.160178 28\n0.080671 28\n0.359513 28\n0.256010 28\n0.095801 28\n0.103924 28\n0.056090 28\n0.136177 28\n0.079865 2\n0.072058 28\n0.120381 28\n0.135742 28\n0.072534 3\n0.479412 28\n0.119955 28\n0.183979 28\n0.072207 28\n0.015567 28\n0.080033 28\n0.144008 28\n0.039862 28\n0.096379 3\n0.088182 28\n0.240001 28\n0.071888 28\n0.280027 28\n0.064109 28\n0.183859 28\n0.056125 3\n0.119637 28\n0.088353 28\n0.071994 28\n0.047732 2\n0.127959 28\n0.048488 28\n0.095350 28\n0.103912 3\n0.096529 28\n0.991724 28\n0.064238 28\n0.135935 28\n0.071777 28\n0.047965 28\n0.079863 28\n0.152251 28\n0.112090 28\n0.055986 28\n0.064049 99\n0.104383 3\n0.159661 3\n0.127944 3\n0.168309 3\n0.159998 3\n0.087541 28\n0.304177 28\n0.055956 28\n0.175869 28\n0.040069 28\n0.336216 28\n0.167833 28\n0.096371 28\n0.087566 28\n0.071855 28\n0.112014 28\n0.064072 3\n0.096017 28\n0.104005 28\n0.047854 28\n0.104421 3\n0.095664 28\n0.312421 28\n0.079725 28\n0.320092 28\n0.192148 28\n0.064397 28\n0.111045 28\n0.072242 28\n0.079933 3\n0.112357 28\n0.071701 28\n0.111909 28\n0.112108 3\n0.103741 28\n0.968375 28\n0.127983 28\n0.072150 28\n0.048162 28\n0.159849 28\n0.023636 3\n0.103975 28\n0.096171 28\n0.071979 28\n0.064082 28\n0.055897 3\n0.079719 28\n0.160555 28\n0.111727 28\n0.056247 3\n0.079755 28\n0.112165 28\n0.103914 28\n0.112235 28\n0.119933 28\n0.055713 28\n0.087977 28\n0.088162 28\n0.056989 28\n0.191288 3\n0.063417 28\n0.040346 28\n0.160074 28\n0.047969 28\n0.111926 28\n0.159977 28\n0.047881 28\n0.031995 28\n0.088051 28\n0.079923 28\n0.144407 99\n0.360243 25\n0.135756 80\n0.000039 25\n0.119879 74\n0.000036 25\n0.144204 74\n0.000071 64\n0.593334 64\n0.254015 28\n1.072032 28\n0.137783 28\n0.062218 28\n0.088222 3\n0.127885 28\n0.264021 28\n0.071632 28\n0.048213 28\n0.112053 28\n0.127986 28\n0.135840 4\n0.336152 4\n0.104171 28\n0.088030 3\n0.120050 28\n0.039886 3\n0.064272 28\n0.335869 28\n0.031640 28\n0.168161 28\n0.047935 65\n0.039980 28\n0.168180 28\n0.063990 28\n0.167812 28\n0.112325 28\n0.055394 28\n0.136585 28\n0.047862 28\n0.135903 28\n0.032141 28\n0.120107 28\n0.039804 3\n0.127687 28\n0.136591 28\n0.071828 3\n0.095845 28\n0.023689 28\n0.064385 28\n0.095716 3\n0.095901 28\n0.400520 28\n0.112271 28\n0.127448 28\n0.135960 28\n0.072084 28\n0.063771 28\n0.168238 28\n0.120047 28\n0.072042 28\n0.111818 1\n0.160054 28\n0.416375 6\n0.456050 28\n0.151734 6\n0.224101 1\n0.095707 28\n0.216068 28\n0.112271 28\n0.223887 28\n0.111371 28\n0.072242 28\n0.096156 28\n0.048169 2\n0.095921 28\n0.160297 28\n0.071827 28\n0.087563 28\n0.137685 28\n0.078519 28\n0.072109 28\n0.184124 28\n0.136220 28\n0.103945 28\n0.271710 28\n0.197767 28\n0.087917 28\n0.079944 28\n0.048204 3\n0.063997 66\n0.138854 28\n0.048285 3\n0.084825 28\n0.087980 28\n0.098277 28\n0.088134 25\n0.168465 74\n0.000866 28\n0.046243 28\n0.136579 28\n0.095491 28\n0.086076 28\n0.031930 28\n0.074148 28\n0.112063 1\n0.243130 28\n2.125162 28\n0.167612 28\n0.071668 3\n0.104024 28\n0.064343 28\n0.096919 28\n0.031012 28\n0.056345 3\n0.111840 28\n0.071908 28\n0.080026 3\n0.112093 28\n0.191905 28\n0.055979 28\n0.136119 28\n0.031991 3\n0.127922 1\n0.256030 4\n0.096082 4\n0.127891 28\n0.064228 28\n0.071604 3\n0.112133 28\n0.104047 28\n0.056035 28\n0.143964 28\n0.040110 28\n0.167933 28\n0.207957 28\n0.144266 3\n0.055915 28\n0.183758 28\n0.152277 28\n0.055634 28\n0.128097 28\n0.080035 28\n0.023677 28\n0.080311 3\n0.112017 28\n0.056532 28\n0.119405 28\n0.112016 3\n0.128102 28\n0.039873 28\n0.128159 1\n0.063671 67\n0.176265 28\n0.031891 28\n0.176296 3\n0.079842 28\n0.152278 28\n0.096021 28\n0.079890 1\n0.128258 28\n0.023389 28\n0.144444 28\n0.151750 4\n0.248147 4\n0.104025 6\n0.127618 1\n0.120344 28\n0.103697 3\n0.080233 28\n0.143881 28\n0.168204 28\n0.015862 28\n0.176125 28\n0.119990 2\n0.104064 28\n0.143996 28\n0.063770 28\n0.064222 28\n0.119636 3\n0.058996 28\n0.077192 3\n0.120170 28\n0.592141 28\n0.103832 28\n0.095715 28\n0.087943 25\n0.088491 74\n0.000073 28\n0.295501 28\n0.127808 28\n0.088201 28\n0.080594 28\n0.215450 28\n0.392009 28\n0.120055 28\n0.136239 28\n0.031769 28\n0.096009 28\n0.168153 3\n0.048128 28\n0.167907 28\n0.151947 28\n0.015626 28\n0.079921 28\n0.040235 28\n0.183982 3\n0.103837 28\n5.688354 28\n0.207897 28\n0.088241 28\n0.023975 28\n0.087715 28\n0.039759 28\n0.170914 28\n0.029289 28\n0.112015 4\n0.264292 4\n0.111689 4\n0.128011 4\n0.120076 28\n0.184185 28\n0.048144 28\n0.048178 3\n0.111398 28\n0.063765 59\n0.088328 28\n0.056273 1\n0.127598 28\n0.048000 28\n0.071956 28\n0.184745 28\n0.047520 28\n0.056117 3\n0.071678 28\n0.087885 28\n0.088167 28\n0.048083 3\n0.128140 28\n0.055687 28\n0.104184 28\n0.071978 3\n0.104254 28\n0.039819 28\n0.055835 28\n0.088585 28\n0.071363 3\n0.056332 28\n0.134689 28\n0.033283 28\n0.168151 28\n0.103917 1\n0.095729 28\n0.128038 28\n0.120083 28\n0.144665 28\n0.175574 3\n0.055916 28\n0.087997 28\n0.103774 28\n0.056140 3\n0.095917 28\n0.104132 28\n0.160040 28\n0.023802 28\n0.087605 28\n0.112535 28\n0.023669 28\n0.120192 3\n0.216242 28\n1.039857 28\n0.153729 28\n0.069772 28\n0.032579 28\n0.104061 64\n0.144096 28\n0.183657 28\n0.079947 3\n0.111913 28\n0.032044 28\n0.127709 28\n0.080222 28\n0.168395 65\n0.111852 3\n0.015673 28\n0.096386 28\n0.280027 28\n0.007596 28\n0.040163 28\n0.071909 2\n0.128311 1\n0.272010 4\n0.103665 4\n0.120111 4\n0.112279 28\n0.175983 28\n0.103586 3\n0.056039 28\n0.136217 28\n0.136162 28\n0.079628 28\n0.088004 28\n0.072062 28\n0.056001 4\n0.360574 4\n0.087375 28\n0.104026 3\n0.128031 28\n0.048008 28\n0.079993 2\n0.071979 28\n0.111968 28\n0.048069 28\n0.087933 3\n0.104084 28\n0.648275 28\n0.168012 28\n0.112237 28\n0.055533 1\n0.144175 28\n0.071418 28\n0.208228 28\n0.056214 53\n0.095702 3\n0.112217 28\n0.064090 28\n0.112102 28\n0.064103 28\n0.103709 28\n0.135954 28\n0.064051 10\n0.379447 23\n0.000054 36\n0.285145 3\n0.095414 28\n0.120003 28\n0.064054 28\n0.128166 3\n0.048129 28\n0.103801 28\n0.072058 28\n0.048026 28\n0.063679 2\n0.104296 28\n0.039873 28\n0.119928 28\n0.168085 28\n0.112105 3\n0.064052 28\n0.073478 28\n0.054197 2\n0.080002 28\n0.168186 28\n0.047954 28\n0.063698 66\n0.024101 28\n0.152158 3\n0.088092 28\n0.135996 28\n0.335905 28\n0.095850 3\n0.096267 28\n0.472166 28\n0.136067 28\n0.167706 28\n0.160027 61\n0.160368 28\n0.135568 28\n0.111697 28\n0.032184 28\n0.047790 28\n0.160164 25\n0.234388 120\n0.000041 101\n0.117885 99\n0.119816 64\n0.329151 28\n0.238664 28\n0.160142 28\n0.080121 28\n0.192548 28\n0.191519 3\n0.160003 28\n0.807863 28\n0.071863 3\n0.143909 28\n0.089399 28\n0.094687 28\n0.144268 28\n0.031654 4\n0.288195 4\n0.105538 4\n0.126420 8\n0.120041 28\n0.207934 28\n0.063666 28\n0.048328 28\n0.128266 28\n0.095613 28\n0.440327 1\n0.103889 28\n0.063833 28\n0.064200 28\n0.056104 28\n0.072515 3\n0.095297 28\n0.040194 28\n0.127768 1\n0.050805 28\n0.133291 28\n0.352147 28\n0.176234 28\n0.135761 4\n0.319934 4\n0.119892 4\n0.344252 28\n0.239829 28\n0.231946 28\n0.120000 28\n0.128140 28\n0.207817 2\n0.103170 28\n0.176916 28\n0.047964 28\n0.127903 28\n0.071834 28\n0.112060 28\n0.023830 28\n0.064257 2\n0.095775 28\n0.104085 28\n0.072163 28\n0.071717 3\n0.104226 28\n0.160166 28\n0.151893 28\n0.007951 28\n0.112300 1\n0.135697 28\n0.063889 28\n0.136226 3\n0.095954 28\n0.072076 3\n0.063774 28\n0.256168 28\n0.111804 28\n0.112252 28\n0.063807 28\n0.095991 28\n0.151995 3\n0.071838 28\n0.087748 28\n0.168584 2\n0.072006 28\n0.168355 28\n0.407762 28\n0.087678 3\n0.120312 28\n0.200128 28\n0.087798 28\n0.103893 28\n0.023865 28\n0.344396 3\n0.159933 28\n0.272053 28\n0.296034 28\n0.079930 28\n0.039668 28\n0.208273 28\n0.088094 75\n0.128025 57\n0.672036 4\n0.103871 4\n0.151832 4\n0.144080 4\n0.143997 4\n0.144034 8\n0.127974 1\n0.119827 99\n0.208580 28\n0.087389 28\n0.160228 28\n0.104085 28\n0.055914 28\n0.160233 28\n0.063865 28\n0.127702 1\n0.104015 28\n0.143985 28\n0.096112 28\n0.136885 28\n0.086910 28\n0.080022 28\n0.120096 28\n0.104263 28\n0.191693 106\n1.680927 99\n0.135797 99\n0.135773 64\n0.401426 115\n2.159482 29\n0.000040 4\n0.870105 4\n0.499995 4\n0.050875 4\n0.050421 4\n0.050552 4\n0.050823 4\n0.050593 4\n0.050608 4\n0.050977 4\n0.051009 4\n0.051115 4\n0.050657 4\n0.050097 4\n0.050857 4\n0.050651 4\n0.176628 4\n0.151960 4\n0.167913 4\n0.167930 4\n0.168016 4\n0.160251 4\n0.144004 4\n0.127966 28\n0.143791 28\n0.080121 28\n0.432025 28\n0.239857 1\n1.678224 215\n0.081962 13\n3.151419 105\n0.178593 96\n0.004447 1\n1.360625 1\n0.152016 1\n0.055962 1\n0.112100 1\n0.103841 1\n0.128013 4\n1.120215 4\n0.111774 1\n0.168198 1\n0.055850 1\n0.135929 1\n0.111977 1\n0.168247 1\n0.351439 1\n0.288071 4\n0.472102 1\n0.192083 1\n0.407877 2\n0.361698 96\n0.011649 1\n0.402783 1\n0.129549 1\n0.030505 1\n0.191988 1\n0.095892 1\n0.136011 1\n0.287962 1\n0.104272 1\n0.143788 1\n0.135976 2\n0.192801 42\n0.055927 21\n0.000598 880\n0.005253 57\n0.484023 28\n0.095582 3\n0.318000 3\n0.112054 28\n0.337889 1\n0.621960 1\n0.200017 1\n0.111672 1\n0.080240 1\n0.047942 1\n0.176086 1\n0.096031 1\n0.304109 3\n0.120187 3\n0.143735 3\n0.144262 3\n0.119765 1\n0.039707 1\n0.040465 1\n0.087897 1\n0.072015 1\n0.167876 1\n0.152406 1\n0.217509 17\n0.174330 1\n0.200042 1\n0.048065 1\n0.023462 1\n0.168378 1\n0.144144 1\n0.191991 1\n0.007774 1\n0.192002 1\n0.055829 1\n0.096158 3\n0.272242 3\n0.103658 3\n0.136295 3\n0.127996 3\n0.111756 1\n0.232377 1\n0.087679 1\n0.064256 1\n0.103766 1\n0.007763 1\n0.352500 3\n0.239761 3\n0.095965 3\n0.152033 1\n0.111970 1\n0.168004 31\n0.249911 29\n0.311989 3\n0.102187 1\n1.111948 31\n0.225812 1\n0.150176 1\n0.823848 1\n0.055922 1\n0.080103 1\n0.135803 1\n0.328250 3\n0.263900 3\n0.095946 1\n0.128059 1\n0.103972 1\n0.128023 1\n0.056107 1\n0.240043 1\n0.063909 1\n0.168032 1\n0.152002 1\n0.119921 1\n0.112058 1\n0.080295 1\n0.214385 1\n0.104046 1\n0.127911 1\n0.056114 1\n0.071896 1\n0.097498 1\n0.063816 1\n0.056124 1\n0.127935 1\n0.007611 1\n0.184378 1\n0.087797 1\n0.048158 1\n0.071913 1\n0.160138 1\n0.111918 1\n0.089021 1\n0.031515 31\n0.170131 1\n0.125294 1\n0.160007 1\n0.392599 1\n0.223607 1\n0.087851 1\n0.376311 5\n0.087625 1\n0.208013 1\n0.096095 1\n0.047944 1\n0.184255 1\n0.176165 1\n0.063616 1\n0.031956 1\n0.103759 1\n0.144476 1\n0.103609 1\n0.032376 1\n0.064042 1\n0.079727 1\n0.120347 1\n0.071658 1\n0.063920 1\n0.120394 1\n0.031917 1\n0.151815 1\n0.072115 1\n0.159893 1\n0.192396 1\n0.095382 1\n0.104287 1\n0.039915 1\n0.144326 1\n0.055915 1\n0.103897 1\n0.096104 1\n0.088808 1\n0.047131 1\n0.095769 1\n0.096213 1\n0.152019 1\n0.128056 1\n0.071849 1\n0.096056 1\n0.055986 1\n0.112178 1\n0.048350 1\n1.223591 1\n0.152252 1\n0.055754 1\n0.103849 1\n0.040336 1\n0.159892 1\n0.071892 1\n0.127907 1\n0.128088 1\n0.167988 1\n0.039929 1\n0.119793 3\n0.208412 3\n0.112024 3\n0.127838 1\n0.120078 1\n0.111798 1\n0.080242 1\n0.143836 1\n0.056284 1\n0.111722 1\n0.111887 1\n0.007718 3\n0.544892 1\n0.071985 1\n0.127787 1\n0.071542 1\n0.048274 1\n0.087802 1\n0.056244 1\n0.119933 1\n0.056358 1\n0.055631 1\n0.079865 1\n0.064053 1\n0.136570 3\n0.335777 1\n0.472795 1\n0.111095 3\n0.336000 3\n0.104112 1\n0.055584 1\n0.128271 1\n0.176139 1\n0.080029 1\n0.024021 1\n0.144027 31\n4.193802 1\n0.109870 1\n0.303783 1\n0.464281 1\n0.047837 1\n0.079977 1\n0.175936 3\n0.352309 3\n0.111977 1\n0.127876 3\n0.120136 1\n0.095649 1\n0.151913 1\n0.496117 1\n0.192227 1\n0.063792 1\n0.040009 1\n0.103761 1\n0.448262 1\n0.215896 1\n0.103984 1\n0.039787 1\n0.088242 1\n0.071765 1\n0.232609 1\n0.112082 1\n0.167606 1\n0.224329 1\n0.095752 1\n0.064215 1\n0.135699 1\n0.023720 1\n0.128283 1\n0.096007 1\n0.071915 1\n0.064237 1\n0.056241 1\n0.104785 1\n1.182965 1\n0.135972 1\n0.127971 1\n0.095996 1\n0.023923 1\n0.095862 1\n0.160485 1\n0.103733 1\n0.056416 1\n0.055787 1\n0.079695 1\n0.152107 1\n0.063965 1\n0.025300 1\n0.127136 1\n0.095516 1\n0.120177 1\n0.072165 1\n0.056146 1\n0.147146 1\n0.180474 1\n0.192359 1\n0.087738 1\n0.296303 188\n0.655740 305\n0.384482 16\n0.543329 18\n0.456454 110\n0.226130 23\n0.000031 198\n0.005621 2\n0.000030 54\n0.001543 40\n0.000031 96\n0.002604 1\n0.507687 1\n1.023997 1\n0.119554 1\n0.048101 1\n0.216030 1\n0.176097 1\n0.119964 1\n0.055838 2\n0.201094 29\n0.585799 42\n0.000914 35\n0.000339 35\n0.000030 35\n0.000859 35\n0.001192 35\n0.000203 35\n0.000269 35\n0.000195 40\n0.000446 31\n0.000923 31\n0.000428 31\n0.000440 31\n0.000496 31\n0.000373 31\n0.000525 31\n0.001636 97\n0.000812 179\n0.420875 6\n","private":null,"tags":"gamedev, linux, emacs, python","uname":"Linux beatrix 3.11.0-15-generic #23-Ubuntu SMP Mon Dec 9 18:16:27 UTC 2013 i686 athlon i686 GNU/Linux\n","title":"Open Tactics Day 7","term":"xterm","recorded_at":"1389236320","rows":24,"description":"Open Tactics Day 7"}
