{"shell":"/bin/bash","private":null,"description":"Day 10 of Open Tactics Development","title":"Open Tactics Day 10","xdg_current_desktop":"XFCE","tags":"emacs, gamedev, python, productive","term":"xterm","typescript":"Script started on Sun 12 Jan 2014 10:04:00 PM EST\n\u001b]0;isharacomix@beatrix: ~\u0007isharacomix@beatrix:~$ cd Documents/open-tactics/\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ emacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[H\u001b[2J\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[H\u001b[2J\u001b[23d\u001b[?25l\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Fundamental) ---------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lLoading 00debian-vars...\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;25H\u001b[?25ldone\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;9H\u001b[?25l/etc/emacs/site-start.d/50autoconf.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;58H\u001b[?25ldone\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;35H\u001b[?25ldictionaries-common.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;9H\u001b[?25ldebian-ispell...\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;9H\u001b[?25l/var/cache/dictionaries-common/emacsen-ispell-default.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25le\u001b[K\u001b[H\u001b[7mFile Edit Options Buffers Tools Help                                            \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Fundamental) ---------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\nLoading /var/cache/dictionaries-common/emacsen-ispell-default.el (source)...don\\\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[A\t\u001b[?25ldebian-ispell...done\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;9H\u001b[?25l/var/cache/dictionaries-common/emacsen-ispell-dicts.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;75H\u001b[?25ldone\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;10H\u001b[?25letc/emacs/site-start.d/50dictionaries-common\u001b[6P\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[>0c\u001b[24d\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Lisp-Interaction Help                           \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Lisp Interaction) ----------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\nLoading /etc/emacs/site-start.d/50dictionaries-common.el (source)...done\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;23r\u001b[22;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[?25lFor information about GNU Emacs and the GNU system, type C-h C-a.\u001b[22;1H\u001b[K\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lFor information about GNU Emacs and the GNU system, type C-h C-a.\u001b[K\u001b[H\u001b[7mFile Edit Options Buffers Tools Help                                            \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\nWelcome to GNU Emacs, one component of the GNU/Linux operating system.\u001b[K\r\n\u001b[K\nGet help           C-h  (Hold down CTRL and press h)\u001b[K\r\n\u001b[4m\u001b[34mEmacs manual\u001b[0m\u001b[39;49m       C-h r        \u001b[4m\u001b[34mBrowse manuals\u001b[0m\u001b[39;49m     C-h i\u001b[K\r\n\u001b[4m\u001b[34mEmacs tutorial\u001b[0m\u001b[39;49m     C-h t        Undo changes       C-x u\u001b[K\r\n\u001b[4m\u001b[34mBuy manuals\u001b[0m\u001b[39;49m        C-h RET      Exit Emacs         C-x C-c\u001b[K\r\n\u001b[4m\u001b[34mActivate menubar\u001b[0m\u001b[39;49m   M-`\u001b[K\r\n(`C-' means use the CTRL key.  `M-' means use the Meta (or Alt) key.\u001b[K\r\nIf you have no Meta key, you may instead type ESC followed by the character.)\u001b[K\r\nUseful tasks:\u001b[K\r\n\u001b[4m\u001b[34mVisit New File\u001b[0m\u001b[39;49m                  \u001b[4m\u001b[34mOpen Home Directory\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[4m\u001b[34mCustomize Startup\u001b[0m\u001b[39;49m               \u001b[4m\u001b[34mOpen *scratch* buffer\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\nGNU Emacs 24.3.1 (i686-pc-linux-gnu)\u001b[K\r\n of 2013-07-26 on komainu, modified by Debian\u001b[K\r\nCopyright (C) 2013 Free Software Foundation, Inc.\u001b[K\r\n\u001b[K\nGNU Emacs comes with ABSOLUTELY NO WARRANTY; type C-h C-w for \u001b[4m\u001b[34mfull details\u001b[0m\u001b[39;49m.\u001b[K\r\nEmacs is Free Software--Free as in Freedom--so you can redistribute copies\u001b[K\r\nof Emacs and modify it; type C-h C-c to see \u001b[4m\u001b[34mthe conditions\u001b[0m\u001b[39;49m.\u001b[K\r\nType C-h C-o for information on \u001b[4m\u001b[34mgetting the latest version\u001b[0m\u001b[39;49m.\u001b[K\r\n\u001b[7m-UUU:%%--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*GNU Emacs* \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1     (Fundamental) ---------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2d\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default *scratch*): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[31m;; This buffer is for notes you don't want to save, and for Lisp evaluation.    \u001b[39;49m\r\n\u001b[31m;; If you want to create a file, visit that file with C-x C-f,                  \u001b[39;49m\r\n\u001b[31m;; then enter the text in that file's own buffer.                               \u001b[39;49m\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;6H\u001b[7m----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L5     (Lisp Interaction) \u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lY\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lY\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lB\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\b\u001b[K\u001b[C\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lB\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lY\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lB\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lM\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\t\b\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lU\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\t\b\b\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\b\u001b[?25l*\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l*\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l*\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[16;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;12H\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[16;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;69H\u001b[K\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[16;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l*\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l*\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l*\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l/\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;29H\u001b[?25l\u001b[7mTop L19\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l*\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l * An alert that pops up when a player ends their turn\u001b[K\r\n * Some intel boxes that display information about the map when you hover\u001b[K\r\n   over tiles\u001b[K\r\n\u001b[C* (maybe) terrain movement inhibition (roads are easier than forests)\r\n * adding map name to the data format\r\n\u001b[C* adding play history to the data format\r\n * save/load data from the rules\u001b[K\r\n * change rendering so that the cells don't try to render their units\r\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L22\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default *GNU Emacs*): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mHelp        \u001b[0m\u001b[39;49m\u001b[27m\r\nWelcome to GNU Emacs, one component of the GNU/Linux operating system.\r\n\u001b[K\nGet help           C-h  (Hold down CTRL and press h)\r\n\u001b[4m\u001b[34mEmacs manual\u001b[0m\u001b[39;49m       C-h r        \u001b[4m\u001b[34mBrowse manuals\u001b[0m\u001b[39;49m     C-h i\u001b[K\r\n\u001b[4m\u001b[34mEmacs tutorial\u001b[0m\u001b[39;49m     C-h t        Undo changes       C-x u\r\n\u001b[4m\u001b[34mBuy manuals\u001b[0m\u001b[39;49m        C-h RET      Exit Emacs         C-x C-c\r\n\u001b[4m\u001b[34mActivate menubar\u001b[0m\u001b[39;49m   M-`\u001b[K\r\n(`C-' means use the CTRL key.  `M-' means use the Meta (or Alt) key.\u001b[K\r\nIf you have no Meta key, you may instead type ESC followed by the character.)\r\nUseful tasks:\u001b[K\r\n\u001b[4m\u001b[34mVisit New File\u001b[0m\u001b[39;49m                  \u001b[4m\u001b[34mOpen Home Directory\u001b[0m\u001b[39;49m\r\n\u001b[4m\u001b[34mCustomize Startup\u001b[0m\u001b[39;49m               \u001b[4m\u001b[34mOpen *scratch* buffer\u001b[0m\u001b[39;49m\r\n\nGNU Emacs 24.3.1 (i686-pc-linux-gnu)\r\n\u001b[Cof 2013-07-26 on komainu, modified by Debian\r\nCopyright (C) 2013 Free Software Foundation, Inc.\r\n\nGNU Emacs comes with ABSOLUTELY NO WARRANTY; type C-h C-w for \u001b[4m\u001b[34mfull details\u001b[0m\u001b[39;49m.\r\nEmacs is Free Software--Free as in Freedom--so you can redistribute copies\r\nof Emacs and modify it; type C-h C-c to see \u001b[4m\u001b[34mthe conditions\u001b[0m\u001b[39;49m.\r\nType C-h C-o for information on \u001b[4m\u001b[34mgetting the latest version\u001b[0m\u001b[39;49m.\u001b[23;6H\u001b[7m%%--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*GNU Emacs* \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1     (Fundamental) -----\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\t\u001b[?25l[No match]\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lde/\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lre/\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgets.py\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25lLoading vc-git...\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;18H\u001b[?25ldone\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lLoading vc-git...done\u001b[K\u001b[H\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[31m# This module contains \"gui\" widgets that are useful for games.                 \u001b[39;49m\r\n\u001b[A\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[A\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A menu is a simple menu of selections. Created using a list of options,       \u001b[39;49m\r\n\u001b[A\n\u001b[31m# it intercepts input, returning None if nothing has been selected yet,         \u001b[39;49m\r\n\u001b[A\n\u001b[31m# or the text of the selected option. Handling something like \"cancelling\"      \u001b[39;49m\r\n\u001b[A\n\u001b[31m# should be done by the creator.                                                \u001b[39;49m\r\n\u001b[A\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mMenu\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, items):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items = \u001b[1m\u001b[34mlist\u001b[0m\u001b[39;49m(items)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index = 0\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items) == 0:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Created a menu with no items.\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n    \u001b[31m# Pass the input from gfx.get_input to this function.                       \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1    Git-master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2;60H\u001b[4P\r\u001b[4@\t\b\b\u001b[?25l\u001b[31mPass the input from gfx.get_input to this function.      \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index -= 1\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index += 1\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index %= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items)\r\n\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"enter\"\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index]\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# Draw the window on the terminal with the top left corner                  \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# at x,y. Will draw off the side of the screen.                             \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[33mw\u001b[39;49m,h = 0,\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items:\u001b[K\u001b[19;13H\u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(w,\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(s))\u001b[K\u001b[21;5H    draw.border(x,y,w,h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\u001b[22;5H    draw.fill(x,y,w,h)\u001b[K\u001b[23;29H\u001b[7m 8% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    draw.border(x,y,w,h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\u001b[3;5H    draw.fill(x,y,w,h)\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m i,s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34menumerate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items):\r\n\t    draw.string(x,y+i,s,col+(\u001b[32m\"?\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m i==\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m))\r\n\n\u001b[K\n\u001b[31m# An alert is just a window that contains text. Unlike a buffer, it doesn't     \u001b[39;49m\r\n\u001b[31m# scroll. Writing to it will overwrite the current message.                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mAlert\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, msg=\u001b[32m\"\"\u001b[39;49m, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = col\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(msg)\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s):\u001b[K\r\n\t\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[23;29H\u001b[7m15% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\u001b[K\u001b[5;13H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\u001b[K\u001b[6;21H\u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[7;21Hreport.append(old)\r\n                \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n                    report.append(current)\u001b[K\r\n                    \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[K\r\n\t    report.append(current)\r\n\treport.reverse()\n\b\b\b\breport\r\n\u001b[K\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\tdraw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\r\n\tdraw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\r\n\t\u001b[33mw\u001b[39;49m = 0\u001b[K\u001b[23;29H\u001b[7m23% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ldraw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\r\n\t\u001b[33mw\u001b[39;49m = 0\u001b[K\r\n\t\u001b[33mi\u001b[39;49m = y+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\u001b[K\r\n\t\u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\u001b[6;13H\u001b[33mi\u001b[39;49m -= 1\u001b[K\u001b[7;13Hdraw.string(x,i,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text[w],\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\u001b[8;13H\u001b[33mw\u001b[39;49m += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The HPAlert is a special kind of alert that is used when a unit's HP          \u001b[39;49m\r\n\u001b[31m# is going down. The Alert starts at a certain HP and decreases until           \u001b[39;49m\r\n\u001b[31m# it reaches end. In order to facilitate animation, you can also put in         \u001b[39;49m\r\n\u001b[31m# a delay so that another unit's animation can finish before this one           \u001b[39;49m\r\n\u001b[31m# starts.                                                                       \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mHPAlert\u001b[39;49m(Alert):\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, col=\u001b[32m\"w\"\u001b[39;49m, start=100, end=0, delay=0):\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(HPAlert, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(w,h, \u001b[32m\"%d%%\"\u001b[39;49m%start,  col)\u001b[19;5H    \u001b[31m#self.alert = widgets.Alert( 6,1,\"%d%%\"%start, col)                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = start\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end = end\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay = delay\u001b[23;29H\u001b[7m30% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end = end\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay = delay\r\n\u001b[K\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay > 0:\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay -= 1\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start > \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end:\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start -= 1\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(\u001b[32m\"%d%%\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start)\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(HPAlert, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).draw(x,y,col)\u001b[K\r\n\u001b[K\n\u001b[K\u001b[14;3H\u001b[31mA buffer is just a window that contains text. You can add more text to it\u001b[39;49m\u001b[15;3H\u001b[31mand it will automatically scroll to the newest. Each line in the buffer is\u001b[39;49m\r\n\u001b[31m# a (text,color) tuple.                                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mBuffer\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\n\b\b\b\b\bh = h\u001b[K\n\b\b\b\b\bwhere = 0\u001b[22;14Htext = []\u001b[K\u001b[23;29H\u001b[7m40% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lwhere = 0\u001b[3;14Htext = []\u001b[K\u001b[5;5H\u001b[31m# This adds a string 's' to the buffer and rescrolls to the                 \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# end. Word-wraps the text if necessary.                                    \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s, col=\u001b[32m\"w\"\u001b[39;49m):\r\n\t\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[12;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n                    \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[K\r\n                    report.append((old,col))\u001b[K\r\n                \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n                    report.append((current,col))\u001b[18;5H                \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\r\n\t    report.append((current,col))\r\n\treport.reverse()\n\b\b\b\breport + \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\u001b[23;30H\u001b[7m8% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lreport.reverse()\n\b\b\b\breport + \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\r\n\u001b[K\u001b[6;7H\u001b[31mPositive numbers scroll to newer elements, and negative\u001b[39;49m\u001b[7;5H\u001b[31m# numbers scroll to older ones. \"None\" will scroll to the                   \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# end.                                                                      \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mscroll\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, where):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where -= where\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where < 0:\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# The buffer does usually handle input, but when it does,                   \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# up and down scroll it. This handle-input never returns                    \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# anything other than None.                                                 \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(-1)\u001b[19;13H == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(1)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# This draws the buffer with its current width and height such              \u001b[39;49m\r\n\u001b[23;29H\u001b[7m56% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This draws the buffer with its current width and height such              \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# that it starts with the top-left x,y of the terminal. You can             \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# override the colors (gray out) by providing a col parameter.              \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\u001b[7;5H    draw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\u001b[8;5H    draw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\u001b[K\u001b[9;5H    w = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where\u001b[K\r\n\ti = y+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\u001b[K\r\n\t\u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text):\u001b[12;13Hi -= 1\u001b[K\n\b\b\b\b\b\b\u001b[33ms\u001b[39;49m,c = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text[w]\u001b[14;5H        draw.string(x,i,s,c+col)\u001b[K\u001b[15;5H        \u001b[33mw\u001b[39;49m += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A Camera is an interactable widget that serves as a representation of         \u001b[39;49m\r\n\u001b[31m# a Grid.                                                                       \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCamera\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\u001b[23;29H\u001b[7m64% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = 0,0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport = 0,0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim = 0.0\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim_speed = 0.1\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Returns the cursor when the player presses Enter. Moves the               \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# cursor around when the arrow keys are pressed.                            \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[33mx\u001b[39;49m, \u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x, y-1\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x, y+1\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"left\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x-1, y\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"right\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x+1, y\r\n\u001b[K\n\t\u001b[31m# Move the camera to keep the cursor visible.                           \u001b[39;49m\r\n\u001b[23;29H\u001b[7m73% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l\u001b[31m# Move the camera to keep the cursor visible.                           \u001b[39;49m\r\n\t\u001b[33mcx\u001b[39;49m, cy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m x < cx: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport = cx-\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w/2,cy\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m y < cy: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport = cx,cy-\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h/2\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m x >= cx+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport = cx+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w/2,cy\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m y >= cy+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport = cx,cy+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h/2\r\n\u001b[K\n\t\u001b[31m# If we press enter, send that information to the caller.               \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"enter\"\u001b[39;49m:\u001b[K\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim = 0.0\u001b[13;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# Draw the camera.                                                          \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\t\u001b[33mw\u001b[39;49m,h = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,cy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport\u001b[K\r\n\u001b[K\n\t\u001b[31m# The blink animation.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim_speed\u001b[K\u001b[23;29H\u001b[7m81% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# The blink animation.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim_speed\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim >= 2:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim = 0.0\u001b[K\r\n\u001b[K\n\tdraw.border(x,y,w,h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\r\n\tdraw.fill(x,y,w,h)\u001b[K\u001b[10;11H\u001b[31mDraw all of the tiles.                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m _x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(cx,cx+w):\u001b[12;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m _y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(cy,cy+h):\u001b[13;13H    \u001b[33mtx\u001b[39;49m,\u001b[33mty\u001b[39;49m = _x+x-cx, _y+y-cy\r\n\t        \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(_x,_y)\n\n\t\t\u001b[12P\u001b[16;5H\u001b[12@\u001b[16;19H\u001b[31mApply multiple levels of inverted color when tiles\u001b[39;49m\u001b[17;5H            \u001b[31m# are highlighted by the interface.                             \u001b[39;49m\r\n\t        \u001b[33mcur\u001b[39;49m = col\u001b[K\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim < 1.0 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (_x,_y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink: \u001b[33mcur\u001b[39;49m += \u001b[32m\"?\"\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor == (_x,_y): cur += \u001b[32m\"w?\"\u001b[39;49m\r\n\u001b[K\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m ( tile \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (tx-x >= 0) \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (ty-y >= 0) \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m\u001b[23;30H\u001b[7m9% L210\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m ( tile \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (tx-x >= 0) \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (ty-y >= 0) \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m\r\n\t             (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m tx < x+w) \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m h \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m ty < y+h)):\u001b[5;13H        tile.draw(tx,ty,cur)\r\n\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\u001b[23;29H\u001b[7mBot L229\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# Draw all of the tiles.                                                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m _x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(cx,cx+w):\u001b[K\u001b[4;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m _y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(cy,cy+h):\u001b[K\r\n\t\t\u001b[33mtx\u001b[39;49m,\u001b[33mty\u001b[39;49m = _x+x-cx, _y+y-cy\r\n\t\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(_x,_y)\r\n\n\t\t\u001b[31m# Apply multiple levels of inverted color when tiles            \u001b[39;49m\r\n\t\t\u001b[31m# are highlighted by the interface.                             \u001b[39;49m\r\n\t\t\u001b[33mcur\u001b[39;49m = col\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim < 1.0 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (_x,_y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink: \u001b[33mcur\u001b[39;49m += \u001b[32m\"?\"\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor == (_x,_y): cur += \u001b[32m\"w?\"\u001b[39;49m\r\n\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m ( tile \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (tx-x >= 0) \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (ty-y >= 0) \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m\u001b[15;22H(\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m tx < x+w) \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m h \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m ty < y+h)):\u001b[16;21Htile.draw(tx,ty,cur)\u001b[23;36H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;67H\r\n\u001b[K\u001b[17;21H\u001b[?25ltile.draw(tx,ty,cur)\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L232\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;21H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\u001b[18;21H\u001b[?25ltile.draw(tx,ty,cur)\u001b[23;36H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[17;30H\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[17;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\u001b[19;21H\u001b[?25ltile.draw(tx,ty,cur)\u001b[23;36H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\b\b\b\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l;\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[24;1H\u001b[?25lCloses \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[18;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[19;21H\u001b[4@\t\r\n\n\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/widgets.py...\u001b[19;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/widgets.py\u001b[K\u001b[19;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L235  Git:\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[19;25H\r\n\n\n\n\n\u001b[?25l\u001b[34mSwitch to buffer (default *GNU Emacs*): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[19;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[19;25H\r\n\n\n\n\n\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/code/core/\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25laphics/\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Operate Mark Regexp Immediate Subdir Help       \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n  \u001b[32m/home/isharacomix/Documents/open-tactics/code/graphics\u001b[39;49m:\u001b[K\r\n  total used in directory 60 available 120490816\u001b[K\r\n  drwxr-xr-x 2 isharacomix isharacomix 4096 Jan  6 22:33 \u001b[1m\u001b[34m.\u001b[0m\u001b[39;49m\u001b[K\r\n  drwxr-xr-x 4 isharacomix isharacomix 4096 Dec 27 01:54 \u001b[1m\u001b[34m..\u001b[0m\u001b[39;49m\u001b[K\r\n  -rw-r--r-- 1 isharacomix isharacomix    0 Dec 27 01:54 __init__.py\u001b[K\r\n  -rw-r--r-- 1 isharacomix isharacomix  153 Dec 27 01:54 \u001b[32m__init__.pyc\u001b[39;49m\u001b[K\r\n  -rw-r--r-- 1 isharacomix isharacomix 1559 Jan  2 23:50 draw.py\u001b[K\r\n  -rw-r--r-- 1 isharacomix isharacomix 1630 Jan  2 23:50 \u001b[32mdraw.pyc\u001b[39;49m\u001b[K\r\n  -rw-r--r-- 1 isharacomix isharacomix 2337 Jan  2 00:31 gfx.py\u001b[K\r\n  -rw-r--r-- 1 isharacomix isharacomix 2067 Jan  2 22:04 \u001b[32mgfx.pyc\u001b[39;49m\u001b[K\r\n  -rw-r--r-- 1 isharacomix isharacomix 4987 Jan  6 22:03 gfx_ascii.py\u001b[K\r\n  -rw-r--r-- 1 isharacomix isharacomix 4157 Jan  6 22:16 \u001b[32mgfx_ascii.pyc\u001b[39;49m\u001b[K\r\n  -rw-r--r-- 1 isharacomix isharacomix 6117 Jan  6 22:33 gfx_sdl.py\u001b[K\r\n  -rw-r--r-- 1 isharacomix isharacomix 5208 Jan  6 22:33 \u001b[32mgfx_sdl.pyc\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[7m-UUU:%%--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgraphics         \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L5     (Dired by name) --------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[6;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mKill buffer (default graphics): \u001b[39;49m\u001b[1d\u001b[7mMinibuf Help                             \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;3H      \u001b[31m# Draw all of the tiles.                                                \u001b[39;49m\r\n\u001b[3;3H      \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m _x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(cx,cx+w):\u001b[K\u001b[4;3H          \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m _y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(cy,cy+h):\u001b[K\u001b[5;3H              \u001b[33mtx\u001b[39;49m,\u001b[33mty\u001b[39;49m = _x+x-cx, _y+y-cy\u001b[K\u001b[6;3H              \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(_x,_y)\u001b[K\r\n\u001b[K\u001b[8;3H              \u001b[31m# Apply multiple levels of inverted color when tiles            \u001b[39;49m\r\n\u001b[9;3H              \u001b[31m# are highlighted by the interface.                             \u001b[39;49m\r\n\u001b[C\u001b[C              \u001b[33mcur\u001b[39;49m = col\u001b[K\u001b[11;3H              \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim < 1.0 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (_x,_y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink: \u001b[33mcur\u001b[39;49m += \u001b[32m\"?\"\u001b[39;49m\u001b[12;3H              \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor == (_x,_y): cur += \u001b[32m\"w?\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;3H              \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m ( tile \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (tx-x >= 0) \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (ty-y >= 0) \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m\u001b[K\u001b[15;3H                   (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m tx < x+w) \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m h \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m ty < y+h)):\u001b[K\u001b[16;21H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\r\n\t\t\ttile.unit.draw(tx,ty,cur)\u001b[18;21H\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\btile.draw(tx,ty,cur)\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L235  Git:master  (Python) -\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/code/core/\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lid.py\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[31m# A grid is the arena upon which a battle takes place. The entire map should    \u001b[39;49m\r\n\u001b[31m# be self-contained. Players interact with the map by taking \"actions\" that     \u001b[39;49m\r\n\u001b[31m# are interpreted by an instance of the rules class containing the game logic.  \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\u001b[K\r\n\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m widgets\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Grid is a game-agnostic representation of the world's entities. It        \u001b[39;49m\r\n\u001b[31m# provides an API to game rulesets to create, delete, and move entities         \u001b[39;49m\r\n\u001b[31m# around, but essentially has no functionality other than changing its          \u001b[39;49m\r\n\u001b[31m# configuration. The grid should be initialized with a configuration            \u001b[39;49m\r\n\u001b[31m# Dictionary containing the following keys and values.                          \u001b[39;49m\r\n\u001b[31m#   w: (int) width                                                              \u001b[39;49m\r\n\u001b[31m#   h: (int) height                                                             \u001b[39;49m\r\n\u001b[31m#   cells: (list) exactly w*h cells                                             \u001b[39;49m\r\n\u001b[31m#   teams: (list) the teams in the map                                          \u001b[39;49m\r\n\u001b[31m#   allies: (list) the teams that are allied in a list of lists of ints         \u001b[39;49m\r\n\u001b[31m#   variables: (dictionary) a dictionary of user-defined variables              \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[23;14H\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1    Git-\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;3H\u001b[?25l\u001b[31m  variables: (dictionary) a dictionary of user-defined variables          \u001b[39;49m\u001b[3;3H\u001b[31m                                                                         \u001b[39;49m\u001b[4;3H\u001b[31mDanger: Do not store 'rules' in a variable. Should fall out of scope.       \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data, rules):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = data[\u001b[32m\"w\"\u001b[39;49m], data[\u001b[32m\"h\"\u001b[39;49m]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[10;13H\u001b[33mrow\u001b[39;49m = []\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\u001b[K\r\n                row.append(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = data.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day = 0\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\u001b[K\u001b[20;64H\u001b[8P\r\u001b[8@\u001b[20;11H\u001b[31mLoad the teams first, since cells and units reference them.  \u001b[39;49m\u001b[21;59H\u001b[8P\r\u001b[8@\u001b[21;11H\u001b[31mThen set up the alliances.                              \u001b[39;49m\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\n\b\b\b\u001b[7m 9% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;59H\u001b[8P\r\u001b[8@\u001b[2;11H\u001b[?25l\u001b[31mThen set up the alliances.                              \u001b[39;49m\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\r\n            \u001b[33mthis\u001b[39;49m = rules.make_team( t )\u001b[K\r\n            \u001b[33mthis.variables\u001b[39;49m = t.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[6;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams.append(this)\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[10;13H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\r\n\u001b[K\n\t\u001b[31m# Load the terrain cells. The units are embedded in these elements      \u001b[39;49m\r\n\t\u001b[31m# of the dictionary. Note that when units are loaded in other units     \u001b[39;49m\r\n\t\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\t\u001b[31m#   y: (int) y position                                                 \u001b[39;49m\r\n\t\u001b[31m#   name: (string) the name of the terrain                              \u001b[39;49m\r\n\t\u001b[31m#   unit: the unit on this terrain, if one                              \u001b[39;49m\r\n\t\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\u001b[20;11H\u001b[31m  variables: (dict) User-defined variables                 \u001b[39;49m\u001b[21;14H\u001b[31mre may be other values in this cell that will be parsed by\u001b[39;49m\r\n\t\u001b[31m# the factory of the rules.                                             \u001b[39;49m\r\n\u001b[23;29H\u001b[7m15% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25l\u001b[31mre may be other values in this cell that will be parsed by\u001b[39;49m\r\n\t\u001b[31m# the factory of the rules.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"cells\"\u001b[39;49m]:\u001b[K\r\n\t\t = rules.make_cell(c)\u001b[K\u001b[6;18Hgrid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\r\n\t    \u001b[33mthis.variables\u001b[39;49m = c.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"team\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c\r\n\t\t\u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\r\n\t            \u001b[33mu\u001b[39;49m = rules.make_unit(unit)\u001b[K\r\n\t            \u001b[33mu.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]]\u001b[K\r\n\t            \u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[K\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\u001b[K\r\n\t                u.carrying.append(_process_units(u))\u001b[K\r\n\t            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\t        \u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[4P\t\b\b\u001b[31mGet the tile at x,y. Returns None if out of range.           \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtile_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\n\u001b[7m24% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31mGet the tile at x,y. Returns None if out of range.           \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtile_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[5;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# Get a range of coordinates, usually for an attack range. Coordinates      \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# may not actually be cells.                                                \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, center, start, end=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m end \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m:\u001b[K\u001b[18;13H\u001b[33mend\u001b[39;49m = start\u001b[K\r\n\u001b[K\n\t\u001b[33mreport\u001b[39;49m = []\u001b[21;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = center\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m r \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(start,end+1):\u001b[23;29H\u001b[7m33% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = center\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m r \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(start,end+1):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m i \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(r):\u001b[K\u001b[5;13H    report.append((x+i,y+(r-i)))\r\n\t        report.append((x+i,y-(r-i)))\r\n\t\treport.append((x+(r-i),y+i))\u001b[8;5H            report.append((x-(r-i),y+i))\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# Return distance (zero norm) between two points.                           \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdist\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, start, end):\r\n\t\u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = start\u001b[14;5H    \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = end\u001b[K\u001b[15;5H    \u001b[33mdx\u001b[39;49m = x1-x2\u001b[K\u001b[16;5H    \u001b[33mdy\u001b[39;49m = y1-y2\u001b[K\u001b[17;12H(dx < 0): \u001b[33mdx\u001b[39;49m *= -1\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (dy < 0): \u001b[33mdy\u001b[39;49m *= -1\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m dx+dy\r\n\u001b[K\u001b[21;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.                          \u001b[39;49m\r\n\u001b[23;30H\u001b[7m9% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.                          \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(ox,oy)\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[11;5H    \u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# This should be the ONLY WAY units are added to the game.                  \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[18;12Htile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[21;5H    \u001b[33munit.team\u001b[39;49m = team\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\n\b\b\b\u001b[7m44% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33munit.team\u001b[39;49m = team\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# Remove a unit from the game. This will not only remove the                \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# unit, but all units that it is carrying.                                  \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.carrying:\u001b[13;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\u001b[14;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(u)\u001b[K\u001b[15;5H    \u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# Return the team currently performing its turn.                            \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# End the turn and proceed to the next team.                                \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;29H\u001b[7m52% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# End the turn and proceed to the next team.                                \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\u001b[K\u001b[7;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon = icon\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[22;5H\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n\u001b[23;30H\u001b[7m8% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33munit.team\u001b[39;49m = team\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\r\n\u001b[K\u001b[5;5H\u001b[31m# Remove a unit from the game. This will not only remove the                \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# unit, but all units that it is carrying.                                  \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.carrying:\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[14;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(u)\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[17;5H\u001b[31m# Return the team currently performing its turn.                            \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\r\n\u001b[K\u001b[21;5H\u001b[31m# End the turn and proceed to the next team.                                \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.                          \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[5;5H    \u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[K\u001b[6;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\u001b[7;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(ox,oy)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# This should be the ONLY WAY units are added to the game.                  \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\u001b[17;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[21;5H    \u001b[33munit.team\u001b[39;49m = team\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\n\b\b\b\u001b[7m44% L135\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = center\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m r \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(start,end+1):\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m i \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(r):\u001b[K\r\n\t        report.append((x+i,y+(r-i)))\r\n\t        report.append((x+i,y-(r-i)))\r\n\t        report.append((x+(r-i),y+i))\r\n\t        report.append((x-(r-i),y+i))\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# Return distance (zero norm) between two points.                           \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdist\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, start, end):\u001b[13;5H    \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = start\u001b[K\u001b[14;5H    \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = end\u001b[K\u001b[15;5H    \u001b[33mdx\u001b[39;49m = x1-x2\u001b[K\u001b[16;5H    \u001b[33mdy\u001b[39;49m = y1-y2\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (dx < 0): \u001b[33mdx\u001b[39;49m *= -1\u001b[K\u001b[18;12H(dy < 0): \u001b[33mdy\u001b[39;49m *= -1\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m dx+dy\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.                          \u001b[39;49m\r\n\u001b[23;29H\u001b[7m39% L116\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Get the tile at x,y. Returns None if out of range.                        \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtile_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[5;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\u001b[12;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# Get a range of coordinates, usually for an attack range. Coordinates      \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# may not actually be cells.                                                \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, center, start, end=\u001b[35mNone\u001b[39;49m):\u001b[17;12Hend \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m:\u001b[K\r\n\t    \u001b[33mend\u001b[39;49m = start\u001b[K\r\n\u001b[K\n\t\u001b[33mreport\u001b[39;49m = []\u001b[21;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = center\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m r \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(start,end+1):\u001b[K\u001b[23;30H\u001b[7m3% L97 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;68H\u001b[4P\u001b[2;5H\u001b[4@\u001b[2;11H\u001b[?25l\u001b[31mThere may be other values in this cell that will be parsed by\u001b[39;49m\u001b[3;5H    \u001b[31m# the factory of the rules.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"cells\"\u001b[39;49m]:\u001b[K\u001b[5;13H\u001b[33mthis\u001b[39;49m = rules.make_cell(c)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\u001b[7;13H\u001b[33mthis.variables\u001b[39;49m = c.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[8;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"team\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\u001b[9;5H            \u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t        \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\r\n\t            \u001b[33mu\u001b[39;49m = rules.make_unit(unit)\u001b[13;21H\u001b[33mu.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]]\u001b[14;5H                \u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\u001b[15;5H                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[K\u001b[16;5H                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\r\n\t                u.carrying.append(_process_units(u))\u001b[18;13H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\r\n\t\t\u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\r\n\u001b[K\u001b[21;5H\u001b[31m# Get the tile at x,y. Returns None if out of range.                        \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtile_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\n\u001b[7m24% L78\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25l\u001b[31mn set up the alliances.                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\r\n\t    \u001b[33mthis\u001b[39;49m = rules.make_team( t )\r\n\t\t\u001b[33m.variables\u001b[39;49m = t.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[6;18Hteams.append(this)\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\u001b[K\u001b[8;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist\r\n\t\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\u001b[10;13H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\r\n\u001b[K\n\t\u001b[31m# Load the terrain cells. The units are embedded in these elements      \u001b[39;49m\r\n\t\u001b[31m# of the dictionary. Note that when units are loaded in other units     \u001b[39;49m\r\n\t\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\t\u001b[31m#   y: (int) y position                                                 \u001b[39;49m\r\n\t\u001b[31m#   name: (string) the name of the terrain                              \u001b[39;49m\r\n\t\u001b[31m#   unit: the unit on this terrain, if one                              \u001b[39;49m\r\n\t\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\t\u001b[31m#   variables: (dict) User-defined variables                            \u001b[39;49m\r\n\u001b[21;68H\u001b[4P\u001b[21;5H\u001b[4@\u001b[21;11H\u001b[31mThere may be other values in this cell that will be parsed by\u001b[39;49m\u001b[22;5H    \u001b[31m# the factory of the rules.                                             \u001b[39;49m\r\n\u001b[23;29H\u001b[7m15% L59\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[8P\u001b[2;3H\u001b[?25l\u001b[31m  variables: (dictionary) a dictionary of user-defined v\u001b[39;49m\u001b[8@\u001b[31mariables\u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[31m# Danger: Do not store 'rules' in a variable. Should fall out of scope.         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data, rules):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = data[\u001b[32m\"w\"\u001b[39;49m], data[\u001b[32m\"h\"\u001b[39;49m]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[10;13H\u001b[33mrow\u001b[39;49m = []\u001b[K\u001b[11;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\r\n\t        row.append(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = data.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day = 0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\u001b[K\u001b[20;11H\u001b[31mLoad the teams first, since cells and units reference them.\u001b[39;49m\u001b[21;14H\u001b[31mn set up the alliances.                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\n\b\b\b\u001b[7m 9% L40\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;59H\u001b[8P\r\u001b[8@\u001b[2;11H\u001b[?25l\u001b[31mThen set up the alliances.                              \u001b[39;49m\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\r\n            \u001b[33mthis\u001b[39;49m = rules.make_team( t )\u001b[K\r\n            \u001b[33mthis.variables\u001b[39;49m = t.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[6;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams.append(this)\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[10;13H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\r\n\u001b[K\n\t\u001b[31m# Load the terrain cells. The units are embedded in these elements      \u001b[39;49m\r\n\t\u001b[31m# of the dictionary. Note that when units are loaded in other units     \u001b[39;49m\r\n\t\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\t\u001b[31m#   y: (int) y position                                                 \u001b[39;49m\r\n\t\u001b[31m#   name: (string) the name of the terrain                              \u001b[39;49m\r\n\t\u001b[31m#   unit: the unit on this terrain, if one                              \u001b[39;49m\r\n\t\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\u001b[20;11H\u001b[31m  variables: (dict) User-defined variables                 \u001b[39;49m\u001b[21;14H\u001b[31mre may be other values in this cell that will be parsed by\u001b[39;49m\r\n\t\u001b[31m# the factory of the rules.                                             \u001b[39;49m\r\n\u001b[23;29H\u001b[7m15\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25l\u001b[31mre may be other values in this cell that will be parsed by\u001b[39;49m\r\n\t\u001b[31m# the factory of the rules.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"cells\"\u001b[39;49m]:\u001b[K\r\n\t\t = rules.make_cell(c)\u001b[K\u001b[6;18Hgrid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\r\n\t    \u001b[33mthis.variables\u001b[39;49m = c.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"team\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c\r\n\t\t\u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\r\n\t            \u001b[33mu\u001b[39;49m = rules.make_unit(unit)\u001b[K\r\n\t            \u001b[33mu.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]]\u001b[K\r\n\t            \u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[K\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\u001b[K\r\n\t                u.carrying.append(_process_units(u))\u001b[K\r\n\t            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\t        \u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[4P\t\b\b\u001b[31mGet the tile at x,y. Returns None if out of range.           \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtile_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\n\u001b[7m24% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31mGet the tile at x,y. Returns None if out of range.           \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtile_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[5;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# Get a range of coordinates, usually for an attack range. Coordinates      \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# may not actually be cells.                                                \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, center, start, end=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m end \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m:\u001b[K\u001b[18;13H\u001b[33mend\u001b[39;49m = start\u001b[K\r\n\u001b[K\n\t\u001b[33mreport\u001b[39;49m = []\u001b[21;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = center\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m r \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(start,end+1):\u001b[23;29H\u001b[7m33% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = center\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m r \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(start,end+1):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m i \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(r):\u001b[K\u001b[5;13H    report.append((x+i,y+(r-i)))\r\n\t        report.append((x+i,y-(r-i)))\r\n\t\treport.append((x+(r-i),y+i))\u001b[8;5H            report.append((x-(r-i),y+i))\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# Return distance (zero norm) between two points.                           \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdist\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, start, end):\r\n\t\u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = start\u001b[14;5H    \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = end\u001b[K\u001b[15;5H    \u001b[33mdx\u001b[39;49m = x1-x2\u001b[K\u001b[16;5H    \u001b[33mdy\u001b[39;49m = y1-y2\u001b[K\u001b[17;12H(dx < 0): \u001b[33mdx\u001b[39;49m *= -1\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (dy < 0): \u001b[33mdy\u001b[39;49m *= -1\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m dx+dy\r\n\u001b[K\u001b[21;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.                          \u001b[39;49m\r\n\u001b[23;30H\u001b[7m9% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.                          \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(ox,oy)\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[11;5H    \u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# This should be the ONLY WAY units are added to the game.                  \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[18;12Htile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[21;5H    \u001b[33munit.team\u001b[39;49m = team\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\n\b\b\b\u001b[7m44% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33munit.team\u001b[39;49m = team\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# Remove a unit from the game. This will not only remove the                \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# unit, but all units that it is carrying.                                  \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.carrying:\u001b[13;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\u001b[14;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(u)\u001b[K\u001b[15;5H    \u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# Return the team currently performing its turn.                            \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# End the turn and proceed to the next team.                                \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;29H\u001b[7m52% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# End the turn and proceed to the next team.                                \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\u001b[K\u001b[7;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon = icon\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[22;5H\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n\u001b[23;30H\u001b[7m8% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# the unit's draw will be prioritized.                                      \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit:\u001b[K\n\b\b\b\bunit.draw(x, y, col)\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\b\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\r\n                \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color +\u001b[32m\"!\"\u001b[39;49m\u001b[K\r\n            draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color+col)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Units are the pieces that move about the game board. Units belong to a        \u001b[39;49m\r\n\u001b[31m# team and can be moved about by taking actions.                                \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\u001b[19;14Hname = name\u001b[20;14Hicon = icon\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.carrying = []\u001b[K\u001b[23;29H\u001b[7m64% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[9;1H\u001b[1M\u001b[1;24r\u001b[7;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit.draw(x, y, col)\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[22;1H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[K\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[9;1H\u001b[1M\u001b[1;24r\u001b[7;9H\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[22;1H\u001b[K\u001b[7d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[9;1H\u001b[1M\u001b[1;24r\u001b[7;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[8;13H    \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color +\u001b[32m\"!\"\u001b[39;49m\u001b[22;1H    \u001b[31m# Draw this unit on the screen.                                             \u001b[39;49m\r\n\u001b[A\u001b[7d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;12H\u001b[1P\r\u001b[7;11H\u001b[1P\r\u001b[7;10H\u001b[1P\r\t\u001b[1P\r\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[1P\r\t\t\b\b\u001b[1P\r\u001b[8;14H\u001b[1P\r\u001b[8;13H\u001b[1P\r\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;12H\u001b[1P\r\u001b[9;11H\u001b[1P\r\u001b[9;10H\u001b[1P\r\t\u001b[1P\r\u001b[3;7H\u001b[?25l\u001b[31mDraw this unit on the screen.                     \u001b[39;49m\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\u001b[5;5H    draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m+col)\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# Returns true if the two units (or cells) are allied.                      \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, other):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m other.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m other.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\u001b[12;3H\u001b[31mThe game is played by teams. Each team commands an army of units and  \u001b[39;49m\u001b[13;3H\u001b[31mmay also have other variables such as money, etc, governed by the\u001b[39;49m\r\n\u001b[31m# subclass of the current set of rules.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[17;14Hname = name\u001b[18;14Hcolor = color\u001b[19;14Hallies = []\u001b[K\u001b[20;14Hactive = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[23;29H\u001b[7m71% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   71% L191  Git:\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[3;7H\u001b[?25l\u001b[31mThis function returns the character and color that\u001b[39;49m\u001b[4;5H\u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# the unit's draw will be prioritized.                                      \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[K\u001b[8;5H        \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color +\u001b[32m\"!\"\u001b[39;49m\r\n\tdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color+col)\u001b[K\u001b[12;3H\u001b[31mUnits are the pieces that move about the game board. Units belong to a\u001b[39;49m\u001b[13;3H\u001b[31mteam and can be moved about by taking actions.                   \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\u001b[17;14Hicon = icon\u001b[18;14Hteam = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[19;14Hcarrying = []\u001b[20;14Hvariables = {}\r\n\u001b[K\u001b[22;5H\u001b[31m# Draw this unit on the screen.                                             \u001b[39;49m\r\n\u001b[23;29H\u001b[7m64\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\n\u001b[?25l\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[4P\u001b[4;3H\u001b[31mwhat would be called their 'terrain'.               \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon = icon\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[K\r\n\u001b[K\n    \u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# the unit's draw will be prioritized.                                      \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[K\r\n\t    \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color +\u001b[32m\"!\"\u001b[39;49m\r\n\tdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color+col)\r\n\n\u001b[K\u001b[23;30H\u001b[7m1% L171\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default widgets.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lwidgets.py\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*GNU Emacs*\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lscratch*\u001b[K\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lMessages*\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lEnd of defaults; no next item\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l\u001b[34mSwitch to buffer (default widgets.py): \u001b[39;49m*scratch*\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lGNU Emacs*\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lwidgets.py\u001b[K\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*GNU Emacs*\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lscratch*\u001b[K\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[C* An alert that pops up when a player ends their turn\r\n * Some intel boxes that display information about the map when you hover\u001b[K\r\n   over tiles\u001b[K\r\n * (maybe) terrain movement inhibition (roads are easier than forests)\r\n\u001b[C* adding map name to the data format\u001b[K\r\n\u001b[C* adding play history to the data format\r\n\u001b[C* save/load data from the rules\r\n\u001b[C* change rendering so that the cells don't try to render their units\r\n\u001b[K\nLet's do this.\u001b[K\r\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;4H\u001b[7mU:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L21    (Lisp Interaction) -\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ emacs\b\b\b\b\bcd Documents/open-tactics/\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bemacs\u001b[K\b\b\b\b\b\u001b[K\u0007./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;4H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bemacs\u001b[K\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[H\u001b[2J\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[H\u001b[2J\u001b[23d\u001b[?25l\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Fundamental) ---------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lLoading 00debian-vars...\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;25H\u001b[?25ldone\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;9H\u001b[?25l/etc/emacs/site-start.d/50autoconf.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;58H\u001b[?25ldone\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;35H\u001b[?25ldictionaries-common.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;9H\u001b[?25ldebian-ispell...\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;9H\u001b[?25l/var/cache/dictionaries-common/emacsen-ispell-default.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25le\u001b[K\u001b[H\u001b[7mFile Edit Options Buffers Tools Help                                            \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Fundamental) ---------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\nLoading /var/cache/dictionaries-common/emacsen-ispell-default.el (source)...don\\\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[A\t\u001b[?25ldebian-ispell...done\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;9H\u001b[?25l/var/cache/dictionaries-common/emacsen-ispell-dicts.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;75H\u001b[?25ldone\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;10H\u001b[?25letc/emacs/site-start.d/50dictionaries-common\u001b[6P\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[>0c\u001b[24d\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Lisp-Interaction Help                           \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Lisp Interaction) ----------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\nLoading /etc/emacs/site-start.d/50dictionaries-common.el (source)...done\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;23r\u001b[22;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[?25lFor information about GNU Emacs and the GNU system, type C-h C-a.\u001b[22;1H\u001b[K\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lFor information about GNU Emacs and the GNU system, type C-h C-a.\u001b[K\u001b[H\u001b[7mFile Edit Options Buffers Tools Help                                            \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\nWelcome to GNU Emacs, one component of the GNU/Linux operating system.\u001b[K\r\n\u001b[K\nGet help           C-h  (Hold down CTRL and press h)\u001b[K\r\n\u001b[4m\u001b[34mEmacs manual\u001b[0m\u001b[39;49m       C-h r        \u001b[4m\u001b[34mBrowse manuals\u001b[0m\u001b[39;49m     C-h i\u001b[K\r\n\u001b[4m\u001b[34mEmacs tutorial\u001b[0m\u001b[39;49m     C-h t        Undo changes       C-x u\u001b[K\r\n\u001b[4m\u001b[34mBuy manuals\u001b[0m\u001b[39;49m        C-h RET      Exit Emacs         C-x C-c\u001b[K\r\n\u001b[4m\u001b[34mActivate menubar\u001b[0m\u001b[39;49m   M-`\u001b[K\r\n(`C-' means use the CTRL key.  `M-' means use the Meta (or Alt) key.\u001b[K\r\nIf you have no Meta key, you may instead type ESC followed by the character.)\u001b[K\r\nUseful tasks:\u001b[K\r\n\u001b[4m\u001b[34mVisit New File\u001b[0m\u001b[39;49m                  \u001b[4m\u001b[34mOpen Home Directory\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[4m\u001b[34mCustomize Startup\u001b[0m\u001b[39;49m               \u001b[4m\u001b[34mOpen *scratch* buffer\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\nGNU Emacs 24.3.1 (i686-pc-linux-gnu)\u001b[K\r\n of 2013-07-26 on komainu, modified by Debian\u001b[K\r\nCopyright (C) 2013 Free Software Foundation, Inc.\u001b[K\r\n\u001b[K\nGNU Emacs comes with ABSOLUTELY NO WARRANTY; type C-h C-w for \u001b[4m\u001b[34mfull details\u001b[0m\u001b[39;49m.\u001b[K\r\nEmacs is Free Software--Free as in Freedom--so you can redistribute copies\u001b[K\r\nof Emacs and modify it; type C-h C-c to see \u001b[4m\u001b[34mthe conditions\u001b[0m\u001b[39;49m.\u001b[K\r\nType C-h C-o for information on \u001b[4m\u001b[34mgetting the latest version\u001b[0m\u001b[39;49m.\u001b[K\r\n\u001b[7m-UUU:%%--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*GNU Emacs* \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1     (Fundamental) ---------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2d\u001b[24d\u001b[?25l(No files need saving)\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ emacs\b\b\b\b\b./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bemacs\u001b[K\b\b\b\b\bcd Documents/open-tactics/\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bemacs\u001b[K\b\b\b\b\b./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bemacs\u001b[K\b\b\b\b\b\u001b[Kd\b\u001b[Kfg\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Lisp-Interaction Help                           \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n * An alert that pops up when a player ends their turn\u001b[K\r\n * Some intel boxes that display information about the map when you hover\u001b[K\r\n   over tiles\u001b[K\r\n * (maybe) terrain movement inhibition (roads are easier than forests)\u001b[K\r\n * adding map name to the data format\u001b[K\r\n * adding play history to the data format\u001b[K\r\n * save/load data from the rules\u001b[K\r\n * change rendering so that the cells don't try to render their units\u001b[K\r\n\u001b[K\nLet's do this.\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[7m-UUU:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L21    (Lisp Interaction) ----------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[11;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\u001b[C\u001b[?25l* change rendering so that the cells don't try to render their units\r\n\u001b[K\nLet's do this.\u001b[K\u001b[23;35H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\n\u001b[?25l * change rendering so that the cells don't try to render their units\u001b[K\u001b[23;34H\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l\u001b[31m;; This buffer is for notes you don't want to save, and for Lisp evaluation.    \u001b[39;49m\r\n\u001b[31m;; If you want to create a file, visit that file with C-x C-f,                  \u001b[39;49m\r\n\u001b[31m;; then enter the text in that file's own buffer.                               \u001b[39;49m\r\n\u001b[K\nTODAY IS GOING TO BE A BIG DAY.\u001b[K\r\n\u001b[K\nI've got a lot of plans for today. Been thinking about structure all weekend\r\nand I'm ready to implement some code.\r\n\u001b[K\nMost of what I plan to do today is GUI-related, but let's list all the stuff\r\nI'd like to accomplish:\r\n * An alert that pops up when a player ends their turn\r\n\u001b[C* Some intel boxes that display information about the map when you hover\u001b[15;4Hover tiles\r\n\u001b[C* (maybe) terrain movement inhibition (roads are easier than forests)\r\n\u001b[C* adding map name to the data format\r\n\u001b[C* adding play history to the data format\r\n\u001b[C* save/load data from the rules\r\n\nDone:\n\b\b\b\b* change rendering so that the cells don't try to render their units\u001b[23;29H\u001b[7mTop L11\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9 \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\n\u001b[?25l * An alert that pops up when a player ends their turn\u001b[K\u001b[23;35H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\n\u001b[31m# A grid is made up of Cells. The cells all have properties that make up\u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.          \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon = icon\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\n    \u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n\u001b[C   \u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[C   \u001b[31m# the unit's draw will be prioritized.                                      \u001b[39;49m\r\n\u001b[17;4H \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\u001b[C       \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[K\r\n\u001b[C           \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color +\u001b[32m\"!\"\u001b[39;49m\r\n\u001b[C       draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color+col)\r\n\u001b[K\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   61% L171  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default *scratch*): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/code/core/\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lme.py\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[31m# A game object handles all of the actual game play elements. The rules         \u001b[39;49m\r\n\u001b[3;3H\u001b[31mare what give meaning to the pieces in a Grid, and is controlled (usually)\u001b[39;49m\u001b[4;3H\u001b[31mby a Controller that provides piecewise input.\u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m grid, widgets\u001b[K\r\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Global strings. Stored to avoid mistyping.                                    \u001b[39;49m\r\n\u001b[33mCTRL_COORD\u001b[39;49m = \u001b[32m\"coord\"\u001b[39;49m\r\n\u001b[33mCTRL_MENU\u001b[39;49m = \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = \u001b[32m\"undo\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Custom Cell subclass. Contains information such as terrain defensive bonus.   \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(grid.Cell):\u001b[K\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\u001b[K\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\u001b[23;15H\u001b[7m\u001b[1mame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1    Git-\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\u001b[K\r\n\u001b[K\u001b[4;3H\u001b[31mCustom Team subclass. Contains information such as resources.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(grid.Team):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Team, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, color)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\r\n\u001b[K\n\u001b[31m# Custom Unit subclass. Contains information such as HP, readiness, and         \u001b[39;49m\r\n\u001b[31m# a custom drawing method.                                                      \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(grid.Unit):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Unit, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon)\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This drawing method overrides the default method by handling              \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n\u001b[23;29H\u001b[7m 4% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m# A game object handles all of the actual game play elements. The rules         \u001b[39;49m\r\n\u001b[31m# are what give meaning to the pieces in a Grid, and is controlled (usually)    \u001b[39;49m\r\n\u001b[4;3H\u001b[31mby a Controller that provides piecewise input.               \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m grid, widgets\u001b[K\r\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\r\n\u001b[K\n\u001b[K\n\u001b[31m# Global strings. Stored to avoid mistyping.                                    \u001b[39;49m\r\n\u001b[33mCTRL_COORD\u001b[39;49m = \u001b[32m\"coord\"\u001b[39;49m\u001b[K\r\n\u001b[33mCTRL_MENU\u001b[39;49m = \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = \u001b[32m\"undo\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Custom Cell subclass. Contains information such as terrain defensive bonus.   \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(grid.Cell):\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\u001b[K\u001b[21;5H    \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7mTop\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\u001b[K\r\n\u001b[K\u001b[4;3H\u001b[31mCustom Team subclass. Contains information such as resources.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(grid.Team):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Team, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, color)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\r\n\u001b[K\n\u001b[31m# Custom Unit subclass. Contains information such as HP, readiness, and         \u001b[39;49m\r\n\u001b[31m# a custom drawing method.                                                      \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(grid.Unit):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Unit, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon)\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This drawing method overrides the default method by handling              \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n\u001b[23;29H\u001b[7m 4%\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\r\n\u001b[K\n\t\u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n\t\u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\u001b[11;52H\u001b[8P\r\u001b[8@\u001b[11;11H\u001b[31mBuild the animation for this unit based on values\u001b[39;49m\r\n        \u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\u001b[13;5H    \u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon]\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp < 90):\u001b[K\r\n\t    frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\u001b[20;63H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mDraw the character.                                     \u001b[39;49m\u001b[21;5H    draw.char(x, y, img, color)\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m9% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    draw.char(x, y, img, color)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Game serve two purposes. Firstly, it is a factory that produces           \u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[31m# state of the game grid.                                                       \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  make_unit                                      \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  make_team                          \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[31m#   pop_alerts                                                                  \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[31m# TODO: load the rules definition (types of units and properties)       \u001b[39;49m\r\n\u001b[20;11H\u001b[31mCreate the grid with what's left.\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[23;29H\u001b[7m13% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[5;62H\u001b[8P\r\u001b[8@\t\t\b\b\u001b[31mhistory contains all actions for this player turn.     \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\u001b[8;32H\u001b[8P\r\u001b[8@\u001b[8;11H\u001b[31mThese are the state variables\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n\t\b\u001b[8P\r\u001b[8@\u001b[13;11H\u001b[31mother\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n        \u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\u001b[17;5H    \u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\u001b[18;11H\u001b[31mitself. Ugh.                                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[K\u001b[21;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[22;14Hmatrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[23;30H\u001b[7m7% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[3;14Hmatrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\u001b[6;14Hproperties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[K\u001b[9;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[10;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[11;14Hproperties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[13;5H\u001b[4P\t\b\b\u001b[31mThis function produces a Unit object based on the unit c\u001b[39;49m\u001b[4@\u001b[31mode.\u001b[39;49m\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[4P\t\b\b\u001b[31mThis function produces a Cell object based on the terrain c\u001b[39;49m\u001b[4@\u001b[31mode.\u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m22% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[15;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[19;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\n\b\b\b\u001b[7m8% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[4;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[10;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[11;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[12;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[13;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[20;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\u001b[23;29H\u001b[7m32% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[16;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[21;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[23;30H\u001b[7m7% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[23;29H\u001b[7m42% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[11;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[20;22Hhistory\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[23;30H\u001b[7m6% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[8;14Hchoices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[11;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[15;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[16;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m51% L210\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[8;14Hstate = new_state\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[11;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[12;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[13;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[15;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[23;30H\u001b[7m5% L229\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\u001b[6;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\u001b[7;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\r\n\u001b[K\u001b[11;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[14;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[18;5H    \u001b[33mx\u001b[39;49m,y = coord\u001b[K\u001b[19;5H    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[20;5H    team = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[22;51H\u001b[4P\u001b[22;5H\u001b[4@\u001b[22;11H\u001b[31mIf no unit, check for terrain               \u001b[39;49m\u001b[23;29H\u001b[7m61% L248\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;51H\u001b[4P\u001b[3;5H\u001b[4@\u001b[3;11H\u001b[?25l\u001b[31mIf no unit, check for terrain               \u001b[39;49m\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m,\u001b[32m\"Undo\"\u001b[39;49m,\u001b[32m\"Start Over\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[13;58H\u001b[4P\u001b[13;5H\u001b[4@\u001b[13;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\u001b[23;30H\u001b[7m8% L267\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[7;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[9;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[10;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[21;18Haction.append((x,y))\u001b[K\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\n\b\u001b[7m73% L286\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[6;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m,\u001b[32m\"Undo\"\u001b[39;49m,\u001b[32m\"Start Over\"\u001b[39;49m]\u001b[7;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[9;47H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[21;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get_move_range(x,y)\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[23;29H\u001b[7m68\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[3;5H\u001b[4P\t\b\b\u001b[31m    undo: Tell the controller to reload the \u001b[39;49m\u001b[4@\u001b[31mgrid\u001b[39;49m\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[13;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[14;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\tu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\tteam = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[23;30H\u001b[7m1% L268\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[11;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[12;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[13;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[22;5H\u001b[4P\t\b\b\u001b[31m    undo: Tell the controller to reload the \u001b[39;49m\u001b[4@\u001b[31mgrid\u001b[39;49m\u001b[23;29H\u001b[7m55% L249\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[8;14Hchoices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[15;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[16;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\u001b[23;30H\u001b[7m1% L230\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[8;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[15;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[20;22Hhistory\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[23;29H\u001b[7m46% L211\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[5;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[11;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[16;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[23;30H\u001b[7m2% L192\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;51H\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[11;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[20;22Hhistory\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[23;30H\u001b[7m6% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[5;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[11;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[16;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[13;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\t\b\b\u001b[31mchange the checkpoint and save the move in our history.            \u001b[39;49m\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[18;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[19;14Hchoices = []\r\n\t\t\beckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m4% L193\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[4;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[9;22Hhistory\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[16;14Hchoices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[19;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\n\u001b[C\u001b[7m9% L202\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[4;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[5;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\u001b[9;14Hchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[16;14Hstate = new_state\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[19;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[20;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[21;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[23;29H\u001b[7m53% L221\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[4;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[8;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[9;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[10;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[11;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\u001b[14;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\u001b[15;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\r\n\u001b[K\u001b[19;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[23;30H\u001b[7m9% L240\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[7;5H    \u001b[33mx\u001b[39;49m,y = coord\u001b[K\u001b[8;5H    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[9;5H    team = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[11;51H\u001b[4P\u001b[11;5H\u001b[4@\u001b[11;11H\u001b[31mIf no unit, check for terrain               \u001b[39;49m\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m,\u001b[32m\"Undo\"\u001b[39;49m,\u001b[32m\"Start Over\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[19;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[21;58H\u001b[4P\u001b[21;5H\u001b[4@\u001b[21;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[23;29H\u001b[7m66% L259\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;58H\u001b[4P\u001b[2;5H\u001b[4@\u001b[2;11H\u001b[?25l\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[15;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[17;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[18;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[23;29H\u001b[7m70% L278\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,y = coord\u001b[K\r\n\tu = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\tteam = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m,\u001b[32m\"Undo\"\u001b[39;49m,\u001b[32m\"Start Over\"\u001b[39;49m]\u001b[15;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[17;47H\u001b[4P\u001b[17;5H\u001b[4@\u001b[17;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[23;29H\u001b[7m66\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[8;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[9;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[10;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[11;5H\u001b[4P\t\b\b\u001b[31m    undo: Tell the controller to reload the \u001b[39;49m\u001b[4@\u001b[31mgrid\u001b[39;49m\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[21;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m59% L260\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[4;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[5;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[19;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[20;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[21;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m3% L241\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[4;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[9;22Hhistory\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[16;14Hchoices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\n\u001b[7m49% L222\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[4;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[5;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\u001b[9;14Hchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[16;14Hstate = new_state\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[19;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[20;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[21;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[23;29H\u001b[7m53\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[4;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[8;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[9;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[10;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[11;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\u001b[14;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\u001b[15;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\r\n\u001b[K\u001b[19;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[23;30H\u001b[7m9% L240\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[4;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[5;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[19;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[20;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[21;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[4;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[9;22Hhistory\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[16;14Hchoices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\n\u001b[7m49% L222\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[5;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\u001b[9;14Hchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[16;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[23;30H\u001b[7m4% L203\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33md\u001b[39;49m = def_unit.icon\u001b[3;5H    \u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[5;5H        \u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[13;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[19;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[23;30H\u001b[7m0% L184\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[5;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[9;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[22;5H    \u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[K\u001b[23;29H\u001b[7m35% L165\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[9;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[10;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[15;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[18;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\u001b[23;30H\u001b[7m0% L146\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;7H\u001b[?25l\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[4;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[23;29H\u001b[7m25% L127\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;63H\u001b[4P\u001b[2;5H\u001b[4@\u001b[2;11H\u001b[?25l\u001b[31mother                                                   \u001b[39;49m\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\u001b[7;66H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mitself. Ugh.                                               \u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\u001b[7m0% L108\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[8P\u001b[2;3H\u001b[?25l\u001b[31m  mak\u001b[39;49m\u001b[8@\u001b[31me_cell  \u001b[39;49m\r\n\u001b[31m#   pop_alerts                                                                  \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[7;11H\u001b[31mTODO: load the rules definition (types of units and properties)\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[10;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[11;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[14;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[17;14Haction = []\u001b[K\u001b[18;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[19;14Hchoices = []\u001b[K\u001b[21;63H\u001b[4P\u001b[21;5H\u001b[4@\u001b[21;11H\u001b[31mother                                                   \u001b[39;49m\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[23;29H\u001b[7m16% L89 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;57H\u001b[8P\r\u001b[8@\u001b[2;11H\u001b[?25l\u001b[31mThe history contains all actions for this player turn.\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\n        \u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\u001b[11;14Halerts = []\u001b[K\u001b[13;15H\u001b[31mfirst index is the attacker, the second is the defender.\u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[17;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[18;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[19;14Hmatrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\u001b[22;14Hproperties = {}\n\u001b[C\u001b[7m8% L90\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   18% L90\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mTrue\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[3;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[6;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[7;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[8;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\u001b[11;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[4P\t\b\b\u001b[31mThis function produces a Cell object based on the terrain c\u001b[39;49m\u001b[4@\u001b[31mode.\u001b[39;49m\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\b\u001b[7m23% L99\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[8;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[13;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[17;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[21;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\u001b[23;30H\u001b[7m8% L118\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[8;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[9;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[10;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[11;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[18;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\u001b[23;29H\u001b[7m32% L137\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[14;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[19;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[23;30H\u001b[7m7% L156\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[6;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[23;29H\u001b[7m42% L175\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[12;5H    \u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[14;5H        \u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[22;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\n\u001b[C\u001b[7m37\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[6;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[23;29H\u001b[7m42\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m80\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;26H\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[23;36H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mTrue\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[9;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[12;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[19;22Hhistory\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[23;30H\u001b[7m7% L194\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[4;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[7;14Hchoices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[10;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[14;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[15;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m51% L213\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[23;36H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\\\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\b\b\b\u001b[K\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\b\u001b[K\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mTrue\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   51% L224  Git:\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[14;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[23;29H\u001b[7m47% L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[3;13H\u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[4;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[9;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\t\b\b\u001b[31msupposed to set its camera's grid to the new one.          \u001b[39;49m\r\n\t\u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m2% L195\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[12;5H    \u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[14;5H        \u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\r\n\t\u001b[4@\u001b[20;22H.remove_unit(ax,ay)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[22;13H\u001b[33mdef_unit.hp\u001b[39;49m = 0\n\u001b[C\u001b[7m37% L176\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[5;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[8;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[14;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[23;30H\u001b[7m2% L157\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[8;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[18;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[19;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\u001b[23;29H\u001b[7m28% L138\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[13;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\u001b[7m3% L119\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[3;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[6;14Haction = []\u001b[K\u001b[7;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[8;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\u001b[16;66H\u001b[4P\u001b[16;5H\u001b[4@\u001b[16;11H\u001b[31mitself. Ugh.                                               \u001b[39;49m\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[23;29H\u001b[7m18% L100\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[8P\t\b\b\u001b[?25l\u001b[31mGame serve two purposes. Firstly, it is a factory that \u001b[39;49m\u001b[8@\u001b[31mproduces\u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[8P\u001b[5;3H\u001b[31mstate of the game grid.      \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[31m#   make_unit                                                                   \u001b[39;49m\r\n\u001b[31m#   make_team                                                                   \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  mak\u001b[39;49m\u001b[8@\u001b[31me_cell  \u001b[39;49m\r\n\u001b[31m#   pop_alerts                                                                  \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[15;12H\u001b[31mODO: load the rules definition (types of units and properties)\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[18;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[19;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[22;14Hhistory = []\u001b[K\u001b[23;30H\u001b[7m4% L81 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;62H\u001b[8P\r\u001b[8@\t\t\b\b\u001b[?25l\u001b[31mhistory contains all actions for this player turn.     \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\u001b[5;32H\u001b[8P\r\u001b[8@\u001b[5;11H\u001b[31mThese are the state variables\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n\t\b\u001b[8P\r\u001b[8@\u001b[10;11H\u001b[31mother\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;5H    \u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\u001b[15;12H\u001b[31mhis information should really be stored in the Unit object    \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[18;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[19;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[22;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[23;30H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[3;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[6;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[7;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[8;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\u001b[11;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[4P\t\b\b\u001b[31mThis function produces a Cell object based on the terrain c\u001b[39;49m\u001b[4@\u001b[31mode.\u001b[39;49m\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\b\u001b[7m23% L99\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[8;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[13;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[17;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[21;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\u001b[23;30H\u001b[7m8% L118\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[8;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[9;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[10;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[11;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[18;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\u001b[23;29H\u001b[7m32% L137\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[14;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[19;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[23;30H\u001b[7m7% L156\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[6;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[4P\t\u001b[C = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m42% L175\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[9;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[12;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[19;22Hhistory\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[23;30H\u001b[7m7% L194\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[3;13H\u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[4;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[9;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\t\b\b\u001b[31msupposed to set its camera's grid to the new one.          \u001b[39;49m\r\n\t\u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;26H\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[8;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L181\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\u001b[?25l        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\u001b[23;36H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\n\u001b[?25l        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\u001b[23;36H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\u001b[?25l\u001b[33mstart\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lOverwrite mode enabled\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;58H\u001b[?25l\u001b[7m Ovwrt) \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;16H\u001b[?25ldisabled\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;58H\u001b[?25l\u001b[7m) ------\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;24H\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[C\u001b[?25lF\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[35mFalse\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[C\u001b[?25l\u001b[1@\u001b[33ms\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[10;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\u001b[C\u001b[?25lstart:\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lestart:\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25llstart:\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lfstart:\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\u001b[23;36H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;13H\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33ma\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                 \u001b[39;49m\r\n\u001b[32m            self.alerts                                                         \u001b[39;49m\r\n\u001b[9;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m            self.start = False                                                  \u001b[39;49m\r\n\u001b[32m        report = self.alerts                                                    \u001b[39;49m\r\n\u001b[32m        self.alerts = []                                                        \u001b[39;49m\r\n\u001b[32m        return report                                                           \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m    # This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[32m    # checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[32m    # supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[32m    def start_over(self):                                                       \u001b[39;49m\r\n\u001b[32m        self.start = True                                                       \u001b[39;49m\r\n\u001b[32m        self.action = []                                                        \u001b[39;49m\r\n\u001b[32m        self.state = None                                                       \u001b[39;49m\r\n\u001b[9;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\r\n\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\u001b[9;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        report = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                 \u001b[39;49m\r\n\u001b[32m            self.alerts                                                         \u001b[39;49m\r\n\u001b[9;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m            self.start = False                                                  \u001b[39;49m\r\n\u001b[32m        report = self.alerts                                                    \u001b[39;49m\r\n\u001b[32m        self.alerts = []                                                        \u001b[39;49m\r\n\u001b[32m        return report                                                           \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m    # This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[32m    # checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[32m    # supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[32m    def start_over(self):                                                       \u001b[39;49m\r\n\u001b[32m        self.start = True                                                       \u001b[39;49m\r\n\u001b[32m        self.action = []                                                        \u001b[39;49m\r\n\u001b[32m        self.state = None                                                       \u001b[39;49m\r\n\u001b[9;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mN\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\u001b[A\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        report = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[9;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;42H\r\n\n\n\t\u001b[?25l\u001b[33mreport\u001b[39;49m\u001b[9;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[9;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[9;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;42H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgrid.py\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lwidgets.py\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*GNU Emacs*\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lwidgets.py\u001b[K\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[31m# Draw all of the tiles.                                                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m _x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(cx,cx+w):\u001b[4;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m _y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(cy,cy+h):\u001b[K\r\n\t\t\u001b[33mtx\u001b[39;49m,\u001b[33mty\u001b[39;49m = _x+x-cx, _y+y-cy\u001b[6;5H            \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(_x,_y)\u001b[K\r\n\u001b[K\n\t        \u001b[31m# Apply multiple levels of inverted color when tiles            \u001b[39;49m\r\n\u001b[9;13H    \u001b[31m# are highlighted by the interface.                             \u001b[39;49m\r\n\u001b[10;13H    \u001b[33mcur\u001b[39;49m = col\u001b[11;13H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim < 1.0 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (_x,_y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink: \u001b[33mcur\u001b[39;49m += \u001b[32m\"?\"\u001b[39;49m\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor == (_x,_y): cur += \u001b[32m\"w?\"\u001b[39;49m\r\n\u001b[K\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m ( tile \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (tx-x >= 0) \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (ty-y >= 0) \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m\u001b[15;22H(\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m tx < x+w) \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m h \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m ty < y+h)):\u001b[16;5H                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\u001b[17;5H                    tile.unit.draw(tx,ty,cur)\u001b[K\u001b[18;5H                \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[19;5H                    tile.draw(tx,ty,cur)\r\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;14H\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L235\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\n\n\n\n\n\u001b[?25lEnd of buffer\u001b[19;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[2;11H\u001b[?25l\u001b[31mIf we press enter, send that information to the caller.\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"enter\"\u001b[39;49m:\u001b[K\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim = 0.0\u001b[K\u001b[5;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[8;5H\u001b[12P\t\b\b\u001b[31mDraw the camera.                                  \u001b[39;49m\u001b[12@\u001b[31m            \u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\t\u001b[33mw\u001b[39;49m,h = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\r\n\t\u001b[33mcx\u001b[39;49m,cy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport\u001b[K\r\n\u001b[K\n\t\u001b[31m# The blink animation.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim_speed\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim >= 2:\u001b[K\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim = 0.0\r\n\u001b[K\n\tdraw.border(x,y,w,h,\u001b[32m\"--||+\"\u001b[39;49m)\r\n\tdraw.fill(x,y,w,h)\u001b[K\r\n\n\t\u001b[31m# Draw all of the tiles.                                                \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m _x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(cx,cx+w):\n\b\b\b\b\b\u001b[7m83% L219\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim = 0.0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim_speed = 0.1\r\n\u001b[K\u001b[5;5H\u001b[31m# Returns the cursor when the player presses Enter. Moves the               \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# cursor around when the arrow keys are pressed.                            \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[8;5H    \u001b[33mx\u001b[39;49m, \u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x, y-1\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x, y+1\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"left\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x-1, y\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"right\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = x+1, y\r\n\u001b[K\n\t\u001b[31m# Move the camera to keep the cursor visible.                           \u001b[39;49m\r\n\t\u001b[33mcx\u001b[39;49m, cy = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m x < cx: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport = cx-\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w/2,cy\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m y < cy: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport = cx,cy-\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h/2\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m x >= cx+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport = cx+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w/2,cy\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m y >= cy+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport = cx,cy+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h/2\u001b[21;11H\u001b[31mIf we press enter, send that information to the caller.\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"enter\"\u001b[39;49m:\u001b[K\u001b[23;29H\u001b[7m74% L200\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25li = y+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\u001b[K\r\n\t\u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text):\u001b[4;13Hi -= 1\u001b[5;5H        \u001b[33ms\u001b[39;49m,c = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text[w]\u001b[K\u001b[6;5H        draw.string(x,i,s,c+col)\u001b[K\u001b[7;5H        \u001b[33mw\u001b[39;49m += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A Camera is an interactable widget that serves as a representation of         \u001b[39;49m\r\n\u001b[31m# a Grid.                                                                       \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCamera\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = 0,0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport = 0,0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim = 0.0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim_speed = 0.1\u001b[23;29H\u001b[7m68% L181\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where -= where\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where < 0:\u001b[K\u001b[4;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\r\n\u001b[K\u001b[6;5H\u001b[31m# The buffer does usually handle input, but when it does,                   \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# up and down scroll it. This handle-input never returns                    \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# anything other than None.                                                 \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(-1)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(1)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This draws the buffer with its current width and height such              \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# that it starts with the top-left x,y of the terminal. You can             \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# override the colors (gray out) by providing a col parameter.              \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\tdraw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\r\n\tdraw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\r\n\tw = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where\u001b[K\r\n\ti = y+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\u001b[K\r\n\t\u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text):\u001b[23;29H\u001b[7m59% L162\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[4;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\u001b[6;5H                \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[K\u001b[7;5H                report.append((old,col))\u001b[K\u001b[8;5H            \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[9;5H                report.append((current,col))\r\n\t            \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\u001b[11;13Hurrent:\u001b[K\r\n\t    report.append((current,col))\r\n\treport.reverse()\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = report + \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# Positive numbers scroll to newer elements, and negative                   \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# numbers scroll to older ones. \"None\" will scroll to the                   \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# end.                                                                      \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mscroll\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, where):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where -= where\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where < 0:\u001b[K\u001b[23;30H\u001b[7m0% L143\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(\u001b[32m\"%d%%\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start)\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(HPAlert, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).draw(x,y,col)\r\n\u001b[K\n\u001b[K\n\u001b[31m# A buffer is just a window that contains text. You can add more text to it     \u001b[39;49m\r\n\u001b[31m# and it will automatically scroll to the newest. Each line in the buffer is    \u001b[39;49m\r\n\u001b[31m# a (text,color) tuple.                                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mBuffer\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\n\b\b[]\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# This adds a string 's' to the buffer and rescrolls to the                 \u001b[39;49m\r\n\t\b\b\u001b[31mend. Word-wraps the text if necessary.                 \u001b[39;49m\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s, col=\u001b[32m\"w\"\u001b[39;49m):\u001b[K\u001b[19;5H    \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\u001b[20;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[23;29H\u001b[7m42% L124\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[?25l\u001b[31m# The HPAlert is a special kind of alert that is used when a unit's HP          \u001b[39;49m\r\n\u001b[31m# is going down. The Alert starts at a certain HP and decreases until           \u001b[39;49m\r\n\u001b[31m# it reaches end. In order to facilitate animation, you can also put in         \u001b[39;49m\r\n\u001b[6;3H\u001b[31ma delay so that another unit's animation can finish before this one      \u001b[39;49m\u001b[7;3H\u001b[31mstarts.                                                                   \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mHPAlert\u001b[39;49m(Alert):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, col=\u001b[32m\"w\"\u001b[39;49m, start=100, end=0, delay=0):\u001b[10;5H    \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(HPAlert, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(w,h, \u001b[32m\"%d%%\"\u001b[39;49m%start,  col)\r\n\t\u001b[31m#self.alert = widgets.Alert( 6,1,\"%d%%\"%start, col)                     \u001b[39;49m\r\n\u001b[12;14Hstart = start\u001b[13;14Hend = end\u001b[14;14Hdelay = delay\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay > 0:\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay -= 1\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start > \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start -= 1\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(\u001b[32m\"%d%%\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start)\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(HPAlert, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).draw(x,y,col)\u001b[23;29H\u001b[7m33% L105\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;21H\u001b[?25l\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[K\r\n            report.append(current)\u001b[K\r\n        report.reverse()\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = report\u001b[K\r\n\u001b[K\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[9;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\tdraw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\r\n\tdraw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\r\n\t\u001b[33mw\u001b[39;49m = 0\u001b[K\r\n\t\u001b[33mi\u001b[39;49m = y+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\u001b[16;5H    \u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text):\r\n\t    \u001b[33mi\u001b[39;49m -= 1\u001b[K\n\b\b\b\b\b\bdraw.string(x,i,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text[w],\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\r\n\t    \u001b[33mw\u001b[39;49m += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The HPAlert is a special kind of alert that is used when a unit's HP          \u001b[39;49m\r\n\u001b[23;29H\u001b[7m26% L86 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mAlert\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, msg=\u001b[32m\"\"\u001b[39;49m, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\u001b[6;21H[]\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = col\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(msg)\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s):\u001b[11;5H    \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip(\u001b[17;13H        \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[18;13H        report.append(old)\u001b[K\u001b[19;13H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\breport.append(current)\u001b[21;21H\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[K\u001b[23;29H\u001b[7m19% L67\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[3;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\r\n\u001b[K\u001b[6;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\u001b[9;13H\u001b[33ma\u001b[39;49m = widgets.alert(\u001b[32m\"New Turn\"\u001b[39;49m)\u001b[10;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[12;18H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[23;14H\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L182\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default widgets.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mAlert\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, msg=\u001b[32m\"\"\u001b[39;49m, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = col\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(msg)\r\n\u001b[K\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s):\r\n\t\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\n\b\b\b[]\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[15;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\u001b[16;5H            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\u001b[K\u001b[17;5H                \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[K\u001b[18;5H                report.append(old)\u001b[K\u001b[19;5H            \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t            report.append(current)\r\n\t            \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[K\n\b\b\b\b\b\b\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   19% L67 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[3;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\r\n\u001b[K\u001b[6;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\u001b[9;13H\u001b[33ma\u001b[39;49m = widgets.alert(\u001b[32m\"New Turn\"\u001b[39;49m)\u001b[10;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[12;18H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[23;14H\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L182\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@1\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@0\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[9;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[9;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;47H\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\t\u001b[?25lreport\u001b[10;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l0\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l0\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[10;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[10;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[10;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\t\u001b[?25l\u001b[33mreport\u001b[39;49m\u001b[10;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;39H\b\b\b\b\b\b\b\u001b[?25l(a,10,10)\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\r\n\n\t\u001b[?25lreport\u001b[10;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l)\r\t\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[10;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[10;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\bemacs\b\b\b\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 81, in run\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 259, in handle_input\r\n    self.alerts += self.world.pop_alerts()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 182, in pop_alerts\r\n    a = widgets.alert(10,1,\"New Turn\")\r\nAttributeError: 'module' object has no attribute 'alert'\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\r\n            \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n            \u001b[33ma\u001b[39;49m = widgets.alert(10,1,\u001b[32m\"New Turn\"\u001b[39;49m)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,10))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        report = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L183  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[10;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\t\u001b[?25l\u001b[33mreport\u001b[39;49m\u001b[10;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 74, in run\r\n    self.display()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 56, in display\r\n    self.g.draw(1,1)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 277, in draw\r\n    m.time -= 1\r\nAttributeError: 'Alert' object has no attribute 'time'\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\r\n            \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n            \u001b[33ma\u001b[39;49m = widgets.Alert(10,1,\u001b[32m\"New Turn\"\u001b[39;49m)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,10))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L182  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[9;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;47H\u001b[1;22r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L183\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;13H\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\b\u001b[?25l\u001b[33ma.time\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l5\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l0\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[10;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[10;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[11;11H+----------+\u001b[12;11H|New Turn  |\u001b[13;11H+----------+\u001b[23;8H\u001b[11;11H\u001b[32m\u001b[40m............\u001b[12;11H............\u001b[13;11H............\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\r\n            \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n            \u001b[33ma\u001b[39;49m = widgets.Alert(10,1,\u001b[32m\"New Turn\"\u001b[39;49m)\u001b[K\r\n            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,10))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L183  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[10;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;42H\b\b\b\b\u001b[?25l0))\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l))\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l5))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[11;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[11;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mw Turn\"\u001b[39;49m)\u001b[K\u001b[9;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m Turn\"\u001b[39;49m)\u001b[K\u001b[9;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mTurn\"\u001b[39;49m)\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32murn\"\u001b[39;49m)\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mrn\"\u001b[39;49m)\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\"\u001b[39;49m)\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mD\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32my\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m \"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m$\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[9;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[9;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;42H\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m%\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m \"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m:\"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m \"\u001b[39;49m)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[32m \"\u001b[39;49m)\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m \"\u001b[39;49m)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m- \"\u001b[39;49m)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\u001b[?25l            \u001b[33ma\u001b[39;49m = widgets.Alert(10,1,\u001b[32m\"Day %d - \"\u001b[39;49m)\u001b[K\u001b[23;36H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;13H\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mt\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[?25l,)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25lsel)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@\u001b[32m%\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1@%\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@(\u001b[11;13Ha.time\u001b[10;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@)\u001b[11;13H\u001b[33ma.time\u001b[39;49m\u001b[10;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36msel\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mf\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@g\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@y\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[10;65H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[10d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;65H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;65H\u001b[?25l\u001b[1@t\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;66H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[10;70H\u001b[?25le),t.color\\\r\n)\u001b[K\n\b            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\u001b[10;71H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[10;71H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[10;71H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;71H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 81, in run\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 259, in handle_input\r\n    self.alerts += self.world.pop_alerts()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 183, in pop_alerts\r\n    a = widgets.Alert(10,1,\"Day %d - %s\"%(self.grid.day,t.name),t.color)\r\nAttributeError: 'function' object has no attribute 'name'\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\r\n            \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team\u001b[K\r\n            \u001b[33ma\u001b[39;49m = widgets.Alert(10,1,\u001b[32m\"Day %d - %s\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name),t.color\\\r\n\u001b[A\n)\u001b[K\n\b            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L183  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[10;71H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[10;13Ha\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[10;13H\u001b[33ma\u001b[39;49m\u001b[9;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[9;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[9;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+----------+\u001b[7;11H|\u001b[31m\u001b[40mRed\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[8;11H+----------+\u001b[23;8H\u001b[6;11H\u001b[32m\u001b[40m............\u001b[7;11H............\u001b[8;11H............\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\r\n            \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n            \u001b[33ma\u001b[39;49m = widgets.Alert(10,1,\u001b[32m\"Day %d - %s\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name),t.color\\\r\n\u001b[A\n)\u001b[K\n\b            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L182  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[9;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[10;31H\u001b[?25l0,1,\u001b[32m\"Day %d - %s\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name),t.color)\u001b[K\u001b[22;1H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[10;31H\u001b[?25l20,1,\u001b[32m\"Day %d - %s\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name),t.color\\\r\n)\u001b[K\n\b            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+--------------------+\u001b[7;11H|\u001b[31m\u001b[40mDay 0 - Red\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         |\u001b[8;11H+--------------------+\u001b[23;8H\u001b[6;11H\u001b[32m\u001b[40m.....................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[7;11H\u001b[32m\u001b[40m.....................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[8;11H\u001b[32m\u001b[40m.....................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\r\n            \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n            \u001b[33ma\u001b[39;49m = widgets.Alert(20,1,\u001b[32m\"Day %d - %s\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name),t.color\\\r\n\u001b[A\n)\u001b[K\n\b            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L183  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[C\u001b[10;32H\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[10;34H\u001b[?25l,\u001b[32m\"Day %d - %s\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name),t.color)\u001b[K\u001b[22;1H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[10;34H\u001b[?25l2,\u001b[32m\"Day %d - %s\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name),t.color\\\r\n)\u001b[K\n\b            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\u001b[10;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[10;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[10;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+--------------------+\u001b[7;11H|\u001b[20X\u001b[7;32H|\u001b[8;11H|\u001b[31m\u001b[40mDay 0 - Red\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         |\u001b[9;11H+--------------------+\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[2;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[2;4H\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;4H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;5H+----------+\u001b[5;5H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[6;5H|End T\u001b[7;5H|Undo \u001b[8;5H|Start\u001b[9;5H+-----\u001b[23;8H\u001b[5d\b\bBack\u001b[6;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd T\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6d\b\bEnd T\u001b[7;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mUndo\u001b[23d\b\b\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6d\b\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[32m\u001b[40m...............\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[7;6HUndo      |\u001b[32m\u001b[40m...............\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[8;11H Over|\u001b[32m\u001b[40m...............\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[9;11H-----+\u001b[32m\u001b[40m...............\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[23;8H\u001b[4;5H\u001b[32m\u001b[40m............\u001b[5;5H............\u001b[6;5H......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+--------------------+\u001b[7;5H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[20X\u001b[7;32H|\u001b[8;5H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[34m\u001b[40mDay 0 - Blue\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[9;5H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+--------------------+\u001b[23;8H\u001b[5;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;5H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4d\b+----------+\u001b[5;7H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[6;7H|End\u001b[7;7H|Und\u001b[8;7H|Sta\u001b[9;7H+---\u001b[23;8H\u001b[5dBack\u001b[6;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4d\b\u001b[32m\u001b[40m............\u001b[5;7H............\u001b[6;7H....\u001b[7;7H....\u001b[8;7H....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mDay 1 - Red\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[9;7H\u001b[32m\u001b[40m....\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4d\b+----------+\u001b[5;7H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[6;7H|End\u001b[7;7H|Und\u001b[8;7H|Sta\u001b[9;7H+---\u001b[23;8H\u001b[5dBack\u001b[6;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4d\b\u001b[32m\u001b[40m............\u001b[5;7H............\u001b[6;7H....\u001b[7;7H....\u001b[8;7H....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[34m\u001b[40mDay 1 - Blue\u001b[9;7H\u001b[32m\u001b[40m....\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4d\b+----------+\u001b[5;7H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[6;7H|End\u001b[7;7H|Und\u001b[8;7H|Sta\u001b[9;7H+---\u001b[23;8H\u001b[5dBack\u001b[6;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4d\b\u001b[32m\u001b[40m............\u001b[5;7H............\u001b[6;7H....\u001b[7;7H....\u001b[8;7H....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mDay 2 - Red\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[9;7H\u001b[32m\u001b[40m....\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4d\b+----------+\u001b[5;7H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[6;7H|End\u001b[7;7H|Und\u001b[8;7H|Sta\u001b[9;7H+---\u001b[23;8H\u001b[5dBack\u001b[6;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4d\b\u001b[32m\u001b[40m............\u001b[5;7H............\u001b[6;7H....\u001b[7;7H....\u001b[8;7H....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[34m\u001b[40mDay 2 - Blue\u001b[9;7H\u001b[32m\u001b[40m....\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\r\n            \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n            \u001b[33ma\u001b[39;49m = widgets.Alert(20,2,\u001b[32m\"Day %d - %s\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name),t.color\\\r\n\u001b[A\n)\u001b[K\n\b            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L183  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[10;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default widgets.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mAlert\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, msg=\u001b[32m\"\"\u001b[39;49m, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = col\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(msg)\r\n\u001b[K\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s):\u001b[K\r\n        \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\u001b[14;13H\u001b[33mcurrent\u001b[39;49m += c\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n\t            \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[18;21Hreport.append(old)\u001b[19;5H            \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[20;5H                report.append(current)\u001b[K\u001b[21;5H                \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[K\n\b\b\b\b\b\b\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   19% L67 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l                    \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[K\r\n\t    report.append(current)\r\n\treport.reverse()\n\b\b\b\breport\r\n\u001b[K\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\tdraw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\r\n\tdraw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\r\n\t\u001b[33mw\u001b[39;49m = 0\u001b[K\r\n\t\u001b[33mi\u001b[39;49m = y+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\u001b[K\r\n\t\u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\u001b[17;13H\u001b[33mi\u001b[39;49m -= 1\u001b[K\n\b\b\b\b\b\bdraw.string(x,i,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text[w],\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\u001b[19;13H\u001b[33mw\u001b[39;49m += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The HPAlert is a special kind of alert that is used when a unit's HP          \u001b[39;49m\r\n\u001b[23;29H\u001b[7m26\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mAlert\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, msg=\u001b[32m\"\"\u001b[39;49m, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\u001b[6;21H[]\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = col\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(msg)\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s):\u001b[11;5H    \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip(\u001b[17;13H        \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[18;13H        report.append(old)\u001b[K\u001b[19;13H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\breport.append(current)\u001b[21;21H\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[K\u001b[23;29H\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\u001b[3;5H        \u001b[33mcurrent\u001b[39;49m += c\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n\t            \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\r\n\t            report.append(old)\r\n\t        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\breport.append(current)\u001b[10;5H                \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[K\r\n\t    report.append(current)\r\n\treport.reverse()\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = report\r\n\u001b[K\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\tdraw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\r\n\tdraw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\r\n\t\u001b[33mw\u001b[39;49m = 0\u001b[K\u001b[23;29H\u001b[7m22% L68\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mAlert\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, msg=\u001b[32m\"\"\u001b[39;49m, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = col\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(msg)\r\n\u001b[K\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s):\u001b[K\r\n\t\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[15;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\u001b[16;5H            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n\t            \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[18;21Hreport.append(old)\u001b[19;5H            \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t            report.append(current)\u001b[K\r\n\t            \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[23;29H\u001b[7m19% L57\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[1@\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1@\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;20H\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l          \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\u001b[23;35H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lq\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\t\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\r\u001b[K\t\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\b\b\b\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l):\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;13H\u001b[?25lcurrent\n\n\n\u001b[Cold,current\u001b[22;21Hcurrent\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                      \u001b[39;49m\r\n\u001b[32m          for c in s:                                                           \u001b[39;49m\r\n\u001b[13;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\\\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m            current += c                                                        \u001b[39;49m\r\n\u001b[32m            if len(current) >= self.w:                                          \u001b[39;49m\r\n\u001b[32m                if \"\u001b[39;49m \u001b[32m\" in current.rstrip():                                     \u001b[39;49m\r\n\u001b[32m                    old,current = current.rstrip().rsplit(None,1)               \u001b[39;49m\r\n\u001b[32m                    report.append(old)                                          \u001b[39;49m\r\n\u001b[32m                else:                                                           \u001b[39;49m\r\n\u001b[32m                    report.append(current)                                      \u001b[39;49m\r\n\u001b[32m                    current = \"\"                                                \u001b[39;49m\r\n\u001b[13;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[13;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[13;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;29H\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n          \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\u001b[13;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l            current += c\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\u001b[K\r\n                    old,current = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[K\r\n                    report.append(old)\u001b[K\r\n                \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n                    report.append(current)\u001b[K\r\n                    current = \u001b[32m\"\"\u001b[39;49m\u001b[K\u001b[13;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/widgets.py...\u001b[13;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/widgets.py\u001b[K\u001b[13;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+--------------------+\u001b[7;11H|\u001b[20X\u001b[7;32H|\u001b[8;11H|\u001b[31m\u001b[40mDay 0 - Red\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         |\u001b[9;11H+--------------------+\u001b[23;8H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mAlert\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, msg=\u001b[32m\"\"\u001b[39;49m, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = col\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(msg)\u001b[K\r\n\u001b[K\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, l):\u001b[K\r\n        \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m l.split(\u001b[32m\"\\n\"\u001b[39;49m):\u001b[K\r\n          \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n            current += c\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\u001b[K\r\n                    old,current = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[K\r\n                    report.append(old)\u001b[K\r\n                \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n                    report.append(current)\u001b[K\r\n                    current = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   19% L58   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[13;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;13H\u001b[?25l\u001b[33mcurrent\u001b[39;49m\n\n\n\u001b[C\u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m\u001b[22;21H\u001b[33mcurrent\u001b[39;49m\u001b[13;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[3;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\r\n\u001b[K\u001b[6;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\u001b[9;13H\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[10;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(20,2,\u001b[32m\"Day %d - %s\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name),t.color\\\r\n)\u001b[K\n\t    \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[14;11H  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;14H\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L183\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1;22r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L183\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;13H\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mm\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[32m\"                                                               \u001b[39;49m\r\n\u001b[32m            a = widgets.Alert(20,2,\"\u001b[39;49mDay %d - %s\u001b[32m\"%(self.grid.day,t.name),t.color\u001b[39;49m\r\n\u001b[32m)                                                                               \u001b[39;49m\r\n\u001b[10;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25l\u001b[32m            a.time = 50                                                         \u001b[39;49m\r\n\u001b[32m            self.alerts.append((a,10,5))                                        \u001b[39;49m\r\n\u001b[32m            self.start = False                                                  \u001b[39;49m\r\n\u001b[32m        report = self.alerts                                                    \u001b[39;49m\r\n\u001b[32m        self.alerts = []                                                        \u001b[39;49m\r\n\u001b[32m        return report                                                           \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m    # This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[32m    # checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[32m    # supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[10;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mM\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32mN\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\\\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mD\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m%\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[32m%\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m=\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m-\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m%\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n            \u001b[33ma\u001b[39;49m = widgets.Alert(20,2,\u001b[32m\"Day %d - %s\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name),t.color\r\n)\u001b[K\u001b[10;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25l            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[10;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32m:\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32m \u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\b\u001b[?25l\u001b[32m%s\"\u001b[39;49m\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m%s\"\u001b[39;49m\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m%s\"\u001b[39;49m\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\\%s\"\u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn%s\"\u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[?25l\u001b[32m \"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mS\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\"\u001b[39;49m\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\"\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\u001b[1;22r\u001b[13;1H\u001b[1M\u001b[1;24r\u001b[11;36H\u001b[?25lDay %d - %s\u001b[32m\"%(self.grid.day,t.name),t.color)\u001b[39;49m\u001b[K\r\n\u001b[32m            a.time = 50                                                         \u001b[39;49m\r\n\u001b[22d    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lay %d - %s\u001b[32m\"%(self.grid.day,t.name),t.color)  \u001b[39;49m\r\n\u001b[11;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly %d - %s\u001b[32m\"%(self.grid.day,t.name),t.color) \u001b[39;49m\u001b[11;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l %d - %s\u001b[32m\"%(self.grid.day,t.name),t.color) \u001b[39;49m\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l%d - %s\u001b[32m\"%(self.grid.day,t.name),t.color) \u001b[39;49m\u001b[11;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld - %s\u001b[32m\"%(self.grid.day,t.name),t.color) \u001b[39;49m\u001b[11;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l - %s\u001b[32m\"%(self.grid.day,t.name),t.color) \u001b[39;49m\u001b[11;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l- %s\u001b[32m\"%(self.grid.day,t.name),t.color) \u001b[39;49m\u001b[11;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l %s\u001b[32m\"%(self.grid.day,t.name),t.color) \u001b[39;49m\u001b[11;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l%s\u001b[32m\"%(self.grid.day,t.name),t.color) \u001b[39;49m\u001b[11;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[32m\"%(self.grid.day,t.name),t.color) \u001b[39;49m\u001b[11;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"%(self.grid.day,t.name),t.color) \u001b[39;49m\u001b[11;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name),t.color)\u001b[K\r\n            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\u001b[11;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lMark set\u001b[11;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;36H\u001b[?25l\u001b[37m\u001b[44m(\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[37m\u001b[44ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[37m\u001b[44me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[37m\u001b[44ml\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[37m\u001b[44mf\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[37m\u001b[44me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;36H\u001b[?25l\u001b[21P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;45H\u001b[24;1H\u001b[?25lMark set\u001b[10;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name\u001b[11;13Ha\u001b[10;66H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;65H\u001b[24;1H\u001b[?25lAuto-saving...\u001b[10;65H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[10;65H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;64H\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@%\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;67H\u001b[?25l)\u001b[11;13H\u001b[33ma\u001b[39;49m\u001b[10;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[11;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[11;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+--------------------+\u001b[7;11H|\u001b[31m\u001b[40mMap Name: Day 0Red\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[8;11H|\u001b[31m\u001b[40mStart\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15X\u001b[8;32H|\u001b[9;11H+--------------------+\u001b[23;8H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\r\n            \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n            \u001b[33mm\u001b[39;49m = \u001b[32m\"Map Name: Day %d\\n%s Start\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name)\u001b[K\r\n            \u001b[33ma\u001b[39;49m = widgets.Alert(20,2,m,t.color)\u001b[K\r\n            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L184  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[11;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default widgets.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mAlert\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, msg=\u001b[32m\"\"\u001b[39;49m, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = col\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(msg)\r\n\u001b[K\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, l):\u001b[K\r\n\t\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m l.split(\u001b[32m\"\\n\"\u001b[39;49m):\u001b[K\u001b[14;11H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\u001b[18;21H\u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[19;5H                report.append(old)\u001b[K\u001b[20;5H            \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[21;5H                report.append(current)\u001b[K\u001b[22;5H                \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[23;14H\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   19% L58 \u001b[0m\u001b[39;49m\u001b[27m\u001b[13;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[?25l        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m l.split(\u001b[32m\"\\n\"\u001b[39;49m):\u001b[3;5H      \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n\t            \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\r\n\t            report.append(old)\r\n\t\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[10;5H                report.append(current)\r\n\t\u001b[12@\n\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\r\n\t    report.append(current)\r\n\treport.reverse()\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = report\r\n\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\tdraw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\r\n\tdraw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\u001b[23;29H\u001b[7m22% L68\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mAlert\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, msg=\u001b[32m\"\"\u001b[39;49m, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = col\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(msg)\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, l):\u001b[K\r\n\t\u001b[12P\n\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m l.split(\u001b[32m\"\\n\"\u001b[39;49m):\u001b[K\r\n\t  \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[16;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\u001b[17;5H            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n\t            \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[19;21Hreport.append(old)\u001b[20;5H            \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t            report.append(current)\u001b[K\r\n\t            \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\n\b\b\b\b\u001b[7m19% L57\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m l.split(\u001b[32m\"\\n\"\u001b[39;49m):\u001b[3;5H      \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n\t            \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\r\n\t            report.append(old)\r\n\t\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[10;5H                report.append(current)\r\n\t\u001b[12@\n\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\r\n\t    report.append(current)\r\n\treport.reverse()\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = report\r\n\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\tdraw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\r\n\tdraw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\u001b[23;29H\u001b[7m22% L68\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1@\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[1@\u001b[12;3H\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;3H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;13H\u001b[1@\u001b[13;4H\u001b[13;14H\u001b[1@\u001b[13;5H\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mAlert\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, msg=\u001b[32m\"\"\u001b[39;49m, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = col\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(msg)\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, l):\u001b[K\r\n\t\u001b[12P\n\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m l.split(\u001b[32m\"\\n\"\u001b[39;49m):\u001b[K\r\n\t  \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[16;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\u001b[17;5H            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n\t            \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[19;21Hreport.append(old)\u001b[20;5H            \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t            report.append(current)\u001b[K\r\n\t            \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\n\b\b\b\b\u001b[7m19% L57\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[?25l        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m l.split(\u001b[32m\"\\n\"\u001b[39;49m):\u001b[3;5H      \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n\t            \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\r\n\t            report.append(old)\r\n\t\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[10;5H                report.append(current)\r\n\t\u001b[12@\n  \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\r\n\t      report.append(current)\r\n\treport.reverse()\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = report\r\n\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\tdraw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\r\n\tdraw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\u001b[23;29H\u001b[7m22% L68\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;22H\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[13;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[13;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;37H\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\n\u001b[?25l        report.reverse()\u001b[K\u001b[23;34H\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\t\b\b\u001b[?25l\u001b[33mcurrent\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[32m\"                                                       \u001b[39;49m\r\n\u001b[32m        report.reverse()                                                        \u001b[39;49m\r\n\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n        report.reverse()\u001b[K\u001b[14;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/widgets.py...\u001b[14;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/widgets.py\u001b[K\u001b[14;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+--------------------+\u001b[7;11H|\u001b[31m\u001b[40mMap Name: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m     |\u001b[8;11H|\u001b[31m\u001b[40mRed Start\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m           |\u001b[9;11H+--------------------+\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;4H+----------+\u001b[6;4H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[32m\u001b[40m................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[7;4H|End Turn  |\u001b[32m\u001b[40m................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[8;4H|Undo      |\u001b[32m\u001b[40m................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[9;4H|Start Over|\u001b[32m\u001b[40m................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[10;4H+----------+\u001b[23;8H\u001b[6;5HBack\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;4H\u001b[32m\u001b[40m............\u001b[6;4H.......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+--------------------+\u001b[7;4H\u001b[32m\u001b[40m.......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[34m\u001b[40mMap Name: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m     |\u001b[8;4H\u001b[32m\u001b[40m.......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[34m\u001b[40mBlue Start\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m          |\u001b[9;4H\u001b[32m\u001b[40m.......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+--------------------+\u001b[10;4H\u001b[32m\u001b[40m............\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m l.split(\u001b[32m\"\\n\"\u001b[39;49m):\u001b[K\r\n          \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n            \u001b[33mcurrent\u001b[39;49m += c\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\u001b[K\r\n                    \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[K\r\n                    report.append(old)\u001b[K\r\n                \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n                    report.append(current)\u001b[K\r\n                    \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n          \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[K\r\n              report.append(current)\u001b[K\r\n              \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        report.reverse()\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = report\u001b[K\r\n\u001b[K\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n        draw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   22% L70   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[14;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m69\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mAlert\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, msg=\u001b[32m\"\"\u001b[39;49m, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = col\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(msg)\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, l):\u001b[K\r\n\t\u001b[12P\n\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m l.split(\u001b[32m\"\\n\"\u001b[39;49m):\u001b[K\u001b[14;11H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\u001b[18;5H                \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\r\n\t            report.append(old)\r\n\t\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[21;5H                report.append(current)\r\n\t            \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\n\b\b\b\b\u001b[7m19% L57\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l):\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@g\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[14;11H\u001b[1@\r\u001b[C\u001b[14;12H\u001b[1@\u001b[14;3H\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;3H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;13H\u001b[4@\t\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[16;13H\u001b[4@\t\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\t\u001b[4@\u001b[17;21H\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[18;21H\u001b[4@\t\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[19;21H\u001b[4@\t\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\u001b[?25lCloses \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[4@\u001b[20;21H\r\n\n\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[21;21H\u001b[4@\t\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[22;21H\u001b[4@\t\u001b[H\n\u001b[?25l        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m msg.split(\u001b[32m\"\\n\"\u001b[39;49m):\u001b[3;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t        \u001b[33mcurrent\u001b[39;49m += c\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n\t                \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\r\n\t                report.append(old)\u001b[9;21H\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[10;5H                    report.append(current)\r\n\t\u001b[16@\n  \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\r\n\t      report.append(current)\u001b[14;13H  \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\treport.reverse()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = report\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\tdraw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[23;29H\u001b[7m22% L68\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[12;11H\u001b[14@\t\t\b\b\b\b\u001b[4P\r\t\t\u001b[4P\b\b\b\b\u001b[4P\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[1@\b\t\b\u001b[1@\b\u001b[23;34H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1@\t\b\u001b[1@\t\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/widgets.py...\u001b[14;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/widgets.py\u001b[K\u001b[14;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+--------------------+\u001b[7;11H|\u001b[31m\u001b[40mMap Name: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m     |\u001b[8;11H|\u001b[31m\u001b[40mRed Start\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m           |\u001b[9;11H+--------------------+\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;11H\u001b[32m\u001b[40m.....................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[7;11H\u001b[32m\u001b[40m.....................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[8;11H\u001b[32m\u001b[40m.....................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[9;11H\u001b[32m\u001b[40m.....................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[23;8H\u001b[5d\b+----------+\u001b[6;7H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[7;7H|End Turn  |\u001b[8;7H|Undo      |\u001b[9;7H|Start Over|\u001b[10;7H+----------+\u001b[23;8H\u001b[6dBack\u001b[7;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7dEnd Turn\u001b[8;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mUndo\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\u001b[32m\u001b[40m............\u001b[6;7H............\u001b[7;7H............\u001b[8;7H............\u001b[9;7H............\u001b[10;7H............\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b+----------+\u001b[6;7H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[7;7H|End Turn  |\u001b[8;7H|Undo      |\u001b[9;7H|Start Over|\u001b[10;7H+----------+\u001b[23;8H\u001b[6dBack\u001b[7;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7dEnd Turn\u001b[8;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mUndo\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8dUndo\u001b[9;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mStart Over\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\u001b[32m\u001b[40m............\u001b[6;7H............\u001b[7;7H............\u001b[8;7H............\u001b[9;7H............\u001b[10;7H............\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m msg.split(\u001b[32m\"\\n\"\u001b[39;49m):\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n                \u001b[33mcurrent\u001b[39;49m += c\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\u001b[K\r\n                    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\u001b[K\r\n                        \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[K\r\n                        report.append(old)\u001b[K\r\n                    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n                        report.append(current)\u001b[K\r\n                        \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[K\r\n                report.append(current)\u001b[K\r\n                \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        report.reverse()\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = report\u001b[K\r\n\u001b[K\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n        draw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   22% L70   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[14;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25ldraw.border(x,y,w,h,\u001b[32m\"--||+\"\u001b[39;49m)\r\n\tdraw.fill(x,y,w,h)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m i,s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34menumerate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items):\u001b[5;13Hdraw.string(x,y+i,s,col+(\u001b[32m\"?\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m i==\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m))\r\n\u001b[K\n\u001b[K\n\u001b[31m# An alert is just a window that contains text. Unlike a buffer, it doesn't     \u001b[39;49m\r\n\u001b[31m# scroll. Writing to it will overwrite the current message.                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mAlert\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, msg=\u001b[32m\"\"\u001b[39;49m, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = col\u001b[K\u001b[16;14Hwrite(msg)\u001b[K\r\n\n\t\u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, msg):\u001b[K\r\n\t\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[21;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m msg.split(\u001b[32m\"\\n\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\u001b[23;29H\u001b[7m15% L59\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Pass the input from gfx.get_input to this function.                       \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index -= 1\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index += 1\u001b[K\r\n\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index %= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items)\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"enter\"\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index]\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[14;5H\u001b[31m# Draw the window on the terminal with the top left corner                  \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# at x,y. Will draw off the side of the screen.                             \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[33mw\u001b[39;49m,h = 0,\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items)\u001b[18;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items:\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(w,\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(s))\r\n\u001b[K\n\tdraw.border(x,y,w,h,\u001b[32m\"--||+\"\u001b[39;49m)\r\n\tdraw.fill(x,y,w,h)\u001b[23;29H\u001b[7m 8% L40\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[4P\u001b[2;3H\u001b[?25l\u001b[31mThis module contains \"gui\" widgets that are useful for ga\u001b[39;49m\u001b[4@\u001b[31mmes.\u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\r\n\u001b[K\n\n\u001b[31m# A menu is a simple menu of selections. Created using a list of options,       \u001b[39;49m\r\n\u001b[31m# it intercepts input, returning None if nothing has been selected yet,         \u001b[39;49m\r\n\u001b[31m# or the text of the selected option. Handling something like \"cancelling\"      \u001b[39;49m\r\n\u001b[31m# should be done by the creator.                                                \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mMenu\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, items):\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items = \u001b[1m\u001b[34mlist\u001b[0m\u001b[39;49m(items)\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index = 0\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items) == 0:\u001b[19;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Created a menu with no items.\"\u001b[39;49m)\u001b[21;5H\u001b[31m# Pass the input from gfx.get_input to this function.                       \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\n\b\b\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[?25lBeginning of buffer\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[K\u001b[2;60H\u001b[4P\r\u001b[4@\t\b\b\u001b[?25l\u001b[31mPass the input from gfx.get_input to this function.      \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index -= 1\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index += 1\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index %= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items)\r\n\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"enter\"\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index]\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# Draw the window on the terminal with the top left corner                  \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# at x,y. Will draw off the side of the screen.                             \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[33mw\u001b[39;49m,h = 0,\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items:\u001b[K\u001b[19;13H\u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(w,\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(s))\u001b[K\u001b[21;5H    draw.border(x,y,w,h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\u001b[22;5H    draw.fill(x,y,w,h)\u001b[K\u001b[23;29H\u001b[7m 8%\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[3;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\r\n\u001b[K\u001b[6;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[10;13H\u001b[33mm\u001b[39;49m = \u001b[32m\"Map Name: Day %d\\n%s Start\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name)\u001b[11;13H\u001b[33ma\u001b[39;49m = widgets.Alert(20,2,m,t.color)\r\n\t    \u001b[33ma.time\u001b[39;49m = 50\u001b[13;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[15;5H    \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;14H\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L184\u001b[0m\u001b[39;49m\u001b[27m\u001b[11d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[16;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[19;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\n\b\b\b\u001b[7m6% L19\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[6;1H\u001b[1M\u001b[1;24r\u001b[4;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[5;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[22;1H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\u001b[K\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[6;22Hhistory\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[10;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[13;14Hchoices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[16;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\r\n\t    \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m51% L213\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\r\n\t    \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[11;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[16;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[17;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[18;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[21;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[23;30H\u001b[7m5% L232\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[6;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[7;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[8;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[9;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\u001b[12;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\u001b[13;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\r\n\u001b[K\u001b[17;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;29H\u001b[7m60% L251\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[3;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[17;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[18;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[19;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[23;29H\u001b[7m55\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[21;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[22;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m1% L233\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\u001b[6;14Hchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[13;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[20;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\n\b\b\b\b\b\u001b[7m46% L214\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[3;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\r\n\u001b[K\u001b[6;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\u001b[9;13H\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[10;5H        \u001b[33mm\u001b[39;49m = \u001b[32m\"Map Name: Day %d\\n%s Start\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name)\u001b[K\u001b[11;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(20,2,m,t.color)\u001b[K\u001b[12;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[16;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[21;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;30H\u001b[7m2% L195\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[10;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[16;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\n\b\b\b\b\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[6;22Hhistory\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[10;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[13;14Hchoices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[16;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\r\n\t    \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m51% L213\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;34H\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;36H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lOverwrite mode enabled\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;58H\u001b[?25l\u001b[7m Ovwrt) \u001b[0m\u001b[39;49m\u001b[27m\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;16H\u001b[?25ldisabled\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;58H\u001b[?25l\u001b[7m) ------\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[K\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lOverwrite mode disabled\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[7d\t\u001b[8@\t\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[7;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[7;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+--------------------+\u001b[7;11H|\u001b[31m\u001b[40mMap Name: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m     |\u001b[8;11H|\u001b[31m\u001b[40mRed Start\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m           |\u001b[9;11H+--------------------+\u001b[23;8H\u001b[H+-+\u001b[1;14H+\u001b[2;3H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[3;3H|End Turn  |\u001b[4;3H|Undo      |\u001b[5;3H|Start Over|\u001b[6;3H+-------\u001b[23;8H\u001b[6;11H---+\u001b[32m\u001b[40m.................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[7;11H\u001b[32m\u001b[40m.....................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[8;11H\u001b[32m\u001b[40m.....................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[9;11H\u001b[32m\u001b[40m.....................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[23;8H\u001b[2;4HBack\u001b[3;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;4HEnd Turn\u001b[4;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mUndo\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H+--\u001b[1;14H-\u001b[2;3H\u001b[32m\u001b[40m............\u001b[3;3H............\u001b[4;3H............\u001b[5;3H............\u001b[6;3H............\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;3H+----------+\u001b[4;3H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[5;3H|End Turn  |\u001b[6;3H|Undo      |\u001b[7;3H|Start Over|\u001b[8;3H+----------+\u001b[23;8H\u001b[4;4HBack\u001b[7;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mStart Over\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;3H\u001b[32m\u001b[40m............\u001b[4;3H............\u001b[5;3H............\u001b[6;3H............\u001b[7;3H............\u001b[8;3H............\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[7;2H\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1m\u001b[30m\u001b[40mi\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4d\b\b+----------+\u001b[5;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[6;6H|End Turn  |\u001b[7;6H|Undo      |\u001b[8;6H|Start Over|\u001b[9;6H+----------+\u001b[23;8H\u001b[5d\bBack\u001b[8;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mStart Over\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4d\b\b\u001b[32m\u001b[40m............\u001b[5;6H............\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+--------------------+\u001b[7;6H\u001b[32m\u001b[40m.....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mMap Name: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m     |\u001b[8;6H\u001b[32m\u001b[40m.....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mRed Start\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m           |\u001b[9;6H\u001b[32m\u001b[40m.....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+--------------------+\u001b[23;8H\u001b[5;5H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;11H\u001b[32m\u001b[40m.....................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[7;11H\u001b[32m\u001b[40m.....................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[8;11H\u001b[32m\u001b[40m.....................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[9;11H\u001b[32m\u001b[40m.....................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[23;8H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n                \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n                \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n    \u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   51% L218  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[7;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\u001b[6;14Hchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[10;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[13;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[14;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0\n\b\b\b\b\u001b[7m46% L214\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[3;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\r\n\u001b[K\u001b[6;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\u001b[9;13H\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[10;5H        \u001b[33mm\u001b[39;49m = \u001b[32m\"Map Name: Day %d\\n%s Start\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name)\u001b[K\u001b[11;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(20,2,m,t.color)\u001b[K\u001b[12;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[16;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[21;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;30H\u001b[7m2% L195\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;68H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32mA\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32me\u001b[39;49m\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32mc\u001b[39;49m\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[10;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[10;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;70H\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   41% L184\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;13H\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mw\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\\\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\\\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\\\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\t\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[12;13Ha\u001b[11;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[12;13H\u001b[33ma\u001b[39;49m\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l )\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\u001b[?25l\u001b[1@\u001b[33m1\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\b\b\u001b[?25lm )\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@\u001b[33m1\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33m2\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1@,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[24;1H\u001b[?25lAuto-saving...\u001b[10;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[10;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;34H\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m%s Advance\u001b[32m\"%(self.grid.day,t.name)        \u001b[39;49m\r\n\u001b[32m            w = max(m )                                                         \u001b[39;49m\r\n\u001b[10;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"%s Advance\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name)\u001b[K\r\n            \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(m )\u001b[K\u001b[10;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[C\u001b[?25l\u001b[1@%\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36msel\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mf\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[10;45H\u001b[?25lg\u001b[32m\"%s Advance\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.name\\\r\n)\u001b[K\n\b            \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(m )\u001b[K\u001b[10;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[32m\"%s Advance\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.nam\r\ne)\u001b[10;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[32m\"%s Advance\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.na\r\nme)\u001b[10;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[32m\"%s Advance\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.n\r\name)\u001b[10;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[32m\"%s Advance\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t.\r\nname)\u001b[10;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[32m\"%s Advance\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,t\r\n.name)\u001b[10;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[32m\"%s Advance\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\r\nt.name)\u001b[10;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[32m\"%s Advance\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day\r\n,t.name)\u001b[10;53H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[32m\"%s Advance\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.da\r\ny,t.name)\u001b[10;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day\r\n,t.name)\u001b[K\u001b[10;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lelf.grid.day,\r\nt.name)\u001b[K\u001b[10;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25llf.grid.day,t\r\n.name)\u001b[K\u001b[10;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf.grid.day,t.\r\nname)\u001b[K\u001b[10;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.grid.day,t.n\r\name)\u001b[K\u001b[10;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgrid.day,t.na\r\nme)\u001b[K\u001b[10;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lrid.day,t.nam\r\ne)\u001b[K\u001b[10;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mid\u001b[0m\u001b[39;49m.day,t.name\r\n)\u001b[K\u001b[10;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;67H\u001b[?25ld.day,t.name)\u001b[K\r\n            \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(m )\u001b[22;1H    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[A\u001b[10;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,t.name)\u001b[K\u001b[10;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt.name)\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\b\u001b[K\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l )\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le )\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l )\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll )\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le )\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m )\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l( )\u001b[12;13Ha\u001b[A\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm )\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1 )\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l) )\u001b[12;13H\u001b[33ma\u001b[39;49m\u001b[A\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;28H\u001b[?25l, )\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll )\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le )\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m )\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l( )\u001b[12;13Ha\u001b[A\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm )\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2 )\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l) )\u001b[12;13H\u001b[33ma\u001b[39;49m\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;36H\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1@1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@+\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\",t.color)                                \u001b[39;49m\r\n\u001b[32m            a.time = 50                                                         \u001b[39;49m\r\n\u001b[12;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m            self.alerts.append((a,10,5))                                        \u001b[39;49m\r\n\u001b[32m            self.start = False                                                  \u001b[39;49m\r\n\u001b[32m        report = self.alerts                                                    \u001b[39;49m\r\n\u001b[32m        self.alerts = []                                                        \u001b[39;49m\r\n\u001b[32m        return report                                                           \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m    # This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[32m    # checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[32m    # supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[12;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\\,t.color)\u001b[39;49m\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn,t.color)\u001b[39;49m\u001b[12;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m,t.color)\u001b[K\r\n            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\u001b[12;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[12;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@+\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@2\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[12;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[12;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+--------------------+\u001b[7;11H|\u001b[31m\u001b[40mMap Name: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m     |\u001b[8;11H|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         |\u001b[9;11H+--------------------+\u001b[23;8H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\r\n            \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n            \u001b[33mm1\u001b[39;49m,\u001b[33mm2\u001b[39;49m = \u001b[32m\"Map Name: Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[K\r\n            \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))\u001b[K\r\n            \u001b[33ma\u001b[39;49m = widgets.Alert(20,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\r\n            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   41% L185  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[12;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@w\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[12;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[12;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+---------------+\u001b[7;11H|\u001b[31m\u001b[40m0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14X\u001b[7;27H|\u001b[8;11H|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    |\u001b[9;11H+---------------+\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\r\n            \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n            \u001b[33mm1\u001b[39;49m,\u001b[33mm2\u001b[39;49m = \u001b[32m\"Map Name: Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[K\r\n            \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))\u001b[K\r\n            \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\r\n            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   41% L185  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[12;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11d\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[C\u001b[?25l+\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[11;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[11;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+----------------+\u001b[7;11H|\u001b[31m\u001b[40mMap Name: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;11H|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m     |\u001b[9;11H+----------------+\u001b[23;8H\u001b[6;11H\u001b[32m\u001b[40m..................\u001b[7;11H..................\u001b[8;11H..................\u001b[9;11H..................\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\r\n            \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n            \u001b[33mm1\u001b[39;49m,\u001b[33mm2\u001b[39;49m = \u001b[32m\"Map Name: Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[K\r\n            \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n            \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\r\n            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   41% L184  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[11;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default widgets.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H\u001b[31m# Pass the input from gfx.get_input to this function.                       \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index -= 1\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index += 1\r\n\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index %= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"enter\"\u001b[39;49m:\u001b[K\u001b[10;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index]\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# Draw the window on the terminal with the top left corner                  \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# at x,y. Will draw off the side of the screen.                             \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[33mw\u001b[39;49m,h = 0,\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items:\u001b[19;13H\u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(w,\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(s))\r\n\u001b[K\u001b[21;5H    draw.border(x,y,w,h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\u001b[22;5H    draw.fill(x,y,w,h)\u001b[K\u001b[23;14H\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m    8% L21 \u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[3;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\r\n\u001b[K\u001b[6;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[10;13H\u001b[33mm1\u001b[39;49m,\u001b[33mm2\u001b[39;49m = \u001b[32m\"Map Name: Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[11;13H\u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[13;13H\u001b[33ma.time\u001b[39;49m = 50\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[16;5H    \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[23;14H\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   41% L184\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default widgets.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lwidgets.py\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgrid.py\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[31m;; This buffer is for notes you don't want to save, and for Lisp evaluation.    \u001b[39;49m\r\n\u001b[31m;; If you want to create a file, visit that file with C-x C-f,                  \u001b[39;49m\r\n\u001b[31m;; then enter the text in that file's own buffer.                               \u001b[39;49m\r\n\nTODAY IS GOING TO BE A BIG DAY.\u001b[K\r\n\u001b[K\nI've got a lot of plans for today. Been thinking about structure all weekend\r\nand I'm ready to implement some code.\u001b[K\r\n\u001b[K\nMost of what I plan to do today is GUI-related, but let's list all the stuff\r\nI'd like to accomplish:\u001b[K\r\n\u001b[K\nTodo:\u001b[K\n\b\b\b\b* An alert that pops up when a player ends their turn\r\n\u001b[C* Some intel boxes that display information about the map when you hover\u001b[17;4Hover tiles\u001b[K\r\n\u001b[C* (maybe) terrain movement inhibition (roads are easier than forests)\r\n\u001b[C* adding map name to the data format\r\n\u001b[C* adding play history to the data format\u001b[K\r\n\u001b[C* save/load data from the rules\u001b[K\r\n\u001b[K\u001b[23;4H\u001b[7mU:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L13    (Lisp Interaction) -\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[17;1H\u001b[1M\u001b[1;24r\u001b[15;2H\u001b[?25l* Some intel boxes that display information about the map when you hover\r\n\u001b[C  over tiles\u001b[K\u001b[22;1HDone:\u001b[K\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[?25lTodo:\u001b[K\r\n * Some intel boxes that display information about the map when you hover\u001b[K\u001b[5;4Hover tiles\r\n * (maybe) terrain movement inhibition (roads are easier than forests)\r\n\u001b[C* adding map name to the data format\r\n * adding play history to the data format\u001b[K\r\n * save/load data from the rules\u001b[K\r\n\nDone:\u001b[K\r\n * change rendering so that the cells don't try to render their units\r\n\nLet's do this.\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\u001b[23;29H\u001b[7mBot L22\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[C\u001b[?25l* change rendering so that the cells don't try to render their units\r\n\u001b[K\u001b[23;35H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l* An alert that pops up when a player ends their turn\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;55H\u001b[24;1H\u001b[?25l\u001b[34mFile to save in: \u001b[39;49m~/Documents/open-tactics/\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;55H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n            \u001b[33mdef_unit.hp\u001b[39;49m = 0\r\n\u001b[C           \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\n\u001b[C   \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[C   \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\u001b[C       \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\u001b[C           \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[10;13H\u001b[33mm1\u001b[39;49m,\u001b[33mm2\u001b[39;49m = \u001b[32m\"Map Name: Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n            \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\r\n\u001b[C           \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\r\n\u001b[C           \u001b[33ma.time\u001b[39;49m = 50\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[20;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   41% L184  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[11;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default *scratch*): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lwidgets.py\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgrid.py\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\n\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon = icon\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# the unit's draw will be prioritized.                                      \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[19;13H\u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color +\u001b[32m\"!\"\u001b[39;49m\u001b[20;5H    draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color+col)\u001b[K\r\n\u001b[K\n\u001b[K\n\t\t\b\b\u001b[7m\u001b[1mrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   61% L171\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.carrying:\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[6;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(u)\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[9;5H\u001b[31m# Return the team currently performing its turn.                            \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\r\n\u001b[K\u001b[13;5H\u001b[31m# End the turn and proceed to the next team.                                \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[15;5H    \u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day += 1\u001b[K\r\n\u001b[K\n\n\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m55% L162\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# This should be the ONLY WAY units are added to the game.                  \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\u001b[9;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[13;5H    \u001b[33munit.team\u001b[39;49m = team\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\r\n\u001b[K\u001b[16;5H\u001b[31m# Remove a unit from the game. This will not only remove the                \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# unit, but all units that it is carrying.                                  \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\u001b[K\u001b[23;29H\u001b[7m48% L143\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# Return distance (zero norm) between two points.                           \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdist\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, start, end):\u001b[5;5H    \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = start\u001b[K\u001b[6;5H    \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = end\u001b[K\u001b[7;5H    \u001b[33mdx\u001b[39;49m = x1-x2\u001b[K\u001b[8;5H    \u001b[33mdy\u001b[39;49m = y1-y2\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (dx < 0): \u001b[33mdx\u001b[39;49m *= -1\u001b[K\u001b[10;12H(dy < 0): \u001b[33mdy\u001b[39;49m *= -1\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m dx+dy\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.                          \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[16;5H    \u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[K\u001b[17;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\u001b[18;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(ox,oy)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\u001b[23;30H\u001b[7m2% L124\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\u001b[4;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# Get a range of coordinates, usually for an attack range. Coordinates      \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# may not actually be cells.                                                \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, center, start, end=\u001b[35mNone\u001b[39;49m):\u001b[9;12Hend \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m:\u001b[K\r\n\t    \u001b[33mend\u001b[39;49m = start\u001b[K\r\n\u001b[K\n\t\u001b[33mreport\u001b[39;49m = []\u001b[13;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = center\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m r \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(start,end+1):\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m i \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(r):\u001b[K\r\n\t        report.append((x+i,y+(r-i)))\r\n\t        report.append((x+i,y-(r-i)))\r\n\t        report.append((x+(r-i),y+i))\r\n\t        report.append((x-(r-i),y+i))\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# Return distance (zero norm) between two points.                           \u001b[39;49m\r\n\u001b[23;29H\u001b[7m36% L105\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t        \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\r\n\t            \u001b[33mu\u001b[39;49m = rules.make_unit(unit)\u001b[5;21H\u001b[33mu.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]]\u001b[6;5H                \u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\u001b[7;5H                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[K\u001b[8;5H                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\r\n\t                u.carrying.append(_process_units(u))\u001b[10;13H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\r\n\t\t\u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\r\n\u001b[K\u001b[13;5H\u001b[31m# Get the tile at x,y. Returns None if out of range.                        \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtile_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\n\b\b\b\b\b\u001b[7m28% L86 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\r\n\u001b[K\n\t\u001b[31m# Load the terrain cells. The units are embedded in these elements      \u001b[39;49m\r\n\t\u001b[31m# of the dictionary. Note that when units are loaded in other units     \u001b[39;49m\r\n\t\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\t\u001b[31m#   y: (int) y position                                                 \u001b[39;49m\r\n\t\u001b[31m#   name: (string) the name of the terrain                              \u001b[39;49m\r\n\t\u001b[31m#   unit: the unit on this terrain, if one                              \u001b[39;49m\r\n\t\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\t\u001b[31m#   variables: (dict) User-defined variables                            \u001b[39;49m\r\n\u001b[13;68H\u001b[4P\u001b[13;5H\u001b[4@\u001b[13;11H\u001b[31mThere may be other values in this cell that will be parsed by\u001b[39;49m\u001b[14;5H    \u001b[31m# the factory of the rules.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"cells\"\u001b[39;49m]:\u001b[K\u001b[16;13H\u001b[33mthis\u001b[39;49m = rules.make_cell(c)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\u001b[18;13H\u001b[33mthis.variables\u001b[39;49m = c.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[19;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"team\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\u001b[20;5H            \u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t        \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\u001b[23;29H\u001b[7m19% L67\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[33mrow\u001b[39;49m = []\u001b[K\u001b[3;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\r\n\t        row.append(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = data.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day = 0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\u001b[K\u001b[12;11H\u001b[31mLoad the teams first, since cells and units reference them.\u001b[39;49m\u001b[13;14H\u001b[31mn set up the alliances.                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\r\n\t    \u001b[33mthis\u001b[39;49m = rules.make_team( t )\r\n\t\t\u001b[33m.variables\u001b[39;49m = t.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[17;18Hteams.append(this)\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\u001b[K\u001b[19;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist\r\n\t\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\u001b[21;13H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\r\n\u001b[K\u001b[23;30H\u001b[7m2% L48\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[?25l\u001b[31m# The Grid is a game-agnostic representation of the world's entities. It        \u001b[39;49m\r\n\u001b[31m# provides an API to game rulesets to create, delete, and move entities         \u001b[39;49m\r\n\u001b[31m# around, but essentially has no functionality other than changing its          \u001b[39;49m\r\n\u001b[31m# configuration. The grid should be initialized with a configuration            \u001b[39;49m\r\n\u001b[31m# Dictionary containing the following keys and values.                          \u001b[39;49m\r\n\u001b[31m#   w: (int) width                                                              \u001b[39;49m\r\n\u001b[31m#   h: (int) height                                                             \u001b[39;49m\r\n\u001b[31m#   cells: (list) exactly w*h cells                                             \u001b[39;49m\r\n\u001b[31m#   teams: (list) the teams in the map                                          \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  allies: (list) the teams that are allied in a list of lists\u001b[39;49m\u001b[8@\u001b[31m of ints\u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  variables: (dictionary) a dictionary of user-defined v\u001b[39;49m\u001b[8@\u001b[31mariables\u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[31m# Danger: Do not store 'rules' in a variable. Should fall out of scope.         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data, rules):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = data[\u001b[32m\"w\"\u001b[39;49m], data[\u001b[32m\"h\"\u001b[39;49m]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[21;13H\u001b[33mrow\u001b[39;49m = []\u001b[K\u001b[22;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\u001b[23;29H\u001b[7m 3% L29\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[3;1H\u001b[8L\u001b[1;24r\u001b[2;1H\u001b[?25l\u001b[31m# A grid is the arena upon which a battle takes place. The entire map should    \u001b[39;49m\r\n\u001b[31m# be self-contained. Players interact with the map by taking \"actions\" that     \u001b[39;49m\r\n\u001b[A\n\u001b[31m# are interpreted by an instance of the rules class containing the game logic.  \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m widgets\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;3H\u001b[?25l\u001b[31m  variables: (dictionary) a dictionary of user-defined variables          \u001b[39;49m\u001b[3;3H\u001b[31m                                                                         \u001b[39;49m\u001b[4;3H\u001b[31mDanger: Do not store 'rules' in a variable. Should fall out of scope.       \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data, rules):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = data[\u001b[32m\"w\"\u001b[39;49m], data[\u001b[32m\"h\"\u001b[39;49m]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[10;13H\u001b[33mrow\u001b[39;49m = []\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\u001b[K\r\n                row.append(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = data.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day = 0\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\u001b[K\u001b[20;64H\u001b[8P\r\u001b[8@\u001b[20;11H\u001b[31mLoad the teams first, since cells and units reference them.  \u001b[39;49m\u001b[21;59H\u001b[8P\r\u001b[8@\u001b[21;11H\u001b[31mThen set up the alliances.                              \u001b[39;49m\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\n\b\b\b\u001b[7m 9%\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[8;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m    9% L26\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                      \u001b[39;49m\r\n\u001b[32m        self.w, self.h = data[\"\u001b[39;49mw\u001b[32m\"], data[\"\u001b[39;49mh\u001b[32m\"]                                   \u001b[39;49m\r\n\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = data[\u001b[32m\"w\"\u001b[39;49m], data[\u001b[32m\"h\"\u001b[39;49m]\u001b[K\u001b[8;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[8;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[8;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[8;33H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgame.py\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[8;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[8;33H\u001b[24;1H\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/code/core/\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lid.py\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[8;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSet fill-column to (default 32): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[8;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[8;33H\u001b[24;1H\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/code/core/\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lell.py\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;3H\u001b[31mThe Shell is where it all starts. A Shell is an abstract and thin package in\u001b[39;49m\u001b[3;3H\u001b[31mwhich all of the elements of the game are stored. It is responsible for\u001b[39;49m\u001b[4;3H\u001b[31mcreating the world, parsing and writing to save files, and turning on/off\u001b[39;49m\r\n\u001b[31m# graphics.                                                                     \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m gfx, draw\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m game, grid, widgets\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m sys\u001b[K\r\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m traceback\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A Shell represents a single instance of a game, including its maps,           \u001b[39;49m\r\n\u001b[31m# data, and everything else.                                                    \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mShell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[33mrdict\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m = {}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"h\"\u001b[39;49m] = 15\u001b[K\u001b[23;14H\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1    Git-\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"h\"\u001b[39;49m] = 15\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"cells\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(30):\u001b[K\u001b[6;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(15):\r\n                \u001b[33mcell\u001b[39;49m = {}\u001b[K\r\n\t\t\u001b[33mcell\u001b[39;49m[\u001b[32m\"x\"\u001b[39;49m] = x\r\n                \u001b[33mcell\u001b[39;49m[\u001b[32m\"y\"\u001b[39;49m] = y\u001b[K\r\n\t\t\u001b[33mcell\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"grass\"\u001b[39;49m\r\n                gdict[\u001b[32m\"cells\"\u001b[39;49m].append(cell)\r\n        \u001b[33munit1\u001b[39;49m = {}\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"i\"\u001b[39;49m\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\r\n        \u001b[33munit1\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 0\u001b[K\r\n        \u001b[33munit2\u001b[39;49m = {}\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[18;5H    \u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[23;29H\u001b[7m21% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\u001b[?25l\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m sys\u001b[K\r\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m traceback\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A Shell represents a single instance of a game, including its maps,           \u001b[39;49m\r\n\u001b[31m# data, and everything else.                                                    \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mShell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"h\"\u001b[39;49m] = 15\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"cells\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(30):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(15):\r\n\t        \u001b[33mcell\u001b[39;49m = {}\u001b[K\r\n\t        \u001b[33mcell\u001b[39;49m[\u001b[32m\"x\"\u001b[39;49m] = x\r\n\t        \u001b[33mcell\u001b[39;49m[\u001b[32m\"y\"\u001b[39;49m] = y\u001b[K\r\n\t        \u001b[33mcell\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"grass\"\u001b[39;49m\u001b[K\r\n\t        gdict[\u001b[32m\"cells\"\u001b[39;49m].append(cell)\u001b[23;29H\u001b[7m12% L19\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   12% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l{\r\n\tgdict\u001b[A\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                                 \u001b[39;49m\r\n\u001b[32m        gdict[\"\u001b[39;49mw\u001b[32m\"] = 30                                                         \u001b[39;49m\r\n\u001b[13;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\r\n\u001b[?25l        gdict[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\u001b[13;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\r\n\t\u001b[?25l\u001b[33mgdict\u001b[39;49m\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\r\n\tgdict\u001b[A\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                                 \u001b[39;49m\r\n\u001b[32m        gdict[\"\u001b[39;49mw\u001b[32m\"] = 30                                                         \u001b[39;49m\r\n\u001b[13;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n        gdict[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\u001b[A\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\r\n\t\u001b[33mgdict\u001b[39;49m\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\r\t\u001b[?25l\u001b[33mgdict\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[32m\"                                                       \u001b[39;49m\r\n\u001b[32m        gdict[\"\u001b[39;49mw\u001b[32m\"] = 30                                                         \u001b[39;49m\r\n\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m        gdict[\"\u001b[39;49mh\u001b[32m\"] = 15                                                         \u001b[39;49m\r\n\u001b[32m        gdict[\"\u001b[39;49mcells\u001b[32m\"] = []                                                     \u001b[39;49m\r\n\u001b[32m        for x in range(30):                                                     \u001b[39;49m\r\n\u001b[32m            for y in range(15):                                                 \u001b[39;49m\r\n\u001b[32m                cell = {}                                                       \u001b[39;49m\r\n\u001b[32m                cell[\"\u001b[39;49mx\u001b[32m\"] = x                                                   \u001b[39;49m\r\n\u001b[32m                cell[\"\u001b[39;49my\u001b[32m\"] = y                                                   \u001b[39;49m\r\n\u001b[32m                cell[\"\u001b[39;49mname\u001b[32m\"] = \"\u001b[39;49mgrass\u001b[32m\"                                          \u001b[39;49m\r\n\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mH\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[32mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\u001b[13;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"h\"\u001b[39;49m] = 15\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"cells\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(30):\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(15):\u001b[K\r\n                \u001b[33mcell\u001b[39;49m = {}\u001b[K\r\n                \u001b[33mcell\u001b[39;49m[\u001b[32m\"x\"\u001b[39;49m] = x\u001b[K\r\n                \u001b[33mcell\u001b[39;49m[\u001b[32m\"y\"\u001b[39;49m] = y\u001b[K\r\n                \u001b[33mcell\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"grass\"\u001b[39;49m\u001b[K\u001b[13;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[13;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[13;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   12% L20   Git:\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;37H\b\b\b\b\b\b\t\b\u001b[?25l\u001b[32morld\"\u001b[39;49m\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mWorld\"\u001b[39;49m\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;33H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[31m#   variables: (dictionary) a dictionary of user-defined variables              \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[31m# Danger: Do not store 'rules' in a variable. Should fall out of scope.         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data, rules):\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = data[\u001b[32m\"name\"\u001b[39;49m]\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = data[\u001b[32m\"w\"\u001b[39;49m], data[\u001b[32m\"h\"\u001b[39;49m]\u001b[10;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\r\n\t    \u001b[33mrow\u001b[39;49m = []\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\r\n\t        row.append(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = data.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day = 0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\u001b[K\n\t\u001b[31m# Load the teams first, since cells and units reference them.           \u001b[39;49m\r\n\t\u001b[31m# Then set up the alliances.                                            \u001b[39;49m\r\n\u001b[23;14H\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m    9% L26\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default shell.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lshell.py\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgame.py\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lwidgets.py\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[K\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\nTodo:\u001b[K\r\n * Some intel boxes that display information about the map when you hover\u001b[K\r\n   over tiles\u001b[K\r\n\u001b[C* (maybe) terrain movement inhibition (roads are easier than forests)\r\n\u001b[C* adding map name to the data format\r\n\u001b[C* adding play history to the data format\r\n\u001b[C* save/load data from the rules\u001b[K\r\n\u001b[K\nDone:\u001b[K\n\b\b\b\b* An alert that pops up when a player ends their turn\r\n\u001b[C* change rendering so that the cells don't try to render their units\r\n\u001b[K\nLet's do this.\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;4H\u001b[7mU:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L22    (Lisp Interaction) -\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgrid.py\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lshell.py\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgame.py\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n            \u001b[33mdef_unit.hp\u001b[39;49m = 0\r\n\u001b[C           \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\n\u001b[C   \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[C   \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\u001b[C       \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\u001b[C           \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[10;13H\u001b[33mm1\u001b[39;49m,\u001b[33mm2\u001b[39;49m = \u001b[32m\"Map Name: Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n            \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\r\n\u001b[C           \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\r\n\u001b[C           \u001b[33ma.time\u001b[39;49m = 50\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[20;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   41% L184  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[11;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32m%\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;64H\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[10;44H\u001b[K\r\n\u001b[?25l\u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[K\r\n            \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[23;36H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12@\u001b[11;13H\u001b[?25l\u001b[1@m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@2\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[33mm2\u001b[39;49m \u001b[1@=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[10;44H\b\b\b\b\b\b\b\b\b\b\b\u001b[24;1H\u001b[?25lAuto-saving...\u001b[10;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[10;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;32H\b\u001b[?25l\u001b[1@(\u001b[11;13Hm2\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lssel\u001b[1@f\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.\u001b[1m\u001b[36msel\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mf\u001b[0m\u001b[39;49m\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgsel\u001b[1@f\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[1m\u001b[36msel\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mf\u001b[0m\u001b[39;49m\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lnsel\u001b[1@f\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[1m\u001b[36msel\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mf\u001b[0m\u001b[39;49m\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;61H\u001b[12;13H\u001b[?25lw\n\ba\n\ba.time\r\n\n\n\treport\u001b[10;61H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[11;13H\u001b[33mm2\u001b[39;49m\u001b[10;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;62H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[10;62H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[10;62H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;62H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\u001b[?25l\u001b[33mw\u001b[39;49m\n\b\u001b[33ma\u001b[39;49m\n\b\u001b[33ma.time\u001b[39;49m\r\n\n\n\t\u001b[33mreport\u001b[39;49m\u001b[10;62H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+-------------------+\u001b[7;11H|\u001b[31m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;11H|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[9;11H+-------------------+\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;11H\u001b[32m\u001b[40m.....................\u001b[7;11H.....................\u001b[8;11H.....................\u001b[9;11H.....................\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b+----------+\u001b[6;7H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[7;7H|End Turn  |\u001b[8;7H|Undo      |\u001b[9;7H|Start Over|\u001b[10;7H+----------+\u001b[23;8H\u001b[6dBack\u001b[7;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7dEnd Turn\u001b[8;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mUndo\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7d\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[8;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40mUndo\u001b[23;8H\u001b[5d\b\u001b[32m\u001b[40m............\u001b[6;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[7;7H\u001b[32m\u001b[40m....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;7H\u001b[32m\u001b[40m....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[9;7H\u001b[32m\u001b[40m....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[10;7H\u001b[32m\u001b[40m............\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6d\b\b\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6d\b\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7d\b\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8d\b\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\b\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10d\b\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d\b\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12d\b\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;2H.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;11H\u001b[32m\u001b[40m.....................\u001b[7;11H.....................\u001b[8;11H.....................\u001b[9;11H.....................\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\b...\u001b[11;2H.....\u001b[12;2H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13;2H\u001b(B\u001b[0m\u001b[32m\u001b[40m.....\u001b[14;3H...\u001b[15d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11d+------+\u001b[12;4H\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[13;8H|Cancel|\u001b[14;8H+------+\u001b[23;8H\u001b[11d\u001b[32m\u001b[40m........\u001b[12;8H........\u001b[13;8H........\u001b[14;8H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12d\b\u001b(B\u001b[0;1m\u001b[30m\u001b[40mL\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23d\b\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;9H+----------+\u001b[12;9H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[13;9H|End Turn  |\u001b[14;9H|Undo      |\u001b[15;9H|Start Over|\u001b[16;9H+----------+\u001b[23;8H\u001b[12;10HBack\u001b[13;10H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;10HEnd Turn\u001b[14;10H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mUndo\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;10H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[14;10H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40mUndo\u001b[23;8H\u001b[6;11H+-------------------+\u001b[7;11H|\u001b[31m\u001b[40mHello World: Day 1\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;11H|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[9;11H+-------------------+\u001b[11;9H\u001b[32m\u001b[40m............\u001b[12;7H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m............\u001b[13;9H............\u001b[14;9H............\u001b[15;9H............\u001b[16;9H............\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\r\n            \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\n    \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n            \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[K\r\n            \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[K\r\n            \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n            \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\r\n            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   41% L183  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[10;62H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lq\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;63H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[10;62H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[10;62H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;62H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;62H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default *scratch*): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\nTodo:\u001b[K\n\b\b\b\b* Some intel boxes that display information about the map when you hover\u001b[5;4Hover tiles\r\n\u001b[C* (maybe) terrain movement inhibition (roads are easier than forests)\u001b[K\r\n\u001b[C* adding map name to the data format\r\n\u001b[C* adding play history to the data format\r\n\u001b[C* save/load data from the rules\u001b[K\r\n\u001b[K\nDone:\u001b[K\n\b\b\b\b* An alert that pops up when a player ends their turn\r\n\u001b[C* change rendering so that the cells don't try to render their units\r\n\u001b[K\nLet's do this.\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;4H\u001b[7mU:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L22    (Lisp Interaction) -\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[9;1H\u001b[1M\u001b[1;24r\u001b[7;2H\u001b[?25l* adding play history to the data format\u001b[8;4Hsave/load data from the rules\u001b[K\u001b[22;1H\u001b[K\u001b[7d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\n\u001b[?25lLet's do this.\u001b[K\u001b[23;35H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l* adding map name to the data format\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;38H\u001b[24;1H\u001b[?25l\u001b[34mFile to save in: \u001b[39;49m~/Documents/open-tactics/\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lC-x C-g is undefined\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l\u001b[34mFile to save in: \u001b[39;49m~/Documents/open-tactics/\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lCommand attempted to use minibuffer while in minibuffer\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24;1H\u001b[K\u001b[13;38H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n            \u001b[33mdef_unit.hp\u001b[39;49m = 0\r\n\u001b[C           \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\n\u001b[C   \u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[C   \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\u001b[C       \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\u001b[9;13H\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n            \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\u001b[C           \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[K\r\n\u001b[C           \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\u001b[C           \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[14;13H\u001b[33ma.time\u001b[39;49m = 50\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[21;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   41% L183  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;62H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[14;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[22;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\n\u001b[C\u001b[7m36% L176\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[6;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[14;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m41\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[18;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[23;30H\u001b[7m5% L194\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;7H\u001b[?25l\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[8;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[12;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[15;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[16;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m50% L213\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[4;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\u001b[8;14Hchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[12;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[15;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[16;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[23;29H\u001b[7m45\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;7H\u001b[?25l\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[8;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[12;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[15;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[16;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units\u001b[6;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[8P\tte = \u001b[35mNon\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[14;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[19;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[20;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[21;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[23;30H\u001b[7m5% L232\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0\u001b[6;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[8@\t\trt = \u001b[35mTru\u001b[39;49m\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[13;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[4;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\u001b[8;14Hchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[12;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[15;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[16;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[23;29H\u001b[7m45% L214\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[3;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[11;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[12;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[13;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[14;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[18;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[23;30H\u001b[7m1% L195\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[14;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[22;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\n\u001b[C\u001b[7m36% L176\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[5;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[8;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[14;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[23;30H\u001b[7m1% L157\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[8;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[18;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[19;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\u001b[23;29H\u001b[7m27% L138\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[13;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\u001b[7m2% L119\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[3;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[6;14Haction = []\u001b[K\u001b[7;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[8;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\u001b[16;66H\u001b[4P\u001b[16;5H\u001b[4@\u001b[16;11H\u001b[31mitself. Ugh.                                               \u001b[39;49m\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[23;29H\u001b[7m18% L100\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[8P\t\b\b\u001b[?25l\u001b[31mGame serve two purposes. Firstly, it is a factory that \u001b[39;49m\u001b[8@\u001b[31mproduces\u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[8P\u001b[5;3H\u001b[31mstate of the game grid.      \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[31m#   make_unit                                                                   \u001b[39;49m\r\n\u001b[31m#   make_team                                                                   \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  mak\u001b[39;49m\u001b[8@\u001b[31me_cell  \u001b[39;49m\r\n\u001b[31m#   pop_alerts                                                                  \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[15;12H\u001b[31mODO: load the rules definition (types of units and properties)\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[18;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[19;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[22;14Hhistory = []\u001b[K\u001b[23;30H\u001b[7m3% L81 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[31m# TODO: load the rules definition (types of units and properties)       \u001b[39;49m\r\n\u001b[K\u001b[6;36H\u001b[8P\r\u001b[8@\u001b[6;11H\u001b[31mCreate the grid with what's left.\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\u001b[10;57H\u001b[8P\r\u001b[8@\u001b[10;11H\u001b[31mThe history contains all actions for this player turn.\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\n        \u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\u001b[19;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\u001b[23;30H\u001b[7m6% L82\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[4;74H\u001b[1;21r\u001b[6;1H\u001b[1L\u001b[1;24r\u001b[6;1H\u001b[K\u001b[22d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   16% L75\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[5;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[5;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[7;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[K\u001b[7d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   16% L76\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"history = []                                                 \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[6;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m        # Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[32m        self.grid = grid.Grid(data[\"\u001b[39;49mgrid\u001b[32m\"], self)                               \u001b[39;49m\r\n\u001b[32m        self.checkpoint = copy.deepcopy(self.grid)                              \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        # The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[32m        self.history = []                                                       \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        # These are the state variables                                         \u001b[39;49m\r\n\u001b[32m        self.action = []                                                        \u001b[39;49m\r\n\u001b[32m        self.state = None                                                       \u001b[39;49m\r\n\u001b[32m        self.choices = []                                                       \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        # other                                                                 \u001b[39;49m\r\n\u001b[32m        self.alerts = []                                                        \u001b[39;49m\r\n\u001b[32m        self.start = True                                                       \u001b[39;49m\r\n\u001b[6;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[?25l\u001b[32m\"\u001b[39;49m = []\u001b[K\r\n\u001b[K\u001b[6;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l] = []\u001b[6;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;34H\u001b[24;1H\u001b[?25lAuto-saving...\u001b[6;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[6;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l        \u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\n        \u001b[31m# These are the state variables                                         \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n        \u001b[31m# other                                                                 \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[6;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[6;34H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[6;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[6;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2d\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[9;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[10;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[13;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[16;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[17;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[18;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\u001b[21;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\n\b\u001b[7m9% L91\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[4P\t\b\b\u001b[31mThis function produces a Cell object based on the terrain c\u001b[39;49m\u001b[4@\u001b[31mode.\u001b[39;49m\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[23;29H\u001b[7m25% L110\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[4;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[8;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[12;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[18;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[19;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[20;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[21;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m30% L129\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[9;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[23;30H\u001b[7m4% L148\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[9;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[10;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[15;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[18;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;7H\u001b[?25l\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[4;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[23;29H\u001b[7m25% L130\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\u001b[7;66H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mitself. Ugh.                                               \u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\b\u001b[7m19% L111\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[31m# TODO: load the rules definition (types of units and properties)       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[9;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[10;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[13;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[16;14Haction = []\u001b[K\u001b[17;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[18;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m6% L92 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[9;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[10;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[13;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[16;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[17;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[18;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\u001b[21;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\n\b\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[4P\t\b\b\u001b[31mThis function produces a Cell object based on the terrain c\u001b[39;49m\u001b[4@\u001b[31mode.\u001b[39;49m\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[23;29H\u001b[7m25% L110\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[4;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[8;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[12;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[18;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[19;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[20;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[21;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m30% L129\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[9;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[23;30H\u001b[7m4% L148\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[5;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[10;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[16;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[23;30H\u001b[7m9% L167\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[5;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[9;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[9;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[10;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[15;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[18;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\u001b[23;30H\u001b[7m0% L149\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;7H\u001b[?25l\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[4;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[23;29H\u001b[7m25% L130\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\u001b[7;66H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mitself. Ugh.                                               \u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\b\u001b[7m19% L111\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[31m# TODO: load the rules definition (types of units and properties)       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[9;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[10;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[13;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[16;14Haction = []\u001b[K\u001b[17;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[18;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m6% L92 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[9;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[10;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[13;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[16;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[17;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[18;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\u001b[21;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\n\b\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[4P\t\b\b\u001b[31mThis function produces a Cell object based on the terrain c\u001b[39;49m\u001b[4@\u001b[31mode.\u001b[39;49m\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[23;29H\u001b[7m25% L110\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[4;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[8;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[12;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[18;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[19;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[20;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[21;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m30% L129\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[9;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[23;30H\u001b[7m4% L148\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[5;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[10;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[16;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[23;30H\u001b[7m9% L167\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[5;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[6;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[23;29H\u001b[7m43% L186\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[18;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[22;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[23;30H\u001b[7m8% L205\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[3;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[6;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[7;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units\u001b[16;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[8P\tte = \u001b[35mNon\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[23;29H\u001b[7m53% L224\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[5;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[10;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[11;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[12;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[15;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[23;30H\u001b[7m6% L243\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\r\n\t    \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mThis sets the new state and returns the appropriate code      \u001b[39;49m\u001b[17;7H\u001b[31mto the caller for what kind of input should come next.\u001b[39;49m\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[21;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[22;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[23;30H\u001b[7m4% L242\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[9;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   54% L239\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;13H\r\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                             \u001b[39;49m\r\n\u001b[32m        self.history = []                                                       \u001b[39;49m\r\n\u001b[9;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m        self.action = []                                                        \u001b[39;49m\r\n\u001b[32m        self.state = None                                                       \u001b[39;49m\r\n\u001b[32m        self.choices = []                                                       \u001b[39;49m\r\n\u001b[32m        self.checkpoint = copy.deepcopy(self.grid)                              \u001b[39;49m\r\n\u001b[32m        return self.transition(None)                                            \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m    # This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[32m    # to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[32m    def transition(self, new_state):                                            \u001b[39;49m\r\n\u001b[32m        self.state = new_state                                                  \u001b[39;49m\r\n\u001b[32m        if   self.state == None       : return CTRL_COORD                       \u001b[39;49m\r\n\u001b[32m        elif self.state == \"\u001b[39;49mmain menu\u001b[32m\": return CTRL_MENU                        \u001b[39;49m\r\n\u001b[9;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[9;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[9;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;29H\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[9;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[9;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;50H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[9;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[9;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;50H\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[9;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[K\r\n\t\u001b[8@\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[23;30H\u001b[7m0% L233\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[6;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[14;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[18;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m45% L214\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[5;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[13;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[14;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[15;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[16;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[20;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m1% L195\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[16;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[23;29H\u001b[7m36% L176\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[7;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[10;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[16;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\u001b[23;30H\u001b[7m1% L157\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[20;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[21;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\n\b\b\b\b\u001b[7m27% L138\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[15;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m2% L119\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[5;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[8;14Haction = []\u001b[K\u001b[9;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[10;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\u001b[18;66H\u001b[4P\u001b[18;5H\u001b[4@\u001b[18;11H\u001b[31mitself. Ugh.                                               \u001b[39;49m\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[23;29H\u001b[7m17% L100\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# The Game serve two purposes. Firstly, it is a factory that produces           \u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[31m# state of the game grid.                                                       \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[8P\u001b[7;3H\u001b[31mRequired methods:            \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m#   make_unit                                                                   \u001b[39;49m\r\n\u001b[31m#   make_team                                                                   \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[31m#   pop_alerts                                                                  \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  pro\u001b[39;49m\u001b[8@\u001b[31mcess    \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[31m# TODO: load the rules definition (types of units and properties)       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[20;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[21;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m3% L81 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m79\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   13% L76\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[19;1H\u001b[1M\u001b[1;24r\u001b[17;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\u001b[K\n\n\n\n\u001b[K\u001b[17d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[19;1H\u001b[1M\u001b[1;24r\u001b[18;9H\u001b[?25l\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\n\n\n        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[A\u001b[17d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[?25l        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\u001b[6;32H\u001b[8P\r\u001b[8@\u001b[6;11H\u001b[31mThese are the state variables\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n\t\b\u001b[8P\r\u001b[8@\u001b[11;11H\u001b[31mother\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\u001b[K\u001b[15;12H\u001b[31mhe first index is the attacker, the second is the defender.   \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[19;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[20;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[23;30H\u001b[7m8% L80\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[4;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[7;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[8;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[9;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[4P\t\b\b\u001b[31mThis function produces a Cell object based on the terrain c\u001b[39;49m\u001b[4@\u001b[31mode.\u001b[39;49m\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[23;29H\u001b[7m22% L99\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m100\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;44H\u001b[24;1H\u001b[?25lAuto-saving...\u001b[10;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[10;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[K\u001b[12d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25l\u001b[32m\"                                                                    \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[12;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25li\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\b\b\b\u001b[?25lno\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;13H\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[14;13H\r\t\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[K\u001b[C\b\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                         \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[15;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m    # This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[32m    def make_unit(self, data):                                                  \u001b[39;49m\r\n\u001b[32m        u = Unit(data[\"\u001b[39;49mname\u001b[32m\"], data[\"\u001b[39;49micon\u001b[32m\"])                                    \u001b[39;49m\r\n\u001b[32m        return u                                                                \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m    # This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[15;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[15;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;34H\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[15;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[15;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[15;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\b\b\b\b\r\u001b[13;13H\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                             \u001b[39;49m\r\n\u001b[32m        else:                                                                   \u001b[39;49m\r\n\u001b[13;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[13;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[13;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;45H\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;36H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[14;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[14;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[14;17H\u001b[?25lf\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;36H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;21H\r\t\t\b\b\b\b\r\t\b\b\b\b\r\u001b[15;21H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;36H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;21H\r\t\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[16;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[16;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   22% L109\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[12;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mR\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+-------------------+\u001b[7;11H|\u001b[31m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;11H|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[9;11H+-------------------+\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b[7;6H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Canc\u001b[8;6H+----\u001b[23;8H\u001b[6;11H  |\u001b[32m\u001b[40m..................\u001b[7;11H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40mel|\u001b[32m\u001b[40m..................\u001b[8;11H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m--+\u001b[32m\u001b[40m..................\u001b[9;11H.....................\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n        \u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   21% L109  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   21% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\b\b\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;29H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[18;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[18;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[18;29H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default *scratch*): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgrid.py\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lshell.py\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m sys\u001b[K\r\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m traceback\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A Shell represents a single instance of a game, including its maps,           \u001b[39;49m\r\n\u001b[31m# data, and everything else.                                                    \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mShell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m = {}\r\n\t\u001b[33mgdict\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Hello World\"\u001b[39;49m\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"h\"\u001b[39;49m] = 15\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"cells\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(30):\u001b[K\u001b[18;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(15):\r\n\t        \u001b[33mcell\u001b[39;49m = {}\u001b[20;13H    \u001b[33mcell\u001b[39;49m[\u001b[32m\"x\"\u001b[39;49m] = x\u001b[K\r\n\t\t\u001b[33mcell\u001b[39;49m[\u001b[32m\"y\"\u001b[39;49m] = y\u001b[22;5H            \u001b[33mcell\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"grass\"\u001b[39;49m\u001b[K\u001b[23;14H\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   12% L20 \u001b[0m\u001b[39;49m\u001b[27m\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\t\u001b[?25l\u001b[33mcell\u001b[39;49m[\u001b[32m\"y\"\u001b[39;49m] = y\r\n                \u001b[33mcell\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"grass\"\u001b[39;49m\r\n                gdict[\u001b[32m\"cells\"\u001b[39;49m].append(cell)\r\n\t\u001b[33munit1\u001b[39;49m = {}\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"i\"\u001b[39;49m\r\n        \u001b[33munit1\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit1\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 0\u001b[K\r\n        \u001b[33munit2\u001b[39;49m = {}\u001b[K\u001b[10;5H    \u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n\u001b[K\n\t\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\t\u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[23;29H\u001b[7m29% L28\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\r\n\u001b[K\n\u001b[K\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(1,1)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.draw(1,20,\u001b[32m\"r\"\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.draw(1,19)\u001b[K\r\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# Runs an interactive session of our game with the player until either      \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# turn off graphics, print the traceback, and kill the program.             \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrun\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;29H\u001b[7m53% L47\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[10;5H    \u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\r\n\u001b[K\n\t\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\t\u001b[33mr\u001b[39;49m = game.Game(rdict)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\u001b[K\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[22;5H    \u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\u001b[23;29H\u001b[7m39% L46\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;30H\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   39% L45\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                                 \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[11;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m        # The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[32m        r = game.Game(rdict)                                                    \u001b[39;49m\r\n\u001b[32m        self.g = grid.Controller(70,18,r)                                       \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        self.menu = None                                                        \u001b[39;49m\r\n\u001b[32m        self.buff = widgets.Buffer(10,5)                                        \u001b[39;49m\r\n\u001b[32m        self.buff.write(\"\u001b[39;49mHello, world!\u001b[32m\")                                        \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m    def display(self):                                                          \u001b[39;49m\r\n\u001b[11;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[11;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[11;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;26H\r\t\u001b[?25l\u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\r\n\n\u001b[?25l        \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n        \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\u001b[K\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\t\u001b[?25lr\u001b[12;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m'                                                                 \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[12;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m        # The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[32m        r = game.Game(rdict)                                                    \u001b[39;49m\r\n\u001b[32m        self.g = grid.Controller(70,18,r)                                       \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        self.menu = None                                                        \u001b[39;49m\r\n\u001b[32m        self.buff = widgets.Buffer(10,5)                                        \u001b[39;49m\r\n\u001b[32m        self.buff.write(\"Hello, world!\")                                        \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[12;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m'\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[12;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[12;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\b\r\n\n\u001b[?25l        \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n        \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\u001b[K\u001b[12;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l])\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Hello World\"\u001b[39;49m\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"h\"\u001b[39;49m] = 15\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"cells\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(30):\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(15):\r\n\t        \u001b[33mcell\u001b[39;49m = {}\u001b[K\r\n\t        \u001b[33mcell\u001b[39;49m[\u001b[32m\"x\"\u001b[39;49m] = x\u001b[K\r\n\t\t\u001b[33mcell\u001b[39;49m[\u001b[32m\"y\"\u001b[39;49m] = y\r\n\t        \u001b[33mcell\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"grass\"\u001b[39;49m\u001b[K\r\n\t        gdict[\u001b[32m\"cells\"\u001b[39;49m].append(cell)\r\n\t\u001b[33munit1\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"i\"\u001b[39;49m\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 0\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[23;29H\u001b[7m18% L37\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\trdict[\u001b[32m'history'\u001b[39;49m].append([])\r\n\u001b[K\n\t\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\t\u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\r\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Hello World\"\u001b[39;49m\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"h\"\u001b[39;49m] = 15\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"cells\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(30):\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(15):\r\n\t        \u001b[33mcell\u001b[39;49m = {}\u001b[K\r\n\t        \u001b[33mcell\u001b[39;49m[\u001b[32m\"x\"\u001b[39;49m] = x\u001b[K\r\n\t\t\u001b[33mcell\u001b[39;49m[\u001b[32m\"y\"\u001b[39;49m] = y\r\n\t        \u001b[33mcell\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"grass\"\u001b[39;49m\u001b[K\r\n\t        gdict[\u001b[32m\"cells\"\u001b[39;49m].append(cell)\r\n\t\u001b[33munit1\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"i\"\u001b[39;49m\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 0\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[23;29H\u001b[7m18% L37\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\trdict[\u001b[32m'history'\u001b[39;49m].append([])\r\n\u001b[K\n\t\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\t\u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\r\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l(])\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)])\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l0)])\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,)])\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l4)])\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[12;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[12;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nq^CTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 114, in __init__\r\n    self.end_turn()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 253, in end_turn\r\n    self.checkpoint = copy.deepcopy(self.grid)\r\n  File \"/usr/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/usr/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 159, in deepcopy\r\n    cls = type(x)\r\nKeyboardInterrupt\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[K\r\n        \u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n        rdict[\u001b[32m'history'\u001b[39;49m].append([(0,4)])\u001b[K\r\n\u001b[K\n        \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[A\n        \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   38% L46   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[12;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\n\u001b[K\u001b[4;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(1,1)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.draw(1,20,\u001b[32m\"r\"\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.draw(1,19)\u001b[K\r\n\u001b[K\n\u001b[K\u001b[12;5H\u001b[31m# Runs an interactive session of our game with the player until either      \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# turn off graphics, print the traceback, and kill the program.             \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrun\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\tgfx.start(\u001b[32m\"ascii\"\u001b[39;49m)\r\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36mtry\u001b[0m\u001b[39;49m:\u001b[K\n\u001b[33mc\u001b[39;49m = -1\n\b\b\b\b\b\bgfx.clear()\u001b[23;29H\u001b[7m61% L55\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[4;5H    \u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[K\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[12;5H    rdict[\u001b[32m'history'\u001b[39;49m].append([(0,4)])\u001b[K\r\n\u001b[K\u001b[14;5H    \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[15;5H    \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\r\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7m38\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\u001b[22;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[23;14H\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   21% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\n\t\u001b[?25l\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[4;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[7;14Haction = []\u001b[K\u001b[8;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[23;29H\u001b[7m17% L100\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# The Game serve two purposes. Firstly, it is a factory that produces           \u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[31m# state of the game grid.                                                       \u001b[39;49m\r\n\u001b[8P\u001b[6;3H\u001b[31m                             \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[31m#   make_unit                                                                   \u001b[39;49m\r\n\u001b[31m#   make_team                                                                   \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  pop\u001b[39;49m\u001b[8@\u001b[31m_alerts \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[15;12H\u001b[31mODO: load the rules definition (types of units and properties)\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\u001b[K\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[19;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[20;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[23;30H\u001b[7m3% L81 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[?25l        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\u001b[6;32H\u001b[8P\r\u001b[8@\u001b[6;11H\u001b[31mThese are the state variables\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n\t\b\u001b[8P\r\u001b[8@\u001b[11;11H\u001b[31mother\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\u001b[K\u001b[15;12H\u001b[31mhe first index is the attacker, the second is the defender.   \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[19;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[20;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[4;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[7;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[8;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[9;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[14;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[23;29H\u001b[7m21% L99\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[4;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[7;14Haction = []\u001b[K\u001b[8;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[23;29H\u001b[7m17\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[4;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[7;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[8;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[9;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[14;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[23;29H\u001b[7m21\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\r\n\u001b[K\u001b[13;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[19;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\u001b[23;30H\u001b[7m6% L118\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[19;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[20;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#for d in turn:                                                 \u001b[39;49m\r\n\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m#    self.process(d)                                            \u001b[39;49m\r\n\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m#self.end_turn()                                                \u001b[39;49m\r\n\u001b[17;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[24;1H\u001b[?25lAuto-saving...\u001b[18;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[18;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[18;12H\u001b[C\u001b[?25l\u001b[31m#self.alerts = []                                                   \u001b[39;49m\r\n\u001b[18;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\n\u001b[?25l            \u001b[31m#self.alerts = []                                                   \u001b[39;49m\r\n\u001b[A\u001b[23;36H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[18;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[18;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+-------------------+\u001b[7;11H|\u001b[31m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;11H|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[9;11H+-------------------+\u001b[23;8H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n        \u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\r\n                \u001b[31m#for d in turn:                                                 \u001b[39;49m\r\n\u001b[A\n                \u001b[31m#    self.process(d)                                            \u001b[39;49m\r\n\u001b[A\n                \u001b[31m#self.end_turn()                                                \u001b[39;49m\r\n\u001b[A\n                \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n            \u001b[31m#self.alerts = []                                                   \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   21% L115  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[18;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\u001b[K\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[16;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[16;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+-------------------+\u001b[7;11H|\u001b[31m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;11H|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[9;11H+-------------------+\u001b[23;8H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n        \u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\u001b[K\r\n                \u001b[31m#self.end_turn()                                                \u001b[39;49m\r\n\u001b[A\n                \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n            \u001b[31m#self.alerts = []                                                   \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   21% L113  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[16;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data)\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[23;30H\u001b[7m6% L118\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[6;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[8;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[10;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[14;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[20;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[21;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[22;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[23;29H\u001b[7m30% L137\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l                _floodfill((a,b-1),r-1)\u001b[K\u001b[3;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[4;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[11;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\u001b[23;30H\u001b[7m5% L156\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[7;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[12;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[18;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[23;30H\u001b[7m9% L175\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[7;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[8;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\u001b[23;29H\u001b[7m44% L194\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[11;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[20;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[23;30H\u001b[7m8% L213\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[8;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units\u001b[18;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\r\n\t\u001b[8P\n\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[23;29H\u001b[7m53% L232\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[13;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[14;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[18;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[23;30H\u001b[7m7% L251\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[4;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[10;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[11;14Hdata[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mThis sets the new state and returns the appropriate code      \u001b[39;49m\u001b[20;7H\u001b[31mto the caller for what kind of input should come next.\u001b[39;49m\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\n\b\u001b[7m5% L250\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[7;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   55% L245\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l!\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\u001b[11;13H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\r\n\t\u001b[4@\u001b[17;45Hcp)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m0% L241\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[3;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[8;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[16;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[19;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[20;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[23;29H\u001b[7m46% L222\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[5;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[7;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[15;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[16;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[17;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[18;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[22;14Halerts = []\u001b[K\u001b[23;30H\u001b[7m2% L203\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[18;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\n\u001b[7m37% L184\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[4;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[10;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[18;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[23;29H\u001b[7m42\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[22;14Hchoices = []\u001b[23;30H\u001b[7m6% L202\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[3;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[7;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[12;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[16;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[19;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[20;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m50% L221\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[11;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[4P\t\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[20;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[23;30H\u001b[7m5% L240\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\u001b[11;13H    \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\r\n\t\u001b[4@\u001b[17;45Hcp)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[11;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[4P\t\t\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[20;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;47H\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l!\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;53H\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[9;1H\u001b[1L\u001b[1;24r\u001b[8;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;36H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;19H\u001b[?25l\u001b[32mException\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\")                                                  \u001b[39;49m\r\n\u001b[32m        self.start = True                                                       \u001b[39;49m\r\n\u001b[8;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mT)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mh)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m )\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m )\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m        self.grid.end_turn()                                                    \u001b[39;49m\r\n\u001b[32m        for u in self.grid.units:                                               \u001b[39;49m\r\n\u001b[32m            u.ready = True                                                      \u001b[39;49m\r\n\u001b[32m        self.data[\"\u001b[39;49mhistory\u001b[32m\"].append(self.history)                               \u001b[39;49m\r\n\u001b[32m        self.history = []                                                       \u001b[39;49m\r\n\u001b[32m        self.action = []                                                        \u001b[39;49m\r\n\u001b[32m        self.state = None                                                       \u001b[39;49m\r\n\u001b[32m        self.choices = []                                                       \u001b[39;49m\r\n\u001b[32m        self.checkpoint = copy.deepcopy(self.grid)                              \u001b[39;49m\r\n\u001b[32m        return self.transition(None)                                            \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m    # This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[32m    # to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[8;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mC)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m')\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m )\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m )\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mh)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m )\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m) \u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mg)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[8;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[8;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[8;43H\u001b[?25l\u001b[32mh)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m )\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mw)\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[8;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\r\n            \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[8;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[8;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[8;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+-------------------+\u001b[7;11H|\u001b[31m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;11H|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[9;11H+-------------------+\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H+------+\u001b[6;3H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;3H|Cancel|\u001b[8;3H+------+\u001b[23;8H\u001b[6;4HWait\u001b[7;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23d\b\b\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b[32m\u001b[40m........\u001b[6;3H........\u001b[7;3H........\u001b[8;3H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;11H\u001b[32m\u001b[40m.....................\u001b[7;11H.....................\u001b[8;11H.....................\u001b[9;11H.....................\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;5H+----------+\u001b[6;5H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[7;5H|End Turn  |\u001b[8;5H|Undo      |\u001b[9;5H|Start Over|\u001b[10;5H+----------+\u001b[23;8H\u001b[6d\b\bBack\u001b[7;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 84, in run\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 241, in handle_input\r\n    r = self.world.process(q)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 279, in process\r\n    elif self.state == \"main menu\": return self.process_main_menu(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 365, in process_main_menu\r\n    return self.end_turn()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 245, in end_turn\r\n    if self.state != None and self.actions != []:\r\nAttributeError: 'Game' object has no attribute 'actions'\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n    \u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.actions != []:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\r\n            \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   54% L246  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[8;50H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[12;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[18;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[21;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m0% L241\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[3;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[8;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[16;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[19;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[20;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[23;29H\u001b[7m45% L222\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[5;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[7;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[15;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[16;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[17;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[18;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[22;14Halerts = []\u001b[K\u001b[23;30H\u001b[7m1% L203\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[18;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\n\u001b[7m36% L184\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[3;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[4;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[9;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[12;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[18;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[22;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[23;30H\u001b[7m2% L165\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[12;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[22;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[23;29H\u001b[7m28% L146\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[6;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\u001b[7;5H            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\u001b[K\r\n\t        \u001b[31m#self.end_turn()                                                \u001b[39;49m\r\n\t\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[11;13H\u001b[31m#self.alerts = []                                                   \u001b[39;49m\r\n\u001b[12;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[17;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\u001b[23;30H\u001b[7m4% L127\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[8P\u001b[C\u001b[31m itself. Ugh.  \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\u001b[23;29H\u001b[7m19% L108\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[8P\u001b[3;3H\u001b[31m  pop\u001b[39;49m\u001b[8@\u001b[31m_alerts \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[7;12H\u001b[31mODO: load the rules definition (types of units and properties)\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\u001b[K\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[11;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[12;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[15;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[18;14Haction = []\u001b[K\u001b[19;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[20;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\u001b[23;30H\u001b[7m5% L89 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l        \u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon]\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp < 90):\u001b[K\r\n            frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\u001b[6;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\u001b[K\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Game serve two purposes. Firstly, it is a factory that produces           \u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[31m# state of the game grid.                                                       \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m                             \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[31m#   make_unit                                                                   \u001b[39;49m\r\n\u001b[31m#   make_team                                                                   \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  pop\u001b[39;49m\u001b[8@\u001b[31m_alerts \u001b[39;49m\u001b[23;30H\u001b[7m1% L70\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Unit, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\u001b[9;5H\u001b[4P\t\b\b\u001b[31mThis drawing method overrides the default method by hand\u001b[39;49m\u001b[4@\u001b[31mling\u001b[39;49m\u001b[10;5H\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\u001b[K\r\n\u001b[K\n        \u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n        \u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        \u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[19;52H\u001b[8P\r\u001b[8@\u001b[19;11H\u001b[31mBuild the animation for this unit based on values\u001b[39;49m\u001b[20;40H\u001b[8P\r\u001b[8@\u001b[20;11H\u001b[31mthat are running low (hp, fuel, etc).\u001b[39;49m\r\n        \u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon]\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp < 90):\u001b[K\u001b[23;29H\u001b[7m 7% L51\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[33mCTRL_COORD\u001b[39;49m = \u001b[32m\"coord\"\u001b[39;49m\u001b[K\r\n\u001b[33mCTRL_MENU\u001b[39;49m = \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = \u001b[32m\"undo\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Custom Cell subclass. Contains information such as terrain defensive bonus.   \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(grid.Cell):\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\u001b[K\u001b[10;5H    \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\u001b[K\r\n\u001b[K\n\u001b[31m# Custom Team subclass. Contains information such as resources.                 \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(grid.Team):\u001b[K\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Team, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, color)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\u001b[K\r\n\u001b[K\n\u001b[31m# Custom Unit subclass. Contains information such as HP, readiness, and         \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31ma custom drawing method.                         \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(grid.Unit):\u001b[K\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Unit, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon)\u001b[23;30H\u001b[7m3% L32\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Unit, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon)\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# This drawing method overrides the default method by handling              \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\r\n\u001b[K\n\t\u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n\t\u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\u001b[19;52H\u001b[8P\r\u001b[8@\u001b[19;11H\u001b[31mBuild the animation for this unit based on values\u001b[39;49m\r\n        \u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\u001b[21;5H    \u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon]\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp < 90):\u001b[K\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon]\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp < 90):\u001b[K\r\n\t    frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\u001b[9;63H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mDraw the character.                                     \u001b[39;49m\u001b[10;5H    draw.char(x, y, img, color)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Game serve two purposes. Firstly, it is a factory that produces           \u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[31m# state of the game grid.                                                       \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  make_unit                                      \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  make_team                          \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[31m#   pop_alerts                                                                  \u001b[39;49m\r\n\u001b[23;29H\u001b[7m11% L50\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[31m#   pop_alerts                                                                  \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[31m# TODO: load the rules definition (types of units and properties)       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\n        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\n\t\t\t\t\b\u001b[8P\r\u001b[8@\u001b[17;11H\u001b[31mThese are the state variables\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n\t\b\u001b[8P\r\u001b[8@\u001b[22;11H\u001b[31mother\u001b[39;49m\u001b[23;30H\u001b[7m5% L69\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\b\u001b[8P\r\u001b[8@\u001b[3;11H\u001b[?25l\u001b[31mother\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\u001b[K\u001b[7;12H\u001b[31mhe first index is the attacker, the second is the defender.   \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[11;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[12;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[15;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[18;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[19;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[20;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\u001b[23;30H\u001b[7m9% L88\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[6;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\u001b[K\r\n\t\t\t\u001b[8P\r\t\u001b[8@\u001b[9;18H\u001b[31mself.end_turn()\u001b[39;49m\r\n\t        \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\t    \u001b[31m#self.alerts = []                                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[23;29H\u001b[7m24% L107\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data)\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[12;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[17;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[21;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[23;30H\u001b[7m8% L126\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[6;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[7;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[12;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[13;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[14;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[15;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[22;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m32% L145\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[18;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\n\u001b[C\u001b[7m6% L164\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[4;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[10;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[18;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[23;29H\u001b[7m41% L183\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[22;14Hchoices = []\u001b[23;30H\u001b[7m5% L202\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[5;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[7;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[15;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[16;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[17;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[18;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[22;14Halerts = []\u001b[K\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[22;14Hchoices = []\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[3;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[7;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[12;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[16;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[19;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[20;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m50% L221\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.actions != []:\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[12;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[18;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[21;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[23;30H\u001b[7m4% L240\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;54H\b\b\b\b\b\b\b\b\u001b[?25l != []:\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[7;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[7;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+-------------------+\u001b[7;11H|\u001b[31m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;11H|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[9;11H+-------------------+\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H+------+\u001b[5;3H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\r\u001b[6d|\u001b[32m\u001b[40m..\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Cancel\u001b[7;4H+------\u001b[23;8H\u001b[5;5HWait\u001b[6;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;11H|\u001b[32m\u001b[40m....................\u001b[7;11H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+\u001b[32m\u001b[40m....................\u001b[8;11H.....................\u001b[9;11H.....................\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b[6;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b[5;5HWait\u001b[6;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b[6;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b[23;8H\u001b[4;4H\u001b[32m\u001b[40m........\u001b[5;4H........\u001b[6;4H........\u001b[7;4H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b(B\u001b[0;1m\u001b[30m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;5H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4d\b+----------+\u001b[5;7H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[6;7H|End Turn  |\u001b[7;7H|Undo      |\u001b[8;7H|Start Over|\u001b[9;7H+----------+\u001b[23;8H\u001b[5dBack\u001b[6;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4d\b\u001b[32m\u001b[40m............\u001b[5;3H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m............\u001b[6;7H....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[7;7H\u001b[32m\u001b[40m....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;7H\u001b[32m\u001b[40m....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[9;7H\u001b[32m\u001b[40m....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+\u001b[18G-------------+\u001b[23;8H\u001b[4d\b+----------+\u001b[5;7H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[6;7H|End\u001b[7;7H|Und\u001b[8;7H|Sta\u001b[9;7H+---\u001b[23;8H\u001b[5dBack\u001b[6;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4d\b\u001b[32m\u001b[40m............\u001b[5;7H............\u001b[6;7H....\u001b[7;7H....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mHello World: Day 1\u001b[8;7H\u001b[32m\u001b[40m....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[9;7H\u001b[32m\u001b[40m....\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\n    \u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\r\n            \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   54% L245  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[7;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[12;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[18;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[21;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m0% L241\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[3;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[8;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[16;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[19;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[20;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[23;29H\u001b[7m45% L222\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[5;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[7;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[15;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[16;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[17;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[18;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[22;14Halerts = []\u001b[K\u001b[23;30H\u001b[7m1% L203\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[18;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\n\u001b[7m36% L184\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[3;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[4;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[9;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[12;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[18;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[22;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[23;30H\u001b[7m2% L165\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[12;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[22;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[23;29H\u001b[7m28% L146\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[6;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\u001b[7;5H            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\u001b[K\r\n\t        \u001b[31m#self.end_turn()                                                \u001b[39;49m\r\n\t\t\u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[11;13H\u001b[31m#self.alerts = []                                                   \u001b[39;49m\r\n\u001b[12;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[17;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\u001b[23;30H\u001b[7m4% L127\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[8P\u001b[C\u001b[31m itself. Ugh.  \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\u001b[23;29H\u001b[7m19% L108\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[6;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\u001b[K\r\n\t\t\t\u001b[8P\r\t\u001b[8@\u001b[9;18H\u001b[31mself.end_turn()\u001b[39;49m\r\n\t        \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n\t    \u001b[31m#self.alerts = []                                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[23;29H\u001b[7m24\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ \u0007fg\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n        \u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n                \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   24% L116  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24;1H\u001b[?25lQuit\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 114, in __init__\r\n    self.end_turn()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 246, in end_turn\r\n    raise Exception(\"Can't end right now\")\r\nException: Can't end right now\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n        \u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n                \u001b[1m\u001b[36mpass\u001b[0m\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   24% L115  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;36H\b\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[22;1H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[10d\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default shell.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[K\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[K\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\trdict[\u001b[32m'history'\u001b[39;49m].append([(0,4)])\u001b[14;63H\u001b[4P\u001b[14;5H\u001b[4@\u001b[14;13H\u001b[31me most basic item is the rules.                       \u001b[39;49m\u001b[15;5H    \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\r\n\u001b[K\n\u001b[K\u001b[23;14H\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   38% L55 \u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l,])\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(])\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\t\u001b[?25lr\u001b[12;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1])\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,])\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l4])\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)])\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;45H\u001b[?25l,])\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\t\u001b[?25l\u001b[33mr\u001b[39;49m\u001b[12;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"])                                \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[12;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mw])\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma])\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi])\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt])\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m])\u001b[K\r\n\u001b[K\u001b[12;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[12;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[12;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 113, in __init__\r\n    self.process(d)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 280, in process\r\n    elif self.state == \"action\"   : return self.process_action(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 375, in process_action\r\n    raise Exception(\"Invalid option.\")\r\nException: Invalid option.\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[K\r\n        \u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n        rdict[\u001b[32m'history'\u001b[39;49m].append([(0,4),(1,4),\u001b[32m\"wait\"\u001b[39;49m])\u001b[K\r\n\u001b[K\n        \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[A\n        \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   37% L46   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[12;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[32mait\"\u001b[39;49m])\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mWait\"\u001b[39;49m])\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n^CTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 114, in __init__\r\n    self.end_turn()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 255, in end_turn\r\n    self.checkpoint = copy.deepcopy(self.grid)\r\n  File \"/usr/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/usr/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 328, in _reconstruct\r\n    args = deepcopy(args, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 243, in _deepcopy_tuple\r\n    for i in range(len(x)):\r\nKeyboardInterrupt\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[K\r\n        \u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n        rdict[\u001b[32m'history'\u001b[39;49m].append([(0,4),(1,4),\u001b[32m\"Wait\"\u001b[39;49m])\u001b[K\r\n\u001b[K\n        \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[A\n        \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   37% L46   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[C\u001b[?25l\u001b[1@[\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\b\b\r\n\n\n\t\u001b[?25lr\u001b[12;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l])\r\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 113, in __init__\r\n    self.process(d)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 277, in process\r\n    if   self.state == None       : return self.process_none(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 289, in process_none\r\n    raise Exception(\"Expected tuple!\")\r\nException: Expected tuple!\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[K\r\n        \u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n        rdict[\u001b[32m'history'\u001b[39;49m].append([[(0,4),(1,4),\u001b[32m\"Wait\"\u001b[39;49m]])\u001b[K\r\n\u001b[K\n        \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[A\n        r = game.Game(rdict)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   37% L46   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\t\u001b[?25l\u001b[33mr\u001b[39;49m\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\u001b[14;5H\u001b[4P\t\u001b[31mis function produces a Unit object based on the unit c\u001b[39;49m\u001b[4@\u001b[31mode.\u001b[39;49m\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\r\n\u001b[K\u001b[19;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\n\b\b\b\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   24% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\r\n\u001b[K\u001b[5;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[11;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[16;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[18;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[20;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[23;30H\u001b[7m8% L126\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[11;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[12;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[16;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\u001b[23;29H\u001b[7m19% L108\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[8P\u001b[3;3H\u001b[31m  pop\u001b[39;49m\u001b[8@\u001b[31m_alerts \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[7;12H\u001b[31mODO: load the rules definition (types of units and properties)\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\u001b[K\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[11;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[12;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[15;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[18;14Haction = []\u001b[K\u001b[19;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[20;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\u001b[23;30H\u001b[7m5% L89 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\b\u001b[8P\r\u001b[8@\u001b[3;11H\u001b[?25l\u001b[31mother\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\u001b[K\u001b[7;12H\u001b[31mhe first index is the attacker, the second is the defender.   \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[11;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[12;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[15;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[18;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[19;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[20;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\u001b[23;30H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[6;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[23;29H\u001b[7m24% L107\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\r\n\u001b[K\u001b[5;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[11;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[16;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[18;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[20;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[23;30H\u001b[7m8% L126\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m d \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(d)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[11;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[12;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[16;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[5;35H\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;46H\u001b[1;22r\u001b[7;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   24% L112\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[24;1H\u001b[?25lAuto-saving...\u001b[7;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[7;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[7;28H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\t\u001b[4@\u001b[8;21H\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[4@\t\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\t\b\u001b[1P\r\t\t\b\b\u001b[1P\r\u001b[10;14H\u001b[1P\r\u001b[10;13H\u001b[1P\r\u001b[10;13H\u001b[12@\t\t\b\b\b\b\u001b[4P\r\t\t\u001b[4P\u001b[8@\t\b\b\b\b\u001b[4P\r\t\t\u001b[4P\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\b\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@p\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;38H\b\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[9;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[9;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 114, in __init__\r\n    self.process(step)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 278, in process\r\n    if   self.state == None       : return self.process_none(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 290, in process_none\r\n    raise Exception(\"Expected tuple!\")\r\nException: Expected tuple!\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n        \u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   24% L114  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[9;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[12;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[17;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[21;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[23;30H\u001b[7m8% L126\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[6;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\u001b[7;5H            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[12;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[17;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[12;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[17;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[21;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[23;30H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[6;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[7;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[12;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[13;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[14;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[15;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[22;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m32% L145\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[18;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\n\u001b[C\u001b[7m7% L164\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[4;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[10;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[18;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[23;29H\u001b[7m42% L183\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[22;14Hchoices = []\u001b[23;30H\u001b[7m6% L202\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[3;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[7;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[12;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[16;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[19;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[20;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m50% L221\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25laction = []\u001b[K\u001b[3;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\t\boices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[8;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[8P\tte = \u001b[35mNon\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[18;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t\t\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[23;29H\u001b[7m48% L220\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[7;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[8;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[9;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[10;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[14;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[19;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m3% L211\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[10;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[18;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[23;29H\u001b[7m38% L192\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[4;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[10;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[14;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\u001b[23;30H\u001b[7m4% L173\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[K\u001b[4;5H\u001b[?25l\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[11;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[14;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[15;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[20;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[23;29H\u001b[7m29% L154\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[4;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[5;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[6;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[7;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[14;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\u001b[23;29H\u001b[7m34\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[10;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[15;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[21;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;30H\u001b[7m8% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[10;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[23;29H\u001b[7m43% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[14;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[23;30H\u001b[7m8% L210\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[7;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[8;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[9;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[10;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[14;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[19;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[10;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[18;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[23;29H\u001b[7m38% L192\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[4;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[10;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[14;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\u001b[23;30H\u001b[7m4% L173\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[K\u001b[4;5H\u001b[?25l\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[11;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[14;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[15;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[20;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[23;29H\u001b[7m29% L154\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[4;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\u001b[7;7H\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[9;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;30H\u001b[7m6% L135\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[K\u001b[4;5H\u001b[?25l\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[9;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[11;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[13;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[17;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[23;30H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[4;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[5;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[6;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[7;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[14;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\u001b[23;29H\u001b[7m34% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\u001b[K\u001b[4;5H\u001b[?25l\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[11;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[14;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[15;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[20;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[23;29H\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[4;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\u001b[7;7H\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[9;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;30H\u001b[7m6% L135\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[17;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\u001b[18;5H            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\n\u001b[C\u001b[7m0% L116\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[3;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[4;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[7;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[10;14Haction = []\u001b[K\u001b[11;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[12;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[23;29H\u001b[7m16% L97 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[3;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[4;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[7;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[10;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[11;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[12;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[17;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\n\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;30H\u001b[7m6% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[7;63H\u001b[4P\u001b[7;5H\u001b[4@\u001b[7;11H\u001b[31mReplay turn history.                                    \u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[11;21H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[12;5H                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\u001b[13;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\u001b[K\u001b[18;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[23;30H\u001b[7m3% L114\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default shell.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[K\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[K\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[K\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\trdict[\u001b[32m'history'\u001b[39;49m].append([[(0,4),(1,4),\u001b[32m\"Wait\"\u001b[39;49m]])\r\n\u001b[K\n\t\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\t\u001b[33mr\u001b[39;49m = game.Game(rdict)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;14H\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   37% L46 \u001b[0m\u001b[39;49m\u001b[27m\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l,])\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[])\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l])\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;55H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\u001b[18;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\n\n\b\b\b\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   23% L113\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default shell.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[K\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[K\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[K\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\trdict[\u001b[32m'history'\u001b[39;49m].append([[(0,4),(1,4),\u001b[32m\"Wait\"\u001b[39;49m],[]])\r\n\u001b[K\n\t\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\t\u001b[33mr\u001b[39;49m = game.Game(rdict)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;14H\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   37% L46 \u001b[0m\u001b[39;49m\u001b[27m\u001b[12;55H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@ \u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1@[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l\u001b[1@)\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;36H\u001b[?25l\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]])               \u001b[39;49m\r\n\u001b[12;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\t\u001b[C\u001b[?25l ])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]])\u001b[39;49m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l ])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]])\u001b[39;49m\u001b[12;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l[  ])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]])\u001b[39;49m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]  ])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]])\u001b[39;49m\u001b[12;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l,  ])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]])\u001b[39;49m\u001b[12;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[  ])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]])\u001b[39;49m\u001b[12;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]  ])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]])\u001b[39;49m\u001b[12;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]]) \u001b[39;49m\u001b[12;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]]) \u001b[39;49m\u001b[12;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]]) \u001b[39;49m\u001b[12;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\t\u001b[?25lr\u001b[12;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[12;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[12;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;39H\u001b[?25l])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]])\u001b[39;49m\r\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[12;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[12;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n^CTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 115, in __init__\r\n    self.end_turn()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 256, in end_turn\r\n    self.checkpoint = copy.deepcopy(self.grid)\r\n  File \"/usr/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/usr/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 307, in _reconstruct\r\n    if isinstance(info, str):\r\nKeyboardInterrupt\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[K\r\n        \u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n        rdict[\u001b[32m'history'\u001b[39;49m].append([[],[]])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]])          \u001b[39;49m\r\n\u001b[A\n\u001b[K\n        \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[A\n        r = game.Game(rdict)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   37% L46   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[12;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\t\u001b[?25l\u001b[33mr\u001b[39;49m\u001b[12;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\u001b[18;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\n\n\b\b\b\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   23% L113\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[15;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[20;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\u001b[23;30H\u001b[7m7% L12\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[9;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\u001b[10;5H            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[15;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[16;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[20;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ q\b\u001b[Kfg\b\b./open-tactics.py \r\nq\b \b^CTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 115, in __init__\r\n    self.end_turn()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 256, in end_turn\r\n    self.checkpoint = copy.deepcopy(self.grid)\r\n  File \"/usr/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/usr/lib/python2.7/copy.py\", line 182, in deepcopy\r\n    rv = reductor(2)\r\nKeyboardInterrupt\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n        \u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   23% L123  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[21d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[15;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[20;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\u001b[23;30H\u001b[7m7% L123\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[5;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[9;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[15;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[16;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[17;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[18;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\u001b[23;29H\u001b[7m31% L142\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[6;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[21;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\u001b[23;30H\u001b[7m6% L161\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[7;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[13;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[21;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[23;29H\u001b[7m41% L180\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25l\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[23;30H\u001b[7m5% L199\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[6;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[15;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[19;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[20;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[22;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m50% L218\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[3;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[4;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[15;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[21;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[23;30H\u001b[7m4% L237\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[5;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[15;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[23;30H\u001b[7m8% L256\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[7;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[8;14Hdata[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mThis sets the new state and returns the appropriate code      \u001b[39;49m\u001b[17;7H\u001b[31mto the caller for what kind of input should come next.\u001b[39;49m\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[21;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[22;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[23;30H\u001b[7m5% L255\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[7;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[13;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[16;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\u001b[K\u001b[23;30H\u001b[7m1% L246\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;7H\u001b[?25l\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[3;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\u001b[7;14Hchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[11;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[14;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[15;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\n\b\b\b\b\u001b[7m47% L227\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[10;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[11;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[12;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[13;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[17;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[22;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[23;30H\u001b[7m3% L208\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[13;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[21;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[23;29H\u001b[7m38% L189\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[4;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[7;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[13;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[17;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[23;30H\u001b[7m3% L170\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[7;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[14;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[17;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[18;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[23;29H\u001b[7m29% L151\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[6;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[7;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[12;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\u001b[23;30H\u001b[7m5% L132\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[20;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\u001b[21;5H            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\u001b[23;29H\u001b[7m19% L113\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;12H\u001b[?25l\u001b[31mODO: load the rules definition (types of units and properties)\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\u001b[K\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[6;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[7;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[10;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[13;14Haction = []\u001b[K\u001b[14;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[15;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\u001b[23;30H\u001b[7m5% L94 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\u001b[K\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Game serve two purposes. Firstly, it is a factory that produces           \u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[31m# state of the game grid.                                                       \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m                             \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[31m#   make_unit                                                                   \u001b[39;49m\r\n\u001b[31m#   make_team                                                                   \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  pop\u001b[39;49m\u001b[8@\u001b[31m_alerts \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[21;12H\u001b[31mODO: load the rules definition (types of units and properties)\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\u001b[K\u001b[23;30H\u001b[7m2% L75\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\u001b[4;5H\u001b[4P\t\b\b\u001b[31mThis drawing method overrides the default method by hand\u001b[39;49m\u001b[4@\u001b[31mling\u001b[39;49m\u001b[5;5H\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\u001b[K\r\n\u001b[K\n        \u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n        \u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        \u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;52H\u001b[8P\r\u001b[8@\u001b[14;11H\u001b[31mBuild the animation for this unit based on values\u001b[39;49m\u001b[15;40H\u001b[8P\r\u001b[8@\u001b[15;11H\u001b[31mthat are running low (hp, fuel, etc).\u001b[39;49m\r\n        \u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon]\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp < 90):\u001b[K\r\n            frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\u001b[20;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m 8% L56\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# Custom Cell subclass. Contains information such as terrain defensive bonus.   \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(grid.Cell):\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\u001b[K\u001b[5;5H    \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\u001b[K\r\n\u001b[K\n\u001b[31m# Custom Team subclass. Contains information such as resources.                 \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(grid.Team):\u001b[K\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Team, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, color)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\u001b[K\r\n\u001b[K\n\u001b[31m# Custom Unit subclass. Contains information such as HP, readiness, and         \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31ma custom drawing method.                         \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(grid.Unit):\u001b[K\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Unit, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\u001b[23;30H\u001b[7m3% L37\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;3H\u001b[?25l\u001b[31mA game object handles all of the actual game play elements. The rules      \u001b[39;49m\r\n\u001b[31m# are what give meaning to the pieces in a Grid, and is controlled (usually)    \u001b[39;49m\r\n\u001b[31m# by a Controller that provides piecewise input.                                \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m grid, widgets\r\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Global strings. Stored to avoid mistyping.                                    \u001b[39;49m\r\n\u001b[33mCTRL_COORD\u001b[39;49m = \u001b[32m\"coord\"\u001b[39;49m\u001b[K\r\n\u001b[33mCTRL_MENU\u001b[39;49m = \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = \u001b[32m\"undo\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Custom Cell subclass. Contains information such as terrain defensive bonus.   \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(grid.Cell):\u001b[K\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\u001b[K\r\n\u001b[K\u001b[4;3H\u001b[31mCustom Team subclass. Contains information such as resources.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(grid.Team):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Team, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, color)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\r\n\u001b[K\n\u001b[31m# Custom Unit subclass. Contains information such as HP, readiness, and         \u001b[39;49m\r\n\u001b[31m# a custom drawing method.                                                      \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(grid.Unit):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Unit, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon)\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This drawing method overrides the default method by handling              \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n\u001b[23;29H\u001b[7m 4%\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\r\n\u001b[K\n\t\u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n\t\u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\u001b[11;52H\u001b[8P\r\u001b[8@\u001b[11;11H\u001b[31mBuild the animation for this unit based on values\u001b[39;49m\r\n        \u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\u001b[13;5H    \u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon]\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp < 90):\u001b[K\r\n\t    frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\u001b[20;63H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mDraw the character.                                     \u001b[39;49m\u001b[21;5H    draw.char(x, y, img, color)\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m8% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    draw.char(x, y, img, color)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Game serve two purposes. Firstly, it is a factory that produces           \u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[31m# state of the game grid.                                                       \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  make_unit                                      \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  make_team                          \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[31m#   pop_alerts                                                                  \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[31m# TODO: load the rules definition (types of units and properties)       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[23;29H\u001b[7m13% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\n        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\u001b[9;32H\u001b[8P\r\u001b[8@\u001b[9;11H\u001b[31mThese are the state variables\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n\t\b\u001b[8P\r\u001b[8@\u001b[14;11H\u001b[31mother\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\u001b[K\u001b[18;12H\u001b[31mhe first index is the attacker, the second is the defender.   \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[22;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[23;30H\u001b[7m6% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[3;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[4;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[7;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[10;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[11;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[12;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[17;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\n\u001b[7m20% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;30H\u001b[7m6% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\u001b[K\n\u001b[K\u001b[4;5H\u001b[?25l\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[9;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[11;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[13;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[17;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[23;30H\u001b[7m9% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[4;7H\u001b[31mThis function produces a Cell object based on the terrain code.\u001b[39;49m\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[6;5H    \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\r\n\u001b[K\n\u001b[K\u001b[15;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\u001b[K\u001b[23;30H\u001b[7m7% L133\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[3;21H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[4;5H                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\u001b[5;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\u001b[K\u001b[10;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[15;7H\u001b[31mThis function produces a Cell object based on the terrain code.\u001b[39;49m\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[17;5H    \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\u001b[23;30H\u001b[7m5% L122\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[10;63H\u001b[4P\u001b[10;5H\u001b[4@\u001b[10;11H\u001b[31mReplay turn history.                                    \u001b[39;49m\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[14;21H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[15;5H                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\u001b[16;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\u001b[K\u001b[21;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\u001b[7m2% L111\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\b\u001b[2;5H\u001b[?25l\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\n\b\b\b\b\b\b\u001b[7m6% L120\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[4;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[8;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[12;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[18;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[19;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[20;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[21;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m31% L139\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[9;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[23;30H\u001b[7m5% L158\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[5;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[10;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[16;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[23;29H\u001b[7m40% L177\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[5;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[6;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[23;30H\u001b[7m4% L196\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[18;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[22;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[23;30H\u001b[7m9% L215\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[3;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[6;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[7;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[18;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m53% L234\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[5;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[8;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[18;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[23;30H\u001b[7m7% L253\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[4;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[5;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[6;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\u001b[9;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\u001b[10;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\r\n\u001b[K\u001b[14;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[17;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[20;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[21;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[22;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\n\b\b\b\b\b\b\u001b[7m63% L272\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[3;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[4;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[6;51H\u001b[4P\u001b[6;5H\u001b[4@\u001b[6;11H\u001b[31mIf no unit, check for terrain               \u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m,\u001b[32m\"Undo\"\u001b[39;49m,\u001b[32m\"Start Over\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[14;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[16;58H\u001b[4P\u001b[16;5H\u001b[4@\u001b[16;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[23;30H\u001b[7m9% L291\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[5;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[10;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[12;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[13;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[23;29H\u001b[7m74% L310\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m,\u001b[32m\"Undo\"\u001b[39;49m,\u001b[32m\"Start Over\"\u001b[39;49m]\u001b[10;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[12;47H\u001b[4P\u001b[12;5H\u001b[4@\u001b[12;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[23;29H\u001b[7m69\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[5;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[10;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[12;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[13;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\u001b[23;29H\u001b[7m74\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[5;18Haction.append((x,y))\u001b[K\u001b[6;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\n\t    \u001b[31m# Determine if a target is in range.                                \u001b[39;49m\r\n\u001b[9;13H\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[10;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m px,py \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_range((x,y),1):\u001b[K\u001b[11;5H            \u001b[33ma\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(px,py)\u001b[K\u001b[12;5H            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a.allied(u):\u001b[K\u001b[13;5H                \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[14;5H        \u001b[33mmoved\u001b[39;49m = (x,y) != (ox,oy)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"indirect\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[u.icon] \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m moved:\u001b[16;13H    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\u001b[23;30H\u001b[7m8% L329\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[5;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[8;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\u001b[19;13H\u001b[31m# Determine if a target is in range.                                \u001b[39;49m\r\n\u001b[20;13H\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\u001b[21;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m px,py \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_range((x,y),1):\u001b[22;13H    \u001b[33ma\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(px,py\u001b[23;30H\u001b[7m6% L328\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m px,py \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_range((x,y),1):\u001b[K\u001b[3;5H            \u001b[33ma\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(px,py)\u001b[K\u001b[4;5H            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a.allied(u):\u001b[K\u001b[5;5H                \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[6;5H        \u001b[33mmoved\u001b[39;49m = (x,y) != (ox,oy)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"indirect\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[u.icon] \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m moved:\u001b[8;13H    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[13;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[19;5H\u001b[8P\t\b\b\u001b[31mState: main menu (expected, menu o\u001b[39;49m\u001b[8@\u001b[31mption)  \u001b[39;49m\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[22;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\u001b[23;29H\u001b[7m80% L337\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[3;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[7;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[11;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Undo\"\u001b[39;49m:\u001b[K\n\bundo()\u001b[K\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Start Over\"\u001b[39;49m:\u001b[K\r\n\t\u001b[4@\t\tundo(\u001b[35mTrue\u001b[39;49m)\u001b[K\u001b[19;7H\u001b[31m                                        \u001b[39;49m\r\n\t\t\u001b[1m\u001b[34maction\u001b[0m\u001b[39;49m\u001b[3P\u001b[23;30H\u001b[7m5% L356\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m px,py \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_range((x,y),1):\u001b[3;13H    \u001b[33ma\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(px,py)\u001b[K\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a.allied(u):\r\n\t            \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[33mmoved\u001b[39;49m = (x,y) != (ox,oy)\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"indirect\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[u.icon] \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m moved:\r\n\t\t\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t\t\ttransition(\u001b[32m\"action\"\u001b[39;49m)\r\n\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[4P\u001b[17;21Hstart_over()\u001b[19;7H\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\r\n\t\t\u001b[1m\u001b[34mmain_m\u001b[0m\u001b[39;49m\u001b[3@\u001b[1m\u001b[34menu\u001b[0m\u001b[39;49m\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[5;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[8;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\n\n\t\t\u001b[8P\u001b[19;5H\u001b[8@\t\t\b\b\u001b[31mDetermine if a target is in range.\u001b[39;49m\u001b[20;5H        \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m px,py \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_range((x,y),1):\u001b[22;13H    \u001b[33ma\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(px,py)\u001b[K\u001b[23;29H\u001b[7m76% L338\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[4;47H\u001b[4P\u001b[4;5H\u001b[4@\u001b[4;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[16;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get_move_range(x,y)\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\r\n\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[23;30H\u001b[7m1% L319\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[8;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[9;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m,\u001b[32m\"Undo\"\u001b[39;49m,\u001b[32m\"Start Over\"\u001b[39;49m]\u001b[21;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m66% L300\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[6;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[7;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[8;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[14;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[15;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[16;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[17;5H\u001b[4P\t\b\b\u001b[31m    undo: Tell the controller to reload the \u001b[39;49m\u001b[4@\u001b[31mgrid\u001b[39;49m\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\u001b[23;29H\u001b[7m59% L281\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[10;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\n\b\u001b[7m5% L262\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[10;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[16;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[19;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[23;30H\u001b[7m1% L243\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[6;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[14;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[18;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m46% L224\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[5;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[13;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[14;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[15;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[16;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[20;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m2% L205\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[16;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[23;29H\u001b[7m37% L186\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[7;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[10;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[16;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\u001b[23;30H\u001b[7m2% L167\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[20;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[21;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\n\b\b\b\b\u001b[7m28% L148\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[4;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\u001b[5;5H            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[10;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[15;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m4% L129\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\n\b\b\b\b\b\b\u001b[7m19% L110\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[5;12H\u001b[31mODO: load the rules definition (types of units and properties)\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\u001b[K\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[9;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[10;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[13;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[16;14Haction = []\u001b[K\u001b[17;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[18;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m5% L91 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\u001b[K\u001b[5;12H\u001b[31mhe first index is the attacker, the second is the defender.   \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[9;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[10;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[13;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[16;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[17;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[18;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\n\b\b\b\b\b\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m100\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[4;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m24% L109\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\n\b\b\b\b\b\b\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[3;14Hproperties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[8;14Hproperties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\u001b[21;5H\u001b[4P\t\b\b\u001b[31mThis function produces a Unit object based on the unit c\u001b[39;49m\u001b[4@\u001b[31mode.\u001b[39;49m\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\b\u001b[7m22% L111\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;31H\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   22% L110\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\r\t\u001b[?25l\u001b[33mreplay\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lF\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[35mFalse\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;13H\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[13;13H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\u001b[22;1H    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;17H\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[22;1H        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;21H\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[13;21H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[22;1H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;25H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\u001b[22;1H\u001b[K\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;17H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[13;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[22;1H    \u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[A\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[22;1H    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;9H\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[22;1H        \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\u001b[K\u001b[22d        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\b\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[13;5H\u001b[?25l\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[22d\u001b[K\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\b\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                                    \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[12;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                         \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[13;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[13;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;34H\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l][\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[13;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[13;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\r\n\u001b[K\n\u001b[K\u001b[12;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[17;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[21;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[23;30H\u001b[7m7% L120\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[6;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[7;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[12;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[13;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[14;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[15;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[22;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m31% L139\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[18;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\n\u001b[C\u001b[7m6% L158\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[4;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[10;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[18;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[23;29H\u001b[7m41% L177\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[18;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\n\u001b[7m36\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[3;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[4;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[9;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[12;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[18;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[22;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[23;30H\u001b[7m1% L159\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[18;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\n\u001b[C\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[4;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[10;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[18;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[23;29H\u001b[7m41% L177\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[22;14Hchoices = []\u001b[23;30H\u001b[7m5% L196\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[3;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[7;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[12;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[16;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[19;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[20;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m50% L215\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[12;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[18;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[21;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[23;30H\u001b[7m4% L234\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[12;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[16;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[17;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[18;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\u001b[23;30H\u001b[7m8% L253\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\u001b[3;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\u001b[4;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\r\n\u001b[K\u001b[8;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[11;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[15;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[16;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[17;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[19;51H\u001b[4P\u001b[19;5H\u001b[4@\u001b[19;11H\u001b[31mIf no unit, check for terrain               \u001b[39;49m\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m,\u001b[32m\"Undo\"\u001b[39;49m,\u001b[32m\"Start Over\"\u001b[39;49m]\u001b[K\u001b[23;29H\u001b[7m64% L272\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m,\u001b[32m\"Undo\"\u001b[39;49m,\u001b[32m\"Start Over\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[8;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[10;58H\u001b[4P\u001b[10;5H\u001b[4@\u001b[10;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[12;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[23;29H\u001b[7m70% L291\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[4;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[6;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[7;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[18;18Haction.append((x,y))\u001b[K\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\n\t    \u001b[31m# Determine if a target is in range.                                \u001b[39;49m\r\n\u001b[22;13H\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\n\b\u001b[7m5% L310\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m,\u001b[32m\"Undo\"\u001b[39;49m,\u001b[32m\"Start Over\"\u001b[39;49m]\u001b[4;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[6;47H\u001b[4P\u001b[6;5H\u001b[4@\u001b[6;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[18;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get_move_range(x,y)\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\r\n\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[10;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[11;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m,\u001b[32m\"Undo\"\u001b[39;49m,\u001b[32m\"Start Over\"\u001b[39;49m]\u001b[23;29H\u001b[7m64% L292\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[8;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[9;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[10;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[16;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[17;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[18;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[19;5H\u001b[4P\t\b\b\u001b[31m    undo: Tell the controller to reload the \u001b[39;49m\u001b[4@\u001b[31mgrid\u001b[39;49m\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[23;29H\u001b[7m58% L273\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[12;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[23;30H\u001b[7m4% L254\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[12;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[18;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[21;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m0% L235\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[3;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[8;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[16;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[19;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[20;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[23;29H\u001b[7m45% L216\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[5;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[7;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[15;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[16;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[17;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[18;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[22;14Halerts = []\u001b[K\u001b[23;30H\u001b[7m1% L197\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[18;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\n\u001b[7m36% L178\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[3;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[4;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[9;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[12;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[18;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[22;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[23;30H\u001b[7m1% L159\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[12;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[22;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[23;29H\u001b[7m27% L140\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[33mreplay\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[17;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\u001b[23;30H\u001b[7m3% L121\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[5;14Haction = []\u001b[K\u001b[6;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[7;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\u001b[15;63H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mitself. Ugh.                                            \u001b[39;49m\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\n\u001b[7m18% L102\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[5;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[6;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[7;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[33mreplay\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[4P\t\b\b\u001b[31mThis function produces a Unit object based on the unit c\u001b[39;49m\u001b[4@\u001b[31mode.\u001b[39;49m\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[23;29H\u001b[7m23\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\b\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   23% L111\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[12;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\u001b[23;30H\u001b[7m2% L112\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[13d\u001b[24d\u001b[?25lUndo!\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;1H\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[22;1H    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\u001b[7m3% L111\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[?25l        \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\u001b[23;6H\u001b[7m----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   23% L110\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;23H\u001b[24;1H\u001b[?25lUndo!\u001b[11;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;35H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   23% L112\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;36H\u001b[24;1H\u001b[?25lUndo!\u001b[13;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;37H\u001b[24;1H\u001b[?25lUndo!\u001b[13;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;38H\u001b[24;1H\u001b[?25lUndo!\u001b[13;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[K\u001b[24;1H\u001b[K\u001b[13;33H\u001b[24;1H\u001b[?25lUndo!\u001b[13;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[13;13H\u001b[24;1H\u001b[K\u001b[13;13H\u001b[24;1H\u001b[?25lUndo!\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[24d\u001b[K\u001b[13d\u001b[24d\u001b[?25lUndo!\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\u001b[23;36H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;36H\u001b[24;1H\u001b[?25lUndo!\u001b[12;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[24;1H\u001b[K\u001b[12;35H\u001b[24;1H\u001b[?25lC-x\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l-\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l u\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lUndo!\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;26H\u001b[?25lsel\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;29H\u001b[24;1H\u001b[?25lUndo!\u001b[12;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\t\u001b[24;1H\u001b[K\u001b[12;9H\u001b[24;1H\u001b[?25lUndo!\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;10H\u001b[24;1H\u001b[?25lUndo!\u001b[12;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\t\u001b[24;1H\u001b[K\u001b[12;9H\u001b[24;1H\u001b[?25lUndo!\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;23H\u001b[24;1H\u001b[?25lUndo!\u001b[11;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\u001b[23;36H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[13;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\u001b[K\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\t\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[13;13H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\t\t\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;21H\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[13;21H\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\t\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[13;13H\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[12d\u001b[24d\u001b[?25lUndo!\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\t\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;18H\u001b[24;1H\u001b[?25lUndo!\u001b[11;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;19H\u001b[24;1H\u001b[?25lUndo!\u001b[11;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11d\u001b[K\u001b[1;22r\u001b[13;1H\u001b[1M\u001b[1;24r\u001b[11;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[22;1H    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2;5H\u001b[?25l\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\n\b\b\b\b\b\b\u001b[7m6% L12\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[4;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[8;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[12;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[18;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[19;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[20;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[21;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m31% L139\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[9;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[23;30H\u001b[7m5% L158\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[5;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[10;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[16;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[23;29H\u001b[7m40% L177\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[5;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[6;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[23;30H\u001b[7m4% L196\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[18;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[22;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[23;30H\u001b[7m9% L215\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[3;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[6;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[7;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[18;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m53% L234\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[5;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[8;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[18;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[23;30H\u001b[7m7% L253\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[4;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[5;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[6;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\u001b[9;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\u001b[10;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\r\n\u001b[K\u001b[14;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[17;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[20;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[21;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[22;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\n\b\b\b\b\b\b\u001b[7m63% L272\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lC-x\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l-\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24;4H\u001b[?25l C-g is undefined\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n^CTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 115, in __init__\r\n    self.end_turn()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 256, in end_turn\r\n    self.checkpoint = copy.deepcopy(self.grid)\r\n  File \"/usr/lib/python2.7/copy.py\", line 190, in deepcopy\r\n    y = _reconstruct(x, rv, 1, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 334, in _reconstruct\r\n    state = deepcopy(state, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 257, in _deepcopy_dict\r\n    y[deepcopy(key, memo)] = deepcopy(value, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/usr/lib/python2.7/copy.py\", line 163, in deepcopy\r\n    y = copier(x, memo)\r\n  File \"/usr/lib/python2.7/copy.py\", line 230, in _deepcopy_list\r\n    y.append(deepcopy(a, memo))\r\n  File \"/usr/lib/python2.7/copy.py\", line 161, in deepcopy\r\n    copier = _deepcopy_dispatch.get(cls)\r\nKeyboardInterrupt\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n    \u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\u001b[K\r\n\u001b[K\n    \u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n        \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   63% L272  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[14;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[15;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[16;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[23;29H\u001b[7m57\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[5;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[8;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[18;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m3% L254\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[6;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[7;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[18;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[23;29H\u001b[7m49% L235\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[3;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[4;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[5;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[9;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[14;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[22;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[23;30H\u001b[7m4% L216\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[5;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[13;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[21;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[22;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[23;30H\u001b[7m0% L197\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[5;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[9;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[23;29H\u001b[7m35% L178\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[9;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[10;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[15;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[18;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\u001b[23;30H\u001b[7m1% L159\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;7H\u001b[?25l\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[4;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[23;29H\u001b[7m26% L140\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[12;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\u001b[13;5H            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[18;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\u001b[7m2% L121\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\n\b\b\b\b\b\b\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[12;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\u001b[13;5H            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[18;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[5;14Haction = []\u001b[K\u001b[6;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[7;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\n\u001b[7m18% L102\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[5;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[6;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[7;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[12;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\n\b\b\u001b[7m22\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\n\b\b\b\b\b\b\u001b[7m6% L120\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[4;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[8;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[12;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[18;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[19;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[20;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[21;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m31% L139\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[9;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[23;30H\u001b[7m5% L158\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[5;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[10;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[16;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[23;29H\u001b[7m40% L177\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[5;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[6;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[23;30H\u001b[7m4% L196\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[18;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[22;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[23;30H\u001b[7m9% L215\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[3;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[4;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[5;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[9;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[14;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[22;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[5;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[13;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[21;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[22;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[23;30H\u001b[7m0% L197\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[5;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[9;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[23;29H\u001b[7m35% L178\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[9;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[10;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[15;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[18;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\u001b[23;30H\u001b[7m1% L159\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;7H\u001b[?25l\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[4;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[23;29H\u001b[7m26% L140\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[12;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\u001b[13;5H            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[18;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\u001b[7m2% L121\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[18;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\n\b\b\b\b\b\b\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;7H\u001b[?25l\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[4;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[8;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[12;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[18;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[19;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[20;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[21;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m31% L139\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[9;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[23;30H\u001b[7m5% L158\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[5;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[10;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[16;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[23;29H\u001b[7m40% L177\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[5;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[6;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[23;30H\u001b[7m4% L196\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[18;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[22;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[23;30H\u001b[7m9% L215\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[3;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[6;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[7;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[18;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m53% L234\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[5;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[8;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[18;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[23;30H\u001b[7m7% L253\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[10;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[11;14Hdata[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mThis sets the new state and returns the appropriate code      \u001b[39;49m\u001b[20;7H\u001b[31mto the caller for what kind of input should come next.\u001b[39;49m\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\n\b\u001b[7m5% L252\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[?25l\u001b[31m#self.checkpoint = copy.deepcopy(self.grid)                             \u001b[39;49m\r\n\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[16;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[16;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n^CTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 115, in __init__\r\n    self.end_turn()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 249, in end_turn\r\n    for u in self.grid.units:\r\nKeyboardInterrupt\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n    \u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\r\n            \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[31m#self.checkpoint = copy.deepcopy(self.grid)                             \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   55% L256  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[16;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n^CTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 115, in __init__\r\n    self.end_turn()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 248, in end_turn\r\n    self.grid.end_turn()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 156, in end_turn\r\n    current_team = self.teams[self.turn]\r\nKeyboardInterrupt\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n    \u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\r\n            \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[31m#self.checkpoint = copy.deepcopy(self.grid)                             \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   55% L256  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[16;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[10;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[19;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[23;30H\u001b[7m1% L243\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[6;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[14;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[18;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m46% L224\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[5;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[13;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[14;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[15;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[16;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[20;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m2% L205\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[16;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[23;29H\u001b[7m37% L186\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[7;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[10;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[16;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\u001b[23;30H\u001b[7m2% L167\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[20;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[21;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\n\b\b\b\b\u001b[7m28% L148\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[4;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\u001b[5;5H            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[10;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[15;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m4% L129\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   24% L129  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[15;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[19;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\n\b\b\b\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[4;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[10;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[11;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[12;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[13;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[20;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\u001b[23;29H\u001b[7m32% L147\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[16;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[21;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[23;30H\u001b[7m7% L166\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l                _floodfill((a+1,b),r-1)\u001b[K\r\n\t            _floodfill((a,b-1),r-1)\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[12;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[20;12H\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\u001b[23;30H\u001b[7m4% L165\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\u001b[K\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[10;21Hreport.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[12;5H                _floodfill((a-1,b),r-1)\u001b[K\u001b[13;5H                _floodfill((a+1,b),r-1)\u001b[K\r\n\t            _floodfill((a,b-1),r-1)\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[23;30H\u001b[7m2% L154\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@q\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n        \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[A\n        \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[A\n        \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n        \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n                    report.append((a,b))\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n                    _floodfill((a-1,b),r-1)\u001b[K\r\n                    _floodfill((a+1,b),r-1)\u001b[K\r\n                    _floodfill((a,b-1),r-1)\u001b[K\r\n                    _floodfill((a,b+1),r-1)\u001b[K\r\n        _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[K\r\n                                              \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[7m-UU-:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   32% L147  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[5d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default shell.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lshell.py\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgrid.py\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[31m#   variables: (dictionary) a dictionary of user-defined variables              \u001b[39;49m\r\n\u001b[8P\u001b[3;3H\u001b[31m                                                     \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[8P\u001b[4;3H\u001b[31mDanger: Do not store 'rules' in a variable. Should fall out o\u001b[39;49m\u001b[8@\u001b[31mf scope.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data, rules):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = data[\u001b[32m\"name\"\u001b[39;49m]\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = data[\u001b[32m\"w\"\u001b[39;49m], data[\u001b[32m\"h\"\u001b[39;49m]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[K\u001b[11;13H\u001b[33mrow\u001b[39;49m = []\u001b[K\u001b[12;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\u001b[K\r\n\t\trow.append(\u001b[35mNone\u001b[39;49m)\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = data.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day = 0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\n\t\u001b[31m# Load the teams first, since cells and units reference them.           \u001b[39;49m\r\n\t\u001b[31m# Then set up the alliances.                                            \u001b[39;49m\r\n\u001b[23;6H\u001b[7m----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m    9% L26 \u001b[0m\u001b[39;49m\u001b[27m\u001b[8;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;62H\u001b[8P\r\u001b[8@\u001b[2;11H\u001b[?25l\u001b[31mLoad the teams first, since cells and units reference them.\u001b[39;49m\u001b[3;29H\u001b[8P\r\u001b[8@\u001b[3;11H\u001b[31mThen set up the alliances.\u001b[39;49m\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\r\n            \u001b[33mthis\u001b[39;49m = rules.make_team( t )\u001b[6;5H        \u001b[33mthis.variables\u001b[39;49m = t.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams.append(this)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[11;13H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\r\n\u001b[K\n\t\u001b[31m# Load the terrain cells. The units are embedded in these elements      \u001b[39;49m\r\n\t\u001b[31m# of the dictionary. Note that when units are loaded in other units     \u001b[39;49m\r\n\t\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\t\u001b[31m#   y: (int) y position                                                 \u001b[39;49m\r\n\t\u001b[31m#   name: (string) the name of the terrain                              \u001b[39;49m\r\n\t\u001b[31m#   unit: the unit on this terrain, if one                              \u001b[39;49m\r\n\t\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\u001b[21;11H\u001b[31m  variables: (dict) User-defined variables                 \u001b[39;49m\u001b[22;14H\u001b[31mre may be other values in this cell that will be parsed by\u001b[39;49m\u001b[23;29H\u001b[7m15% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;11H\u001b[?25l\u001b[31m  variables: (dict) User-defined variables                 \u001b[39;49m\u001b[3;14H\u001b[31mre may be other values in this cell that will be parsed by\u001b[39;49m\r\n\t\u001b[31m# the factory of the rules.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"cells\"\u001b[39;49m]:\u001b[K\r\n\t\t = rules.make_cell(c)\u001b[K\u001b[7;18Hgrid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\r\n\t    \u001b[33mthis.variables\u001b[39;49m = c.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[9;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"team\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c\r\n\t\t\u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\r\n\t            \u001b[33mu\u001b[39;49m = rules.make_unit(unit)\u001b[K\r\n\t            \u001b[33mu.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]]\u001b[K\r\n\t            \u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[K\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\u001b[K\r\n\t                u.carrying.append(_process_units(u))\u001b[K\r\n\t            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\t        \u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[4P\t\b\b\u001b[31mGet the tile at x,y. Returns None if out of range.           \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[23;29H\u001b[7m24% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31mGet the tile at x,y. Returns None if out of range.           \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtile_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# Get a range of coordinates, usually for an attack range. Coordinates      \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# may not actually be cells.                                                \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, center, start, end=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m end \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m:\u001b[K\u001b[19;13H\u001b[33mend\u001b[39;49m = start\u001b[K\r\n\u001b[K\n\t\u001b[33mreport\u001b[39;49m = []\u001b[22;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = center\u001b[K\u001b[23;29H\u001b[7m33% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mreport\u001b[39;49m = []\u001b[3;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = center\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m r \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(start,end+1):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m i \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(r):\u001b[K\u001b[6;13H    report.append((x+i,y+(r-i)))\r\n\t        report.append((x+i,y-(r-i)))\r\n\t\treport.append((x+(r-i),y+i))\u001b[9;5H            report.append((x-(r-i),y+i))\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# Return distance (zero norm) between two points.                           \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdist\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, start, end):\r\n\t\u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = start\u001b[15;5H    \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = end\u001b[K\u001b[16;5H    \u001b[33mdx\u001b[39;49m = x1-x2\u001b[K\u001b[17;5H    \u001b[33mdy\u001b[39;49m = y1-y2\u001b[K\u001b[18;12H(dx < 0): \u001b[33mdx\u001b[39;49m *= -1\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (dy < 0): \u001b[33mdy\u001b[39;49m *= -1\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m dx+dy\r\n\u001b[K\u001b[22;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[23;30H\u001b[7m9% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.                          \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(ox,oy)\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[12;5H    \u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# This should be the ONLY WAY units are added to the game.                  \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[19;12Htile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[22;5H    \u001b[33munit.team\u001b[39;49m = team\u001b[K\u001b[23;29H\u001b[7m45% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mtile.unit\u001b[39;49m = unit\u001b[3;5H    \u001b[33munit.team\u001b[39;49m = team\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# Remove a unit from the game. This will not only remove the                \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# unit, but all units that it is carrying.                                  \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.carrying:\u001b[14;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\u001b[15;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(u)\u001b[K\u001b[16;5H    \u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# Return the team currently performing its turn.                            \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# End the turn and proceed to the next team.                                \u001b[39;49m\r\n\u001b[23;29H\u001b[7m52% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.carrying:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\r\n\t\u001b[8@\u001b[4;28Hremove(u)\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[7;7H\u001b[31mReturn the team currently performing its turn.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\r\n\u001b[K\u001b[11;5H\u001b[31m# End the turn and proceed to the next team.                                \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day += 1\r\n\u001b[K\n\u001b[K\n\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;30H\u001b[7m6% L155\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[7;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[10;21Hreport.append((a,b))\u001b[11;5H            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\u001b[12;5H                _floodfill((a-1,b),r-1)\r\n\t            _floodfill((a+1,b),r-1)\u001b[K\r\n\t            _floodfill((a,b-1),r-1)\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[19;47H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   32% L147\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[13;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[20;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[23;29H\u001b[7m27% L145\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[7;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\u001b[8;5H            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[13;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[18;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\u001b[7m4% L126\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[23;29H\u001b[7m18% L107\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25lAuto-saving...\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[K\u001b[2d\u001b[?25l\u001b[31m#   make_team                                                                   \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[8P\u001b[4;3H\u001b[31m  pop\u001b[39;49m\u001b[8@\u001b[31m_alerts \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[8;12H\u001b[31mODO: load the rules definition (types of units and properties)\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\u001b[K\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[12;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[13;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[16;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[19;14Haction = []\u001b[K\u001b[20;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[21;14Hchoices = []\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m5% L88 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n\t\b\u001b[8P\r\u001b[8@\u001b[4;11H\u001b[31mother\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\u001b[K\u001b[8;12H\u001b[31mhe first index is the attacker, the second is the defender.   \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[12;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[13;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[16;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[19;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[20;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[21;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[23;30H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[7;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\b\u001b[7m24% L106\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;35H\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\u001b[23;36H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;13H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mi\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l0\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;43H\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[23;36H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l>\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l5\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\t\t\t\u001b[?25l\u001b[32mException\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                     \u001b[39;49m\r\n\u001b[32m            self.alerts = []                                                    \u001b[39;49m\r\n\u001b[13;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[13;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[13;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;52H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[13;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[13;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n^CTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 113, in __init__\r\n    for action in turn:\r\nKeyboardInterrupt\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n        \u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n            \u001b[33mi\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m i > 5: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"potato\"\u001b[39;49m)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   23% L117  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[13;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   23% L116\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\b\b\b\r\t\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\n\u001b[?25l                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m i > 5: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"potato\"\u001b[39;49m)\u001b[K\u001b[23;36H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l+\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[33mi\u001b[39;49m +=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\t\b\u001b[1P\r\t\t\b\b\u001b[1P\r\u001b[K\u001b[1;22r\u001b[16;1H\u001b[1M\u001b[1;24r\u001b[14;17H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m i > 5: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"potato\"\u001b[39;49m)\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[22;1H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\t\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\u001b[11;21H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[K\n\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m i > 5: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"potato\"\u001b[39;49m)\u001b[K\u001b[23;36H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[9;15H\u001b[?25l\u001b[33mi\u001b[39;49m += 1\r\n\u001b[K\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\u001b[23d\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[1@\r\u001b[C\t\t\b\u001b[1@\u001b[9;3H\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[10;17H\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[22;1H        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\u001b[23;36H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;17H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m i > 5: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"potato\"\u001b[39;49m)\u001b[22;1H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 118, in __init__\r\n    if i > 5: raise Exception(\"potato\")\r\nException: potato\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n        \u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n            \u001b[33mi\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\r\n                \u001b[33mi\u001b[39;49m += 1\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m i > 5: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"potato\"\u001b[39;49m)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   23% L117  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;52H\b\b\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m\"\u001b[39;49m)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m)                                    \u001b[39;49m\r\n\u001b[32m            self.alerts = []                                                    \u001b[39;49m\r\n\u001b[14;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[14;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l()\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"))                     \u001b[39;49m\r\n\u001b[32m            self.alerts = []                                                    \u001b[39;49m\r\n\u001b[14;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mh))\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi))\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms))\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt))\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo))\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr))\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32my))\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\u001b[14;66H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]))\u001b[14;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;67H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[14;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[14;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 118, in __init__\r\n    if i > 5: raise Exception(str(self.data[\"history\"]))\r\nException: [[[], []], [], [], [], [], [], []]\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n        \u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n            \u001b[33mi\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\r\n                \u001b[33mi\u001b[39;49m += 1\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m i > 5: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   23% L118  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[14;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgame.py\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lrid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lame\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lrid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lame\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[14;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[C\u001b[?25lgrid.py\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lshell.py\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lwidgets.py\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[K\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\nTodo:\u001b[K\n\b\b\b\b* Some intel boxes that display information about the map when you hover\u001b[5;4Hover tiles\u001b[K\r\n\u001b[C* (maybe) terrain movement inhibition (roads are easier than forests)\r\n\u001b[C* adding play history to the data format\r\n\u001b[C* save/load data from the rules\u001b[K\r\n\u001b[K\nDone:\u001b[K\n\b\b\b\b* An alert that pops up when a player ends their turn\r\n\u001b[C* change rendering so that the cells don't try to render their units\r\n\u001b[C* adding map name to the data format\r\n\u001b[K\nLet's do this.\u001b[K\r\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;4H\u001b[7mU:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L23    (Lisp Interaction) -\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lH\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l!\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l!\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\b\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[17;80H\u001b[?25l\\\r\n.\n\b\u001b[K\u001b[A\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\u001b[1;22r\u001b[19;1H\u001b[1M\u001b[1;24r\u001b[17;80H\u001b[K\r\n\u001b[K\n\n\n\n\u001b[K\u001b[17;80H\b\u001b[K\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                          \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[18;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\r\n\u001b[K\u001b[18;22H\u001b[?25l\u001b[32m\"                                                          \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[18;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[18;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[K\b\b\u001b[K\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l!\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\n\n\n\n\n\u001b[?25lC-x n b is undefined\u001b[19;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[19;12H\r\n\n\n\n\n\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\u001b[5;4H     \u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[C       \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n\u001b[C           \u001b[33mi\u001b[39;49m = 0\u001b[K\r\n\u001b[C           \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\r\n\t\t\u001b[33mi\u001b[39;49m += 1\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\u001b[C                   \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\u001b[C                       \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n\u001b[C               \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m i > 5: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]))\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   23% L109  Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[5;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[6;1H\u001b[1L\u001b[1;24r\u001b[6;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   23% L110\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\r\u001b[K\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[24;1H\u001b[?25lAuto-saving...\u001b[6;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[6;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[6;9H\u001b[?25l\u001b[33mreplay\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                \u001b[39;49m\r\n\u001b[32m        if \"\u001b[39;49mhistory\u001b[32m\" in self.data:                                              \u001b[39;49m\r\n\u001b[6;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mY\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m            i = 0                                                               \u001b[39;49m\r\n\u001b[32m            for turn in self.data[\"\u001b[39;49mhistory\u001b[32m\"]:                                   \u001b[39;49m\r\n\u001b[32m                i += 1                                                          \u001b[39;49m\r\n\u001b[32m                for action in turn:                                             \u001b[39;49m\r\n\u001b[32m                    for step in action:                                         \u001b[39;49m\r\n\u001b[32m                        self.process(step)                                      \u001b[39;49m\r\n\u001b[32m                self.end_turn()                                                 \u001b[39;49m\r\n\u001b[32m                if i > 5: raise Exception(str(self.data[\"\u001b[39;49mhistory\u001b[32m\"]))            \u001b[39;49m\r\n\u001b[32m            self.alerts = []                                                    \u001b[39;49m\r\n\u001b[32m        else:                                                                   \u001b[39;49m\r\n\u001b[32m            self.data[\"\u001b[39;49mhistory\u001b[32m\"] = []                                           \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m    # This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[32m    def make_unit(self, data):                                                  \u001b[39;49m\r\n\u001b[32m        u = Unit(data[\"\u001b[39;49mname\u001b[32m\"], data[\"\u001b[39;49micon\u001b[32m\"])                                    \u001b[39;49m\r\n\u001b[6;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\u001b[A\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[6;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l            \u001b[33mi\u001b[39;49m = 0\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[K\r\n                \u001b[33mi\u001b[39;49m += 1\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m i > 5: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[8;1H\u001b[1M\u001b[1;24r\u001b[6;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\r\n\t    \u001b[33mi\u001b[39;49m = 0\u001b[K\u001b[22;1H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;35H\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\n\u001b[?25l            \u001b[33mi\u001b[39;49m = 0\u001b[K\u001b[23;36H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[9;1H\u001b[1L\u001b[1;24r\u001b[7;9H\u001b[?25l\u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m)\r\n\u001b[K\n            \u001b[33mi\u001b[39;49m = 0\u001b[K\u001b[23;36H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1@\r\u001b[C\u001b[7;10H\u001b[1@\u001b[7;3H\u001b[7;11H\u001b[1@\u001b[7;4H\u001b[7;12H\u001b[1@\u001b[7;5H\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;18H\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[8;13H\u001b[?25l\u001b[33mi\u001b[39;49m = 0\n\b\b\b\b\b\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[22;1H        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[8;13H\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]:\u001b[9;13H    \u001b[33mi\u001b[39;49m += 1\u001b[K\u001b[22;1H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;46H\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@p\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@p\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@(\r\n\t\ti\u001b[8;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\r\n\t\t\u001b[33mi\u001b[39;49m\u001b[8;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;50H\b\b\u001b[?25l:\u001b[K\r\n\t\ti\u001b[8;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l):\r\n\t\t\u001b[33mi\u001b[39;49m\u001b[8;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[9;1H\u001b[1M\u001b[1;24r\u001b[7;13H\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m):\u001b[8;13H    \u001b[33mi\u001b[39;49m += 1\u001b[K\u001b[22;1H\u001b[K\u001b[7d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[5;31H\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[6;1H\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m):\u001b[K\u001b[23;35H\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\r\t\u001b[?25l\u001b[33mreplay\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\b\b\u001b[?25lsel\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\r\u001b[K\u001b[1;22r\u001b[8;1H\u001b[1M\u001b[1;24r\u001b[6;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m):\u001b[22;1H\u001b[K\u001b[6d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;50H\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[7;1H\u001b[1L\u001b[1;24r\u001b[6;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\u001b[23d\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\r\t\u001b[?25l\u001b[33mreplay\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[5;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[5;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lC-x\u001b[6;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l-\u001b[6;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l b\u001b[6;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default *scratch*): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[6;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ python\r\nPython 2.7.5+ (default, Sep 19 2013, 13:49:51) \r\n[GCC 4.8.1] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> help({}_\r\n  File \"<stdin>\", line 1\r\n    help({}_\r\n           ^\r\nSyntaxError: invalid syntax\r\n>>> help({}_\b\u001b[K)\r\n\u001b[?1049h\u001b[?1h\u001b=\rHelp on dict object:\r\n\r\nclass \u001b[1mdict\u001b[0m(object)\r\n |  dict() -> new empty dictionary\r\n |  dict(mapping) -> new dictionary initialized from a mapping object's\r\n |      (key, value) pairs\r\n |  dict(iterable) -> new dictionary initialized as if via:\r\n |      d = {}\r\n |      for k, v in iterable:\r\n |          d[k] = v\r\n |  dict(**kwargs) -> new dictionary initialized with the name=value pairs\r\n |      in the keyword argument list.  For example:  dict(one=1, two=2)\r\n |  \r\n |  Methods defined here:\r\n |  \r\n |  \u001b[1m__cmp__\u001b[0m(...)\r\n |      x.__cmp__(y) <==> cmp(x,y)\r\n |  \r\n |  \u001b[1m__contains__\u001b[0m(...)\r\n |      D.__contains__(k) -> True if D has a key k, else False\r\n |  \r\n |  \u001b[1m__delitem__\u001b[0m(...)\r\n |      x.__delitem__(y) <==> del x[y]\r\n:\u001b[K\r\u001b[K |  \r\n:\u001b[K\r\u001b[K \u001b[KESC\b\b\bESC\u001b[K[\b[\u001b[K6\b6\u001b[K~\b~\r\u001b[K |  \u001b[1m__eq__\u001b[0m(...)\r\n |      x.__eq__(y) <==> x==y\r\n |  \r\n |  \u001b[1m__ge__\u001b[0m(...)\r\n |      x.__ge__(y) <==> x>=y\r\n |  \r\n |  \u001b[1m__getattribute__\u001b[0m(...)\r\n |      x.__getattribute__('name') <==> x.name\r\n |  \r\n |  \u001b[1m__getitem__\u001b[0m(...)\r\n |      x.__getitem__(y) <==> x[y]\r\n |  \r\n |  \u001b[1m__gt__\u001b[0m(...)\r\n |      x.__gt__(y) <==> x>y\r\n |  \r\n |  \u001b[1m__init__\u001b[0m(...)\r\n |      x.__init__(...) initializes x; see help(type(x)) for signature\r\n |  \r\n |  \u001b[1m__iter__\u001b[0m(...)\r\n |      x.__iter__() <==> iter(x)\r\n |  \r\n |  \u001b[1m__le__\u001b[0m(...)\r\n |      x.__le__(y) <==> x<=y\r\n:\u001b[K\r\u001b[K \u001b[KESC\b\b\bESC\u001b[K[\b[\u001b[K6\b6\u001b[K~\b~\r\u001b[K |  \r\n |  \u001b[1m__len__\u001b[0m(...)\r\n |      x.__len__() <==> len(x)\r\n |  \r\n |  \u001b[1m__lt__\u001b[0m(...)\r\n |      x.__lt__(y) <==> x<y\r\n |  \r\n |  \u001b[1m__ne__\u001b[0m(...)\r\n |      x.__ne__(y) <==> x!=y\r\n |  \r\n |  \u001b[1m__repr__\u001b[0m(...)\r\n |      x.__repr__() <==> repr(x)\r\n |  \r\n |  \u001b[1m__setitem__\u001b[0m(...)\r\n |      x.__setitem__(i, y) <==> x[i]=y\r\n |  \r\n |  \u001b[1m__sizeof__\u001b[0m(...)\r\n |      D.__sizeof__() -> size of D in memory, in bytes\r\n |  \r\n |  \u001b[1mclear\u001b[0m(...)\r\n |      D.clear() -> None.  Remove all items from D.\r\n |  \r\n |  \u001b[1mcopy\u001b[0m(...)\r\n:\u001b[K\r\u001b[K \u001b[KESC\b\b\bESC\u001b[K[\b[\u001b[K6\b6\u001b[K~\b~\r\u001b[K |      D.copy() -> a shallow copy of D\r\n |  \r\n |  \u001b[1mfromkeys\u001b[0m(...)\r\n |      dict.fromkeys(S[,v]) -> New dict with keys from S and values equal to v.\r\n |      v defaults to None.\r\n |  \r\n |  \u001b[1mget\u001b[0m(...)\r\n |      D.get(k[,d]) -> D[k] if k in D, else d.  d defaults to None.\r\n |  \r\n |  \u001b[1mhas_key\u001b[0m(...)\r\n |      D.has_key(k) -> True if D has a key k, else False\r\n |  \r\n |  \u001b[1mitems\u001b[0m(...)\r\n |      D.items() -> list of D's (key, value) pairs, as 2-tuples\r\n |  \r\n |  \u001b[1miteritems\u001b[0m(...)\r\n |      D.iteritems() -> an iterator over the (key, value) items of D\r\n |  \r\n |  \u001b[1miterkeys\u001b[0m(...)\r\n |      D.iterkeys() -> an iterator over the keys of D\r\n |  \r\n |  \u001b[1mitervalues\u001b[0m(...)\r\n |      D.itervalues() -> an iterator over the values of D\r\n:\u001b[K\r\u001b[K \u001b[KESC\b\b\bESC\u001b[K[\b[\u001b[K6\b6\u001b[K~\b~\r\u001b[K |  \r\n |  \u001b[1mkeys\u001b[0m(...)\r\n |      D.keys() -> list of D's keys\r\n |  \r\n |  \u001b[1mpop\u001b[0m(...)\r\n |      D.pop(k[,d]) -> v, remove specified key and return the corresponding val \bue.\r\n |      If key is not found, d is returned if given, otherwise KeyError is raise \bd\r\n |  \r\n |  \u001b[1mpopitem\u001b[0m(...)\r\n |      D.popitem() -> (k, v), remove and return some (key, value) pair as a\r\n |      2-tuple; but raise KeyError if D is empty.\r\n |  \r\n |  \u001b[1msetdefault\u001b[0m(...)\r\n |      D.setdefault(k[,d]) -> D.get(k,d), also set D[k]=d if k not in D\r\n |  \r\n |  \u001b[1mupdate\u001b[0m(...)\r\n |      D.update([E, ]**F) -> None.  Update D from dict/iterable E and F.\r\n |      If E present and has a .keys() method, does:     for k in E: D[k] = E[k]\r\n |      If E present and lacks .keys() method, does:     for (k, v) in E: D[k] = \b v\r\n |      In either case, this is followed by: for k in F: D[k] = F[k]\r\n:\u001b[K\r\u001b[K\u001b[?1l\u001b>\u001b[?1049l\r\n>>> help({})\r\nKeyboardInterrupt\r\n>>> \r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ python\b\b\b\b\b\b\u001b[4Pfg\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n        \u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[A\n        \u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m):\u001b[K\r\n                \u001b[33mi\u001b[39;49m += 1\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m i > 5: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[7m-UU-:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   23% L110  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[6;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                             \u001b[39;49m\r\n\u001b[32m        if \"\u001b[39;49mhistory\u001b[32m\" in self.data:                                              \u001b[39;49m\r\n\u001b[6;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\u001b[6;44H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\t\t\u001b[?25li\u001b[21;9Hu\u001b[6;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l)\u001b[6;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\r\n\n\n\t\t\u001b[?25l\u001b[33mi\u001b[39;49m\u001b[21;9H\u001b[33mu\u001b[39;49m\u001b[6;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\u001b[23;36H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"history = []                                                  \u001b[39;49m\r\n\u001b[32m        if \"\u001b[39;49mhistory\u001b[32m\" in self.data:                                              \u001b[39;49m\r\n\u001b[7;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m            for turn in self.data.pop(\"\u001b[39;49mhistory\u001b[32m\"):                               \u001b[39;49m\r\n\u001b[32m                i += 1                                                          \u001b[39;49m\r\n\u001b[32m                for action in turn:                                             \u001b[39;49m\r\n\u001b[32m                    for step in action:                                         \u001b[39;49m\r\n\u001b[32m                        self.process(step)                                      \u001b[39;49m\r\n\u001b[32m                self.end_turn()                                                 \u001b[39;49m\r\n\u001b[32m                if i > 5: raise Exception(str(self.data[\"\u001b[39;49mhistory\u001b[32m\"]))            \u001b[39;49m\r\n\u001b[32m            self.alerts = []                                                    \u001b[39;49m\r\n\u001b[32m        else:                                                                   \u001b[39;49m\r\n\u001b[32m            self.data[\"\u001b[39;49mhistory\u001b[32m\"] = []                                           \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m    # This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[32m    def make_unit(self, data):                                                  \u001b[39;49m\r\n\u001b[32m        u = Unit(data[\"\u001b[39;49mname\u001b[32m\"], data[\"\u001b[39;49micon\u001b[32m\"])                                    \u001b[39;49m\r\n\u001b[7;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l[\u001b[32m\"history = []\u001b[39;49m\u001b[7;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\b\b\b\b\u001b[?25l\u001b[32m\"\u001b[39;49m = []\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"history\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data:\u001b[K\u001b[7;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l] = []\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;34H\r\n\n\u001b[?25l            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m):\u001b[K\r\n                \u001b[33mi\u001b[39;49m += 1\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n                        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m i > 5: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m]))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\u001b[7;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[19;1H\u001b[1M\u001b[1;24r\u001b[17;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\u001b[K\n\n\n\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[19;1H\u001b[1M\u001b[1;24r\u001b[18;5H\u001b[?25l\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\n\n\n\u001b[K\u001b[17d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;34H\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[8;13H\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m):\u001b[9;13H    \u001b[33mi\u001b[39;49m += 1\u001b[K\u001b[22;1H    \u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[A\u001b[8d\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[4P\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;13H\u001b[4P\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[4P\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[4P\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;21H\u001b[4P\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\t\u001b[4@\u001b[13;21H\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[13;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[13;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;17H\u001b[4P\b\b\b\b\u001b[4P\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[4P\r\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1M\u001b[1;24r\u001b[14;25H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\u001b[K\u001b[22d    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[1P\u001b[14;13H\t\t\b\b\u001b[1P\u001b[14;13H\u001b[14;22H\u001b[1P\u001b[14;13H\u001b[14;21H\u001b[1P\u001b[14;13H\u001b[14;20H\u001b[1P\b\b\b\b\b\b\b\u001b[14;19H\u001b[1P\b\b\b\b\b\b\t\u001b[C\u001b[1P\b\b\b\b\b\t\u001b[1P\b\b\b\b\t\b\u001b[1P\b\b\b\t\b\b\u001b[1P\b\b\u001b[C\u001b[1P\b\u001b[1P\r\t\u001b[4P\b\b\b\b\u001b[4P\u001b[8@\u001b[14;13H\r\t\u001b[4P\t\t\r\t\u001b[4@\u001b[14;29H\r\t\u001b[4P\t\t\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[11;1H\u001b[1M\u001b[1;24r\u001b[9;13H\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[10;13H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[22;1H        \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[9d\u001b[24d\u001b[?25l(No changes need to be saved)\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n        \u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[A\n        \u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m,[])\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m):\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   24% L113  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[9d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default *scratch*): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgrid.py\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lshell.py\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgrid.py\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lshell.py\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[K\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[K\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\trdict[\u001b[32m'history'\u001b[39;49m].append([[],[]])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]])          \u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[15;5H    \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;14H\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   37% L46 \u001b[0m\u001b[39;49m\u001b[27m\u001b[12;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\u001b[C\u001b[?25l],[]])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]]) \u001b[39;49m\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l[]])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]]) \u001b[39;49m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]]) \u001b[39;49m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l)\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]]) \u001b[39;49m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]]) \u001b[39;49m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;35H\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\bpython\b\b\b\b\b\b\u001b[4Pfg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+-------------------+\u001b[7;11H|\u001b[31m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;11H|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[9;11H+-------------------+\u001b[23;8H\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[6;11H\u001b(B\u001b[0m\u001b[32m\u001b[40m.....................\u001b[7;11H.....................\u001b[8;11H.....................\u001b[9;11H.....................\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[4d|\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[5d|\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6d\b\b...\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d|\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[3d|\u001b[32m\u001b[40m.\u001b[4d\b..\u001b[5d\b\b...\u001b[6;2H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[7;2H...\u001b[8;2H..\u001b[9d\b\b.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5d\b\b+------+\r\u001b[6d|\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[7;6H|Cancel|\u001b[8;6H+------+\u001b[23;8H\u001b[5d\b\b\u001b[32m\u001b[40m........\u001b[6;6H........\u001b[7;6H........\u001b[8;6H........\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[K\r\n        \u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n        rdict[\u001b[32m'history'\u001b[39;49m].append([])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]])               \u001b[39;49m\r\n\u001b[A\n\u001b[K\n        \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[A\n        \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   37% L46   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m,[])\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\u001b[K\u001b[15;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[23;14H\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   24% L113\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\b\b\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\u001b[?25lrsel\u001b[1@f\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@p\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@l\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@y\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lhistory\u001b[32m\"):                                            \u001b[39;49m\r\n\u001b[32m            for action in turn:                                                 \u001b[39;49m\r\n\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25listory\u001b[32m\"): \u001b[39;49m\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lstory\u001b[32m\"): \u001b[39;49m\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ltory\u001b[32m\"): \u001b[39;49m\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lory\u001b[32m\"): \u001b[39;49m\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lry\u001b[32m\"): \u001b[39;49m\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[32m\"): \u001b[39;49m\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"): \u001b[39;49m\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l):\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+-------------------+\u001b[7;11H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;11H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[9;11H+-------------------+\u001b[23;8H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n        \u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[A\n        \u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m,[])\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m replay:\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   24% L112  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default shell.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[K\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[K\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\trdict[\u001b[32m'history'\u001b[39;49m].append([])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]])               \u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[15;5H    \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\u001b[K\u001b[23;14H\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   37% L46 \u001b[0m\u001b[39;49m\u001b[27m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l[])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]])\u001b[39;49m\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l])\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]])\u001b[39;49m\u001b[12;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l)\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]]) \u001b[39;49m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]]) \u001b[39;49m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#   [[(0,4),(1,4),\"Wait\"],[]]) \u001b[39;49m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l   [[(0,4),(1,4),\u001b[32m\"Wait\"\u001b[39;49m],[]])\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;37H\u001b[?25l\u001b[1P\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1P\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1P\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;59H\b\b\b\b\b\u001b[?25l[]])\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]])\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[12;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[12;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+----------------------------------------------------------------------+\r\u001b[2d|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[2;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[3d|\u001b[32m\u001b[40m..............................\u001b[3;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d|\u001b[32m\u001b[40m..............................\u001b[4;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d|\u001b[32m\u001b[40m..............................\u001b[5;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d|\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[6;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d|\u001b[32m\u001b[40m..............................\u001b[7;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d|\u001b[32m\u001b[40m..............................\u001b[8;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d|\u001b[32m\u001b[40m..............................\u001b[9;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d|\u001b[32m\u001b[40m..............................\u001b[10;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d|\u001b[32m\u001b[40m..............................\u001b[11;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[12;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d|\u001b[32m\u001b[40m..............................\u001b[13;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d|\u001b[32m\u001b[40m..............................\u001b[14;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d|\u001b[32m\u001b[40m..............................\u001b[15;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d|\u001b[32m\u001b[40m..............................\u001b[16;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d|\u001b[17;72H|\r\u001b[18d|\u001b[18;72H|\r\u001b[19d+----------+\u001b[19;72H|\r\u001b[20d|\u001b[20;12H|-----------------------------------------------------------+\r\u001b[21d|\u001b[21;12H|\r\u001b[22d|\u001b[22;12H|\r\u001b[23d|Hello,    |\r\u001b[24d|world!    |\u001b[23;8H\u001b[6;11H+-------------------+\u001b[7;11H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;11H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[9;11H+-------------------+\u001b[23;8H\u001b[6;11H\u001b[32m\u001b[40m.....................\u001b[7;11H.....................\u001b[8;11H.....................\u001b[9;11H.....................\u001b[23;8H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[K\r\n        gdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[K\r\n        \u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n        rdict[\u001b[32m'history'\u001b[39;49m].append([[(0,4),(1,4),\u001b[32m\"Wait\"\u001b[39;49m]])\u001b[K\r\n\u001b[K\n        \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[A\n        \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   37% L46   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[12;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgame.py\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\nTodo:\u001b[K\n\b\b\b\b* Some intel boxes that display information about the map when you hover\u001b[5;4Hover tiles\u001b[K\r\n\u001b[C* (maybe) terrain movement inhibition (roads are easier than forests)\r\n\u001b[C* adding play history to the data format\u001b[K\r\n\u001b[C* save/load data from the rules\u001b[K\r\n\u001b[K\nDone:\u001b[K\n\b\b\b\b* An alert that pops up when a player ends their turn\r\n\u001b[C* change rendering so that the cells don't try to render their units\r\n\u001b[C* adding map name to the data format\r\n\u001b[K\nLet's do this.\u001b[K\r\n\u001b[K\nHaha! Of course it's an infinite loop! I'm trying to process the entire history\r\nbut every time I run \u001b[32m\"end turn\"\u001b[39;49m, a new item is added to the history, so it\r\nnever ends!\u001b[K\r\n\u001b[K\u001b[23;4H\u001b[7mU:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L29    (Lisp Interaction) -\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[9;1H\u001b[1M\u001b[1;24r\u001b[7;2H\u001b[?25l* save/load data from the rules\r\n\u001b[K\u001b[22d\u001b[K\u001b[7d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;38H\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[13;2H\u001b[?25l* adding play history to the data format\r\n\n\u001b[K\u001b[23;29H\u001b[7m43% L24\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[14d\u001b[24d\u001b[?25l\u001b[34mFile to save in: \u001b[39;49m~/Documents/open-tactics/\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[14d\u001b[24d\u001b[?25l\u001b[34mFile to save in: \u001b[39;49m~/Documents/open-tactics/\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default shell.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\r\n        \u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\r\n\u001b[C       \u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[K\u001b[5;4H     gdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\r\n\u001b[C       gdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[K\r\n\u001b[C       \u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\r\n\u001b[C       \u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n\u001b[C       \u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\u001b[C       rdict[\u001b[32m'history'\u001b[39;49m].append([[(0,4),(1,4),\u001b[32m\"Wait\"\u001b[39;49m]])\r\n\u001b[K\n\t\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\t\u001b[33mr\u001b[39;49m = game.Game(rdict)\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\r\n\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[23;4H\u001b[7m-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   37% L46   Git:master  (Python) \u001b[0m\u001b[39;49m\u001b[27m\u001b[12;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default *scratch*): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgame.py\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m,[])\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m replay:\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\u001b[K\u001b[15;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[23;14H\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   24% L112\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   24% L124\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[23;36H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[?25l        \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\n\b\b\b\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[16;5H\u001b[?25l\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\u001b[23;36H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\u001b[?25l    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\u001b[23;35H\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mv\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\t\b\t\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mv\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mg\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;19H\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;36H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[15;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mS\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mR\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mJ\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mS\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mO\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mN\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;56H\t\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[23;35H\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[16;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[16;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[16;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;9H\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[17;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[17;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\r\n\u001b[K\u001b[6;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\r\n\u001b[K\n\u001b[K\u001b[17;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[22;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[23;30H\u001b[7m7% L125\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[3;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[5;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[7;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[11;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[12;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[17;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[18;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[19;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[20;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[23;29H\u001b[7m31% L144\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[8;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[23;30H\u001b[7m6% L163\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[5;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[8;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[9;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[14;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[17;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[8;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[4;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[9;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[15;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[23;29H\u001b[7m40% L182\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[4;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[5;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[23;30H\u001b[7m5% L201\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[8;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[17;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[21;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[23;30H\u001b[7m9% L220\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[5;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[6;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[17;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[23;29H\u001b[7m54% L239\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[5;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[6;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[17;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[23;29H\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[3;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[4;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[8;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[13;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[21;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[23;30H\u001b[7m5% L221\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[4;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[10;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[12;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[13;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[20;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[21;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[22;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[23;30H\u001b[7m0% L202\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[4;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[8;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[15;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\n\u001b[C\u001b[7m36% L183\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[5;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[8;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[9;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[14;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[17;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[23;30H\u001b[7m1% L164\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[3;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[17;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[23;29H\u001b[7m27% L145\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[6;5H    \u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m,[])\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m replay:\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[11;5H                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\u001b[12;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\u001b[K\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[22;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[23;30H\u001b[7m3% L126\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[13;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\u001b[23;29H\u001b[7m18% L107\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m,[])\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m replay:\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\u001b[13;14Halerts = []\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[23;29H\u001b[7m23\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lj\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\t\u001b[?25lu\u001b[18;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;37H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[18;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[18;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\t\u001b[?25l\u001b[33mu\u001b[39;49m\u001b[18;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;14H\u001b[?25lchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[13;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\u001b[23;29H\u001b[7m18% L107\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m#   make_team                                                                   \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[8P\u001b[4;3H\u001b[31m  pop\u001b[39;49m\u001b[8@\u001b[31m_alerts \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[8;12H\u001b[31mODO: load the rules definition (types of units and properties)\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\u001b[K\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[12;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[13;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[16;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[19;14Haction = []\u001b[K\u001b[20;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[21;14Hchoices = []\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m5% L88 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;40H\u001b[8P\r\u001b[8@\u001b[2;11H\u001b[?25l\u001b[31mthat are running low (hp, fuel, etc).\u001b[39;49m\r\n        \u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon]\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp < 90):\u001b[K\r\n            frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\u001b[7;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\u001b[K\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Game serve two purposes. Firstly, it is a factory that produces           \u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[31m# state of the game grid.                                                       \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m                             \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[31m#   make_unit                                                                   \u001b[39;49m\r\n\u001b[31m#   make_team                                                                   \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[23;30H\u001b[7m1% L69\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(grid.Unit):\u001b[K\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Unit, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\u001b[10;5H\u001b[4P\t\b\b\u001b[31mThis drawing method overrides the default method by hand\u001b[39;49m\u001b[4@\u001b[31mling\u001b[39;49m\u001b[11;5H\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\u001b[K\r\n\u001b[K\n        \u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n        \u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        \u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[20;52H\u001b[8P\r\u001b[8@\u001b[20;11H\u001b[31mBuild the animation for this unit based on values\u001b[39;49m\u001b[21;40H\u001b[8P\r\u001b[8@\u001b[21;11H\u001b[31mthat are running low (hp, fuel, etc).\u001b[39;49m\r\n        \u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon]\u001b[K\n\u001b[7m 6% L50\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# Global strings. Stored to avoid mistyping.                                    \u001b[39;49m\r\n\u001b[33mCTRL_COORD\u001b[39;49m = \u001b[32m\"coord\"\u001b[39;49m\u001b[K\r\n\u001b[33mCTRL_MENU\u001b[39;49m = \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = \u001b[32m\"undo\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Custom Cell subclass. Contains information such as terrain defensive bonus.   \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(grid.Cell):\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\u001b[K\u001b[11;5H    \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\u001b[K\r\n\u001b[K\n\u001b[31m# Custom Team subclass. Contains information such as resources.                 \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(grid.Team):\u001b[K\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Team, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, color)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\u001b[K\r\n\u001b[K\n\u001b[31m# Custom Unit subclass. Contains information such as HP, readiness, and         \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31ma custom drawing method.                         \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(grid.Unit):\u001b[K\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\n\b\b\b\b\b\b\u001b[7m2% L31\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;3H\u001b[?25l\u001b[31mA game object handles all of the actual game play elements. The rules\u001b[39;49m\r\n\u001b[31m# are what give meaning to the pieces in a Grid, and is controlled (usually)    \u001b[39;49m\r\n\u001b[31m# by a Controller that provides piecewise input.                                \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m grid, widgets\r\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Global strings. Stored to avoid mistyping.                                    \u001b[39;49m\r\n\u001b[33mCTRL_COORD\u001b[39;49m = \u001b[32m\"coord\"\u001b[39;49m\u001b[K\r\n\u001b[33mCTRL_MENU\u001b[39;49m = \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = \u001b[32m\"undo\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Custom Cell subclass. Contains information such as terrain defensive bonus.   \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(grid.Cell):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\u001b[K\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\r\n\u001b[K\u001b[23;29H\u001b[7mTop L2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\n\n\u001b[?25lBeginning of buffer\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\u0007\n\n\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9 \u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lj\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[9;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[9;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2d\u001b[?25l        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\u001b[K\r\n\u001b[K\u001b[4;3H\u001b[31mCustom Team subclass. Contains information such as resources.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(grid.Team):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Team, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, color)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\r\n\u001b[K\n\u001b[31m# Custom Unit subclass. Contains information such as HP, readiness, and         \u001b[39;49m\r\n\u001b[31m# a custom drawing method.                                                      \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(grid.Unit):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Unit, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon)\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This drawing method overrides the default method by handling              \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n\u001b[23;29H\u001b[7m 4% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\r\n\u001b[K\n\t\u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n\t\u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\u001b[11;52H\u001b[8P\r\u001b[8@\u001b[11;11H\u001b[31mBuild the animation for this unit based on values\u001b[39;49m\r\n        \u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\u001b[13;5H    \u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon]\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp < 90):\u001b[K\r\n\t    frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\u001b[20;63H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mDraw the character.                                     \u001b[39;49m\u001b[21;5H    draw.char(x, y, img, color)\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m8% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    draw.char(x, y, img, color)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Game serve two purposes. Firstly, it is a factory that produces           \u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[31m# state of the game grid.                                                       \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  make_unit                                      \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  make_team                          \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[31m#   pop_alerts                                                                  \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[31m# TODO: load the rules definition (types of units and properties)       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[23;29H\u001b[7m13% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\n        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\u001b[9;32H\u001b[8P\r\u001b[8@\u001b[9;11H\u001b[31mThese are the state variables\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n\t\b\u001b[8P\r\u001b[8@\u001b[14;11H\u001b[31mother\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\u001b[K\u001b[18;12H\u001b[31mhe first index is the attacker, the second is the defender.   \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[22;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[23;30H\u001b[7m6% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ldraw.char(x, y, img, color)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Game serve two purposes. Firstly, it is a factory that produces           \u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[31m# state of the game grid.                                                       \u001b[39;49m\r\n\u001b[8P\u001b[9;3H\u001b[31m                             \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[31m#   make_unit                                                                   \u001b[39;49m\r\n\u001b[31m#   make_team                                                                   \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  pop\u001b[39;49m\u001b[8@\u001b[31m_alerts \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[18;12H\u001b[31mODO: load the rules definition (types of units and properties)\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\u001b[K\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[22;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\u001b[K\r\n\u001b[K\n        \u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n        \u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        \u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[11;52H\u001b[8P\r\u001b[8@\u001b[11;11H\u001b[31mBuild the animation for this unit based on values\u001b[39;49m\u001b[12;40H\u001b[8P\r\u001b[8@\u001b[12;11H\u001b[31mthat are running low (hp, fuel, etc).\u001b[39;49m\r\n        \u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon]\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp < 90):\u001b[K\r\n            frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\u001b[17;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\u001b[K\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m 8% L59\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon]\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp < 90):\u001b[K\u001b[4;5H        frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\u001b[6;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\u001b[K\r\n\u001b[K\n\t\u001b[31m# Draw the character.                                                   \u001b[39;49m\r\n\tdraw.char(x, y, img, color)\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Game serve two purposes. Firstly, it is a factory that produces           \u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[31m# state of the game grid.                                                       \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[31m#   make_unit                                                                   \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  make_team        \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[31m#   pop_alerts                                                                  \u001b[39;49m\r\n\u001b[23;29H\u001b[7m11% L60\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\u001b[K\r\n\u001b[K\n\t\u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n\t\u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# Build the animation for this unit based on values                     \u001b[39;49m\r\n\t\u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n        \u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon]\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp < 90):\u001b[K\r\n            frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n        \u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\u001b[K\r\n\u001b[K\u001b[20;22H\u001b[8P\r\u001b[8@\u001b[20;11H\u001b[31mDraw the character.\u001b[39;49m\r\n        draw.char(x, y, img, color)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m 8% L49\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\u001b[K\r\n\u001b[K\n\u001b[31m# Custom Team subclass. Contains information such as resources.                 \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(grid.Team):\u001b[K\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Team, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, color)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\u001b[K\r\n\u001b[K\n\u001b[31m# Custom Unit subclass. Contains information such as HP, readiness, and         \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31ma custom drawing method.                         \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(grid.Unit):\u001b[K\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Unit, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\u001b[20;5H\u001b[4P\t\b\b\u001b[31mThis drawing method overrides the default method by hand\u001b[39;49m\u001b[4@\u001b[31mling\u001b[39;49m\u001b[21;5H\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n\u001b[23;30H\u001b[7m4% L40\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# A game object handles all of the actual game play elements. The rules         \u001b[39;49m\r\n\u001b[31m# are what give meaning to the pieces in a Grid, and is controlled (usually)    \u001b[39;49m\r\n\u001b[4;3H\u001b[31mby a Controller that provides piecewise input.               \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m grid, widgets\u001b[K\r\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy, json\r\n\u001b[K\n\u001b[K\n\u001b[31m# Global strings. Stored to avoid mistyping.                                    \u001b[39;49m\r\n\u001b[33mCTRL_COORD\u001b[39;49m = \u001b[32m\"coord\"\u001b[39;49m\u001b[K\r\n\u001b[33mCTRL_MENU\u001b[39;49m = \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = \u001b[32m\"undo\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Custom Cell subclass. Contains information such as terrain defensive bonus.   \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(grid.Cell):\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\u001b[K\u001b[21;5H    \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\u001b[K\r\n\u001b[K\u001b[4;3H\u001b[31mCustom Team subclass. Contains information such as resources.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(grid.Team):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Team, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, color)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\r\n\u001b[K\n\u001b[31m# Custom Unit subclass. Contains information such as HP, readiness, and         \u001b[39;49m\r\n\u001b[31m# a custom drawing method.                                                      \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(grid.Unit):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Unit, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon)\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This drawing method overrides the default method by handling              \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n\u001b[23;29H\u001b[7m 4%\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\r\n\u001b[K\n\t\u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n\t\u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\u001b[11;52H\u001b[8P\r\u001b[8@\u001b[11;11H\u001b[31mBuild the animation for this unit based on values\u001b[39;49m\r\n        \u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\u001b[13;5H    \u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon]\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp < 90):\u001b[K\r\n\t    frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\u001b[20;63H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mDraw the character.                                     \u001b[39;49m\u001b[21;5H    draw.char(x, y, img, color)\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m8% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    draw.char(x, y, img, color)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Game serve two purposes. Firstly, it is a factory that produces           \u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[31m# state of the game grid.                                                       \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  make_unit                                      \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  make_team                          \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[31m#   pop_alerts                                                                  \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[31m# TODO: load the rules definition (types of units and properties)       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[23;29H\u001b[7m13% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\n        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\u001b[9;32H\u001b[8P\r\u001b[8@\u001b[9;11H\u001b[31mThese are the state variables\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n\t\b\u001b[8P\r\u001b[8@\u001b[14;11H\u001b[31mother\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\u001b[K\u001b[18;12H\u001b[31mhe first index is the attacker, the second is the defender.   \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[22;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[23;30H\u001b[7m6% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[3;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[4;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[7;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[10;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[11;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[12;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m,[])\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m replay:\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\n\u001b[C\u001b[7m20% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\u001b[4;14Halerts = []\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m json.dumps(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data)\r\n\u001b[K\u001b[11;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\r\n\u001b[K\u001b[16;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\n\b\u001b[7m5% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\r\n\u001b[K\n\u001b[K\u001b[8;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[13;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[17;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[21;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\u001b[23;30H\u001b[7m9% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\u001b[3;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m json.dumps(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data)\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[13;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\n\b\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[?25l\u001b[34mSwitch to buffer (default shell.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[6;5H    gdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[K\u001b[7;5H    \u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[K\u001b[8;5H    \u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[11;5H    \u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\u001b[12;5H    rdict[\u001b[32m'history'\u001b[39;49m].append([[(0,4),(1,4),\u001b[32m\"Wait\"\u001b[39;49m]])\r\n\u001b[K\n\t\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\t\u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\r\n\u001b[K\n\u001b[K\u001b[23;14H\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   37% L46 \u001b[0m\u001b[39;49m\u001b[27m\u001b[12;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m json.dumps(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data)\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[23;14H\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   25% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[1;22r\u001b[6;1H\u001b[1L\u001b[1;24r\u001b[6;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   25% L118\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[7;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;15H\u001b[?25l\u001b[32mException\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;9H\u001b[?25lu\n\n\n\n\n\bc\u001b[6;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[6;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[6;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[6;25H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l)\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;37H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[6;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[6;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 119, in __init__\r\n    raise Exception(self.save())\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 124, in save\r\n    return json.dumps(self.data)\r\n  File \"/usr/lib/python2.7/json/__init__.py\", line 243, in dumps\r\n    return _default_encoder.encode(obj)\r\n  File \"/usr/lib/python2.7/json/encoder.py\", line 207, in encode\r\n    chunks = self.iterencode(o, _one_shot=True)\r\n  File \"/usr/lib/python2.7/json/encoder.py\", line 270, in iterencode\r\n    return _iterencode(o, 0)\r\n  File \"/usr/lib/python2.7/json/encoder.py\", line 184, in default\r\n    raise TypeError(repr(o) + \" is not JSON serializable\")\r\nTypeError: <core.grid.Grid object at 0x90c7d8c> is not JSON serializable\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.save())\u001b[K\r\n\u001b[K\n    \u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m json.dumps(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data)\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        u = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        c = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   25% L119  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[6;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;9H\u001b[?25l\u001b[33mu\u001b[39;49m\n\n\n\n\n\b\u001b[33mc\u001b[39;49m\u001b[6;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[4;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m,[])\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[18;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m replay:\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[23;30H\u001b[7m0% L116\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[3;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[4;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[7;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[10;14Haction = []\u001b[K\u001b[11;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[12;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[23;29H\u001b[7m16% L97 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25ldraw.char(x, y, img, color)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Game serve two purposes. Firstly, it is a factory that produces           \u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[31m# state of the game grid.                                                       \u001b[39;49m\r\n\u001b[8P\u001b[9;3H\u001b[31m                             \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[31m#   make_unit                                                                   \u001b[39;49m\r\n\u001b[31m#   make_team                                                                   \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  pop\u001b[39;49m\u001b[8@\u001b[31m_alerts \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[18;12H\u001b[31mODO: load the rules definition (types of units and properties)\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\u001b[K\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[22;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[23;30H\u001b[7m3% L78\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\n        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\u001b[9;32H\u001b[8P\r\u001b[8@\u001b[9;11H\u001b[31mThese are the state variables\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n\t\b\u001b[8P\r\u001b[8@\u001b[14;11H\u001b[31mother\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\u001b[K\u001b[18;12H\u001b[31mhe first index is the attacker, the second is the defender.   \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[22;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[3;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[4;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[7;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[10;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[11;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[12;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m,[])\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m replay:\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\n\u001b[C\u001b[7m20% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\u001b[4;14Halerts = []\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.save())\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m json.dumps(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data)\r\n\u001b[K\u001b[13;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m5% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 119, in __init__\r\n    raise Exception(self.save())\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 124, in save\r\n    return json.dumps(self.data)\r\n  File \"/usr/lib/python2.7/json/__init__.py\", line 243, in dumps\r\n    return _default_encoder.encode(obj)\r\n  File \"/usr/lib/python2.7/json/encoder.py\", line 207, in encode\r\n    chunks = self.iterencode(o, _one_shot=True)\r\n  File \"/usr/lib/python2.7/json/encoder.py\", line 270, in iterencode\r\n    return _iterencode(o, 0)\r\n  File \"/usr/lib/python2.7/json/encoder.py\", line 184, in default\r\n    raise TypeError(repr(o) + \" is not JSON serializable\")\r\nTypeError: <core.grid.Grid object at 0x96deb8c> is not JSON serializable\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\b\b./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\b\b./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.save())\u001b[K\r\n\u001b[K\n    \u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m json.dumps(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data)\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   25% L115  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[4;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\u001b[8;5H    \u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m,[])\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m replay:\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[13;5H                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.save())\r\n\u001b[K\u001b[19;5H\u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m json.dumps(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data)\u001b[23;30H\u001b[7m3% L114\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25laction = []\u001b[K\u001b[3;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[4;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[15;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\n\b\b\b\b\b\u001b[7m18% L105\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[31m#   make_unit                                                                   \u001b[39;49m\r\n\u001b[31m#   make_team                                                                   \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[8P\u001b[6;3H\u001b[31m  pop\u001b[39;49m\u001b[8@\u001b[31m_alerts \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[10;12H\u001b[31mODO: load the rules definition (types of units and properties)\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\u001b[K\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[14;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[15;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[18;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[21;14Haction = []\u001b[K\u001b[22;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m4% L86 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;36H\u001b[8P\r\u001b[8@\u001b[2;11H\u001b[?25l\u001b[31mCreate the grid with what's left.\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\u001b[6;57H\u001b[8P\r\u001b[8@\u001b[6;11H\u001b[31mThe history contains all actions for this player turn.\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\u001b[9;5H    \u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[11;14Hstate = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\u001b[15;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\u001b[20;11H\u001b[31mitself. Ugh.                 \u001b[39;49m\u001b[21;14Hmatrix = {}\u001b[22;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[23;30H\u001b[7m6% L87\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[3;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[4;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[7;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[10;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[11;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[12;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m,[])\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m replay:\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\n\u001b[C\u001b[7m20% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\u001b[4;14Halerts = []\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.save())\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m json.dumps(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data)\r\n\u001b[K\u001b[13;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m5% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[4;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m,[])\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[18;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m replay:\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[3;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[4;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n\u001b[K\n\t\u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n\u001b[7;14Hhistory = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# These are the state variables                                         \u001b[39;49m\r\n\u001b[10;14Haction = []\u001b[K\u001b[11;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[12;14Hchoices = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# other                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# The first index is the attacker, the second is the defender.          \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[23;29H\u001b[7m16% L97 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25ldraw.char(x, y, img, color)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Game serve two purposes. Firstly, it is a factory that produces           \u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[31m# state of the game grid.                                                       \u001b[39;49m\r\n\u001b[8P\u001b[9;3H\u001b[31m                             \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[31m#   make_unit                                                                   \u001b[39;49m\r\n\u001b[31m#   make_team                                                                   \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  pop\u001b[39;49m\u001b[8@\u001b[31m_alerts \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[18;12H\u001b[31mODO: load the rules definition (types of units and properties)\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\u001b[K\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\u001b[22;14Hgrid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[K\u001b[23;30H\u001b[7m3% L78\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\n        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\u001b[9;32H\u001b[8P\r\u001b[8@\u001b[9;11H\u001b[31mThese are the state variables\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n\t\b\u001b[8P\r\u001b[8@\u001b[14;11H\u001b[31mother\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\u001b[K\u001b[18;12H\u001b[31mhe first index is the attacker, the second is the defender.   \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[22;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[3;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[4;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[7;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[10;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[11;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[12;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m,[])\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m replay:\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\n\u001b[C\u001b[7m20% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\u001b[4;14Halerts = []\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.save())\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m json.dumps(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data)\r\n\u001b[K\u001b[13;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m5% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\r\n\u001b[K\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[15;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[19;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\n\b\b\b\u001b[7m9% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.save())\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m json.dumps(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data)\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[15;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;37H\b\b\b\b\b\b\b\b\b\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[31m#json.dumps(self.data)                                           \u001b[39;49m\r\n\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l \u001b[31m#json.dumps(self.data)\u001b[39;49m\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25ls \u001b[31m#json.dumps(self.data)\u001b[39;49m\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt \u001b[31m#json.dumps(self.data)\u001b[39;49m\u001b[11;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m \u001b[31m#json.dumps(self.data)\u001b[39;49m\u001b[11;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l( \u001b[31m#json.dumps(self.data)\u001b[39;49m\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls \u001b[31m#json.dumps(self.data)\u001b[39;49m\u001b[11;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le \u001b[31m#json.dumps(self.data)\u001b[39;49m\u001b[11;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll \u001b[31m#json.dumps(self.data)\u001b[39;49m\u001b[11;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l. \u001b[31m#json.dumps(self.data)\u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf \u001b[31m#json.dumps(self.data)\u001b[39;49m\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l \u001b[31m#json.dumps(self.data) \u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l \u001b[31m#json.dumps(self.data) \u001b[39;49m\u001b[11;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[31m#json.dumps(self.data)\u001b[39;49m\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l. \u001b[31m#json.dumps(self.data)\u001b[39;49m\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld \u001b[31m#json.dumps(self.data)\u001b[39;49m\u001b[11;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la \u001b[31m#json.dumps(self.data)\u001b[39;49m\u001b[11;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt \u001b[31m#json.dumps(self.data)\u001b[39;49m\u001b[11;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la \u001b[31m#json.dumps(self.data)\u001b[39;49m\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l) \u001b[31m#json.dumps(self.data)\u001b[39;49m\u001b[11;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;30H\u001b[?25lX \u001b[31m#json.dumps(self.data)\u001b[39;49m\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l \u001b[31m#json.dumps(self.data) \u001b[39;49m\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 119, in __init__\r\n    raise Exception(self.save())\r\nException: {'grid': {'h': 15, 'cells': [{'y': 0, 'x': 0, 'name': 'grass'}, {'y': 1, 'x': 0, 'name': 'grass'}, {'y': 2, 'x': 0, 'name': 'grass'}, {'y': 3, 'x': 0, 'name': 'grass'}, {'y': 4, 'x': 0, 'name': 'grass', 'unit': {'team': 0, 'name': 'Infantry', 'icon': 'i'}}, {'y': 5, 'x': 0, 'name': 'grass'}, {'y': 6, 'x': 0, 'name': 'grass'}, {'y': 7, 'x': 0, 'name': 'grass'}, {'y': 8, 'x': 0, 'name': 'grass'}, {'y': 9, 'x': 0, 'name': 'grass'}, {'y': 10, 'x': 0, 'name': 'grass'}, {'y': 11, 'x': 0, 'name': 'grass'}, {'y': 12, 'x': 0, 'name': 'grass'}, {'y': 13, 'x': 0, 'name': 'grass'}, {'y': 14, 'x': 0, 'name': 'grass'}, {'y': 0, 'x': 1, 'name': 'grass'}, {'y': 1, 'x': 1, 'name': 'grass'}, {'y': 2, 'x': 1, 'name': 'grass'}, {'y': 3, 'x': 1, 'name': 'grass'}, {'y': 4, 'x': 1, 'name': 'grass'}, {'y': 5, 'x': 1, 'name': 'grass'}, {'y': 6, 'x': 1, 'name': 'grass'}, {'y': 7, 'x': 1, 'name': 'grass'}, {'y': 8, 'x': 1, 'name': 'grass'}, {'y': 9, 'x': 1, 'name': 'grass'}, {'y': 10, 'x': 1, 'name': 'grass'}, {'y': 11, 'x': 1, 'name': 'grass'}, {'y': 12, 'x': 1, 'name': 'grass'}, {'y': 13, 'x': 1, 'name': 'grass'}, {'y': 14, 'x': 1, 'name': 'grass'}, {'y': 0, 'x': 2, 'name': 'grass'}, {'y': 1, 'x': 2, 'name': 'grass'}, {'y': 2, 'x': 2, 'name': 'grass'}, {'y': 3, 'x': 2, 'name': 'grass'}, {'y': 4, 'x': 2, 'name': 'grass'}, {'y': 5, 'x': 2, 'name': 'grass'}, {'y': 6, 'x': 2, 'name': 'grass'}, {'y': 7, 'x': 2, 'name': 'grass'}, {'y': 8, 'x': 2, 'name': 'grass'}, {'y': 9, 'x': 2, 'name': 'grass'}, {'y': 10, 'x': 2, 'name': 'grass', 'unit': {'team': 1, 'name': 'Artillery', 'icon': 'L'}}, {'y': 11, 'x': 2, 'name': 'grass'}, {'y': 12, 'x': 2, 'name': 'grass'}, {'y': 13, 'x': 2, 'name': 'grass'}, {'y': 14, 'x': 2, 'name': 'grass'}, {'y': 0, 'x': 3, 'name': 'grass'}, {'y': 1, 'x': 3, 'name': 'grass'}, {'y': 2, 'x': 3, 'name': 'grass'}, {'y': 3, 'x': 3, 'name': 'grass'}, {'y': 4, 'x': 3, 'name': 'grass'}, {'y': 5, 'x': 3, 'name': 'grass'}, {'y': 6, 'x': 3, 'name': 'grass'}, {'y': 7, 'x': 3, 'name': 'grass'}, {'y': 8, 'x': 3, 'name': 'grass'}, {'y': 9, 'x': 3, 'name': 'grass'}, {'y': 10, 'x': 3, 'name': 'grass'}, {'y': 11, 'x': 3, 'name': 'grass'}, {'y': 12, 'x': 3, 'name': 'grass'}, {'y': 13, 'x': 3, 'name': 'grass'}, {'y': 14, 'x': 3, 'name': 'grass'}, {'y': 0, 'x': 4, 'name': 'grass'}, {'y': 1, 'x': 4, 'name': 'grass'}, {'y': 2, 'x': 4, 'name': 'grass'}, {'y': 3, 'x': 4, 'name': 'grass'}, {'y': 4, 'x': 4, 'name': 'grass'}, {'y': 5, 'x': 4, 'name': 'grass'}, {'y': 6, 'x': 4, 'name': 'grass'}, {'y': 7, 'x': 4, 'name': 'grass'}, {'y': 8, 'x': 4, 'name': 'grass'}, {'y': 9, 'x': 4, 'name': 'grass'}, {'y': 10, 'x': 4, 'name': 'grass'}, {'y': 11, 'x': 4, 'name': 'grass'}, {'y': 12, 'x': 4, 'name': 'grass'}, {'y': 13, 'x': 4, 'name': 'grass'}, {'y': 14, 'x': 4, 'name': 'grass'}, {'y': 0, 'x': 5, 'name': 'grass'}, {'y': 1, 'x': 5, 'name': 'grass'}, {'y': 2, 'x': 5, 'name': 'grass'}, {'y': 3, 'x': 5, 'name': 'grass'}, {'y': 4, 'x': 5, 'name': 'grass'}, {'y': 5, 'x': 5, 'name': 'grass'}, {'y': 6, 'x': 5, 'name': 'grass'}, {'y': 7, 'x': 5, 'name': 'grass'}, {'y': 8, 'x': 5, 'name': 'grass'}, {'y': 9, 'x': 5, 'name': 'grass'}, {'y': 10, 'x': 5, 'name': 'grass'}, {'y': 11, 'x': 5, 'name': 'grass'}, {'y': 12, 'x': 5, 'name': 'grass'}, {'y': 13, 'x': 5, 'name': 'grass'}, {'y': 14, 'x': 5, 'name': 'grass'}, {'y': 0, 'x': 6, 'name': 'grass'}, {'y': 1, 'x': 6, 'name': 'grass'}, {'y': 2, 'x': 6, 'name': 'grass'}, {'y': 3, 'x': 6, 'name': 'grass'}, {'y': 4, 'x': 6, 'name': 'grass'}, {'y': 5, 'x': 6, 'name': 'grass'}, {'y': 6, 'x': 6, 'name': 'grass'}, {'y': 7, 'x': 6, 'name': 'grass'}, {'y': 8, 'x': 6, 'name': 'grass'}, {'y': 9, 'x': 6, 'name': 'grass'}, {'y': 10, 'x': 6, 'name': 'grass'}, {'y': 11, 'x': 6, 'name': 'grass'}, {'y': 12, 'x': 6, 'name': 'grass'}, {'y': 13, 'x': 6, 'name': 'grass'}, {'y': 14, 'x': 6, 'name': 'grass'}, {'y': 0, 'x': 7, 'name': 'grass'}, {'y': 1, 'x': 7, 'name': 'grass'}, {'y': 2, 'x': 7, 'name': 'grass'}, {'y': 3, 'x': 7, 'name': 'grass'}, {'y': 4, 'x': 7, 'name': 'grass'}, {'y': 5, 'x': 7, 'name': 'grass'}, {'y': 6, 'x': 7, 'name': 'grass'}, {'y': 7, 'x': 7, 'name': 'grass'}, {'y': 8, 'x': 7, 'name': 'grass'}, {'y': 9, 'x': 7, 'name': 'grass'}, {'y': 10, 'x': 7, 'name': 'grass'}, {'y': 11, 'x': 7, 'name': 'grass'}, {'y': 12, 'x': 7, 'name': 'grass'}, {'y': 13, 'x': 7, 'name': 'grass'}, {'y': 14, 'x': 7, 'name': 'grass'}, {'y': 0, 'x': 8, 'name': 'grass'}, {'y': 1, 'x': 8, 'name': 'grass'}, {'y': 2, 'x': 8, 'name': 'grass'}, {'y': 3, 'x': 8, 'name': 'grass'}, {'y': 4, 'x': 8, 'name': 'grass'}, {'y': 5, 'x': 8, 'name': 'grass'}, {'y': 6, 'x': 8, 'name': 'grass'}, {'y': 7, 'x': 8, 'name': 'grass'}, {'y': 8, 'x': 8, 'name': 'grass'}, {'y': 9, 'x': 8, 'name': 'grass'}, {'y': 10, 'x': 8, 'name': 'grass'}, {'y': 11, 'x': 8, 'name': 'grass'}, {'y': 12, 'x': 8, 'name': 'grass'}, {'y': 13, 'x': 8, 'name': 'grass'}, {'y': 14, 'x': 8, 'name': 'grass'}, {'y': 0, 'x': 9, 'name': 'grass'}, {'y': 1, 'x': 9, 'name': 'grass'}, {'y': 2, 'x': 9, 'name': 'grass'}, {'y': 3, 'x': 9, 'name': 'grass'}, {'y': 4, 'x': 9, 'name': 'grass'}, {'y': 5, 'x': 9, 'name': 'grass'}, {'y': 6, 'x': 9, 'name': 'grass'}, {'y': 7, 'x': 9, 'name': 'grass'}, {'y': 8, 'x': 9, 'name': 'grass'}, {'y': 9, 'x': 9, 'name': 'grass'}, {'y': 10, 'x': 9, 'name': 'grass'}, {'y': 11, 'x': 9, 'name': 'grass'}, {'y': 12, 'x': 9, 'name': 'grass'}, {'y': 13, 'x': 9, 'name': 'grass'}, {'y': 14, 'x': 9, 'name': 'grass'}, {'y': 0, 'x': 10, 'name': 'grass'}, {'y': 1, 'x': 10, 'name': 'grass'}, {'y': 2, 'x': 10, 'name': 'grass'}, {'y': 3, 'x': 10, 'name': 'grass'}, {'y': 4, 'x': 10, 'name': 'grass'}, {'y': 5, 'x': 10, 'name': 'grass'}, {'y': 6, 'x': 10, 'name': 'grass'}, {'y': 7, 'x': 10, 'name': 'grass'}, {'y': 8, 'x': 10, 'name': 'grass'}, {'y': 9, 'x': 10, 'name': 'grass'}, {'y': 10, 'x': 10, 'name': 'grass'}, {'y': 11, 'x': 10, 'name': 'grass'}, {'y': 12, 'x': 10, 'name': 'grass'}, {'y': 13, 'x': 10, 'name': 'grass'}, {'y': 14, 'x': 10, 'name': 'grass'}, {'y': 0, 'x': 11, 'name': 'grass'}, {'y': 1, 'x': 11, 'name': 'grass'}, {'y': 2, 'x': 11, 'name': 'grass'}, {'y': 3, 'x': 11, 'name': 'grass'}, {'y': 4, 'x': 11, 'name': 'grass'}, {'y': 5, 'x': 11, 'name': 'grass'}, {'y': 6, 'x': 11, 'name': 'grass'}, {'y': 7, 'x': 11, 'name': 'grass'}, {'y': 8, 'x': 11, 'name': 'grass'}, {'y': 9, 'x': 11, 'name': 'grass'}, {'y': 10, 'x': 11, 'name': 'grass'}, {'y': 11, 'x': 11, 'name': 'grass'}, {'y': 12, 'x': 11, 'name': 'grass'}, {'y': 13, 'x': 11, 'name': 'grass'}, {'y': 14, 'x': 11, 'name': 'grass'}, {'y': 0, 'x': 12, 'name': 'grass'}, {'y': 1, 'x': 12, 'name': 'grass'}, {'y': 2, 'x': 12, 'name': 'grass'}, {'y': 3, 'x': 12, 'name': 'grass'}, {'y': 4, 'x': 12, 'name': 'grass'}, {'y': 5, 'x': 12, 'name': 'grass'}, {'y': 6, 'x': 12, 'name': 'grass'}, {'y': 7, 'x': 12, 'name': 'grass'}, {'y': 8, 'x': 12, 'name': 'grass'}, {'y': 9, 'x': 12, 'name': 'grass'}, {'y': 10, 'x': 12, 'name': 'grass'}, {'y': 11, 'x': 12, 'name': 'grass'}, {'y': 12, 'x': 12, 'name': 'grass'}, {'y': 13, 'x': 12, 'name': 'grass'}, {'y': 14, 'x': 12, 'name': 'grass'}, {'y': 0, 'x': 13, 'name': 'grass'}, {'y': 1, 'x': 13, 'name': 'grass'}, {'y': 2, 'x': 13, 'name': 'grass'}, {'y': 3, 'x': 13, 'name': 'grass'}, {'y': 4, 'x': 13, 'name': 'grass'}, {'y': 5, 'x': 13, 'name': 'grass'}, {'y': 6, 'x': 13, 'name': 'grass'}, {'y': 7, 'x': 13, 'name': 'grass'}, {'y': 8, 'x': 13, 'name': 'grass'}, {'y': 9, 'x': 13, 'name': 'grass'}, {'y': 10, 'x': 13, 'name': 'grass'}, {'y': 11, 'x': 13, 'name': 'grass'}, {'y': 12, 'x': 13, 'name': 'grass'}, {'y': 13, 'x': 13, 'name': 'grass'}, {'y': 14, 'x': 13, 'name': 'grass'}, {'y': 0, 'x': 14, 'name': 'grass'}, {'y': 1, 'x': 14, 'name': 'grass'}, {'y': 2, 'x': 14, 'name': 'grass'}, {'y': 3, 'x': 14, 'name': 'grass'}, {'y': 4, 'x': 14, 'name': 'grass'}, {'y': 5, 'x': 14, 'name': 'grass'}, {'y': 6, 'x': 14, 'name': 'grass'}, {'y': 7, 'x': 14, 'name': 'grass'}, {'y': 8, 'x': 14, 'name': 'grass'}, {'y': 9, 'x': 14, 'name': 'grass'}, {'y': 10, 'x': 14, 'name': 'grass'}, {'y': 11, 'x': 14, 'name': 'grass'}, {'y': 12, 'x': 14, 'name': 'grass'}, {'y': 13, 'x': 14, 'name': 'grass'}, {'y': 14, 'x': 14, 'name': 'grass'}, {'y': 0, 'x': 15, 'name': 'grass'}, {'y': 1, 'x': 15, 'name': 'grass'}, {'y': 2, 'x': 15, 'name': 'grass'}, {'y': 3, 'x': 15, 'name': 'grass'}, {'y': 4, 'x': 15, 'name': 'grass'}, {'y': 5, 'x': 15, 'name': 'grass'}, {'y': 6, 'x': 15, 'name': 'grass'}, {'y': 7, 'x': 15, 'name': 'grass'}, {'y': 8, 'x': 15, 'name': 'grass'}, {'y': 9, 'x': 15, 'name': 'grass'}, {'y': 10, 'x': 15, 'name': 'grass'}, {'y': 11, 'x': 15, 'name': 'grass'}, {'y': 12, 'x': 15, 'name': 'grass'}, {'y': 13, 'x': 15, 'name': 'grass'}, {'y': 14, 'x': 15, 'name': 'grass'}, {'y': 0, 'x': 16, 'name': 'grass'}, {'y': 1, 'x': 16, 'name': 'grass'}, {'y': 2, 'x': 16, 'name': 'grass'}, {'y': 3, 'x': 16, 'name': 'grass'}, {'y': 4, 'x': 16, 'name': 'grass'}, {'y': 5, 'x': 16, 'name': 'grass'}, {'y': 6, 'x': 16, 'name': 'grass'}, {'y': 7, 'x': 16, 'name': 'grass'}, {'y': 8, 'x': 16, 'name': 'grass'}, {'y': 9, 'x': 16, 'name': 'grass'}, {'y': 10, 'x': 16, 'name': 'grass'}, {'y': 11, 'x': 16, 'name': 'grass'}, {'y': 12, 'x': 16, 'name': 'grass'}, {'y': 13, 'x': 16, 'name': 'grass'}, {'y': 14, 'x': 16, 'name': 'grass'}, {'y': 0, 'x': 17, 'name': 'grass'}, {'y': 1, 'x': 17, 'name': 'grass'}, {'y': 2, 'x': 17, 'name': 'grass'}, {'y': 3, 'x': 17, 'name': 'grass'}, {'y': 4, 'x': 17, 'name': 'grass'}, {'y': 5, 'x': 17, 'name': 'grass'}, {'y': 6, 'x': 17, 'name': 'grass'}, {'y': 7, 'x': 17, 'name': 'grass'}, {'y': 8, 'x': 17, 'name': 'grass'}, {'y': 9, 'x': 17, 'name': 'grass'}, {'y': 10, 'x': 17, 'name': 'grass'}, {'y': 11, 'x': 17, 'name': 'grass'}, {'y': 12, 'x': 17, 'name': 'grass'}, {'y': 13, 'x': 17, 'name': 'grass'}, {'y': 14, 'x': 17, 'name': 'grass'}, {'y': 0, 'x': 18, 'name': 'grass'}, {'y': 1, 'x': 18, 'name': 'grass'}, {'y': 2, 'x': 18, 'name': 'grass'}, {'y': 3, 'x': 18, 'name': 'grass'}, {'y': 4, 'x': 18, 'name': 'grass'}, {'y': 5, 'x': 18, 'name': 'grass'}, {'y': 6, 'x': 18, 'name': 'grass'}, {'y': 7, 'x': 18, 'name': 'grass'}, {'y': 8, 'x': 18, 'name': 'grass'}, {'y': 9, 'x': 18, 'name': 'grass'}, {'y': 10, 'x': 18, 'name': 'grass'}, {'y': 11, 'x': 18, 'name': 'grass'}, {'y': 12, 'x': 18, 'name': 'grass'}, {'y': 13, 'x': 18, 'name': 'grass'}, {'y': 14, 'x': 18, 'name': 'grass'}, {'y': 0, 'x': 19, 'name': 'grass'}, {'y': 1, 'x': 19, 'name': 'grass'}, {'y': 2, 'x': 19, 'name': 'grass'}, {'y': 3, 'x': 19, 'name': 'grass'}, {'y': 4, 'x': 19, 'name': 'grass'}, {'y': 5, 'x': 19, 'name': 'grass'}, {'y': 6, 'x': 19, 'name': 'grass'}, {'y': 7, 'x': 19, 'name': 'grass'}, {'y': 8, 'x': 19, 'name': 'grass'}, {'y': 9, 'x': 19, 'name': 'grass'}, {'y': 10, 'x': 19, 'name': 'grass'}, {'y': 11, 'x': 19, 'name': 'grass'}, {'y': 12, 'x': 19, 'name': 'grass'}, {'y': 13, 'x': 19, 'name': 'grass'}, {'y': 14, 'x': 19, 'name': 'grass'}, {'y': 0, 'x': 20, 'name': 'grass'}, {'y': 1, 'x': 20, 'name': 'grass'}, {'y': 2, 'x': 20, 'name': 'grass'}, {'y': 3, 'x': 20, 'name': 'grass'}, {'y': 4, 'x': 20, 'name': 'grass'}, {'y': 5, 'x': 20, 'name': 'grass'}, {'y': 6, 'x': 20, 'name': 'grass'}, {'y': 7, 'x': 20, 'name': 'grass'}, {'y': 8, 'x': 20, 'name': 'grass'}, {'y': 9, 'x': 20, 'name': 'grass'}, {'y': 10, 'x': 20, 'name': 'grass'}, {'y': 11, 'x': 20, 'name': 'grass'}, {'y': 12, 'x': 20, 'name': 'grass'}, {'y': 13, 'x': 20, 'name': 'grass'}, {'y': 14, 'x': 20, 'name': 'grass'}, {'y': 0, 'x': 21, 'name': 'grass'}, {'y': 1, 'x': 21, 'name': 'grass'}, {'y': 2, 'x': 21, 'name': 'grass'}, {'y': 3, 'x': 21, 'name': 'grass'}, {'y': 4, 'x': 21, 'name': 'grass'}, {'y': 5, 'x': 21, 'name': 'grass'}, {'y': 6, 'x': 21, 'name': 'grass'}, {'y': 7, 'x': 21, 'name': 'grass'}, {'y': 8, 'x': 21, 'name': 'grass'}, {'y': 9, 'x': 21, 'name': 'grass'}, {'y': 10, 'x': 21, 'name': 'grass'}, {'y': 11, 'x': 21, 'name': 'grass'}, {'y': 12, 'x': 21, 'name': 'grass'}, {'y': 13, 'x': 21, 'name': 'grass'}, {'y': 14, 'x': 21, 'name': 'grass'}, {'y': 0, 'x': 22, 'name': 'grass'}, {'y': 1, 'x': 22, 'name': 'grass'}, {'y': 2, 'x': 22, 'name': 'grass'}, {'y': 3, 'x': 22, 'name': 'grass'}, {'y': 4, 'x': 22, 'name': 'grass'}, {'y': 5, 'x': 22, 'name': 'grass'}, {'y': 6, 'x': 22, 'name': 'grass'}, {'y': 7, 'x': 22, 'name': 'grass'}, {'y': 8, 'x': 22, 'name': 'grass'}, {'y': 9, 'x': 22, 'name': 'grass'}, {'y': 10, 'x': 22, 'name': 'grass'}, {'y': 11, 'x': 22, 'name': 'grass'}, {'y': 12, 'x': 22, 'name': 'grass'}, {'y': 13, 'x': 22, 'name': 'grass'}, {'y': 14, 'x': 22, 'name': 'grass'}, {'y': 0, 'x': 23, 'name': 'grass'}, {'y': 1, 'x': 23, 'name': 'grass'}, {'y': 2, 'x': 23, 'name': 'grass'}, {'y': 3, 'x': 23, 'name': 'grass'}, {'y': 4, 'x': 23, 'name': 'grass'}, {'y': 5, 'x': 23, 'name': 'grass'}, {'y': 6, 'x': 23, 'name': 'grass'}, {'y': 7, 'x': 23, 'name': 'grass'}, {'y': 8, 'x': 23, 'name': 'grass'}, {'y': 9, 'x': 23, 'name': 'grass'}, {'y': 10, 'x': 23, 'name': 'grass'}, {'y': 11, 'x': 23, 'name': 'grass'}, {'y': 12, 'x': 23, 'name': 'grass'}, {'y': 13, 'x': 23, 'name': 'grass'}, {'y': 14, 'x': 23, 'name': 'grass'}, {'y': 0, 'x': 24, 'name': 'grass'}, {'y': 1, 'x': 24, 'name': 'grass'}, {'y': 2, 'x': 24, 'name': 'grass'}, {'y': 3, 'x': 24, 'name': 'grass'}, {'y': 4, 'x': 24, 'name': 'grass'}, {'y': 5, 'x': 24, 'name': 'grass'}, {'y': 6, 'x': 24, 'name': 'grass'}, {'y': 7, 'x': 24, 'name': 'grass'}, {'y': 8, 'x': 24, 'name': 'grass'}, {'y': 9, 'x': 24, 'name': 'grass'}, {'y': 10, 'x': 24, 'name': 'grass'}, {'y': 11, 'x': 24, 'name': 'grass'}, {'y': 12, 'x': 24, 'name': 'grass'}, {'y': 13, 'x': 24, 'name': 'grass'}, {'y': 14, 'x': 24, 'name': 'grass'}, {'y': 0, 'x': 25, 'name': 'grass'}, {'y': 1, 'x': 25, 'name': 'grass'}, {'y': 2, 'x': 25, 'name': 'grass'}, {'y': 3, 'x': 25, 'name': 'grass'}, {'y': 4, 'x': 25, 'name': 'grass'}, {'y': 5, 'x': 25, 'name': 'grass'}, {'y': 6, 'x': 25, 'name': 'grass'}, {'y': 7, 'x': 25, 'name': 'grass'}, {'y': 8, 'x': 25, 'name': 'grass'}, {'y': 9, 'x': 25, 'name': 'grass'}, {'y': 10, 'x': 25, 'name': 'grass'}, {'y': 11, 'x': 25, 'name': 'grass'}, {'y': 12, 'x': 25, 'name': 'grass'}, {'y': 13, 'x': 25, 'name': 'grass'}, {'y': 14, 'x': 25, 'name': 'grass'}, {'y': 0, 'x': 26, 'name': 'grass'}, {'y': 1, 'x': 26, 'name': 'grass'}, {'y': 2, 'x': 26, 'name': 'grass'}, {'y': 3, 'x': 26, 'name': 'grass'}, {'y': 4, 'x': 26, 'name': 'grass'}, {'y': 5, 'x': 26, 'name': 'grass'}, {'y': 6, 'x': 26, 'name': 'grass'}, {'y': 7, 'x': 26, 'name': 'grass'}, {'y': 8, 'x': 26, 'name': 'grass'}, {'y': 9, 'x': 26, 'name': 'grass'}, {'y': 10, 'x': 26, 'name': 'grass'}, {'y': 11, 'x': 26, 'name': 'grass'}, {'y': 12, 'x': 26, 'name': 'grass'}, {'y': 13, 'x': 26, 'name': 'grass'}, {'y': 14, 'x': 26, 'name': 'grass'}, {'y': 0, 'x': 27, 'name': 'grass'}, {'y': 1, 'x': 27, 'name': 'grass'}, {'y': 2, 'x': 27, 'name': 'grass'}, {'y': 3, 'x': 27, 'name': 'grass'}, {'y': 4, 'x': 27, 'name': 'grass'}, {'y': 5, 'x': 27, 'name': 'grass'}, {'y': 6, 'x': 27, 'name': 'grass'}, {'y': 7, 'x': 27, 'name': 'grass'}, {'y': 8, 'x': 27, 'name': 'grass'}, {'y': 9, 'x': 27, 'name': 'grass'}, {'y': 10, 'x': 27, 'name': 'grass'}, {'y': 11, 'x': 27, 'name': 'grass'}, {'y': 12, 'x': 27, 'name': 'grass'}, {'y': 13, 'x': 27, 'name': 'grass'}, {'y': 14, 'x': 27, 'name': 'grass'}, {'y': 0, 'x': 28, 'name': 'grass'}, {'y': 1, 'x': 28, 'name': 'grass'}, {'y': 2, 'x': 28, 'name': 'grass'}, {'y': 3, 'x': 28, 'name': 'grass'}, {'y': 4, 'x': 28, 'name': 'grass'}, {'y': 5, 'x': 28, 'name': 'grass'}, {'y': 6, 'x': 28, 'name': 'grass'}, {'y': 7, 'x': 28, 'name': 'grass'}, {'y': 8, 'x': 28, 'name': 'grass'}, {'y': 9, 'x': 28, 'name': 'grass'}, {'y': 10, 'x': 28, 'name': 'grass'}, {'y': 11, 'x': 28, 'name': 'grass'}, {'y': 12, 'x': 28, 'name': 'grass'}, {'y': 13, 'x': 28, 'name': 'grass'}, {'y': 14, 'x': 28, 'name': 'grass'}, {'y': 0, 'x': 29, 'name': 'grass'}, {'y': 1, 'x': 29, 'name': 'grass'}, {'y': 2, 'x': 29, 'name': 'grass'}, {'y': 3, 'x': 29, 'name': 'grass'}, {'y': 4, 'x': 29, 'name': 'grass'}, {'y': 5, 'x': 29, 'name': 'grass'}, {'y': 6, 'x': 29, 'name': 'grass'}, {'y': 7, 'x': 29, 'name': 'grass'}, {'y': 8, 'x': 29, 'name': 'grass'}, {'y': 9, 'x': 29, 'name': 'grass'}, {'y': 10, 'x': 29, 'name': 'grass'}, {'y': 11, 'x': 29, 'name': 'grass'}, {'y': 12, 'x': 29, 'name': 'grass'}, {'y': 13, 'x': 29, 'name': 'grass'}, {'y': 14, 'x': 29, 'name': 'grass'}], 'name': 'Hello World', 'w': 30, 'teams': [{'color': 'r', 'name': 'Red'}, {'color': 'b', 'name': 'Blue'}]}, 'history': [[(<core.grid.Grid object at 0x9377dac>, [(0, 4), (1, 4), 'Wait'])]]}\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ q\b\u001b[K./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.save())\u001b[K\r\n\u001b[K\n    \u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data) \u001b[31m#json.dumps(self.data)                            \u001b[39;49m\r\n\u001b[A\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   25% L124  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\r\n\u001b[K\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions\u001b[39;49m\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[15;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[19;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\n\b\b\b\u001b[7m9% L13\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[4;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[10;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[11;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[12;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[13;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[20;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\u001b[23;29H\u001b[7m33% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[16;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[21;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[23;30H\u001b[7m8% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[16;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m43% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[16;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[23;29H\u001b[7m38\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[7;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[10;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[16;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\u001b[23;30H\u001b[7m3% L173\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[20;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[21;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\n\b\b\b\b\u001b[7m29% L154\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[4;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[10;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[11;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[12;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[13;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[20;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\u001b[23;29H\u001b[7m33\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[16;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[21;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[23;30H\u001b[7m8% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[16;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m43% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[20;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[23;30H\u001b[7m7% L210\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[5;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[10;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[17;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[18;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[23;29H\u001b[7m51% L229\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[6;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[14;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[18;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m47\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[5;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[10;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[17;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[18;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[23;29H\u001b[7m51% L229\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[10;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[31m#self.checkpoint = copy.deepcopy(self.grid)                             \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[19;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\n\b\u001b[7m5% L248\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   55% L257\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;13H\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[11;13H\r\t\b\b\b\b\u001b[11;13H\r\t\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\u001b[K\u001b[23;36H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;27H\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history:\r\n\u001b[K\u001b[23;36H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;13H\r\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;27H\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\n\u001b[?25l        actions\u001b[K\u001b[23;36H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[?25l        actions\u001b[K\u001b[23;36H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\r\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[12;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mS\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\r\t\u001b[?25l\u001b[33mactions\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\u001b[K\u001b[23;36H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;13H\r\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\t\b\b\b\b\r\u001b[1;22r\u001b[17;1H\u001b[1M\u001b[1;24r\u001b[16;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\u001b[22;1H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\n\b\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[?25l\u001b[1@,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@c\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@p\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;9H\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action,cp \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history:\r\n\t    actions.append(\u001b[K\u001b[22;1H\u001b[K\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;13H\u001b[?25lactions.append(\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\u001b[22;1H    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[A\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history)\u001b[14;14Hhistory = []\u001b[K\u001b[22;1H    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[A\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[24;1H\u001b[?25lAuto-saving...\u001b[13;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[13;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;13H\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1@[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[?25l])\u001b[13;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;51H\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append([ \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history])\u001b[13;14Hhistory = []\u001b[K\u001b[22;1H    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1M\u001b[1;24r\u001b[11;9H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append([ \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history])\u001b[12;14Hhistory = []\u001b[K\u001b[22;1H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;53H\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[1@ \b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mfo\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1@ \b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@c\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@p\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@)\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[?25l\u001b[1@ \b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mi\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[36mn\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[11;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[11;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 119, in __init__\r\n    raise Exception(self.save())\r\nException: {'grid': {'h': 15, 'cells': [{'y': 0, 'x': 0, 'name': 'grass'}, {'y': 1, 'x': 0, 'name': 'grass'}, {'y': 2, 'x': 0, 'name': 'grass'}, {'y': 3, 'x': 0, 'name': 'grass'}, {'y': 4, 'x': 0, 'name': 'grass', 'unit': {'team': 0, 'name': 'Infantry', 'icon': 'i'}}, {'y': 5, 'x': 0, 'name': 'grass'}, {'y': 6, 'x': 0, 'name': 'grass'}, {'y': 7, 'x': 0, 'name': 'grass'}, {'y': 8, 'x': 0, 'name': 'grass'}, {'y': 9, 'x': 0, 'name': 'grass'}, {'y': 10, 'x': 0, 'name': 'grass'}, {'y': 11, 'x': 0, 'name': 'grass'}, {'y': 12, 'x': 0, 'name': 'grass'}, {'y': 13, 'x': 0, 'name': 'grass'}, {'y': 14, 'x': 0, 'name': 'grass'}, {'y': 0, 'x': 1, 'name': 'grass'}, {'y': 1, 'x': 1, 'name': 'grass'}, {'y': 2, 'x': 1, 'name': 'grass'}, {'y': 3, 'x': 1, 'name': 'grass'}, {'y': 4, 'x': 1, 'name': 'grass'}, {'y': 5, 'x': 1, 'name': 'grass'}, {'y': 6, 'x': 1, 'name': 'grass'}, {'y': 7, 'x': 1, 'name': 'grass'}, {'y': 8, 'x': 1, 'name': 'grass'}, {'y': 9, 'x': 1, 'name': 'grass'}, {'y': 10, 'x': 1, 'name': 'grass'}, {'y': 11, 'x': 1, 'name': 'grass'}, {'y': 12, 'x': 1, 'name': 'grass'}, {'y': 13, 'x': 1, 'name': 'grass'}, {'y': 14, 'x': 1, 'name': 'grass'}, {'y': 0, 'x': 2, 'name': 'grass'}, {'y': 1, 'x': 2, 'name': 'grass'}, {'y': 2, 'x': 2, 'name': 'grass'}, {'y': 3, 'x': 2, 'name': 'grass'}, {'y': 4, 'x': 2, 'name': 'grass'}, {'y': 5, 'x': 2, 'name': 'grass'}, {'y': 6, 'x': 2, 'name': 'grass'}, {'y': 7, 'x': 2, 'name': 'grass'}, {'y': 8, 'x': 2, 'name': 'grass'}, {'y': 9, 'x': 2, 'name': 'grass'}, {'y': 10, 'x': 2, 'name': 'grass', 'unit': {'team': 1, 'name': 'Artillery', 'icon': 'L'}}, {'y': 11, 'x': 2, 'name': 'grass'}, {'y': 12, 'x': 2, 'name': 'grass'}, {'y': 13, 'x': 2, 'name': 'grass'}, {'y': 14, 'x': 2, 'name': 'grass'}, {'y': 0, 'x': 3, 'name': 'grass'}, {'y': 1, 'x': 3, 'name': 'grass'}, {'y': 2, 'x': 3, 'name': 'grass'}, {'y': 3, 'x': 3, 'name': 'grass'}, {'y': 4, 'x': 3, 'name': 'grass'}, {'y': 5, 'x': 3, 'name': 'grass'}, {'y': 6, 'x': 3, 'name': 'grass'}, {'y': 7, 'x': 3, 'name': 'grass'}, {'y': 8, 'x': 3, 'name': 'grass'}, {'y': 9, 'x': 3, 'name': 'grass'}, {'y': 10, 'x': 3, 'name': 'grass'}, {'y': 11, 'x': 3, 'name': 'grass'}, {'y': 12, 'x': 3, 'name': 'grass'}, {'y': 13, 'x': 3, 'name': 'grass'}, {'y': 14, 'x': 3, 'name': 'grass'}, {'y': 0, 'x': 4, 'name': 'grass'}, {'y': 1, 'x': 4, 'name': 'grass'}, {'y': 2, 'x': 4, 'name': 'grass'}, {'y': 3, 'x': 4, 'name': 'grass'}, {'y': 4, 'x': 4, 'name': 'grass'}, {'y': 5, 'x': 4, 'name': 'grass'}, {'y': 6, 'x': 4, 'name': 'grass'}, {'y': 7, 'x': 4, 'name': 'grass'}, {'y': 8, 'x': 4, 'name': 'grass'}, {'y': 9, 'x': 4, 'name': 'grass'}, {'y': 10, 'x': 4, 'name': 'grass'}, {'y': 11, 'x': 4, 'name': 'grass'}, {'y': 12, 'x': 4, 'name': 'grass'}, {'y': 13, 'x': 4, 'name': 'grass'}, {'y': 14, 'x': 4, 'name': 'grass'}, {'y': 0, 'x': 5, 'name': 'grass'}, {'y': 1, 'x': 5, 'name': 'grass'}, {'y': 2, 'x': 5, 'name': 'grass'}, {'y': 3, 'x': 5, 'name': 'grass'}, {'y': 4, 'x': 5, 'name': 'grass'}, {'y': 5, 'x': 5, 'name': 'grass'}, {'y': 6, 'x': 5, 'name': 'grass'}, {'y': 7, 'x': 5, 'name': 'grass'}, {'y': 8, 'x': 5, 'name': 'grass'}, {'y': 9, 'x': 5, 'name': 'grass'}, {'y': 10, 'x': 5, 'name': 'grass'}, {'y': 11, 'x': 5, 'name': 'grass'}, {'y': 12, 'x': 5, 'name': 'grass'}, {'y': 13, 'x': 5, 'name': 'grass'}, {'y': 14, 'x': 5, 'name': 'grass'}, {'y': 0, 'x': 6, 'name': 'grass'}, {'y': 1, 'x': 6, 'name': 'grass'}, {'y': 2, 'x': 6, 'name': 'grass'}, {'y': 3, 'x': 6, 'name': 'grass'}, {'y': 4, 'x': 6, 'name': 'grass'}, {'y': 5, 'x': 6, 'name': 'grass'}, {'y': 6, 'x': 6, 'name': 'grass'}, {'y': 7, 'x': 6, 'name': 'grass'}, {'y': 8, 'x': 6, 'name': 'grass'}, {'y': 9, 'x': 6, 'name': 'grass'}, {'y': 10, 'x': 6, 'name': 'grass'}, {'y': 11, 'x': 6, 'name': 'grass'}, {'y': 12, 'x': 6, 'name': 'grass'}, {'y': 13, 'x': 6, 'name': 'grass'}, {'y': 14, 'x': 6, 'name': 'grass'}, {'y': 0, 'x': 7, 'name': 'grass'}, {'y': 1, 'x': 7, 'name': 'grass'}, {'y': 2, 'x': 7, 'name': 'grass'}, {'y': 3, 'x': 7, 'name': 'grass'}, {'y': 4, 'x': 7, 'name': 'grass'}, {'y': 5, 'x': 7, 'name': 'grass'}, {'y': 6, 'x': 7, 'name': 'grass'}, {'y': 7, 'x': 7, 'name': 'grass'}, {'y': 8, 'x': 7, 'name': 'grass'}, {'y': 9, 'x': 7, 'name': 'grass'}, {'y': 10, 'x': 7, 'name': 'grass'}, {'y': 11, 'x': 7, 'name': 'grass'}, {'y': 12, 'x': 7, 'name': 'grass'}, {'y': 13, 'x': 7, 'name': 'grass'}, {'y': 14, 'x': 7, 'name': 'grass'}, {'y': 0, 'x': 8, 'name': 'grass'}, {'y': 1, 'x': 8, 'name': 'grass'}, {'y': 2, 'x': 8, 'name': 'grass'}, {'y': 3, 'x': 8, 'name': 'grass'}, {'y': 4, 'x': 8, 'name': 'grass'}, {'y': 5, 'x': 8, 'name': 'grass'}, {'y': 6, 'x': 8, 'name': 'grass'}, {'y': 7, 'x': 8, 'name': 'grass'}, {'y': 8, 'x': 8, 'name': 'grass'}, {'y': 9, 'x': 8, 'name': 'grass'}, {'y': 10, 'x': 8, 'name': 'grass'}, {'y': 11, 'x': 8, 'name': 'grass'}, {'y': 12, 'x': 8, 'name': 'grass'}, {'y': 13, 'x': 8, 'name': 'grass'}, {'y': 14, 'x': 8, 'name': 'grass'}, {'y': 0, 'x': 9, 'name': 'grass'}, {'y': 1, 'x': 9, 'name': 'grass'}, {'y': 2, 'x': 9, 'name': 'grass'}, {'y': 3, 'x': 9, 'name': 'grass'}, {'y': 4, 'x': 9, 'name': 'grass'}, {'y': 5, 'x': 9, 'name': 'grass'}, {'y': 6, 'x': 9, 'name': 'grass'}, {'y': 7, 'x': 9, 'name': 'grass'}, {'y': 8, 'x': 9, 'name': 'grass'}, {'y': 9, 'x': 9, 'name': 'grass'}, {'y': 10, 'x': 9, 'name': 'grass'}, {'y': 11, 'x': 9, 'name': 'grass'}, {'y': 12, 'x': 9, 'name': 'grass'}, {'y': 13, 'x': 9, 'name': 'grass'}, {'y': 14, 'x': 9, 'name': 'grass'}, {'y': 0, 'x': 10, 'name': 'grass'}, {'y': 1, 'x': 10, 'name': 'grass'}, {'y': 2, 'x': 10, 'name': 'grass'}, {'y': 3, 'x': 10, 'name': 'grass'}, {'y': 4, 'x': 10, 'name': 'grass'}, {'y': 5, 'x': 10, 'name': 'grass'}, {'y': 6, 'x': 10, 'name': 'grass'}, {'y': 7, 'x': 10, 'name': 'grass'}, {'y': 8, 'x': 10, 'name': 'grass'}, {'y': 9, 'x': 10, 'name': 'grass'}, {'y': 10, 'x': 10, 'name': 'grass'}, {'y': 11, 'x': 10, 'name': 'grass'}, {'y': 12, 'x': 10, 'name': 'grass'}, {'y': 13, 'x': 10, 'name': 'grass'}, {'y': 14, 'x': 10, 'name': 'grass'}, {'y': 0, 'x': 11, 'name': 'grass'}, {'y': 1, 'x': 11, 'name': 'grass'}, {'y': 2, 'x': 11, 'name': 'grass'}, {'y': 3, 'x': 11, 'name': 'grass'}, {'y': 4, 'x': 11, 'name': 'grass'}, {'y': 5, 'x': 11, 'name': 'grass'}, {'y': 6, 'x': 11, 'name': 'grass'}, {'y': 7, 'x': 11, 'name': 'grass'}, {'y': 8, 'x': 11, 'name': 'grass'}, {'y': 9, 'x': 11, 'name': 'grass'}, {'y': 10, 'x': 11, 'name': 'grass'}, {'y': 11, 'x': 11, 'name': 'grass'}, {'y': 12, 'x': 11, 'name': 'grass'}, {'y': 13, 'x': 11, 'name': 'grass'}, {'y': 14, 'x': 11, 'name': 'grass'}, {'y': 0, 'x': 12, 'name': 'grass'}, {'y': 1, 'x': 12, 'name': 'grass'}, {'y': 2, 'x': 12, 'name': 'grass'}, {'y': 3, 'x': 12, 'name': 'grass'}, {'y': 4, 'x': 12, 'name': 'grass'}, {'y': 5, 'x': 12, 'name': 'grass'}, {'y': 6, 'x': 12, 'name': 'grass'}, {'y': 7, 'x': 12, 'name': 'grass'}, {'y': 8, 'x': 12, 'name': 'grass'}, {'y': 9, 'x': 12, 'name': 'grass'}, {'y': 10, 'x': 12, 'name': 'grass'}, {'y': 11, 'x': 12, 'name': 'grass'}, {'y': 12, 'x': 12, 'name': 'grass'}, {'y': 13, 'x': 12, 'name': 'grass'}, {'y': 14, 'x': 12, 'name': 'grass'}, {'y': 0, 'x': 13, 'name': 'grass'}, {'y': 1, 'x': 13, 'name': 'grass'}, {'y': 2, 'x': 13, 'name': 'grass'}, {'y': 3, 'x': 13, 'name': 'grass'}, {'y': 4, 'x': 13, 'name': 'grass'}, {'y': 5, 'x': 13, 'name': 'grass'}, {'y': 6, 'x': 13, 'name': 'grass'}, {'y': 7, 'x': 13, 'name': 'grass'}, {'y': 8, 'x': 13, 'name': 'grass'}, {'y': 9, 'x': 13, 'name': 'grass'}, {'y': 10, 'x': 13, 'name': 'grass'}, {'y': 11, 'x': 13, 'name': 'grass'}, {'y': 12, 'x': 13, 'name': 'grass'}, {'y': 13, 'x': 13, 'name': 'grass'}, {'y': 14, 'x': 13, 'name': 'grass'}, {'y': 0, 'x': 14, 'name': 'grass'}, {'y': 1, 'x': 14, 'name': 'grass'}, {'y': 2, 'x': 14, 'name': 'grass'}, {'y': 3, 'x': 14, 'name': 'grass'}, {'y': 4, 'x': 14, 'name': 'grass'}, {'y': 5, 'x': 14, 'name': 'grass'}, {'y': 6, 'x': 14, 'name': 'grass'}, {'y': 7, 'x': 14, 'name': 'grass'}, {'y': 8, 'x': 14, 'name': 'grass'}, {'y': 9, 'x': 14, 'name': 'grass'}, {'y': 10, 'x': 14, 'name': 'grass'}, {'y': 11, 'x': 14, 'name': 'grass'}, {'y': 12, 'x': 14, 'name': 'grass'}, {'y': 13, 'x': 14, 'name': 'grass'}, {'y': 14, 'x': 14, 'name': 'grass'}, {'y': 0, 'x': 15, 'name': 'grass'}, {'y': 1, 'x': 15, 'name': 'grass'}, {'y': 2, 'x': 15, 'name': 'grass'}, {'y': 3, 'x': 15, 'name': 'grass'}, {'y': 4, 'x': 15, 'name': 'grass'}, {'y': 5, 'x': 15, 'name': 'grass'}, {'y': 6, 'x': 15, 'name': 'grass'}, {'y': 7, 'x': 15, 'name': 'grass'}, {'y': 8, 'x': 15, 'name': 'grass'}, {'y': 9, 'x': 15, 'name': 'grass'}, {'y': 10, 'x': 15, 'name': 'grass'}, {'y': 11, 'x': 15, 'name': 'grass'}, {'y': 12, 'x': 15, 'name': 'grass'}, {'y': 13, 'x': 15, 'name': 'grass'}, {'y': 14, 'x': 15, 'name': 'grass'}, {'y': 0, 'x': 16, 'name': 'grass'}, {'y': 1, 'x': 16, 'name': 'grass'}, {'y': 2, 'x': 16, 'name': 'grass'}, {'y': 3, 'x': 16, 'name': 'grass'}, {'y': 4, 'x': 16, 'name': 'grass'}, {'y': 5, 'x': 16, 'name': 'grass'}, {'y': 6, 'x': 16, 'name': 'grass'}, {'y': 7, 'x': 16, 'name': 'grass'}, {'y': 8, 'x': 16, 'name': 'grass'}, {'y': 9, 'x': 16, 'name': 'grass'}, {'y': 10, 'x': 16, 'name': 'grass'}, {'y': 11, 'x': 16, 'name': 'grass'}, {'y': 12, 'x': 16, 'name': 'grass'}, {'y': 13, 'x': 16, 'name': 'grass'}, {'y': 14, 'x': 16, 'name': 'grass'}, {'y': 0, 'x': 17, 'name': 'grass'}, {'y': 1, 'x': 17, 'name': 'grass'}, {'y': 2, 'x': 17, 'name': 'grass'}, {'y': 3, 'x': 17, 'name': 'grass'}, {'y': 4, 'x': 17, 'name': 'grass'}, {'y': 5, 'x': 17, 'name': 'grass'}, {'y': 6, 'x': 17, 'name': 'grass'}, {'y': 7, 'x': 17, 'name': 'grass'}, {'y': 8, 'x': 17, 'name': 'grass'}, {'y': 9, 'x': 17, 'name': 'grass'}, {'y': 10, 'x': 17, 'name': 'grass'}, {'y': 11, 'x': 17, 'name': 'grass'}, {'y': 12, 'x': 17, 'name': 'grass'}, {'y': 13, 'x': 17, 'name': 'grass'}, {'y': 14, 'x': 17, 'name': 'grass'}, {'y': 0, 'x': 18, 'name': 'grass'}, {'y': 1, 'x': 18, 'name': 'grass'}, {'y': 2, 'x': 18, 'name': 'grass'}, {'y': 3, 'x': 18, 'name': 'grass'}, {'y': 4, 'x': 18, 'name': 'grass'}, {'y': 5, 'x': 18, 'name': 'grass'}, {'y': 6, 'x': 18, 'name': 'grass'}, {'y': 7, 'x': 18, 'name': 'grass'}, {'y': 8, 'x': 18, 'name': 'grass'}, {'y': 9, 'x': 18, 'name': 'grass'}, {'y': 10, 'x': 18, 'name': 'grass'}, {'y': 11, 'x': 18, 'name': 'grass'}, {'y': 12, 'x': 18, 'name': 'grass'}, {'y': 13, 'x': 18, 'name': 'grass'}, {'y': 14, 'x': 18, 'name': 'grass'}, {'y': 0, 'x': 19, 'name': 'grass'}, {'y': 1, 'x': 19, 'name': 'grass'}, {'y': 2, 'x': 19, 'name': 'grass'}, {'y': 3, 'x': 19, 'name': 'grass'}, {'y': 4, 'x': 19, 'name': 'grass'}, {'y': 5, 'x': 19, 'name': 'grass'}, {'y': 6, 'x': 19, 'name': 'grass'}, {'y': 7, 'x': 19, 'name': 'grass'}, {'y': 8, 'x': 19, 'name': 'grass'}, {'y': 9, 'x': 19, 'name': 'grass'}, {'y': 10, 'x': 19, 'name': 'grass'}, {'y': 11, 'x': 19, 'name': 'grass'}, {'y': 12, 'x': 19, 'name': 'grass'}, {'y': 13, 'x': 19, 'name': 'grass'}, {'y': 14, 'x': 19, 'name': 'grass'}, {'y': 0, 'x': 20, 'name': 'grass'}, {'y': 1, 'x': 20, 'name': 'grass'}, {'y': 2, 'x': 20, 'name': 'grass'}, {'y': 3, 'x': 20, 'name': 'grass'}, {'y': 4, 'x': 20, 'name': 'grass'}, {'y': 5, 'x': 20, 'name': 'grass'}, {'y': 6, 'x': 20, 'name': 'grass'}, {'y': 7, 'x': 20, 'name': 'grass'}, {'y': 8, 'x': 20, 'name': 'grass'}, {'y': 9, 'x': 20, 'name': 'grass'}, {'y': 10, 'x': 20, 'name': 'grass'}, {'y': 11, 'x': 20, 'name': 'grass'}, {'y': 12, 'x': 20, 'name': 'grass'}, {'y': 13, 'x': 20, 'name': 'grass'}, {'y': 14, 'x': 20, 'name': 'grass'}, {'y': 0, 'x': 21, 'name': 'grass'}, {'y': 1, 'x': 21, 'name': 'grass'}, {'y': 2, 'x': 21, 'name': 'grass'}, {'y': 3, 'x': 21, 'name': 'grass'}, {'y': 4, 'x': 21, 'name': 'grass'}, {'y': 5, 'x': 21, 'name': 'grass'}, {'y': 6, 'x': 21, 'name': 'grass'}, {'y': 7, 'x': 21, 'name': 'grass'}, {'y': 8, 'x': 21, 'name': 'grass'}, {'y': 9, 'x': 21, 'name': 'grass'}, {'y': 10, 'x': 21, 'name': 'grass'}, {'y': 11, 'x': 21, 'name': 'grass'}, {'y': 12, 'x': 21, 'name': 'grass'}, {'y': 13, 'x': 21, 'name': 'grass'}, {'y': 14, 'x': 21, 'name': 'grass'}, {'y': 0, 'x': 22, 'name': 'grass'}, {'y': 1, 'x': 22, 'name': 'grass'}, {'y': 2, 'x': 22, 'name': 'grass'}, {'y': 3, 'x': 22, 'name': 'grass'}, {'y': 4, 'x': 22, 'name': 'grass'}, {'y': 5, 'x': 22, 'name': 'grass'}, {'y': 6, 'x': 22, 'name': 'grass'}, {'y': 7, 'x': 22, 'name': 'grass'}, {'y': 8, 'x': 22, 'name': 'grass'}, {'y': 9, 'x': 22, 'name': 'grass'}, {'y': 10, 'x': 22, 'name': 'grass'}, {'y': 11, 'x': 22, 'name': 'grass'}, {'y': 12, 'x': 22, 'name': 'grass'}, {'y': 13, 'x': 22, 'name': 'grass'}, {'y': 14, 'x': 22, 'name': 'grass'}, {'y': 0, 'x': 23, 'name': 'grass'}, {'y': 1, 'x': 23, 'name': 'grass'}, {'y': 2, 'x': 23, 'name': 'grass'}, {'y': 3, 'x': 23, 'name': 'grass'}, {'y': 4, 'x': 23, 'name': 'grass'}, {'y': 5, 'x': 23, 'name': 'grass'}, {'y': 6, 'x': 23, 'name': 'grass'}, {'y': 7, 'x': 23, 'name': 'grass'}, {'y': 8, 'x': 23, 'name': 'grass'}, {'y': 9, 'x': 23, 'name': 'grass'}, {'y': 10, 'x': 23, 'name': 'grass'}, {'y': 11, 'x': 23, 'name': 'grass'}, {'y': 12, 'x': 23, 'name': 'grass'}, {'y': 13, 'x': 23, 'name': 'grass'}, {'y': 14, 'x': 23, 'name': 'grass'}, {'y': 0, 'x': 24, 'name': 'grass'}, {'y': 1, 'x': 24, 'name': 'grass'}, {'y': 2, 'x': 24, 'name': 'grass'}, {'y': 3, 'x': 24, 'name': 'grass'}, {'y': 4, 'x': 24, 'name': 'grass'}, {'y': 5, 'x': 24, 'name': 'grass'}, {'y': 6, 'x': 24, 'name': 'grass'}, {'y': 7, 'x': 24, 'name': 'grass'}, {'y': 8, 'x': 24, 'name': 'grass'}, {'y': 9, 'x': 24, 'name': 'grass'}, {'y': 10, 'x': 24, 'name': 'grass'}, {'y': 11, 'x': 24, 'name': 'grass'}, {'y': 12, 'x': 24, 'name': 'grass'}, {'y': 13, 'x': 24, 'name': 'grass'}, {'y': 14, 'x': 24, 'name': 'grass'}, {'y': 0, 'x': 25, 'name': 'grass'}, {'y': 1, 'x': 25, 'name': 'grass'}, {'y': 2, 'x': 25, 'name': 'grass'}, {'y': 3, 'x': 25, 'name': 'grass'}, {'y': 4, 'x': 25, 'name': 'grass'}, {'y': 5, 'x': 25, 'name': 'grass'}, {'y': 6, 'x': 25, 'name': 'grass'}, {'y': 7, 'x': 25, 'name': 'grass'}, {'y': 8, 'x': 25, 'name': 'grass'}, {'y': 9, 'x': 25, 'name': 'grass'}, {'y': 10, 'x': 25, 'name': 'grass'}, {'y': 11, 'x': 25, 'name': 'grass'}, {'y': 12, 'x': 25, 'name': 'grass'}, {'y': 13, 'x': 25, 'name': 'grass'}, {'y': 14, 'x': 25, 'name': 'grass'}, {'y': 0, 'x': 26, 'name': 'grass'}, {'y': 1, 'x': 26, 'name': 'grass'}, {'y': 2, 'x': 26, 'name': 'grass'}, {'y': 3, 'x': 26, 'name': 'grass'}, {'y': 4, 'x': 26, 'name': 'grass'}, {'y': 5, 'x': 26, 'name': 'grass'}, {'y': 6, 'x': 26, 'name': 'grass'}, {'y': 7, 'x': 26, 'name': 'grass'}, {'y': 8, 'x': 26, 'name': 'grass'}, {'y': 9, 'x': 26, 'name': 'grass'}, {'y': 10, 'x': 26, 'name': 'grass'}, {'y': 11, 'x': 26, 'name': 'grass'}, {'y': 12, 'x': 26, 'name': 'grass'}, {'y': 13, 'x': 26, 'name': 'grass'}, {'y': 14, 'x': 26, 'name': 'grass'}, {'y': 0, 'x': 27, 'name': 'grass'}, {'y': 1, 'x': 27, 'name': 'grass'}, {'y': 2, 'x': 27, 'name': 'grass'}, {'y': 3, 'x': 27, 'name': 'grass'}, {'y': 4, 'x': 27, 'name': 'grass'}, {'y': 5, 'x': 27, 'name': 'grass'}, {'y': 6, 'x': 27, 'name': 'grass'}, {'y': 7, 'x': 27, 'name': 'grass'}, {'y': 8, 'x': 27, 'name': 'grass'}, {'y': 9, 'x': 27, 'name': 'grass'}, {'y': 10, 'x': 27, 'name': 'grass'}, {'y': 11, 'x': 27, 'name': 'grass'}, {'y': 12, 'x': 27, 'name': 'grass'}, {'y': 13, 'x': 27, 'name': 'grass'}, {'y': 14, 'x': 27, 'name': 'grass'}, {'y': 0, 'x': 28, 'name': 'grass'}, {'y': 1, 'x': 28, 'name': 'grass'}, {'y': 2, 'x': 28, 'name': 'grass'}, {'y': 3, 'x': 28, 'name': 'grass'}, {'y': 4, 'x': 28, 'name': 'grass'}, {'y': 5, 'x': 28, 'name': 'grass'}, {'y': 6, 'x': 28, 'name': 'grass'}, {'y': 7, 'x': 28, 'name': 'grass'}, {'y': 8, 'x': 28, 'name': 'grass'}, {'y': 9, 'x': 28, 'name': 'grass'}, {'y': 10, 'x': 28, 'name': 'grass'}, {'y': 11, 'x': 28, 'name': 'grass'}, {'y': 12, 'x': 28, 'name': 'grass'}, {'y': 13, 'x': 28, 'name': 'grass'}, {'y': 14, 'x': 28, 'name': 'grass'}, {'y': 0, 'x': 29, 'name': 'grass'}, {'y': 1, 'x': 29, 'name': 'grass'}, {'y': 2, 'x': 29, 'name': 'grass'}, {'y': 3, 'x': 29, 'name': 'grass'}, {'y': 4, 'x': 29, 'name': 'grass'}, {'y': 5, 'x': 29, 'name': 'grass'}, {'y': 6, 'x': 29, 'name': 'grass'}, {'y': 7, 'x': 29, 'name': 'grass'}, {'y': 8, 'x': 29, 'name': 'grass'}, {'y': 9, 'x': 29, 'name': 'grass'}, {'y': 10, 'x': 29, 'name': 'grass'}, {'y': 11, 'x': 29, 'name': 'grass'}, {'y': 12, 'x': 29, 'name': 'grass'}, {'y': 13, 'x': 29, 'name': 'grass'}, {'y': 14, 'x': 29, 'name': 'grass'}], 'name': 'Hello World', 'w': 30, 'teams': [{'color': 'r', 'name': 'Red'}, {'color': 'b', 'name': 'Blue'}]}, 'history': [[<core.grid.Grid object at 0x8ea9d8c>]]}\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n    \u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\r\n            \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append([a \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (a,c) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history])\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[31m#self.checkpoint = copy.deepcopy(self.grid)                             \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   55% L257  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[11;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[10;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[19;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[23;30H\u001b[7m1% L249\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[6;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[14;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[18;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m47% L230\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[5;7H\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[10;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[14;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[17;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[18;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[23;29H\u001b[7m51\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[10;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append([a \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (a,c) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history])\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[31m#self.checkpoint = copy.deepcopy(self.grid)                             \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[19;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\n\b\u001b[7m5% L248\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;3H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\b\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@c\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[11;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[11;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;48H\u001b[?25l\u001b[1@c\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@c\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@o\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[?25l\u001b[1@p\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[11;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[11;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 119, in __init__\r\n    raise Exception(self.save())\r\nException: {'grid': {'h': 15, 'cells': [{'y': 0, 'x': 0, 'name': 'grass'}, {'y': 1, 'x': 0, 'name': 'grass'}, {'y': 2, 'x': 0, 'name': 'grass'}, {'y': 3, 'x': 0, 'name': 'grass'}, {'y': 4, 'x': 0, 'name': 'grass', 'unit': {'team': 0, 'name': 'Infantry', 'icon': 'i'}}, {'y': 5, 'x': 0, 'name': 'grass'}, {'y': 6, 'x': 0, 'name': 'grass'}, {'y': 7, 'x': 0, 'name': 'grass'}, {'y': 8, 'x': 0, 'name': 'grass'}, {'y': 9, 'x': 0, 'name': 'grass'}, {'y': 10, 'x': 0, 'name': 'grass'}, {'y': 11, 'x': 0, 'name': 'grass'}, {'y': 12, 'x': 0, 'name': 'grass'}, {'y': 13, 'x': 0, 'name': 'grass'}, {'y': 14, 'x': 0, 'name': 'grass'}, {'y': 0, 'x': 1, 'name': 'grass'}, {'y': 1, 'x': 1, 'name': 'grass'}, {'y': 2, 'x': 1, 'name': 'grass'}, {'y': 3, 'x': 1, 'name': 'grass'}, {'y': 4, 'x': 1, 'name': 'grass'}, {'y': 5, 'x': 1, 'name': 'grass'}, {'y': 6, 'x': 1, 'name': 'grass'}, {'y': 7, 'x': 1, 'name': 'grass'}, {'y': 8, 'x': 1, 'name': 'grass'}, {'y': 9, 'x': 1, 'name': 'grass'}, {'y': 10, 'x': 1, 'name': 'grass'}, {'y': 11, 'x': 1, 'name': 'grass'}, {'y': 12, 'x': 1, 'name': 'grass'}, {'y': 13, 'x': 1, 'name': 'grass'}, {'y': 14, 'x': 1, 'name': 'grass'}, {'y': 0, 'x': 2, 'name': 'grass'}, {'y': 1, 'x': 2, 'name': 'grass'}, {'y': 2, 'x': 2, 'name': 'grass'}, {'y': 3, 'x': 2, 'name': 'grass'}, {'y': 4, 'x': 2, 'name': 'grass'}, {'y': 5, 'x': 2, 'name': 'grass'}, {'y': 6, 'x': 2, 'name': 'grass'}, {'y': 7, 'x': 2, 'name': 'grass'}, {'y': 8, 'x': 2, 'name': 'grass'}, {'y': 9, 'x': 2, 'name': 'grass'}, {'y': 10, 'x': 2, 'name': 'grass', 'unit': {'team': 1, 'name': 'Artillery', 'icon': 'L'}}, {'y': 11, 'x': 2, 'name': 'grass'}, {'y': 12, 'x': 2, 'name': 'grass'}, {'y': 13, 'x': 2, 'name': 'grass'}, {'y': 14, 'x': 2, 'name': 'grass'}, {'y': 0, 'x': 3, 'name': 'grass'}, {'y': 1, 'x': 3, 'name': 'grass'}, {'y': 2, 'x': 3, 'name': 'grass'}, {'y': 3, 'x': 3, 'name': 'grass'}, {'y': 4, 'x': 3, 'name': 'grass'}, {'y': 5, 'x': 3, 'name': 'grass'}, {'y': 6, 'x': 3, 'name': 'grass'}, {'y': 7, 'x': 3, 'name': 'grass'}, {'y': 8, 'x': 3, 'name': 'grass'}, {'y': 9, 'x': 3, 'name': 'grass'}, {'y': 10, 'x': 3, 'name': 'grass'}, {'y': 11, 'x': 3, 'name': 'grass'}, {'y': 12, 'x': 3, 'name': 'grass'}, {'y': 13, 'x': 3, 'name': 'grass'}, {'y': 14, 'x': 3, 'name': 'grass'}, {'y': 0, 'x': 4, 'name': 'grass'}, {'y': 1, 'x': 4, 'name': 'grass'}, {'y': 2, 'x': 4, 'name': 'grass'}, {'y': 3, 'x': 4, 'name': 'grass'}, {'y': 4, 'x': 4, 'name': 'grass'}, {'y': 5, 'x': 4, 'name': 'grass'}, {'y': 6, 'x': 4, 'name': 'grass'}, {'y': 7, 'x': 4, 'name': 'grass'}, {'y': 8, 'x': 4, 'name': 'grass'}, {'y': 9, 'x': 4, 'name': 'grass'}, {'y': 10, 'x': 4, 'name': 'grass'}, {'y': 11, 'x': 4, 'name': 'grass'}, {'y': 12, 'x': 4, 'name': 'grass'}, {'y': 13, 'x': 4, 'name': 'grass'}, {'y': 14, 'x': 4, 'name': 'grass'}, {'y': 0, 'x': 5, 'name': 'grass'}, {'y': 1, 'x': 5, 'name': 'grass'}, {'y': 2, 'x': 5, 'name': 'grass'}, {'y': 3, 'x': 5, 'name': 'grass'}, {'y': 4, 'x': 5, 'name': 'grass'}, {'y': 5, 'x': 5, 'name': 'grass'}, {'y': 6, 'x': 5, 'name': 'grass'}, {'y': 7, 'x': 5, 'name': 'grass'}, {'y': 8, 'x': 5, 'name': 'grass'}, {'y': 9, 'x': 5, 'name': 'grass'}, {'y': 10, 'x': 5, 'name': 'grass'}, {'y': 11, 'x': 5, 'name': 'grass'}, {'y': 12, 'x': 5, 'name': 'grass'}, {'y': 13, 'x': 5, 'name': 'grass'}, {'y': 14, 'x': 5, 'name': 'grass'}, {'y': 0, 'x': 6, 'name': 'grass'}, {'y': 1, 'x': 6, 'name': 'grass'}, {'y': 2, 'x': 6, 'name': 'grass'}, {'y': 3, 'x': 6, 'name': 'grass'}, {'y': 4, 'x': 6, 'name': 'grass'}, {'y': 5, 'x': 6, 'name': 'grass'}, {'y': 6, 'x': 6, 'name': 'grass'}, {'y': 7, 'x': 6, 'name': 'grass'}, {'y': 8, 'x': 6, 'name': 'grass'}, {'y': 9, 'x': 6, 'name': 'grass'}, {'y': 10, 'x': 6, 'name': 'grass'}, {'y': 11, 'x': 6, 'name': 'grass'}, {'y': 12, 'x': 6, 'name': 'grass'}, {'y': 13, 'x': 6, 'name': 'grass'}, {'y': 14, 'x': 6, 'name': 'grass'}, {'y': 0, 'x': 7, 'name': 'grass'}, {'y': 1, 'x': 7, 'name': 'grass'}, {'y': 2, 'x': 7, 'name': 'grass'}, {'y': 3, 'x': 7, 'name': 'grass'}, {'y': 4, 'x': 7, 'name': 'grass'}, {'y': 5, 'x': 7, 'name': 'grass'}, {'y': 6, 'x': 7, 'name': 'grass'}, {'y': 7, 'x': 7, 'name': 'grass'}, {'y': 8, 'x': 7, 'name': 'grass'}, {'y': 9, 'x': 7, 'name': 'grass'}, {'y': 10, 'x': 7, 'name': 'grass'}, {'y': 11, 'x': 7, 'name': 'grass'}, {'y': 12, 'x': 7, 'name': 'grass'}, {'y': 13, 'x': 7, 'name': 'grass'}, {'y': 14, 'x': 7, 'name': 'grass'}, {'y': 0, 'x': 8, 'name': 'grass'}, {'y': 1, 'x': 8, 'name': 'grass'}, {'y': 2, 'x': 8, 'name': 'grass'}, {'y': 3, 'x': 8, 'name': 'grass'}, {'y': 4, 'x': 8, 'name': 'grass'}, {'y': 5, 'x': 8, 'name': 'grass'}, {'y': 6, 'x': 8, 'name': 'grass'}, {'y': 7, 'x': 8, 'name': 'grass'}, {'y': 8, 'x': 8, 'name': 'grass'}, {'y': 9, 'x': 8, 'name': 'grass'}, {'y': 10, 'x': 8, 'name': 'grass'}, {'y': 11, 'x': 8, 'name': 'grass'}, {'y': 12, 'x': 8, 'name': 'grass'}, {'y': 13, 'x': 8, 'name': 'grass'}, {'y': 14, 'x': 8, 'name': 'grass'}, {'y': 0, 'x': 9, 'name': 'grass'}, {'y': 1, 'x': 9, 'name': 'grass'}, {'y': 2, 'x': 9, 'name': 'grass'}, {'y': 3, 'x': 9, 'name': 'grass'}, {'y': 4, 'x': 9, 'name': 'grass'}, {'y': 5, 'x': 9, 'name': 'grass'}, {'y': 6, 'x': 9, 'name': 'grass'}, {'y': 7, 'x': 9, 'name': 'grass'}, {'y': 8, 'x': 9, 'name': 'grass'}, {'y': 9, 'x': 9, 'name': 'grass'}, {'y': 10, 'x': 9, 'name': 'grass'}, {'y': 11, 'x': 9, 'name': 'grass'}, {'y': 12, 'x': 9, 'name': 'grass'}, {'y': 13, 'x': 9, 'name': 'grass'}, {'y': 14, 'x': 9, 'name': 'grass'}, {'y': 0, 'x': 10, 'name': 'grass'}, {'y': 1, 'x': 10, 'name': 'grass'}, {'y': 2, 'x': 10, 'name': 'grass'}, {'y': 3, 'x': 10, 'name': 'grass'}, {'y': 4, 'x': 10, 'name': 'grass'}, {'y': 5, 'x': 10, 'name': 'grass'}, {'y': 6, 'x': 10, 'name': 'grass'}, {'y': 7, 'x': 10, 'name': 'grass'}, {'y': 8, 'x': 10, 'name': 'grass'}, {'y': 9, 'x': 10, 'name': 'grass'}, {'y': 10, 'x': 10, 'name': 'grass'}, {'y': 11, 'x': 10, 'name': 'grass'}, {'y': 12, 'x': 10, 'name': 'grass'}, {'y': 13, 'x': 10, 'name': 'grass'}, {'y': 14, 'x': 10, 'name': 'grass'}, {'y': 0, 'x': 11, 'name': 'grass'}, {'y': 1, 'x': 11, 'name': 'grass'}, {'y': 2, 'x': 11, 'name': 'grass'}, {'y': 3, 'x': 11, 'name': 'grass'}, {'y': 4, 'x': 11, 'name': 'grass'}, {'y': 5, 'x': 11, 'name': 'grass'}, {'y': 6, 'x': 11, 'name': 'grass'}, {'y': 7, 'x': 11, 'name': 'grass'}, {'y': 8, 'x': 11, 'name': 'grass'}, {'y': 9, 'x': 11, 'name': 'grass'}, {'y': 10, 'x': 11, 'name': 'grass'}, {'y': 11, 'x': 11, 'name': 'grass'}, {'y': 12, 'x': 11, 'name': 'grass'}, {'y': 13, 'x': 11, 'name': 'grass'}, {'y': 14, 'x': 11, 'name': 'grass'}, {'y': 0, 'x': 12, 'name': 'grass'}, {'y': 1, 'x': 12, 'name': 'grass'}, {'y': 2, 'x': 12, 'name': 'grass'}, {'y': 3, 'x': 12, 'name': 'grass'}, {'y': 4, 'x': 12, 'name': 'grass'}, {'y': 5, 'x': 12, 'name': 'grass'}, {'y': 6, 'x': 12, 'name': 'grass'}, {'y': 7, 'x': 12, 'name': 'grass'}, {'y': 8, 'x': 12, 'name': 'grass'}, {'y': 9, 'x': 12, 'name': 'grass'}, {'y': 10, 'x': 12, 'name': 'grass'}, {'y': 11, 'x': 12, 'name': 'grass'}, {'y': 12, 'x': 12, 'name': 'grass'}, {'y': 13, 'x': 12, 'name': 'grass'}, {'y': 14, 'x': 12, 'name': 'grass'}, {'y': 0, 'x': 13, 'name': 'grass'}, {'y': 1, 'x': 13, 'name': 'grass'}, {'y': 2, 'x': 13, 'name': 'grass'}, {'y': 3, 'x': 13, 'name': 'grass'}, {'y': 4, 'x': 13, 'name': 'grass'}, {'y': 5, 'x': 13, 'name': 'grass'}, {'y': 6, 'x': 13, 'name': 'grass'}, {'y': 7, 'x': 13, 'name': 'grass'}, {'y': 8, 'x': 13, 'name': 'grass'}, {'y': 9, 'x': 13, 'name': 'grass'}, {'y': 10, 'x': 13, 'name': 'grass'}, {'y': 11, 'x': 13, 'name': 'grass'}, {'y': 12, 'x': 13, 'name': 'grass'}, {'y': 13, 'x': 13, 'name': 'grass'}, {'y': 14, 'x': 13, 'name': 'grass'}, {'y': 0, 'x': 14, 'name': 'grass'}, {'y': 1, 'x': 14, 'name': 'grass'}, {'y': 2, 'x': 14, 'name': 'grass'}, {'y': 3, 'x': 14, 'name': 'grass'}, {'y': 4, 'x': 14, 'name': 'grass'}, {'y': 5, 'x': 14, 'name': 'grass'}, {'y': 6, 'x': 14, 'name': 'grass'}, {'y': 7, 'x': 14, 'name': 'grass'}, {'y': 8, 'x': 14, 'name': 'grass'}, {'y': 9, 'x': 14, 'name': 'grass'}, {'y': 10, 'x': 14, 'name': 'grass'}, {'y': 11, 'x': 14, 'name': 'grass'}, {'y': 12, 'x': 14, 'name': 'grass'}, {'y': 13, 'x': 14, 'name': 'grass'}, {'y': 14, 'x': 14, 'name': 'grass'}, {'y': 0, 'x': 15, 'name': 'grass'}, {'y': 1, 'x': 15, 'name': 'grass'}, {'y': 2, 'x': 15, 'name': 'grass'}, {'y': 3, 'x': 15, 'name': 'grass'}, {'y': 4, 'x': 15, 'name': 'grass'}, {'y': 5, 'x': 15, 'name': 'grass'}, {'y': 6, 'x': 15, 'name': 'grass'}, {'y': 7, 'x': 15, 'name': 'grass'}, {'y': 8, 'x': 15, 'name': 'grass'}, {'y': 9, 'x': 15, 'name': 'grass'}, {'y': 10, 'x': 15, 'name': 'grass'}, {'y': 11, 'x': 15, 'name': 'grass'}, {'y': 12, 'x': 15, 'name': 'grass'}, {'y': 13, 'x': 15, 'name': 'grass'}, {'y': 14, 'x': 15, 'name': 'grass'}, {'y': 0, 'x': 16, 'name': 'grass'}, {'y': 1, 'x': 16, 'name': 'grass'}, {'y': 2, 'x': 16, 'name': 'grass'}, {'y': 3, 'x': 16, 'name': 'grass'}, {'y': 4, 'x': 16, 'name': 'grass'}, {'y': 5, 'x': 16, 'name': 'grass'}, {'y': 6, 'x': 16, 'name': 'grass'}, {'y': 7, 'x': 16, 'name': 'grass'}, {'y': 8, 'x': 16, 'name': 'grass'}, {'y': 9, 'x': 16, 'name': 'grass'}, {'y': 10, 'x': 16, 'name': 'grass'}, {'y': 11, 'x': 16, 'name': 'grass'}, {'y': 12, 'x': 16, 'name': 'grass'}, {'y': 13, 'x': 16, 'name': 'grass'}, {'y': 14, 'x': 16, 'name': 'grass'}, {'y': 0, 'x': 17, 'name': 'grass'}, {'y': 1, 'x': 17, 'name': 'grass'}, {'y': 2, 'x': 17, 'name': 'grass'}, {'y': 3, 'x': 17, 'name': 'grass'}, {'y': 4, 'x': 17, 'name': 'grass'}, {'y': 5, 'x': 17, 'name': 'grass'}, {'y': 6, 'x': 17, 'name': 'grass'}, {'y': 7, 'x': 17, 'name': 'grass'}, {'y': 8, 'x': 17, 'name': 'grass'}, {'y': 9, 'x': 17, 'name': 'grass'}, {'y': 10, 'x': 17, 'name': 'grass'}, {'y': 11, 'x': 17, 'name': 'grass'}, {'y': 12, 'x': 17, 'name': 'grass'}, {'y': 13, 'x': 17, 'name': 'grass'}, {'y': 14, 'x': 17, 'name': 'grass'}, {'y': 0, 'x': 18, 'name': 'grass'}, {'y': 1, 'x': 18, 'name': 'grass'}, {'y': 2, 'x': 18, 'name': 'grass'}, {'y': 3, 'x': 18, 'name': 'grass'}, {'y': 4, 'x': 18, 'name': 'grass'}, {'y': 5, 'x': 18, 'name': 'grass'}, {'y': 6, 'x': 18, 'name': 'grass'}, {'y': 7, 'x': 18, 'name': 'grass'}, {'y': 8, 'x': 18, 'name': 'grass'}, {'y': 9, 'x': 18, 'name': 'grass'}, {'y': 10, 'x': 18, 'name': 'grass'}, {'y': 11, 'x': 18, 'name': 'grass'}, {'y': 12, 'x': 18, 'name': 'grass'}, {'y': 13, 'x': 18, 'name': 'grass'}, {'y': 14, 'x': 18, 'name': 'grass'}, {'y': 0, 'x': 19, 'name': 'grass'}, {'y': 1, 'x': 19, 'name': 'grass'}, {'y': 2, 'x': 19, 'name': 'grass'}, {'y': 3, 'x': 19, 'name': 'grass'}, {'y': 4, 'x': 19, 'name': 'grass'}, {'y': 5, 'x': 19, 'name': 'grass'}, {'y': 6, 'x': 19, 'name': 'grass'}, {'y': 7, 'x': 19, 'name': 'grass'}, {'y': 8, 'x': 19, 'name': 'grass'}, {'y': 9, 'x': 19, 'name': 'grass'}, {'y': 10, 'x': 19, 'name': 'grass'}, {'y': 11, 'x': 19, 'name': 'grass'}, {'y': 12, 'x': 19, 'name': 'grass'}, {'y': 13, 'x': 19, 'name': 'grass'}, {'y': 14, 'x': 19, 'name': 'grass'}, {'y': 0, 'x': 20, 'name': 'grass'}, {'y': 1, 'x': 20, 'name': 'grass'}, {'y': 2, 'x': 20, 'name': 'grass'}, {'y': 3, 'x': 20, 'name': 'grass'}, {'y': 4, 'x': 20, 'name': 'grass'}, {'y': 5, 'x': 20, 'name': 'grass'}, {'y': 6, 'x': 20, 'name': 'grass'}, {'y': 7, 'x': 20, 'name': 'grass'}, {'y': 8, 'x': 20, 'name': 'grass'}, {'y': 9, 'x': 20, 'name': 'grass'}, {'y': 10, 'x': 20, 'name': 'grass'}, {'y': 11, 'x': 20, 'name': 'grass'}, {'y': 12, 'x': 20, 'name': 'grass'}, {'y': 13, 'x': 20, 'name': 'grass'}, {'y': 14, 'x': 20, 'name': 'grass'}, {'y': 0, 'x': 21, 'name': 'grass'}, {'y': 1, 'x': 21, 'name': 'grass'}, {'y': 2, 'x': 21, 'name': 'grass'}, {'y': 3, 'x': 21, 'name': 'grass'}, {'y': 4, 'x': 21, 'name': 'grass'}, {'y': 5, 'x': 21, 'name': 'grass'}, {'y': 6, 'x': 21, 'name': 'grass'}, {'y': 7, 'x': 21, 'name': 'grass'}, {'y': 8, 'x': 21, 'name': 'grass'}, {'y': 9, 'x': 21, 'name': 'grass'}, {'y': 10, 'x': 21, 'name': 'grass'}, {'y': 11, 'x': 21, 'name': 'grass'}, {'y': 12, 'x': 21, 'name': 'grass'}, {'y': 13, 'x': 21, 'name': 'grass'}, {'y': 14, 'x': 21, 'name': 'grass'}, {'y': 0, 'x': 22, 'name': 'grass'}, {'y': 1, 'x': 22, 'name': 'grass'}, {'y': 2, 'x': 22, 'name': 'grass'}, {'y': 3, 'x': 22, 'name': 'grass'}, {'y': 4, 'x': 22, 'name': 'grass'}, {'y': 5, 'x': 22, 'name': 'grass'}, {'y': 6, 'x': 22, 'name': 'grass'}, {'y': 7, 'x': 22, 'name': 'grass'}, {'y': 8, 'x': 22, 'name': 'grass'}, {'y': 9, 'x': 22, 'name': 'grass'}, {'y': 10, 'x': 22, 'name': 'grass'}, {'y': 11, 'x': 22, 'name': 'grass'}, {'y': 12, 'x': 22, 'name': 'grass'}, {'y': 13, 'x': 22, 'name': 'grass'}, {'y': 14, 'x': 22, 'name': 'grass'}, {'y': 0, 'x': 23, 'name': 'grass'}, {'y': 1, 'x': 23, 'name': 'grass'}, {'y': 2, 'x': 23, 'name': 'grass'}, {'y': 3, 'x': 23, 'name': 'grass'}, {'y': 4, 'x': 23, 'name': 'grass'}, {'y': 5, 'x': 23, 'name': 'grass'}, {'y': 6, 'x': 23, 'name': 'grass'}, {'y': 7, 'x': 23, 'name': 'grass'}, {'y': 8, 'x': 23, 'name': 'grass'}, {'y': 9, 'x': 23, 'name': 'grass'}, {'y': 10, 'x': 23, 'name': 'grass'}, {'y': 11, 'x': 23, 'name': 'grass'}, {'y': 12, 'x': 23, 'name': 'grass'}, {'y': 13, 'x': 23, 'name': 'grass'}, {'y': 14, 'x': 23, 'name': 'grass'}, {'y': 0, 'x': 24, 'name': 'grass'}, {'y': 1, 'x': 24, 'name': 'grass'}, {'y': 2, 'x': 24, 'name': 'grass'}, {'y': 3, 'x': 24, 'name': 'grass'}, {'y': 4, 'x': 24, 'name': 'grass'}, {'y': 5, 'x': 24, 'name': 'grass'}, {'y': 6, 'x': 24, 'name': 'grass'}, {'y': 7, 'x': 24, 'name': 'grass'}, {'y': 8, 'x': 24, 'name': 'grass'}, {'y': 9, 'x': 24, 'name': 'grass'}, {'y': 10, 'x': 24, 'name': 'grass'}, {'y': 11, 'x': 24, 'name': 'grass'}, {'y': 12, 'x': 24, 'name': 'grass'}, {'y': 13, 'x': 24, 'name': 'grass'}, {'y': 14, 'x': 24, 'name': 'grass'}, {'y': 0, 'x': 25, 'name': 'grass'}, {'y': 1, 'x': 25, 'name': 'grass'}, {'y': 2, 'x': 25, 'name': 'grass'}, {'y': 3, 'x': 25, 'name': 'grass'}, {'y': 4, 'x': 25, 'name': 'grass'}, {'y': 5, 'x': 25, 'name': 'grass'}, {'y': 6, 'x': 25, 'name': 'grass'}, {'y': 7, 'x': 25, 'name': 'grass'}, {'y': 8, 'x': 25, 'name': 'grass'}, {'y': 9, 'x': 25, 'name': 'grass'}, {'y': 10, 'x': 25, 'name': 'grass'}, {'y': 11, 'x': 25, 'name': 'grass'}, {'y': 12, 'x': 25, 'name': 'grass'}, {'y': 13, 'x': 25, 'name': 'grass'}, {'y': 14, 'x': 25, 'name': 'grass'}, {'y': 0, 'x': 26, 'name': 'grass'}, {'y': 1, 'x': 26, 'name': 'grass'}, {'y': 2, 'x': 26, 'name': 'grass'}, {'y': 3, 'x': 26, 'name': 'grass'}, {'y': 4, 'x': 26, 'name': 'grass'}, {'y': 5, 'x': 26, 'name': 'grass'}, {'y': 6, 'x': 26, 'name': 'grass'}, {'y': 7, 'x': 26, 'name': 'grass'}, {'y': 8, 'x': 26, 'name': 'grass'}, {'y': 9, 'x': 26, 'name': 'grass'}, {'y': 10, 'x': 26, 'name': 'grass'}, {'y': 11, 'x': 26, 'name': 'grass'}, {'y': 12, 'x': 26, 'name': 'grass'}, {'y': 13, 'x': 26, 'name': 'grass'}, {'y': 14, 'x': 26, 'name': 'grass'}, {'y': 0, 'x': 27, 'name': 'grass'}, {'y': 1, 'x': 27, 'name': 'grass'}, {'y': 2, 'x': 27, 'name': 'grass'}, {'y': 3, 'x': 27, 'name': 'grass'}, {'y': 4, 'x': 27, 'name': 'grass'}, {'y': 5, 'x': 27, 'name': 'grass'}, {'y': 6, 'x': 27, 'name': 'grass'}, {'y': 7, 'x': 27, 'name': 'grass'}, {'y': 8, 'x': 27, 'name': 'grass'}, {'y': 9, 'x': 27, 'name': 'grass'}, {'y': 10, 'x': 27, 'name': 'grass'}, {'y': 11, 'x': 27, 'name': 'grass'}, {'y': 12, 'x': 27, 'name': 'grass'}, {'y': 13, 'x': 27, 'name': 'grass'}, {'y': 14, 'x': 27, 'name': 'grass'}, {'y': 0, 'x': 28, 'name': 'grass'}, {'y': 1, 'x': 28, 'name': 'grass'}, {'y': 2, 'x': 28, 'name': 'grass'}, {'y': 3, 'x': 28, 'name': 'grass'}, {'y': 4, 'x': 28, 'name': 'grass'}, {'y': 5, 'x': 28, 'name': 'grass'}, {'y': 6, 'x': 28, 'name': 'grass'}, {'y': 7, 'x': 28, 'name': 'grass'}, {'y': 8, 'x': 28, 'name': 'grass'}, {'y': 9, 'x': 28, 'name': 'grass'}, {'y': 10, 'x': 28, 'name': 'grass'}, {'y': 11, 'x': 28, 'name': 'grass'}, {'y': 12, 'x': 28, 'name': 'grass'}, {'y': 13, 'x': 28, 'name': 'grass'}, {'y': 14, 'x': 28, 'name': 'grass'}, {'y': 0, 'x': 29, 'name': 'grass'}, {'y': 1, 'x': 29, 'name': 'grass'}, {'y': 2, 'x': 29, 'name': 'grass'}, {'y': 3, 'x': 29, 'name': 'grass'}, {'y': 4, 'x': 29, 'name': 'grass'}, {'y': 5, 'x': 29, 'name': 'grass'}, {'y': 6, 'x': 29, 'name': 'grass'}, {'y': 7, 'x': 29, 'name': 'grass'}, {'y': 8, 'x': 29, 'name': 'grass'}, {'y': 9, 'x': 29, 'name': 'grass'}, {'y': 10, 'x': 29, 'name': 'grass'}, {'y': 11, 'x': 29, 'name': 'grass'}, {'y': 12, 'x': 29, 'name': 'grass'}, {'y': 13, 'x': 29, 'name': 'grass'}, {'y': 14, 'x': 29, 'name': 'grass'}], 'name': 'Hello World', 'w': 30, 'teams': [{'color': 'r', 'name': 'Red'}, {'color': 'b', 'name': 'Blue'}]}, 'history': [[[(0, 4), (1, 4), 'Wait']]]}\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n    \u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\r\n            \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append([acts \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (cp,acts) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history])\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[31m#self.checkpoint = copy.deepcopy(self.grid)                             \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   55% L257  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[11;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[10;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[19;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[23;30H\u001b[7m1% L249\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[10;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append([acts \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (cp,acts) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history])\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[31m#self.checkpoint = copy.deepcopy(self.grid)                             \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[19;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\n\b\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[16;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[16;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 119, in __init__\r\n    raise Exception(self.save())\r\nException: {'grid': {'h': 15, 'cells': [{'y': 0, 'x': 0, 'name': 'grass'}, {'y': 1, 'x': 0, 'name': 'grass'}, {'y': 2, 'x': 0, 'name': 'grass'}, {'y': 3, 'x': 0, 'name': 'grass'}, {'y': 4, 'x': 0, 'name': 'grass', 'unit': {'team': 0, 'name': 'Infantry', 'icon': 'i'}}, {'y': 5, 'x': 0, 'name': 'grass'}, {'y': 6, 'x': 0, 'name': 'grass'}, {'y': 7, 'x': 0, 'name': 'grass'}, {'y': 8, 'x': 0, 'name': 'grass'}, {'y': 9, 'x': 0, 'name': 'grass'}, {'y': 10, 'x': 0, 'name': 'grass'}, {'y': 11, 'x': 0, 'name': 'grass'}, {'y': 12, 'x': 0, 'name': 'grass'}, {'y': 13, 'x': 0, 'name': 'grass'}, {'y': 14, 'x': 0, 'name': 'grass'}, {'y': 0, 'x': 1, 'name': 'grass'}, {'y': 1, 'x': 1, 'name': 'grass'}, {'y': 2, 'x': 1, 'name': 'grass'}, {'y': 3, 'x': 1, 'name': 'grass'}, {'y': 4, 'x': 1, 'name': 'grass'}, {'y': 5, 'x': 1, 'name': 'grass'}, {'y': 6, 'x': 1, 'name': 'grass'}, {'y': 7, 'x': 1, 'name': 'grass'}, {'y': 8, 'x': 1, 'name': 'grass'}, {'y': 9, 'x': 1, 'name': 'grass'}, {'y': 10, 'x': 1, 'name': 'grass'}, {'y': 11, 'x': 1, 'name': 'grass'}, {'y': 12, 'x': 1, 'name': 'grass'}, {'y': 13, 'x': 1, 'name': 'grass'}, {'y': 14, 'x': 1, 'name': 'grass'}, {'y': 0, 'x': 2, 'name': 'grass'}, {'y': 1, 'x': 2, 'name': 'grass'}, {'y': 2, 'x': 2, 'name': 'grass'}, {'y': 3, 'x': 2, 'name': 'grass'}, {'y': 4, 'x': 2, 'name': 'grass'}, {'y': 5, 'x': 2, 'name': 'grass'}, {'y': 6, 'x': 2, 'name': 'grass'}, {'y': 7, 'x': 2, 'name': 'grass'}, {'y': 8, 'x': 2, 'name': 'grass'}, {'y': 9, 'x': 2, 'name': 'grass'}, {'y': 10, 'x': 2, 'name': 'grass', 'unit': {'team': 1, 'name': 'Artillery', 'icon': 'L'}}, {'y': 11, 'x': 2, 'name': 'grass'}, {'y': 12, 'x': 2, 'name': 'grass'}, {'y': 13, 'x': 2, 'name': 'grass'}, {'y': 14, 'x': 2, 'name': 'grass'}, {'y': 0, 'x': 3, 'name': 'grass'}, {'y': 1, 'x': 3, 'name': 'grass'}, {'y': 2, 'x': 3, 'name': 'grass'}, {'y': 3, 'x': 3, 'name': 'grass'}, {'y': 4, 'x': 3, 'name': 'grass'}, {'y': 5, 'x': 3, 'name': 'grass'}, {'y': 6, 'x': 3, 'name': 'grass'}, {'y': 7, 'x': 3, 'name': 'grass'}, {'y': 8, 'x': 3, 'name': 'grass'}, {'y': 9, 'x': 3, 'name': 'grass'}, {'y': 10, 'x': 3, 'name': 'grass'}, {'y': 11, 'x': 3, 'name': 'grass'}, {'y': 12, 'x': 3, 'name': 'grass'}, {'y': 13, 'x': 3, 'name': 'grass'}, {'y': 14, 'x': 3, 'name': 'grass'}, {'y': 0, 'x': 4, 'name': 'grass'}, {'y': 1, 'x': 4, 'name': 'grass'}, {'y': 2, 'x': 4, 'name': 'grass'}, {'y': 3, 'x': 4, 'name': 'grass'}, {'y': 4, 'x': 4, 'name': 'grass'}, {'y': 5, 'x': 4, 'name': 'grass'}, {'y': 6, 'x': 4, 'name': 'grass'}, {'y': 7, 'x': 4, 'name': 'grass'}, {'y': 8, 'x': 4, 'name': 'grass'}, {'y': 9, 'x': 4, 'name': 'grass'}, {'y': 10, 'x': 4, 'name': 'grass'}, {'y': 11, 'x': 4, 'name': 'grass'}, {'y': 12, 'x': 4, 'name': 'grass'}, {'y': 13, 'x': 4, 'name': 'grass'}, {'y': 14, 'x': 4, 'name': 'grass'}, {'y': 0, 'x': 5, 'name': 'grass'}, {'y': 1, 'x': 5, 'name': 'grass'}, {'y': 2, 'x': 5, 'name': 'grass'}, {'y': 3, 'x': 5, 'name': 'grass'}, {'y': 4, 'x': 5, 'name': 'grass'}, {'y': 5, 'x': 5, 'name': 'grass'}, {'y': 6, 'x': 5, 'name': 'grass'}, {'y': 7, 'x': 5, 'name': 'grass'}, {'y': 8, 'x': 5, 'name': 'grass'}, {'y': 9, 'x': 5, 'name': 'grass'}, {'y': 10, 'x': 5, 'name': 'grass'}, {'y': 11, 'x': 5, 'name': 'grass'}, {'y': 12, 'x': 5, 'name': 'grass'}, {'y': 13, 'x': 5, 'name': 'grass'}, {'y': 14, 'x': 5, 'name': 'grass'}, {'y': 0, 'x': 6, 'name': 'grass'}, {'y': 1, 'x': 6, 'name': 'grass'}, {'y': 2, 'x': 6, 'name': 'grass'}, {'y': 3, 'x': 6, 'name': 'grass'}, {'y': 4, 'x': 6, 'name': 'grass'}, {'y': 5, 'x': 6, 'name': 'grass'}, {'y': 6, 'x': 6, 'name': 'grass'}, {'y': 7, 'x': 6, 'name': 'grass'}, {'y': 8, 'x': 6, 'name': 'grass'}, {'y': 9, 'x': 6, 'name': 'grass'}, {'y': 10, 'x': 6, 'name': 'grass'}, {'y': 11, 'x': 6, 'name': 'grass'}, {'y': 12, 'x': 6, 'name': 'grass'}, {'y': 13, 'x': 6, 'name': 'grass'}, {'y': 14, 'x': 6, 'name': 'grass'}, {'y': 0, 'x': 7, 'name': 'grass'}, {'y': 1, 'x': 7, 'name': 'grass'}, {'y': 2, 'x': 7, 'name': 'grass'}, {'y': 3, 'x': 7, 'name': 'grass'}, {'y': 4, 'x': 7, 'name': 'grass'}, {'y': 5, 'x': 7, 'name': 'grass'}, {'y': 6, 'x': 7, 'name': 'grass'}, {'y': 7, 'x': 7, 'name': 'grass'}, {'y': 8, 'x': 7, 'name': 'grass'}, {'y': 9, 'x': 7, 'name': 'grass'}, {'y': 10, 'x': 7, 'name': 'grass'}, {'y': 11, 'x': 7, 'name': 'grass'}, {'y': 12, 'x': 7, 'name': 'grass'}, {'y': 13, 'x': 7, 'name': 'grass'}, {'y': 14, 'x': 7, 'name': 'grass'}, {'y': 0, 'x': 8, 'name': 'grass'}, {'y': 1, 'x': 8, 'name': 'grass'}, {'y': 2, 'x': 8, 'name': 'grass'}, {'y': 3, 'x': 8, 'name': 'grass'}, {'y': 4, 'x': 8, 'name': 'grass'}, {'y': 5, 'x': 8, 'name': 'grass'}, {'y': 6, 'x': 8, 'name': 'grass'}, {'y': 7, 'x': 8, 'name': 'grass'}, {'y': 8, 'x': 8, 'name': 'grass'}, {'y': 9, 'x': 8, 'name': 'grass'}, {'y': 10, 'x': 8, 'name': 'grass'}, {'y': 11, 'x': 8, 'name': 'grass'}, {'y': 12, 'x': 8, 'name': 'grass'}, {'y': 13, 'x': 8, 'name': 'grass'}, {'y': 14, 'x': 8, 'name': 'grass'}, {'y': 0, 'x': 9, 'name': 'grass'}, {'y': 1, 'x': 9, 'name': 'grass'}, {'y': 2, 'x': 9, 'name': 'grass'}, {'y': 3, 'x': 9, 'name': 'grass'}, {'y': 4, 'x': 9, 'name': 'grass'}, {'y': 5, 'x': 9, 'name': 'grass'}, {'y': 6, 'x': 9, 'name': 'grass'}, {'y': 7, 'x': 9, 'name': 'grass'}, {'y': 8, 'x': 9, 'name': 'grass'}, {'y': 9, 'x': 9, 'name': 'grass'}, {'y': 10, 'x': 9, 'name': 'grass'}, {'y': 11, 'x': 9, 'name': 'grass'}, {'y': 12, 'x': 9, 'name': 'grass'}, {'y': 13, 'x': 9, 'name': 'grass'}, {'y': 14, 'x': 9, 'name': 'grass'}, {'y': 0, 'x': 10, 'name': 'grass'}, {'y': 1, 'x': 10, 'name': 'grass'}, {'y': 2, 'x': 10, 'name': 'grass'}, {'y': 3, 'x': 10, 'name': 'grass'}, {'y': 4, 'x': 10, 'name': 'grass'}, {'y': 5, 'x': 10, 'name': 'grass'}, {'y': 6, 'x': 10, 'name': 'grass'}, {'y': 7, 'x': 10, 'name': 'grass'}, {'y': 8, 'x': 10, 'name': 'grass'}, {'y': 9, 'x': 10, 'name': 'grass'}, {'y': 10, 'x': 10, 'name': 'grass'}, {'y': 11, 'x': 10, 'name': 'grass'}, {'y': 12, 'x': 10, 'name': 'grass'}, {'y': 13, 'x': 10, 'name': 'grass'}, {'y': 14, 'x': 10, 'name': 'grass'}, {'y': 0, 'x': 11, 'name': 'grass'}, {'y': 1, 'x': 11, 'name': 'grass'}, {'y': 2, 'x': 11, 'name': 'grass'}, {'y': 3, 'x': 11, 'name': 'grass'}, {'y': 4, 'x': 11, 'name': 'grass'}, {'y': 5, 'x': 11, 'name': 'grass'}, {'y': 6, 'x': 11, 'name': 'grass'}, {'y': 7, 'x': 11, 'name': 'grass'}, {'y': 8, 'x': 11, 'name': 'grass'}, {'y': 9, 'x': 11, 'name': 'grass'}, {'y': 10, 'x': 11, 'name': 'grass'}, {'y': 11, 'x': 11, 'name': 'grass'}, {'y': 12, 'x': 11, 'name': 'grass'}, {'y': 13, 'x': 11, 'name': 'grass'}, {'y': 14, 'x': 11, 'name': 'grass'}, {'y': 0, 'x': 12, 'name': 'grass'}, {'y': 1, 'x': 12, 'name': 'grass'}, {'y': 2, 'x': 12, 'name': 'grass'}, {'y': 3, 'x': 12, 'name': 'grass'}, {'y': 4, 'x': 12, 'name': 'grass'}, {'y': 5, 'x': 12, 'name': 'grass'}, {'y': 6, 'x': 12, 'name': 'grass'}, {'y': 7, 'x': 12, 'name': 'grass'}, {'y': 8, 'x': 12, 'name': 'grass'}, {'y': 9, 'x': 12, 'name': 'grass'}, {'y': 10, 'x': 12, 'name': 'grass'}, {'y': 11, 'x': 12, 'name': 'grass'}, {'y': 12, 'x': 12, 'name': 'grass'}, {'y': 13, 'x': 12, 'name': 'grass'}, {'y': 14, 'x': 12, 'name': 'grass'}, {'y': 0, 'x': 13, 'name': 'grass'}, {'y': 1, 'x': 13, 'name': 'grass'}, {'y': 2, 'x': 13, 'name': 'grass'}, {'y': 3, 'x': 13, 'name': 'grass'}, {'y': 4, 'x': 13, 'name': 'grass'}, {'y': 5, 'x': 13, 'name': 'grass'}, {'y': 6, 'x': 13, 'name': 'grass'}, {'y': 7, 'x': 13, 'name': 'grass'}, {'y': 8, 'x': 13, 'name': 'grass'}, {'y': 9, 'x': 13, 'name': 'grass'}, {'y': 10, 'x': 13, 'name': 'grass'}, {'y': 11, 'x': 13, 'name': 'grass'}, {'y': 12, 'x': 13, 'name': 'grass'}, {'y': 13, 'x': 13, 'name': 'grass'}, {'y': 14, 'x': 13, 'name': 'grass'}, {'y': 0, 'x': 14, 'name': 'grass'}, {'y': 1, 'x': 14, 'name': 'grass'}, {'y': 2, 'x': 14, 'name': 'grass'}, {'y': 3, 'x': 14, 'name': 'grass'}, {'y': 4, 'x': 14, 'name': 'grass'}, {'y': 5, 'x': 14, 'name': 'grass'}, {'y': 6, 'x': 14, 'name': 'grass'}, {'y': 7, 'x': 14, 'name': 'grass'}, {'y': 8, 'x': 14, 'name': 'grass'}, {'y': 9, 'x': 14, 'name': 'grass'}, {'y': 10, 'x': 14, 'name': 'grass'}, {'y': 11, 'x': 14, 'name': 'grass'}, {'y': 12, 'x': 14, 'name': 'grass'}, {'y': 13, 'x': 14, 'name': 'grass'}, {'y': 14, 'x': 14, 'name': 'grass'}, {'y': 0, 'x': 15, 'name': 'grass'}, {'y': 1, 'x': 15, 'name': 'grass'}, {'y': 2, 'x': 15, 'name': 'grass'}, {'y': 3, 'x': 15, 'name': 'grass'}, {'y': 4, 'x': 15, 'name': 'grass'}, {'y': 5, 'x': 15, 'name': 'grass'}, {'y': 6, 'x': 15, 'name': 'grass'}, {'y': 7, 'x': 15, 'name': 'grass'}, {'y': 8, 'x': 15, 'name': 'grass'}, {'y': 9, 'x': 15, 'name': 'grass'}, {'y': 10, 'x': 15, 'name': 'grass'}, {'y': 11, 'x': 15, 'name': 'grass'}, {'y': 12, 'x': 15, 'name': 'grass'}, {'y': 13, 'x': 15, 'name': 'grass'}, {'y': 14, 'x': 15, 'name': 'grass'}, {'y': 0, 'x': 16, 'name': 'grass'}, {'y': 1, 'x': 16, 'name': 'grass'}, {'y': 2, 'x': 16, 'name': 'grass'}, {'y': 3, 'x': 16, 'name': 'grass'}, {'y': 4, 'x': 16, 'name': 'grass'}, {'y': 5, 'x': 16, 'name': 'grass'}, {'y': 6, 'x': 16, 'name': 'grass'}, {'y': 7, 'x': 16, 'name': 'grass'}, {'y': 8, 'x': 16, 'name': 'grass'}, {'y': 9, 'x': 16, 'name': 'grass'}, {'y': 10, 'x': 16, 'name': 'grass'}, {'y': 11, 'x': 16, 'name': 'grass'}, {'y': 12, 'x': 16, 'name': 'grass'}, {'y': 13, 'x': 16, 'name': 'grass'}, {'y': 14, 'x': 16, 'name': 'grass'}, {'y': 0, 'x': 17, 'name': 'grass'}, {'y': 1, 'x': 17, 'name': 'grass'}, {'y': 2, 'x': 17, 'name': 'grass'}, {'y': 3, 'x': 17, 'name': 'grass'}, {'y': 4, 'x': 17, 'name': 'grass'}, {'y': 5, 'x': 17, 'name': 'grass'}, {'y': 6, 'x': 17, 'name': 'grass'}, {'y': 7, 'x': 17, 'name': 'grass'}, {'y': 8, 'x': 17, 'name': 'grass'}, {'y': 9, 'x': 17, 'name': 'grass'}, {'y': 10, 'x': 17, 'name': 'grass'}, {'y': 11, 'x': 17, 'name': 'grass'}, {'y': 12, 'x': 17, 'name': 'grass'}, {'y': 13, 'x': 17, 'name': 'grass'}, {'y': 14, 'x': 17, 'name': 'grass'}, {'y': 0, 'x': 18, 'name': 'grass'}, {'y': 1, 'x': 18, 'name': 'grass'}, {'y': 2, 'x': 18, 'name': 'grass'}, {'y': 3, 'x': 18, 'name': 'grass'}, {'y': 4, 'x': 18, 'name': 'grass'}, {'y': 5, 'x': 18, 'name': 'grass'}, {'y': 6, 'x': 18, 'name': 'grass'}, {'y': 7, 'x': 18, 'name': 'grass'}, {'y': 8, 'x': 18, 'name': 'grass'}, {'y': 9, 'x': 18, 'name': 'grass'}, {'y': 10, 'x': 18, 'name': 'grass'}, {'y': 11, 'x': 18, 'name': 'grass'}, {'y': 12, 'x': 18, 'name': 'grass'}, {'y': 13, 'x': 18, 'name': 'grass'}, {'y': 14, 'x': 18, 'name': 'grass'}, {'y': 0, 'x': 19, 'name': 'grass'}, {'y': 1, 'x': 19, 'name': 'grass'}, {'y': 2, 'x': 19, 'name': 'grass'}, {'y': 3, 'x': 19, 'name': 'grass'}, {'y': 4, 'x': 19, 'name': 'grass'}, {'y': 5, 'x': 19, 'name': 'grass'}, {'y': 6, 'x': 19, 'name': 'grass'}, {'y': 7, 'x': 19, 'name': 'grass'}, {'y': 8, 'x': 19, 'name': 'grass'}, {'y': 9, 'x': 19, 'name': 'grass'}, {'y': 10, 'x': 19, 'name': 'grass'}, {'y': 11, 'x': 19, 'name': 'grass'}, {'y': 12, 'x': 19, 'name': 'grass'}, {'y': 13, 'x': 19, 'name': 'grass'}, {'y': 14, 'x': 19, 'name': 'grass'}, {'y': 0, 'x': 20, 'name': 'grass'}, {'y': 1, 'x': 20, 'name': 'grass'}, {'y': 2, 'x': 20, 'name': 'grass'}, {'y': 3, 'x': 20, 'name': 'grass'}, {'y': 4, 'x': 20, 'name': 'grass'}, {'y': 5, 'x': 20, 'name': 'grass'}, {'y': 6, 'x': 20, 'name': 'grass'}, {'y': 7, 'x': 20, 'name': 'grass'}, {'y': 8, 'x': 20, 'name': 'grass'}, {'y': 9, 'x': 20, 'name': 'grass'}, {'y': 10, 'x': 20, 'name': 'grass'}, {'y': 11, 'x': 20, 'name': 'grass'}, {'y': 12, 'x': 20, 'name': 'grass'}, {'y': 13, 'x': 20, 'name': 'grass'}, {'y': 14, 'x': 20, 'name': 'grass'}, {'y': 0, 'x': 21, 'name': 'grass'}, {'y': 1, 'x': 21, 'name': 'grass'}, {'y': 2, 'x': 21, 'name': 'grass'}, {'y': 3, 'x': 21, 'name': 'grass'}, {'y': 4, 'x': 21, 'name': 'grass'}, {'y': 5, 'x': 21, 'name': 'grass'}, {'y': 6, 'x': 21, 'name': 'grass'}, {'y': 7, 'x': 21, 'name': 'grass'}, {'y': 8, 'x': 21, 'name': 'grass'}, {'y': 9, 'x': 21, 'name': 'grass'}, {'y': 10, 'x': 21, 'name': 'grass'}, {'y': 11, 'x': 21, 'name': 'grass'}, {'y': 12, 'x': 21, 'name': 'grass'}, {'y': 13, 'x': 21, 'name': 'grass'}, {'y': 14, 'x': 21, 'name': 'grass'}, {'y': 0, 'x': 22, 'name': 'grass'}, {'y': 1, 'x': 22, 'name': 'grass'}, {'y': 2, 'x': 22, 'name': 'grass'}, {'y': 3, 'x': 22, 'name': 'grass'}, {'y': 4, 'x': 22, 'name': 'grass'}, {'y': 5, 'x': 22, 'name': 'grass'}, {'y': 6, 'x': 22, 'name': 'grass'}, {'y': 7, 'x': 22, 'name': 'grass'}, {'y': 8, 'x': 22, 'name': 'grass'}, {'y': 9, 'x': 22, 'name': 'grass'}, {'y': 10, 'x': 22, 'name': 'grass'}, {'y': 11, 'x': 22, 'name': 'grass'}, {'y': 12, 'x': 22, 'name': 'grass'}, {'y': 13, 'x': 22, 'name': 'grass'}, {'y': 14, 'x': 22, 'name': 'grass'}, {'y': 0, 'x': 23, 'name': 'grass'}, {'y': 1, 'x': 23, 'name': 'grass'}, {'y': 2, 'x': 23, 'name': 'grass'}, {'y': 3, 'x': 23, 'name': 'grass'}, {'y': 4, 'x': 23, 'name': 'grass'}, {'y': 5, 'x': 23, 'name': 'grass'}, {'y': 6, 'x': 23, 'name': 'grass'}, {'y': 7, 'x': 23, 'name': 'grass'}, {'y': 8, 'x': 23, 'name': 'grass'}, {'y': 9, 'x': 23, 'name': 'grass'}, {'y': 10, 'x': 23, 'name': 'grass'}, {'y': 11, 'x': 23, 'name': 'grass'}, {'y': 12, 'x': 23, 'name': 'grass'}, {'y': 13, 'x': 23, 'name': 'grass'}, {'y': 14, 'x': 23, 'name': 'grass'}, {'y': 0, 'x': 24, 'name': 'grass'}, {'y': 1, 'x': 24, 'name': 'grass'}, {'y': 2, 'x': 24, 'name': 'grass'}, {'y': 3, 'x': 24, 'name': 'grass'}, {'y': 4, 'x': 24, 'name': 'grass'}, {'y': 5, 'x': 24, 'name': 'grass'}, {'y': 6, 'x': 24, 'name': 'grass'}, {'y': 7, 'x': 24, 'name': 'grass'}, {'y': 8, 'x': 24, 'name': 'grass'}, {'y': 9, 'x': 24, 'name': 'grass'}, {'y': 10, 'x': 24, 'name': 'grass'}, {'y': 11, 'x': 24, 'name': 'grass'}, {'y': 12, 'x': 24, 'name': 'grass'}, {'y': 13, 'x': 24, 'name': 'grass'}, {'y': 14, 'x': 24, 'name': 'grass'}, {'y': 0, 'x': 25, 'name': 'grass'}, {'y': 1, 'x': 25, 'name': 'grass'}, {'y': 2, 'x': 25, 'name': 'grass'}, {'y': 3, 'x': 25, 'name': 'grass'}, {'y': 4, 'x': 25, 'name': 'grass'}, {'y': 5, 'x': 25, 'name': 'grass'}, {'y': 6, 'x': 25, 'name': 'grass'}, {'y': 7, 'x': 25, 'name': 'grass'}, {'y': 8, 'x': 25, 'name': 'grass'}, {'y': 9, 'x': 25, 'name': 'grass'}, {'y': 10, 'x': 25, 'name': 'grass'}, {'y': 11, 'x': 25, 'name': 'grass'}, {'y': 12, 'x': 25, 'name': 'grass'}, {'y': 13, 'x': 25, 'name': 'grass'}, {'y': 14, 'x': 25, 'name': 'grass'}, {'y': 0, 'x': 26, 'name': 'grass'}, {'y': 1, 'x': 26, 'name': 'grass'}, {'y': 2, 'x': 26, 'name': 'grass'}, {'y': 3, 'x': 26, 'name': 'grass'}, {'y': 4, 'x': 26, 'name': 'grass'}, {'y': 5, 'x': 26, 'name': 'grass'}, {'y': 6, 'x': 26, 'name': 'grass'}, {'y': 7, 'x': 26, 'name': 'grass'}, {'y': 8, 'x': 26, 'name': 'grass'}, {'y': 9, 'x': 26, 'name': 'grass'}, {'y': 10, 'x': 26, 'name': 'grass'}, {'y': 11, 'x': 26, 'name': 'grass'}, {'y': 12, 'x': 26, 'name': 'grass'}, {'y': 13, 'x': 26, 'name': 'grass'}, {'y': 14, 'x': 26, 'name': 'grass'}, {'y': 0, 'x': 27, 'name': 'grass'}, {'y': 1, 'x': 27, 'name': 'grass'}, {'y': 2, 'x': 27, 'name': 'grass'}, {'y': 3, 'x': 27, 'name': 'grass'}, {'y': 4, 'x': 27, 'name': 'grass'}, {'y': 5, 'x': 27, 'name': 'grass'}, {'y': 6, 'x': 27, 'name': 'grass'}, {'y': 7, 'x': 27, 'name': 'grass'}, {'y': 8, 'x': 27, 'name': 'grass'}, {'y': 9, 'x': 27, 'name': 'grass'}, {'y': 10, 'x': 27, 'name': 'grass'}, {'y': 11, 'x': 27, 'name': 'grass'}, {'y': 12, 'x': 27, 'name': 'grass'}, {'y': 13, 'x': 27, 'name': 'grass'}, {'y': 14, 'x': 27, 'name': 'grass'}, {'y': 0, 'x': 28, 'name': 'grass'}, {'y': 1, 'x': 28, 'name': 'grass'}, {'y': 2, 'x': 28, 'name': 'grass'}, {'y': 3, 'x': 28, 'name': 'grass'}, {'y': 4, 'x': 28, 'name': 'grass'}, {'y': 5, 'x': 28, 'name': 'grass'}, {'y': 6, 'x': 28, 'name': 'grass'}, {'y': 7, 'x': 28, 'name': 'grass'}, {'y': 8, 'x': 28, 'name': 'grass'}, {'y': 9, 'x': 28, 'name': 'grass'}, {'y': 10, 'x': 28, 'name': 'grass'}, {'y': 11, 'x': 28, 'name': 'grass'}, {'y': 12, 'x': 28, 'name': 'grass'}, {'y': 13, 'x': 28, 'name': 'grass'}, {'y': 14, 'x': 28, 'name': 'grass'}, {'y': 0, 'x': 29, 'name': 'grass'}, {'y': 1, 'x': 29, 'name': 'grass'}, {'y': 2, 'x': 29, 'name': 'grass'}, {'y': 3, 'x': 29, 'name': 'grass'}, {'y': 4, 'x': 29, 'name': 'grass'}, {'y': 5, 'x': 29, 'name': 'grass'}, {'y': 6, 'x': 29, 'name': 'grass'}, {'y': 7, 'x': 29, 'name': 'grass'}, {'y': 8, 'x': 29, 'name': 'grass'}, {'y': 9, 'x': 29, 'name': 'grass'}, {'y': 10, 'x': 29, 'name': 'grass'}, {'y': 11, 'x': 29, 'name': 'grass'}, {'y': 12, 'x': 29, 'name': 'grass'}, {'y': 13, 'x': 29, 'name': 'grass'}, {'y': 14, 'x': 29, 'name': 'grass'}], 'name': 'Hello World', 'w': 30, 'teams': [{'color': 'r', 'name': 'Red'}, {'color': 'b', 'name': 'Blue'}]}, 'history': [[[(0, 4), (1, 4), 'Wait']]]}\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n    \u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\r\n            \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\r\n            \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append([acts \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (cp,acts) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history])\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   55% L262  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[16;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[10;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[16;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[19;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[23;30H\u001b[7m1% L249\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[6;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[14;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[18;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m47% L230\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\u001b[5;5H        \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[6;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[13;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[14;5H        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[15;5H        \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\u001b[16;5H        \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[20;14Halerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m2% L211\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[16;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\r\n\t    \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[23;29H\u001b[7m38% L192\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\u001b[7;21Hreport.append((a,b))\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\u001b[K\r\n\t            _floodfill((a-1,b),r-1)\u001b[K\u001b[10;21H_floodfill((a+1,b),r-1)\r\n\t            _floodfill((a,b-1),r-1)\u001b[K\r\n\t            _floodfill((a,b+1),r-1)\r\n\t_floodfill((x,y),unit.move)\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\u001b[16;13H                                  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\u001b[23;30H\u001b[7m3% L173\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\u001b[K\r\n\u001b[K\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# stop moving on.                                                           \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33munit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[K\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\n\t\u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\u001b[20;5H    \u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\u001b[21;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\n\b\b\b\b\u001b[7m29% L154\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.save())\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data) \u001b[31m#json.dumps(self.data)              \u001b[39;49m\r\n\u001b[K\n\t\b\b\u001b[31mThis function produces a Unit object based on the unit code.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\u001b[15;10H = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m5% L135\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[4;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"T\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"H\"\u001b[39;49m] = []\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\u001b[K\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m,[])\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[18;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m replay:\u001b[K\u001b[19;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[23;30H\u001b[7m0% L116\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\u001b[4;14Halerts = []\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.save())\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data) \u001b[31m#json.dumps(self.data)                            \u001b[39;49m\r\n\u001b[K\u001b[13;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ltr(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data) \u001b[31m#json.dumps(self.data) \u001b[39;49m\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data) \u001b[31m#json.dumps(self.data) \u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data) \u001b[31m#json.dumps(self.data) \u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data) \u001b[31m#json.dumps(self.data) \u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lelf.data) \u001b[31m#json.dumps(self.data) \u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25llf.data) \u001b[31m#json.dumps(self.data) \u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf.data) \u001b[31m#json.dumps(self.data) \u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.data) \u001b[31m#json.dumps(self.data) \u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ldata) \u001b[31m#json.dumps(self.data) \u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lata) \u001b[31m#json.dumps(self.data) \u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lta) \u001b[31m#json.dumps(self.data) \u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la) \u001b[31m#json.dumps(self.data) \u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l) \u001b[31m#json.dumps(self.data) \u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l \u001b[31m#json.dumps(self.data) \u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m#json.dumps(self.data) \u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ljson.dumps(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data)\u001b[K\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[11;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[11;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 119, in __init__\r\n    raise Exception(self.save())\r\nException: {\"grid\": {\"h\": 15, \"cells\": [{\"y\": 0, \"x\": 0, \"name\": \"grass\"}, {\"y\": 1, \"x\": 0, \"name\": \"grass\"}, {\"y\": 2, \"x\": 0, \"name\": \"grass\"}, {\"y\": 3, \"x\": 0, \"name\": \"grass\"}, {\"y\": 4, \"x\": 0, \"name\": \"grass\", \"unit\": {\"team\": 0, \"name\": \"Infantry\", \"icon\": \"i\"}}, {\"y\": 5, \"x\": 0, \"name\": \"grass\"}, {\"y\": 6, \"x\": 0, \"name\": \"grass\"}, {\"y\": 7, \"x\": 0, \"name\": \"grass\"}, {\"y\": 8, \"x\": 0, \"name\": \"grass\"}, {\"y\": 9, \"x\": 0, \"name\": \"grass\"}, {\"y\": 10, \"x\": 0, \"name\": \"grass\"}, {\"y\": 11, \"x\": 0, \"name\": \"grass\"}, {\"y\": 12, \"x\": 0, \"name\": \"grass\"}, {\"y\": 13, \"x\": 0, \"name\": \"grass\"}, {\"y\": 14, \"x\": 0, \"name\": \"grass\"}, {\"y\": 0, \"x\": 1, \"name\": \"grass\"}, {\"y\": 1, \"x\": 1, \"name\": \"grass\"}, {\"y\": 2, \"x\": 1, \"name\": \"grass\"}, {\"y\": 3, \"x\": 1, \"name\": \"grass\"}, {\"y\": 4, \"x\": 1, \"name\": \"grass\"}, {\"y\": 5, \"x\": 1, \"name\": \"grass\"}, {\"y\": 6, \"x\": 1, \"name\": \"grass\"}, {\"y\": 7, \"x\": 1, \"name\": \"grass\"}, {\"y\": 8, \"x\": 1, \"name\": \"grass\"}, {\"y\": 9, \"x\": 1, \"name\": \"grass\"}, {\"y\": 10, \"x\": 1, \"name\": \"grass\"}, {\"y\": 11, \"x\": 1, \"name\": \"grass\"}, {\"y\": 12, \"x\": 1, \"name\": \"grass\"}, {\"y\": 13, \"x\": 1, \"name\": \"grass\"}, {\"y\": 14, \"x\": 1, \"name\": \"grass\"}, {\"y\": 0, \"x\": 2, \"name\": \"grass\"}, {\"y\": 1, \"x\": 2, \"name\": \"grass\"}, {\"y\": 2, \"x\": 2, \"name\": \"grass\"}, {\"y\": 3, \"x\": 2, \"name\": \"grass\"}, {\"y\": 4, \"x\": 2, \"name\": \"grass\"}, {\"y\": 5, \"x\": 2, \"name\": \"grass\"}, {\"y\": 6, \"x\": 2, \"name\": \"grass\"}, {\"y\": 7, \"x\": 2, \"name\": \"grass\"}, {\"y\": 8, \"x\": 2, \"name\": \"grass\"}, {\"y\": 9, \"x\": 2, \"name\": \"grass\"}, {\"y\": 10, \"x\": 2, \"name\": \"grass\", \"unit\": {\"team\": 1, \"name\": \"Artillery\", \"icon\": \"L\"}}, {\"y\": 11, \"x\": 2, \"name\": \"grass\"}, {\"y\": 12, \"x\": 2, \"name\": \"grass\"}, {\"y\": 13, \"x\": 2, \"name\": \"grass\"}, {\"y\": 14, \"x\": 2, \"name\": \"grass\"}, {\"y\": 0, \"x\": 3, \"name\": \"grass\"}, {\"y\": 1, \"x\": 3, \"name\": \"grass\"}, {\"y\": 2, \"x\": 3, \"name\": \"grass\"}, {\"y\": 3, \"x\": 3, \"name\": \"grass\"}, {\"y\": 4, \"x\": 3, \"name\": \"grass\"}, {\"y\": 5, \"x\": 3, \"name\": \"grass\"}, {\"y\": 6, \"x\": 3, \"name\": \"grass\"}, {\"y\": 7, \"x\": 3, \"name\": \"grass\"}, {\"y\": 8, \"x\": 3, \"name\": \"grass\"}, {\"y\": 9, \"x\": 3, \"name\": \"grass\"}, {\"y\": 10, \"x\": 3, \"name\": \"grass\"}, {\"y\": 11, \"x\": 3, \"name\": \"grass\"}, {\"y\": 12, \"x\": 3, \"name\": \"grass\"}, {\"y\": 13, \"x\": 3, \"name\": \"grass\"}, {\"y\": 14, \"x\": 3, \"name\": \"grass\"}, {\"y\": 0, \"x\": 4, \"name\": \"grass\"}, {\"y\": 1, \"x\": 4, \"name\": \"grass\"}, {\"y\": 2, \"x\": 4, \"name\": \"grass\"}, {\"y\": 3, \"x\": 4, \"name\": \"grass\"}, {\"y\": 4, \"x\": 4, \"name\": \"grass\"}, {\"y\": 5, \"x\": 4, \"name\": \"grass\"}, {\"y\": 6, \"x\": 4, \"name\": \"grass\"}, {\"y\": 7, \"x\": 4, \"name\": \"grass\"}, {\"y\": 8, \"x\": 4, \"name\": \"grass\"}, {\"y\": 9, \"x\": 4, \"name\": \"grass\"}, {\"y\": 10, \"x\": 4, \"name\": \"grass\"}, {\"y\": 11, \"x\": 4, \"name\": \"grass\"}, {\"y\": 12, \"x\": 4, \"name\": \"grass\"}, {\"y\": 13, \"x\": 4, \"name\": \"grass\"}, {\"y\": 14, \"x\": 4, \"name\": \"grass\"}, {\"y\": 0, \"x\": 5, \"name\": \"grass\"}, {\"y\": 1, \"x\": 5, \"name\": \"grass\"}, {\"y\": 2, \"x\": 5, \"name\": \"grass\"}, {\"y\": 3, \"x\": 5, \"name\": \"grass\"}, {\"y\": 4, \"x\": 5, \"name\": \"grass\"}, {\"y\": 5, \"x\": 5, \"name\": \"grass\"}, {\"y\": 6, \"x\": 5, \"name\": \"grass\"}, {\"y\": 7, \"x\": 5, \"name\": \"grass\"}, {\"y\": 8, \"x\": 5, \"name\": \"grass\"}, {\"y\": 9, \"x\": 5, \"name\": \"grass\"}, {\"y\": 10, \"x\": 5, \"name\": \"grass\"}, {\"y\": 11, \"x\": 5, \"name\": \"grass\"}, {\"y\": 12, \"x\": 5, \"name\": \"grass\"}, {\"y\": 13, \"x\": 5, \"name\": \"grass\"}, {\"y\": 14, \"x\": 5, \"name\": \"grass\"}, {\"y\": 0, \"x\": 6, \"name\": \"grass\"}, {\"y\": 1, \"x\": 6, \"name\": \"grass\"}, {\"y\": 2, \"x\": 6, \"name\": \"grass\"}, {\"y\": 3, \"x\": 6, \"name\": \"grass\"}, {\"y\": 4, \"x\": 6, \"name\": \"grass\"}, {\"y\": 5, \"x\": 6, \"name\": \"grass\"}, {\"y\": 6, \"x\": 6, \"name\": \"grass\"}, {\"y\": 7, \"x\": 6, \"name\": \"grass\"}, {\"y\": 8, \"x\": 6, \"name\": \"grass\"}, {\"y\": 9, \"x\": 6, \"name\": \"grass\"}, {\"y\": 10, \"x\": 6, \"name\": \"grass\"}, {\"y\": 11, \"x\": 6, \"name\": \"grass\"}, {\"y\": 12, \"x\": 6, \"name\": \"grass\"}, {\"y\": 13, \"x\": 6, \"name\": \"grass\"}, {\"y\": 14, \"x\": 6, \"name\": \"grass\"}, {\"y\": 0, \"x\": 7, \"name\": \"grass\"}, {\"y\": 1, \"x\": 7, \"name\": \"grass\"}, {\"y\": 2, \"x\": 7, \"name\": \"grass\"}, {\"y\": 3, \"x\": 7, \"name\": \"grass\"}, {\"y\": 4, \"x\": 7, \"name\": \"grass\"}, {\"y\": 5, \"x\": 7, \"name\": \"grass\"}, {\"y\": 6, \"x\": 7, \"name\": \"grass\"}, {\"y\": 7, \"x\": 7, \"name\": \"grass\"}, {\"y\": 8, \"x\": 7, \"name\": \"grass\"}, {\"y\": 9, \"x\": 7, \"name\": \"grass\"}, {\"y\": 10, \"x\": 7, \"name\": \"grass\"}, {\"y\": 11, \"x\": 7, \"name\": \"grass\"}, {\"y\": 12, \"x\": 7, \"name\": \"grass\"}, {\"y\": 13, \"x\": 7, \"name\": \"grass\"}, {\"y\": 14, \"x\": 7, \"name\": \"grass\"}, {\"y\": 0, \"x\": 8, \"name\": \"grass\"}, {\"y\": 1, \"x\": 8, \"name\": \"grass\"}, {\"y\": 2, \"x\": 8, \"name\": \"grass\"}, {\"y\": 3, \"x\": 8, \"name\": \"grass\"}, {\"y\": 4, \"x\": 8, \"name\": \"grass\"}, {\"y\": 5, \"x\": 8, \"name\": \"grass\"}, {\"y\": 6, \"x\": 8, \"name\": \"grass\"}, {\"y\": 7, \"x\": 8, \"name\": \"grass\"}, {\"y\": 8, \"x\": 8, \"name\": \"grass\"}, {\"y\": 9, \"x\": 8, \"name\": \"grass\"}, {\"y\": 10, \"x\": 8, \"name\": \"grass\"}, {\"y\": 11, \"x\": 8, \"name\": \"grass\"}, {\"y\": 12, \"x\": 8, \"name\": \"grass\"}, {\"y\": 13, \"x\": 8, \"name\": \"grass\"}, {\"y\": 14, \"x\": 8, \"name\": \"grass\"}, {\"y\": 0, \"x\": 9, \"name\": \"grass\"}, {\"y\": 1, \"x\": 9, \"name\": \"grass\"}, {\"y\": 2, \"x\": 9, \"name\": \"grass\"}, {\"y\": 3, \"x\": 9, \"name\": \"grass\"}, {\"y\": 4, \"x\": 9, \"name\": \"grass\"}, {\"y\": 5, \"x\": 9, \"name\": \"grass\"}, {\"y\": 6, \"x\": 9, \"name\": \"grass\"}, {\"y\": 7, \"x\": 9, \"name\": \"grass\"}, {\"y\": 8, \"x\": 9, \"name\": \"grass\"}, {\"y\": 9, \"x\": 9, \"name\": \"grass\"}, {\"y\": 10, \"x\": 9, \"name\": \"grass\"}, {\"y\": 11, \"x\": 9, \"name\": \"grass\"}, {\"y\": 12, \"x\": 9, \"name\": \"grass\"}, {\"y\": 13, \"x\": 9, \"name\": \"grass\"}, {\"y\": 14, \"x\": 9, \"name\": \"grass\"}, {\"y\": 0, \"x\": 10, \"name\": \"grass\"}, {\"y\": 1, \"x\": 10, \"name\": \"grass\"}, {\"y\": 2, \"x\": 10, \"name\": \"grass\"}, {\"y\": 3, \"x\": 10, \"name\": \"grass\"}, {\"y\": 4, \"x\": 10, \"name\": \"grass\"}, {\"y\": 5, \"x\": 10, \"name\": \"grass\"}, {\"y\": 6, \"x\": 10, \"name\": \"grass\"}, {\"y\": 7, \"x\": 10, \"name\": \"grass\"}, {\"y\": 8, \"x\": 10, \"name\": \"grass\"}, {\"y\": 9, \"x\": 10, \"name\": \"grass\"}, {\"y\": 10, \"x\": 10, \"name\": \"grass\"}, {\"y\": 11, \"x\": 10, \"name\": \"grass\"}, {\"y\": 12, \"x\": 10, \"name\": \"grass\"}, {\"y\": 13, \"x\": 10, \"name\": \"grass\"}, {\"y\": 14, \"x\": 10, \"name\": \"grass\"}, {\"y\": 0, \"x\": 11, \"name\": \"grass\"}, {\"y\": 1, \"x\": 11, \"name\": \"grass\"}, {\"y\": 2, \"x\": 11, \"name\": \"grass\"}, {\"y\": 3, \"x\": 11, \"name\": \"grass\"}, {\"y\": 4, \"x\": 11, \"name\": \"grass\"}, {\"y\": 5, \"x\": 11, \"name\": \"grass\"}, {\"y\": 6, \"x\": 11, \"name\": \"grass\"}, {\"y\": 7, \"x\": 11, \"name\": \"grass\"}, {\"y\": 8, \"x\": 11, \"name\": \"grass\"}, {\"y\": 9, \"x\": 11, \"name\": \"grass\"}, {\"y\": 10, \"x\": 11, \"name\": \"grass\"}, {\"y\": 11, \"x\": 11, \"name\": \"grass\"}, {\"y\": 12, \"x\": 11, \"name\": \"grass\"}, {\"y\": 13, \"x\": 11, \"name\": \"grass\"}, {\"y\": 14, \"x\": 11, \"name\": \"grass\"}, {\"y\": 0, \"x\": 12, \"name\": \"grass\"}, {\"y\": 1, \"x\": 12, \"name\": \"grass\"}, {\"y\": 2, \"x\": 12, \"name\": \"grass\"}, {\"y\": 3, \"x\": 12, \"name\": \"grass\"}, {\"y\": 4, \"x\": 12, \"name\": \"grass\"}, {\"y\": 5, \"x\": 12, \"name\": \"grass\"}, {\"y\": 6, \"x\": 12, \"name\": \"grass\"}, {\"y\": 7, \"x\": 12, \"name\": \"grass\"}, {\"y\": 8, \"x\": 12, \"name\": \"grass\"}, {\"y\": 9, \"x\": 12, \"name\": \"grass\"}, {\"y\": 10, \"x\": 12, \"name\": \"grass\"}, {\"y\": 11, \"x\": 12, \"name\": \"grass\"}, {\"y\": 12, \"x\": 12, \"name\": \"grass\"}, {\"y\": 13, \"x\": 12, \"name\": \"grass\"}, {\"y\": 14, \"x\": 12, \"name\": \"grass\"}, {\"y\": 0, \"x\": 13, \"name\": \"grass\"}, {\"y\": 1, \"x\": 13, \"name\": \"grass\"}, {\"y\": 2, \"x\": 13, \"name\": \"grass\"}, {\"y\": 3, \"x\": 13, \"name\": \"grass\"}, {\"y\": 4, \"x\": 13, \"name\": \"grass\"}, {\"y\": 5, \"x\": 13, \"name\": \"grass\"}, {\"y\": 6, \"x\": 13, \"name\": \"grass\"}, {\"y\": 7, \"x\": 13, \"name\": \"grass\"}, {\"y\": 8, \"x\": 13, \"name\": \"grass\"}, {\"y\": 9, \"x\": 13, \"name\": \"grass\"}, {\"y\": 10, \"x\": 13, \"name\": \"grass\"}, {\"y\": 11, \"x\": 13, \"name\": \"grass\"}, {\"y\": 12, \"x\": 13, \"name\": \"grass\"}, {\"y\": 13, \"x\": 13, \"name\": \"grass\"}, {\"y\": 14, \"x\": 13, \"name\": \"grass\"}, {\"y\": 0, \"x\": 14, \"name\": \"grass\"}, {\"y\": 1, \"x\": 14, \"name\": \"grass\"}, {\"y\": 2, \"x\": 14, \"name\": \"grass\"}, {\"y\": 3, \"x\": 14, \"name\": \"grass\"}, {\"y\": 4, \"x\": 14, \"name\": \"grass\"}, {\"y\": 5, \"x\": 14, \"name\": \"grass\"}, {\"y\": 6, \"x\": 14, \"name\": \"grass\"}, {\"y\": 7, \"x\": 14, \"name\": \"grass\"}, {\"y\": 8, \"x\": 14, \"name\": \"grass\"}, {\"y\": 9, \"x\": 14, \"name\": \"grass\"}, {\"y\": 10, \"x\": 14, \"name\": \"grass\"}, {\"y\": 11, \"x\": 14, \"name\": \"grass\"}, {\"y\": 12, \"x\": 14, \"name\": \"grass\"}, {\"y\": 13, \"x\": 14, \"name\": \"grass\"}, {\"y\": 14, \"x\": 14, \"name\": \"grass\"}, {\"y\": 0, \"x\": 15, \"name\": \"grass\"}, {\"y\": 1, \"x\": 15, \"name\": \"grass\"}, {\"y\": 2, \"x\": 15, \"name\": \"grass\"}, {\"y\": 3, \"x\": 15, \"name\": \"grass\"}, {\"y\": 4, \"x\": 15, \"name\": \"grass\"}, {\"y\": 5, \"x\": 15, \"name\": \"grass\"}, {\"y\": 6, \"x\": 15, \"name\": \"grass\"}, {\"y\": 7, \"x\": 15, \"name\": \"grass\"}, {\"y\": 8, \"x\": 15, \"name\": \"grass\"}, {\"y\": 9, \"x\": 15, \"name\": \"grass\"}, {\"y\": 10, \"x\": 15, \"name\": \"grass\"}, {\"y\": 11, \"x\": 15, \"name\": \"grass\"}, {\"y\": 12, \"x\": 15, \"name\": \"grass\"}, {\"y\": 13, \"x\": 15, \"name\": \"grass\"}, {\"y\": 14, \"x\": 15, \"name\": \"grass\"}, {\"y\": 0, \"x\": 16, \"name\": \"grass\"}, {\"y\": 1, \"x\": 16, \"name\": \"grass\"}, {\"y\": 2, \"x\": 16, \"name\": \"grass\"}, {\"y\": 3, \"x\": 16, \"name\": \"grass\"}, {\"y\": 4, \"x\": 16, \"name\": \"grass\"}, {\"y\": 5, \"x\": 16, \"name\": \"grass\"}, {\"y\": 6, \"x\": 16, \"name\": \"grass\"}, {\"y\": 7, \"x\": 16, \"name\": \"grass\"}, {\"y\": 8, \"x\": 16, \"name\": \"grass\"}, {\"y\": 9, \"x\": 16, \"name\": \"grass\"}, {\"y\": 10, \"x\": 16, \"name\": \"grass\"}, {\"y\": 11, \"x\": 16, \"name\": \"grass\"}, {\"y\": 12, \"x\": 16, \"name\": \"grass\"}, {\"y\": 13, \"x\": 16, \"name\": \"grass\"}, {\"y\": 14, \"x\": 16, \"name\": \"grass\"}, {\"y\": 0, \"x\": 17, \"name\": \"grass\"}, {\"y\": 1, \"x\": 17, \"name\": \"grass\"}, {\"y\": 2, \"x\": 17, \"name\": \"grass\"}, {\"y\": 3, \"x\": 17, \"name\": \"grass\"}, {\"y\": 4, \"x\": 17, \"name\": \"grass\"}, {\"y\": 5, \"x\": 17, \"name\": \"grass\"}, {\"y\": 6, \"x\": 17, \"name\": \"grass\"}, {\"y\": 7, \"x\": 17, \"name\": \"grass\"}, {\"y\": 8, \"x\": 17, \"name\": \"grass\"}, {\"y\": 9, \"x\": 17, \"name\": \"grass\"}, {\"y\": 10, \"x\": 17, \"name\": \"grass\"}, {\"y\": 11, \"x\": 17, \"name\": \"grass\"}, {\"y\": 12, \"x\": 17, \"name\": \"grass\"}, {\"y\": 13, \"x\": 17, \"name\": \"grass\"}, {\"y\": 14, \"x\": 17, \"name\": \"grass\"}, {\"y\": 0, \"x\": 18, \"name\": \"grass\"}, {\"y\": 1, \"x\": 18, \"name\": \"grass\"}, {\"y\": 2, \"x\": 18, \"name\": \"grass\"}, {\"y\": 3, \"x\": 18, \"name\": \"grass\"}, {\"y\": 4, \"x\": 18, \"name\": \"grass\"}, {\"y\": 5, \"x\": 18, \"name\": \"grass\"}, {\"y\": 6, \"x\": 18, \"name\": \"grass\"}, {\"y\": 7, \"x\": 18, \"name\": \"grass\"}, {\"y\": 8, \"x\": 18, \"name\": \"grass\"}, {\"y\": 9, \"x\": 18, \"name\": \"grass\"}, {\"y\": 10, \"x\": 18, \"name\": \"grass\"}, {\"y\": 11, \"x\": 18, \"name\": \"grass\"}, {\"y\": 12, \"x\": 18, \"name\": \"grass\"}, {\"y\": 13, \"x\": 18, \"name\": \"grass\"}, {\"y\": 14, \"x\": 18, \"name\": \"grass\"}, {\"y\": 0, \"x\": 19, \"name\": \"grass\"}, {\"y\": 1, \"x\": 19, \"name\": \"grass\"}, {\"y\": 2, \"x\": 19, \"name\": \"grass\"}, {\"y\": 3, \"x\": 19, \"name\": \"grass\"}, {\"y\": 4, \"x\": 19, \"name\": \"grass\"}, {\"y\": 5, \"x\": 19, \"name\": \"grass\"}, {\"y\": 6, \"x\": 19, \"name\": \"grass\"}, {\"y\": 7, \"x\": 19, \"name\": \"grass\"}, {\"y\": 8, \"x\": 19, \"name\": \"grass\"}, {\"y\": 9, \"x\": 19, \"name\": \"grass\"}, {\"y\": 10, \"x\": 19, \"name\": \"grass\"}, {\"y\": 11, \"x\": 19, \"name\": \"grass\"}, {\"y\": 12, \"x\": 19, \"name\": \"grass\"}, {\"y\": 13, \"x\": 19, \"name\": \"grass\"}, {\"y\": 14, \"x\": 19, \"name\": \"grass\"}, {\"y\": 0, \"x\": 20, \"name\": \"grass\"}, {\"y\": 1, \"x\": 20, \"name\": \"grass\"}, {\"y\": 2, \"x\": 20, \"name\": \"grass\"}, {\"y\": 3, \"x\": 20, \"name\": \"grass\"}, {\"y\": 4, \"x\": 20, \"name\": \"grass\"}, {\"y\": 5, \"x\": 20, \"name\": \"grass\"}, {\"y\": 6, \"x\": 20, \"name\": \"grass\"}, {\"y\": 7, \"x\": 20, \"name\": \"grass\"}, {\"y\": 8, \"x\": 20, \"name\": \"grass\"}, {\"y\": 9, \"x\": 20, \"name\": \"grass\"}, {\"y\": 10, \"x\": 20, \"name\": \"grass\"}, {\"y\": 11, \"x\": 20, \"name\": \"grass\"}, {\"y\": 12, \"x\": 20, \"name\": \"grass\"}, {\"y\": 13, \"x\": 20, \"name\": \"grass\"}, {\"y\": 14, \"x\": 20, \"name\": \"grass\"}, {\"y\": 0, \"x\": 21, \"name\": \"grass\"}, {\"y\": 1, \"x\": 21, \"name\": \"grass\"}, {\"y\": 2, \"x\": 21, \"name\": \"grass\"}, {\"y\": 3, \"x\": 21, \"name\": \"grass\"}, {\"y\": 4, \"x\": 21, \"name\": \"grass\"}, {\"y\": 5, \"x\": 21, \"name\": \"grass\"}, {\"y\": 6, \"x\": 21, \"name\": \"grass\"}, {\"y\": 7, \"x\": 21, \"name\": \"grass\"}, {\"y\": 8, \"x\": 21, \"name\": \"grass\"}, {\"y\": 9, \"x\": 21, \"name\": \"grass\"}, {\"y\": 10, \"x\": 21, \"name\": \"grass\"}, {\"y\": 11, \"x\": 21, \"name\": \"grass\"}, {\"y\": 12, \"x\": 21, \"name\": \"grass\"}, {\"y\": 13, \"x\": 21, \"name\": \"grass\"}, {\"y\": 14, \"x\": 21, \"name\": \"grass\"}, {\"y\": 0, \"x\": 22, \"name\": \"grass\"}, {\"y\": 1, \"x\": 22, \"name\": \"grass\"}, {\"y\": 2, \"x\": 22, \"name\": \"grass\"}, {\"y\": 3, \"x\": 22, \"name\": \"grass\"}, {\"y\": 4, \"x\": 22, \"name\": \"grass\"}, {\"y\": 5, \"x\": 22, \"name\": \"grass\"}, {\"y\": 6, \"x\": 22, \"name\": \"grass\"}, {\"y\": 7, \"x\": 22, \"name\": \"grass\"}, {\"y\": 8, \"x\": 22, \"name\": \"grass\"}, {\"y\": 9, \"x\": 22, \"name\": \"grass\"}, {\"y\": 10, \"x\": 22, \"name\": \"grass\"}, {\"y\": 11, \"x\": 22, \"name\": \"grass\"}, {\"y\": 12, \"x\": 22, \"name\": \"grass\"}, {\"y\": 13, \"x\": 22, \"name\": \"grass\"}, {\"y\": 14, \"x\": 22, \"name\": \"grass\"}, {\"y\": 0, \"x\": 23, \"name\": \"grass\"}, {\"y\": 1, \"x\": 23, \"name\": \"grass\"}, {\"y\": 2, \"x\": 23, \"name\": \"grass\"}, {\"y\": 3, \"x\": 23, \"name\": \"grass\"}, {\"y\": 4, \"x\": 23, \"name\": \"grass\"}, {\"y\": 5, \"x\": 23, \"name\": \"grass\"}, {\"y\": 6, \"x\": 23, \"name\": \"grass\"}, {\"y\": 7, \"x\": 23, \"name\": \"grass\"}, {\"y\": 8, \"x\": 23, \"name\": \"grass\"}, {\"y\": 9, \"x\": 23, \"name\": \"grass\"}, {\"y\": 10, \"x\": 23, \"name\": \"grass\"}, {\"y\": 11, \"x\": 23, \"name\": \"grass\"}, {\"y\": 12, \"x\": 23, \"name\": \"grass\"}, {\"y\": 13, \"x\": 23, \"name\": \"grass\"}, {\"y\": 14, \"x\": 23, \"name\": \"grass\"}, {\"y\": 0, \"x\": 24, \"name\": \"grass\"}, {\"y\": 1, \"x\": 24, \"name\": \"grass\"}, {\"y\": 2, \"x\": 24, \"name\": \"grass\"}, {\"y\": 3, \"x\": 24, \"name\": \"grass\"}, {\"y\": 4, \"x\": 24, \"name\": \"grass\"}, {\"y\": 5, \"x\": 24, \"name\": \"grass\"}, {\"y\": 6, \"x\": 24, \"name\": \"grass\"}, {\"y\": 7, \"x\": 24, \"name\": \"grass\"}, {\"y\": 8, \"x\": 24, \"name\": \"grass\"}, {\"y\": 9, \"x\": 24, \"name\": \"grass\"}, {\"y\": 10, \"x\": 24, \"name\": \"grass\"}, {\"y\": 11, \"x\": 24, \"name\": \"grass\"}, {\"y\": 12, \"x\": 24, \"name\": \"grass\"}, {\"y\": 13, \"x\": 24, \"name\": \"grass\"}, {\"y\": 14, \"x\": 24, \"name\": \"grass\"}, {\"y\": 0, \"x\": 25, \"name\": \"grass\"}, {\"y\": 1, \"x\": 25, \"name\": \"grass\"}, {\"y\": 2, \"x\": 25, \"name\": \"grass\"}, {\"y\": 3, \"x\": 25, \"name\": \"grass\"}, {\"y\": 4, \"x\": 25, \"name\": \"grass\"}, {\"y\": 5, \"x\": 25, \"name\": \"grass\"}, {\"y\": 6, \"x\": 25, \"name\": \"grass\"}, {\"y\": 7, \"x\": 25, \"name\": \"grass\"}, {\"y\": 8, \"x\": 25, \"name\": \"grass\"}, {\"y\": 9, \"x\": 25, \"name\": \"grass\"}, {\"y\": 10, \"x\": 25, \"name\": \"grass\"}, {\"y\": 11, \"x\": 25, \"name\": \"grass\"}, {\"y\": 12, \"x\": 25, \"name\": \"grass\"}, {\"y\": 13, \"x\": 25, \"name\": \"grass\"}, {\"y\": 14, \"x\": 25, \"name\": \"grass\"}, {\"y\": 0, \"x\": 26, \"name\": \"grass\"}, {\"y\": 1, \"x\": 26, \"name\": \"grass\"}, {\"y\": 2, \"x\": 26, \"name\": \"grass\"}, {\"y\": 3, \"x\": 26, \"name\": \"grass\"}, {\"y\": 4, \"x\": 26, \"name\": \"grass\"}, {\"y\": 5, \"x\": 26, \"name\": \"grass\"}, {\"y\": 6, \"x\": 26, \"name\": \"grass\"}, {\"y\": 7, \"x\": 26, \"name\": \"grass\"}, {\"y\": 8, \"x\": 26, \"name\": \"grass\"}, {\"y\": 9, \"x\": 26, \"name\": \"grass\"}, {\"y\": 10, \"x\": 26, \"name\": \"grass\"}, {\"y\": 11, \"x\": 26, \"name\": \"grass\"}, {\"y\": 12, \"x\": 26, \"name\": \"grass\"}, {\"y\": 13, \"x\": 26, \"name\": \"grass\"}, {\"y\": 14, \"x\": 26, \"name\": \"grass\"}, {\"y\": 0, \"x\": 27, \"name\": \"grass\"}, {\"y\": 1, \"x\": 27, \"name\": \"grass\"}, {\"y\": 2, \"x\": 27, \"name\": \"grass\"}, {\"y\": 3, \"x\": 27, \"name\": \"grass\"}, {\"y\": 4, \"x\": 27, \"name\": \"grass\"}, {\"y\": 5, \"x\": 27, \"name\": \"grass\"}, {\"y\": 6, \"x\": 27, \"name\": \"grass\"}, {\"y\": 7, \"x\": 27, \"name\": \"grass\"}, {\"y\": 8, \"x\": 27, \"name\": \"grass\"}, {\"y\": 9, \"x\": 27, \"name\": \"grass\"}, {\"y\": 10, \"x\": 27, \"name\": \"grass\"}, {\"y\": 11, \"x\": 27, \"name\": \"grass\"}, {\"y\": 12, \"x\": 27, \"name\": \"grass\"}, {\"y\": 13, \"x\": 27, \"name\": \"grass\"}, {\"y\": 14, \"x\": 27, \"name\": \"grass\"}, {\"y\": 0, \"x\": 28, \"name\": \"grass\"}, {\"y\": 1, \"x\": 28, \"name\": \"grass\"}, {\"y\": 2, \"x\": 28, \"name\": \"grass\"}, {\"y\": 3, \"x\": 28, \"name\": \"grass\"}, {\"y\": 4, \"x\": 28, \"name\": \"grass\"}, {\"y\": 5, \"x\": 28, \"name\": \"grass\"}, {\"y\": 6, \"x\": 28, \"name\": \"grass\"}, {\"y\": 7, \"x\": 28, \"name\": \"grass\"}, {\"y\": 8, \"x\": 28, \"name\": \"grass\"}, {\"y\": 9, \"x\": 28, \"name\": \"grass\"}, {\"y\": 10, \"x\": 28, \"name\": \"grass\"}, {\"y\": 11, \"x\": 28, \"name\": \"grass\"}, {\"y\": 12, \"x\": 28, \"name\": \"grass\"}, {\"y\": 13, \"x\": 28, \"name\": \"grass\"}, {\"y\": 14, \"x\": 28, \"name\": \"grass\"}, {\"y\": 0, \"x\": 29, \"name\": \"grass\"}, {\"y\": 1, \"x\": 29, \"name\": \"grass\"}, {\"y\": 2, \"x\": 29, \"name\": \"grass\"}, {\"y\": 3, \"x\": 29, \"name\": \"grass\"}, {\"y\": 4, \"x\": 29, \"name\": \"grass\"}, {\"y\": 5, \"x\": 29, \"name\": \"grass\"}, {\"y\": 6, \"x\": 29, \"name\": \"grass\"}, {\"y\": 7, \"x\": 29, \"name\": \"grass\"}, {\"y\": 8, \"x\": 29, \"name\": \"grass\"}, {\"y\": 9, \"x\": 29, \"name\": \"grass\"}, {\"y\": 10, \"x\": 29, \"name\": \"grass\"}, {\"y\": 11, \"x\": 29, \"name\": \"grass\"}, {\"y\": 12, \"x\": 29, \"name\": \"grass\"}, {\"y\": 13, \"x\": 29, \"name\": \"grass\"}, {\"y\": 14, \"x\": 29, \"name\": \"grass\"}], \"name\": \"Hello World\", \"w\": 30, \"teams\": [{\"color\": \"r\", \"name\": \"Red\"}, {\"color\": \"b\", \"name\": \"Blue\"}]}, \"history\": [[[[0, 4], [1, 4], \"Wait\"]]]}\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.save())\u001b[K\r\n\u001b[K\n    \u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m json.dumps(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data)\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   25% L124  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[11;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default shell.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[8;5H    \u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\u001b[K\u001b[9;5H    \u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[K\u001b[10;5H    \u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\trdict[\u001b[32m'history'\u001b[39;49m].append([[(0,4),(1,4),\u001b[32m\"Wait\"\u001b[39;49m]])\r\n\u001b[K\u001b[14;5H    \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\t\u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\r\n\u001b[K\u001b[23;14H\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   37% L46 \u001b[0m\u001b[39;49m\u001b[27m\u001b[12;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Hello World\"\u001b[39;49m\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"h\"\u001b[39;49m] = 15\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"cells\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(30):\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(15):\r\n\t        \u001b[33mcell\u001b[39;49m = {}\u001b[K\r\n\t        \u001b[33mcell\u001b[39;49m[\u001b[32m\"x\"\u001b[39;49m] = x\u001b[K\r\n\t\t\u001b[33mcell\u001b[39;49m[\u001b[32m\"y\"\u001b[39;49m] = y\r\n\t        \u001b[33mcell\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"grass\"\u001b[39;49m\u001b[K\r\n\t        gdict[\u001b[32m\"cells\"\u001b[39;49m].append(cell)\r\n\t\u001b[33munit1\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"i\"\u001b[39;49m\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 0\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[23;29H\u001b[7m18% L37\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m# The Shell is where it all starts. A Shell is an abstract and thin package in  \u001b[39;49m\r\n\u001b[31m# which all of the elements of the game are stored. It is responsible for       \u001b[39;49m\r\n\u001b[31m# creating the world, parsing and writing to save files, and turning on/off     \u001b[39;49m\r\n\u001b[31m# graphics.                                                                     \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m gfx, draw\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m game, grid, widgets\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m sys\u001b[K\r\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m traceback\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A Shell represents a single instance of a game, including its maps,           \u001b[39;49m\r\n\u001b[31m# data, and everything else.                                                    \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mShell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33mgdict\u001b[39;49m\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Hello World\"\u001b[39;49m\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Hello World\"\u001b[39;49m\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"h\"\u001b[39;49m] = 15\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"cells\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(30):\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(15):\r\n\t\t\u001b[33mcell\u001b[39;49m = {}\r\n                \u001b[33mcell\u001b[39;49m[\u001b[32m\"x\"\u001b[39;49m] = x\u001b[K\r\n\t\t\u001b[33mcell\u001b[39;49m[\u001b[32m\"y\"\u001b[39;49m] = y\r\n                \u001b[33mcell\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"grass\"\u001b[39;49m\r\n                gdict[\u001b[32m\"cells\"\u001b[39;49m].append(cell)\r\n\t\u001b[33munit1\u001b[39;49m = {}\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"i\"\u001b[39;49m\r\n        \u001b[33munit1\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit1\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 0\u001b[K\r\n        \u001b[33munit2\u001b[39;49m = {}\u001b[K\u001b[18;5H    \u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[23;29H\u001b[7m20%\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25lgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\trdict[\u001b[32m'history'\u001b[39;49m].append([[(0,4),(1,4),\u001b[32m\"Wait\"\u001b[39;49m]])\r\n\u001b[K\n\t\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\t\u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\r\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(1,1)\u001b[K\u001b[23;29H\u001b[7m41% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   41% L48\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[?25l        \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[A\u001b[23;35H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lq\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mq\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                                   \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[11;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\"grass\"}, {\"y\": 7, \"x\": 1, \"name\": \"grass\"}, {\"y\": 8, \"x\": 1, \"name\": \"grass\"},\u001b[H\nname\u001b[32m\": \"\u001b[39;49mInfantry\u001b[32m\", \"\u001b[39;49micon\u001b[32m\": \"\u001b[39;49mi\u001b[32m\"}}, {\"\u001b[39;49my\u001b[32m\": 5, \"\u001b[39;49mx\u001b[32m\": 0, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 6, \"\u001b[39;49m\\\r\nx\u001b[32m\": 0, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 7, \"\u001b[39;49mx\u001b[32m\": 0, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 8, \"\u001b[39;49mx\u001b[32m\": 0, \"\u001b[39;49mn\\\r\name\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 9, \"\u001b[39;49mx\u001b[32m\": 0, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 10, \"\u001b[39;49mx\u001b[32m\": 0, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mg\\\r\nrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 11, \"\u001b[39;49mx\u001b[32m\": 0, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 12, \"\u001b[39;49mx\u001b[32m\": 0, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"},\u001b[39;49m\\\r\n\u001b[32m {\"\u001b[39;49my\u001b[32m\": 13, \"\u001b[39;49mx\u001b[32m\": 0, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 14, \"\u001b[39;49mx\u001b[32m\": 0, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": \u001b[39;49m\\\r\n\u001b[32m0, \"\u001b[39;49mx\u001b[32m\": 1, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 1, \"\u001b[39;49mx\u001b[32m\": 1, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 2, \"\u001b[39;49mx\u001b[32m\": 1\u001b[39;49m\\\r\n\u001b[32m, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 3, \"\u001b[39;49mx\u001b[32m\": 1, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 4, \"\u001b[39;49mx\u001b[32m\": 1, \"\u001b[39;49mname\u001b[32m\":\u001b[39;49m\\\r\n\u001b[32m \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 5, \"\u001b[39;49mx\u001b[32m\": 1, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 6, \"\u001b[39;49mx\u001b[32m\": 1, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}\u001b[39;49m\\\r\n\u001b[32m, {\"\u001b[39;49my\u001b[32m\": 7, \"\u001b[39;49mx\u001b[32m\": 1, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 8, \"\u001b[39;49mx\u001b[32m\": 1, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 9\u001b[39;49m\\\r\n\u001b[32m, \"\u001b[39;49mx\u001b[32m\": 1, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 10, \"\u001b[39;49mx\u001b[32m\": 1, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}\u001b[39;49m\u001b[18;1H\u001b[7m-UU-:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   45% L48   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\name\": \"grass\"}, {\"y\": 11, \"x\": 0, \"name\": \"grass\"}, {\"y\": 12, \"x\": 0, \"name\": \"\\\r\ngrass\"}, {\"y\": 13, \"x\": 0, \"name\": \"grass\"}, {\"y\": 14, \"x\": 0, \"name\": \"grass\"}\\\r\n, {\"y\": 0, \"x\": 1, \"name\": \"grass\"}, {\"y\": 1, \"x\": 1, \"name\": \"grass\"}, {\"y\": 2\\\r\n, \"x\": 1, \"name\": \"grass\"}, {\"y\": 3, \"x\": 1, \"name\": \"grass\"}, {\"y\": 4, \"x\": 1,\\\r\n \"name\": \"grass\"}, {\"y\": 5, \"x\": 1, \"name\": \"grass\"}, {\"y\": 6, \"x\": 1, \"name\": \\\r\n\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l 2, \"name\": \"grass\"}, {\"y\": 8, \"x\": 2, \"name\": \"grass\"}, {\"y\": 9, \"x\": 2, \"name\u001b[19;1H1, \"x\": 1, \"name\": \"grass\"}, {\"y\": 12, \"x\": 1, \"name\": \"grass\"}, {\"y\": 13, \"x\":\r\n 1, \"name\": \"grass\"}, {\"y\": 14, \"x\": 1, \"name\": \"grass\"}, {\"y\": 0, \"x\": 2, \"nam\r\ne\": \"grass\"}, {\"y\": 1, \"x\": 2, \"name\": \"grass\"}, {\"y\": 2, \"x\": 2, \"name\": \"gras\r\ns\"}, {\"y\": 3, \"x\": 2, \"name\": \"grass\"}, {\"y\": 4, \"x\": 2, \"name\": \"grass\"}, {\"y\"\r\n: 5, \"x\": 2, \"name\": \"grass\"}, {\"y\": 6, \"x\": 2, \"name\": \"grass\"}, {\"y\": 7, \"x\":\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\": \"grass\"}, {\"y\": 10, \"x\": 2, \"name\": \"grass\", \"unit\": {\"team\": 1, \"name\": \"Ar\u001b[19;1H 1, \"name\": \"grass\"}, {\"y\": 14, \"x\": 1, \"name\": \"grass\"}, {\"y\": 0, \"x\": 2, \"nam\\\r\ne\": \"grass\"}, {\"y\": 1, \"x\": 2, \"name\": \"grass\"}, {\"y\": 2, \"x\": 2, \"name\": \"gras\r\ns\"}, {\"y\": 3, \"x\": 2, \"name\": \"grass\"}, {\"y\": 4, \"x\": 2, \"name\": \"grass\"}, {\"y\"\r\n: 5, \"x\": 2, \"name\": \"grass\"}, {\"y\": 6, \"x\": 2, \"name\": \"grass\"}, {\"y\": 7, \"x\":\r\n 2, \"name\": \"grass\"}, {\"y\": 8, \"x\": 2, \"name\": \"grass\"}, {\"y\": 9, \"x\": 2, \"name\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25ltillery\", \"icon\": \"L\"}}, {\"y\": 11, \"x\": 2, \"name\": \"grass\"}, {\"y\": 12, \"x\": 2, \u001b[19;1He\": \"grass\"}, {\"y\": 1, \"x\": 2, \"name\": \"grass\"}, {\"y\": 2, \"x\": 2, \"name\": \"gras\r\ns\"}, {\"y\": 3, \"x\": 2, \"name\": \"grass\"}, {\"y\": 4, \"x\": 2, \"name\": \"grass\"}, {\"y\"\r\n: 5, \"x\": 2, \"name\": \"grass\"}, {\"y\": 6, \"x\": 2, \"name\": \"grass\"}, {\"y\": 7, \"x\":\r\n 2, \"name\": \"grass\"}, {\"y\": 8, \"x\": 2, \"name\": \"grass\"}, {\"y\": 9, \"x\": 2, \"name\r\n\": \"grass\"}, {\"y\": 10, \"x\": 2, \"name\": \"grass\", \"unit\": {\"team\": 1, \"name\": \"Ar\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\"name\": \"grass\"}, {\"y\": 13, \"x\": 2, \"name\": \"grass\"}, {\"y\": 14, \"x\": 2, \"name\":\u001b[19;1Hs\"}, {\"y\": 3, \"x\": 2, \"name\": \"grass\"}, {\"y\": 4, \"x\": 2, \"name\": \"grass\"}, {\"y\"\r\n: 5, \"x\": 2, \"name\": \"grass\"}, {\"y\": 6, \"x\": 2, \"name\": \"grass\"}, {\"y\": 7, \"x\":\r\n 2, \"name\": \"grass\"}, {\"y\": 8, \"x\": 2, \"name\": \"grass\"}, {\"y\": 9, \"x\": 2, \"name\r\n\": \"grass\"}, {\"y\": 10, \"x\": 2, \"name\": \"grass\", \"unit\": {\"team\": 1, \"name\": \"Ar\r\ntillery\", \"icon\": \"L\"}}, {\"y\": 11, \"x\": 2, \"name\": \"grass\"}, {\"y\": 12, \"x\": 2, \u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l \"grass\"}, {\"y\": 0, \"x\": 3, \"name\": \"grass\"}, {\"y\": 1, \"x\": 3, \"name\": \"grass\"}\u001b[19;1H: 5, \"x\": 2, \"name\": \"grass\"}, {\"y\": 6, \"x\": 2, \"name\": \"grass\"}, {\"y\": 7, \"x\":\r\n 2, \"name\": \"grass\"}, {\"y\": 8, \"x\": 2, \"name\": \"grass\"}, {\"y\": 9, \"x\": 2, \"name\r\n\": \"grass\"}, {\"y\": 10, \"x\": 2, \"name\": \"grass\", \"unit\": {\"team\": 1, \"name\": \"Ar\r\ntillery\", \"icon\": \"L\"}}, {\"y\": 11, \"x\": 2, \"name\": \"grass\"}, {\"y\": 12, \"x\": 2, \r\n\"name\": \"grass\"}, {\"y\": 13, \"x\": 2, \"name\": \"grass\"}, {\"y\": 14, \"x\": 2, \"name\":\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l, {\"y\": 2, \"x\": 3, \"name\": \"grass\"}, {\"y\": 3, \"x\": 3, \"name\": \"grass\"}, {\"y\": 4\u001b[19;1H 2, \"name\": \"grass\"}, {\"y\": 8, \"x\": 2, \"name\": \"grass\"}, {\"y\": 9, \"x\": 2, \"name\r\n\": \"grass\"}, {\"y\": 10, \"x\": 2, \"name\": \"grass\", \"unit\": {\"team\": 1, \"name\": \"Ar\r\ntillery\", \"icon\": \"L\"}}, {\"y\": 11, \"x\": 2, \"name\": \"grass\"}, {\"y\": 12, \"x\": 2, \r\n\"name\": \"grass\"}, {\"y\": 13, \"x\": 2, \"name\": \"grass\"}, {\"y\": 14, \"x\": 2, \"name\":\r\n \"grass\"}, {\"y\": 0, \"x\": 3, \"name\": \"grass\"}, {\"y\": 1, \"x\": 3, \"name\": \"grass\"}\\\r\n\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;3H\u001b[?25l\"x\": 3, \"name\": \"grass\"}, {\"y\": 5, \"x\": 3, \"name\": \"grass\"}, {\"y\": 6, \"x\": 3,\u001b[19;1H\": \"grass\"}, {\"y\": 10, \"x\": 2, \"name\": \"grass\", \"unit\": {\"team\": 1, \"name\": \"Ar\r\ntillery\", \"icon\": \"L\"}}, {\"y\": 11, \"x\": 2, \"name\": \"grass\"}, {\"y\": 12, \"x\": 2, \r\n\"name\": \"grass\"}, {\"y\": 13, \"x\": 2, \"name\": \"grass\"}, {\"y\": 14, \"x\": 2, \"name\":\r\n \"grass\"}, {\"y\": 0, \"x\": 3, \"name\": \"grass\"}, {\"y\": 1, \"x\": 3, \"name\": \"grass\"}\\\r\n, {\"y\": 2, \"x\": 3, \"name\": \"grass\"}, {\"y\": 3, \"x\": 3, \"name\": \"grass\"}, {\"y\": 4\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l \"name\": \"grass\"}, {\"y\": 7, \"x\": 3, \"name\": \"grass\"}, {\"y\": 8, \"x\": 3, \"name\": \u001b[19;1Htillery\", \"icon\": \"L\"}}, {\"y\": 11, \"x\": 2, \"name\": \"grass\"}, {\"y\": 12, \"x\": 2, \r\n\"name\": \"grass\"}, {\"y\": 13, \"x\": 2, \"name\": \"grass\"}, {\"y\": 14, \"x\": 2, \"name\":\r\n \"grass\"}, {\"y\": 0, \"x\": 3, \"name\": \"grass\"}, {\"y\": 1, \"x\": 3, \"name\": \"grass\"}\\\r\n, {\"y\": 2, \"x\": 3, \"name\": \"grass\"}, {\"y\": 3, \"x\": 3, \"name\": \"grass\"}, {\"y\": 4\u001b[23;3H\"x\": 3, \"name\": \"grass\"}, {\"y\": 5, \"x\": 3, \"name\": \"grass\"}, {\"y\": 6, \"x\": 3,\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\"grass\"}, {\"y\": 9, \"x\": 3, \"name\": \"grass\"}, {\"y\": 10, \"x\": 3, \"name\": \"grass\"}\u001b[19;1H\"name\": \"grass\"}, {\"y\": 13, \"x\": 2, \"name\": \"grass\"}, {\"y\": 14, \"x\": 2, \"name\":\r\n \"grass\"}, {\"y\": 0, \"x\": 3, \"name\": \"grass\"}, {\"y\": 1, \"x\": 3, \"name\": \"grass\"}\\\r\n, {\"y\": 2, \"x\": 3, \"name\": \"grass\"}, {\"y\": 3, \"x\": 3, \"name\": \"grass\"}, {\"y\": 4\u001b[22;3H\"x\": 3, \"name\": \"grass\"}, {\"y\": 5, \"x\": 3, \"name\": \"grass\"}, {\"y\": 6, \"x\": 3,\r\n \"name\": \"grass\"}, {\"y\": 7, \"x\": 3, \"name\": \"grass\"}, {\"y\": 8, \"x\": 3, \"name\": \u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l, {\"y\": 11, \"x\": 3, \"name\": \"grass\"}, {\"y\": 12, \"x\": 3, \"name\": \"grass\"}, {\"y\":\u001b[19;1H \"grass\"}, {\"y\": 0, \"x\": 3, \"name\": \"grass\"}, {\"y\": 1, \"x\": 3, \"name\": \"grass\"}\\\r\n, {\"y\": 2, \"x\": 3, \"name\": \"grass\"}, {\"y\": 3, \"x\": 3, \"name\": \"grass\"}, {\"y\": 4\u001b[21;3H\"x\": 3, \"name\": \"grass\"}, {\"y\": 5, \"x\": 3, \"name\": \"grass\"}, {\"y\": 6, \"x\": 3,\r\n \"name\": \"grass\"}, {\"y\": 7, \"x\": 3, \"name\": \"grass\"}, {\"y\": 8, \"x\": 3, \"name\": \r\n\"grass\"}, {\"y\": 9, \"x\": 3, \"name\": \"grass\"}, {\"y\": 10, \"x\": 3, \"name\": \"grass\"}\\\r\n\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l 13, \"x\": 3, \"name\": \"grass\"}, {\"y\": 14, \"x\": 3, \"name\": \"grass\"}, {\"y\": 0, \"x\"\u001b[19;1H, {\"y\": 2, \"x\": 3, \"name\": \"grass\"}, {\"y\": 3, \"x\": 3, \"name\": \"grass\"}, {\"y\": 4\u001b[20;3H\"x\": 3, \"name\": \"grass\"}, {\"y\": 5, \"x\": 3, \"name\": \"grass\"}, {\"y\": 6, \"x\": 3,\r\n \"name\": \"grass\"}, {\"y\": 7, \"x\": 3, \"name\": \"grass\"}, {\"y\": 8, \"x\": 3, \"name\": \r\n\"grass\"}, {\"y\": 9, \"x\": 3, \"name\": \"grass\"}, {\"y\": 10, \"x\": 3, \"name\": \"grass\"}\\\r\n, {\"y\": 11, \"x\": 3, \"name\": \"grass\"}, {\"y\": 12, \"x\": 3, \"name\": \"grass\"}, {\"y\":\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l: 4, \"name\": \"grass\"}, {\"y\": 1, \"x\": 4, \"name\": \"grass\"}, {\"y\": 2, \"x\": 4, \"nam\u001b[19;3H\"x\": 3, \"name\": \"grass\"}, {\"y\": 5, \"x\": 3, \"name\": \"grass\"}, {\"y\": 6, \"x\": 3,\r\n \"name\": \"grass\"}, {\"y\": 7, \"x\": 3, \"name\": \"grass\"}, {\"y\": 8, \"x\": 3, \"name\": \r\n\"grass\"}, {\"y\": 9, \"x\": 3, \"name\": \"grass\"}, {\"y\": 10, \"x\": 3, \"name\": \"grass\"}\\\r\n, {\"y\": 11, \"x\": 3, \"name\": \"grass\"}, {\"y\": 12, \"x\": 3, \"name\": \"grass\"}, {\"y\":\r\n 13, \"x\": 3, \"name\": \"grass\"}, {\"y\": 14, \"x\": 3, \"name\": \"grass\"}, {\"y\": 0, \"x\"\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25le\": \"grass\"}, {\"y\": 3, \"x\": 4, \"name\": \"grass\"}, {\"y\": 4, \"x\": 4, \"name\": \"gras\u001b[19;1H \"name\": \"grass\"}, {\"y\": 7, \"x\": 3, \"name\": \"grass\"}, {\"y\": 8, \"x\": 3, \"name\": \r\n\"grass\"}, {\"y\": 9, \"x\": 3, \"name\": \"grass\"}, {\"y\": 10, \"x\": 3, \"name\": \"grass\"}\\\r\n, {\"y\": 11, \"x\": 3, \"name\": \"grass\"}, {\"y\": 12, \"x\": 3, \"name\": \"grass\"}, {\"y\":\r\n 13, \"x\": 3, \"name\": \"grass\"}, {\"y\": 14, \"x\": 3, \"name\": \"grass\"}, {\"y\": 0, \"x\"\r\n: 4, \"name\": \"grass\"}, {\"y\": 1, \"x\": 4, \"name\": \"grass\"}, {\"y\": 2, \"x\": 4, \"nam\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25ls\"}, {\"y\": 5, \"x\": 4, \"name\": \"grass\"}, {\"y\": 6, \"x\": 4, \"name\": \"grass\"}, {\"y\"\u001b[19;1H\"grass\"}, {\"y\": 9, \"x\": 3, \"name\": \"grass\"}, {\"y\": 10, \"x\": 3, \"name\": \"grass\"}\\\r\n, {\"y\": 11, \"x\": 3, \"name\": \"grass\"}, {\"y\": 12, \"x\": 3, \"name\": \"grass\"}, {\"y\":\r\n 13, \"x\": 3, \"name\": \"grass\"}, {\"y\": 14, \"x\": 3, \"name\": \"grass\"}, {\"y\": 0, \"x\"\r\n: 4, \"name\": \"grass\"}, {\"y\": 1, \"x\": 4, \"name\": \"grass\"}, {\"y\": 2, \"x\": 4, \"nam\r\ne\": \"grass\"}, {\"y\": 3, \"x\": 4, \"name\": \"grass\"}, {\"y\": 4, \"x\": 4, \"name\": \"gras\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l: 7, \"x\": 4, \"name\": \"grass\"}, {\"y\": 8, \"x\": 4, \"name\": \"grass\"}, {\"y\": 9, \"x\":\u001b[19;1H, {\"y\": 11, \"x\": 3, \"name\": \"grass\"}, {\"y\": 12, \"x\": 3, \"name\": \"grass\"}, {\"y\":\r\n 13, \"x\": 3, \"name\": \"grass\"}, {\"y\": 14, \"x\": 3, \"name\": \"grass\"}, {\"y\": 0, \"x\"\r\n: 4, \"name\": \"grass\"}, {\"y\": 1, \"x\": 4, \"name\": \"grass\"}, {\"y\": 2, \"x\": 4, \"nam\r\ne\": \"grass\"}, {\"y\": 3, \"x\": 4, \"name\": \"grass\"}, {\"y\": 4, \"x\": 4, \"name\": \"gras\r\ns\"}, {\"y\": 5, \"x\": 4, \"name\": \"grass\"}, {\"y\": 6, \"x\": 4, \"name\": \"grass\"}, {\"y\"\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l 4, \"name\": \"grass\"}, {\"y\": 10, \"x\": 4, \"name\": \"grass\"}, {\"y\": 11, \"x\": 4, \"na\u001b[19;1H 13, \"x\": 3, \"name\": \"grass\"}, {\"y\": 14, \"x\": 3, \"name\": \"grass\"}, {\"y\": 0, \"x\"\r\n: 4, \"name\": \"grass\"}, {\"y\": 1, \"x\": 4, \"name\": \"grass\"}, {\"y\": 2, \"x\": 4, \"nam\r\ne\": \"grass\"}, {\"y\": 3, \"x\": 4, \"name\": \"grass\"}, {\"y\": 4, \"x\": 4, \"name\": \"gras\r\ns\"}, {\"y\": 5, \"x\": 4, \"name\": \"grass\"}, {\"y\": 6, \"x\": 4, \"name\": \"grass\"}, {\"y\"\r\n: 7, \"x\": 4, \"name\": \"grass\"}, {\"y\": 8, \"x\": 4, \"name\": \"grass\"}, {\"y\": 9, \"x\":\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lme\": \"grass\"}, {\"y\": 12, \"x\": 4, \"name\": \"grass\"}, {\"y\": 13, \"x\": 4, \"name\": \"g\u001b[19;1H: 4, \"name\": \"grass\"}, {\"y\": 1, \"x\": 4, \"name\": \"grass\"}, {\"y\": 2, \"x\": 4, \"nam\r\ne\": \"grass\"}, {\"y\": 3, \"x\": 4, \"name\": \"grass\"}, {\"y\": 4, \"x\": 4, \"name\": \"gras\r\ns\"}, {\"y\": 5, \"x\": 4, \"name\": \"grass\"}, {\"y\": 6, \"x\": 4, \"name\": \"grass\"}, {\"y\"\r\n: 7, \"x\": 4, \"name\": \"grass\"}, {\"y\": 8, \"x\": 4, \"name\": \"grass\"}, {\"y\": 9, \"x\":\r\n 4, \"name\": \"grass\"}, {\"y\": 10, \"x\": 4, \"name\": \"grass\"}, {\"y\": 11, \"x\": 4, \"na\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lrass\"}, {\"y\": 14, \"x\": 4, \"name\": \"grass\"}, {\"y\": 0, \"x\": 5, \"name\": \"grass\"}, \u001b[19;1He\": \"grass\"}, {\"y\": 3, \"x\": 4, \"name\": \"grass\"}, {\"y\": 4, \"x\": 4, \"name\": \"gras\r\ns\"}, {\"y\": 5, \"x\": 4, \"name\": \"grass\"}, {\"y\": 6, \"x\": 4, \"name\": \"grass\"}, {\"y\"\r\n: 7, \"x\": 4, \"name\": \"grass\"}, {\"y\": 8, \"x\": 4, \"name\": \"grass\"}, {\"y\": 9, \"x\":\r\n 4, \"name\": \"grass\"}, {\"y\": 10, \"x\": 4, \"name\": \"grass\"}, {\"y\": 11, \"x\": 4, \"na\r\nme\": \"grass\"}, {\"y\": 12, \"x\": 4, \"name\": \"grass\"}, {\"y\": 13, \"x\": 4, \"name\": \"g\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l{\"y\": 1, \"x\": 5, \"name\": \"grass\"}, {\"y\": 2, \"x\": 5, \"name\": \"grass\"}, {\"y\": 3\u001b[19;1Hs\"}, {\"y\": 5, \"x\": 4, \"name\": \"grass\"}, {\"y\": 6, \"x\": 4, \"name\": \"grass\"}, {\"y\"\r\n: 7, \"x\": 4, \"name\": \"grass\"}, {\"y\": 8, \"x\": 4, \"name\": \"grass\"}, {\"y\": 9, \"x\":\r\n 4, \"name\": \"grass\"}, {\"y\": 10, \"x\": 4, \"name\": \"grass\"}, {\"y\": 11, \"x\": 4, \"na\r\nme\": \"grass\"}, {\"y\": 12, \"x\": 4, \"name\": \"grass\"}, {\"y\": 13, \"x\": 4, \"name\": \"g\r\nrass\"}, {\"y\": 14, \"x\": 4, \"name\": \"grass\"}, {\"y\": 0, \"x\": 5, \"name\": \"grass\"}, \u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\"x\": 5, \"name\": \"grass\"}, {\"y\": 4, \"x\": 5, \"name\": \"grass\"}, {\"y\": 5, \"x\": 5, \"\u001b[19;1H: 7, \"x\": 4, \"name\": \"grass\"}, {\"y\": 8, \"x\": 4, \"name\": \"grass\"}, {\"y\": 9, \"x\":\r\n 4, \"name\": \"grass\"}, {\"y\": 10, \"x\": 4, \"name\": \"grass\"}, {\"y\": 11, \"x\": 4, \"na\r\nme\": \"grass\"}, {\"y\": 12, \"x\": 4, \"name\": \"grass\"}, {\"y\": 13, \"x\": 4, \"name\": \"g\r\nrass\"}, {\"y\": 14, \"x\": 4, \"name\": \"grass\"}, {\"y\": 0, \"x\": 5, \"name\": \"grass\"}, \r\n{\"y\": 1, \"x\": 5, \"name\": \"grass\"}, {\"y\": 2, \"x\": 5, \"name\": \"grass\"}, {\"y\": 3\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lname\": \"grass\"}, {\"y\": 6, \"x\": 5, \"name\": \"grass\"}, {\"y\": 7, \"x\": 5, \"name\": \"g\u001b[19;1H 4, \"name\": \"grass\"}, {\"y\": 10, \"x\": 4, \"name\": \"grass\"}, {\"y\": 11, \"x\": 4, \"na\r\nme\": \"grass\"}, {\"y\": 12, \"x\": 4, \"name\": \"grass\"}, {\"y\": 13, \"x\": 4, \"name\": \"g\r\nrass\"}, {\"y\": 14, \"x\": 4, \"name\": \"grass\"}, {\"y\": 0, \"x\": 5, \"name\": \"grass\"}, \r\n{\"y\": 1, \"x\": 5, \"name\": \"grass\"}, {\"y\": 2, \"x\": 5, \"name\": \"grass\"}, {\"y\": 3\r\n\"x\": 5, \"name\": \"grass\"}, {\"y\": 4, \"x\": 5, \"name\": \"grass\"}, {\"y\": 5, \"x\": 5, \"\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lrass\"}, {\"y\": 8, \"x\": 5, \"name\": \"grass\"}, {\"y\": 9, \"x\": 5, \"name\": \"grass\"}, {\u001b[19;1Hme\": \"grass\"}, {\"y\": 12, \"x\": 4, \"name\": \"grass\"}, {\"y\": 13, \"x\": 4, \"name\": \"g\r\nrass\"}, {\"y\": 14, \"x\": 4, \"name\": \"grass\"}, {\"y\": 0, \"x\": 5, \"name\": \"grass\"}, \r\n{\"y\": 1, \"x\": 5, \"name\": \"grass\"}, {\"y\": 2, \"x\": 5, \"name\": \"grass\"}, {\"y\": 3\r\n\"x\": 5, \"name\": \"grass\"}, {\"y\": 4, \"x\": 5, \"name\": \"grass\"}, {\"y\": 5, \"x\": 5, \"\r\nname\": \"grass\"}, {\"y\": 6, \"x\": 5, \"name\": \"grass\"}, {\"y\": 7, \"x\": 5, \"name\": \"g\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\"y\": 10, \"x\": 5, \"name\": \"grass\"}, {\"y\": 11, \"x\": 5, \"name\": \"grass\"}, {\"y\": 12\u001b[19;1Hrass\"}, {\"y\": 14, \"x\": 4, \"name\": \"grass\"}, {\"y\": 0, \"x\": 5, \"name\": \"grass\"}, \r\n{\"y\": 1, \"x\": 5, \"name\": \"grass\"}, {\"y\": 2, \"x\": 5, \"name\": \"grass\"}, {\"y\": 3\r\n\"x\": 5, \"name\": \"grass\"}, {\"y\": 4, \"x\": 5, \"name\": \"grass\"}, {\"y\": 5, \"x\": 5, \"\r\nname\": \"grass\"}, {\"y\": 6, \"x\": 5, \"name\": \"grass\"}, {\"y\": 7, \"x\": 5, \"name\": \"g\r\nrass\"}, {\"y\": 8, \"x\": 5, \"name\": \"grass\"}, {\"y\": 9, \"x\": 5, \"name\": \"grass\"}, {\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l, \"x\": 5, \"name\": \"grass\"}, {\"y\": 13, \"x\": 5, \"name\": \"grass\"}, {\"y\": 14, \"x\": \u001b[19;1H{\"y\": 1, \"x\": 5, \"name\": \"grass\"}, {\"y\": 2, \"x\": 5, \"name\": \"grass\"}, {\"y\": 3\r\n\"x\": 5, \"name\": \"grass\"}, {\"y\": 4, \"x\": 5, \"name\": \"grass\"}, {\"y\": 5, \"x\": 5, \"\r\nname\": \"grass\"}, {\"y\": 6, \"x\": 5, \"name\": \"grass\"}, {\"y\": 7, \"x\": 5, \"name\": \"g\r\nrass\"}, {\"y\": 8, \"x\": 5, \"name\": \"grass\"}, {\"y\": 9, \"x\": 5, \"name\": \"grass\"}, {\r\n\"y\": 10, \"x\": 5, \"name\": \"grass\"}, {\"y\": 11, \"x\": 5, \"name\": \"grass\"}, {\"y\": 12\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l5, \"name\": \"grass\"}, {\"y\": 0, \"x\": 6, \"name\": \"grass\"}, {\"y\": 1, \"x\": 6, \"name\"\u001b[19;1H\"x\": 5, \"name\": \"grass\"}, {\"y\": 4, \"x\": 5, \"name\": \"grass\"}, {\"y\": 5, \"x\": 5, \"\r\nname\": \"grass\"}, {\"y\": 6, \"x\": 5, \"name\": \"grass\"}, {\"y\": 7, \"x\": 5, \"name\": \"g\r\nrass\"}, {\"y\": 8, \"x\": 5, \"name\": \"grass\"}, {\"y\": 9, \"x\": 5, \"name\": \"grass\"}, {\r\n\"y\": 10, \"x\": 5, \"name\": \"grass\"}, {\"y\": 11, \"x\": 5, \"name\": \"grass\"}, {\"y\": 12\r\n, \"x\": 5, \"name\": \"grass\"}, {\"y\": 13, \"x\": 5, \"name\": \"grass\"}, {\"y\": 14, \"x\": \u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l: \"grass\"}, {\"y\": 2, \"x\": 6, \"name\": \"grass\"}, {\"y\": 3, \"x\": 6, \"name\": \"grass\u001b[19;1Hname\": \"grass\"}, {\"y\": 6, \"x\": 5, \"name\": \"grass\"}, {\"y\": 7, \"x\": 5, \"name\": \"g\r\nrass\"}, {\"y\": 8, \"x\": 5, \"name\": \"grass\"}, {\"y\": 9, \"x\": 5, \"name\": \"grass\"}, {\r\n\"y\": 10, \"x\": 5, \"name\": \"grass\"}, {\"y\": 11, \"x\": 5, \"name\": \"grass\"}, {\"y\": 12\r\n, \"x\": 5, \"name\": \"grass\"}, {\"y\": 13, \"x\": 5, \"name\": \"grass\"}, {\"y\": 14, \"x\": \r\n5, \"name\": \"grass\"}, {\"y\": 0, \"x\": 6, \"name\": \"grass\"}, {\"y\": 1, \"x\": 6, \"name\"\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l}, {\"y\": 4, \"x\": 6, \"name\": \"grass\"}, {\"y\": 5, \"x\": 6, \"name\": \"grass\"}, {\"y\": \u001b[19;1Hrass\"}, {\"y\": 8, \"x\": 5, \"name\": \"grass\"}, {\"y\": 9, \"x\": 5, \"name\": \"grass\"}, {\r\n\"y\": 10, \"x\": 5, \"name\": \"grass\"}, {\"y\": 11, \"x\": 5, \"name\": \"grass\"}, {\"y\": 12\r\n, \"x\": 5, \"name\": \"grass\"}, {\"y\": 13, \"x\": 5, \"name\": \"grass\"}, {\"y\": 14, \"x\": \r\n5, \"name\": \"grass\"}, {\"y\": 0, \"x\": 6, \"name\": \"grass\"}, {\"y\": 1, \"x\": 6, \"name\"\r\n: \"grass\"}, {\"y\": 2, \"x\": 6, \"name\": \"grass\"}, {\"y\": 3, \"x\": 6, \"name\": \"grass\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l6, \"x\": 6, \"name\": \"grass\"}, {\"y\": 7, \"x\": 6, \"name\": \"grass\"}, {\"y\": 8, \"x\": 6\u001b[19;1H\"y\": 10, \"x\": 5, \"name\": \"grass\"}, {\"y\": 11, \"x\": 5, \"name\": \"grass\"}, {\"y\": 12\r\n, \"x\": 5, \"name\": \"grass\"}, {\"y\": 13, \"x\": 5, \"name\": \"grass\"}, {\"y\": 14, \"x\": \r\n5, \"name\": \"grass\"}, {\"y\": 0, \"x\": 6, \"name\": \"grass\"}, {\"y\": 1, \"x\": 6, \"name\"\r\n: \"grass\"}, {\"y\": 2, \"x\": 6, \"name\": \"grass\"}, {\"y\": 3, \"x\": 6, \"name\": \"grass\r\n}, {\"y\": 4, \"x\": 6, \"name\": \"grass\"}, {\"y\": 5, \"x\": 6, \"name\": \"grass\"}, {\"y\": \u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l, \"name\": \"grass\"}, {\"y\": 9, \"x\": 6, \"name\": \"grass\"}, {\"y\": 10, \"x\": 6, \"name\"\u001b[19;1H, \"x\": 5, \"name\": \"grass\"}, {\"y\": 13, \"x\": 5, \"name\": \"grass\"}, {\"y\": 14, \"x\": \r\n5, \"name\": \"grass\"}, {\"y\": 0, \"x\": 6, \"name\": \"grass\"}, {\"y\": 1, \"x\": 6, \"name\"\r\n: \"grass\"}, {\"y\": 2, \"x\": 6, \"name\": \"grass\"}, {\"y\": 3, \"x\": 6, \"name\": \"grass\r\n}, {\"y\": 4, \"x\": 6, \"name\": \"grass\"}, {\"y\": 5, \"x\": 6, \"name\": \"grass\"}, {\"y\": \r\n6, \"x\": 6, \"name\": \"grass\"}, {\"y\": 7, \"x\": 6, \"name\": \"grass\"}, {\"y\": 8, \"x\": 6\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l: \"grass\"}, {\"y\": 11, \"x\": 6, \"name\": \"grass\"}, {\"y\": 12, \"x\": 6, \"name\": \"gras\u001b[19;1H5, \"name\": \"grass\"}, {\"y\": 0, \"x\": 6, \"name\": \"grass\"}, {\"y\": 1, \"x\": 6, \"name\"\r\n: \"grass\"}, {\"y\": 2, \"x\": 6, \"name\": \"grass\"}, {\"y\": 3, \"x\": 6, \"name\": \"grass\r\n}, {\"y\": 4, \"x\": 6, \"name\": \"grass\"}, {\"y\": 5, \"x\": 6, \"name\": \"grass\"}, {\"y\": \r\n6, \"x\": 6, \"name\": \"grass\"}, {\"y\": 7, \"x\": 6, \"name\": \"grass\"}, {\"y\": 8, \"x\": 6\r\n, \"name\": \"grass\"}, {\"y\": 9, \"x\": 6, \"name\": \"grass\"}, {\"y\": 10, \"x\": 6, \"name\"\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25ls\"}, {\"y\": 13, \"x\": 6, \"name\": \"grass\"}, {\"y\": 14, \"x\": 6, \"name\": \"grass\"}, {\"\u001b[19;1H: \"grass\"}, {\"y\": 2, \"x\": 6, \"name\": \"grass\"}, {\"y\": 3, \"x\": 6, \"name\": \"grass\r\n}, {\"y\": 4, \"x\": 6, \"name\": \"grass\"}, {\"y\": 5, \"x\": 6, \"name\": \"grass\"}, {\"y\": \r\n6, \"x\": 6, \"name\": \"grass\"}, {\"y\": 7, \"x\": 6, \"name\": \"grass\"}, {\"y\": 8, \"x\": 6\r\n, \"name\": \"grass\"}, {\"y\": 9, \"x\": 6, \"name\": \"grass\"}, {\"y\": 10, \"x\": 6, \"name\"\r\n: \"grass\"}, {\"y\": 11, \"x\": 6, \"name\": \"grass\"}, {\"y\": 12, \"x\": 6, \"name\": \"gras\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25ly\": 0, \"x\": 7, \"name\": \"grass\"}, {\"y\": 1, \"x\": 7, \"name\": \"grass\"}, {\"y\": 2, \"x\u001b[19;1H}, {\"y\": 4, \"x\": 6, \"name\": \"grass\"}, {\"y\": 5, \"x\": 6, \"name\": \"grass\"}, {\"y\": \r\n6, \"x\": 6, \"name\": \"grass\"}, {\"y\": 7, \"x\": 6, \"name\": \"grass\"}, {\"y\": 8, \"x\": 6\r\n, \"name\": \"grass\"}, {\"y\": 9, \"x\": 6, \"name\": \"grass\"}, {\"y\": 10, \"x\": 6, \"name\"\r\n: \"grass\"}, {\"y\": 11, \"x\": 6, \"name\": \"grass\"}, {\"y\": 12, \"x\": 6, \"name\": \"gras\r\ns\"}, {\"y\": 13, \"x\": 6, \"name\": \"grass\"}, {\"y\": 14, \"x\": 6, \"name\": \"grass\"}, {\"\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\": 7, \"name\": \"grass\"}, {\"y\": 3, \"x\": 7, \"name\": \"grass\"}, {\"y\": 4, \"x\": 7, \"na\u001b[19;1H6, \"x\": 6, \"name\": \"grass\"}, {\"y\": 7, \"x\": 6, \"name\": \"grass\"}, {\"y\": 8, \"x\": 6\r\n, \"name\": \"grass\"}, {\"y\": 9, \"x\": 6, \"name\": \"grass\"}, {\"y\": 10, \"x\": 6, \"name\"\r\n: \"grass\"}, {\"y\": 11, \"x\": 6, \"name\": \"grass\"}, {\"y\": 12, \"x\": 6, \"name\": \"gras\r\ns\"}, {\"y\": 13, \"x\": 6, \"name\": \"grass\"}, {\"y\": 14, \"x\": 6, \"name\": \"grass\"}, {\"\r\ny\": 0, \"x\": 7, \"name\": \"grass\"}, {\"y\": 1, \"x\": 7, \"name\": \"grass\"}, {\"y\": 2, \"x\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;19r\u001b[12;1H\u001b[2L\u001b[1;24r\u001b[24;1H\u001b[K\u001b[2d\u001b[?25l\u001b[32m \"\u001b[39;49mx\u001b[32m\": 5, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 11, \"\u001b[39;49mx\u001b[32m\": 5, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 12, \"\u001b[39;49mx\u001b[32m\": 5\u001b[39;49m\r\n\u001b[32m, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 13, \"\u001b[39;49mx\u001b[32m\": 5, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 14, \"\u001b[39;49mx\u001b[32m\": 5, \"\u001b[39;49mname\r\n\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 0, \"\u001b[39;49mx\u001b[32m\": 6, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 1, \"\u001b[39;49mx\u001b[32m\": 6, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\r\n\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 2, \"\u001b[39;49mx\u001b[32m\": 6, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 3, \"\u001b[39;49mx\u001b[32m\": 6, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\":\u001b[39;49m\r\n\u001b[C\u001b[32m4, \"\u001b[39;49mx\u001b[32m\": 6, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 5, \"\u001b[39;49mx\u001b[32m\": 6, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 6, \"\u001b[39;49mx\r\n\u001b[32m6, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 7, \"\u001b[39;49mx\u001b[32m\": 6, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 8, \"\u001b[39;49mx\u001b[32m\": 6, \"\u001b[39;49mname\u001b[32m\"\u001b[39;49m\r\n\u001b[32m: \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 9, \"\u001b[39;49mx\u001b[32m\": 6, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 10, \"\u001b[39;49mx\u001b[32m\": 6, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\r\n\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 11, \"\u001b[39;49mx\u001b[32m\": 6, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 12, \"\u001b[39;49mx\u001b[32m\": 6, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\r\n\u001b[32m\": 13, \"\u001b[39;49mx\u001b[32m\": 6, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 14, \"\u001b[39;49mx\u001b[32m\": 6, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 0, \"\u001b[39;49m\r\nx\u001b[32m\": 7, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 1, \"\u001b[39;49mx\u001b[32m\": 7, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 2, \"\u001b[39;49mx\u001b[32m\": 7, \"\u001b[39;49mn\\\r\name\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 3, \"\u001b[39;49mx\u001b[32m\": 7, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 4, \"\u001b[39;49mx\u001b[32m\": 7, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgr\\\r\n\u001b[A\nass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 5, \"\u001b[39;49mx\u001b[32m\": 7, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 6, \"\u001b[39;49mx\u001b[32m\": 7, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49m\u001b[K\u001b[20;1H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\u001b[7m-UU-:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   68% L48   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[13;80H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[13;80H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[13;80H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;19r\u001b[12;1H\u001b[2M\u001b[1;24r\u001b[24;1H\u001b[?25lgrass\"}, {\"y\": 10, \"x\": 8, \"name\": \"grass\"}, {\"y\": 11, \"x\": 8, \"name\": \"grass\"}\u001b[H\ny\u001b[32m\": 7, \"\u001b[39;49mx\u001b[32m\": 7, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 8, \"\u001b[39;49mx\u001b[32m\": 7, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 9, \"\u001b[39;49mx\r\n\u001b[32m\": 7, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 10, \"\u001b[39;49mx\u001b[32m\": 7, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 11, \"\u001b[39;49mx\u001b[32m\": 7, \"\u001b[39;49m\r\nname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 12, \"\u001b[39;49mx\u001b[32m\": 7, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 13, \"\u001b[39;49mx\u001b[32m\": 7, \"\u001b[39;49mname\u001b[32m\": \u001b[39;49m\r\n\u001b[Cgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 14, \"\u001b[39;49mx\u001b[32m\": 7, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 0, \"\u001b[39;49mx\u001b[32m\": 8, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}\u001b[39;49m\r\n\u001b[32m, {\"\u001b[39;49my\u001b[32m\": 1, \"\u001b[39;49mx\u001b[32m\": 8, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 2, \"\u001b[39;49mx\u001b[32m\": 8, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 3\u001b[39;49m\r\n\u001b[32m, \"\u001b[39;49mx\u001b[32m\": 8, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 4, \"\u001b[39;49mx\u001b[32m\": 8, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 5, \"\u001b[39;49mx\u001b[32m\": 8,\u001b[39;49m\r\n\u001b[32m \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 6, \"\u001b[39;49mx\u001b[32m\": 8, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 7, \"\u001b[39;49mx\u001b[32m\": 8, \"\u001b[39;49mname\u001b[32m\": \u001b[39;49m\r\n\u001b[Cgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 8, \"\u001b[39;49mx\u001b[32m\": 8, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 9, \"\u001b[39;49mx\u001b[32m\": 8, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"},\u001b[39;49m\r\n\u001b[32m {\"\u001b[39;49my\u001b[32m\": 10, \"\u001b[39;49mx\u001b[32m\": 8, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 11, \"\u001b[39;49mx\u001b[32m\": 8, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": \u001b[39;49m\r\n\u001b[32m12, \"\u001b[39;49mx\u001b[32m\": 8, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 13, \"\u001b[39;49mx\u001b[32m\": 8, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}                \u001b[39;49m\r\n\u001b[18d\u001b[7m-UU-:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   73% L48   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\"name\": \"grass\"}, {\"y\": 14, \"x\": 7, \"name\": \"grass\"}, {\"y\": 0, \"x\": 8, \"name\": \\\r\n\u001b[A\n\"grass\"}, {\"y\": 1, \"x\": 8, \"name\": \"grass\"}, {\"y\": 2, \"x\": 8, \"name\": \"grass\"},\\\r\n\u001b[C{\"y\": 3, \"x\": 8, \"name\": \"grass\"}, {\"y\": 4, \"x\": 8, \"name\": \"grass\"}, {\"y\": 5,\\\r\n\u001b[C\"x\": 8, \"name\": \"grass\"}, {\"y\": 6, \"x\": 8, \"name\": \"grass\"}, {\"y\": 7, \"x\": 8, \\\r\n\"name\": \"grass\"}, {\"y\": 8, \"x\": 8, \"name\": \"grass\"}, {\"y\": 9, \"x\": 8, \"name\": \"\\\r\n\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l 9, \"name\": \"grass\"}, {\"y\": 11, \"x\": 9, \"name\": \"grass\"}, {\"y\": 12, \"x\": 9, \"na\u001b[19;1H 14, \"x\": 8, \"name\": \"grass\"}, {\"y\": 0, \"x\": 9, \"name\": \"grass\"}, {\"y\": 1, \"x\":\r\n 9, \"name\": \"grass\"}, {\"y\": 2, \"x\": 9, \"name\": \"grass\"}, {\"y\": 3, \"x\": 9, \"name\r\n\": \"grass\"}, {\"y\": 4, \"x\": 9, \"name\": \"grass\"}, {\"y\": 5, \"x\": 9, \"name\": \"grass\r\n\"}, {\"y\": 6, \"x\": 9, \"name\": \"grass\"}, {\"y\": 7, \"x\": 9, \"name\": \"grass\"}, {\"y\":\\\r\n 8, \"x\": 9, \"name\": \"grass\"}, {\"y\": 9, \"x\": 9, \"name\": \"grass\"}, {\"y\": 10, \"x\":\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lme\": \"grass\"}, {\"y\": 13, \"x\": 9, \"name\": \"grass\"}, {\"y\": 14, \"x\": 9, \"name\": \"g\u001b[19;2H9, \"name\": \"grass\"}, {\"y\": 2, \"x\": 9, \"name\": \"grass\"}, {\"y\": 3, \"x\": 9, \"name\r\n\": \"grass\"}, {\"y\": 4, \"x\": 9, \"name\": \"grass\"}, {\"y\": 5, \"x\": 9, \"name\": \"grass\r\n\u001b[C}, {\"y\": 6, \"x\": 9, \"name\": \"grass\"}, {\"y\": 7, \"x\": 9, \"name\": \"grass\"}, {\"y\":\r\n 8, \"x\": 9, \"name\": \"grass\"}, {\"y\": 9, \"x\": 9, \"name\": \"grass\"}, {\"y\": 10, \"x\r\n\u001b[C9, \"name\": \"grass\"}, {\"y\": 11, \"x\": 9, \"name\": \"grass\"}, {\"y\": 12, \"x\": 9, \"na\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lrass\"}, {\"y\": 0, \"x\": 10, \"name\": \"grass\"}, {\"y\": 1, \"x\": 10, \"name\": \"grass\"},\u001b[19;1H\": \"grass\"}, {\"y\": 4, \"x\": 9, \"name\": \"grass\"}, {\"y\": 5, \"x\": 9, \"name\": \"grass\r\n\u001b[C}, {\"y\": 6, \"x\": 9, \"name\": \"grass\"}, {\"y\": 7, \"x\": 9, \"name\": \"grass\"}, {\"y\":\r\n 8, \"x\": 9, \"name\": \"grass\"}, {\"y\": 9, \"x\": 9, \"name\": \"grass\"}, {\"y\": 10, \"x\r\n\u001b[C9, \"name\": \"grass\"}, {\"y\": 11, \"x\": 9, \"name\": \"grass\"}, {\"y\": 12, \"x\": 9, \"na\r\nme\": \"grass\"}, {\"y\": 13, \"x\": 9, \"name\": \"grass\"}, {\"y\": 14, \"x\": 9, \"name\": \"g\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l {\"y\": 2, \"x\": 10, \"name\": \"grass\"}, {\"y\": 3, \"x\": 10, \"name\": \"grass\"}, {\"y\": \u001b[19;2H}, {\"y\": 6, \"x\": 9, \"name\": \"grass\"}, {\"y\": 7, \"x\": 9, \"name\": \"grass\"}, {\"y\":\r\n 8, \"x\": 9, \"name\": \"grass\"}, {\"y\": 9, \"x\": 9, \"name\": \"grass\"}, {\"y\": 10, \"x\r\n\u001b[C9, \"name\": \"grass\"}, {\"y\": 11, \"x\": 9, \"name\": \"grass\"}, {\"y\": 12, \"x\": 9, \"na\r\nme\": \"grass\"}, {\"y\": 13, \"x\": 9, \"name\": \"grass\"}, {\"y\": 14, \"x\": 9, \"name\": \"g\r\nrass\"}, {\"y\": 0, \"x\": 10, \"name\": \"grass\"}, {\"y\": 1, \"x\": 10, \"name\": \"grass\"},\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l4, \"x\": 10, \"name\": \"grass\"}, {\"y\": 5, \"x\": 10, \"name\": \"grass\"}, {\"y\": 6, \"x\":\u001b[19;1H 8, \"x\": 9, \"name\": \"grass\"}, {\"y\": 9, \"x\": 9, \"name\": \"grass\"}, {\"y\": 10, \"x\r\n\u001b[C9, \"name\": \"grass\"}, {\"y\": 11, \"x\": 9, \"name\": \"grass\"}, {\"y\": 12, \"x\": 9, \"na\r\nme\": \"grass\"}, {\"y\": 13, \"x\": 9, \"name\": \"grass\"}, {\"y\": 14, \"x\": 9, \"name\": \"g\r\nrass\"}, {\"y\": 0, \"x\": 10, \"name\": \"grass\"}, {\"y\": 1, \"x\": 10, \"name\": \"grass\"},\r\n {\"y\": 2, \"x\": 10, \"name\": \"grass\"}, {\"y\": 3, \"x\": 10, \"name\": \"grass\"}, {\"y\": \u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l 10, \"name\": \"grass\"}, {\"y\": 7, \"x\": 10, \"name\": \"grass\"}, {\"y\": 8, \"x\": 10, \"n\u001b[19;2H9, \"name\": \"grass\"}, {\"y\": 11, \"x\": 9, \"name\": \"grass\"}, {\"y\": 12, \"x\": 9, \"na\r\nme\": \"grass\"}, {\"y\": 13, \"x\": 9, \"name\": \"grass\"}, {\"y\": 14, \"x\": 9, \"name\": \"g\r\nrass\"}, {\"y\": 0, \"x\": 10, \"name\": \"grass\"}, {\"y\": 1, \"x\": 10, \"name\": \"grass\"},\r\n {\"y\": 2, \"x\": 10, \"name\": \"grass\"}, {\"y\": 3, \"x\": 10, \"name\": \"grass\"}, {\"y\": \r\n4, \"x\": 10, \"name\": \"grass\"}, {\"y\": 5, \"x\": 10, \"name\": \"grass\"}, {\"y\": 6, \"x\":\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lame\": \"grass\"}, {\"y\": 9, \"x\": 10, \"name\": \"grass\"}, {\"y\": 10, \"x\": 10, \"name\": \u001b[19;1Hme\": \"grass\"}, {\"y\": 13, \"x\": 9, \"name\": \"grass\"}, {\"y\": 14, \"x\": 9, \"name\": \"g\r\nrass\"}, {\"y\": 0, \"x\": 10, \"name\": \"grass\"}, {\"y\": 1, \"x\": 10, \"name\": \"grass\"},\r\n {\"y\": 2, \"x\": 10, \"name\": \"grass\"}, {\"y\": 3, \"x\": 10, \"name\": \"grass\"}, {\"y\": \r\n4, \"x\": 10, \"name\": \"grass\"}, {\"y\": 5, \"x\": 10, \"name\": \"grass\"}, {\"y\": 6, \"x\":\r\n 10, \"name\": \"grass\"}, {\"y\": 7, \"x\": 10, \"name\": \"grass\"}, {\"y\": 8, \"x\": 10, \"n\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\"grass\"}, {\"y\": 11, \"x\": 10, \"name\": \"grass\"}, {\"y\": 12, \"x\": 10, \"name\": \"gras\u001b[19;1Hrass\"}, {\"y\": 0, \"x\": 10, \"name\": \"grass\"}, {\"y\": 1, \"x\": 10, \"name\": \"grass\"},\r\n {\"y\": 2, \"x\": 10, \"name\": \"grass\"}, {\"y\": 3, \"x\": 10, \"name\": \"grass\"}, {\"y\": \r\n4, \"x\": 10, \"name\": \"grass\"}, {\"y\": 5, \"x\": 10, \"name\": \"grass\"}, {\"y\": 6, \"x\":\r\n 10, \"name\": \"grass\"}, {\"y\": 7, \"x\": 10, \"name\": \"grass\"}, {\"y\": 8, \"x\": 10, \"n\r\name\": \"grass\"}, {\"y\": 9, \"x\": 10, \"name\": \"grass\"}, {\"y\": 10, \"x\": 10, \"name\": \u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25ls\"}, {\"y\": 13, \"x\": 10, \"name\": \"grass\"}, {\"y\": 14, \"x\": 10, \"name\": \"grass\"}, \u001b[19;1H {\"y\": 2, \"x\": 10, \"name\": \"grass\"}, {\"y\": 3, \"x\": 10, \"name\": \"grass\"}, {\"y\": \r\n4, \"x\": 10, \"name\": \"grass\"}, {\"y\": 5, \"x\": 10, \"name\": \"grass\"}, {\"y\": 6, \"x\":\r\n 10, \"name\": \"grass\"}, {\"y\": 7, \"x\": 10, \"name\": \"grass\"}, {\"y\": 8, \"x\": 10, \"n\r\name\": \"grass\"}, {\"y\": 9, \"x\": 10, \"name\": \"grass\"}, {\"y\": 10, \"x\": 10, \"name\": \r\n\"grass\"}, {\"y\": 11, \"x\": 10, \"name\": \"grass\"}, {\"y\": 12, \"x\": 10, \"name\": \"gras\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l{\"y\": 0, \"x\": 11, \"name\": \"grass\"}, {\"y\": 1, \"x\": 11, \"name\": \"grass\"}, {\"y\": 2\u001b[19;1H4, \"x\": 10, \"name\": \"grass\"}, {\"y\": 5, \"x\": 10, \"name\": \"grass\"}, {\"y\": 6, \"x\":\r\n 10, \"name\": \"grass\"}, {\"y\": 7, \"x\": 10, \"name\": \"grass\"}, {\"y\": 8, \"x\": 10, \"n\r\name\": \"grass\"}, {\"y\": 9, \"x\": 10, \"name\": \"grass\"}, {\"y\": 10, \"x\": 10, \"name\": \r\n\"grass\"}, {\"y\": 11, \"x\": 10, \"name\": \"grass\"}, {\"y\": 12, \"x\": 10, \"name\": \"gras\r\ns\"}, {\"y\": 13, \"x\": 10, \"name\": \"grass\"}, {\"y\": 14, \"x\": 10, \"name\": \"grass\"}, \u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l, \"x\": 11, \"name\": \"grass\"}, {\"y\": 3, \"x\": 11, \"name\": \"grass\"}, {\"y\": 4, \"x\": \u001b[19;1H 10, \"name\": \"grass\"}, {\"y\": 7, \"x\": 10, \"name\": \"grass\"}, {\"y\": 8, \"x\": 10, \"n\r\name\": \"grass\"}, {\"y\": 9, \"x\": 10, \"name\": \"grass\"}, {\"y\": 10, \"x\": 10, \"name\": \r\n\"grass\"}, {\"y\": 11, \"x\": 10, \"name\": \"grass\"}, {\"y\": 12, \"x\": 10, \"name\": \"gras\r\ns\"}, {\"y\": 13, \"x\": 10, \"name\": \"grass\"}, {\"y\": 14, \"x\": 10, \"name\": \"grass\"}, \r\n{\"y\": 0, \"x\": 11, \"name\": \"grass\"}, {\"y\": 1, \"x\": 11, \"name\": \"grass\"}, {\"y\": 2\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l11, \"name\": \"grass\"}, {\"y\": 5, \"x\": 11, \"name\": \"grass\"}, {\"y\": 6, \"x\": 11, \"na\u001b[19;1Hame\": \"grass\"}, {\"y\": 9, \"x\": 10, \"name\": \"grass\"}, {\"y\": 10, \"x\": 10, \"name\": \r\n\"grass\"}, {\"y\": 11, \"x\": 10, \"name\": \"grass\"}, {\"y\": 12, \"x\": 10, \"name\": \"gras\r\ns\"}, {\"y\": 13, \"x\": 10, \"name\": \"grass\"}, {\"y\": 14, \"x\": 10, \"name\": \"grass\"}, \r\n{\"y\": 0, \"x\": 11, \"name\": \"grass\"}, {\"y\": 1, \"x\": 11, \"name\": \"grass\"}, {\"y\": 2\r\n, \"x\": 11, \"name\": \"grass\"}, {\"y\": 3, \"x\": 11, \"name\": \"grass\"}, {\"y\": 4, \"x\": \u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lme\": \"grass\"}, {\"y\": 7, \"x\": 11, \"name\": \"grass\"}, {\"y\": 8, \"x\": 11, \"name\": \"g\u001b[19;1H\"grass\"}, {\"y\": 11, \"x\": 10, \"name\": \"grass\"}, {\"y\": 12, \"x\": 10, \"name\": \"gras\r\ns\"}, {\"y\": 13, \"x\": 10, \"name\": \"grass\"}, {\"y\": 14, \"x\": 10, \"name\": \"grass\"}, \r\n{\"y\": 0, \"x\": 11, \"name\": \"grass\"}, {\"y\": 1, \"x\": 11, \"name\": \"grass\"}, {\"y\": 2\r\n, \"x\": 11, \"name\": \"grass\"}, {\"y\": 3, \"x\": 11, \"name\": \"grass\"}, {\"y\": 4, \"x\": \r\n11, \"name\": \"grass\"}, {\"y\": 5, \"x\": 11, \"name\": \"grass\"}, {\"y\": 6, \"x\": 11, \"na\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lrass\"}, {\"y\": 9, \"x\": 11, \"name\": \"grass\"}, {\"y\": 10, \"x\": 11, \"name\": \"grass\"}\u001b[19;1Hs\"}, {\"y\": 13, \"x\": 10, \"name\": \"grass\"}, {\"y\": 14, \"x\": 10, \"name\": \"grass\"}, \r\n{\"y\": 0, \"x\": 11, \"name\": \"grass\"}, {\"y\": 1, \"x\": 11, \"name\": \"grass\"}, {\"y\": 2\r\n, \"x\": 11, \"name\": \"grass\"}, {\"y\": 3, \"x\": 11, \"name\": \"grass\"}, {\"y\": 4, \"x\": \r\n11, \"name\": \"grass\"}, {\"y\": 5, \"x\": 11, \"name\": \"grass\"}, {\"y\": 6, \"x\": 11, \"na\r\nme\": \"grass\"}, {\"y\": 7, \"x\": 11, \"name\": \"grass\"}, {\"y\": 8, \"x\": 11, \"name\": \"g\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l, {\"y\": 11, \"x\": 11, \"name\": \"grass\"}, {\"y\": 12, \"x\": 11, \"name\": \"grass\"}, {\"y\u001b[19;1H{\"y\": 0, \"x\": 11, \"name\": \"grass\"}, {\"y\": 1, \"x\": 11, \"name\": \"grass\"}, {\"y\": 2\r\n, \"x\": 11, \"name\": \"grass\"}, {\"y\": 3, \"x\": 11, \"name\": \"grass\"}, {\"y\": 4, \"x\": \r\n11, \"name\": \"grass\"}, {\"y\": 5, \"x\": 11, \"name\": \"grass\"}, {\"y\": 6, \"x\": 11, \"na\r\nme\": \"grass\"}, {\"y\": 7, \"x\": 11, \"name\": \"grass\"}, {\"y\": 8, \"x\": 11, \"name\": \"g\r\nrass\"}, {\"y\": 9, \"x\": 11, \"name\": \"grass\"}, {\"y\": 10, \"x\": 11, \"name\": \"grass\"}\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\": 13, \"x\": 11, \"name\": \"grass\"}, {\"y\": 14, \"x\": 11, \"name\": \"grass\"}, {\"y\": 0,\u001b[19;1H, \"x\": 11, \"name\": \"grass\"}, {\"y\": 3, \"x\": 11, \"name\": \"grass\"}, {\"y\": 4, \"x\": \r\n11, \"name\": \"grass\"}, {\"y\": 5, \"x\": 11, \"name\": \"grass\"}, {\"y\": 6, \"x\": 11, \"na\r\nme\": \"grass\"}, {\"y\": 7, \"x\": 11, \"name\": \"grass\"}, {\"y\": 8, \"x\": 11, \"name\": \"g\r\nrass\"}, {\"y\": 9, \"x\": 11, \"name\": \"grass\"}, {\"y\": 10, \"x\": 11, \"name\": \"grass\"}\r\n, {\"y\": 11, \"x\": 11, \"name\": \"grass\"}, {\"y\": 12, \"x\": 11, \"name\": \"grass\"}, {\"y\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l \"x\": 12, \"name\": \"grass\"}, {\"y\": 1, \"x\": 12, \"name\": \"grass\"}, {\"y\": 2, \"x\": 1\u001b[19;1H11, \"name\": \"grass\"}, {\"y\": 5, \"x\": 11, \"name\": \"grass\"}, {\"y\": 6, \"x\": 11, \"na\r\nme\": \"grass\"}, {\"y\": 7, \"x\": 11, \"name\": \"grass\"}, {\"y\": 8, \"x\": 11, \"name\": \"g\r\nrass\"}, {\"y\": 9, \"x\": 11, \"name\": \"grass\"}, {\"y\": 10, \"x\": 11, \"name\": \"grass\"}\r\n, {\"y\": 11, \"x\": 11, \"name\": \"grass\"}, {\"y\": 12, \"x\": 11, \"name\": \"grass\"}, {\"y\r\n\": 13, \"x\": 11, \"name\": \"grass\"}, {\"y\": 14, \"x\": 11, \"name\": \"grass\"}, {\"y\": 0,\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l2, \"name\": \"grass\"}, {\"y\": 3, \"x\": 12, \"name\": \"grass\"}, {\"y\": 4, \"x\": 12, \"nam\u001b[19;1Hme\": \"grass\"}, {\"y\": 7, \"x\": 11, \"name\": \"grass\"}, {\"y\": 8, \"x\": 11, \"name\": \"g\r\nrass\"}, {\"y\": 9, \"x\": 11, \"name\": \"grass\"}, {\"y\": 10, \"x\": 11, \"name\": \"grass\"}\r\n, {\"y\": 11, \"x\": 11, \"name\": \"grass\"}, {\"y\": 12, \"x\": 11, \"name\": \"grass\"}, {\"y\r\n\": 13, \"x\": 11, \"name\": \"grass\"}, {\"y\": 14, \"x\": 11, \"name\": \"grass\"}, {\"y\": 0,\r\n \"x\": 12, \"name\": \"grass\"}, {\"y\": 1, \"x\": 12, \"name\": \"grass\"}, {\"y\": 2, \"x\": 1\\\r\n\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25le\": \"grass\"}, {\"y\": 5, \"x\": 12, \"name\": \"grass\"}, {\"y\": 6, \"x\": 12, \"name\": \"gr\u001b[19;1Hrass\"}, {\"y\": 9, \"x\": 11, \"name\": \"grass\"}, {\"y\": 10, \"x\": 11, \"name\": \"grass\"}\r\n, {\"y\": 11, \"x\": 11, \"name\": \"grass\"}, {\"y\": 12, \"x\": 11, \"name\": \"grass\"}, {\"y\r\n\": 13, \"x\": 11, \"name\": \"grass\"}, {\"y\": 14, \"x\": 11, \"name\": \"grass\"}, {\"y\": 0,\r\n \"x\": 12, \"name\": \"grass\"}, {\"y\": 1, \"x\": 12, \"name\": \"grass\"}, {\"y\": 2, \"x\": 1\\\r\n2, \"name\": \"grass\"}, {\"y\": 3, \"x\": 12, \"name\": \"grass\"}, {\"y\": 4, \"x\": 12, \"nam\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lass\"}, {\"y\": 7, \"x\": 12, \"name\": \"grass\"}, {\"y\": 8, \"x\": 12, \"name\": \"grass\"}, \u001b[19;1H, {\"y\": 11, \"x\": 11, \"name\": \"grass\"}, {\"y\": 12, \"x\": 11, \"name\": \"grass\"}, {\"y\r\n\": 13, \"x\": 11, \"name\": \"grass\"}, {\"y\": 14, \"x\": 11, \"name\": \"grass\"}, {\"y\": 0,\r\n \"x\": 12, \"name\": \"grass\"}, {\"y\": 1, \"x\": 12, \"name\": \"grass\"}, {\"y\": 2, \"x\": 1\\\r\n2, \"name\": \"grass\"}, {\"y\": 3, \"x\": 12, \"name\": \"grass\"}, {\"y\": 4, \"x\": 12, \"nam\r\ne\": \"grass\"}, {\"y\": 5, \"x\": 12, \"name\": \"grass\"}, {\"y\": 6, \"x\": 12, \"name\": \"gr\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l{\"y\": 9, \"x\": 12, \"name\": \"grass\"}, {\"y\": 10, \"x\": 12, \"name\": \"grass\"}, {\"y\":\u001b[19;1H\": 13, \"x\": 11, \"name\": \"grass\"}, {\"y\": 14, \"x\": 11, \"name\": \"grass\"}, {\"y\": 0,\r\n \"x\": 12, \"name\": \"grass\"}, {\"y\": 1, \"x\": 12, \"name\": \"grass\"}, {\"y\": 2, \"x\": 1\\\r\n2, \"name\": \"grass\"}, {\"y\": 3, \"x\": 12, \"name\": \"grass\"}, {\"y\": 4, \"x\": 12, \"nam\r\ne\": \"grass\"}, {\"y\": 5, \"x\": 12, \"name\": \"grass\"}, {\"y\": 6, \"x\": 12, \"name\": \"gr\r\nass\"}, {\"y\": 7, \"x\": 12, \"name\": \"grass\"}, {\"y\": 8, \"x\": 12, \"name\": \"grass\"}, \u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l11, \"x\": 12, \"name\": \"grass\"}, {\"y\": 12, \"x\": 12, \"name\": \"grass\"}, {\"y\": 13, \"\u001b[19;1H \"x\": 12, \"name\": \"grass\"}, {\"y\": 1, \"x\": 12, \"name\": \"grass\"}, {\"y\": 2, \"x\": 1\\\r\n2, \"name\": \"grass\"}, {\"y\": 3, \"x\": 12, \"name\": \"grass\"}, {\"y\": 4, \"x\": 12, \"nam\r\ne\": \"grass\"}, {\"y\": 5, \"x\": 12, \"name\": \"grass\"}, {\"y\": 6, \"x\": 12, \"name\": \"gr\r\nass\"}, {\"y\": 7, \"x\": 12, \"name\": \"grass\"}, {\"y\": 8, \"x\": 12, \"name\": \"grass\"}, \r\n{\"y\": 9, \"x\": 12, \"name\": \"grass\"}, {\"y\": 10, \"x\": 12, \"name\": \"grass\"}, {\"y\":\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lx\": 12, \"name\": \"grass\"}, {\"y\": 14, \"x\": 12, \"name\": \"grass\"}, {\"y\": 0, \"x\": 13\u001b[19;1H2, \"name\": \"grass\"}, {\"y\": 3, \"x\": 12, \"name\": \"grass\"}, {\"y\": 4, \"x\": 12, \"nam\r\ne\": \"grass\"}, {\"y\": 5, \"x\": 12, \"name\": \"grass\"}, {\"y\": 6, \"x\": 12, \"name\": \"gr\r\nass\"}, {\"y\": 7, \"x\": 12, \"name\": \"grass\"}, {\"y\": 8, \"x\": 12, \"name\": \"grass\"}, \r\n{\"y\": 9, \"x\": 12, \"name\": \"grass\"}, {\"y\": 10, \"x\": 12, \"name\": \"grass\"}, {\"y\":\r\n11, \"x\": 12, \"name\": \"grass\"}, {\"y\": 12, \"x\": 12, \"name\": \"grass\"}, {\"y\": 13, \"\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l, \"name\": \"grass\"}, {\"y\": 1, \"x\": 13, \"name\": \"grass\"}, {\"y\": 2, \"x\": 13, \"name\u001b[19;1He\": \"grass\"}, {\"y\": 5, \"x\": 12, \"name\": \"grass\"}, {\"y\": 6, \"x\": 12, \"name\": \"gr\r\nass\"}, {\"y\": 7, \"x\": 12, \"name\": \"grass\"}, {\"y\": 8, \"x\": 12, \"name\": \"grass\"}, \r\n{\"y\": 9, \"x\": 12, \"name\": \"grass\"}, {\"y\": 10, \"x\": 12, \"name\": \"grass\"}, {\"y\":\r\n11, \"x\": 12, \"name\": \"grass\"}, {\"y\": 12, \"x\": 12, \"name\": \"grass\"}, {\"y\": 13, \"\r\nx\": 12, \"name\": \"grass\"}, {\"y\": 14, \"x\": 12, \"name\": \"grass\"}, {\"y\": 0, \"x\": 13\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\": \"grass\"}, {\"y\": 3, \"x\": 13, \"name\": \"grass\"}, {\"y\": 4, \"x\": 13, \"name\": \"gra\u001b[19;1Hass\"}, {\"y\": 7, \"x\": 12, \"name\": \"grass\"}, {\"y\": 8, \"x\": 12, \"name\": \"grass\"}, \r\n{\"y\": 9, \"x\": 12, \"name\": \"grass\"}, {\"y\": 10, \"x\": 12, \"name\": \"grass\"}, {\"y\":\r\n11, \"x\": 12, \"name\": \"grass\"}, {\"y\": 12, \"x\": 12, \"name\": \"grass\"}, {\"y\": 13, \"\r\nx\": 12, \"name\": \"grass\"}, {\"y\": 14, \"x\": 12, \"name\": \"grass\"}, {\"y\": 0, \"x\": 13\r\n, \"name\": \"grass\"}, {\"y\": 1, \"x\": 13, \"name\": \"grass\"}, {\"y\": 2, \"x\": 13, \"name\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lss\"}, {\"y\": 5, \"x\": 13, \"name\": \"grass\"}, {\"y\": 6, \"x\": 13, \"name\": \"grass\"}, {\u001b[19;1H{\"y\": 9, \"x\": 12, \"name\": \"grass\"}, {\"y\": 10, \"x\": 12, \"name\": \"grass\"}, {\"y\":\r\n11, \"x\": 12, \"name\": \"grass\"}, {\"y\": 12, \"x\": 12, \"name\": \"grass\"}, {\"y\": 13, \"\r\nx\": 12, \"name\": \"grass\"}, {\"y\": 14, \"x\": 12, \"name\": \"grass\"}, {\"y\": 0, \"x\": 13\r\n, \"name\": \"grass\"}, {\"y\": 1, \"x\": 13, \"name\": \"grass\"}, {\"y\": 2, \"x\": 13, \"name\r\n\": \"grass\"}, {\"y\": 3, \"x\": 13, \"name\": \"grass\"}, {\"y\": 4, \"x\": 13, \"name\": \"gra\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\"y\": 7, \"x\": 13, \"name\": \"grass\"}, {\"y\": 8, \"x\": 13, \"name\": \"grass\"}, {\"y\": 9,\u001b[19;1H11, \"x\": 12, \"name\": \"grass\"}, {\"y\": 12, \"x\": 12, \"name\": \"grass\"}, {\"y\": 13, \"\r\nx\": 12, \"name\": \"grass\"}, {\"y\": 14, \"x\": 12, \"name\": \"grass\"}, {\"y\": 0, \"x\": 13\r\n, \"name\": \"grass\"}, {\"y\": 1, \"x\": 13, \"name\": \"grass\"}, {\"y\": 2, \"x\": 13, \"name\r\n\": \"grass\"}, {\"y\": 3, \"x\": 13, \"name\": \"grass\"}, {\"y\": 4, \"x\": 13, \"name\": \"gra\r\nss\"}, {\"y\": 5, \"x\": 13, \"name\": \"grass\"}, {\"y\": 6, \"x\": 13, \"name\": \"grass\"}, {\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l \"x\": 13, \"name\": \"grass\"}, {\"y\": 10, \"x\": 13, \"name\": \"grass\"}, {\"y\": 11, \"x\":\u001b[19;1Hx\": 12, \"name\": \"grass\"}, {\"y\": 14, \"x\": 12, \"name\": \"grass\"}, {\"y\": 0, \"x\": 13\r\n, \"name\": \"grass\"}, {\"y\": 1, \"x\": 13, \"name\": \"grass\"}, {\"y\": 2, \"x\": 13, \"name\r\n\": \"grass\"}, {\"y\": 3, \"x\": 13, \"name\": \"grass\"}, {\"y\": 4, \"x\": 13, \"name\": \"gra\r\nss\"}, {\"y\": 5, \"x\": 13, \"name\": \"grass\"}, {\"y\": 6, \"x\": 13, \"name\": \"grass\"}, {\r\n\"y\": 7, \"x\": 13, \"name\": \"grass\"}, {\"y\": 8, \"x\": 13, \"name\": \"grass\"}, {\"y\": 9,\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;2H\u001b[?25l13, \"name\": \"grass\"}, {\"y\": 12, \"x\": 13, \"name\": \"grass\"}, {\"y\": 13, \"x\": 13, \u001b[19;1H, \"name\": \"grass\"}, {\"y\": 1, \"x\": 13, \"name\": \"grass\"}, {\"y\": 2, \"x\": 13, \"name\r\n\": \"grass\"}, {\"y\": 3, \"x\": 13, \"name\": \"grass\"}, {\"y\": 4, \"x\": 13, \"name\": \"gra\r\nss\"}, {\"y\": 5, \"x\": 13, \"name\": \"grass\"}, {\"y\": 6, \"x\": 13, \"name\": \"grass\"}, {\r\n\"y\": 7, \"x\": 13, \"name\": \"grass\"}, {\"y\": 8, \"x\": 13, \"name\": \"grass\"}, {\"y\": 9,\r\n \"x\": 13, \"name\": \"grass\"}, {\"y\": 10, \"x\": 13, \"name\": \"grass\"}, {\"y\": 11, \"x\":\\\r\n\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\"name\": \"grass\"}, {\"y\": 14, \"x\": 13, \"name\": \"grass\"}, {\"y\": 0, \"x\": 14, \"name\"\u001b[19;1H\": \"grass\"}, {\"y\": 3, \"x\": 13, \"name\": \"grass\"}, {\"y\": 4, \"x\": 13, \"name\": \"gra\r\nss\"}, {\"y\": 5, \"x\": 13, \"name\": \"grass\"}, {\"y\": 6, \"x\": 13, \"name\": \"grass\"}, {\r\n\"y\": 7, \"x\": 13, \"name\": \"grass\"}, {\"y\": 8, \"x\": 13, \"name\": \"grass\"}, {\"y\": 9,\r\n \"x\": 13, \"name\": \"grass\"}, {\"y\": 10, \"x\": 13, \"name\": \"grass\"}, {\"y\": 11, \"x\":\\\r\n\u001b[C13, \"name\": \"grass\"}, {\"y\": 12, \"x\": 13, \"name\": \"grass\"}, {\"y\": 13, \"x\": 13, \u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l: \"grass\"}, {\"y\": 1, \"x\": 14, \"name\": \"grass\"}, {\"y\": 2, \"x\": 14, \"name\": \"gras\u001b[19;1Hss\"}, {\"y\": 5, \"x\": 13, \"name\": \"grass\"}, {\"y\": 6, \"x\": 13, \"name\": \"grass\"}, {\r\n\"y\": 7, \"x\": 13, \"name\": \"grass\"}, {\"y\": 8, \"x\": 13, \"name\": \"grass\"}, {\"y\": 9,\r\n \"x\": 13, \"name\": \"grass\"}, {\"y\": 10, \"x\": 13, \"name\": \"grass\"}, {\"y\": 11, \"x\":\\\r\n\u001b[C13, \"name\": \"grass\"}, {\"y\": 12, \"x\": 13, \"name\": \"grass\"}, {\"y\": 13, \"x\": 13, \r\n\"name\": \"grass\"}, {\"y\": 14, \"x\": 13, \"name\": \"grass\"}, {\"y\": 0, \"x\": 14, \"name\"\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25ls\"}, {\"y\": 3, \"x\": 14, \"name\": \"grass\"}, {\"y\": 4, \"x\": 14, \"name\": \"grass\"}, {\"\u001b[19;1H\"y\": 7, \"x\": 13, \"name\": \"grass\"}, {\"y\": 8, \"x\": 13, \"name\": \"grass\"}, {\"y\": 9,\r\n \"x\": 13, \"name\": \"grass\"}, {\"y\": 10, \"x\": 13, \"name\": \"grass\"}, {\"y\": 11, \"x\":\\\r\n\u001b[C13, \"name\": \"grass\"}, {\"y\": 12, \"x\": 13, \"name\": \"grass\"}, {\"y\": 13, \"x\": 13, \r\n\"name\": \"grass\"}, {\"y\": 14, \"x\": 13, \"name\": \"grass\"}, {\"y\": 0, \"x\": 14, \"name\"\r\n: \"grass\"}, {\"y\": 1, \"x\": 14, \"name\": \"grass\"}, {\"y\": 2, \"x\": 14, \"name\": \"gras\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25ly\": 5, \"x\": 14, \"name\": \"grass\"}, {\"y\": 6, \"x\": 14, \"name\": \"grass\"}, {\"y\": 7, \u001b[19;1H \"x\": 13, \"name\": \"grass\"}, {\"y\": 10, \"x\": 13, \"name\": \"grass\"}, {\"y\": 11, \"x\":\\\r\n\u001b[C13, \"name\": \"grass\"}, {\"y\": 12, \"x\": 13, \"name\": \"grass\"}, {\"y\": 13, \"x\": 13, \r\n\"name\": \"grass\"}, {\"y\": 14, \"x\": 13, \"name\": \"grass\"}, {\"y\": 0, \"x\": 14, \"name\"\r\n: \"grass\"}, {\"y\": 1, \"x\": 14, \"name\": \"grass\"}, {\"y\": 2, \"x\": 14, \"name\": \"gras\r\ns\"}, {\"y\": 3, \"x\": 14, \"name\": \"grass\"}, {\"y\": 4, \"x\": 14, \"name\": \"grass\"}, {\"\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\"x\": 14, \"name\": \"grass\"}, {\"y\": 8, \"x\": 14, \"name\": \"grass\"}, {\"y\": 9, \"x\": 14\u001b[19;2H13, \"name\": \"grass\"}, {\"y\": 12, \"x\": 13, \"name\": \"grass\"}, {\"y\": 13, \"x\": 13, \r\n\"name\": \"grass\"}, {\"y\": 14, \"x\": 13, \"name\": \"grass\"}, {\"y\": 0, \"x\": 14, \"name\"\r\n: \"grass\"}, {\"y\": 1, \"x\": 14, \"name\": \"grass\"}, {\"y\": 2, \"x\": 14, \"name\": \"gras\r\ns\"}, {\"y\": 3, \"x\": 14, \"name\": \"grass\"}, {\"y\": 4, \"x\": 14, \"name\": \"grass\"}, {\"\r\ny\": 5, \"x\": 14, \"name\": \"grass\"}, {\"y\": 6, \"x\": 14, \"name\": \"grass\"}, {\"y\": 7, \u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l, \"name\": \"grass\"}, {\"y\": 10, \"x\": 14, \"name\": \"grass\"}, {\"y\": 11, \"x\": 14, \"na\u001b[19;1H\"name\": \"grass\"}, {\"y\": 14, \"x\": 13, \"name\": \"grass\"}, {\"y\": 0, \"x\": 14, \"name\"\r\n: \"grass\"}, {\"y\": 1, \"x\": 14, \"name\": \"grass\"}, {\"y\": 2, \"x\": 14, \"name\": \"gras\r\ns\"}, {\"y\": 3, \"x\": 14, \"name\": \"grass\"}, {\"y\": 4, \"x\": 14, \"name\": \"grass\"}, {\"\r\ny\": 5, \"x\": 14, \"name\": \"grass\"}, {\"y\": 6, \"x\": 14, \"name\": \"grass\"}, {\"y\": 7, \r\n\"x\": 14, \"name\": \"grass\"}, {\"y\": 8, \"x\": 14, \"name\": \"grass\"}, {\"y\": 9, \"x\": 14\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lme\": \"grass\"}, {\"y\": 12, \"x\": 14, \"name\": \"grass\"}, {\"y\": 13, \"x\": 14, \"name\": \u001b[19;1H: \"grass\"}, {\"y\": 1, \"x\": 14, \"name\": \"grass\"}, {\"y\": 2, \"x\": 14, \"name\": \"gras\r\ns\"}, {\"y\": 3, \"x\": 14, \"name\": \"grass\"}, {\"y\": 4, \"x\": 14, \"name\": \"grass\"}, {\"\r\ny\": 5, \"x\": 14, \"name\": \"grass\"}, {\"y\": 6, \"x\": 14, \"name\": \"grass\"}, {\"y\": 7, \r\n\"x\": 14, \"name\": \"grass\"}, {\"y\": 8, \"x\": 14, \"name\": \"grass\"}, {\"y\": 9, \"x\": 14\r\n, \"name\": \"grass\"}, {\"y\": 10, \"x\": 14, \"name\": \"grass\"}, {\"y\": 11, \"x\": 14, \"na\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;19r\u001b[12;1H\u001b[2L\u001b[1;24r\u001b[24;1H\u001b[K\u001b[2;5H\u001b[?25l\u001b[32m5, \"\u001b[39;49mx\u001b[32m\": 13, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 6, \"\u001b[39;49mx\u001b[32m\": 13, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 7, \u001b[39;49m\r\n\u001b[Cx\u001b[32m\": 13, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 8, \"\u001b[39;49mx\u001b[32m\": 13, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 9, \"\u001b[39;49mx\u001b[32m\": 13\u001b[39;49m\r\n\u001b[32m, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 10, \"\u001b[39;49mx\u001b[32m\": 13, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 11, \"\u001b[39;49mx\u001b[32m\": 13, \"\u001b[39;49mna\r\nme\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 12, \"\u001b[39;49mx\u001b[32m\": 13, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 13, \"\u001b[39;49mx\u001b[32m\": 13, \"\u001b[39;49mname\u001b[32m\": \u001b[39;49m\r\n\u001b[32m\"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 14, \"\u001b[39;49mx\u001b[32m\": 13, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 0, \"\u001b[39;49mx\u001b[32m\": 14, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\r\n\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 1, \"\u001b[39;49mx\u001b[32m\": 14, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 2, \"\u001b[39;49mx\u001b[32m\": 14, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\r\n\u001b[32m\": 3, \"\u001b[39;49mx\u001b[32m\": 14, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 4, \"\u001b[39;49mx\u001b[32m\": 14, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 5, \"\u001b[39;49m\r\nx\u001b[32m\": 14, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 6, \"\u001b[39;49mx\u001b[32m\": 14, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 7, \"\u001b[39;49mx\u001b[32m\": 14\u001b[39;49m\r\n\u001b[C\u001b[32m\"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 8, \"\u001b[39;49mx\u001b[32m\": 14, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 9, \"\u001b[39;49mx\u001b[32m\": 14, \"\u001b[39;49mname\u001b[32m\"\u001b[39;49m\r\n\u001b[32m: \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 10, \"\u001b[39;49mx\u001b[32m\": 14, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 11, \"\u001b[39;49mx\u001b[32m\": 14, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgr\\\r\nass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 12, \"\u001b[39;49mx\u001b[32m\": 14, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 13, \"\u001b[39;49mx\u001b[32m\": 14, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}\u001b[39;49m\\\r\n\u001b[A\n\u001b[32m, {\"\u001b[39;49my\u001b[32m\": 14, \"\u001b[39;49mx\u001b[32m\": 14, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 0, \"\u001b[39;49mx\u001b[32m\": 15, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49m\u001b[K\u001b[20;1H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\u001b[7m-UU-:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   80% L48   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[13;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[13;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[13;67H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;19r\u001b[12;1H\u001b[2M\u001b[1;24r\u001b[24;1H\u001b[?25l\": 16, \"name\": \"grass\"}, {\"y\": 4, \"x\": 16, \"name\": \"grass\"}, {\"y\": 5, \"x\": 16, \u001b[H\n\u001b[32m: 1, \"\u001b[39;49mx\u001b[32m\": 15, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 2, \"\u001b[39;49mx\u001b[32m\": 15, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 3, \"\u001b[39;49mx\r\n\u001b[C\u001b[32m: 15, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 4, \"\u001b[39;49mx\u001b[32m\": 15, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 5, \"\u001b[39;49mx\u001b[32m\": 15, \u001b[39;49m\r\n\u001b[32m\"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 6, \"\u001b[39;49mx\u001b[32m\": 15, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 7, \"\u001b[39;49mx\u001b[32m\": 15, \"\u001b[39;49mname\u001b[32m\":\u001b[39;49m\r\n\u001b[32m \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 8, \"\u001b[39;49mx\u001b[32m\": 15, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 9, \"\u001b[39;49mx\u001b[32m\": 15, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\r\n\u001b[C\u001b[32m}, {\"\u001b[39;49my\u001b[32m\": 10, \"\u001b[39;49mx\u001b[32m\": 15, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 11, \"\u001b[39;49mx\u001b[32m\": 15, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\u001b[39;49m\r\n\u001b[Cy\u001b[32m\": 12, \"\u001b[39;49mx\u001b[32m\": 15, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 13, \"\u001b[39;49mx\u001b[32m\": 15, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": \u001b[39;49m\r\n\u001b[32m14, \"\u001b[39;49mx\u001b[32m\": 15, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 0, \"\u001b[39;49mx\u001b[32m\": 16, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 1, \"\u001b[39;49mx\r\n\u001b[32m: 16, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 2, \"\u001b[39;49mx\u001b[32m\": 16, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 3, \"\u001b[39;49mx\u001b[32m\": 16, \"\u001b[39;49m\r\nname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 4, \"\u001b[39;49mx\u001b[32m\": 16, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 5, \"\u001b[39;49mx\u001b[32m\": 16, \"\u001b[39;49mname\u001b[32m\": \u001b[39;49m\r\n\u001b[32m\"\u001b[39;49mgrass\u001b[32m\"}, {\"\u001b[39;49my\u001b[32m\": 6, \"\u001b[39;49mx\u001b[32m\": 16, \"\u001b[39;49mname\u001b[32m\": \"\u001b[39;49mgrass\u001b[32m\"}                                    \u001b[39;49m\r\n\u001b[18d\u001b[7m-UU-:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   83% L48   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n \"name\": \"grass\"}, {\"y\": 8, \"x\": 15, \"name\": \"grass\"}, {\"y\": 9, \"x\": 15, \"name\"\\\r\n\u001b[A\n: \"grass\"}, {\"y\": 10, \"x\": 15, \"name\": \"grass\"}, {\"y\": 11, \"x\": 15, \"name\": \"gr\\\r\nass\"}, {\"y\": 12, \"x\": 15, \"name\": \"grass\"}, {\"y\": 13, \"x\": 15, \"name\": \"grass\"}\\\r\n, {\"y\": 14, \"x\": 15, \"name\": \"grass\"}, {\"y\": 0, \"x\": 16, \"name\": \"grass\"}, {\"y\"\\\r\n: 1, \"x\": 16, \"name\": \"grass\"}, {\"y\": 2, \"x\": 16, \"name\": \"grass\"}, {\"y\": 3, \"x\\\r\n\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lname\": \"grass\"}, {\"y\": 4, \"x\": 17, \"name\": \"grass\"}, {\"y\": 5, \"x\": 17, \"name\":\u001b[19;3Hgrass\"}, {\"y\": 8, \"x\": 16, \"name\": \"grass\"}, {\"y\": 9, \"x\": 16, \"name\": \"grass\r\n\"}, {\"y\": 10, \"x\": 16, \"name\": \"grass\"}, {\"y\": 11, \"x\": 16, \"name\": \"grass\"}, {\r\n\"y\": 12, \"x\": 16, \"name\": \"grass\"}, {\"y\": 13, \"x\": 16, \"name\": \"grass\"}, {\"y\": \r\n14, \"x\": 16, \"name\": \"grass\"}, {\"y\": 0, \"x\": 17, \"name\": \"grass\"}, {\"y\": 1, \"x\u001b[23;4H7, \"name\": \"grass\"}, {\"y\": 2, \"x\": 17, \"name\": \"grass\"}, {\"y\": 3, \"x\": 17, \"\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\"grass\"}, {\"y\": 6, \"x\": 17, \"name\": \"grass\"}, {\"y\": 7, \"x\": 17, \"name\": \"grass\"\u001b[19;1H\"}, {\"y\": 10, \"x\": 16, \"name\": \"grass\"}, {\"y\": 11, \"x\": 16, \"name\": \"grass\"}, {\\\r\n\u001b[Cy\": 12, \"x\": 16, \"name\": \"grass\"}, {\"y\": 13, \"x\": 16, \"name\": \"grass\"}, {\"y\": \r\n14, \"x\": 16, \"name\": \"grass\"}, {\"y\": 0, \"x\": 17, \"name\": \"grass\"}, {\"y\": 1, \"x\"\r\n: 17, \"name\": \"grass\"}, {\"y\": 2, \"x\": 17, \"name\": \"grass\"}, {\"y\": 3, \"x\": 17, \r\nname\": \"grass\"}, {\"y\": 4, \"x\": 17, \"name\": \"grass\"}, {\"y\": 5, \"x\": 17, \"name\": \u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l}, {\"y\": 8, \"x\": 17, \"name\": \"grass\"}, {\"y\": 9, \"x\": 17, \"name\": \"grass\"}, {\"y\u001b[19;2Hy\": 12, \"x\": 16, \"name\": \"grass\"}, {\"y\": 13, \"x\": 16, \"name\": \"grass\"}, {\"y\": \r\n14, \"x\": 16, \"name\": \"grass\"}, {\"y\": 0, \"x\": 17, \"name\": \"grass\"}, {\"y\": 1, \"x\"\r\n: 17, \"name\": \"grass\"}, {\"y\": 2, \"x\": 17, \"name\": \"grass\"}, {\"y\": 3, \"x\": 17, \r\nname\": \"grass\"}, {\"y\": 4, \"x\": 17, \"name\": \"grass\"}, {\"y\": 5, \"x\": 17, \"name\": \r\n\"grass\"}, {\"y\": 6, \"x\": 17, \"name\": \"grass\"}, {\"y\": 7, \"x\": 17, \"name\": \"grass\"\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l: 10, \"x\": 17, \"name\": \"grass\"}, {\"y\": 11, \"x\": 17, \"name\": \"grass\"}, {\"y\": 12,\u001b[19;1H14, \"x\": 16, \"name\": \"grass\"}, {\"y\": 0, \"x\": 17, \"name\": \"grass\"}, {\"y\": 1, \"x\"\r\n: 17, \"name\": \"grass\"}, {\"y\": 2, \"x\": 17, \"name\": \"grass\"}, {\"y\": 3, \"x\": 17, \r\nname\": \"grass\"}, {\"y\": 4, \"x\": 17, \"name\": \"grass\"}, {\"y\": 5, \"x\": 17, \"name\": \r\n\"grass\"}, {\"y\": 6, \"x\": 17, \"name\": \"grass\"}, {\"y\": 7, \"x\": 17, \"name\": \"grass\"\r\n}, {\"y\": 8, \"x\": 17, \"name\": \"grass\"}, {\"y\": 9, \"x\": 17, \"name\": \"grass\"}, {\"y\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l \"x\": 17, \"name\": \"grass\"}, {\"y\": 13, \"x\": 17, \"name\": \"grass\"}, {\"y\": 14, \"x\":\u001b[19;1H: 17, \"name\": \"grass\"}, {\"y\": 2, \"x\": 17, \"name\": \"grass\"}, {\"y\": 3, \"x\": 17, \r\nname\": \"grass\"}, {\"y\": 4, \"x\": 17, \"name\": \"grass\"}, {\"y\": 5, \"x\": 17, \"name\": \r\n\"grass\"}, {\"y\": 6, \"x\": 17, \"name\": \"grass\"}, {\"y\": 7, \"x\": 17, \"name\": \"grass\"\r\n}, {\"y\": 8, \"x\": 17, \"name\": \"grass\"}, {\"y\": 9, \"x\": 17, \"name\": \"grass\"}, {\"y\r\n: 10, \"x\": 17, \"name\": \"grass\"}, {\"y\": 11, \"x\": 17, \"name\": \"grass\"}, {\"y\": 12,\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;2H\u001b[?25l17, \"name\": \"grass\"}, {\"y\": 0, \"x\": 18, \"name\": \"grass\"}, {\"y\": 1, \"x\": 18, \"n\u001b[19;1Hname\": \"grass\"}, {\"y\": 4, \"x\": 17, \"name\": \"grass\"}, {\"y\": 5, \"x\": 17, \"name\": \r\n\"grass\"}, {\"y\": 6, \"x\": 17, \"name\": \"grass\"}, {\"y\": 7, \"x\": 17, \"name\": \"grass\"\r\n}, {\"y\": 8, \"x\": 17, \"name\": \"grass\"}, {\"y\": 9, \"x\": 17, \"name\": \"grass\"}, {\"y\r\n: 10, \"x\": 17, \"name\": \"grass\"}, {\"y\": 11, \"x\": 17, \"name\": \"grass\"}, {\"y\": 12,\r\n \"x\": 17, \"name\": \"grass\"}, {\"y\": 13, \"x\": 17, \"name\": \"grass\"}, {\"y\": 14, \"x\":\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lame\": \"grass\"}, {\"y\": 2, \"x\": 18, \"name\": \"grass\"}, {\"y\": 3, \"x\": 18, \"name\": \"\u001b[19;1H\"grass\"}, {\"y\": 6, \"x\": 17, \"name\": \"grass\"}, {\"y\": 7, \"x\": 17, \"name\": \"grass\"\r\n}, {\"y\": 8, \"x\": 17, \"name\": \"grass\"}, {\"y\": 9, \"x\": 17, \"name\": \"grass\"}, {\"y\r\n: 10, \"x\": 17, \"name\": \"grass\"}, {\"y\": 11, \"x\": 17, \"name\": \"grass\"}, {\"y\": 12,\r\n \"x\": 17, \"name\": \"grass\"}, {\"y\": 13, \"x\": 17, \"name\": \"grass\"}, {\"y\": 14, \"x\":\r\n\u001b[C17, \"name\": \"grass\"}, {\"y\": 0, \"x\": 18, \"name\": \"grass\"}, {\"y\": 1, \"x\": 18, \"n\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lgrass\"}, {\"y\": 4, \"x\": 18, \"name\": \"grass\"}, {\"y\": 5, \"x\": 18, \"name\": \"grass\"}\u001b[19;1H}, {\"y\": 8, \"x\": 17, \"name\": \"grass\"}, {\"y\": 9, \"x\": 17, \"name\": \"grass\"}, {\"y\r\n: 10, \"x\": 17, \"name\": \"grass\"}, {\"y\": 11, \"x\": 17, \"name\": \"grass\"}, {\"y\": 12,\r\n \"x\": 17, \"name\": \"grass\"}, {\"y\": 13, \"x\": 17, \"name\": \"grass\"}, {\"y\": 14, \"x\":\r\n\u001b[C17, \"name\": \"grass\"}, {\"y\": 0, \"x\": 18, \"name\": \"grass\"}, {\"y\": 1, \"x\": 18, \"n\r\name\": \"grass\"}, {\"y\": 2, \"x\": 18, \"name\": \"grass\"}, {\"y\": 3, \"x\": 18, \"name\": \"\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l, {\"y\": 6, \"x\": 18, \"name\": \"grass\"}, {\"y\": 7, \"x\": 18, \"name\": \"grass\"}, {\"y\":\u001b[19;1H: 10, \"x\": 17, \"name\": \"grass\"}, {\"y\": 11, \"x\": 17, \"name\": \"grass\"}, {\"y\": 12,\r\n \"x\": 17, \"name\": \"grass\"}, {\"y\": 13, \"x\": 17, \"name\": \"grass\"}, {\"y\": 14, \"x\":\r\n\u001b[C17, \"name\": \"grass\"}, {\"y\": 0, \"x\": 18, \"name\": \"grass\"}, {\"y\": 1, \"x\": 18, \"n\r\name\": \"grass\"}, {\"y\": 2, \"x\": 18, \"name\": \"grass\"}, {\"y\": 3, \"x\": 18, \"name\": \"\r\ngrass\"}, {\"y\": 4, \"x\": 18, \"name\": \"grass\"}, {\"y\": 5, \"x\": 18, \"name\": \"grass\"}\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l 8, \"x\": 18, \"name\": \"grass\"}, {\"y\": 9, \"x\": 18, \"name\": \"grass\"}, {\"y\": 10, \"x\u001b[19;1H \"x\": 17, \"name\": \"grass\"}, {\"y\": 13, \"x\": 17, \"name\": \"grass\"}, {\"y\": 14, \"x\":\r\n\u001b[C17, \"name\": \"grass\"}, {\"y\": 0, \"x\": 18, \"name\": \"grass\"}, {\"y\": 1, \"x\": 18, \"n\r\name\": \"grass\"}, {\"y\": 2, \"x\": 18, \"name\": \"grass\"}, {\"y\": 3, \"x\": 18, \"name\": \"\r\ngrass\"}, {\"y\": 4, \"x\": 18, \"name\": \"grass\"}, {\"y\": 5, \"x\": 18, \"name\": \"grass\"}\r\n, {\"y\": 6, \"x\": 18, \"name\": \"grass\"}, {\"y\": 7, \"x\": 18, \"name\": \"grass\"}, {\"y\":\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\": 18, \"name\": \"grass\"}, {\"y\": 11, \"x\": 18, \"name\": \"grass\"}, {\"y\": 12, \"x\": 18\u001b[19;2H17, \"name\": \"grass\"}, {\"y\": 0, \"x\": 18, \"name\": \"grass\"}, {\"y\": 1, \"x\": 18, \"n\r\name\": \"grass\"}, {\"y\": 2, \"x\": 18, \"name\": \"grass\"}, {\"y\": 3, \"x\": 18, \"name\": \"\r\ngrass\"}, {\"y\": 4, \"x\": 18, \"name\": \"grass\"}, {\"y\": 5, \"x\": 18, \"name\": \"grass\"}\r\n, {\"y\": 6, \"x\": 18, \"name\": \"grass\"}, {\"y\": 7, \"x\": 18, \"name\": \"grass\"}, {\"y\":\r\n 8, \"x\": 18, \"name\": \"grass\"}, {\"y\": 9, \"x\": 18, \"name\": \"grass\"}, {\"y\": 10, \"x\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l, \"name\": \"grass\"}, {\"y\": 13, \"x\": 18, \"name\": \"grass\"}, {\"y\": 14, \"x\": 18, \"na\u001b[19;1Hame\": \"grass\"}, {\"y\": 2, \"x\": 18, \"name\": \"grass\"}, {\"y\": 3, \"x\": 18, \"name\": \"\r\ngrass\"}, {\"y\": 4, \"x\": 18, \"name\": \"grass\"}, {\"y\": 5, \"x\": 18, \"name\": \"grass\"}\r\n, {\"y\": 6, \"x\": 18, \"name\": \"grass\"}, {\"y\": 7, \"x\": 18, \"name\": \"grass\"}, {\"y\":\r\n 8, \"x\": 18, \"name\": \"grass\"}, {\"y\": 9, \"x\": 18, \"name\": \"grass\"}, {\"y\": 10, \"x\r\n\": 18, \"name\": \"grass\"}, {\"y\": 11, \"x\": 18, \"name\": \"grass\"}, {\"y\": 12, \"x\": 18\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lme\": \"grass\"}, {\"y\": 0, \"x\": 19, \"name\": \"grass\"}, {\"y\": 1, \"x\": 19, \"name\": \"g\u001b[19;1Hgrass\"}, {\"y\": 4, \"x\": 18, \"name\": \"grass\"}, {\"y\": 5, \"x\": 18, \"name\": \"grass\"}\r\n, {\"y\": 6, \"x\": 18, \"name\": \"grass\"}, {\"y\": 7, \"x\": 18, \"name\": \"grass\"}, {\"y\":\r\n 8, \"x\": 18, \"name\": \"grass\"}, {\"y\": 9, \"x\": 18, \"name\": \"grass\"}, {\"y\": 10, \"x\r\n\": 18, \"name\": \"grass\"}, {\"y\": 11, \"x\": 18, \"name\": \"grass\"}, {\"y\": 12, \"x\": 18\r\n, \"name\": \"grass\"}, {\"y\": 13, \"x\": 18, \"name\": \"grass\"}, {\"y\": 14, \"x\": 18, \"na\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lrass\"}, {\"y\": 2, \"x\": 19, \"name\": \"grass\"}, {\"y\": 3, \"x\": 19, \"name\": \"grass\"},\u001b[19;1H, {\"y\": 6, \"x\": 18, \"name\": \"grass\"}, {\"y\": 7, \"x\": 18, \"name\": \"grass\"}, {\"y\":\r\n 8, \"x\": 18, \"name\": \"grass\"}, {\"y\": 9, \"x\": 18, \"name\": \"grass\"}, {\"y\": 10, \"x\r\n\": 18, \"name\": \"grass\"}, {\"y\": 11, \"x\": 18, \"name\": \"grass\"}, {\"y\": 12, \"x\": 18\r\n, \"name\": \"grass\"}, {\"y\": 13, \"x\": 18, \"name\": \"grass\"}, {\"y\": 14, \"x\": 18, \"na\r\nme\": \"grass\"}, {\"y\": 0, \"x\": 19, \"name\": \"grass\"}, {\"y\": 1, \"x\": 19, \"name\": \"g\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l {\"y\": 4, \"x\": 19, \"name\": \"grass\"}, {\"y\": 5, \"x\": 19, \"name\": \"grass\"}, {\"y\": \u001b[19;1H 8, \"x\": 18, \"name\": \"grass\"}, {\"y\": 9, \"x\": 18, \"name\": \"grass\"}, {\"y\": 10, \"x\r\n\": 18, \"name\": \"grass\"}, {\"y\": 11, \"x\": 18, \"name\": \"grass\"}, {\"y\": 12, \"x\": 18\r\n, \"name\": \"grass\"}, {\"y\": 13, \"x\": 18, \"name\": \"grass\"}, {\"y\": 14, \"x\": 18, \"na\r\nme\": \"grass\"}, {\"y\": 0, \"x\": 19, \"name\": \"grass\"}, {\"y\": 1, \"x\": 19, \"name\": \"g\r\nrass\"}, {\"y\": 2, \"x\": 19, \"name\": \"grass\"}, {\"y\": 3, \"x\": 19, \"name\": \"grass\"},\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l6, \"x\": 19, \"name\": \"grass\"}, {\"y\": 7, \"x\": 19, \"name\": \"grass\"}, {\"y\": 8, \"x\":\u001b[19;1H\": 18, \"name\": \"grass\"}, {\"y\": 11, \"x\": 18, \"name\": \"grass\"}, {\"y\": 12, \"x\": 18\r\n, \"name\": \"grass\"}, {\"y\": 13, \"x\": 18, \"name\": \"grass\"}, {\"y\": 14, \"x\": 18, \"na\r\nme\": \"grass\"}, {\"y\": 0, \"x\": 19, \"name\": \"grass\"}, {\"y\": 1, \"x\": 19, \"name\": \"g\r\nrass\"}, {\"y\": 2, \"x\": 19, \"name\": \"grass\"}, {\"y\": 3, \"x\": 19, \"name\": \"grass\"},\r\n {\"y\": 4, \"x\": 19, \"name\": \"grass\"}, {\"y\": 5, \"x\": 19, \"name\": \"grass\"}, {\"y\": \u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l 19, \"name\": \"grass\"}, {\"y\": 9, \"x\": 19, \"name\": \"grass\"}, {\"y\": 10, \"x\": 19, \"\u001b[19;1H, \"name\": \"grass\"}, {\"y\": 13, \"x\": 18, \"name\": \"grass\"}, {\"y\": 14, \"x\": 18, \"na\r\nme\": \"grass\"}, {\"y\": 0, \"x\": 19, \"name\": \"grass\"}, {\"y\": 1, \"x\": 19, \"name\": \"g\r\nrass\"}, {\"y\": 2, \"x\": 19, \"name\": \"grass\"}, {\"y\": 3, \"x\": 19, \"name\": \"grass\"},\r\n {\"y\": 4, \"x\": 19, \"name\": \"grass\"}, {\"y\": 5, \"x\": 19, \"name\": \"grass\"}, {\"y\": \r\n6, \"x\": 19, \"name\": \"grass\"}, {\"y\": 7, \"x\": 19, \"name\": \"grass\"}, {\"y\": 8, \"x\":\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lname\": \"grass\"}, {\"y\": 11, \"x\": 19, \"name\": \"grass\"}, {\"y\": 12, \"x\": 19, \"name\u001b[19;1Hme\": \"grass\"}, {\"y\": 0, \"x\": 19, \"name\": \"grass\"}, {\"y\": 1, \"x\": 19, \"name\": \"g\r\nrass\"}, {\"y\": 2, \"x\": 19, \"name\": \"grass\"}, {\"y\": 3, \"x\": 19, \"name\": \"grass\"},\r\n {\"y\": 4, \"x\": 19, \"name\": \"grass\"}, {\"y\": 5, \"x\": 19, \"name\": \"grass\"}, {\"y\": \r\n6, \"x\": 19, \"name\": \"grass\"}, {\"y\": 7, \"x\": 19, \"name\": \"grass\"}, {\"y\": 8, \"x\":\r\n 19, \"name\": \"grass\"}, {\"y\": 9, \"x\": 19, \"name\": \"grass\"}, {\"y\": 10, \"x\": 19, \"\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l: \"grass\"}, {\"y\": 13, \"x\": 19, \"name\": \"grass\"}, {\"y\": 14, \"x\": 19, \"name\": \"gr\u001b[19;1Hrass\"}, {\"y\": 2, \"x\": 19, \"name\": \"grass\"}, {\"y\": 3, \"x\": 19, \"name\": \"grass\"},\r\n {\"y\": 4, \"x\": 19, \"name\": \"grass\"}, {\"y\": 5, \"x\": 19, \"name\": \"grass\"}, {\"y\": \r\n6, \"x\": 19, \"name\": \"grass\"}, {\"y\": 7, \"x\": 19, \"name\": \"grass\"}, {\"y\": 8, \"x\":\r\n 19, \"name\": \"grass\"}, {\"y\": 9, \"x\": 19, \"name\": \"grass\"}, {\"y\": 10, \"x\": 19, \"\r\nname\": \"grass\"}, {\"y\": 11, \"x\": 19, \"name\": \"grass\"}, {\"y\": 12, \"x\": 19, \"name\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lass\"}, {\"y\": 0, \"x\": 20, \"name\": \"grass\"}, {\"y\": 1, \"x\": 20, \"name\": \"grass\"}, \u001b[19;1H {\"y\": 4, \"x\": 19, \"name\": \"grass\"}, {\"y\": 5, \"x\": 19, \"name\": \"grass\"}, {\"y\": \r\n6, \"x\": 19, \"name\": \"grass\"}, {\"y\": 7, \"x\": 19, \"name\": \"grass\"}, {\"y\": 8, \"x\":\r\n 19, \"name\": \"grass\"}, {\"y\": 9, \"x\": 19, \"name\": \"grass\"}, {\"y\": 10, \"x\": 19, \"\r\nname\": \"grass\"}, {\"y\": 11, \"x\": 19, \"name\": \"grass\"}, {\"y\": 12, \"x\": 19, \"name\r\n: \"grass\"}, {\"y\": 13, \"x\": 19, \"name\": \"grass\"}, {\"y\": 14, \"x\": 19, \"name\": \"gr\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l{\"y\": 2, \"x\": 20, \"name\": \"grass\"}, {\"y\": 3, \"x\": 20, \"name\": \"grass\"}, {\"y\": 4\u001b[19;1H6, \"x\": 19, \"name\": \"grass\"}, {\"y\": 7, \"x\": 19, \"name\": \"grass\"}, {\"y\": 8, \"x\":\r\n 19, \"name\": \"grass\"}, {\"y\": 9, \"x\": 19, \"name\": \"grass\"}, {\"y\": 10, \"x\": 19, \"\r\nname\": \"grass\"}, {\"y\": 11, \"x\": 19, \"name\": \"grass\"}, {\"y\": 12, \"x\": 19, \"name\r\n: \"grass\"}, {\"y\": 13, \"x\": 19, \"name\": \"grass\"}, {\"y\": 14, \"x\": 19, \"name\": \"gr\r\nass\"}, {\"y\": 0, \"x\": 20, \"name\": \"grass\"}, {\"y\": 1, \"x\": 20, \"name\": \"grass\"}, \u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l, \"x\": 20, \"name\": \"grass\"}, {\"y\": 5, \"x\": 20, \"name\": \"grass\"}, {\"y\": 6, \"x\": \u001b[19;1H 19, \"name\": \"grass\"}, {\"y\": 9, \"x\": 19, \"name\": \"grass\"}, {\"y\": 10, \"x\": 19, \"\r\nname\": \"grass\"}, {\"y\": 11, \"x\": 19, \"name\": \"grass\"}, {\"y\": 12, \"x\": 19, \"name\r\n: \"grass\"}, {\"y\": 13, \"x\": 19, \"name\": \"grass\"}, {\"y\": 14, \"x\": 19, \"name\": \"gr\r\nass\"}, {\"y\": 0, \"x\": 20, \"name\": \"grass\"}, {\"y\": 1, \"x\": 20, \"name\": \"grass\"}, \r\n{\"y\": 2, \"x\": 20, \"name\": \"grass\"}, {\"y\": 3, \"x\": 20, \"name\": \"grass\"}, {\"y\": 4\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l20, \"name\": \"grass\"}, {\"y\": 7, \"x\": 20, \"name\": \"grass\"}, {\"y\": 8, \"x\": 20, \"na\u001b[19;1Hname\": \"grass\"}, {\"y\": 11, \"x\": 19, \"name\": \"grass\"}, {\"y\": 12, \"x\": 19, \"name\r\n: \"grass\"}, {\"y\": 13, \"x\": 19, \"name\": \"grass\"}, {\"y\": 14, \"x\": 19, \"name\": \"gr\r\nass\"}, {\"y\": 0, \"x\": 20, \"name\": \"grass\"}, {\"y\": 1, \"x\": 20, \"name\": \"grass\"}, \r\n{\"y\": 2, \"x\": 20, \"name\": \"grass\"}, {\"y\": 3, \"x\": 20, \"name\": \"grass\"}, {\"y\": 4\r\n, \"x\": 20, \"name\": \"grass\"}, {\"y\": 5, \"x\": 20, \"name\": \"grass\"}, {\"y\": 6, \"x\": \u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lme\": \"grass\"}, {\"y\": 9, \"x\": 20, \"name\": \"grass\"}, {\"y\": 10, \"x\": 20, \"name\": \"\u001b[19;1H: \"grass\"}, {\"y\": 13, \"x\": 19, \"name\": \"grass\"}, {\"y\": 14, \"x\": 19, \"name\": \"gr\r\nass\"}, {\"y\": 0, \"x\": 20, \"name\": \"grass\"}, {\"y\": 1, \"x\": 20, \"name\": \"grass\"}, \r\n{\"y\": 2, \"x\": 20, \"name\": \"grass\"}, {\"y\": 3, \"x\": 20, \"name\": \"grass\"}, {\"y\": 4\r\n, \"x\": 20, \"name\": \"grass\"}, {\"y\": 5, \"x\": 20, \"name\": \"grass\"}, {\"y\": 6, \"x\": \r\n20, \"name\": \"grass\"}, {\"y\": 7, \"x\": 20, \"name\": \"grass\"}, {\"y\": 8, \"x\": 20, \"na\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lgrass\"}, {\"y\": 11, \"x\": 20, \"name\": \"grass\"}, {\"y\": 12, \"x\": 20, \"name\": \"grass\u001b[19;1Hass\"}, {\"y\": 0, \"x\": 20, \"name\": \"grass\"}, {\"y\": 1, \"x\": 20, \"name\": \"grass\"}, \r\n{\"y\": 2, \"x\": 20, \"name\": \"grass\"}, {\"y\": 3, \"x\": 20, \"name\": \"grass\"}, {\"y\": 4\r\n, \"x\": 20, \"name\": \"grass\"}, {\"y\": 5, \"x\": 20, \"name\": \"grass\"}, {\"y\": 6, \"x\": \r\n20, \"name\": \"grass\"}, {\"y\": 7, \"x\": 20, \"name\": \"grass\"}, {\"y\": 8, \"x\": 20, \"na\r\nme\": \"grass\"}, {\"y\": 9, \"x\": 20, \"name\": \"grass\"}, {\"y\": 10, \"x\": 20, \"name\": \"\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\"}, {\"y\": 13, \"x\": 20, \"name\": \"grass\"}, {\"y\": 14, \"x\": 20, \"name\": \"grass\"}, {\u001b[19;1H{\"y\": 2, \"x\": 20, \"name\": \"grass\"}, {\"y\": 3, \"x\": 20, \"name\": \"grass\"}, {\"y\": 4\r\n, \"x\": 20, \"name\": \"grass\"}, {\"y\": 5, \"x\": 20, \"name\": \"grass\"}, {\"y\": 6, \"x\": \r\n20, \"name\": \"grass\"}, {\"y\": 7, \"x\": 20, \"name\": \"grass\"}, {\"y\": 8, \"x\": 20, \"na\r\nme\": \"grass\"}, {\"y\": 9, \"x\": 20, \"name\": \"grass\"}, {\"y\": 10, \"x\": 20, \"name\": \"\r\ngrass\"}, {\"y\": 11, \"x\": 20, \"name\": \"grass\"}, {\"y\": 12, \"x\": 20, \"name\": \"grass\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;2H\u001b[?25ly\": 0, \"x\": 21, \"name\": \"grass\"}, {\"y\": 1, \"x\": 21, \"name\": \"grass\"}, {\"y\": 2,\u001b[19;1H, \"x\": 20, \"name\": \"grass\"}, {\"y\": 5, \"x\": 20, \"name\": \"grass\"}, {\"y\": 6, \"x\": \r\n20, \"name\": \"grass\"}, {\"y\": 7, \"x\": 20, \"name\": \"grass\"}, {\"y\": 8, \"x\": 20, \"na\r\nme\": \"grass\"}, {\"y\": 9, \"x\": 20, \"name\": \"grass\"}, {\"y\": 10, \"x\": 20, \"name\": \"\r\ngrass\"}, {\"y\": 11, \"x\": 20, \"name\": \"grass\"}, {\"y\": 12, \"x\": 20, \"name\": \"grass\r\n\"}, {\"y\": 13, \"x\": 20, \"name\": \"grass\"}, {\"y\": 14, \"x\": 20, \"name\": \"grass\"}, {\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l \"x\": 21, \"name\": \"grass\"}, {\"y\": 3, \"x\": 21, \"name\": \"grass\"}, {\"y\": 4, \"x\": 2\u001b[19;1H20, \"name\": \"grass\"}, {\"y\": 7, \"x\": 20, \"name\": \"grass\"}, {\"y\": 8, \"x\": 20, \"na\r\nme\": \"grass\"}, {\"y\": 9, \"x\": 20, \"name\": \"grass\"}, {\"y\": 10, \"x\": 20, \"name\": \"\r\ngrass\"}, {\"y\": 11, \"x\": 20, \"name\": \"grass\"}, {\"y\": 12, \"x\": 20, \"name\": \"grass\r\n\"}, {\"y\": 13, \"x\": 20, \"name\": \"grass\"}, {\"y\": 14, \"x\": 20, \"name\": \"grass\"}, {\r\n\u001b[Cy\": 0, \"x\": 21, \"name\": \"grass\"}, {\"y\": 1, \"x\": 21, \"name\": \"grass\"}, {\"y\": 2,\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l1, \"name\": \"grass\"}, {\"y\": 5, \"x\": 21, \"name\": \"grass\"}, {\"y\": 6, \"x\": 21, \"nam\u001b[19;1Hme\": \"grass\"}, {\"y\": 9, \"x\": 20, \"name\": \"grass\"}, {\"y\": 10, \"x\": 20, \"name\": \"\r\ngrass\"}, {\"y\": 11, \"x\": 20, \"name\": \"grass\"}, {\"y\": 12, \"x\": 20, \"name\": \"grass\r\n\"}, {\"y\": 13, \"x\": 20, \"name\": \"grass\"}, {\"y\": 14, \"x\": 20, \"name\": \"grass\"}, {\r\n\u001b[Cy\": 0, \"x\": 21, \"name\": \"grass\"}, {\"y\": 1, \"x\": 21, \"name\": \"grass\"}, {\"y\": 2,\r\n \"x\": 21, \"name\": \"grass\"}, {\"y\": 3, \"x\": 21, \"name\": \"grass\"}, {\"y\": 4, \"x\": 2\\\r\n\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25le\": \"grass\"}, {\"y\": 7, \"x\": 21, \"name\": \"grass\"}, {\"y\": 8, \"x\": 21, \"name\": \"gr\u001b[19;1Hgrass\"}, {\"y\": 11, \"x\": 20, \"name\": \"grass\"}, {\"y\": 12, \"x\": 20, \"name\": \"grass\r\n\"}, {\"y\": 13, \"x\": 20, \"name\": \"grass\"}, {\"y\": 14, \"x\": 20, \"name\": \"grass\"}, {\r\n\u001b[Cy\": 0, \"x\": 21, \"name\": \"grass\"}, {\"y\": 1, \"x\": 21, \"name\": \"grass\"}, {\"y\": 2,\r\n \"x\": 21, \"name\": \"grass\"}, {\"y\": 3, \"x\": 21, \"name\": \"grass\"}, {\"y\": 4, \"x\": 2\\\r\n1, \"name\": \"grass\"}, {\"y\": 5, \"x\": 21, \"name\": \"grass\"}, {\"y\": 6, \"x\": 21, \"nam\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lass\"}, {\"y\": 9, \"x\": 21, \"name\": \"grass\"}, {\"y\": 10, \"x\": 21, \"name\": \"grass\"},\u001b[19;1H\"}, {\"y\": 13, \"x\": 20, \"name\": \"grass\"}, {\"y\": 14, \"x\": 20, \"name\": \"grass\"}, {\r\n\u001b[Cy\": 0, \"x\": 21, \"name\": \"grass\"}, {\"y\": 1, \"x\": 21, \"name\": \"grass\"}, {\"y\": 2,\r\n \"x\": 21, \"name\": \"grass\"}, {\"y\": 3, \"x\": 21, \"name\": \"grass\"}, {\"y\": 4, \"x\": 2\\\r\n1, \"name\": \"grass\"}, {\"y\": 5, \"x\": 21, \"name\": \"grass\"}, {\"y\": 6, \"x\": 21, \"nam\r\ne\": \"grass\"}, {\"y\": 7, \"x\": 21, \"name\": \"grass\"}, {\"y\": 8, \"x\": 21, \"name\": \"gr\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l {\"y\": 11, \"x\": 21, \"name\": \"grass\"}, {\"y\": 12, \"x\": 21, \"name\": \"grass\"}, {\"y\"\u001b[19;2Hy\": 0, \"x\": 21, \"name\": \"grass\"}, {\"y\": 1, \"x\": 21, \"name\": \"grass\"}, {\"y\": 2,\r\n \"x\": 21, \"name\": \"grass\"}, {\"y\": 3, \"x\": 21, \"name\": \"grass\"}, {\"y\": 4, \"x\": 2\\\r\n1, \"name\": \"grass\"}, {\"y\": 5, \"x\": 21, \"name\": \"grass\"}, {\"y\": 6, \"x\": 21, \"nam\r\ne\": \"grass\"}, {\"y\": 7, \"x\": 21, \"name\": \"grass\"}, {\"y\": 8, \"x\": 21, \"name\": \"gr\r\nass\"}, {\"y\": 9, \"x\": 21, \"name\": \"grass\"}, {\"y\": 10, \"x\": 21, \"name\": \"grass\"},\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l: 13, \"x\": 21, \"name\": \"grass\"}, {\"y\": 14, \"x\": 21, \"name\": \"grass\"}, {\"y\": 0, \u001b[19;1H \"x\": 21, \"name\": \"grass\"}, {\"y\": 3, \"x\": 21, \"name\": \"grass\"}, {\"y\": 4, \"x\": 2\\\r\n1, \"name\": \"grass\"}, {\"y\": 5, \"x\": 21, \"name\": \"grass\"}, {\"y\": 6, \"x\": 21, \"nam\r\ne\": \"grass\"}, {\"y\": 7, \"x\": 21, \"name\": \"grass\"}, {\"y\": 8, \"x\": 21, \"name\": \"gr\r\nass\"}, {\"y\": 9, \"x\": 21, \"name\": \"grass\"}, {\"y\": 10, \"x\": 21, \"name\": \"grass\"},\r\n {\"y\": 11, \"x\": 21, \"name\": \"grass\"}, {\"y\": 12, \"x\": 21, \"name\": \"grass\"}, {\"y\"\u001b[11;11H\u001b[?12l\u001b[?25h\u001b[?12;25hKilled\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ name\": \"grass\"}, {\"y\": 9, \"x\": 22, \r \"name\": \"grass\"}, {\"y\": 10, \"x\": 22, \"name\": \"grass\"}, {\"y\": 11, \"x\": 22, \"name \r\":^C\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ \u0007fg\b\b./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 119, in __init__\r\n    raise Exception(self.save())\r\nException: {\"grid\": {\"h\": 15, \"cells\": [{\"y\": 0, \"x\": 0, \"name\": \"grass\"}, {\"y\": 1, \"x\": 0, \"name\": \"grass\"}, {\"y\": 2, \"x\": 0, \"name\": \"grass\"}, {\"y\": 3, \"x\": 0, \"name\": \"grass\"}, {\"y\": 4, \"x\": 0, \"name\": \"grass\", \"unit\": {\"team\": 0, \"name\": \"Infantry\", \"icon\": \"i\"}}, {\"y\": 5, \"x\": 0, \"name\": \"grass\"}, {\"y\": 6, \"x\": 0, \"name\": \"grass\"}, {\"y\": 7, \"x\": 0, \"name\": \"grass\"}, {\"y\": 8, \"x\": 0, \"name\": \"grass\"}, {\"y\": 9, \"x\": 0, \"name\": \"grass\"}, {\"y\": 10, \"x\": 0, \"name\": \"grass\"}, {\"y\": 11, \"x\": 0, \"name\": \"grass\"}, {\"y\": 12, \"x\": 0, \"name\": \"grass\"}, {\"y\": 13, \"x\": 0, \"name\": \"grass\"}, {\"y\": 14, \"x\": 0, \"name\": \"grass\"}, {\"y\": 0, \"x\": 1, \"name\": \"grass\"}, {\"y\": 1, \"x\": 1, \"name\": \"grass\"}, {\"y\": 2, \"x\": 1, \"name\": \"grass\"}, {\"y\": 3, \"x\": 1, \"name\": \"grass\"}, {\"y\": 4, \"x\": 1, \"name\": \"grass\"}, {\"y\": 5, \"x\": 1, \"name\": \"grass\"}, {\"y\": 6, \"x\": 1, \"name\": \"grass\"}, {\"y\": 7, \"x\": 1, \"name\": \"grass\"}, {\"y\": 8, \"x\": 1, \"name\": \"grass\"}, {\"y\": 9, \"x\": 1, \"name\": \"grass\"}, {\"y\": 10, \"x\": 1, \"name\": \"grass\"}, {\"y\": 11, \"x\": 1, \"name\": \"grass\"}, {\"y\": 12, \"x\": 1, \"name\": \"grass\"}, {\"y\": 13, \"x\": 1, \"name\": \"grass\"}, {\"y\": 14, \"x\": 1, \"name\": \"grass\"}, {\"y\": 0, \"x\": 2, \"name\": \"grass\"}, {\"y\": 1, \"x\": 2, \"name\": \"grass\"}, {\"y\": 2, \"x\": 2, \"name\": \"grass\"}, {\"y\": 3, \"x\": 2, \"name\": \"grass\"}, {\"y\": 4, \"x\": 2, \"name\": \"grass\"}, {\"y\": 5, \"x\": 2, \"name\": \"grass\"}, {\"y\": 6, \"x\": 2, \"name\": \"grass\"}, {\"y\": 7, \"x\": 2, \"name\": \"grass\"}, {\"y\": 8, \"x\": 2, \"name\": \"grass\"}, {\"y\": 9, \"x\": 2, \"name\": \"grass\"}, {\"y\": 10, \"x\": 2, \"name\": \"grass\", \"unit\": {\"team\": 1, \"name\": \"Artillery\", \"icon\": \"L\"}}, {\"y\": 11, \"x\": 2, \"name\": \"grass\"}, {\"y\": 12, \"x\": 2, \"name\": \"grass\"}, {\"y\": 13, \"x\": 2, \"name\": \"grass\"}, {\"y\": 14, \"x\": 2, \"name\": \"grass\"}, {\"y\": 0, \"x\": 3, \"name\": \"grass\"}, {\"y\": 1, \"x\": 3, \"name\": \"grass\"}, {\"y\": 2, \"x\": 3, \"name\": \"grass\"}, {\"y\": 3, \"x\": 3, \"name\": \"grass\"}, {\"y\": 4, \"x\": 3, \"name\": \"grass\"}, {\"y\": 5, \"x\": 3, \"name\": \"grass\"}, {\"y\": 6, \"x\": 3, \"name\": \"grass\"}, {\"y\": 7, \"x\": 3, \"name\": \"grass\"}, {\"y\": 8, \"x\": 3, \"name\": \"grass\"}, {\"y\": 9, \"x\": 3, \"name\": \"grass\"}, {\"y\": 10, \"x\": 3, \"name\": \"grass\"}, {\"y\": 11, \"x\": 3, \"name\": \"grass\"}, {\"y\": 12, \"x\": 3, \"name\": \"grass\"}, {\"y\": 13, \"x\": 3, \"name\": \"grass\"}, {\"y\": 14, \"x\": 3, \"name\": \"grass\"}, {\"y\": 0, \"x\": 4, \"name\": \"grass\"}, {\"y\": 1, \"x\": 4, \"name\": \"grass\"}, {\"y\": 2, \"x\": 4, \"name\": \"grass\"}, {\"y\": 3, \"x\": 4, \"name\": \"grass\"}, {\"y\": 4, \"x\": 4, \"name\": \"grass\"}, {\"y\": 5, \"x\": 4, \"name\": \"grass\"}, {\"y\": 6, \"x\": 4, \"name\": \"grass\"}, {\"y\": 7, \"x\": 4, \"name\": \"grass\"}, {\"y\": 8, \"x\": 4, \"name\": \"grass\"}, {\"y\": 9, \"x\": 4, \"name\": \"grass\"}, {\"y\": 10, \"x\": 4, \"name\": \"grass\"}, {\"y\": 11, \"x\": 4, \"name\": \"grass\"}, {\"y\": 12, \"x\": 4, \"name\": \"grass\"}, {\"y\": 13, \"x\": 4, \"name\": \"grass\"}, {\"y\": 14, \"x\": 4, \"name\": \"grass\"}, {\"y\": 0, \"x\": 5, \"name\": \"grass\"}, {\"y\": 1, \"x\": 5, \"name\": \"grass\"}, {\"y\": 2, \"x\": 5, \"name\": \"grass\"}, {\"y\": 3, \"x\": 5, \"name\": \"grass\"}, {\"y\": 4, \"x\": 5, \"name\": \"grass\"}, {\"y\": 5, \"x\": 5, \"name\": \"grass\"}, {\"y\": 6, \"x\": 5, \"name\": \"grass\"}, {\"y\": 7, \"x\": 5, \"name\": \"grass\"}, {\"y\": 8, \"x\": 5, \"name\": \"grass\"}, {\"y\": 9, \"x\": 5, \"name\": \"grass\"}, {\"y\": 10, \"x\": 5, \"name\": \"grass\"}, {\"y\": 11, \"x\": 5, \"name\": \"grass\"}, {\"y\": 12, \"x\": 5, \"name\": \"grass\"}, {\"y\": 13, \"x\": 5, \"name\": \"grass\"}, {\"y\": 14, \"x\": 5, \"name\": \"grass\"}, {\"y\": 0, \"x\": 6, \"name\": \"grass\"}, {\"y\": 1, \"x\": 6, \"name\": \"grass\"}, {\"y\": 2, \"x\": 6, \"name\": \"grass\"}, {\"y\": 3, \"x\": 6, \"name\": \"grass\"}, {\"y\": 4, \"x\": 6, \"name\": \"grass\"}, {\"y\": 5, \"x\": 6, \"name\": \"grass\"}, {\"y\": 6, \"x\": 6, \"name\": \"grass\"}, {\"y\": 7, \"x\": 6, \"name\": \"grass\"}, {\"y\": 8, \"x\": 6, \"name\": \"grass\"}, {\"y\": 9, \"x\": 6, \"name\": \"grass\"}, {\"y\": 10, \"x\": 6, \"name\": \"grass\"}, {\"y\": 11, \"x\": 6, \"name\": \"grass\"}, {\"y\": 12, \"x\": 6, \"name\": \"grass\"}, {\"y\": 13, \"x\": 6, \"name\": \"grass\"}, {\"y\": 14, \"x\": 6, \"name\": \"grass\"}, {\"y\": 0, \"x\": 7, \"name\": \"grass\"}, {\"y\": 1, \"x\": 7, \"name\": \"grass\"}, {\"y\": 2, \"x\": 7, \"name\": \"grass\"}, {\"y\": 3, \"x\": 7, \"name\": \"grass\"}, {\"y\": 4, \"x\": 7, \"name\": \"grass\"}, {\"y\": 5, \"x\": 7, \"name\": \"grass\"}, {\"y\": 6, \"x\": 7, \"name\": \"grass\"}, {\"y\": 7, \"x\": 7, \"name\": \"grass\"}, {\"y\": 8, \"x\": 7, \"name\": \"grass\"}, {\"y\": 9, \"x\": 7, \"name\": \"grass\"}, {\"y\": 10, \"x\": 7, \"name\": \"grass\"}, {\"y\": 11, \"x\": 7, \"name\": \"grass\"}, {\"y\": 12, \"x\": 7, \"name\": \"grass\"}, {\"y\": 13, \"x\": 7, \"name\": \"grass\"}, {\"y\": 14, \"x\": 7, \"name\": \"grass\"}, {\"y\": 0, \"x\": 8, \"name\": \"grass\"}, {\"y\": 1, \"x\": 8, \"name\": \"grass\"}, {\"y\": 2, \"x\": 8, \"name\": \"grass\"}, {\"y\": 3, \"x\": 8, \"name\": \"grass\"}, {\"y\": 4, \"x\": 8, \"name\": \"grass\"}, {\"y\": 5, \"x\": 8, \"name\": \"grass\"}, {\"y\": 6, \"x\": 8, \"name\": \"grass\"}, {\"y\": 7, \"x\": 8, \"name\": \"grass\"}, {\"y\": 8, \"x\": 8, \"name\": \"grass\"}, {\"y\": 9, \"x\": 8, \"name\": \"grass\"}, {\"y\": 10, \"x\": 8, \"name\": \"grass\"}, {\"y\": 11, \"x\": 8, \"name\": \"grass\"}, {\"y\": 12, \"x\": 8, \"name\": \"grass\"}, {\"y\": 13, \"x\": 8, \"name\": \"grass\"}, {\"y\": 14, \"x\": 8, \"name\": \"grass\"}, {\"y\": 0, \"x\": 9, \"name\": \"grass\"}, {\"y\": 1, \"x\": 9, \"name\": \"grass\"}, {\"y\": 2, \"x\": 9, \"name\": \"grass\"}, {\"y\": 3, \"x\": 9, \"name\": \"grass\"}, {\"y\": 4, \"x\": 9, \"name\": \"grass\"}, {\"y\": 5, \"x\": 9, \"name\": \"grass\"}, {\"y\": 6, \"x\": 9, \"name\": \"grass\"}, {\"y\": 7, \"x\": 9, \"name\": \"grass\"}, {\"y\": 8, \"x\": 9, \"name\": \"grass\"}, {\"y\": 9, \"x\": 9, \"name\": \"grass\"}, {\"y\": 10, \"x\": 9, \"name\": \"grass\"}, {\"y\": 11, \"x\": 9, \"name\": \"grass\"}, {\"y\": 12, \"x\": 9, \"name\": \"grass\"}, {\"y\": 13, \"x\": 9, \"name\": \"grass\"}, {\"y\": 14, \"x\": 9, \"name\": \"grass\"}, {\"y\": 0, \"x\": 10, \"name\": \"grass\"}, {\"y\": 1, \"x\": 10, \"name\": \"grass\"}, {\"y\": 2, \"x\": 10, \"name\": \"grass\"}, {\"y\": 3, \"x\": 10, \"name\": \"grass\"}, {\"y\": 4, \"x\": 10, \"name\": \"grass\"}, {\"y\": 5, \"x\": 10, \"name\": \"grass\"}, {\"y\": 6, \"x\": 10, \"name\": \"grass\"}, {\"y\": 7, \"x\": 10, \"name\": \"grass\"}, {\"y\": 8, \"x\": 10, \"name\": \"grass\"}, {\"y\": 9, \"x\": 10, \"name\": \"grass\"}, {\"y\": 10, \"x\": 10, \"name\": \"grass\"}, {\"y\": 11, \"x\": 10, \"name\": \"grass\"}, {\"y\": 12, \"x\": 10, \"name\": \"grass\"}, {\"y\": 13, \"x\": 10, \"name\": \"grass\"}, {\"y\": 14, \"x\": 10, \"name\": \"grass\"}, {\"y\": 0, \"x\": 11, \"name\": \"grass\"}, {\"y\": 1, \"x\": 11, \"name\": \"grass\"}, {\"y\": 2, \"x\": 11, \"name\": \"grass\"}, {\"y\": 3, \"x\": 11, \"name\": \"grass\"}, {\"y\": 4, \"x\": 11, \"name\": \"grass\"}, {\"y\": 5, \"x\": 11, \"name\": \"grass\"}, {\"y\": 6, \"x\": 11, \"name\": \"grass\"}, {\"y\": 7, \"x\": 11, \"name\": \"grass\"}, {\"y\": 8, \"x\": 11, \"name\": \"grass\"}, {\"y\": 9, \"x\": 11, \"name\": \"grass\"}, {\"y\": 10, \"x\": 11, \"name\": \"grass\"}, {\"y\": 11, \"x\": 11, \"name\": \"grass\"}, {\"y\": 12, \"x\": 11, \"name\": \"grass\"}, {\"y\": 13, \"x\": 11, \"name\": \"grass\"}, {\"y\": 14, \"x\": 11, \"name\": \"grass\"}, {\"y\": 0, \"x\": 12, \"name\": \"grass\"}, {\"y\": 1, \"x\": 12, \"name\": \"grass\"}, {\"y\": 2, \"x\": 12, \"name\": \"grass\"}, {\"y\": 3, \"x\": 12, \"name\": \"grass\"}, {\"y\": 4, \"x\": 12, \"name\": \"grass\"}, {\"y\": 5, \"x\": 12, \"name\": \"grass\"}, {\"y\": 6, \"x\": 12, \"name\": \"grass\"}, {\"y\": 7, \"x\": 12, \"name\": \"grass\"}, {\"y\": 8, \"x\": 12, \"name\": \"grass\"}, {\"y\": 9, \"x\": 12, \"name\": \"grass\"}, {\"y\": 10, \"x\": 12, \"name\": \"grass\"}, {\"y\": 11, \"x\": 12, \"name\": \"grass\"}, {\"y\": 12, \"x\": 12, \"name\": \"grass\"}, {\"y\": 13, \"x\": 12, \"name\": \"grass\"}, {\"y\": 14, \"x\": 12, \"name\": \"grass\"}, {\"y\": 0, \"x\": 13, \"name\": \"grass\"}, {\"y\": 1, \"x\": 13, \"name\": \"grass\"}, {\"y\": 2, \"x\": 13, \"name\": \"grass\"}, {\"y\": 3, \"x\": 13, \"name\": \"grass\"}, {\"y\": 4, \"x\": 13, \"name\": \"grass\"}, {\"y\": 5, \"x\": 13, \"name\": \"grass\"}, {\"y\": 6, \"x\": 13, \"name\": \"grass\"}, {\"y\": 7, \"x\": 13, \"name\": \"grass\"}, {\"y\": 8, \"x\": 13, \"name\": \"grass\"}, {\"y\": 9, \"x\": 13, \"name\": \"grass\"}, {\"y\": 10, \"x\": 13, \"name\": \"grass\"}, {\"y\": 11, \"x\": 13, \"name\": \"grass\"}, {\"y\": 12, \"x\": 13, \"name\": \"grass\"}, {\"y\": 13, \"x\": 13, \"name\": \"grass\"}, {\"y\": 14, \"x\": 13, \"name\": \"grass\"}, {\"y\": 0, \"x\": 14, \"name\": \"grass\"}, {\"y\": 1, \"x\": 14, \"name\": \"grass\"}, {\"y\": 2, \"x\": 14, \"name\": \"grass\"}, {\"y\": 3, \"x\": 14, \"name\": \"grass\"}, {\"y\": 4, \"x\": 14, \"name\": \"grass\"}, {\"y\": 5, \"x\": 14, \"name\": \"grass\"}, {\"y\": 6, \"x\": 14, \"name\": \"grass\"}, {\"y\": 7, \"x\": 14, \"name\": \"grass\"}, {\"y\": 8, \"x\": 14, \"name\": \"grass\"}, {\"y\": 9, \"x\": 14, \"name\": \"grass\"}, {\"y\": 10, \"x\": 14, \"name\": \"grass\"}, {\"y\": 11, \"x\": 14, \"name\": \"grass\"}, {\"y\": 12, \"x\": 14, \"name\": \"grass\"}, {\"y\": 13, \"x\": 14, \"name\": \"grass\"}, {\"y\": 14, \"x\": 14, \"name\": \"grass\"}, {\"y\": 0, \"x\": 15, \"name\": \"grass\"}, {\"y\": 1, \"x\": 15, \"name\": \"grass\"}, {\"y\": 2, \"x\": 15, \"name\": \"grass\"}, {\"y\": 3, \"x\": 15, \"name\": \"grass\"}, {\"y\": 4, \"x\": 15, \"name\": \"grass\"}, {\"y\": 5, \"x\": 15, \"name\": \"grass\"}, {\"y\": 6, \"x\": 15, \"name\": \"grass\"}, {\"y\": 7, \"x\": 15, \"name\": \"grass\"}, {\"y\": 8, \"x\": 15, \"name\": \"grass\"}, {\"y\": 9, \"x\": 15, \"name\": \"grass\"}, {\"y\": 10, \"x\": 15, \"name\": \"grass\"}, {\"y\": 11, \"x\": 15, \"name\": \"grass\"}, {\"y\": 12, \"x\": 15, \"name\": \"grass\"}, {\"y\": 13, \"x\": 15, \"name\": \"grass\"}, {\"y\": 14, \"x\": 15, \"name\": \"grass\"}, {\"y\": 0, \"x\": 16, \"name\": \"grass\"}, {\"y\": 1, \"x\": 16, \"name\": \"grass\"}, {\"y\": 2, \"x\": 16, \"name\": \"grass\"}, {\"y\": 3, \"x\": 16, \"name\": \"grass\"}, {\"y\": 4, \"x\": 16, \"name\": \"grass\"}, {\"y\": 5, \"x\": 16, \"name\": \"grass\"}, {\"y\": 6, \"x\": 16, \"name\": \"grass\"}, {\"y\": 7, \"x\": 16, \"name\": \"grass\"}, {\"y\": 8, \"x\": 16, \"name\": \"grass\"}, {\"y\": 9, \"x\": 16, \"name\": \"grass\"}, {\"y\": 10, \"x\": 16, \"name\": \"grass\"}, {\"y\": 11, \"x\": 16, \"name\": \"grass\"}, {\"y\": 12, \"x\": 16, \"name\": \"grass\"}, {\"y\": 13, \"x\": 16, \"name\": \"grass\"}, {\"y\": 14, \"x\": 16, \"name\": \"grass\"}, {\"y\": 0, \"x\": 17, \"name\": \"grass\"}, {\"y\": 1, \"x\": 17, \"name\": \"grass\"}, {\"y\": 2, \"x\": 17, \"name\": \"grass\"}, {\"y\": 3, \"x\": 17, \"name\": \"grass\"}, {\"y\": 4, \"x\": 17, \"name\": \"grass\"}, {\"y\": 5, \"x\": 17, \"name\": \"grass\"}, {\"y\": 6, \"x\": 17, \"name\": \"grass\"}, {\"y\": 7, \"x\": 17, \"name\": \"grass\"}, {\"y\": 8, \"x\": 17, \"name\": \"grass\"}, {\"y\": 9, \"x\": 17, \"name\": \"grass\"}, {\"y\": 10, \"x\": 17, \"name\": \"grass\"}, {\"y\": 11, \"x\": 17, \"name\": \"grass\"}, {\"y\": 12, \"x\": 17, \"name\": \"grass\"}, {\"y\": 13, \"x\": 17, \"name\": \"grass\"}, {\"y\": 14, \"x\": 17, \"name\": \"grass\"}, {\"y\": 0, \"x\": 18, \"name\": \"grass\"}, {\"y\": 1, \"x\": 18, \"name\": \"grass\"}, {\"y\": 2, \"x\": 18, \"name\": \"grass\"}, {\"y\": 3, \"x\": 18, \"name\": \"grass\"}, {\"y\": 4, \"x\": 18, \"name\": \"grass\"}, {\"y\": 5, \"x\": 18, \"name\": \"grass\"}, {\"y\": 6, \"x\": 18, \"name\": \"grass\"}, {\"y\": 7, \"x\": 18, \"name\": \"grass\"}, {\"y\": 8, \"x\": 18, \"name\": \"grass\"}, {\"y\": 9, \"x\": 18, \"name\": \"grass\"}, {\"y\": 10, \"x\": 18, \"name\": \"grass\"}, {\"y\": 11, \"x\": 18, \"name\": \"grass\"}, {\"y\": 12, \"x\": 18, \"name\": \"grass\"}, {\"y\": 13, \"x\": 18, \"name\": \"grass\"}, {\"y\": 14, \"x\": 18, \"name\": \"grass\"}, {\"y\": 0, \"x\": 19, \"name\": \"grass\"}, {\"y\": 1, \"x\": 19, \"name\": \"grass\"}, {\"y\": 2, \"x\": 19, \"name\": \"grass\"}, {\"y\": 3, \"x\": 19, \"name\": \"grass\"}, {\"y\": 4, \"x\": 19, \"name\": \"grass\"}, {\"y\": 5, \"x\": 19, \"name\": \"grass\"}, {\"y\": 6, \"x\": 19, \"name\": \"grass\"}, {\"y\": 7, \"x\": 19, \"name\": \"grass\"}, {\"y\": 8, \"x\": 19, \"name\": \"grass\"}, {\"y\": 9, \"x\": 19, \"name\": \"grass\"}, {\"y\": 10, \"x\": 19, \"name\": \"grass\"}, {\"y\": 11, \"x\": 19, \"name\": \"grass\"}, {\"y\": 12, \"x\": 19, \"name\": \"grass\"}, {\"y\": 13, \"x\": 19, \"name\": \"grass\"}, {\"y\": 14, \"x\": 19, \"name\": \"grass\"}, {\"y\": 0, \"x\": 20, \"name\": \"grass\"}, {\"y\": 1, \"x\": 20, \"name\": \"grass\"}, {\"y\": 2, \"x\": 20, \"name\": \"grass\"}, {\"y\": 3, \"x\": 20, \"name\": \"grass\"}, {\"y\": 4, \"x\": 20, \"name\": \"grass\"}, {\"y\": 5, \"x\": 20, \"name\": \"grass\"}, {\"y\": 6, \"x\": 20, \"name\": \"grass\"}, {\"y\": 7, \"x\": 20, \"name\": \"grass\"}, {\"y\": 8, \"x\": 20, \"name\": \"grass\"}, {\"y\": 9, \"x\": 20, \"name\": \"grass\"}, {\"y\": 10, \"x\": 20, \"name\": \"grass\"}, {\"y\": 11, \"x\": 20, \"name\": \"grass\"}, {\"y\": 12, \"x\": 20, \"name\": \"grass\"}, {\"y\": 13, \"x\": 20, \"name\": \"grass\"}, {\"y\": 14, \"x\": 20, \"name\": \"grass\"}, {\"y\": 0, \"x\": 21, \"name\": \"grass\"}, {\"y\": 1, \"x\": 21, \"name\": \"grass\"}, {\"y\": 2, \"x\": 21, \"name\": \"grass\"}, {\"y\": 3, \"x\": 21, \"name\": \"grass\"}, {\"y\": 4, \"x\": 21, \"name\": \"grass\"}, {\"y\": 5, \"x\": 21, \"name\": \"grass\"}, {\"y\": 6, \"x\": 21, \"name\": \"grass\"}, {\"y\": 7, \"x\": 21, \"name\": \"grass\"}, {\"y\": 8, \"x\": 21, \"name\": \"grass\"}, {\"y\": 9, \"x\": 21, \"name\": \"grass\"}, {\"y\": 10, \"x\": 21, \"name\": \"grass\"}, {\"y\": 11, \"x\": 21, \"name\": \"grass\"}, {\"y\": 12, \"x\": 21, \"name\": \"grass\"}, {\"y\": 13, \"x\": 21, \"name\": \"grass\"}, {\"y\": 14, \"x\": 21, \"name\": \"grass\"}, {\"y\": 0, \"x\": 22, \"name\": \"grass\"}, {\"y\": 1, \"x\": 22, \"name\": \"grass\"}, {\"y\": 2, \"x\": 22, \"name\": \"grass\"}, {\"y\": 3, \"x\": 22, \"name\": \"grass\"}, {\"y\": 4, \"x\": 22, \"name\": \"grass\"}, {\"y\": 5, \"x\": 22, \"name\": \"grass\"}, {\"y\": 6, \"x\": 22, \"name\": \"grass\"}, {\"y\": 7, \"x\": 22, \"name\": \"grass\"}, {\"y\": 8, \"x\": 22, \"name\": \"grass\"}, {\"y\": 9, \"x\": 22, \"name\": \"grass\"}, {\"y\": 10, \"x\": 22, \"name\": \"grass\"}, {\"y\": 11, \"x\": 22, \"name\": \"grass\"}, {\"y\": 12, \"x\": 22, \"name\": \"grass\"}, {\"y\": 13, \"x\": 22, \"name\": \"grass\"}, {\"y\": 14, \"x\": 22, \"name\": \"grass\"}, {\"y\": 0, \"x\": 23, \"name\": \"grass\"}, {\"y\": 1, \"x\": 23, \"name\": \"grass\"}, {\"y\": 2, \"x\": 23, \"name\": \"grass\"}, {\"y\": 3, \"x\": 23, \"name\": \"grass\"}, {\"y\": 4, \"x\": 23, \"name\": \"grass\"}, {\"y\": 5, \"x\": 23, \"name\": \"grass\"}, {\"y\": 6, \"x\": 23, \"name\": \"grass\"}, {\"y\": 7, \"x\": 23, \"name\": \"grass\"}, {\"y\": 8, \"x\": 23, \"name\": \"grass\"}, {\"y\": 9, \"x\": 23, \"name\": \"grass\"}, {\"y\": 10, \"x\": 23, \"name\": \"grass\"}, {\"y\": 11, \"x\": 23, \"name\": \"grass\"}, {\"y\": 12, \"x\": 23, \"name\": \"grass\"}, {\"y\": 13, \"x\": 23, \"name\": \"grass\"}, {\"y\": 14, \"x\": 23, \"name\": \"grass\"}, {\"y\": 0, \"x\": 24, \"name\": \"grass\"}, {\"y\": 1, \"x\": 24, \"name\": \"grass\"}, {\"y\": 2, \"x\": 24, \"name\": \"grass\"}, {\"y\": 3, \"x\": 24, \"name\": \"grass\"}, {\"y\": 4, \"x\": 24, \"name\": \"grass\"}, {\"y\": 5, \"x\": 24, \"name\": \"grass\"}, {\"y\": 6, \"x\": 24, \"name\": \"grass\"}, {\"y\": 7, \"x\": 24, \"name\": \"grass\"}, {\"y\": 8, \"x\": 24, \"name\": \"grass\"}, {\"y\": 9, \"x\": 24, \"name\": \"grass\"}, {\"y\": 10, \"x\": 24, \"name\": \"grass\"}, {\"y\": 11, \"x\": 24, \"name\": \"grass\"}, {\"y\": 12, \"x\": 24, \"name\": \"grass\"}, {\"y\": 13, \"x\": 24, \"name\": \"grass\"}, {\"y\": 14, \"x\": 24, \"name\": \"grass\"}, {\"y\": 0, \"x\": 25, \"name\": \"grass\"}, {\"y\": 1, \"x\": 25, \"name\": \"grass\"}, {\"y\": 2, \"x\": 25, \"name\": \"grass\"}, {\"y\": 3, \"x\": 25, \"name\": \"grass\"}, {\"y\": 4, \"x\": 25, \"name\": \"grass\"}, {\"y\": 5, \"x\": 25, \"name\": \"grass\"}, {\"y\": 6, \"x\": 25, \"name\": \"grass\"}, {\"y\": 7, \"x\": 25, \"name\": \"grass\"}, {\"y\": 8, \"x\": 25, \"name\": \"grass\"}, {\"y\": 9, \"x\": 25, \"name\": \"grass\"}, {\"y\": 10, \"x\": 25, \"name\": \"grass\"}, {\"y\": 11, \"x\": 25, \"name\": \"grass\"}, {\"y\": 12, \"x\": 25, \"name\": \"grass\"}, {\"y\": 13, \"x\": 25, \"name\": \"grass\"}, {\"y\": 14, \"x\": 25, \"name\": \"grass\"}, {\"y\": 0, \"x\": 26, \"name\": \"grass\"}, {\"y\": 1, \"x\": 26, \"name\": \"grass\"}, {\"y\": 2, \"x\": 26, \"name\": \"grass\"}, {\"y\": 3, \"x\": 26, \"name\": \"grass\"}, {\"y\": 4, \"x\": 26, \"name\": \"grass\"}, {\"y\": 5, \"x\": 26, \"name\": \"grass\"}, {\"y\": 6, \"x\": 26, \"name\": \"grass\"}, {\"y\": 7, \"x\": 26, \"name\": \"grass\"}, {\"y\": 8, \"x\": 26, \"name\": \"grass\"}, {\"y\": 9, \"x\": 26, \"name\": \"grass\"}, {\"y\": 10, \"x\": 26, \"name\": \"grass\"}, {\"y\": 11, \"x\": 26, \"name\": \"grass\"}, {\"y\": 12, \"x\": 26, \"name\": \"grass\"}, {\"y\": 13, \"x\": 26, \"name\": \"grass\"}, {\"y\": 14, \"x\": 26, \"name\": \"grass\"}, {\"y\": 0, \"x\": 27, \"name\": \"grass\"}, {\"y\": 1, \"x\": 27, \"name\": \"grass\"}, {\"y\": 2, \"x\": 27, \"name\": \"grass\"}, {\"y\": 3, \"x\": 27, \"name\": \"grass\"}, {\"y\": 4, \"x\": 27, \"name\": \"grass\"}, {\"y\": 5, \"x\": 27, \"name\": \"grass\"}, {\"y\": 6, \"x\": 27, \"name\": \"grass\"}, {\"y\": 7, \"x\": 27, \"name\": \"grass\"}, {\"y\": 8, \"x\": 27, \"name\": \"grass\"}, {\"y\": 9, \"x\": 27, \"name\": \"grass\"}, {\"y\": 10, \"x\": 27, \"name\": \"grass\"}, {\"y\": 11, \"x\": 27, \"name\": \"grass\"}, {\"y\": 12, \"x\": 27, \"name\": \"grass\"}, {\"y\": 13, \"x\": 27, \"name\": \"grass\"}, {\"y\": 14, \"x\": 27, \"name\": \"grass\"}, {\"y\": 0, \"x\": 28, \"name\": \"grass\"}, {\"y\": 1, \"x\": 28, \"name\": \"grass\"}, {\"y\": 2, \"x\": 28, \"name\": \"grass\"}, {\"y\": 3, \"x\": 28, \"name\": \"grass\"}, {\"y\": 4, \"x\": 28, \"name\": \"grass\"}, {\"y\": 5, \"x\": 28, \"name\": \"grass\"}, {\"y\": 6, \"x\": 28, \"name\": \"grass\"}, {\"y\": 7, \"x\": 28, \"name\": \"grass\"}, {\"y\": 8, \"x\": 28, \"name\": \"grass\"}, {\"y\": 9, \"x\": 28, \"name\": \"grass\"}, {\"y\": 10, \"x\": 28, \"name\": \"grass\"}, {\"y\": 11, \"x\": 28, \"name\": \"grass\"}, {\"y\": 12, \"x\": 28, \"name\": \"grass\"}, {\"y\": 13, \"x\": 28, \"name\": \"grass\"}, {\"y\": 14, \"x\": 28, \"name\": \"grass\"}, {\"y\": 0, \"x\": 29, \"name\": \"grass\"}, {\"y\": 1, \"x\": 29, \"name\": \"grass\"}, {\"y\": 2, \"x\": 29, \"name\": \"grass\"}, {\"y\": 3, \"x\": 29, \"name\": \"grass\"}, {\"y\": 4, \"x\": 29, \"name\": \"grass\"}, {\"y\": 5, \"x\": 29, \"name\": \"grass\"}, {\"y\": 6, \"x\": 29, \"name\": \"grass\"}, {\"y\": 7, \"x\": 29, \"name\": \"grass\"}, {\"y\": 8, \"x\": 29, \"name\": \"grass\"}, {\"y\": 9, \"x\": 29, \"name\": \"grass\"}, {\"y\": 10, \"x\": 29, \"name\": \"grass\"}, {\"y\": 11, \"x\": 29, \"name\": \"grass\"}, {\"y\": 12, \"x\": 29, \"name\": \"grass\"}, {\"y\": 13, \"x\": 29, \"name\": \"grass\"}, {\"y\": 14, \"x\": 29, \"name\": \"grass\"}], \"name\": \"Hello World\", \"w\": 30, \"teams\": [{\"color\": \"r\", \"name\": \"Red\"}, {\"color\": \"b\", \"name\": \"Blue\"}]}, \"history\": [[[[0, 4], [1, 4], \"Wait\"]]]}\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nbash: fg: current: no such job\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ emacsx\b\u001b[K\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[H\u001b[2J\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[H\u001b[2J\u001b[23d\u001b[?25l\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Fundamental) ---------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lLoading 00debian-vars...\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;25H\u001b[?25ldone\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;9H\u001b[?25l/etc/emacs/site-start.d/50autoconf.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;58H\u001b[?25ldone\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;35H\u001b[?25ldictionaries-common.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;9H\u001b[?25ldebian-ispell...\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;9H\u001b[?25l/var/cache/dictionaries-common/emacsen-ispell-default.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25le\u001b[K\u001b[H\u001b[7mFile Edit Options Buffers Tools Help                                            \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Fundamental) ---------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\nLoading /var/cache/dictionaries-common/emacsen-ispell-default.el (source)...don\\\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[A\t\u001b[?25ldebian-ispell...done\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;9H\u001b[?25l/var/cache/dictionaries-common/emacsen-ispell-dicts.el (source)...\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;75H\u001b[?25ldone\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;10H\u001b[?25letc/emacs/site-start.d/50dictionaries-common\u001b[6P\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[>0c\u001b[24d\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Lisp-Interaction Help                           \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[7m-UUU:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Lisp Interaction) ----------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\nLoading /etc/emacs/site-start.d/50dictionaries-common.el (source)...done\u001b[K\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;23r\u001b[22;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[?25lFor information about GNU Emacs and the GNU system, type C-h C-a.\u001b[22;1H\u001b[K\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lFor information about GNU Emacs and the GNU system, type C-h C-a.\u001b[K\u001b[H\u001b[7mFile Edit Options Buffers Tools Help                                            \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\nWelcome to GNU Emacs, one component of the GNU/Linux operating system.\u001b[K\r\n\u001b[K\nGet help           C-h  (Hold down CTRL and press h)\u001b[K\r\n\u001b[4m\u001b[34mEmacs manual\u001b[0m\u001b[39;49m       C-h r        \u001b[4m\u001b[34mBrowse manuals\u001b[0m\u001b[39;49m     C-h i\u001b[K\r\n\u001b[4m\u001b[34mEmacs tutorial\u001b[0m\u001b[39;49m     C-h t        Undo changes       C-x u\u001b[K\r\n\u001b[4m\u001b[34mBuy manuals\u001b[0m\u001b[39;49m        C-h RET      Exit Emacs         C-x C-c\u001b[K\r\n\u001b[4m\u001b[34mActivate menubar\u001b[0m\u001b[39;49m   M-`\u001b[K\r\n(`C-' means use the CTRL key.  `M-' means use the Meta (or Alt) key.\u001b[K\r\nIf you have no Meta key, you may instead type ESC followed by the character.)\u001b[K\r\nUseful tasks:\u001b[K\r\n\u001b[4m\u001b[34mVisit New File\u001b[0m\u001b[39;49m                  \u001b[4m\u001b[34mOpen Home Directory\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[4m\u001b[34mCustomize Startup\u001b[0m\u001b[39;49m               \u001b[4m\u001b[34mOpen *scratch* buffer\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\nGNU Emacs 24.3.1 (i686-pc-linux-gnu)\u001b[K\r\n of 2013-07-26 on komainu, modified by Debian\u001b[K\r\nCopyright (C) 2013 Free Software Foundation, Inc.\u001b[K\r\n\u001b[K\nGNU Emacs comes with ABSOLUTELY NO WARRANTY; type C-h C-w for \u001b[4m\u001b[34mfull details\u001b[0m\u001b[39;49m.\u001b[K\r\nEmacs is Free Software--Free as in Freedom--so you can redistribute copies\u001b[K\r\nof Emacs and modify it; type C-h C-c to see \u001b[4m\u001b[34mthe conditions\u001b[0m\u001b[39;49m.\u001b[K\r\nType C-h C-o for information on \u001b[4m\u001b[34mgetting the latest version\u001b[0m\u001b[39;49m.\u001b[K\r\n\u001b[7m-UUU:%%--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*GNU Emacs* \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1     (Fundamental) ---------------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2d\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default *scratch*): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[31m;; This buffer is for notes you don't want to save, and for Lisp evaluation.    \u001b[39;49m\r\n\u001b[31m;; If you want to create a file, visit that file with C-x C-f,                  \u001b[39;49m\r\n\u001b[31m;; then enter the text in that file's own buffer.                               \u001b[39;49m\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;6H\u001b[7m----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L5     (Lisp Interaction) \u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lK\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l*\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\b\u001b[?25l*\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lH\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lJ\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lS\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l*\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lj\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l*\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lY\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lO\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\t\b\b\b\u001b[K\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lj\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[C\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[23;35H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;60H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\b\b\u001b[?25l.\u001b[23;35H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;59H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;29H\u001b[?25l\u001b[7mTop L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[23;29H\u001b[?25l\u001b[7mAll L19\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;29H\u001b[?25l\u001b[7mTop L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l * The game replays its history when a new rules object is created\u001b[K\r\n * You can export the json structure of a game to a string (which can trivially\u001b[K\r\n   be saved to a file... I'll figure that out much later).\u001b[K\r\n\nThe other thing I really wanted to get around to was a nice sidebar on the\u001b[K\r\nright side of the terminal that has all of the information for the tiles you\u001b[K\r\nhover over. I image three boxes.\r\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L22\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[22;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\b\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\b\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\t\u001b[C\u001b[C\b\u001b[?25l$\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l3\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l0\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l0\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[?25lB\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[?25l$\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l3\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l0\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l0\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;29H\u001b[?25l\u001b[7m51% L31\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;2H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25lP\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\b\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lF\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l+\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\t\b\u001b[?25l+\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l3\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\b\b\b\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\n\u001b[?25l   ----------\u001b[K\u001b[23;35H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[23;29H\u001b[?25l\u001b[7m49\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\n\u001b[?25l   ----------\u001b[K\u001b[23;35H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[?25lH\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lP\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l8\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l6\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l%\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\n\u001b[?25l   ----------\u001b[K\u001b[23;34H\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;30H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;3H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;2H\u001b[?25l  Blue  $300\u001b[K\r\n\u001b[C  ----------\u001b[K\u001b[4;4HPlains\u001b[K\u001b[5;4HDEF +1\r\n\u001b[K\n   Infantry\u001b[K\r\n   HP 86%\u001b[K\r\n\n\n\u001b[K\n\u001b[K\u001b[13;4H----------\r\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\n\u001b[K\u001b[23;29H\u001b[7mBot L33\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[?25lD\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lE\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lF\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l+\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[?25lH\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lP\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l9\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l9\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l%\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[C\u001b[?25l* The game replays its history when a new rules object is created\r\n\u001b[C* You can export the json structure of a game to a string (which can trivially\u001b[4;4Hbe saved to a file... I'll figure that out much later).\r\n\u001b[K\nThe other thing I really wanted to get around to was a nice sidebar on the\r\nright side of the terminal that has all of the information for the tiles you\r\nhover over. I image three boxes.\u001b[11;4HDay 1\u001b[K\n\b\b\b\b\bRed   $300\u001b[13;4HBlue  $300\u001b[15;4HPlains\u001b[16;4HDEF +1\u001b[18;4HInfantry\u001b[19;4HHP 86%\u001b[21;4H----------\u001b[22;4HInfantry\u001b[23;29H\u001b[7m47% L22\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[C\t\b\t\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lA\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lL\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\t\b\b\b\u001b[K\b\u001b[K\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;68H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[K\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;74H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;2H\u001b[?25l  Blue  $300\u001b[K\r\n\u001b[C  ----------\u001b[K\u001b[4;4HPlains     This is the information for the cell you are currently hovering\u001b[5;4HDEF +1     over\r\n\u001b[K\n   Infantry\u001b[K\r\n   HP 86%\u001b[K\u001b[11;4HInfantry\u001b[K\u001b[12;4HDEF +2\u001b[K\u001b[13;4HHP 99%\u001b[K\r\n\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L33\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lR\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lW\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lC-x\u001b[17;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l-\u001b[17;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l C-f\u001b[17;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\t\b\u001b[?25l[No match]\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lode/\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lore/\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lhell.py\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25lLoading vc-git...\u001b[K\u001b[17;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;18H\u001b[?25ldone\u001b[17;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lLoading vc-git...done\u001b[K\u001b[H\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[31m# The Shell is where it all starts. A Shell is an abstract and thin package in  \u001b[39;49m\r\n\u001b[A\n\u001b[31m# which all of the elements of the game are stored. It is responsible for       \u001b[39;49m\r\n\u001b[A\n\u001b[31m# creating the world, parsing and writing to save files, and turning on/off     \u001b[39;49m\r\n\u001b[A\n\u001b[31m# graphics.                                                                     \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m gfx, draw\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m game, grid, widgets\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m sys\u001b[K\r\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m traceback\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A Shell represents a single instance of a game, including its maps,           \u001b[39;49m\r\n\u001b[A\n\u001b[31m# data, and everything else.                                                    \u001b[39;49m\r\n\u001b[A\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mShell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m = {}\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m = {}\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Hello World\"\u001b[39;49m\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1    Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2d\u001b[?25l        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Hello World\"\u001b[39;49m\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"w\"\u001b[39;49m] = 30\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"h\"\u001b[39;49m] = 15\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"cells\"\u001b[39;49m] = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(30):\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(15):\r\n\t\t\u001b[33mcell\u001b[39;49m = {}\r\n                \u001b[33mcell\u001b[39;49m[\u001b[32m\"x\"\u001b[39;49m] = x\u001b[K\r\n\t\t\u001b[33mcell\u001b[39;49m[\u001b[32m\"y\"\u001b[39;49m] = y\r\n                \u001b[33mcell\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"grass\"\u001b[39;49m\r\n                gdict[\u001b[32m\"cells\"\u001b[39;49m].append(cell)\r\n\t\u001b[33munit1\u001b[39;49m = {}\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"i\"\u001b[39;49m\r\n        \u001b[33munit1\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\u001b[K\r\n        \u001b[33munit1\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 0\u001b[K\r\n        \u001b[33munit2\u001b[39;49m = {}\u001b[K\u001b[18;5H    \u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\u001b[23;29H\u001b[7m20% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\trdict[\u001b[32m'history'\u001b[39;49m].append([[(0,4),(1,4),\u001b[32m\"Wait\"\u001b[39;49m]])\r\n\u001b[K\n\t\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\t\u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff = widgets.Buffer(10,5)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\r\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(1,1)\u001b[K\u001b[23;29H\u001b[7m41% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default *scratch*): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2d\u001b[24d\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/code/core/\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lid.py\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[31m# A grid is the arena upon which a battle takes place. The entire map should    \u001b[39;49m\r\n\u001b[31m# be self-contained. Players interact with the map by taking \"actions\" that     \u001b[39;49m\r\n\u001b[31m# are interpreted by an instance of the rules class containing the game logic.  \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m widgets\u001b[K\r\n\u001b[K\n\n\u001b[31m# The Grid is a game-agnostic representation of the world's entities. It        \u001b[39;49m\r\n\u001b[31m# provides an API to game rulesets to create, delete, and move entities         \u001b[39;49m\r\n\u001b[31m# around, but essentially has no functionality other than changing its          \u001b[39;49m\r\n\u001b[31m# configuration. The grid should be initialized with a configuration            \u001b[39;49m\r\n\u001b[31m# Dictionary containing the following keys and values.                          \u001b[39;49m\r\n\u001b[31m#   w: (int) width                                                              \u001b[39;49m\r\n\u001b[31m#   h: (int) height                                                             \u001b[39;49m\r\n\u001b[31m#   cells: (list) exactly w*h cells                                             \u001b[39;49m\r\n\u001b[31m#   teams: (list) the teams in the map                                          \u001b[39;49m\r\n\u001b[31m#   allies: (list) the teams that are allied in a list of lists of ints         \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[31m   variables: (dictionary) a dictionary of user-defined v\u001b[39;49m\u001b[8@\u001b[31mariables\u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[23;14H\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1 \u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;3H\u001b[?25l\u001b[31m  variables: (dictionary) a dictionary of user-defined variables          \u001b[39;49m\u001b[3;3H\u001b[31m                                                                         \u001b[39;49m\u001b[4;3H\u001b[31mDanger: Do not store 'rules' in a variable. Should fall out of scope.       \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data, rules):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = data[\u001b[32m\"name\"\u001b[39;49m]\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = data[\u001b[32m\"w\"\u001b[39;49m], data[\u001b[32m\"h\"\u001b[39;49m]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\r\n            \u001b[33mrow\u001b[39;49m = []\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\u001b[K\r\n                row.append(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = data.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day = 0\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\u001b[K\u001b[21;62H\u001b[8P\r\u001b[8@\u001b[21;11H\u001b[31mLoad the teams first, since cells and units reference them.\u001b[39;49m\u001b[22;29H\u001b[8P\r\u001b[8@\u001b[22;11H\u001b[31mThen set up the alliances.\u001b[39;49m\u001b[23;29H\u001b[7m 9% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;62H\u001b[8P\r\u001b[8@\u001b[2;11H\u001b[?25l\u001b[31mLoad the teams first, since cells and units reference them.\u001b[39;49m\u001b[3;29H\u001b[8P\r\u001b[8@\u001b[3;11H\u001b[31mThen set up the alliances.\u001b[39;49m\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\r\n            \u001b[33mthis\u001b[39;49m = rules.make_team( t )\u001b[6;5H        \u001b[33mthis.variables\u001b[39;49m = t.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams.append(this)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[11;13H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\r\n\u001b[K\n\t\u001b[31m# Load the terrain cells. The units are embedded in these elements      \u001b[39;49m\r\n\t\u001b[31m# of the dictionary. Note that when units are loaded in other units     \u001b[39;49m\r\n\t\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\t\u001b[31m#   y: (int) y position                                                 \u001b[39;49m\r\n\t\u001b[31m#   name: (string) the name of the terrain                              \u001b[39;49m\r\n\t\u001b[31m#   unit: the unit on this terrain, if one                              \u001b[39;49m\r\n\t\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\u001b[21;11H\u001b[31m  variables: (dict) User-defined variables                 \u001b[39;49m\u001b[22;14H\u001b[31mre may be other values in this cell that will be parsed by\u001b[39;49m\u001b[23;29H\u001b[7m15% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;11H\u001b[?25l\u001b[31m  variables: (dict) User-defined variables                 \u001b[39;49m\u001b[3;14H\u001b[31mre may be other values in this cell that will be parsed by\u001b[39;49m\r\n\t\u001b[31m# the factory of the rules.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"cells\"\u001b[39;49m]:\u001b[K\r\n\t\t = rules.make_cell(c)\u001b[K\u001b[7;18Hgrid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\r\n\t    \u001b[33mthis.variables\u001b[39;49m = c.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[9;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"team\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c\r\n\t\t\u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\r\n\t            \u001b[33mu\u001b[39;49m = rules.make_unit(unit)\u001b[K\r\n\t            \u001b[33mu.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]]\u001b[K\r\n\t            \u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[K\r\n\t            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\u001b[K\r\n\t                u.carrying.append(_process_units(u))\u001b[K\r\n\t            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\t        \u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[4P\t\b\b\u001b[31mGet the tile at x,y. Returns None if out of range.           \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[23;29H\u001b[7m24% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31mGet the tile at x,y. Returns None if out of range.           \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtile_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[6;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# Get a range of coordinates, usually for an attack range. Coordinates      \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# may not actually be cells.                                                \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, center, start, end=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m end \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m:\u001b[K\u001b[19;13H\u001b[33mend\u001b[39;49m = start\u001b[K\r\n\u001b[K\n\t\u001b[33mreport\u001b[39;49m = []\u001b[22;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = center\u001b[K\u001b[23;29H\u001b[7m33% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mreport\u001b[39;49m = []\u001b[3;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = center\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m r \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(start,end+1):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m i \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(r):\u001b[K\u001b[6;13H    report.append((x+i,y+(r-i)))\r\n\t        report.append((x+i,y-(r-i)))\r\n\t\treport.append((x+(r-i),y+i))\u001b[9;5H            report.append((x-(r-i),y+i))\u001b[K\u001b[10;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# Return distance (zero norm) between two points.                           \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdist\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, start, end):\r\n\t\u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = start\u001b[15;5H    \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = end\u001b[K\u001b[16;5H    \u001b[33mdx\u001b[39;49m = x1-x2\u001b[K\u001b[17;5H    \u001b[33mdy\u001b[39;49m = y1-y2\u001b[K\u001b[18;12H(dx < 0): \u001b[33mdx\u001b[39;49m *= -1\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (dy < 0): \u001b[33mdy\u001b[39;49m *= -1\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m dx+dy\r\n\u001b[K\u001b[22;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[23;30H\u001b[7m9% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.                          \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(ox,oy)\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[12;5H    \u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# This should be the ONLY WAY units are added to the game.                  \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[19;12Htile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[22;5H    \u001b[33munit.team\u001b[39;49m = team\u001b[K\u001b[23;29H\u001b[7m45% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mtile.unit\u001b[39;49m = unit\u001b[3;5H    \u001b[33munit.team\u001b[39;49m = team\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# Remove a unit from the game. This will not only remove the                \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# unit, but all units that it is carrying.                                  \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.carrying:\u001b[14;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\u001b[15;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(u)\u001b[K\u001b[16;5H    \u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# Return the team currently performing its turn.                            \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# End the turn and proceed to the next team.                                \u001b[39;49m\r\n\u001b[23;29H\u001b[7m52% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# End the turn and proceed to the next team.                                \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\u001b[K\u001b[8;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon = icon\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[23;30H\u001b[7m8% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[4;5H\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n\u001b[5;5H\u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# the unit's draw will be prioritized.                                      \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[K\u001b[9;13H\u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color +\u001b[32m\"!\"\u001b[39;49m\r\n\tdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color+col)\r\n\n\u001b[K\u001b[13;3H\u001b[31mUnits are the pieces that move about the game board. Units belong to a\u001b[39;49m\r\n\u001b[31m# team and can be moved about by taking actions.                                \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\u001b[17;14Hname = name\u001b[18;14Hicon = icon\u001b[K\u001b[19;14Hteam\n\b\b\b\bcarrying = []\u001b[23;29H\u001b[7m64% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[4;7H\u001b[?25l\u001b[31mDraw this unit on the screen.                     \u001b[39;49m\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\u001b[6;5H    draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m+col)\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# Returns true if the two units (or cells) are allied.                      \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, other):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m other.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m other.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\u001b[13;3H\u001b[31mThe game is played by teams. Each team commands an army of units and  \u001b[39;49m\u001b[14;3H\u001b[31mmay also have other variables such as money, etc, governed by the\u001b[39;49m\r\n\u001b[31m# subclass of the current set of rules.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[18;14Hname = name\u001b[19;14Hcolor = color\u001b[20;14Hallies = []\u001b[K\u001b[21;14Hactive = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\n\u001b[C\u001b[7m70% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lactive = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[5;5H\u001b[31m# Returns true if the two teams are allied.                                 \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, rules):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = rules\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\n\b\b\b\b\bcam = widgets.Camera(w,h,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid)\r\n\u001b[K\n\t\t\bert\n\b\b\b\b\bmenu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m7% L210\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lmenu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[6;5H    \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\n\t\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\t\t\t\t\t\t\t\u001b[8P\r\u001b[8@\u001b[10;11H\u001b[31mdoes.                                                 \u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n            \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\u001b[14;5H            \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[23;29H\u001b[7m83% L229\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\t\u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pop_alerts()\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\n\b\b\b\b\u001b[7m8% L248\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[6;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[7;13Hm.draw(mx+x-cx+2, my+y-cy)\u001b[K\r\n\u001b[K\n\t\u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\t\u001b[31m# expire.                                                               \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts:\u001b[K\u001b[12;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = a\r\n\t    \u001b[33mm.time\u001b[39;49m -= 1\u001b[K\r\n\t    m.draw(mx+x-cx, my+y-cy)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = [a \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a[0].time > 0]\r\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L267\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\n\t\u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pop_alerts()\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;5H\u001b[4P\t\b\u001b[31mraw the grid to the terminal using the gfx library. Specify\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[10;5H\u001b[4P\t\b\b\u001b[31mx,y and w,h of the viewport in the terminal, and the cx,cy of\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[11;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[17;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[18;13Hm.draw(mx+x-cx+2, my+y-cy)\r\n\n\t\u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\t\u001b[31m# expire.                                                               \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts:\n\b\u001b[7m92% L266\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# does.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[4;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\r\n\t        \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[9;5H        \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\u001b[11;5H            \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[17;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\u001b[18;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[23;29H\u001b[7m85% L257\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[8P\u001b[2;3H\u001b[?25l\u001b[31mThe controller of the grid. It takes a rules object an\u001b[39;49m\u001b[8@\u001b[31md passes\u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, rules):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = rules\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\t\u001b[31m# does.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[23;29H\u001b[7m79% L238\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m other.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m other.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The game is played by teams. Each team commands an army of units and          \u001b[39;49m\r\n\u001b[31m# may also have other variables such as money, etc, governed by the             \u001b[39;49m\r\n\u001b[31m# subclass of the current set of rules.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[10;14Hname = name\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\r\n\t\t\blie\n\b\b\b\b\bactive = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[16;5H\u001b[31m# Returns true if the two teams are allied.                                 \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\n\u001b[K\n\u001b[8P\u001b[C\u001b[C\u001b[31mThe controller of the grid. It takes a rules object an\u001b[39;49m\u001b[8@\u001b[31md passes\u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[23;30H\u001b[7m3% L219\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25ldraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color+col)\u001b[K\u001b[5;3H\u001b[31mUnits are the pieces that move about the game board. Units belong to a\u001b[39;49m\u001b[6;3H\u001b[31mteam and can be moved about by taking actions.                   \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\u001b[10;14Hicon = icon\u001b[11;14Hteam = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[12;14Hcarrying = []\u001b[13;14Hvariables = {}\r\n\u001b[K\u001b[15;5H\u001b[31m# Draw this unit on the screen.                                             \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\u001b[17;5H    draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m+col)\r\n\u001b[K\u001b[19;5H\u001b[31m# Returns true if the two units (or cells) are allied.                      \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, other):\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m other.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m other.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m67% L200\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\n\u001b[?25l\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[5;3H\u001b[31mwhat would be called their 'terrain'.                                 \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\u001b[9;14Hicon = icon\u001b[10;14Hcolor = color\u001b[11;14Hunit\n\b\b\b\bteam = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[15;7H\u001b[31mThis function returns the character and color that\u001b[39;49m\u001b[16;5H\u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# the unit's draw will be prioritized.                                      \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[19;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[K\u001b[20;5H        \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color +\u001b[32m\"!\"\u001b[39;49m\r\n\tdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color+col)\u001b[K\u001b[23;30H\u001b[7m1% L181\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33munit\u001b[39;49m = tile.unit\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.carrying:\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[7;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(u)\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[10;5H\u001b[31m# Return the team currently performing its turn.                            \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\r\n\u001b[K\u001b[14;5H\u001b[31m# End the turn and proceed to the next team.                                \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[16;5H    \u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[20;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day += 1\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m55% L162\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# This should be the ONLY WAY units are added to the game.                  \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\u001b[10;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[14;5H    \u001b[33munit.team\u001b[39;49m = team\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\r\n\u001b[K\u001b[17;5H\u001b[31m# Remove a unit from the game. This will not only remove the                \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# unit, but all units that it is carrying.                                  \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\n\b\b\u001b[7m47% L143\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# Return distance (zero norm) between two points.                           \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdist\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, start, end):\u001b[6;5H    \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = start\u001b[K\u001b[7;5H    \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = end\u001b[K\u001b[8;5H    \u001b[33mdx\u001b[39;49m = x1-x2\u001b[K\u001b[9;5H    \u001b[33mdy\u001b[39;49m = y1-y2\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (dx < 0): \u001b[33mdx\u001b[39;49m *= -1\u001b[K\u001b[11;12H(dy < 0): \u001b[33mdy\u001b[39;49m *= -1\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m dx+dy\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.                          \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\u001b[17;5H    \u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[K\u001b[18;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\u001b[19;5H    \u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(ox,oy)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\n\b\b\b\u001b[7m2% L124\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\u001b[5;5H    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# Get a range of coordinates, usually for an attack range. Coordinates      \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# may not actually be cells.                                                \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, center, start, end=\u001b[35mNone\u001b[39;49m):\u001b[10;12Hend \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m:\u001b[K\r\n\t    \u001b[33mend\u001b[39;49m = start\u001b[K\r\n\u001b[K\n\t\u001b[33mreport\u001b[39;49m = []\u001b[14;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = center\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m r \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(start,end+1):\u001b[K\u001b[16;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m i \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(r):\u001b[K\r\n\t        report.append((x+i,y+(r-i)))\r\n\t        report.append((x+i,y-(r-i)))\r\n\t        report.append((x+(r-i),y+i))\r\n\t        report.append((x-(r-i),y+i))\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m36% L105\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l            \u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t        \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\r\n\t            \u001b[33mu\u001b[39;49m = rules.make_unit(unit)\u001b[6;21H\u001b[33mu.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]]\u001b[7;5H                \u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\u001b[8;5H                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[K\u001b[9;5H                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\r\n\t                u.carrying.append(_process_units(u))\u001b[11;13H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\r\n\t\t\u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\r\n\u001b[K\u001b[14;5H\u001b[31m# Get the tile at x,y. Returns None if out of range.                        \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtile_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\n\b\b\b\b\u001b[7m28% L86 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\u001b[3;13H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\r\n\u001b[K\n\t\u001b[31m# Load the terrain cells. The units are embedded in these elements      \u001b[39;49m\r\n\t\u001b[31m# of the dictionary. Note that when units are loaded in other units     \u001b[39;49m\r\n\t\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\t\u001b[31m#   y: (int) y position                                                 \u001b[39;49m\r\n\t\u001b[31m#   name: (string) the name of the terrain                              \u001b[39;49m\r\n\t\u001b[31m#   unit: the unit on this terrain, if one                              \u001b[39;49m\r\n\t\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\t\u001b[31m#   variables: (dict) User-defined variables                            \u001b[39;49m\r\n\u001b[14;68H\u001b[4P\u001b[14;5H\u001b[4@\u001b[14;11H\u001b[31mThere may be other values in this cell that will be parsed by\u001b[39;49m\u001b[15;5H    \u001b[31m# the factory of the rules.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"cells\"\u001b[39;49m]:\u001b[K\u001b[17;13H\u001b[33mthis\u001b[39;49m = rules.make_cell(c)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\u001b[19;13H\u001b[33mthis.variables\u001b[39;49m = c.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[20;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"team\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\u001b[21;5H            \u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\n\u001b[C\u001b[7m19% L67\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[3;13H\u001b[33mrow\u001b[39;49m = []\u001b[K\u001b[4;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\r\n\t        row.append(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = data.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day = 0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\u001b[K\u001b[13;11H\u001b[31mLoad the teams first, since cells and units reference them.\u001b[39;49m\u001b[14;14H\u001b[31mn set up the alliances.                                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\r\n\t    \u001b[33mthis\u001b[39;49m = rules.make_team( t )\r\n\t\t\u001b[33m.variables\u001b[39;49m = t.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[18;18Hteams.append(this)\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\u001b[K\u001b[20;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist\r\n\t\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\u001b[22;13H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\u001b[23;30H\u001b[7m2% L48\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[?25l\u001b[31m# The Grid is a game-agnostic representation of the world's entities. It        \u001b[39;49m\r\n\u001b[31m# provides an API to game rulesets to create, delete, and move entities         \u001b[39;49m\r\n\u001b[31m# around, but essentially has no functionality other than changing its          \u001b[39;49m\r\n\u001b[31m# configuration. The grid should be initialized with a configuration            \u001b[39;49m\r\n\u001b[31m# Dictionary containing the following keys and values.                          \u001b[39;49m\r\n\u001b[31m#   w: (int) width                                                              \u001b[39;49m\r\n\u001b[31m#   h: (int) height                                                             \u001b[39;49m\r\n\u001b[31m#   cells: (list) exactly w*h cells                                             \u001b[39;49m\r\n\u001b[31m#   teams: (list) the teams in the map                                          \u001b[39;49m\r\n\u001b[31m#   allies: (list) the teams that are allied in a list of lists of ints         \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  variables: (dictionary) a dictionary of user-defined vari\u001b[39;49m\u001b[8@\u001b[31mables   \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m                          \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m# Danger: Do not store 'rules' in a variable. Should fall out of scope.         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data, rules):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = data[\u001b[32m\"name\"\u001b[39;49m]\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = data[\u001b[32m\"w\"\u001b[39;49m], data[\u001b[32m\"h\"\u001b[39;49m]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[22;13H\u001b[33mrow\u001b[39;49m = []\u001b[K\u001b[23;29H\u001b[7m 3% L29\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[31m#   variables: (dictionary) a dictionary of user-defined variables              \u001b[39;49m\r\n\u001b[3;3H\u001b[31m                                                                      \u001b[39;49m\u001b[4;3H\u001b[31mDanger: Do not store 'rules' in a variable. Should fall out of scope.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGrid\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data, rules):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = data[\u001b[32m\"name\"\u001b[39;49m]\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = data[\u001b[32m\"w\"\u001b[39;49m], data[\u001b[32m\"h\"\u001b[39;49m]\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m y \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[K\r\n            \u001b[33mrow\u001b[39;49m = []\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m x \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w):\u001b[K\r\n                row.append(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = data.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[18;14Hday = 0\u001b[K\u001b[19;14Hturn = 0\u001b[K\r\n\u001b[K\n\t\u001b[31m# Load the teams first, since cells and units reference them.           \u001b[39;49m\r\n\t\u001b[31m# Then set up the alliances.                                            \u001b[39;49m\r\n\u001b[23;30H\u001b[7m9% L30\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l                row.append(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.append(row)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units = []\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = data.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[7;14Hday = 0\u001b[K\u001b[8;14Hturn = 0\u001b[K\r\n\u001b[K\n\t\u001b[31m# Load the teams first, since cells and units reference them.           \u001b[39;49m\r\n\t\u001b[31m# Then set up the alliances.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"teams\"\u001b[39;49m]:\u001b[K\u001b[13;13H\u001b[33mthis\u001b[39;49m = rules.make_team( t )\u001b[14;13H\u001b[33mthis.variables\u001b[39;49m = t.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t\u001b[4@\t\t\b\b.append(this)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\u001b[21;22H\u001b[31mrrain cells. The units are embedded in these elements\u001b[39;49m\u001b[22;11H\u001b[31mof the dictionary. Note that when units are loaded in other units\u001b[39;49m\u001b[23;29H\u001b[7m13% L41\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[33mthis\u001b[39;49m = rules.make_team( t )\u001b[3;13H\u001b[33mthis.variables\u001b[39;49m = t.get(\u001b[32m\"variables\"\u001b[39;49m,{})\r\n\t\u001b[4@\t\t\b\b.append(this)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m alist \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data.get(\u001b[32m\"allies\"\u001b[39;49m,[]):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m alist:\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[a].allies.append( \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[b] )\u001b[10;22H\u001b[31mrrain cells. The units are embedded in these elements\u001b[39;49m\u001b[11;11H\u001b[31mof the dictionary. Note that when units are loaded in other units\u001b[39;49m\r\n\t\u001b[31m# we, have to recursively dig them out.                                 \u001b[39;49m\r\n\t\u001b[31m#   x: (int) x position                                                 \u001b[39;49m\r\n\t\u001b[31m#   y: (int) y position                                                 \u001b[39;49m\r\n\t\u001b[31m#   name: (string) the name of the terrain                              \u001b[39;49m\r\n\t\u001b[31m#   unit: the unit on this terrain, if one                              \u001b[39;49m\r\n\t\u001b[31m#   team: (int) the team that owns the terrain, if any                  \u001b[39;49m\r\n\t\u001b[31m#   variables: (dict) User-defined variables                            \u001b[39;49m\r\n\t\u001b[31m# There may be other values in this cell that will be parsed by         \u001b[39;49m\r\n\t\u001b[31m# the factory of the rules.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m data[\u001b[32m\"cells\"\u001b[39;49m]:\u001b[K\r\n\t    \u001b[33mthis\u001b[39;49m = rules.make_cell(c)\u001b[K\u001b[23;30H\u001b[7m7% L52\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[2;1H\u001b[11M\u001b[1;24r\u001b[12;1H\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[c[\u001b[32m\"y\"\u001b[39;49m]][c[\u001b[32m\"x\"\u001b[39;49m]] = this\u001b[K\r\n            \u001b[33mthis.variables\u001b[39;49m = c.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"team\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n                \u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n                \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\u001b[K\r\n                    \u001b[33mu\u001b[39;49m = rules.make_unit(unit)\u001b[K\r\n                    \u001b[33mu.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]]\u001b[K\r\n                    \u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[K\r\n                    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\u001b[K\u001b[23;29H\u001b[7m22% L63\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33mthis.variables\u001b[39;49m = c.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"team\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t        \u001b[33mthis.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[c[\u001b[32m\"team\"\u001b[39;49m]]\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"unit\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m c:\u001b[K\r\n\t        \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_process_units\u001b[0m\u001b[39;49m(unit):\u001b[K\r\n\t            \u001b[33mu\u001b[39;49m = rules.make_unit(unit)\u001b[K\r\n\t            \u001b[33mu.team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[unit[\u001b[32m\"team\"\u001b[39;49m]]\u001b[K\r\n\t            \u001b[33mu.variables\u001b[39;49m = unit.get(\u001b[32m\"variables\"\u001b[39;49m,{})\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(u)\u001b[11;13H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.get(\u001b[32m\"carrying\"\u001b[39;49m,[]):\u001b[12;13H            u.carrying.append(_process_units(u))\u001b[13;13H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\u001b[14;13H    \u001b[33mthis.unit\u001b[39;49m = _process_units(c[\u001b[32m\"unit\"\u001b[39;49m])\r\n\u001b[K\u001b[16;5H\u001b[31m# Get the tile at x,y. Returns None if out of range.                        \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtile_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m x >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y < 0 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m y >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h):\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid[y][x]\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[23;30H\u001b[7m7% L74\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# Get the unit at x,y.                                                      \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34munit_at\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m tile: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m tile.unit\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# Get a range of coordinates, usually for an attack range. Coordinates      \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# may not actually be cells.                                                \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, center, start, end=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m end \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m:\u001b[K\u001b[13;13H\u001b[33mend\u001b[39;49m = start\u001b[K\r\n\u001b[K\n\t\u001b[33mreport\u001b[39;49m = []\u001b[16;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = center\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m r \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(start,end+1):\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m i \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(r):\u001b[K\u001b[19;13H    report.append((x+i,y+(r-i)))\r\n\t        report.append((x+i,y-(r-i)))\r\n\t\treport.append((x+(r-i),y+i))\u001b[22;5H            report.append((x-(r-i),y+i))\u001b[K\u001b[23;29H\u001b[7m35% L83\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25lreport.append((x+(r-i),y+i))\u001b[3;5H            report.append((x-(r-i),y+i))\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[6;5H\u001b[31m# Return distance (zero norm) between two points.                           \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdist\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, start, end):\r\n\t\u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = start\u001b[9;5H    \u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = end\u001b[K\u001b[10;5H    \u001b[33mdx\u001b[39;49m = x1-x2\u001b[K\u001b[11;5H    \u001b[33mdy\u001b[39;49m = y1-y2\u001b[K\u001b[12;12H(dx < 0): \u001b[33mdx\u001b[39;49m *= -1\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (dy < 0): \u001b[33mdy\u001b[39;49m *= -1\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m dx+dy\r\n\u001b[K\u001b[16;5H\u001b[31m# Moves a unit from the old tile to the new tile. Will                      \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# throw exception if move is illegal. CHECK FIRST.                          \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, old, new):\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = old\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = new\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(ox,oy)\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\u001b[23;29H\u001b[7m41% L102\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(ox,oy)\u001b[K\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\u001b[K\r\n\t\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[6;5H    \u001b[33mtile.unit\u001b[39;49m = unit\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# Add a unit to the game. Throws an exception if the tile                   \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# does not exist or if the tile is occupied.                                \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# This should be the ONLY WAY units are added to the game.                  \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34madd_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, unit, team, x, y):\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\u001b[13;12Htile.unit:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Tried to add unit to occupied tile %d,%d\"\u001b[39;49m%(x,y))\r\n\t\u001b[33mtile.unit\u001b[39;49m = unit\u001b[16;5H    \u001b[33munit.team\u001b[39;49m = team\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.append(unit)\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# Remove a unit from the game. This will not only remove the                \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# unit, but all units that it is carrying.                                  \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\n\b\b\b\u001b[7m7% L121\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mremove_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[33mtile\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.tile_at(x,y)\r\n\t\u001b[33munit\u001b[39;49m = tile.unit\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m unit \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(tile.unit)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m unit.carrying:\u001b[8;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units:\u001b[K\u001b[9;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.units.remove(u)\u001b[K\u001b[10;5H    \u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[12;5H\u001b[31m# Return the team currently performing its turn.                            \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# End the turn and proceed to the next team.                                \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\u001b[K\u001b[21;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day += 1\u001b[K\u001b[23;29H\u001b[7m54% L140\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[31m# what would be called their 'terrain'.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon = icon\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[17;5H\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# the unit's draw will be prioritized.                                      \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[K\u001b[22;13H\u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color +\u001b[32m\"!\"\u001b[39;49m\u001b[23;29H\u001b[7m60% L159\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[K\u001b[3;13H\u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color +\u001b[32m\"!\"\u001b[39;49m\r\n\tdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color+col)\r\n\n\u001b[K\u001b[7;3H\u001b[31mUnits are the pieces that move about the game board. Units belong to a\u001b[39;49m\r\n\u001b[31m# team and can be moved about by taking actions.                                \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\u001b[11;14Hname = name\u001b[12;14Hicon = icon\u001b[K\u001b[13;14Hteam\n\b\b\b\bcarrying = []\u001b[17;7H\u001b[31mDraw this unit on the screen.                     \u001b[39;49m\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\u001b[19;5H    draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m+col)\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# Returns true if the two units (or cells) are allied.                      \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, other):\u001b[K\n\u001b[C\u001b[7m6% L178\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# Returns true if the two units (or cells) are allied.                      \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, other):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m other.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m other.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\u001b[7;3H\u001b[31mThe game is played by teams. Each team commands an army of units and  \u001b[39;49m\u001b[8;3H\u001b[31mmay also have other variables such as money, etc, governed by the\u001b[39;49m\r\n\u001b[31m# subclass of the current set of rules.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[12;14Hname = name\u001b[13;14Hcolor = color\u001b[14;14Hallies = []\u001b[K\u001b[15;14Hactive = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[18;5H\u001b[31m# Returns true if the two teams are allied.                                 \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7m72% L197\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\u001b[K\n\u001b[?25l\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, rules):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = rules\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\n\b\b\b\b\bcam = widgets.Camera(w,h,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid)\r\n\u001b[K\n\t\t\bert\n\b\b\b\b\bmenu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[19;5H    \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\n\t\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\u001b[23;30H\u001b[7m9% L216\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\n\t\u001b[?25l\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\u001b[4;57H\u001b[8P\r\u001b[8@\u001b[4;11H\u001b[31mdoes.                                                 \u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n            \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\u001b[8;5H            \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[17;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\u001b[18;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\u001b[23;29H\u001b[7m85% L235\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\t\u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pop_alerts()\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[19;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[20;13Hm.draw(mx+x-cx+2, my+y-cy)\u001b[K\r\n\u001b[K\n\t\u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\u001b[23;29H\u001b[7m91% L254\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\n\t\u001b[?25l\u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\t\u001b[31m# expire.                                                               \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts:\u001b[K\u001b[6;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = a\r\n\t    \u001b[33mm.time\u001b[39;49m -= 1\u001b[K\r\n\t    m.draw(mx+x-cx, my+y-cy)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = [a \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a[0].time > 0]\r\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\u001b[23;29H\u001b[7mBot L273\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\t\u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pop_alerts()\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[11;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[19;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[20;13Hm.draw(mx+x-cx+2, my+y-cy)\r\n\n\t\u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\u001b[23;29H\u001b[7m91%\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\t\u001b[31m# does.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[6;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\r\n\t        \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[11;5H        \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\u001b[12;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\u001b[13;5H            \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\u001b[20;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\u001b[23;29H\u001b[7m85% L255\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[3d\u001b[K\n\u001b[8P\u001b[4;3H\u001b[?25l\u001b[31mThe controller of the grid. It takes a rules object an\u001b[39;49m\u001b[8@\u001b[31md passes\u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, rules):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = rules\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\u001b[23;29H\u001b[7m79% L236\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;19H\u001b[1;21r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[22d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   79% L226\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid)\u001b[K\u001b[23;36H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[13;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mT\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[14;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[14;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[14;38H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default shell.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lshell.py\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n        \u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\u001b[K\r\n        \u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[K\r\n        \u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[8;5H    \u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\trdict[\u001b[32m'history'\u001b[39;49m].append([[(0,4),(1,4),\u001b[32m\"Wait\"\u001b[39;49m]])\r\n\u001b[K\n\t\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\t\u001b[33mr\u001b[39;49m = game.Game(rdict)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(70,18,r)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[16;14Hbuff = widgets.Buffer(10,5)\u001b[17;14Hbuff.write(\u001b[32m\"Hello, world!\"\u001b[39;49m)\r\n\n\u001b[K\n\t\u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(1,1)\u001b[23;14H\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   41% L39 \u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;42H\b\b\b\b\b\b\b\b\u001b[?25l0,18,r)\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l80,18,r)\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l8,r)\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,r)\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2,r)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l4,r)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[13;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[13;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[31m#self.buff = widgets.Buffer(10,5)                                       \u001b[39;49m\r\n\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m#self.buff.write(\"Hello, world!\")                                       \u001b[39;49m\r\n\u001b[17;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(1,1)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.draw(1,20,\u001b[32m\"r\"\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.draw(1,19)\u001b[K\r\n\u001b[K\n\u001b[K\u001b[9;5H\u001b[31m# Runs an interactive session of our game with the player until either      \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# turn off graphics, print the traceback, and kill the program.             \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrun\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\tgfx.start(\u001b[32m\"ascii\"\u001b[39;49m)\r\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36mtry\u001b[0m\u001b[39;49m:\u001b[K\n\u001b[33mc\u001b[39;49m = -1\n\b\b\b\b\b\bgfx.clear()\u001b[20;5H        \u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m c != \u001b[32m\"q\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.display()\u001b[K\r\n\t        \u001b[33mc\u001b[39;49m = gfx.get_input()\u001b[23;29H\u001b[7m62% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.display()\u001b[K\r\n\t        \u001b[33mc\u001b[39;49m = gfx.get_input()\r\n\t\u001b[8@\u001b[5;13H        \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.handle_input(c)\r\n\t            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[9;5H                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.handle_input(c)\u001b[K\r\n\u001b[K\u001b[11;5H            gfx.refresh()\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mexcept\u001b[0m\u001b[39;49m:\u001b[K\u001b[13;5H        gfx.stop()\r\n\t    \u001b[1m\u001b[36mprint\u001b[0m\u001b[39;49m(traceback.format_exc())\u001b[15;13Hsys.\u001b[35mexit\u001b[39;49m(-1)\r\n\n\tgfx.stop()\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# turn off graphics, print the traceback, and kill the program.             \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrun\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\tgfx.start(\u001b[32m\"ascii\"\u001b[39;49m)\r\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36mtry\u001b[0m\u001b[39;49m:\u001b[K\n\u001b[33mc\u001b[39;49m = -1\n\b\b\b\b\b\bgfx.clear()\u001b[K\r\n\t    \u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m c != \u001b[32m\"q\"\u001b[39;49m:\u001b[13;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.display()\u001b[14;13H    \u001b[33mc\u001b[39;49m = gfx.get_input()\u001b[K\u001b[15;13H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[16;21H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.handle_input(c)\r\n\t            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.handle_input(c)\r\n\n\t\tgfx.refresh()\n\b\u001b[7m70% L76\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l    \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[4;5H    \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(80,24,r)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[31m#self.buff = widgets.Buffer(10,5)                                       \u001b[39;49m\r\n\t\u001b[31m#self.buff.write(\"Hello, world!\")                                       \u001b[39;49m\r\n\u001b[K\n\u001b[K\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(1,1)\u001b[K\r\n\t\u001b[8P\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.draw(1,20,\u001b[32m\"r\"\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff.draw(1,19)\r\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# Runs an interactive session of our game with the player until either      \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[23;29H\u001b[7m53% L67\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[?25l\u001b[31m#self.buff.draw(1,19)                                                   \u001b[39;49m\r\n\u001b[17;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[17;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[17;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ emacs\b\b\b\b\b\u001b[3Pfg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 8, in <module>\r\n    S = shell.Shell()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 49, in __init__\r\n    r = game.Game(rdict)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 119, in __init__\r\n    raise Exception(self.save())\r\nException: {\"grid\": {\"h\": 15, \"cells\": [{\"y\": 0, \"x\": 0, \"name\": \"grass\"}, {\"y\": 1, \"x\": 0, \"name\": \"grass\"}, {\"y\": 2, \"x\": 0, \"name\": \"grass\"}, {\"y\": 3, \"x\": 0, \"name\": \"grass\"}, {\"y\": 4, \"x\": 0, \"name\": \"grass\", \"unit\": {\"team\": 0, \"name\": \"Infantry\", \"icon\": \"i\"}}, {\"y\": 5, \"x\": 0, \"name\": \"grass\"}, {\"y\": 6, \"x\": 0, \"name\": \"grass\"}, {\"y\": 7, \"x\": 0, \"name\": \"grass\"}, {\"y\": 8, \"x\": 0, \"name\": \"grass\"}, {\"y\": 9, \"x\": 0, \"name\": \"grass\"}, {\"y\": 10, \"x\": 0, \"name\": \"grass\"}, {\"y\": 11, \"x\": 0, \"name\": \"grass\"}, {\"y\": 12, \"x\": 0, \"name\": \"grass\"}, {\"y\": 13, \"x\": 0, \"name\": \"grass\"}, {\"y\": 14, \"x\": 0, \"name\": \"grass\"}, {\"y\": 0, \"x\": 1, \"name\": \"grass\"}, {\"y\": 1, \"x\": 1, \"name\": \"grass\"}, {\"y\": 2, \"x\": 1, \"name\": \"grass\"}, {\"y\": 3, \"x\": 1, \"name\": \"grass\"}, {\"y\": 4, \"x\": 1, \"name\": \"grass\"}, {\"y\": 5, \"x\": 1, \"name\": \"grass\"}, {\"y\": 6, \"x\": 1, \"name\": \"grass\"}, {\"y\": 7, \"x\": 1, \"name\": \"grass\"}, {\"y\": 8, \"x\": 1, \"name\": \"grass\"}, {\"y\": 9, \"x\": 1, \"name\": \"grass\"}, {\"y\": 10, \"x\": 1, \"name\": \"grass\"}, {\"y\": 11, \"x\": 1, \"name\": \"grass\"}, {\"y\": 12, \"x\": 1, \"name\": \"grass\"}, {\"y\": 13, \"x\": 1, \"name\": \"grass\"}, {\"y\": 14, \"x\": 1, \"name\": \"grass\"}, {\"y\": 0, \"x\": 2, \"name\": \"grass\"}, {\"y\": 1, \"x\": 2, \"name\": \"grass\"}, {\"y\": 2, \"x\": 2, \"name\": \"grass\"}, {\"y\": 3, \"x\": 2, \"name\": \"grass\"}, {\"y\": 4, \"x\": 2, \"name\": \"grass\"}, {\"y\": 5, \"x\": 2, \"name\": \"grass\"}, {\"y\": 6, \"x\": 2, \"name\": \"grass\"}, {\"y\": 7, \"x\": 2, \"name\": \"grass\"}, {\"y\": 8, \"x\": 2, \"name\": \"grass\"}, {\"y\": 9, \"x\": 2, \"name\": \"grass\"}, {\"y\": 10, \"x\": 2, \"name\": \"grass\", \"unit\": {\"team\": 1, \"name\": \"Artillery\", \"icon\": \"L\"}}, {\"y\": 11, \"x\": 2, \"name\": \"grass\"}, {\"y\": 12, \"x\": 2, \"name\": \"grass\"}, {\"y\": 13, \"x\": 2, \"name\": \"grass\"}, {\"y\": 14, \"x\": 2, \"name\": \"grass\"}, {\"y\": 0, \"x\": 3, \"name\": \"grass\"}, {\"y\": 1, \"x\": 3, \"name\": \"grass\"}, {\"y\": 2, \"x\": 3, \"name\": \"grass\"}, {\"y\": 3, \"x\": 3, \"name\": \"grass\"}, {\"y\": 4, \"x\": 3, \"name\": \"grass\"}, {\"y\": 5, \"x\": 3, \"name\": \"grass\"}, {\"y\": 6, \"x\": 3, \"name\": \"grass\"}, {\"y\": 7, \"x\": 3, \"name\": \"grass\"}, {\"y\": 8, \"x\": 3, \"name\": \"grass\"}, {\"y\": 9, \"x\": 3, \"name\": \"grass\"}, {\"y\": 10, \"x\": 3, \"name\": \"grass\"}, {\"y\": 11, \"x\": 3, \"name\": \"grass\"}, {\"y\": 12, \"x\": 3, \"name\": \"grass\"}, {\"y\": 13, \"x\": 3, \"name\": \"grass\"}, {\"y\": 14, \"x\": 3, \"name\": \"grass\"}, {\"y\": 0, \"x\": 4, \"name\": \"grass\"}, {\"y\": 1, \"x\": 4, \"name\": \"grass\"}, {\"y\": 2, \"x\": 4, \"name\": \"grass\"}, {\"y\": 3, \"x\": 4, \"name\": \"grass\"}, {\"y\": 4, \"x\": 4, \"name\": \"grass\"}, {\"y\": 5, \"x\": 4, \"name\": \"grass\"}, {\"y\": 6, \"x\": 4, \"name\": \"grass\"}, {\"y\": 7, \"x\": 4, \"name\": \"grass\"}, {\"y\": 8, \"x\": 4, \"name\": \"grass\"}, {\"y\": 9, \"x\": 4, \"name\": \"grass\"}, {\"y\": 10, \"x\": 4, \"name\": \"grass\"}, {\"y\": 11, \"x\": 4, \"name\": \"grass\"}, {\"y\": 12, \"x\": 4, \"name\": \"grass\"}, {\"y\": 13, \"x\": 4, \"name\": \"grass\"}, {\"y\": 14, \"x\": 4, \"name\": \"grass\"}, {\"y\": 0, \"x\": 5, \"name\": \"grass\"}, {\"y\": 1, \"x\": 5, \"name\": \"grass\"}, {\"y\": 2, \"x\": 5, \"name\": \"grass\"}, {\"y\": 3, \"x\": 5, \"name\": \"grass\"}, {\"y\": 4, \"x\": 5, \"name\": \"grass\"}, {\"y\": 5, \"x\": 5, \"name\": \"grass\"}, {\"y\": 6, \"x\": 5, \"name\": \"grass\"}, {\"y\": 7, \"x\": 5, \"name\": \"grass\"}, {\"y\": 8, \"x\": 5, \"name\": \"grass\"}, {\"y\": 9, \"x\": 5, \"name\": \"grass\"}, {\"y\": 10, \"x\": 5, \"name\": \"grass\"}, {\"y\": 11, \"x\": 5, \"name\": \"grass\"}, {\"y\": 12, \"x\": 5, \"name\": \"grass\"}, {\"y\": 13, \"x\": 5, \"name\": \"grass\"}, {\"y\": 14, \"x\": 5, \"name\": \"grass\"}, {\"y\": 0, \"x\": 6, \"name\": \"grass\"}, {\"y\": 1, \"x\": 6, \"name\": \"grass\"}, {\"y\": 2, \"x\": 6, \"name\": \"grass\"}, {\"y\": 3, \"x\": 6, \"name\": \"grass\"}, {\"y\": 4, \"x\": 6, \"name\": \"grass\"}, {\"y\": 5, \"x\": 6, \"name\": \"grass\"}, {\"y\": 6, \"x\": 6, \"name\": \"grass\"}, {\"y\": 7, \"x\": 6, \"name\": \"grass\"}, {\"y\": 8, \"x\": 6, \"name\": \"grass\"}, {\"y\": 9, \"x\": 6, \"name\": \"grass\"}, {\"y\": 10, \"x\": 6, \"name\": \"grass\"}, {\"y\": 11, \"x\": 6, \"name\": \"grass\"}, {\"y\": 12, \"x\": 6, \"name\": \"grass\"}, {\"y\": 13, \"x\": 6, \"name\": \"grass\"}, {\"y\": 14, \"x\": 6, \"name\": \"grass\"}, {\"y\": 0, \"x\": 7, \"name\": \"grass\"}, {\"y\": 1, \"x\": 7, \"name\": \"grass\"}, {\"y\": 2, \"x\": 7, \"name\": \"grass\"}, {\"y\": 3, \"x\": 7, \"name\": \"grass\"}, {\"y\": 4, \"x\": 7, \"name\": \"grass\"}, {\"y\": 5, \"x\": 7, \"name\": \"grass\"}, {\"y\": 6, \"x\": 7, \"name\": \"grass\"}, {\"y\": 7, \"x\": 7, \"name\": \"grass\"}, {\"y\": 8, \"x\": 7, \"name\": \"grass\"}, {\"y\": 9, \"x\": 7, \"name\": \"grass\"}, {\"y\": 10, \"x\": 7, \"name\": \"grass\"}, {\"y\": 11, \"x\": 7, \"name\": \"grass\"}, {\"y\": 12, \"x\": 7, \"name\": \"grass\"}, {\"y\": 13, \"x\": 7, \"name\": \"grass\"}, {\"y\": 14, \"x\": 7, \"name\": \"grass\"}, {\"y\": 0, \"x\": 8, \"name\": \"grass\"}, {\"y\": 1, \"x\": 8, \"name\": \"grass\"}, {\"y\": 2, \"x\": 8, \"name\": \"grass\"}, {\"y\": 3, \"x\": 8, \"name\": \"grass\"}, {\"y\": 4, \"x\": 8, \"name\": \"grass\"}, {\"y\": 5, \"x\": 8, \"name\": \"grass\"}, {\"y\": 6, \"x\": 8, \"name\": \"grass\"}, {\"y\": 7, \"x\": 8, \"name\": \"grass\"}, {\"y\": 8, \"x\": 8, \"name\": \"grass\"}, {\"y\": 9, \"x\": 8, \"name\": \"grass\"}, {\"y\": 10, \"x\": 8, \"name\": \"grass\"}, {\"y\": 11, \"x\": 8, \"name\": \"grass\"}, {\"y\": 12, \"x\": 8, \"name\": \"grass\"}, {\"y\": 13, \"x\": 8, \"name\": \"grass\"}, {\"y\": 14, \"x\": 8, \"name\": \"grass\"}, {\"y\": 0, \"x\": 9, \"name\": \"grass\"}, {\"y\": 1, \"x\": 9, \"name\": \"grass\"}, {\"y\": 2, \"x\": 9, \"name\": \"grass\"}, {\"y\": 3, \"x\": 9, \"name\": \"grass\"}, {\"y\": 4, \"x\": 9, \"name\": \"grass\"}, {\"y\": 5, \"x\": 9, \"name\": \"grass\"}, {\"y\": 6, \"x\": 9, \"name\": \"grass\"}, {\"y\": 7, \"x\": 9, \"name\": \"grass\"}, {\"y\": 8, \"x\": 9, \"name\": \"grass\"}, {\"y\": 9, \"x\": 9, \"name\": \"grass\"}, {\"y\": 10, \"x\": 9, \"name\": \"grass\"}, {\"y\": 11, \"x\": 9, \"name\": \"grass\"}, {\"y\": 12, \"x\": 9, \"name\": \"grass\"}, {\"y\": 13, \"x\": 9, \"name\": \"grass\"}, {\"y\": 14, \"x\": 9, \"name\": \"grass\"}, {\"y\": 0, \"x\": 10, \"name\": \"grass\"}, {\"y\": 1, \"x\": 10, \"name\": \"grass\"}, {\"y\": 2, \"x\": 10, \"name\": \"grass\"}, {\"y\": 3, \"x\": 10, \"name\": \"grass\"}, {\"y\": 4, \"x\": 10, \"name\": \"grass\"}, {\"y\": 5, \"x\": 10, \"name\": \"grass\"}, {\"y\": 6, \"x\": 10, \"name\": \"grass\"}, {\"y\": 7, \"x\": 10, \"name\": \"grass\"}, {\"y\": 8, \"x\": 10, \"name\": \"grass\"}, {\"y\": 9, \"x\": 10, \"name\": \"grass\"}, {\"y\": 10, \"x\": 10, \"name\": \"grass\"}, {\"y\": 11, \"x\": 10, \"name\": \"grass\"}, {\"y\": 12, \"x\": 10, \"name\": \"grass\"}, {\"y\": 13, \"x\": 10, \"name\": \"grass\"}, {\"y\": 14, \"x\": 10, \"name\": \"grass\"}, {\"y\": 0, \"x\": 11, \"name\": \"grass\"}, {\"y\": 1, \"x\": 11, \"name\": \"grass\"}, {\"y\": 2, \"x\": 11, \"name\": \"grass\"}, {\"y\": 3, \"x\": 11, \"name\": \"grass\"}, {\"y\": 4, \"x\": 11, \"name\": \"grass\"}, {\"y\": 5, \"x\": 11, \"name\": \"grass\"}, {\"y\": 6, \"x\": 11, \"name\": \"grass\"}, {\"y\": 7, \"x\": 11, \"name\": \"grass\"}, {\"y\": 8, \"x\": 11, \"name\": \"grass\"}, {\"y\": 9, \"x\": 11, \"name\": \"grass\"}, {\"y\": 10, \"x\": 11, \"name\": \"grass\"}, {\"y\": 11, \"x\": 11, \"name\": \"grass\"}, {\"y\": 12, \"x\": 11, \"name\": \"grass\"}, {\"y\": 13, \"x\": 11, \"name\": \"grass\"}, {\"y\": 14, \"x\": 11, \"name\": \"grass\"}, {\"y\": 0, \"x\": 12, \"name\": \"grass\"}, {\"y\": 1, \"x\": 12, \"name\": \"grass\"}, {\"y\": 2, \"x\": 12, \"name\": \"grass\"}, {\"y\": 3, \"x\": 12, \"name\": \"grass\"}, {\"y\": 4, \"x\": 12, \"name\": \"grass\"}, {\"y\": 5, \"x\": 12, \"name\": \"grass\"}, {\"y\": 6, \"x\": 12, \"name\": \"grass\"}, {\"y\": 7, \"x\": 12, \"name\": \"grass\"}, {\"y\": 8, \"x\": 12, \"name\": \"grass\"}, {\"y\": 9, \"x\": 12, \"name\": \"grass\"}, {\"y\": 10, \"x\": 12, \"name\": \"grass\"}, {\"y\": 11, \"x\": 12, \"name\": \"grass\"}, {\"y\": 12, \"x\": 12, \"name\": \"grass\"}, {\"y\": 13, \"x\": 12, \"name\": \"grass\"}, {\"y\": 14, \"x\": 12, \"name\": \"grass\"}, {\"y\": 0, \"x\": 13, \"name\": \"grass\"}, {\"y\": 1, \"x\": 13, \"name\": \"grass\"}, {\"y\": 2, \"x\": 13, \"name\": \"grass\"}, {\"y\": 3, \"x\": 13, \"name\": \"grass\"}, {\"y\": 4, \"x\": 13, \"name\": \"grass\"}, {\"y\": 5, \"x\": 13, \"name\": \"grass\"}, {\"y\": 6, \"x\": 13, \"name\": \"grass\"}, {\"y\": 7, \"x\": 13, \"name\": \"grass\"}, {\"y\": 8, \"x\": 13, \"name\": \"grass\"}, {\"y\": 9, \"x\": 13, \"name\": \"grass\"}, {\"y\": 10, \"x\": 13, \"name\": \"grass\"}, {\"y\": 11, \"x\": 13, \"name\": \"grass\"}, {\"y\": 12, \"x\": 13, \"name\": \"grass\"}, {\"y\": 13, \"x\": 13, \"name\": \"grass\"}, {\"y\": 14, \"x\": 13, \"name\": \"grass\"}, {\"y\": 0, \"x\": 14, \"name\": \"grass\"}, {\"y\": 1, \"x\": 14, \"name\": \"grass\"}, {\"y\": 2, \"x\": 14, \"name\": \"grass\"}, {\"y\": 3, \"x\": 14, \"name\": \"grass\"}, {\"y\": 4, \"x\": 14, \"name\": \"grass\"}, {\"y\": 5, \"x\": 14, \"name\": \"grass\"}, {\"y\": 6, \"x\": 14, \"name\": \"grass\"}, {\"y\": 7, \"x\": 14, \"name\": \"grass\"}, {\"y\": 8, \"x\": 14, \"name\": \"grass\"}, {\"y\": 9, \"x\": 14, \"name\": \"grass\"}, {\"y\": 10, \"x\": 14, \"name\": \"grass\"}, {\"y\": 11, \"x\": 14, \"name\": \"grass\"}, {\"y\": 12, \"x\": 14, \"name\": \"grass\"}, {\"y\": 13, \"x\": 14, \"name\": \"grass\"}, {\"y\": 14, \"x\": 14, \"name\": \"grass\"}, {\"y\": 0, \"x\": 15, \"name\": \"grass\"}, {\"y\": 1, \"x\": 15, \"name\": \"grass\"}, {\"y\": 2, \"x\": 15, \"name\": \"grass\"}, {\"y\": 3, \"x\": 15, \"name\": \"grass\"}, {\"y\": 4, \"x\": 15, \"name\": \"grass\"}, {\"y\": 5, \"x\": 15, \"name\": \"grass\"}, {\"y\": 6, \"x\": 15, \"name\": \"grass\"}, {\"y\": 7, \"x\": 15, \"name\": \"grass\"}, {\"y\": 8, \"x\": 15, \"name\": \"grass\"}, {\"y\": 9, \"x\": 15, \"name\": \"grass\"}, {\"y\": 10, \"x\": 15, \"name\": \"grass\"}, {\"y\": 11, \"x\": 15, \"name\": \"grass\"}, {\"y\": 12, \"x\": 15, \"name\": \"grass\"}, {\"y\": 13, \"x\": 15, \"name\": \"grass\"}, {\"y\": 14, \"x\": 15, \"name\": \"grass\"}, {\"y\": 0, \"x\": 16, \"name\": \"grass\"}, {\"y\": 1, \"x\": 16, \"name\": \"grass\"}, {\"y\": 2, \"x\": 16, \"name\": \"grass\"}, {\"y\": 3, \"x\": 16, \"name\": \"grass\"}, {\"y\": 4, \"x\": 16, \"name\": \"grass\"}, {\"y\": 5, \"x\": 16, \"name\": \"grass\"}, {\"y\": 6, \"x\": 16, \"name\": \"grass\"}, {\"y\": 7, \"x\": 16, \"name\": \"grass\"}, {\"y\": 8, \"x\": 16, \"name\": \"grass\"}, {\"y\": 9, \"x\": 16, \"name\": \"grass\"}, {\"y\": 10, \"x\": 16, \"name\": \"grass\"}, {\"y\": 11, \"x\": 16, \"name\": \"grass\"}, {\"y\": 12, \"x\": 16, \"name\": \"grass\"}, {\"y\": 13, \"x\": 16, \"name\": \"grass\"}, {\"y\": 14, \"x\": 16, \"name\": \"grass\"}, {\"y\": 0, \"x\": 17, \"name\": \"grass\"}, {\"y\": 1, \"x\": 17, \"name\": \"grass\"}, {\"y\": 2, \"x\": 17, \"name\": \"grass\"}, {\"y\": 3, \"x\": 17, \"name\": \"grass\"}, {\"y\": 4, \"x\": 17, \"name\": \"grass\"}, {\"y\": 5, \"x\": 17, \"name\": \"grass\"}, {\"y\": 6, \"x\": 17, \"name\": \"grass\"}, {\"y\": 7, \"x\": 17, \"name\": \"grass\"}, {\"y\": 8, \"x\": 17, \"name\": \"grass\"}, {\"y\": 9, \"x\": 17, \"name\": \"grass\"}, {\"y\": 10, \"x\": 17, \"name\": \"grass\"}, {\"y\": 11, \"x\": 17, \"name\": \"grass\"}, {\"y\": 12, \"x\": 17, \"name\": \"grass\"}, {\"y\": 13, \"x\": 17, \"name\": \"grass\"}, {\"y\": 14, \"x\": 17, \"name\": \"grass\"}, {\"y\": 0, \"x\": 18, \"name\": \"grass\"}, {\"y\": 1, \"x\": 18, \"name\": \"grass\"}, {\"y\": 2, \"x\": 18, \"name\": \"grass\"}, {\"y\": 3, \"x\": 18, \"name\": \"grass\"}, {\"y\": 4, \"x\": 18, \"name\": \"grass\"}, {\"y\": 5, \"x\": 18, \"name\": \"grass\"}, {\"y\": 6, \"x\": 18, \"name\": \"grass\"}, {\"y\": 7, \"x\": 18, \"name\": \"grass\"}, {\"y\": 8, \"x\": 18, \"name\": \"grass\"}, {\"y\": 9, \"x\": 18, \"name\": \"grass\"}, {\"y\": 10, \"x\": 18, \"name\": \"grass\"}, {\"y\": 11, \"x\": 18, \"name\": \"grass\"}, {\"y\": 12, \"x\": 18, \"name\": \"grass\"}, {\"y\": 13, \"x\": 18, \"name\": \"grass\"}, {\"y\": 14, \"x\": 18, \"name\": \"grass\"}, {\"y\": 0, \"x\": 19, \"name\": \"grass\"}, {\"y\": 1, \"x\": 19, \"name\": \"grass\"}, {\"y\": 2, \"x\": 19, \"name\": \"grass\"}, {\"y\": 3, \"x\": 19, \"name\": \"grass\"}, {\"y\": 4, \"x\": 19, \"name\": \"grass\"}, {\"y\": 5, \"x\": 19, \"name\": \"grass\"}, {\"y\": 6, \"x\": 19, \"name\": \"grass\"}, {\"y\": 7, \"x\": 19, \"name\": \"grass\"}, {\"y\": 8, \"x\": 19, \"name\": \"grass\"}, {\"y\": 9, \"x\": 19, \"name\": \"grass\"}, {\"y\": 10, \"x\": 19, \"name\": \"grass\"}, {\"y\": 11, \"x\": 19, \"name\": \"grass\"}, {\"y\": 12, \"x\": 19, \"name\": \"grass\"}, {\"y\": 13, \"x\": 19, \"name\": \"grass\"}, {\"y\": 14, \"x\": 19, \"name\": \"grass\"}, {\"y\": 0, \"x\": 20, \"name\": \"grass\"}, {\"y\": 1, \"x\": 20, \"name\": \"grass\"}, {\"y\": 2, \"x\": 20, \"name\": \"grass\"}, {\"y\": 3, \"x\": 20, \"name\": \"grass\"}, {\"y\": 4, \"x\": 20, \"name\": \"grass\"}, {\"y\": 5, \"x\": 20, \"name\": \"grass\"}, {\"y\": 6, \"x\": 20, \"name\": \"grass\"}, {\"y\": 7, \"x\": 20, \"name\": \"grass\"}, {\"y\": 8, \"x\": 20, \"name\": \"grass\"}, {\"y\": 9, \"x\": 20, \"name\": \"grass\"}, {\"y\": 10, \"x\": 20, \"name\": \"grass\"}, {\"y\": 11, \"x\": 20, \"name\": \"grass\"}, {\"y\": 12, \"x\": 20, \"name\": \"grass\"}, {\"y\": 13, \"x\": 20, \"name\": \"grass\"}, {\"y\": 14, \"x\": 20, \"name\": \"grass\"}, {\"y\": 0, \"x\": 21, \"name\": \"grass\"}, {\"y\": 1, \"x\": 21, \"name\": \"grass\"}, {\"y\": 2, \"x\": 21, \"name\": \"grass\"}, {\"y\": 3, \"x\": 21, \"name\": \"grass\"}, {\"y\": 4, \"x\": 21, \"name\": \"grass\"}, {\"y\": 5, \"x\": 21, \"name\": \"grass\"}, {\"y\": 6, \"x\": 21, \"name\": \"grass\"}, {\"y\": 7, \"x\": 21, \"name\": \"grass\"}, {\"y\": 8, \"x\": 21, \"name\": \"grass\"}, {\"y\": 9, \"x\": 21, \"name\": \"grass\"}, {\"y\": 10, \"x\": 21, \"name\": \"grass\"}, {\"y\": 11, \"x\": 21, \"name\": \"grass\"}, {\"y\": 12, \"x\": 21, \"name\": \"grass\"}, {\"y\": 13, \"x\": 21, \"name\": \"grass\"}, {\"y\": 14, \"x\": 21, \"name\": \"grass\"}, {\"y\": 0, \"x\": 22, \"name\": \"grass\"}, {\"y\": 1, \"x\": 22, \"name\": \"grass\"}, {\"y\": 2, \"x\": 22, \"name\": \"grass\"}, {\"y\": 3, \"x\": 22, \"name\": \"grass\"}, {\"y\": 4, \"x\": 22, \"name\": \"grass\"}, {\"y\": 5, \"x\": 22, \"name\": \"grass\"}, {\"y\": 6, \"x\": 22, \"name\": \"grass\"}, {\"y\": 7, \"x\": 22, \"name\": \"grass\"}, {\"y\": 8, \"x\": 22, \"name\": \"grass\"}, {\"y\": 9, \"x\": 22, \"name\": \"grass\"}, {\"y\": 10, \"x\": 22, \"name\": \"grass\"}, {\"y\": 11, \"x\": 22, \"name\": \"grass\"}, {\"y\": 12, \"x\": 22, \"name\": \"grass\"}, {\"y\": 13, \"x\": 22, \"name\": \"grass\"}, {\"y\": 14, \"x\": 22, \"name\": \"grass\"}, {\"y\": 0, \"x\": 23, \"name\": \"grass\"}, {\"y\": 1, \"x\": 23, \"name\": \"grass\"}, {\"y\": 2, \"x\": 23, \"name\": \"grass\"}, {\"y\": 3, \"x\": 23, \"name\": \"grass\"}, {\"y\": 4, \"x\": 23, \"name\": \"grass\"}, {\"y\": 5, \"x\": 23, \"name\": \"grass\"}, {\"y\": 6, \"x\": 23, \"name\": \"grass\"}, {\"y\": 7, \"x\": 23, \"name\": \"grass\"}, {\"y\": 8, \"x\": 23, \"name\": \"grass\"}, {\"y\": 9, \"x\": 23, \"name\": \"grass\"}, {\"y\": 10, \"x\": 23, \"name\": \"grass\"}, {\"y\": 11, \"x\": 23, \"name\": \"grass\"}, {\"y\": 12, \"x\": 23, \"name\": \"grass\"}, {\"y\": 13, \"x\": 23, \"name\": \"grass\"}, {\"y\": 14, \"x\": 23, \"name\": \"grass\"}, {\"y\": 0, \"x\": 24, \"name\": \"grass\"}, {\"y\": 1, \"x\": 24, \"name\": \"grass\"}, {\"y\": 2, \"x\": 24, \"name\": \"grass\"}, {\"y\": 3, \"x\": 24, \"name\": \"grass\"}, {\"y\": 4, \"x\": 24, \"name\": \"grass\"}, {\"y\": 5, \"x\": 24, \"name\": \"grass\"}, {\"y\": 6, \"x\": 24, \"name\": \"grass\"}, {\"y\": 7, \"x\": 24, \"name\": \"grass\"}, {\"y\": 8, \"x\": 24, \"name\": \"grass\"}, {\"y\": 9, \"x\": 24, \"name\": \"grass\"}, {\"y\": 10, \"x\": 24, \"name\": \"grass\"}, {\"y\": 11, \"x\": 24, \"name\": \"grass\"}, {\"y\": 12, \"x\": 24, \"name\": \"grass\"}, {\"y\": 13, \"x\": 24, \"name\": \"grass\"}, {\"y\": 14, \"x\": 24, \"name\": \"grass\"}, {\"y\": 0, \"x\": 25, \"name\": \"grass\"}, {\"y\": 1, \"x\": 25, \"name\": \"grass\"}, {\"y\": 2, \"x\": 25, \"name\": \"grass\"}, {\"y\": 3, \"x\": 25, \"name\": \"grass\"}, {\"y\": 4, \"x\": 25, \"name\": \"grass\"}, {\"y\": 5, \"x\": 25, \"name\": \"grass\"}, {\"y\": 6, \"x\": 25, \"name\": \"grass\"}, {\"y\": 7, \"x\": 25, \"name\": \"grass\"}, {\"y\": 8, \"x\": 25, \"name\": \"grass\"}, {\"y\": 9, \"x\": 25, \"name\": \"grass\"}, {\"y\": 10, \"x\": 25, \"name\": \"grass\"}, {\"y\": 11, \"x\": 25, \"name\": \"grass\"}, {\"y\": 12, \"x\": 25, \"name\": \"grass\"}, {\"y\": 13, \"x\": 25, \"name\": \"grass\"}, {\"y\": 14, \"x\": 25, \"name\": \"grass\"}, {\"y\": 0, \"x\": 26, \"name\": \"grass\"}, {\"y\": 1, \"x\": 26, \"name\": \"grass\"}, {\"y\": 2, \"x\": 26, \"name\": \"grass\"}, {\"y\": 3, \"x\": 26, \"name\": \"grass\"}, {\"y\": 4, \"x\": 26, \"name\": \"grass\"}, {\"y\": 5, \"x\": 26, \"name\": \"grass\"}, {\"y\": 6, \"x\": 26, \"name\": \"grass\"}, {\"y\": 7, \"x\": 26, \"name\": \"grass\"}, {\"y\": 8, \"x\": 26, \"name\": \"grass\"}, {\"y\": 9, \"x\": 26, \"name\": \"grass\"}, {\"y\": 10, \"x\": 26, \"name\": \"grass\"}, {\"y\": 11, \"x\": 26, \"name\": \"grass\"}, {\"y\": 12, \"x\": 26, \"name\": \"grass\"}, {\"y\": 13, \"x\": 26, \"name\": \"grass\"}, {\"y\": 14, \"x\": 26, \"name\": \"grass\"}, {\"y\": 0, \"x\": 27, \"name\": \"grass\"}, {\"y\": 1, \"x\": 27, \"name\": \"grass\"}, {\"y\": 2, \"x\": 27, \"name\": \"grass\"}, {\"y\": 3, \"x\": 27, \"name\": \"grass\"}, {\"y\": 4, \"x\": 27, \"name\": \"grass\"}, {\"y\": 5, \"x\": 27, \"name\": \"grass\"}, {\"y\": 6, \"x\": 27, \"name\": \"grass\"}, {\"y\": 7, \"x\": 27, \"name\": \"grass\"}, {\"y\": 8, \"x\": 27, \"name\": \"grass\"}, {\"y\": 9, \"x\": 27, \"name\": \"grass\"}, {\"y\": 10, \"x\": 27, \"name\": \"grass\"}, {\"y\": 11, \"x\": 27, \"name\": \"grass\"}, {\"y\": 12, \"x\": 27, \"name\": \"grass\"}, {\"y\": 13, \"x\": 27, \"name\": \"grass\"}, {\"y\": 14, \"x\": 27, \"name\": \"grass\"}, {\"y\": 0, \"x\": 28, \"name\": \"grass\"}, {\"y\": 1, \"x\": 28, \"name\": \"grass\"}, {\"y\": 2, \"x\": 28, \"name\": \"grass\"}, {\"y\": 3, \"x\": 28, \"name\": \"grass\"}, {\"y\": 4, \"x\": 28, \"name\": \"grass\"}, {\"y\": 5, \"x\": 28, \"name\": \"grass\"}, {\"y\": 6, \"x\": 28, \"name\": \"grass\"}, {\"y\": 7, \"x\": 28, \"name\": \"grass\"}, {\"y\": 8, \"x\": 28, \"name\": \"grass\"}, {\"y\": 9, \"x\": 28, \"name\": \"grass\"}, {\"y\": 10, \"x\": 28, \"name\": \"grass\"}, {\"y\": 11, \"x\": 28, \"name\": \"grass\"}, {\"y\": 12, \"x\": 28, \"name\": \"grass\"}, {\"y\": 13, \"x\": 28, \"name\": \"grass\"}, {\"y\": 14, \"x\": 28, \"name\": \"grass\"}, {\"y\": 0, \"x\": 29, \"name\": \"grass\"}, {\"y\": 1, \"x\": 29, \"name\": \"grass\"}, {\"y\": 2, \"x\": 29, \"name\": \"grass\"}, {\"y\": 3, \"x\": 29, \"name\": \"grass\"}, {\"y\": 4, \"x\": 29, \"name\": \"grass\"}, {\"y\": 5, \"x\": 29, \"name\": \"grass\"}, {\"y\": 6, \"x\": 29, \"name\": \"grass\"}, {\"y\": 7, \"x\": 29, \"name\": \"grass\"}, {\"y\": 8, \"x\": 29, \"name\": \"grass\"}, {\"y\": 9, \"x\": 29, \"name\": \"grass\"}, {\"y\": 10, \"x\": 29, \"name\": \"grass\"}, {\"y\": 11, \"x\": 29, \"name\": \"grass\"}, {\"y\": 12, \"x\": 29, \"name\": \"grass\"}, {\"y\": 13, \"x\": 29, \"name\": \"grass\"}, {\"y\": 14, \"x\": 29, \"name\": \"grass\"}], \"name\": \"Hello World\", \"w\": 30, \"teams\": [{\"color\": \"r\", \"name\": \"Red\"}, {\"color\": \"b\", \"name\": \"Blue\"}]}, \"history\": [[[[0, 4], [1, 4], \"Wait\"]]]}\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bemacs\u001b[K\b\b\b\b\b\u001b[3Pfg\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n        \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[A\n        \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(80,24,r)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[31m#self.buff = widgets.Buffer(10,5)                                       \u001b[39;49m\r\n\u001b[A\n        \u001b[31m#self.buff.write(\"Hello, world!\")                                       \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[K\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(1,1)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.draw(1,20,\u001b[32m\"r\"\u001b[39;49m)\u001b[K\r\n        \u001b[31m#self.buff.draw(1,19)                                                   \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[K\n    \u001b[31m# Runs an interactive session of our game with the player until either      \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   53% L62   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[17;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\t\u001b[?25l\u001b[33mcell\u001b[39;49m[\u001b[32m\"y\"\u001b[39;49m] = y\r\n\t        \u001b[33mcell\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"grass\"\u001b[39;49m\u001b[K\r\n\t        gdict[\u001b[32m\"cells\"\u001b[39;49m].append(cell)\r\n\t\u001b[33munit1\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"i\"\u001b[39;49m\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 0\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m = {}\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[12;5H    \u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[K\r\n\tgdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[K\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\r\n\t\u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[20;5H    rdict[\u001b[32m'history'\u001b[39;49m].append([[(0,4),(1,4),\u001b[32m\"Wait\"\u001b[39;49m]])\u001b[K\r\n\u001b[K\u001b[22;5H    \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[23;29H\u001b[7m28% L48\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgrid.py\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lrid.py\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lid.py\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld.py\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.py\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[K\u001b[22d\n\n\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/code/core/\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lme.py\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[31m# A game object handles all of the actual game play elements. The rules         \u001b[39;49m\r\n\u001b[31m# are what give meaning to the pieces in a Grid, and is controlled (usually)    \u001b[39;49m\r\n\u001b[31m# by a Controller that provides piecewise input.                                \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m . \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m grid, widgets\r\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\u001b[K\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m copy, json\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Global strings. Stored to avoid mistyping.                                    \u001b[39;49m\r\n\u001b[33mCTRL_COORD\u001b[39;49m = \u001b[32m\"coord\"\u001b[39;49m\u001b[K\r\n\u001b[33mCTRL_MENU\u001b[39;49m = \u001b[32m\"menu\"\u001b[39;49m\u001b[K\r\n\u001b[33mCTRL_UNDO\u001b[39;49m = \u001b[32m\"undo\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# Custom Cell subclass. Contains information such as terrain defensive bonus.   \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(grid.Cell):\u001b[K\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\u001b[K\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\r\n\u001b[K\u001b[23;14H\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1 \u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Cell, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon, color)\u001b[K\r\n\u001b[K\u001b[4;3H\u001b[31mCustom Team subclass. Contains information such as resources.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(grid.Team):\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Team, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, color)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.resources = 0\r\n\u001b[K\n\u001b[31m# Custom Unit subclass. Contains information such as HP, readiness, and         \u001b[39;49m\r\n\u001b[31m# a custom drawing method.                                                      \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(grid.Unit):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(Unit, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(name, icon)\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp = 100\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready = \u001b[35mTrue\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.move = 3\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This drawing method overrides the default method by handling              \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n\u001b[23;29H\u001b[7m 4% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# animations for when this unit is low on resources such as HP,             \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# ammo, etc.                                                                \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim += .02\r\n\u001b[K\n\t\u001b[31m# Gray out units that can't act. Units are always bold.                 \u001b[39;49m\r\n\t\u001b[33mready\u001b[39;49m = \u001b[32m\"x\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.ready \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mcolor\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color + ready + col + \u001b[32m\"!\"\u001b[39;49m\r\n\u001b[K\u001b[11;52H\u001b[8P\r\u001b[8@\u001b[11;11H\u001b[31mBuild the animation for this unit based on values\u001b[39;49m\r\n        \u001b[31m# that are running low (hp, fuel, etc).                                 \u001b[39;49m\r\n\u001b[13;5H    \u001b[33mframes\u001b[39;49m = [\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon]\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp < 90):\u001b[K\r\n\t    frames.append( \u001b[1m\u001b[34mstr\u001b[0m\u001b[39;49m((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.hp//10)+1)  )\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim) >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(frames):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim = 0.0\r\n\t\u001b[33mimg\u001b[39;49m = frames[\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.anim)]\u001b[20;63H\u001b[4P\u001b[20;5H\u001b[4@\u001b[20;11H\u001b[31mDraw the character.                                     \u001b[39;49m\u001b[21;5H    draw.char(x, y, img, color)\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m8% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    draw.char(x, y, img, color)\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The Game serve two purposes. Firstly, it is a factory that produces           \u001b[39;49m\r\n\u001b[31m# new objects according the needs of the game being played. Secondly, they      \u001b[39;49m\r\n\u001b[31m# serve as a state machine for performing legal actions and changing the        \u001b[39;49m\r\n\u001b[31m# state of the game grid.                                                       \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[31m# Required methods:                                                             \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  make_unit                                      \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[C\u001b[31m  make_team                          \u001b[39;49m\u001b[8@\u001b[31m        \u001b[39;49m\r\n\u001b[31m#   make_cell                                                                   \u001b[39;49m\r\n\u001b[31m#   pop_alerts                                                                  \u001b[39;49m\r\n\u001b[31m#   process                                                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mGame\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[31m# TODO: load the rules definition (types of units and properties)       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data = data\r\n\u001b[K\n\t\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\u001b[23;29H\u001b[7m13% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# Create the grid with what's left.                                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid.Grid(data[\u001b[32m\"grid\"\u001b[39;49m], \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\u001b[K\n        \u001b[31m# The history contains all actions for this player turn.                \u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\r\n\u001b[K\u001b[9;32H\u001b[8P\r\u001b[8@\u001b[9;11H\u001b[31mThese are the state variables\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\u001b[K\n\t\b\u001b[8P\r\u001b[8@\u001b[14;11H\u001b[31mother\u001b[39;49m\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\r\n\u001b[K\u001b[18;12H\u001b[31mhe first index is the attacker, the second is the defender.   \u001b[39;49m\r\n\t\u001b[31m# This information should really be stored in the Unit object           \u001b[39;49m\r\n\t\u001b[31m# itself. Ugh.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[22;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[23;30H\u001b[7m6% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix = {}\u001b[K\u001b[3;14Hmatrix[\u001b[32m\"i\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 50, \u001b[32m\"T\"\u001b[39;49m: 10, \u001b[32m\"M\"\u001b[39;49m: 5, \u001b[32m\"H\"\u001b[39;49m: 1, \u001b[32m\"L\"\u001b[39;49m: 10}\u001b[4;14Hmatrix[\u001b[32m\"T\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"M\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 90, \u001b[32m\"T\"\u001b[39;49m: 70, \u001b[32m\"M\"\u001b[39;49m: 40, \u001b[32m\"H\"\u001b[39;49m: 20, \u001b[32m\"L\"\u001b[39;49m: 70}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[\u001b[32m\"H\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 100, \u001b[32m\"T\"\u001b[39;49m: 90, \u001b[32m\"M\"\u001b[39;49m: 60, \u001b[32m\"H\"\u001b[39;49m: 30, \u001b[32m\"L\"\u001b[39;49m: 90}\u001b[K\u001b[7;14Hmatrix[\u001b[32m\"L\"\u001b[39;49m] = {\u001b[32m\"i\"\u001b[39;49m: 70, \u001b[32m\"T\"\u001b[39;49m: 40, \u001b[32m\"M\"\u001b[39;49m: 20, \u001b[32m\"H\"\u001b[39;49m: 10, \u001b[32m\"L\"\u001b[39;49m: 40}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties = {}\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"i\"\u001b[39;49m] = []\u001b[K\u001b[10;14Hproperties[\u001b[32m\"T\"\u001b[39;49m] = []\u001b[11;14Hproperties[\u001b[32m\"M\"\u001b[39;49m] = []\u001b[12;14Hproperties[\u001b[32m\"H\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[\u001b[32m\"L\"\u001b[39;49m] = [\u001b[32m\"indirect\"\u001b[39;49m]\r\n\u001b[K\n\t\u001b[31m# Replay turn history.                                                  \u001b[39;49m\r\n\t\u001b[33mreplay\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data.pop(\u001b[32m\"history\"\u001b[39;49m,[])\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m] = []\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m turn \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m replay:\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m action \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m turn:\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m step \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m action:\u001b[K\r\n\t            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\n\u001b[C\u001b[7m20% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\u001b[4;14Halerts = []\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.save())\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m json.dumps(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data)\r\n\u001b[K\u001b[13;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m5% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+-------------------------------------------------------------------------------\u001b[2;1H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\r\u001b[3d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m..............................\r\u001b[4d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m..............................\r\u001b[5d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m..............................\r\u001b[6d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\r\u001b[7d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m..............................\r\u001b[8d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m..............................\r\u001b[9d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m..............................\r\u001b[10d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m..............................\r\u001b[11d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m..............................\r\u001b[12d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\r\u001b[13d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m..............................\r\u001b[14d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m..............................\r\u001b[15d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m..............................\r\u001b[16d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m..............................\r\u001b[17d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[18d\b|\u001b[19d\b|\u001b[20d\b|\u001b[21d\b|\u001b[22d\b|\u001b[23d\b|\u001b[24d\b|\u001b[16;32H\u001b[6;11H+-------------------+\u001b[7;11H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;11H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[9;11H+-------------------+\u001b[7d\b\b\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\u001b[24d\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n                    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n    \u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m json.dumps(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data)\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\n    \u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[K\r\n        \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   25% L119  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[6d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default shell.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lshell.py\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\t\u001b[33mcell\u001b[39;49m[\u001b[32m\"y\"\u001b[39;49m] = y\u001b[K\u001b[3;13H    \u001b[33mcell\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"grass\"\u001b[39;49m\r\n\t        gdict[\u001b[32m\"cells\"\u001b[39;49m].append(cell)\r\n\t\u001b[33munit1\u001b[39;49m = {}\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"i\"\u001b[39;49m\r\n\t\u001b[33munit1\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Infantry\"\u001b[39;49m\u001b[8;5H    \u001b[33munit1\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 0\u001b[K\u001b[9;5H    \u001b[33munit2\u001b[39;49m = {}\u001b[K\u001b[10;5H    \u001b[33munit2\u001b[39;49m[\u001b[32m\"icon\"\u001b[39;49m] = \u001b[32m\"L\"\u001b[39;49m\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"name\"\u001b[39;49m] = \u001b[32m\"Artillery\"\u001b[39;49m\u001b[K\r\n\t\u001b[33munit2\u001b[39;49m[\u001b[32m\"team\"\u001b[39;49m] = 1\u001b[13;5H    gdict[\u001b[32m\"cells\"\u001b[39;49m][4][\u001b[32m\"unit\"\u001b[39;49m] = unit1\u001b[K\u001b[14;5H    gdict[\u001b[32m\"cells\"\u001b[39;49m][40][\u001b[32m\"unit\"\u001b[39;49m] = unit2\r\n\t\u001b[33mteam1\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Red\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"r\"\u001b[39;49m}\u001b[K\r\n\t\u001b[33mteam2\u001b[39;49m = {\u001b[32m\"name\"\u001b[39;49m:\u001b[32m\"Blue\"\u001b[39;49m,\u001b[32m\"color\"\u001b[39;49m:\u001b[32m\"b\"\u001b[39;49m}\r\n\t\u001b[33mgdict\u001b[39;49m[\u001b[32m\"teams\"\u001b[39;49m] = [team1,team2]\u001b[18;5H    \u001b[33mrdict\u001b[39;49m[\u001b[32m\"grid\"\u001b[39;49m] = gdict\u001b[K\u001b[19;5H    \u001b[33mrdict\u001b[39;49m[\u001b[32m\"history\"\u001b[39;49m] = []\u001b[K\r\n\trdict[\u001b[32m'history'\u001b[39;49m].append([[(0,4),(1,4),\u001b[32m\"Wait\"\u001b[39;49m]])\r\n\u001b[K\n\t\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[23;14H\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   28% L48 \u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\t\u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(80,24,r)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[31m#self.buff = widgets.Buffer(10,5)                                       \u001b[39;49m\r\n\t\u001b[31m#self.buff.write(\"Hello, world!\")                                       \u001b[39;49m\r\n\u001b[K\n\u001b[K\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(1,1)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.draw(1,20,\u001b[32m\"r\"\u001b[39;49m)\u001b[K\r\n\t\u001b[31m#self.buff.draw(1,19)                                                   \u001b[39;49m\r\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# Runs an interactive session of our game with the player until either      \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[23;29H\u001b[7m53\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[5;42H\b\b\b\b\b\b\b\b\u001b[?25l0,24,r)\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,24,r)\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l7,24,r)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l8,24,r)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l,r)\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2,r)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[5;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[5;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;5H\u001b[?25l\u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# turn off graphics, print the traceback, and kill the program.             \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrun\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\tgfx.start(\u001b[32m\"ascii\"\u001b[39;49m)\r\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36mtry\u001b[0m\u001b[39;49m:\u001b[K\n\u001b[33mc\u001b[39;49m = -1\n\b\b\b\b\b\bgfx.clear()\u001b[12;5H        \u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m c != \u001b[32m\"q\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.display()\u001b[K\r\n\t        \u001b[33mc\u001b[39;49m = gfx.get_input()\r\n\t\u001b[8@\u001b[16;13H        \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.handle_input(c)\r\n\t            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[20;5H                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.handle_input(c)\u001b[K\r\n\u001b[K\u001b[22;5H            gfx.refresh()\u001b[K\n\b\u001b[7m70% L66\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;5H\u001b[?25l            gfx.refresh()\u001b[K\u001b[4;5H    \u001b[1m\u001b[36mexcept\u001b[0m\u001b[39;49m:\u001b[K\u001b[5;5H        gfx.stop()\r\n\t    \u001b[1m\u001b[36mprint\u001b[0m\u001b[39;49m(traceback.format_exc())\u001b[7;13Hsys.\u001b[35mexit\u001b[39;49m(-1)\r\n\n\tgfx.stop()\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\u001b[23;29H\u001b[7mBot L85\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# turn off graphics, print the traceback, and kill the program.             \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrun\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\tgfx.start(\u001b[32m\"ascii\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\n\t\u001b[1m\u001b[36mtry\u001b[0m\u001b[39;49m:\u001b[K\n\u001b[33mc\u001b[39;49m = -1\n\b\b\b\b\b\bgfx.clear()\u001b[12;13H\u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m c != \u001b[32m\"q\"\u001b[39;49m:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.display()\r\n\t\t\u001b[33mc\u001b[39;49m = gfx.get_input()\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[16;21H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.handle_input(c)\u001b[17;21H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.handle_input(c)\r\n\n\t\tgfx.refresh()\n\b\u001b[7m70%\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;5H\u001b[?25l    \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[4;5H    \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(78,22,r)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[31m#self.buff = widgets.Buffer(10,5)                                       \u001b[39;49m\r\n\t\u001b[31m#self.buff.write(\"Hello, world!\")                                       \u001b[39;49m\r\n\u001b[K\n\u001b[K\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(1,1)\u001b[K\r\n\t\u001b[8P\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.draw(1,20,\u001b[32m\"r\"\u001b[39;49m)\u001b[K\r\n\t\u001b[31m#self.buff.draw(1,19)                                                   \u001b[39;49m\r\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# Runs an interactive session of our game with the player until either      \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[23;29H\u001b[7m53% L67\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25l(No changes need to be saved)\u001b[22;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J+------------------------------------------------------------------------------+\u001b[2;1H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[80G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[3;1H|\u001b[32m\u001b[40m..............................\u001b[80G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[4;1H|\u001b[32m\u001b[40m..............................\u001b[80G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[5;1H|\u001b[32m\u001b[40m..............................\u001b[80G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[6;1H|\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[80G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[7;1H|\u001b[32m\u001b[40m..............................\u001b[80G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[8;1H|\u001b[32m\u001b[40m..............................\u001b[80G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[9;1H|\u001b[32m\u001b[40m..............................\u001b[80G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[10;1H|\u001b[32m\u001b[40m..............................\u001b[80G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[11;1H|\u001b[32m\u001b[40m..............................\u001b[80G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[12;1H|\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[80G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[13;1H|\u001b[32m\u001b[40m..............................\u001b[80G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[14;1H|\u001b[32m\u001b[40m..............................\u001b[80G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[15;1H|\u001b[32m\u001b[40m..............................\u001b[80G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[16;1H|\u001b[32m\u001b[40m..............................\u001b[80G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[17;1H|\u001b[80G|\u001b[18;1H|\u001b[80G|\u001b[19;1H|\u001b[80G|\u001b[20;1H|\u001b[80G|\u001b[21;1H|\u001b[80G|\u001b[22;1H|\u001b[80G|\u001b[23;1H|\u001b[80G|\u001b[24;1H+------------------------------------------------------------------------------\u001b[16;32H\u001b[6;11H+-------------------+\u001b[7;11H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;11H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[9;11H+-------------------+\u001b[7d\b\b\r\u001b[2d|\u001b[32m\u001b[40m.\u001b[3d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[7;30H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\u001b[24d\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n        \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[A\n        \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(78,22,r)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[31m#self.buff = widgets.Buffer(10,5)                                       \u001b[39;49m\r\n\u001b[A\n        \u001b[31m#self.buff.write(\"Hello, world!\")                                       \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[K\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(1,1)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.draw(1,20,\u001b[32m\"r\"\u001b[39;49m)\u001b[K\r\n        \u001b[31m#self.buff.draw(1,19)                                                   \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[K\n    \u001b[31m# Runs an interactive session of our game with the player until either      \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   53% L67   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[5;42H\b\b\b\b\b\b\b\u001b[?25l,22,r)\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l6,22,r)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l,r)\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l0,r)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m59\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l,2)\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2,2)\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +----------------------------------------------------------------------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[18d |\u001b[79G|\r\u001b[19d |\u001b[79G|\r\u001b[20d |\u001b[79G|\r\u001b[21d |\u001b[79G|\r\u001b[22d |\u001b[79G|\r\u001b[23d +----------------------------------------------------------------------------+\u001b[17;33H\u001b[7;12H+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[8d\b\b\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[17d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;6H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;7H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;8H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;9H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;10H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;11H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;12H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;13H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;14H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;15H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;16H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;17H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;18H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;19H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;20H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;21H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;22H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;23H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;24H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;25H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;26H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;27H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;28H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;29H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;30H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;31H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;32H\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;32H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;31H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;30H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;29H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;28H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;27H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;26H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;25H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;24H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;23H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;22H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;21H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;20H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;20H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;20H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;19H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;18H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;17H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;16H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;15H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;14H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;13H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;12H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;12H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;13H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;14H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;15H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;16H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;17H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;18H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;19H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;20H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;21H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;22H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\u001b[24d\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n        \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[A\n        \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(76,20,r)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[31m#self.buff = widgets.Buffer(10,5)                                       \u001b[39;49m\r\n\u001b[A\n        \u001b[31m#self.buff.write(\"Hello, world!\")                                       \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[K\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(2,2)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.draw(1,20,\u001b[32m\"r\"\u001b[39;49m)\u001b[K\r\n        \u001b[31m#self.buff.draw(1,19)                                                   \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[K\n    \u001b[31m# Runs an interactive session of our game with the player until either      \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   53% L59   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lq,2)\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l,2)\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/shell.py...\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/shell.py\u001b[K\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +----------------------------------------------------------------------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[18d |\u001b[79G|\r\u001b[19d |\u001b[79G|\r\u001b[20d |\u001b[79G|\r\u001b[21d |\u001b[79G|\r\u001b[22d |\u001b[79G|\r\u001b[23d +----------------------------------------------------------------------------+\u001b[17;33H\u001b[7;12H+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[8d\b\b\u001b[3;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;6H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;7H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;8H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;9H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;10H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;11H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;12H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;13H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;14H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;15H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;16H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[17d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;17H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;17H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;17H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;17H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;16H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;15H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;14H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;13H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;11H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;10H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;9H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\u001b[24d\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n        \u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\u001b[A\n        \u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(76,20,r)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[31m#self.buff = widgets.Buffer(10,5)                                       \u001b[39;49m\r\n\u001b[A\n        \u001b[31m#self.buff.write(\"Hello, world!\")                                       \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[K\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(2,2)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.draw(1,20,\u001b[32m\"r\"\u001b[39;49m)\u001b[K\r\n        \u001b[31m#self.buff.draw(1,19)                                                   \u001b[39;49m\r\n\u001b[A\n\u001b[K\n\u001b[K\n    \u001b[31m# Runs an interactive session of our game with the player until either      \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   53% L59   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[14;22H\u001b[24;1H\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/code/core/\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\t\u001b[?25l[No match]\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lde/\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25laphics/\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25lMaking completion list...\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/code/graphics/gfx\u001b[H\n\t\u001b[31m#self.buff.write(\"Hello, world!\")                                       \u001b[39;49m\r\n\u001b[K\n\u001b[K\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\u001b[7;14Hg.draw(2,2)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.draw(1,20,\u001b[32m\"r\"\u001b[39;49m)\u001b[K\r\n\t\u001b[31m#self.buff.draw(1,19)                                                   \u001b[39;49m\r\n\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   60% L59   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\nIn this buffer, type RET to select the completion near point.\u001b[K\r\n\u001b[K\nPossible completions are:\r\ngfx\u001b[1m.\u001b[0mpy                    gfx\u001b[1m.\u001b[0mpyc                   gfx\u001b[1m_\u001b[0mascii.py\r\ngfx\u001b[1m_\u001b[0mascii.pyc             gfx\u001b[1m_\u001b[0msdl.py                gfx\u001b[1m_\u001b[0msdl.pyc\u001b[K\r\n\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[7m-UUU:%%--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*Completions*\u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   All L1     (Completion List) ----------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[24;54H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\t\u001b[?25l[No match]\u001b[12;1H\u001b[K\n    \u001b[31m# Runs an interactive session of our game with the player until either      \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n    \u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n    \u001b[31m# turn off graphics, print the traceback, and kill the program.             \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrun\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\tgfx.start(\u001b[32m\"ascii\"\u001b[39;49m)\r\n\n\n\t\u001b[1m\u001b[36mtry\u001b[0m\u001b[39;49m:\n\u001b[33mc\u001b[39;49m = -1\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   60% L59   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[24;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lcii.py\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[31m# The ASCII GFX module handles curses for us so that we don't have to do it     \u001b[39;49m\r\n\u001b[31m# ourselves. It's not object-oriented, so we should only ever have one game     \u001b[39;49m\r\n\u001b[31m# object trying to use it at a time. It uses a singleton screen object that     \u001b[39;49m\r\n\u001b[31m# represents the terminal window. If curses is unavailable, importing this      \u001b[39;49m\r\n\u001b[8P\u001b[C\u001b[31m module will fail, so you need to catch that when you im\u001b[39;49m\u001b[8@\u001b[31mport it.\u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m curses\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The \"screen\" used by Curses. When \"None\", curses is off, and all curses       \u001b[39;49m\r\n\u001b[31m# commands silently (safely) fail. This way, we can run games in                \u001b[39;49m\r\n\u001b[31m# non-interactive mode.                                                         \u001b[39;49m\r\n\u001b[33m_screen\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# This function turns on everything required by Curses. It puts the terminal in\u001b[39;49m\r\n\u001b[31m# raw mode, turns of echoing, scrolling, etc. It also initializes the colors.   \u001b[39;49m\r\n\u001b[31m# This can safely be called more than once.                                     \u001b[39;49m\r\n\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart\u001b[0m\u001b[39;49m():\u001b[21;5H\u001b[1m\u001b[36mglobal\u001b[0m\u001b[39;49m _screen\u001b[22;5H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m _screen:\n\b\b\b\b\b\b\u001b[7m\u001b[1mgfx_ascii.py\u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1    Git-\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l    \u001b[1m\u001b[36mglobal\u001b[0m\u001b[39;49m _screen\u001b[K\r\n    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m _screen:\u001b[K\r\n        \u001b[33m_screen\u001b[39;49m = curses.initscr()\u001b[K\r\n        curses.noecho()\u001b[K\r\n        curses.cbreak()\u001b[K\r\n\tcurses.curs_set(0)\r\n        curses.nonl()\r\n\t_screen.keypad(1)\r\n\t_screen.timeout(0)\r\n        _screen.scrollok(\u001b[35mFalse\u001b[39;49m)\u001b[K\r\n        curses.start_color()\u001b[K\r\n\u001b[K\n        \u001b[33mi\u001b[39;49m = 1\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(8):\u001b[16;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m b \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrange\u001b[0m\u001b[39;49m(8):\r\n                curses.init_pair(i, b, a)\u001b[K\r\n                \u001b[33mi\u001b[39;49m += 1\u001b[K\r\n\u001b[K\n\u001b[31m# This turns off curses and makes it safe to kill the program. You can call     \u001b[39;49m\r\n\u001b[31m# stop more than once safely. You should also be able to call start again after\u001b[39;49m\r\n\u001b[31m# calling stop.                                                                 \u001b[39;49m\r\n\u001b[23;29H\u001b[7m16% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m# stop more than once safely. You should also be able to call start again after\u001b[39;49m\r\n\u001b[31m# calling stop.                                                                 \u001b[39;49m\r\n\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstop\u001b[0m\u001b[39;49m():\u001b[K\u001b[5;5H\u001b[1m\u001b[36mglobal\u001b[0m\u001b[39;49m _screen\u001b[K\u001b[6;5H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m _screen:\u001b[K\r\n\t_screen.timeout(-1)\r\n\t_screen.keypad(0)\r\n\t\tscrollok(\u001b[35mTrue\u001b[39;49m)\r\n\tcurses.nocbreak()\u001b[K\r\n\tcurses.curs_set(1)\u001b[K\r\n\t\t\bnl()\u001b[K\r\n\tcurses.echo()\r\n\tcurses.endwin()\r\n\t\u001b[33m_screen\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[31m# Return the gfx mode. This mode is curses, as opposed to SDL.                  \u001b[39;49m\r\n\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmode\u001b[0m\u001b[39;49m():\u001b[K\u001b[19;5H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"curses\"\u001b[39;49m\r\n\u001b[K\u001b[21;3H\u001b[31mGets input from the user and translates it into python strings.               \u001b[39;49m\r\n\u001b[C\u001b[C\u001b[31mReturns None if the user hasn't pressed anything. Ideally this would be\u001b[39;49m\u001b[23;29H\u001b[7m26% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;3H\u001b[?25l\u001b[31mGets input from the user and translates it into python strings.               \u001b[39;49m\r\n\u001b[3;3H\u001b[31mReturns None if the user hasn't pressed anything. Ideally this would be\u001b[39;49m\r\n\u001b[31m# intercepted by a keymapper object that doesn't rely on any literal key        \u001b[39;49m\r\n\u001b[31m# definitions.                                                                  \u001b[39;49m\r\n\u001b[33m_keymap\u001b[39;49m ={curses.KEY_BACKSPACE: \u001b[32m\"backspace\"\u001b[39;49m,\r\n\t  curses.KEY_UP:        \u001b[32m\"up\"\u001b[39;49m,\r\n\t  curses.KEY_DOWN:      \u001b[32m\"down\"\u001b[39;49m,\r\n\t  curses.KEY_LEFT:      \u001b[32m\"left\"\u001b[39;49m,\r\n\t  curses.KEY_RIGHT:     \u001b[32m\"right\"\u001b[39;49m,\r\n\t  curses.KEY_ENTER:     \u001b[32m\"enter\"\u001b[39;49m,\r\n\t  curses.KEY_END:       \u001b[32m\"end\"\u001b[39;49m,\r\n\t  curses.KEY_HOME:      \u001b[32m\"home\"\u001b[39;49m,\r\n\t  curses.KEY_F1:        \u001b[32m\"f1\"\u001b[39;49m,\r\n\t  curses.KEY_F2:        \u001b[32m\"f2\"\u001b[39;49m,\u001b[16;11Hcurses.KEY_F3:        \u001b[32m\"f3\"\u001b[39;49m,\r\n          curses.KEY_F4:        \u001b[32m\"f4\"\u001b[39;49m,\u001b[K\r\n          curses.KEY_F5:        \u001b[32m\"f5\"\u001b[39;49m,\u001b[19;5H      curses.KEY_F6:        \u001b[32m\"f6\"\u001b[39;49m,\u001b[20;11Hcurses.KEY_F7:        \u001b[32m\"f7\"\u001b[39;49m,\r\n          curses.KEY_F8:        \u001b[32m\"f8\"\u001b[39;49m,\u001b[K\r\n          curses.KEY_F9:        \u001b[32m\"f9\"\u001b[39;49m,\u001b[K\u001b[23;29H\u001b[7m36% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l          curses.KEY_F8:        \u001b[32m\"f8\"\u001b[39;49m,\u001b[K\r\n          curses.KEY_F9:        \u001b[32m\"f9\"\u001b[39;49m,\u001b[K\r\n          curses.KEY_F10:       \u001b[32m\"f10\"\u001b[39;49m,\u001b[K\r\n          curses.KEY_F11:       \u001b[32m\"f11\"\u001b[39;49m,\u001b[K\r\n          curses.KEY_F12:       \u001b[32m\"f12\"\u001b[39;49m,\u001b[K\u001b[7;22HF13:       \u001b[32m\"f13\"\u001b[39;49m,\u001b[8;22HF14:       \u001b[32m\"f14\"\u001b[39;49m,\u001b[K\u001b[9;22HF15:       \u001b[32m\"f15\"\u001b[39;49m,\u001b[K\u001b[10;23HESIZE:    \u001b[32m\"resize\"\u001b[39;49m,\u001b[11;22HPPAGE:     \u001b[32m\"page_up\"\u001b[39;49m,\u001b[12;22HNPAGE:     \u001b[32m\"page_down\"\u001b[39;49m,\u001b[13;11H-1:                   \u001b[35mNone\u001b[39;49m}\u001b[K\r\n\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_input\u001b[0m\u001b[39;49m():\u001b[K\u001b[15;5H\u001b[1m\u001b[36mglobal\u001b[0m\u001b[39;49m _screen, _keymap\u001b[K\u001b[16;5H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m _screen:\u001b[K\r\n\t\u001b[33mc\u001b[39;49m = _screen.getch()\u001b[K\r\n\t\u001b[31m#curses.flushinp()                                                      \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == 27: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"escape\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m c == 10 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m c == 13: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"enter\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m c > 0 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m c < 256: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"%c\"\u001b[39;49m%c\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m _keymap: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m _keymap[c]\u001b[23;29H\u001b[7m52% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m c > 0 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m c < 256: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"%c\"\u001b[39;49m%c\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m _keymap: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m _keymap[c]\u001b[4;5H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[31m# In curses, refresh just controls the framerate.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrefresh\u001b[0m\u001b[39;49m():\u001b[K\u001b[8;5H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m _screen:\u001b[K\r\n\tcurses.napms(20)\u001b[K\r\n\u001b[K\n\u001b[31m# Clear the screen. This uses Curses' optimized erase routine, so it's not      \u001b[39;49m\r\n\u001b[31m# necessarily inefficient.                                                      \u001b[39;49m\r\n\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mclear\u001b[0m\u001b[39;49m():\u001b[K\r\n    \u001b[1m\u001b[36mglobal\u001b[0m\u001b[39;49m _screen\u001b[15;5H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m _screen:\u001b[K\u001b[16;5H    _screen.erase()\r\n\u001b[K\n\u001b[8P\u001b[C\u001b[31m This function returns the curses color pair for the provid\u001b[39;49m\u001b[8@\u001b[31med color\u001b[39;49m\r\n\u001b[31m# represented as a pair of characters. This is a private function.              \u001b[39;49m\r\n\u001b[31m#   x = black                                                                   \u001b[39;49m\r\n\u001b[31m#   r = red                                                                     \u001b[39;49m\r\n\u001b[31m#   g = green                                                                   \u001b[39;49m\r\n\u001b[23;29H\u001b[7m66% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l  curses.KEY_RESIZE:    \u001b[32m\"resize\"\u001b[39;49m,\u001b[K\r\n\t  curses.KEY_PPAGE:     \u001b[32m\"page_up\"\u001b[39;49m,\u001b[K\u001b[4;5H      curses.KEY_NPAGE:     \u001b[32m\"page_down\"\u001b[39;49m,\u001b[5;11H-1:                   \u001b[35mNone\u001b[39;49m}\r\n\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_input\u001b[0m\u001b[39;49m():\u001b[K\r\n    \u001b[1m\u001b[36mglobal\u001b[0m\u001b[39;49m _screen, _keymap\r\n\n\t\u001b[33mc\u001b[39;49m = _screen.getch()\r\n\t\u001b[31m#curses.flushinp()                                                      \u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == 27: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"escape\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m c == 10 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m c == 13: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"enter\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m c > 0 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m c < 256: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"%c\"\u001b[39;49m%c\u001b[14;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m _keymap: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m _keymap[c]\u001b[15;5H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\n\u001b[31m# In curses, refresh just controls the framerate.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrefresh\u001b[0m\u001b[39;49m():\u001b[K\r\n    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m _screen:\u001b[K\r\n        curses.napms(20)\u001b[K\r\n\u001b[K\u001b[22;3H\u001b[31mClear the screen. This uses Curses' optimized erase routine, so it's not\u001b[39;49m\u001b[23;29H\u001b[7m58% L95\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[?25lcurses.flushinp()\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;23r\u001b[22;1H\u001b[1M\u001b[1;24r\u001b[24;1H\u001b[?25l...\r\u001b[ASaving file /home/isharacomix/Documents/open-tactics/code/graphics/gfx_ascii.py\\\r\n\u001b[A\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[A\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/graphics/gfx_ascii.py\u001b[K\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;24r\u001b[23;1H\u001b[1L\u001b[1;24r\u001b[22;1H\u001b[?25l\u001b[31m# Clear the screen. This uses Curses' optimized erase routine, so it's not      \u001b[39;49m\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgfx_ascii.py\u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   58% L93   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +----------------------------------------------------------------------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\r\u001b[18d |\u001b[79G|\r\u001b[19d |\u001b[79G|\r\u001b[20d |\u001b[79G|\r\u001b[21d |\u001b[79G|\r\u001b[22d |\u001b[79G|\r\u001b[23d +----------------------------------------------------------------------------+\u001b[17;33H\u001b[7;12H+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[8d\b\b\u001b[3;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;6H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;7H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;8H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;9H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;10H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;11H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;12H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;13H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;14H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;15H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;16H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;17H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;18H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;19H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;20H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;21H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;22H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;23H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;24H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;25H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[7;12H\u001b(B\u001b[0m\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[17d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;26H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;27H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;28H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;29H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;29H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;33H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;30H+----------+\u001b[5;30H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b[41G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[6;30H|End Turn  |\u001b[7;30H|Undo\u001b[41G|\u001b[8;30H|Start Over|\u001b[9;30H+----------+\u001b[A\b\u001b[4;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[5;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[6;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[7;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[8;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[9;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[17;33H\u001b[4;30H+----------+\u001b[5;30H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b[41G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[6;30H|End Turn  |\u001b[7;30H|Undo\u001b[41G|\u001b[8;30H|Start Over|\u001b[9;30H+----------+\u001b[A\b\u001b[4;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[5;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[6;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[7;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[8;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[9;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[17;33H\u001b[4;30H+----------+\u001b[5;30H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b[41G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[6;30H|End Turn  |\u001b[7;30H|Undo\u001b[41G|\u001b[8;30H|Start Over|\u001b[9;30H+----------+\u001b[A\b\u001b[4;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[5;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[6;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[7;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[8;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[9;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[17;33H\u001b[4;30H+----------+\u001b[5;30H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b[41G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[6;30H|End Turn  |\u001b[7;30H|Undo\u001b[41G|\u001b[8;30H|Start Over|\u001b[9;30H+----------+\u001b[A\b\u001b[4;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[5;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[6;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[7;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[8;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[9;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[17;33H\u001b[4;30H+----------+\u001b[5;30H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b[41G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[6;30H|End Turn  |\u001b[7;30H|Undo\u001b[41G|\u001b[8;30H|Start Over|\u001b[9;30H+----------+\u001b[A\b\u001b[4;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[5;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[6;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[7;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[8;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[9;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[17;33H\u001b[4;30H+----------+\u001b[5;30H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b[41G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[6;30H|End Turn  |\u001b[7;30H|Undo\u001b[41G|\u001b[8;30H|Start Over|\u001b[9;30H+----------+\u001b[A\b\u001b[4;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[5;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[6;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[7;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[8;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[9;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[17;33H\u001b[4;30H+----------+\u001b[5;30H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b[41G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[6;30H|End Turn  |\u001b[7;30H|Undo\u001b[41G|\u001b[8;30H|Start Over|\u001b[9;30H+----------+\u001b[A\b\u001b[4;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[5;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[6;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[7;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[8;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[9;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[17;33H\u001b[4;30H+----------+\u001b[5;30H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b[41G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[6;30H|End Turn  |\u001b[7;30H|Undo\u001b[41G|\u001b[8;30H|Start Over|\u001b[9;30H+----------+\u001b[A\b\u001b[4;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[5;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[6;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[7;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[8;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[9;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[17;33H\u001b[4;30H+----------+\u001b[5;30H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b[41G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[6;30H|End Turn  |\u001b[7;30H|Undo\u001b[41G|\u001b[8;30H|Start Over|\u001b[9;30H+----------+\u001b[A\b\u001b[4;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[5;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[6;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[7;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  \u001b[41G \u001b[8;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[9;30H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[17;33H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\u001b[24d\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n          curses.KEY_RESIZE:    \u001b[32m\"resize\"\u001b[39;49m,\u001b[K\r\n          curses.KEY_PPAGE:     \u001b[32m\"page_up\"\u001b[39;49m,\u001b[K\r\n          curses.KEY_NPAGE:     \u001b[32m\"page_down\"\u001b[39;49m,\u001b[K\r\n          -1:                   \u001b[35mNone\u001b[39;49m}\u001b[K\r\n\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mget_input\u001b[0m\u001b[39;49m():\u001b[K\r\n    \u001b[1m\u001b[36mglobal\u001b[0m\u001b[39;49m _screen, _keymap\u001b[K\r\n    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m _screen:\u001b[K\r\n        \u001b[33mc\u001b[39;49m = _screen.getch()\u001b[K\r\n        curses.flushinp()\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == 27: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"escape\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m c == 10 \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m c == 13: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"enter\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m c > 0 \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m c < 256: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[32m\"%c\"\u001b[39;49m%c\u001b[K\r\n        \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m _keymap: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m _keymap[c]\u001b[K\r\n    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\u001b[31m# In curses, refresh just controls the framerate.                               \u001b[39;49m\r\n\u001b[A\n\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mrefresh\u001b[0m\u001b[39;49m():\u001b[K\r\n    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m _screen:\u001b[K\r\n        curses.napms(20)\u001b[K\r\n\u001b[K\n\u001b[31m# Clear the screen. This uses Curses' optimized erase routine, so it's not      \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgfx_ascii.py\u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   58% L93   Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mKill buffer (default gfx_ascii.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\n\t\u001b[31m# The most basic item is the rules.                                     \u001b[39;49m\r\n\t\u001b[33mr\u001b[39;49m = game.Game(rdict)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g = grid.Controller(76,20,r)\r\n\u001b[K\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[8;5H    \u001b[31m#self.buff = widgets.Buffer(10,5)                                       \u001b[39;49m\r\n\t\u001b[31m#self.buff.write(\"Hello, world!\")                                       \u001b[39;49m\r\n\u001b[K\n\u001b[K\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdisplay\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[31m#gfx.clear()                                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.g.draw(2,2)\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[16;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu.draw(1,20,\u001b[32m\"r\"\u001b[39;49m)\u001b[17;42H\u001b[8P\r\u001b[8@\t\u001b[C\u001b[31mself.buff.draw(1,19)                    \u001b[39;49m\r\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# Runs an interactive session of our game with the player until either      \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# the player stops playing or an error occurs. Here, we pass input to the   \u001b[39;49m\r\n    \u001b[31m# world until we are told we don't need to anymore. If an error occurs, we  \u001b[39;49m\r\n\u001b[23;14H\u001b[7m\u001b[1mshell.py    \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   53% L59\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgame.py\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lrid\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, rules):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = rules\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\r\n\u001b[K\u001b[13;10H\u001b[31m The elements of the grid.\u001b[39;49m\u001b[14;14Hcam = widgets.Camera(w,h,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[19;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[21;5H    \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\u001b[K\u001b[22;5H    \u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\n\b\b\b\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   79% L228\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\n        \u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\u001b[6;42H\u001b[8P\r\u001b[8@\u001b[6;12H\u001b[31moes.                                  \u001b[39;49m\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[8;5H        \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\r\n\t        \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\r\n\t    \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[19;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\u001b[20;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[23;29H\u001b[7m84% L235\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[4;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\t\u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pop_alerts()\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[21;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[22;13Hm.draw(mx+x-cx+2, my+y-cy)\u001b[K\u001b[23;29H\u001b[7m90% L254\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[3;13Hm.draw(mx+x-cx+2, my+y-cy)\u001b[K\r\n\u001b[K\n\t\u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\t\u001b[31m# expire.                                                               \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts:\u001b[K\u001b[8;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = a\r\n\t    \u001b[33mm.time\u001b[39;49m -= 1\u001b[K\r\n\t    m.draw(mx+x-cx, my+y-cy)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = [a \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a[0].time > 0]\r\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L273\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\u001b[3;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[4;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\t\u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pop_alerts()\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[13;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[21;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[22;13Hm.draw(mx+x-cx+2, my+y-cy)\u001b[23;29H\u001b[7m90%\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\t\u001b[31m# does.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[8;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\r\n\t        \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[13;5H        \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\u001b[14;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\u001b[15;5H            \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[21;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\u001b[22;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[23;29H\u001b[7m84% L255\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\u001b[K\n\u001b[?25l\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[8P\u001b[6;4H\u001b[31mirect copy of the grid, except for its\u001b[39;49m\u001b[8@\u001b[31m camera.\u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, rules):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = rules\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\u001b[K\n\t\u001b[31m# The elements of the grid.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w,h,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m79% L236\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1@-\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@5\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@7\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;58H\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m8% L229\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[34mbuffer\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\u001b[?25lbuffe\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lB\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l1)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l5)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l7)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default shell.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lshell.py\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgame.py\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lGNU Emacs*\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lMessages*\u001b[K\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lCompletions*\u001b[24;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\u001b[?25lEnd of defaults; no next item\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u0007\r\u001b[?25lQuit\u001b[K\u001b[1;33H\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[15;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[15;41H\u001b[24;1H\u001b[?25l\u001b[34mFind file: \u001b[39;49m~/Documents/open-tactics/code/core/\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ldgets.py\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[31m# This module contains \"gui\" widgets that are useful for games.                 \u001b[39;49m\r\n\u001b[31m#                                                                               \u001b[39;49m\r\n\u001b[4;3H\u001b[31m                                                              \u001b[39;49m\r\n\u001b[K\n\u001b[1m\u001b[36mfrom\u001b[0m\u001b[39;49m graphics \u001b[1m\u001b[36mimport\u001b[0m\u001b[39;49m draw\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A menu is a simple menu of selections. Created using a list of options,       \u001b[39;49m\r\n\u001b[31m# it intercepts input, returning None if nothing has been selected yet,         \u001b[39;49m\r\n\u001b[31m# or the text of the selected option. Handling something like \"cancelling\"      \u001b[39;49m\r\n\u001b[31m# should be done by the creator.                                                \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mMenu\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, items):\u001b[K\u001b[15;14Hitems = \u001b[1m\u001b[34mlist\u001b[0m\u001b[39;49m(items)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index = 0\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items) == 0:\u001b[19;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Created a menu with no items.\"\u001b[39;49m)\r\n\u001b[K\u001b[21;5H\u001b[31m# Pass the input from gfx.get_input to this function.                       \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\u001b[23;6H\u001b[7m----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Top L1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;60H\u001b[4P\r\u001b[4@\t\b\b\u001b[?25l\u001b[31mPass the input from gfx.get_input to this function.      \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index -= 1\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index += 1\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index %= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items)\r\n\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"enter\"\u001b[39;49m:\u001b[K\r\n            \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index]\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# Draw the window on the terminal with the top left corner                  \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# at x,y. Will draw off the side of the screen.                             \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[33mw\u001b[39;49m,h = 0,\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items)\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items:\u001b[K\u001b[19;13H\u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(w,\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(s))\u001b[K\u001b[21;5H    draw.border(x,y,w,h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\u001b[22;5H    draw.fill(x,y,w,h)\u001b[K\u001b[23;29H\u001b[7m 8% L20\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    draw.border(x,y,w,h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\u001b[3;5H    draw.fill(x,y,w,h)\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m i,s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[34menumerate\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.items):\r\n\t    draw.string(x,y+i,s,col+(\u001b[32m\"?\"\u001b[39;49m \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m i==\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.index \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m \u001b[32m\"\"\u001b[39;49m))\r\n\n\u001b[K\n\u001b[31m# An alert is just a window that contains text. Unlike a buffer, it doesn't     \u001b[39;49m\r\n\u001b[31m# scroll. Writing to it will overwrite the current message.                     \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mAlert\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, msg=\u001b[32m\"\"\u001b[39;49m, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\u001b[K\u001b[15;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col = col\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(msg)\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, msg):\u001b[K\r\n\t\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m msg.split(\u001b[32m\"\\n\"\u001b[39;49m):\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\u001b[23;29H\u001b[7m15% L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m msg.split(\u001b[32m\"\\n\"\u001b[39;49m):\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t        \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[5;13H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\u001b[K\u001b[6;21H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n\t\t\t\u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\r\n                        report.append(old)\u001b[K\r\n                    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n                        report.append(current)\u001b[11;5H                    \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\r\n\t        report.append(current)\r\n\t        \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\treport.reverse()\u001b[16;14Htext = report\r\n\n\t\u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\u001b[39;49m\r\n\tdraw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[23;29H\u001b[7m22% L58\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\u001b[39;49m\r\n\tdraw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\r\n\tdraw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\r\n\t\u001b[33mw\u001b[39;49m = 0\u001b[K\r\n\t\u001b[33mi\u001b[39;49m = y+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\u001b[K\r\n\t\u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text):\u001b[K\u001b[8;13H\u001b[33mi\u001b[39;49m -= 1\u001b[K\u001b[9;13Hdraw.string(x,i,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text[w],\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.col+col)\u001b[10;13H\u001b[33mw\u001b[39;49m += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The HPAlert is a special kind of alert that is used when a unit's HP          \u001b[39;49m\r\n\u001b[31m# is going down. The Alert starts at a certain HP and decreases until           \u001b[39;49m\r\n\u001b[31m# it reaches end. In order to facilitate animation, you can also put in         \u001b[39;49m\r\n\u001b[31m# a delay so that another unit's animation can finish before this one           \u001b[39;49m\r\n\u001b[31m# starts.                                                                       \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mHPAlert\u001b[39;49m(Alert):\u001b[K\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, col=\u001b[32m\"w\"\u001b[39;49m, start=100, end=0, delay=0):\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(HPAlert, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).__init__(w,h, \u001b[32m\"%d%%\"\u001b[39;49m%start,  col)\u001b[21;5H    \u001b[31m#self.alert = widgets.Alert( 6,1,\"%d%%\"%start, col)                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = start\u001b[K\u001b[23;29H\u001b[7m30% L77\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[31m#self.alert = widgets.Alert( 6,1,\"%d%%\"%start, col)                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = start\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end = end\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay = delay\r\n\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay > 0:\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay -= 1\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start > \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end:\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start -= 1\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(\u001b[32m\"%d%%\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start)\r\n        \u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(HPAlert, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).draw(x,y,col)\u001b[K\r\n\u001b[K\n\u001b[K\u001b[16;3H\u001b[31mA buffer is just a window that contains text. You can add more text to it\u001b[39;49m\u001b[17;3H\u001b[31mand it will automatically scroll to the newest. Each line in the buffer is\u001b[39;49m\r\n\u001b[31m# a (text,color) tuple.                                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mBuffer\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\n\b\b\b\b\bh = h\u001b[K\u001b[23;30H\u001b[7m9% L96\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\n\b\b\b\b\bh = h\u001b[K\n\b\b\b\b\bwhere = 0\u001b[5;14Htext = []\u001b[K\u001b[7;5H\u001b[31m# This adds a string 's' to the buffer and rescrolls to the                 \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# end. Word-wraps the text if necessary.                                    \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s, col=\u001b[32m\"w\"\u001b[39;49m):\r\n\t\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[14;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n                    \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[K\r\n                    report.append((old,col))\u001b[K\r\n                \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n                    report.append((current,col))\u001b[20;5H                \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\r\n\t    report.append((current,col))\u001b[23;29H\u001b[7m47% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m#self.alert = widgets.Alert( 6,1,\"%d%%\"%start, col)                     \u001b[39;49m\r\n\u001b[3;14Hstart = start\u001b[4;14Hend = end\u001b[5;14Hdelay = delay\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay > 0:\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay -= 1\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start > \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start -= 1\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(\u001b[32m\"%d%%\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start)\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(HPAlert, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).draw(x,y,col)\r\n\u001b[K\n\u001b[K\n\u001b[31m# A buffer is just a window that contains text. You can add more text to it     \u001b[39;49m\r\n\u001b[31m# and it will automatically scroll to the newest. Each line in the buffer is    \u001b[39;49m\r\n\u001b[31m# a (text,color) tuple.                                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mBuffer\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\u001b[23;29H\u001b[7m39\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[K\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, rules):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = rules\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\u001b[K\n\t\u001b[31m# The elements of the grid.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w-17,h,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1 = widgets.Buffer(15,7)\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   78% L229\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lB\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l5\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l6\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l7\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25l7\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[16;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[16;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[K\u001b[18d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   78% L231\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[17;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[17;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[17;18H\u001b[?25l3\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lB\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l5\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l4\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[17;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[17;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[17;41H\u001b[?25l)\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[17;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[17;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[3;5H\u001b[?25l\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\u001b[K\r\n        \u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[8;5H    \u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\t\u001b[31m# does.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\r\n\t    \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[12;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\r\n\t        \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[22;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\u001b[23;29H\u001b[7m83% L235\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\u001b[4;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[7;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\t\u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pop_alerts()\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m9% L254\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[5;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[6;13Hm.draw(mx+x-cx+2, my+y-cy)\u001b[K\r\n\u001b[K\n\t\u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\t\u001b[31m# expire.                                                               \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts:\u001b[K\u001b[11;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = a\r\n\t    \u001b[33mm.time\u001b[39;49m -= 1\u001b[K\r\n\t    m.draw(mx+x-cx, my+y-cy)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = [a \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a[0].time > 0]\r\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L273\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\n\t\u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pop_alerts()\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[8;5H\u001b[4P\t\b\u001b[31mraw the grid to the terminal using the gfx library. Specify\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[9;5H\u001b[4P\t\b\b\u001b[31mx,y and w,h of the viewport in the terminal, and the cx,cy of\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[10;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[16;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[17;13Hm.draw(mx+x-cx+2, my+y-cy)\r\n\n\t\u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\t\u001b[31m# expire.                                                               \u001b[39;49m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts:\u001b[22;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = a\u001b[23;29H\u001b[7m92% L272\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;27H\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   92% L273\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\r\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[13;9H\u001b[?25l\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[22;1H            \u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = a\u001b[K\u001b[23;36H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\u001b[23;36H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\r\n\tcx,cy\u001b[A\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m\u001b[A\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lx)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l+)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l()\r\n\tcx,cy\u001b[13;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;13H\u001b[?25lm,mx,my\u001b[13;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l-)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l5)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l)\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m\u001b[13;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;38H\u001b[?25l,)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;13H\u001b[?25l\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m\u001b[13;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[24d\u001b[?25lMark set\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[K\u001b[14d\u001b[K\n\u001b[?25l        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\u001b[23;36H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[K\u001b[15d\u001b[K\n\u001b[?25l        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\u001b[23;36H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\u001b[23;30H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[15;40H\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@3\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@2\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\u001b[?25l+)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l8)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l+)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l5)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[15;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[15;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +-----------------------------------------------------------++---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|+---------------+\r\u001b[18d |\u001b[18;62H||\u001b[79G|\r\u001b[19d |\u001b[19;62H||\u001b[79G|\r\u001b[20d |\u001b[20;62H||\u001b[79G|\r\u001b[21d |\u001b[21;62H||\u001b[79G|\r\u001b[22d |\u001b[22;62H|+---------------+\r\u001b[23d +-----------------------------------------------------------+\u001b[21;79H\u001b[7;12H+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[8d\b\b\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[21;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\n\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n        \u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pop_alerts()\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+8)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+15)\u001b[K\r\n        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n            \u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[K\r\n            m.draw(mx+x-cx+2, my+y-cy)\u001b[K\r\n\u001b[K\n        \u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   91% L275  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[15;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l6)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[15;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[15;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +-----------------------------------------------------------++---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;62H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m||\u001b[79G|\r\u001b[18d |\u001b[18;62H|+---------------+\r\u001b[19d |\u001b[19;62H||\u001b[79G|\r\u001b[20d |\u001b[20;62H||\u001b[79G|\r\u001b[21d |\u001b[21;62H||\u001b[79G|\r\u001b[22d |\u001b[22;62H||\u001b[79G|\r\u001b[23d +-----------------------------------------------------------++---------------+\u001b[A\b\u001b[7;12H+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[8d\b\b\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n        \u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pop_alerts()\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+8)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+16)\u001b[K\r\n        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n            \u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[K\r\n            m.draw(mx+x-cx+2, my+y-cy)\u001b[K\r\n\u001b[K\n        \u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   91% L275  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[15;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[3;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\r\n\t        \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[8;5H        \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[K\u001b[9;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\u001b[10;5H            \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\u001b[19;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[20;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\u001b[23;29H\u001b[7m85% L263\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\u001b[K\n\t\u001b[31m# The elements of the grid.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w-17,h,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1 = widgets.Buffer(15,7)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2 = widgets.Buffer(15,7)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3 = widgets.Buffer(15,4)\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\r\n\t\u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\t\u001b[31m# does.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[22;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[23;29H\u001b[7m79% L244\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\u001b[6;14Hallies = []\u001b[K\u001b[7;14Hactive = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[8;14Hvariables = {}\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# Returns true if the two teams are allied.                                 \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, rules):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = rules\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\u001b[23;30H\u001b[7m3% L225\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\u001b[4;14Hicon = icon\u001b[5;14Hteam = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[6;14Hcarrying = []\u001b[7;14Hvariables = {}\r\n\u001b[K\u001b[9;5H\u001b[31m# Draw this unit on the screen.                                             \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\u001b[11;5H    draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m+col)\r\n\u001b[K\u001b[13;5H\u001b[31m# Returns true if the two units (or cells) are allied.                      \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, other):\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m other.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m other.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# The game is played by teams. Each team commands an army of units and          \u001b[39;49m\r\n\u001b[31m# may also have other variables such as money, etc, governed by the             \u001b[39;49m\r\n\u001b[31m# subclass of the current set of rules.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[23;29H\u001b[7m67% L206\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\u001b[3;14Hicon = icon\u001b[4;14Hcolor = color\u001b[5;14Hunit\n\b\b\b\bteam = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[9;7H\u001b[31mThis function returns the character and color that\u001b[39;49m\u001b[10;5H\u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# the unit's draw will be prioritized.                                      \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[13;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[K\u001b[14;5H        \u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color +\u001b[32m\"!\"\u001b[39;49m\r\n\tdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color+col)\u001b[K\u001b[18;3H\u001b[31mUnits are the pieces that move about the game board. Units belong to a\u001b[39;49m\u001b[19;3H\u001b[31mteam and can be moved about by taking actions.                   \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\u001b[23;30H\u001b[7m1% L187\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mtile.unit\u001b[39;49m = \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[4;5H\u001b[31m# Return the team currently performing its turn.                            \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcurrent_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\r\n\u001b[K\u001b[8;5H\u001b[31m# End the turn and proceed to the next team.                                \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[10;5H    \u001b[33mcurrent_team\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams[\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn]\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn += 1\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn >= \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.teams):\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.turn = 0\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.day += 1\u001b[K\r\n\u001b[K\n\n\u001b[31m# A grid is made up of Cells. The cells all have properties that make up        \u001b[39;49m\r\n\u001b[C\u001b[C\u001b[31mwhat would be called their 'terrain'.                                 \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCell\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon, color):\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\u001b[K\u001b[22;14Hicon = icon\u001b[23;29H\u001b[7m55% L168\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon = icon\u001b[4;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.unit = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[9;5H\u001b[31m# This function returns the character and color that                        \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# should be drawn. If there is a unit on this terrain,                      \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# the unit's draw will be prioritized.                                      \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team:\u001b[K\u001b[14;13H\u001b[33mcol\u001b[39;49m += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color +\u001b[32m\"!\"\u001b[39;49m\r\n\tdraw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color+col)\r\n\n\u001b[K\u001b[18;3H\u001b[31mUnits are the pieces that move about the game board. Units belong to a\u001b[39;49m\r\n\u001b[31m# team and can be moved about by taking actions.                                \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mUnit\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\u001b[22;14Hname = name\u001b[23;29H\u001b[7m61\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, icon):\u001b[3;14Hname = name\u001b[4;14Hicon = icon\u001b[K\u001b[5;14Hteam\n\b\b\b\bcarrying = []\u001b[9;7H\u001b[31mDraw this unit on the screen.                     \u001b[39;49m\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\u001b[11;5H    draw.char(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.icon, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.color+\u001b[32m\"!\"\u001b[39;49m+col)\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Returns true if the two units (or cells) are allied.                      \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, other):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m other.team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m other.team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.team.allies\u001b[18;3H\u001b[31mThe game is played by teams. Each team commands an army of units and  \u001b[39;49m\u001b[19;3H\u001b[31mmay also have other variables such as money, etc, governed by the\u001b[39;49m\r\n\u001b[31m# subclass of the current set of rules.                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[23;30H\u001b[7m7% L186\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\u001b[4;14Hname = name\u001b[5;14Hcolor = color\u001b[6;14Hallies = []\u001b[K\u001b[7;14Hactive = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.variables = {}\r\n\u001b[K\u001b[10;5H\u001b[31m# Returns true if the two teams are allied.                                 \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\u001b[K\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, rules):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = rules\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\u001b[23;29H\u001b[7m73% L205\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\u001b[K\n\t\u001b[31m# The elements of the grid.                                             \u001b[39;49m\r\n\u001b[6;14Hcam = widgets.Camera(w-17,h,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid)\u001b[7;14Hbuff1 = widgets.Buffer(15,7)\u001b[8;14Hbuff2 = widgets.Buffer(15,7)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3 = widgets.Buffer(15,4)\r\n\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[14;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\u001b[K\r\n        \u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[19;5H    \u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\t\u001b[31m# does.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\r\n\t    \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[23;30H\u001b[7m9% L224\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@6\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[6;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[6;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[7;12H+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[8d\b\b\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;6H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;7H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;8H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;9H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;10H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;10H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;9H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;3H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;3H\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;3H\u001b[30X\u001b[3;33H\u001b[32m\u001b[40m..............................\u001b[4;3H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[4;33H\u001b[32m\u001b[40m..............................\u001b[5;3H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[5;33H\u001b[32m\u001b[40m..............................\u001b[6;3H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[6;33H\u001b[32m\u001b[40m..............................\u001b[7;3H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[7;33H\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[8;3H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[8;33H\u001b[32m\u001b[40m..............................\u001b[9;3H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[9;33H\u001b[32m\u001b[40m..............................\u001b[10;3H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[10;33H\u001b[32m\u001b[40m..............................\u001b[11;3H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[11;33H\u001b[32m\u001b[40m..............................\u001b[12;3H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[12;33H\u001b[32m\u001b[40m..............................\u001b[13;3H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[13;33H\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[14;3H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[14;33H\u001b[32m\u001b[40m..............................\u001b[15;3H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[15;33H\u001b[32m\u001b[40m..............................\u001b[16;3H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[16;33H\u001b[32m\u001b[40m..............................\u001b[17;3H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[17;33H\u001b[32m\u001b[40m..............................\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;33H\u001b[30X\u001b[4d\u001b[30X\u001b[5d\u001b[30X\u001b[6d\u001b[30X\u001b[7d\u001b[30X\u001b[8d\u001b[30X\u001b[9d\u001b[30X\u001b[10d\u001b[30X\u001b[11d\u001b[30X\u001b[12d\u001b[30X\u001b[13;35H\u001b[32m\u001b[40m.\u001b[17d\b\b\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b[18d\b\b\u001b(B\u001b[0m\u001b[32m\u001b[40m..............................\u001b[19;33H..............................\u001b[20;33H..............................\u001b[21;33H..............................\u001b[22;33H..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;33H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;33H\u001b[32m\u001b[40m.\u001b[14d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;33H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;34H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;35H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;36H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;37H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;38H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;39H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;40H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;41H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;42H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;43H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;44H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;45H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;46H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;47H\u001b[32m\u001b[40m.\u001b[15d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;47H\u001b[32m\u001b[40m.\u001b[16d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[16;47H\u001b[32m\u001b[40m.\u001b[17d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[17;47H\u001b[32m\u001b[40m.\u001b[18d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[18;47H\u001b[32m\u001b[40m.\u001b[19d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[19;47H\u001b[32m\u001b[40m.\u001b[20d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[20;47H\u001b[32m\u001b[40m.\u001b[21d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[21;47H\u001b[32m\u001b[40m.\u001b[22d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[22;47H\u001b[32m\u001b[40m.\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;33H\u001b[32m\u001b[40m..............................\u001b[4;33H..............................\u001b[5;33H..............................\u001b[6;33H..............................\u001b[7;33H.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[8;33H..............................\u001b[9;33H..............................\u001b[10;33H..............................\u001b[11;33H..............................\u001b[12;33H..............................\u001b[13;35H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b[14;47H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17;34H\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[18d\b\b\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[19d\u001b[30X\u001b[20d\u001b[30X\u001b[21d\u001b[30X\u001b[22d\u001b[30X\u001b[79G\u001b[14;47H\u001b[32m\u001b[40m.\u001b[15d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;47H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;48H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;49H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;50H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;51H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;52H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;53H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;54H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;55H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;56H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;57H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;58H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;59H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;60H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;61H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;62H\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;3H\u001b[32m\u001b[40m..............................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[4;3H\u001b[32m\u001b[40m..............................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[5;3H\u001b[32m\u001b[40m..............................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[6;3H\u001b[32m\u001b[40m..............................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[7;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[8;3H\u001b[32m\u001b[40m..............................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[9;3H\u001b[32m\u001b[40m..............................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[10;3H\u001b[32m\u001b[40m..............................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[11;3H\u001b[32m\u001b[40m..............................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[12;3H\u001b[32m\u001b[40m..............................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[13;3H\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[14;3H\u001b[32m\u001b[40m..............................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[15;3H\u001b[32m\u001b[40m..............................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[16;3H\u001b[32m\u001b[40m..............................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[17;3H\u001b[32m\u001b[40m..............................\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[22;79H\u001b[15;32H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;31H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;30H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;29H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;28H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;27H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;26H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;27H+----------+\u001b[15;27H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[16;27H|End Turn  |\u001b[17;27H|Undo      |\u001b[18;27H|Start Over|\u001b[19;27H+----------+\u001b[A\b\u001b[14;27H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      \u001b[15;27H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      \u001b[16;27H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      \u001b[17;27H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      \u001b[18;27H            \u001b[19;27H            \u001b[22;79H\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\u001b[K\n        \u001b[31m# The elements of the grid.                                             \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam = widgets.Camera(w-16,h,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1 = widgets.Buffer(15,7)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2 = widgets.Buffer(15,7)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3 = widgets.Buffer(15,4)\u001b[K\r\n\u001b[K\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\u001b[K\r\n        \u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n        \u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\u001b[A\n        \u001b[31m# does.                                                                 \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\r\n            \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   79% L228  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[6;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[?25l\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mTeam\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, name, color):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.name = name\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.color = color\u001b[K\u001b[6;14Hallies = []\u001b[K\u001b[7;14Hactive = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[8;14Hvariables = {}\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# Returns true if the two teams are allied.                                 \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mallied\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, team):\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m team == \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.allies\r\n\n\u001b[K\n\u001b[31m# The controller of the grid. It takes a rules object and passes                \u001b[39;49m\r\n\u001b[31m# control back and forth between it. It doesn't usually need a                  \u001b[39;49m\r\n\u001b[31m# direct copy of the grid, except for its camera.                               \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mController\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, rules):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world = rules\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\u001b[23;30H\u001b[7m3% L225\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\u001b[K\n\t\u001b[31m# The elements of the grid.                                             \u001b[39;49m\r\n\u001b[6;14Hcam = widgets.Camera(w-16,h,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid)\u001b[7;14Hbuff1 = widgets.Buffer(15,7)\u001b[8;14Hbuff2 = widgets.Buffer(15,7)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3 = widgets.Buffer(15,4)\r\n\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[14;5H\u001b[31m# This function handles input passed from gfx.get_input.                    \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\u001b[K\r\n        \u001b[33mr\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[19;5H    \u001b[31m# If we have a menu, it capture the input. Otherwise, the camera        \u001b[39;49m\r\n\t\u001b[31m# does.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\r\n\t    \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[23;30H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\r\n\t    \u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\u001b[4;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\r\n\t        \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t    \u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[18;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\u001b[23;29H\u001b[7m85% L243\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\t\u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pop_alerts()\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+8)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+16)\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[19;13H\u001b[33mm\u001b[39;49m,\u001b[33mmx\u001b[39;49m,\u001b[33mmy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu\u001b[K\u001b[20;13Hm.draw(mx+x-cx+2, my+y-cy)\r\n\u001b[K\n\t\u001b[31m# Display all alerts on the screen until their timers                   \u001b[39;49m\r\n\u001b[23;29H\u001b[7m91% L262\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\u001b[4;11H\u001b[31mIf the rules were processed, figure out if we need to display\u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[8;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\u001b[9;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\u001b[10;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\u001b[K\u001b[11;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\t\u001b[31m# This returns nothing.                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pop_alerts()\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[19;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\u001b[23;29H\u001b[7m87% L261\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\b\b\u001b[?25l\u001b[31m \u001b[39;49m\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mG\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m'\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pop_alerts()\u001b[K\u001b[23;36H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;17H\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l3\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\u001b[?25l\u001b[33malerts\u001b[39;49m, \u001b[33minfo1\u001b[39;49m, \u001b[33minfo2\u001b[39;49m, \u001b[33minfo3\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\b\b\u001b[?25lsel\u001b[K\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[23;30H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[17;30H\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[17d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[17;30H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default widgets.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[31m#self.alert = widgets.Alert( 6,1,\"%d%%\"%start, col)                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = start\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end = end\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay = delay\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay > 0:\u001b[K\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay -= 1\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start > \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end:\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start -= 1\u001b[K\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(\u001b[32m\"%d%%\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start)\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(HPAlert, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).draw(x,y,col)\u001b[K\r\n\n\u001b[K\n\u001b[31m# A buffer is just a window that contains text. You can add more text to it     \u001b[39;49m\r\n\u001b[31m# and it will automatically scroll to the newest. Each line in the buffer is    \u001b[39;49m\r\n\u001b[31m# a (text,color) tuple.                                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mBuffer\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h):\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\n\b\b\b\b\b\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   39% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t        \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[7;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[9;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\u001b[K\u001b[11;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[12;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\n\t\u001b[31m# Get intel from the world's information method.                        \u001b[39;49m\r\n        \u001b[33malerts\u001b[39;49m, \u001b[33minfo1\u001b[39;49m, \u001b[33minfo2\u001b[39;49m, \u001b[33minfo3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info()\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[23;14H\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   86% L266\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default widgets.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lwidgets.py\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lshell.py\u001b[K\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgame.py\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process(step)\u001b[K\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\u001b[8;5H\u001b[31m# Return a JSON string that can be saved to a file. The current             \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# turn in progress will be lost.                                            \u001b[39;49m\r\n\u001b[10;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34msave\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m json.dumps(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data)\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# This function produces a Unit object based on the unit code.              \u001b[39;49m\r\n\u001b[14;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_unit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mu\u001b[39;49m = Unit(data[\u001b[32m\"name\"\u001b[39;49m], data[\u001b[32m\"icon\"\u001b[39;49m])\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m u\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This function produces a Cell object based on the terrain code.           \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_cell\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\u001b[20;5H    \u001b[33mc\u001b[39;49m = Cell(data[\u001b[32m\"name\"\u001b[39;49m],\u001b[32m'.'\u001b[39;49m,\u001b[32m'g'\u001b[39;49m)\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\n\t\t\b\b\u001b[7m\u001b[1mame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   25% L119\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m c\u001b[K\r\n\u001b[K\u001b[4;5H\u001b[31m# This function produces a team.                                            \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mmake_team\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, data):\r\n\t\u001b[33mt\u001b[39;49m = Team(data[\u001b[32m\"name\"\u001b[39;49m],data[\u001b[32m\"color\"\u001b[39;49m])\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m t\r\n\u001b[K\n\u001b[K\u001b[10;5H\u001b[31m# Get movement range of the unit at x,y. Returns nothing                    \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# if the tile is empty or does not exist. All of the positions              \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# returned are guaranteed to be tiles that the unit could                   \u001b[39;49m\r\n\t\b\b\u001b[31mstop moving on.                                             \u001b[39;49m\r\n\t\u001b[1m\u001b[34mget_move_range\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[15;10H\u001b[33mnit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m unit:\u001b[17;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m []\r\n\u001b[K\u001b[19;5H    \u001b[31m# Use the naive flood-fill algorithm to get neighboring                 \u001b[39;49m\r\n\t\u001b[31m# tiles. TODO: handle allied units                                      \u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\n\b\b\b\u001b[7m9% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mreport\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m_floodfill\u001b[0m\u001b[39;49m((a,b),r):\u001b[4;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(a,b)\u001b[K\u001b[5;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m t.unit \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m t.unit.allied(unit)):\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (a,b) \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report:\u001b[K\r\n\t            report.append((a,b))\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r > 0:\n\b\b\b\b\b_floodfill((a-1,b),r-1)\u001b[10;5H                _floodfill((a+1,b),r-1)\u001b[K\u001b[11;5H                _floodfill((a,b-1),r-1)\u001b[K\u001b[12;5H                _floodfill((a,b+1),r-1)\u001b[K\u001b[13;5H    _floodfill((x,y),unit.move)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m [(x,y) \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m report \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m\r\n\t                                      \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m unit)]\r\n\u001b[K\n\n\u001b[K\u001b[20;5H\u001b[31m# This is the attack action. This is what actually has side effects.        \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\u001b[23;29H\u001b[7m33% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34maction_attack\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, atk_pos, def_pos):\r\n\t\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = atk_pos\u001b[K\r\n\t\u001b[33mdx\u001b[39;49m,\u001b[33mdy\u001b[39;49m = def_pos\u001b[K\r\n\t\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[16;13H\u001b[33matk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[K\r\n\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\u001b[20;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[K\u001b[21;5H        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[23;30H\u001b[7m8% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[33matk_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[8;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpop_alerts\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[16;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[23;29H\u001b[7m42% L191\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ms\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[9;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[9;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[9;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mm\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[9;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mp\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34m_\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[9;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mi\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[9;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mf\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[9;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m200\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[21;22H\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\r\n\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[23;35H\u001b[7m10\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[3;13H\u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[5;13H\u001b[33ma.time\u001b[39;49m = 50\u001b[K\u001b[6;18Halerts.append((a,10,5)\u001b[7;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[8;5H    \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[20;14Hchoices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[23;30H\u001b[7m4% L212\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[11;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mG\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11;32H\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\u001b[?25l\u001b[33minfo1\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[14;9H\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[22;1H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;19H\b\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[12;18H\u001b[K\r\n\u001b[?25l]\n\b\u001b[K\u001b[23;36H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8@\t\b\b\b\b\u001b[4P\r\u001b[4P\u001b[8@\t\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\t\b\u001b[1@\t\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l\u001b[32m\"                                                             \u001b[39;49m\r\n\u001b[32m                ]                                                               \u001b[39;49m\r\n\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        return report                                                           \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m    # This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[32m    # checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[32m    # supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[32m    def start_over(self):                                                       \u001b[39;49m\r\n\u001b[32m        self.action = []                                                        \u001b[39;49m\r\n\u001b[32m        self.state = None                                                       \u001b[39;49m\r\n\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n                ]\u001b[K\u001b[12;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[12;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l(\u001b[32m\"\"\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l\u001b[32m\"                                                         \u001b[39;49m\r\n\u001b[32m                ]                                                               \u001b[39;49m\r\n\u001b[12;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mW\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m!\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n                ]\u001b[K\u001b[12;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[12;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;27H\u001b[C\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[32mD\"\u001b[39;49m,\u001b[32m\"w!\"\u001b[39;49m),\u001b[12;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\"\u001b[39;49m,\u001b[32m\"w!\"\u001b[39;49m),\u001b[12;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32my\"\u001b[39;49m,\u001b[32m\"w!\"\u001b[39;49m),\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m \"\u001b[39;49m,\u001b[32m\"w!\"\u001b[39;49m),\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m%\"\u001b[39;49m,\u001b[32m\"w!\"\u001b[39;49m),\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md\"\u001b[39;49m,\u001b[32m\"w!\"\u001b[39;49m),\u001b[12;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l%,\u001b[32m\"w!\"\u001b[39;49m),\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls,\u001b[32m\"w!\"\u001b[39;49m),\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le,\u001b[32m\"w!\"\u001b[39;49m),\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll,\u001b[32m\"w!\"\u001b[39;49m),\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m,\u001b[32m\"w!\"\u001b[39;49m),\r\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.,\u001b[32m\"w!\"\u001b[39;49m),\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg,\u001b[32m\"w!\"\u001b[39;49m),\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr,\u001b[32m\"w!\"\u001b[39;49m),\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li,\u001b[32m\"w!\"\u001b[39;49m),\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld,\u001b[32m\"w!\"\u001b[39;49m),\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.,\u001b[32m\"w!\"\u001b[39;49m),\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld,\u001b[32m\"w!\"\u001b[39;49m),\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la,\u001b[32m\"w!\"\u001b[39;49m),\r\t\t\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly,\u001b[32m\"w!\"\u001b[39;49m),\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\n\u001b[?25l                ]\u001b[K\u001b[23;36H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;19H\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\b\u001b[K\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[13;17H\u001b[?25l]\u001b[22;1H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;64H\u001b[?25l]\r\n\u001b[K\u001b[22d        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\b\u001b[?25l]\u001b[K\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;62H\u001b[?25l]\u001b[K\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;61H\u001b[?25l]\u001b[K\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;60H\u001b[?25l]\u001b[K\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;59H\u001b[?25l]\u001b[K\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;58H\u001b[?25l]\u001b[K\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l]\u001b[K\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[?25l]\u001b[K\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[?25l]\u001b[K\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;54H\u001b[?25l]\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;53H\u001b[?25l]\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;52H\u001b[?25l]\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;51H\u001b[?25l]\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[12;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;50H\u001b[?25l]\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;13H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[?25l)\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\b\u001b[?25ls) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25lsel) )\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l) )\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l) )\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l) )\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l ) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr) )\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[32m\"t.name, t.color) )                                  \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[14;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49mt.name, t.color) )\u001b[K\r\n\u001b[K\u001b[14;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32mt.name, t.color) )                                  \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[14;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25lt.name, t.color) )\u001b[K\r\n\u001b[K\u001b[14;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;46H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[14;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[14;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[16;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[16;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;43H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lv\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;13H    \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\u001b[7;18Hcam.blink = []\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\t\u001b[31m# Get intel from the world's information method.                        \u001b[39;49m\r\n\t\u001b[33malerts\u001b[39;49m, \u001b[33minfo1\u001b[39;49m, \u001b[33minfo2\u001b[39;49m, \u001b[33minfo3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info()\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\u001b[18;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\b\b\u001b[31mDraw the grid to the terminal using the gfx library. Specify the\u001b[39;49m\u001b[21;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\t\t\b\b\u001b[7m\u001b[1mrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   86% L26\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   86% L267\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\t\b\b\u001b[K\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\b\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25li\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\b\b\u001b[?25li\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\b\b\b\u001b[K\u001b[C\b\r\t\u001b[?25lfo\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\r\u001b[K\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;36H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\r\n\n\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[19;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[19;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[19;31H\r\n\n\n\n\n\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgame.py\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lwidgets.py\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[31m#self.alert = widgets.Alert( 6,1,\"%d%%\"%start, col)                     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = start\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end = end\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay = delay\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay > 0:\u001b[K\u001b[9;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.delay -= 1\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start > \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end:\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start -= 1\u001b[K\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.write(\u001b[32m\"%d%%\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start)\r\n\t\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(HPAlert, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).draw(x,y,col)\u001b[K\r\n\n\u001b[K\n\u001b[31m# A buffer is just a window that contains text. You can add more text to it     \u001b[39;49m\r\n\u001b[31m# and it will automatically scroll to the newest. Each line in the buffer is    \u001b[39;49m\r\n\u001b[31m# a (text,color) tuple.                                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mBuffer\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[20;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[22;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\n\b\b\b\b\b\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   39% L115\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\n\b\b\b\b\bh = h\u001b[K\n\b\b\b\b\bwhere = 0\u001b[5;14Htext = []\u001b[K\u001b[7;5H\u001b[31m# This adds a string 's' to the buffer and rescrolls to the                 \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# end. Word-wraps the text if necessary.                                    \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s, col=\u001b[32m\"w\"\u001b[39;49m):\r\n\t\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[14;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n                    \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[K\r\n                    report.append((old,col))\u001b[K\r\n                \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n                    report.append((current,col))\u001b[20;5H                \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\r\n\t    report.append((current,col))\u001b[23;29H\u001b[7m47\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\r\n\t    report.append((current,col))\r\n\treport.reverse()\n\b\b\b\breport + \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\r\n\u001b[K\u001b[8;7H\u001b[31mPositive numbers scroll to newer elements, and negative\u001b[39;49m\u001b[9;5H\u001b[31m# numbers scroll to older ones. \"None\" will scroll to the                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# end.                                                                      \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mscroll\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, where):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where -= where\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where < 0:\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# The buffer does usually handle input, but when it does,                   \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# up and down scroll it. This handle-input never returns                    \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# anything other than None.                                                 \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(-1)\u001b[21;13H == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(1)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m55% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(1)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# This draws the buffer with its current width and height such              \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# that it starts with the top-left x,y of the terminal. You can             \u001b[39;49m\r\n\u001b[7;5H\u001b[31m# override the colors (gray out) by providing a col parameter.              \u001b[39;49m\r\n\u001b[8;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\u001b[9;5H    draw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\u001b[10;5H    draw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\u001b[K\u001b[11;5H    w = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where\u001b[K\r\n\ti = y+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\u001b[K\r\n\t\u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text):\u001b[14;13H\u001b[33mi\u001b[39;49m -= 1\u001b[K\n\b\b\b\b\b\b\u001b[33ms\u001b[39;49m,\u001b[33mc\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text[w]\u001b[16;5H        draw.string(x,i,s,c+col)\u001b[K\u001b[17;5H        \u001b[33mw\u001b[39;49m += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A Camera is an interactable widget that serves as a representation of         \u001b[39;49m\r\n\u001b[31m# a Grid.                                                                       \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCamera\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[23;29H\u001b[7m63% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25lurrent:\u001b[K\r\n\t    report.append((current,col))\r\n\treport.reverse()\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = report + \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# Positive numbers scroll to newer elements, and negative                   \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# numbers scroll to older ones. \"None\" will scroll to the                   \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# end.                                                                      \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mscroll\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, where):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where -= where\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where < 0:\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\r\n\u001b[K\u001b[16;5H\u001b[31m# The buffer does usually handle input, but when it does,                   \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# up and down scroll it. This handle-input never returns                    \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# anything other than None.                                                 \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(-1)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(1)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;29H\u001b[7m55\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\n\b\b[]\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This adds a string 's' to the buffer and rescrolls to the                 \u001b[39;49m\r\n\t\b\b\u001b[31mend. Word-wraps the text if necessary.                 \u001b[39;49m\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s, col=\u001b[32m\"w\"\u001b[39;49m):\u001b[K\u001b[10;5H    \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\u001b[11;5H    \u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[14;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\u001b[16;5H                \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[K\u001b[17;5H                report.append((old,col))\u001b[K\u001b[18;5H            \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[19;5H                report.append((current,col))\r\n\t            \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\u001b[21;13Hurrent:\u001b[K\r\n\t    report.append((current,col))\u001b[23;29H\u001b[7m47% L135\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33mcurrent\u001b[39;49m += c\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n\t            \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[6;21Hreport.append((old,col))\u001b[7;5H            \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\u001b[8;5H                report.append((current,col))\u001b[K\u001b[9;5H                \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[K\r\n\t    report.append((current,col))\r\n\treport.reverse()\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = report + \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# Positive numbers scroll to newer elements, and negative                   \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# numbers scroll to older ones. \"None\" will scroll to the                   \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# end.                                                                      \u001b[39;49m\r\n\u001b[19;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mscroll\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, where):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where -= where\u001b[K\u001b[21;12H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where < 0:\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\u001b[23;29H\u001b[7m51% L136\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   51% L140\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\n\u001b[?25l    \u001b[31m# Positive numbers scroll to newer elements, and negative                   \u001b[39;49m\r\n\u001b[A\u001b[23;36H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[16;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mC\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mb\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;5H\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[34mc\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ml\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34me\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34ma\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mr\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/widgets.py...\u001b[18;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/widgets.py\u001b[K\u001b[18;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(HPAlert, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).draw(x,y,col)\r\n\u001b[K\n\u001b[K\n\u001b[31m# A buffer is just a window that contains text. You can add more text to it     \u001b[39;49m\r\n\u001b[31m# and it will automatically scroll to the newest. Each line in the buffer is    \u001b[39;49m\r\n\u001b[31m# a (text,color) tuple.                                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mBuffer\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\n\b\b[]\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# This adds a string 's' to the buffer and rescrolls to the                 \u001b[39;49m\r\n\t\b\b\u001b[31mend. Word-wraps the text if necessary.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s, col=\u001b[32m\"w\"\u001b[39;49m):\r\n\t\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[20;5H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\u001b[21;5H        \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\u001b[K\u001b[23;29H\u001b[7m43% L127\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[3;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n                    \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[K\r\n                    report.append((old,col))\u001b[K\r\n                \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n                    report.append((current,col))\u001b[9;5H                \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\r\n\t    report.append((current,col))\r\n\treport.reverse()\n\b\b\b\breport + \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\r\n\u001b[K\n\t\b\b\u001b[31mClear the buffer.                     \u001b[39;49m\r\n\t\u001b[1m\u001b[34mclear\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\u001b[K\n\u001b[K\u001b[20;5H\u001b[31m# Positive numbers scroll to newer elements, and negative                   \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# numbers scroll to older ones. \"None\" will scroll to the                   \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# end.                                                                      \u001b[39;49m\r\n\u001b[23;29H\u001b[7m51\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[20;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\r\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l0\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/widgets.py...\u001b[19;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/widgets.py\u001b[K\u001b[19;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[19;23H\r\n\n\n\n\n\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;13H    \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\n\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\u001b[11;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\t\u001b[31m# Get intel from the world's information method.                        \u001b[39;49m\r\n\u001b[16;5H    \u001b[33malerts\u001b[39;49m, \u001b[33minfo1\u001b[39;49m, \u001b[33minfo2\u001b[39;49m, \u001b[33minfo3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info()\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m info1:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.clear()\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\n\t\b\b\u001b[31mDraw the grid to the terminal using the gfx library. Specify the\u001b[39;49m\u001b[23;14H\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   86% L268\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   86% L269\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[20;13H\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\r\u001b[K\u001b[20;13H\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@c\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[20;30H\r\n\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[23;35H\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[23;30H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\r\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[21;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[21;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[7;12H+-------------------+\u001b[7;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[8;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[8;64H\u001b[31m\u001b[40mRed\u001b[9;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[9;64H\u001b[34m\u001b[40mBlue\u001b[10;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8d\b\b\u001b[3;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n                \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\r\n\u001b[K\n        \u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\u001b[A\n        \u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n        \u001b[31m# Get intel from the world's information method.                        \u001b[39;49m\r\n\u001b[A\n        \u001b[33malerts\u001b[39;49m, \u001b[33minfo1\u001b[39;49m, \u001b[33minfo2\u001b[39;49m, \u001b[33minfo3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info()\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m info1:\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.clear()\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s,c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info1:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.write(s,c)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   85% L270  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[21;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\b\b\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[4;11H\u001b[31mGet intel from the world's information method.               \u001b[39;49m\r\n\t\u001b[33malerts\u001b[39;49m, \u001b[33minfo1\u001b[39;49m, \u001b[33minfo2\u001b[39;49m, \u001b[33minfo3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m info1:\u001b[K\n\b\b\b\b\b\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.clear()\u001b[9;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s,c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info1:\u001b[K\u001b[10;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.write(s,c)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[15;5H\u001b[4P\t\b\b\u001b[31mtop-left of the map (including outside of the m\u001b[39;49m\u001b[4@\u001b[31map).\u001b[39;49m\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\u001b[17;14Hcam.draw(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\r\n\t\u001b[4P\t\u001b[C2.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+8)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+16)\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m9% L272\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default widgets.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;13H\u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[3;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\u001b[K\r\n\t            \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\r\n\t            report.append((old,col))\r\n\t        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[8;13H        report.append((current,col))\u001b[9;13H        \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[K\r\n\t    report.append((current,col))\r\n\treport.reverse()\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = report + \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\u001b[K\u001b[14;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\r\n\u001b[K\u001b[16;5H\u001b[31m# Clear the buffer.                                                         \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mclear\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[18;14Htext = []\u001b[K\u001b[19;14Hwhere = 0\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# Positive numbers scroll to newer elements, and negative                   \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# numbers scroll to older ones. \"None\" will scroll to the                   \u001b[39;49m\r\n\u001b[23;14H\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   50% L143\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[34msuper\u001b[0m\u001b[39;49m(HPAlert, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m).draw(x,y,col)\r\n\u001b[K\n\u001b[K\n\u001b[31m# A buffer is just a window that contains text. You can add more text to it     \u001b[39;49m\r\n\u001b[31m# and it will automatically scroll to the newest. Each line in the buffer is    \u001b[39;49m\r\n\u001b[31m# a (text,color) tuple.                                                         \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mBuffer\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\n\b\b[]\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# This adds a string 's' to the buffer and rescrolls to the                 \u001b[39;49m\r\n\t\b\b\u001b[31mend. Word-wraps the text if necessary.\u001b[39;49m\r\n\t\u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s, col=\u001b[32m\"w\"\u001b[39;49m):\r\n\t\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[21;5H        \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[22;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\u001b[K\u001b[23;29H\u001b[7m43% L127\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\u001b[3;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\r\n                    \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[K\r\n                    report.append((old,col))\u001b[K\r\n                \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n                    report.append((current,col))\u001b[9;5H                \u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\r\n\t    report.append((current,col))\r\n\treport.reverse()\n\b\b\b\breport + \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\r\n\u001b[K\n\t\b\b\u001b[31mClear the buffer.                     \u001b[39;49m\r\n\t\u001b[1m\u001b[34mclear\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\r\n\u001b[K\u001b[21;5H\u001b[31m# Positive numbers scroll to newer elements, and negative                   \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# numbers scroll to older ones. \"None\" will scroll to the                   \u001b[39;49m\r\n\u001b[23;29H\u001b[7m50% L126\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# This adds a string 's' to the buffer and rescrolls to the                 \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# end. Word-wraps the text if necessary.                                    \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mwrite\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, s, col=\u001b[32m\"w\"\u001b[39;49m):\r\n\t\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m s:\u001b[K\r\n\t    \u001b[33mcurrent\u001b[39;49m += c\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(current) >= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w:\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\" \"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m current.rstrip():\u001b[16;5H                \u001b[33mold\u001b[39;49m,\u001b[33mcurrent\u001b[39;49m = current.rstrip().rsplit(\u001b[35mNone\u001b[39;49m,1)\u001b[K\u001b[17;5H                report.append((old,col))\r\n\t        \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t            report.append((current,col))\u001b[20;21H\u001b[33mcurrent\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m\u001b[21;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[K\u001b[22;5H        report.append((current,col))\u001b[K\u001b[23;29H\u001b[7m47% L125\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\r\n\t    report.append((current,col))\r\n\treport.reverse()\n\b\b\b\breport + \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\r\n\u001b[K\u001b[8;7H\u001b[31mClear the buffer.                     \u001b[39;49m\r\n\t\u001b[1m\u001b[34mclear\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\r\n\u001b[K\u001b[13;5H\u001b[31m# Positive numbers scroll to newer elements, and negative                   \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# numbers scroll to older ones. \"None\" will scroll to the                   \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# end.                                                                      \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mscroll\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, where):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where -= where\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where < 0:\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# The buffer does usually handle input, but when it does,                   \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# up and down scroll it. This handle-input never returns                    \u001b[39;49m\r\n\u001b[23;29H\u001b[7m54% L134\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# The buffer does usually handle input, but when it does,                   \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# up and down scroll it. This handle-input never returns                    \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# anything other than None.                                                 \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(-1)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(1)\u001b[8;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# This draws the buffer with its current width and height such              \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# that it starts with the top-left x,y of the terminal. You can             \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# override the colors (gray out) by providing a col parameter.              \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\u001b[14;5H    draw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\u001b[15;5H    draw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\u001b[K\u001b[16;5H    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where\u001b[K\r\n\t\u001b[33mi\u001b[39;49m = y+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\u001b[K\r\n\t\u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text):\u001b[19;13H\u001b[33mi\u001b[39;49m -= 1\u001b[K\n\b\b\b\b\b\b\u001b[33ms\u001b[39;49m,\u001b[33mc\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text[w]\u001b[21;5H        draw.string(x,i,s,c+col)\u001b[K\u001b[22;5H        \u001b[33mw\u001b[39;49m += 1\u001b[K\u001b[23;29H\u001b[7m61% L153\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   61% L165\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\t\u001b[?25lw\n\bi\u001b[20;13Hi\n\bs,c\u001b[14d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[23;30H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\r\t\t\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;27H\u001b[?25l<\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\n\n\n\t\u001b[?25l\u001b[33mw\u001b[39;49m\n\b\u001b[33mi\u001b[39;49m\u001b[20;13H\u001b[33mi\u001b[39;49m\n\b\u001b[33ms\u001b[39;49m,\u001b[33mc\u001b[39;49m\u001b[14;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lj\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[15;1H\u001b[K\n\u001b[?25l        draw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\u001b[23;36H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;13H\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1M\u001b[1;24r\u001b[15;9H\u001b[?25ldraw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[22;1H            draw.string(x,i,s,c+col)\u001b[K\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1M\u001b[1;24r\u001b[14;9H\u001b[?25ldraw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[15;14Hfill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\u001b[K\u001b[22;1H            \u001b[33mw\u001b[39;49m += 1\u001b[K\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text):\u001b[K\u001b[23;36H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[2L\u001b[1;24r\u001b[18;9H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text) < \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h:\r\n\u001b[K\n\u001b[K\n        \u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text):\u001b[K\u001b[23;30H\u001b[7m0% L171\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[K\u001b[20;9H\u001b[?25l\u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text):\r\n\t    \u001b[33mi\u001b[39;49m -= 1\u001b[K\n\b\b\b\b\b\b\u001b[33ms\u001b[39;49m,\u001b[33mc\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text[w]\u001b[23;36H\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l-\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\u001b[K\t\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[19;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\r\n\n\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/widgets.py...\u001b[19;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/widgets.py\u001b[K\u001b[19;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[19;30H\b\b\b\b\b\b\b\b\b\b\b\b\b\b\t\u001b[?25l\u001b[1@(\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lsle\u001b[1@n\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1@l\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.\u001b[1m\u001b[34mle\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lhle\u001b[1@n\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;13H\u001b[?25li\n\bs,c\u001b[19;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l \u001b[1m\u001b[34mle\u001b[0m\u001b[39;49m\u001b[1@\u001b[1m\u001b[34mn\u001b[0m\u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@-\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@ \u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l)\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\n\n\b\b\b\u001b[?25l\u001b[33mi\u001b[39;49m\n\b\u001b[33ms\u001b[39;49m,\u001b[33mc\u001b[39;49m\u001b[19d\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[33mi\u001b[39;49m -\u001b[1@=\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/widgets.py...\u001b[19;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/widgets.py\u001b[K\u001b[19;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[3;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[4;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[5;64H\u001b[34m\u001b[40mBlue\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[8d\b\b\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;3H\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;3H\u001b[30X\u001b[4d\u001b[30X\u001b[5d\u001b[30X\u001b[6d\u001b[30X\u001b[7d\u001b[30X\u001b[8d\u001b[30X\u001b[9d\u001b[30X\u001b[10d\u001b[30X\u001b[11d\u001b[30X\u001b[12d\u001b[30X\u001b[13;5H\u001b[32m\u001b[40m.\u001b[17d\b\b\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b[18d\b\b\u001b(B\u001b[0m\u001b[32m\u001b[40m..............................\u001b[19;3H..............................\u001b[20;3H..............................\u001b[21;3H..............................\u001b[22;3H..............................\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;3H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;3H\u001b[32m\u001b[40m.\u001b[14d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;3H\u001b[32m\u001b[40m.\u001b[15d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[15;3H\u001b[32m\u001b[40m.\u001b[16d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[16;3H\u001b[32m\u001b[40m.\u001b[17d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[17;3H\u001b[32m\u001b[40m.\u001b[18d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[18;3H\u001b[32m\u001b[40m.\u001b[19d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[19;3H\u001b[32m\u001b[40m.\u001b[20d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[20;3H\u001b[32m\u001b[40m.\u001b[21d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[A |\u001b[32m\u001b[40m.\u001b[22d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r |\u001b[32m\u001b[40m.\u001b[79G\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;3H\u001b[32m\u001b[40m..............................\u001b[4;3H..............................\u001b[5;3H..............................\u001b[6;3H..............................\u001b[7;3H.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[8;3H..............................\u001b[9;3H..............................\u001b[10;3H..............................\u001b[11;3H..............................\u001b[12;3H..............................\u001b[13;5H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b[14;3H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[17d\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[18d\b\b\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[30X\u001b[19d\u001b[30X\u001b[20d\u001b[30X\u001b[21d\u001b[30X\u001b[22d\u001b[30X\u001b[79G\u001b[14;3H\u001b[32m\u001b[40m.\u001b[15d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[14;3H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[15d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;3H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;3H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;3H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n    \u001b[31m# The buffer does usually handle input, but when it does,                   \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# up and down scroll it. This handle-input never returns                    \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# anything other than None.                                                 \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(-1)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(1)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# This draws the buffer with its current width and height such              \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# that it starts with the top-left x,y of the terminal. You can             \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# override the colors (gray out) by providing a col parameter.              \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\r\n        draw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\r\n        draw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\u001b[K\r\n        \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where\u001b[K\r\n        \u001b[33mi\u001b[39;49m = y+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text) < \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h:\u001b[K\r\n            \u001b[33mi\u001b[39;49m -= (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h - \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text))\u001b[K\r\n        \u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text):\u001b[K\r\n            \u001b[33mi\u001b[39;49m -= 1\u001b[K\r\n            \u001b[33ms\u001b[39;49m,\u001b[33mc\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text[w]\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   60% L170  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[19;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\u001b[4;53H\u001b[4P\u001b[4;5H\u001b[4@\u001b[4;11H\u001b[31mGet intel from the world's information method.\u001b[39;49m\u001b[5;5H    \u001b[33malerts\u001b[39;49m, \u001b[33minfo1\u001b[39;49m, \u001b[33minfo2\u001b[39;49m, \u001b[33minfo3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info()\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\u001b[K\u001b[7;12Hinfo1:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.clear()\u001b[9;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s,c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info1:\u001b[10;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.write(s,c)\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+8\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+16)\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\r\n\u001b[K\u001b[23;14H\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   89% L2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default widgets.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;5H\u001b[31m# The buffer does usually handle input, but when it does,                   \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# up and down scroll it. This handle-input never returns                    \u001b[39;49m\r\n\u001b[4;5H\u001b[4P\t\b\b\u001b[31manything other than None.                     \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(-1)\u001b[7;12Hc == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(1)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# This draws the buffer with its current width and height such              \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# that it starts with the top-left x,y of the terminal. You can             \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# override the colors (gray out) by providing a col parameter.              \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\u001b[14;5H    draw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\u001b[15;5H    draw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\u001b[K\u001b[16;5H    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where\u001b[K\r\n\t\u001b[33mi\u001b[39;49m = y+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text) < \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h:\u001b[K\r\n\t    \u001b[33mi\u001b[39;49m -= (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h - \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text)\r\n\t\u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text):\r\n\t    \u001b[33mi\u001b[39;49m -= 1\u001b[K\n\b\b\b\b\b\b\u001b[33ms\u001b[39;49m,\u001b[33mc\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text[w]\u001b[23;14H\u001b[7m\u001b[1mwidgets.py  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   60% L1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m current:\u001b[K\u001b[3;5H        report.append((current,col))\u001b[K\u001b[4;5H    report.reverse()\u001b[K\u001b[5;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = report + \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\r\n\u001b[K\u001b[8;5H\u001b[31m# Clear the buffer.                                                         \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mclear\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[10;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text = []\u001b[K\u001b[11;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Positive numbers scroll to newer elements, and negative                   \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# numbers scroll to older ones. \"None\" will scroll to the                   \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# end.                                                                      \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mscroll\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, where):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where -= where\u001b[18;12H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where < 0:\u001b[K\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where = 0\u001b[K\r\n\u001b[K\u001b[21;5H\u001b[31m# The buffer does usually handle input, but when it does,                   \u001b[39;49m\r\n\u001b[22;5H\u001b[31m# up and down scroll it. This handle-input never returns                    \u001b[39;49m\r\n\u001b[23;29H\u001b[7m54% L154\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# The buffer does usually handle input, but when it does,                   \u001b[39;49m\r\n\u001b[3;5H\u001b[31m# up and down scroll it. This handle-input never returns                    \u001b[39;49m\r\n\u001b[4;5H\u001b[31m# anything other than None.                                                 \u001b[39;49m\r\n\u001b[5;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mhandle_input\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"up\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(-1)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m c == \u001b[32m\"down\"\u001b[39;49m: \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.scroll(1)\u001b[8;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# This draws the buffer with its current width and height such              \u001b[39;49m\r\n\u001b[11;5H\u001b[31m# that it starts with the top-left x,y of the terminal. You can             \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# override the colors (gray out) by providing a col parameter.              \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[32m\"\"\u001b[39;49m):\u001b[K\u001b[14;5H    draw.border(x,y,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h,\u001b[32m\"--||+\"\u001b[39;49m)\u001b[K\u001b[15;5H    draw.fill(x, y, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h)\u001b[K\u001b[16;5H    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.where\u001b[K\r\n\t\u001b[33mi\u001b[39;49m = y+\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h\u001b[K\u001b[18;12H\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text) < \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h:\u001b[19;13H\u001b[33mi\u001b[39;49m -= (\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h - \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text))\r\n\t\u001b[1m\u001b[36mwhile\u001b[0m\u001b[39;49m i > y \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m w < \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text):\u001b[21;5H        \u001b[33mi\u001b[39;49m -= 1\u001b[K\u001b[22;5H        \u001b[33ms\u001b[39;49m,\u001b[33mc\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text[w]\u001b[K\n\b\b\u001b[7m60\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l        \u001b[33mi\u001b[39;49m -= 1\u001b[K\u001b[3;5H        \u001b[33ms\u001b[39;49m,\u001b[33mc\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.text[w]\u001b[K\u001b[4;5H        draw.string(x,i,s,c+col)\u001b[K\u001b[5;5H        \u001b[33mw\u001b[39;49m += 1\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[31m# A Camera is an interactable widget that serves as a representation of         \u001b[39;49m\r\n\u001b[31m# a Grid.                                                                       \u001b[39;49m\r\n\u001b[1m\u001b[36mclass\u001b[0m\u001b[39;49m \u001b[32mCamera\u001b[39;49m(\u001b[1m\u001b[34mobject\u001b[0m\u001b[39;49m):\u001b[K\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34m__init__\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, w, h, grid):\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w = w\u001b[K\u001b[13;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.h = h\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = grid\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cursor = 0,0\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.viewport = 0,0\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim = 0.0\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.blink_anim_speed = 0.1\u001b[K\r\n\u001b[K\u001b[22;5H\u001b[31m# Returns the cursor when the player presses Enter. Moves the               \u001b[39;49m\r\n\u001b[23;29H\u001b[7m70% L172\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\t\u001b[31m# Get intel from the world's information method.                        \u001b[39;49m\r\n\t\u001b[33malerts\u001b[39;49m, \u001b[33minfo1\u001b[39;49m, \u001b[33minfo2\u001b[39;49m, \u001b[33minfo3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info()\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m info1:\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.clear()\u001b[K\r\n            \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s,c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info1:\u001b[K\r\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.write(s,c)\u001b[11;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[13;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[14;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[16;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[17;14Hcam.draw(x,y)\u001b[K\u001b[18;15Huff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\u001b[19;15Huff2.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+8)\u001b[20;15Huff3.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+16)\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\r\n\u001b[K\u001b[23;14H\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   89% L270\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m69\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\u001b[?25li info1:\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l info1:\u001b[K\r\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf info1:\u001b[7;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo info1:\u001b[7;11H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m info1:\u001b[7;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l( info1:\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;9H\u001b[?25lcx,cy\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l info1:\u001b[7;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25linfo1:\u001b[K\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l info1:\u001b[K\u001b[7;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l info1:\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;9H\u001b[?25l\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l( info1:\u001b[7;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li info1:\u001b[7;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info1:\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf info1:\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo info1:\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;9H\u001b[?25lcx,cy\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l info1:\u001b[K\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info1:\u001b[K\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25li info1:\u001b[K\u001b[7;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l info1:\u001b[K\u001b[7;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l info1:\u001b[K\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;9H\u001b[?25l\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li info1:\u001b[7;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info1:\u001b[7;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf info1:\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo info1:\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l info1:\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li info1:\u001b[7;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info1:\u001b[7;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l info1:\u001b[7;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25linfo1:\u001b[K\u001b[7;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25li info1:\u001b[K\u001b[7;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l info1:\u001b[K\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25linfo1:\u001b[K\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l info1:\u001b[K\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info1:\u001b[K\u001b[7;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25li info1:\u001b[K\u001b[7;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l info1:\u001b[K\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l( info1:\u001b[7;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;9H\u001b[?25lcx,cy\u001b[7d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li info1:\u001b[7;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info1:\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf info1:\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo info1:\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l, info1:\u001b[7;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb info1:\u001b[7;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu info1:\u001b[7;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf info1:\u001b[7;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf info1:\u001b[7;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l) info1:\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l info1:\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li info1:\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info1:\u001b[7;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l info1:\u001b[7;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;9H\u001b[?25l\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m\u001b[7;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l( info1:\u001b[7;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l) info1:\u001b[7;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;30H\u001b[?25linfo1:\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lnfo1:\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lfo1:\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo1:\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1:\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l):\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;30H\b\u001b[?25l()):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)):\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)):\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l,):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[7;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[7;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[7;32H\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l():\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l):\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l,):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l():\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l):\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[?25li),()):\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2),()):\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,),()):\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls),()):\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le),()):\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll),()):\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m),()):\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25lselfb),()):\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m),()):\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.),()):\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb),()):\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu),()):\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf),()):\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf),()):\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2),()):\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;65H\b\b\b\u001b[?25li)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l3)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)):\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l3)):\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[7;75H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[7;75H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;75H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;75H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;78H\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[8;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   89% L268\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;13H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[9;13H\u001b[4@\t\u001b[C\b\u001b[?25lelf\u001b[1P\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1P\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.clear()\u001b[K\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lb.clear()\u001b[9;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu.clear()\u001b[9;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf.clear()\u001b[9;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf.clear()\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[10;13H\u001b[4@\t\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[4@\u001b[11;21H\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;34H\b\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25li:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25lsel\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@u\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[3;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[4;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[5;64H\u001b[34m\u001b[40mBlue\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[11;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[12;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[13;64H\u001b[34m\u001b[40mBlue\u001b[19;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[20;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[21;64H\u001b[34m\u001b[40mBlue\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[19;69H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\u001b[24d\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n        \u001b[31m# Get intel from the world's information method.                        \u001b[39;49m\r\n\u001b[A\n        \u001b[33malerts\u001b[39;49m, \u001b[33mi1\u001b[39;49m, \u001b[33mi2\u001b[39;49m, \u001b[33mi3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info()\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (info,buff) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m ((i1,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1),(i2,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2),(i3,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3)):\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m info:\u001b[K\r\n                buff.clear()\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s,c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info:\u001b[K\r\n                    buff.write(s,c)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+8)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+16)\u001b[K\r\n        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   89% L271  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default widgets.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\t\b\u001b[?25lwidgets.py\u001b[24;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgame.py\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\u001b[2;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[K\u001b[3;13H\u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\r\n\t    \u001b[33ma.time\u001b[39;49m = 50\u001b[K\r\n\t\u001b[4@\t\t\b.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# Global team information.                                              \u001b[39;49m\r\n\t\u001b[33minfo1\u001b[39;49m = [ (\u001b[32m\"Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"w!\"\u001b[39;49m)]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[14;5H        info1.append( (t.name, t.color) )\u001b[K\r\n\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info1, info1\u001b[K\r\n\u001b[K\u001b[18;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[19;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[23;15H\u001b[7m\u001b[1mame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   44% L216\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   44% L215\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;13H\r\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l0\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\b\b\b\u001b[?25lsel\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[16;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[16;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;13H\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\r\t\t\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;29H\u001b[?25l>\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l0\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;13H\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;43H\b\u001b[K\u001b[?25l3\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\u001b[?25l, info3\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2, info3\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\r\n\n\u001b[K\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[K\u001b[23;36H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;13H\r\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l3\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\u001b[?25l\u001b[33minfo3\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;13H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[18;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[18;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[18;13H\u001b[?25li\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l3\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\u001b[?25l\u001b[33minfo3\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[18;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[18;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[18;22H\u001b[?25l(]\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[18;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[18;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[18;23H\u001b[?25ls)]\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25lsel)]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\b\b\b\b\b\b\b\u001b[?25linfo3\u001b[K\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\b\u001b[K\b\b\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25li\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[18;13H\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[K\b\u001b[K\b\u001b[K\u001b[C\t\b\b\b\b\u001b[?25l\u001b[33mt\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l0)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l])\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[18;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[18;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[18;50H\r\n\n\n\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[23;6H\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   44% L219\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;13H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[23;30H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[21;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mu\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[18;50H\u001b[1;22r\u001b[21;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[20;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.unit:\u001b[K\r\n                \u001b[33mu\u001b[39;49m = t.unit\u001b[K\u001b[23;36H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;13H\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mu\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1P\r\n\n\n\u001b[?25lAuto-saving...\u001b[21;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\b\b\u001b[?25ldone\u001b[21;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[K\u001b[21;17H\u001b[?25l t.unit\u001b[K\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1P\u001b[?25l.unit\u001b[K\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lunit\u001b[K\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lnit\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lit\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\t\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l3\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\t\u001b[?25l\u001b[33minfo3\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[K\u001b[3;13Hinfo1.append( (t.name, t.color) )\r\n\u001b[K\n\t\u001b[33minfo3\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\u001b[7;13H\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0])\r\n\t    \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\n\b\u001b[33minfo3\u001b[39;49m = [\r\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\r\n\u001b[K\u001b[15;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\u001b[23;30H\u001b[7m6% L223\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\b\u001b[C\u001b[?25l ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l( ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l ]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l ]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l. ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l, ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l. ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l ]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l ]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l ]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l ]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l ]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l ]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l. ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l+ ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\" ]                              \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[10;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m! ]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m ]\u001b[K\r\n\u001b[K\u001b[10;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l) ]\u001b[10;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;52H\u001b[?25l, ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[10;53H\u001b[K\r\n\u001b[C\u001b[?25l]\r\n\u001b[K\u001b[23;36H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[15@\t\t\b\b\b\b\u001b[4P\r\t\u001b[4P\b\b\b\b\u001b[4P\r\u001b[4P\u001b[16@\t\t\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\t\b\u001b[1@\t\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[?25l(]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\n\t\t\u001b[?25l\u001b[33minfo3\u001b[39;49m = [ (u.name,u.team.color+\u001b[32m\"!\"\u001b[39;49m),\r\n                          ()]\u001b[K\u001b[23;36H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\t\u001b[?25l\u001b[33mcol\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[36mor\u001b[0m\u001b[39;49m+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\u001b[11;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc+\u001b[32m\"!\"\u001b[39;49m),\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo+\u001b[32m\"!\"\u001b[39;49m),\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll+\u001b[32m\"!\"\u001b[39;49m),\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25lu)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1P\u001b[C\u001b[C\u001b[C\b\u001b[?25l)]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\")]                                                   \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[12;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mD)]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me)]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mf)]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32me)]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mn)]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m)] \u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m)] \u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m)] \u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m)] \u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mE)]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mF)]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        return report, info1, info2, info3                                      \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m    # This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[32m    # checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[32m    # supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[32m    def start_over(self):                                                       \u001b[39;49m\r\n\u001b[32m        self.action = []                                                        \u001b[39;49m\r\n\u001b[32m        self.state = None                                                       \u001b[39;49m\r\n\u001b[12;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m )]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m+)]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m)]\u001b[K\r\n\u001b[K\u001b[12;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[12;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m?\"\u001b[39;49m)]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l,)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l,]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[12;41H\u001b[K\r\n\u001b[?25l]\n\b\u001b[K\u001b[23;36H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16@\u001b[23;30H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[4P\r\t\u001b[4P\b\b\b\b\u001b[4P\r\u001b[4P\u001b[23;30H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16@\u001b[23;30H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[1@\r\u001b[C\u001b[13;18H\u001b[1@\u001b[13;3H\u001b[24;1H\u001b[?25lAuto-saving...\u001b[13;3H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[13;3H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;19H\u001b[1@\u001b[13;4H\u001b[13;20H\u001b[1@\u001b[13;5H\u001b[13;21H\u001b[1@\u001b[13;6H\u001b[13;22H\u001b[1@\r\t\b\b\t\t\t\b\b\u001b[1@\r\t\b\t\t\t\b\u001b[1@\r\t\t\t\u001b[1@\u001b[13;10H\u001b[13;26H\u001b[1@\u001b[13;11H\u001b[13;27H\u001b[1@\u001b[13;12H\u001b[13;28H\u001b[1@\u001b[13;13H\u001b[13;29H\u001b[1@\u001b[13;14H\u001b[13;30H\u001b[1@\r\t\t\b\b\t\t\t\b\b\u001b[1@\r\t\t\b\t\t\t\b\u001b[1@\r\t\t\t\t\u001b[1@\u001b[13;18H\u001b[13;34H\u001b[1@\u001b[13;19H\u001b[13;35H\u001b[1@\u001b[13;20H\u001b[13;36H\u001b[1@\u001b[13;21H\u001b[13;37H\u001b[1@\u001b[13;22H\u001b[13;38H\u001b[1@\u001b[13;23H\t\t\t\b\b\u001b[1@\r\t\t\t\b\t\t\t\b\u001b[1@\r\t\t\t\t\t\u001b[1@\u001b[13;26H\u001b[13;42H\u001b[1@\u001b[13;27H\r\t\t\u001b[26P\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\t\b\u001b[1@\t\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[13;13H\u001b[14P\u001b[4@\r\t\t\u001b[1@\r\u001b[C\u001b[13;18H\u001b[1@\u001b[13;3H\u001b[13;19H\u001b[1@\u001b[13;4H\u001b[13;20H\u001b[1@\u001b[13;5H\u001b[13;21H\u001b[1@\u001b[13;6H\u001b[13;22H\u001b[1@\r\t\b\b\t\t\t\b\b\u001b[1@\r\t\b\t\t\t\b\u001b[1@\r\t\t\t\u001b[1@\u001b[13;10H\u001b[13;26H\u001b[1@\u001b[13;11H\u001b[13;27H\u001b[1@\u001b[13;12H\u001b[13;28H\u001b[1@\u001b[13;13H\u001b[13;29H\u001b[1@\u001b[13;14H\u001b[13;30H\u001b[1@\r\t\t\b\b\t\t\t\b\b\u001b[1@\r\t\t\b\t\t\t\b\u001b[1@\r\t\t\t\t\u001b[1@\u001b[13;18H\u001b[13;34H\u001b[1@\u001b[13;19H\u001b[13;35H\u001b[1@\u001b[13;20H\u001b[13;36H\u001b[1@\u001b[13;21H\u001b[13;37H\u001b[1@\u001b[13;22H\u001b[13;38H\u001b[1@\u001b[13;23H\t\t\t\b\b\u001b[1@\r\t\t\t\b\t\t\t\b\u001b[1@\r\t\t\t\t\t\u001b[1@\u001b[13;26H\u001b[13;42H\u001b[1@\u001b[13;27H\u001b[13;42H\u001b[1P\u001b[13;27H\t\t\u001b[1P\u001b[13;27H\t\t\b\u001b[1P\u001b[13;27H\t\t\b\b\u001b[1P\u001b[13;27H\u001b[13;38H\u001b[1P\u001b[13;27H\u001b[13;37H\u001b[1P\u001b[13;27H\u001b[13;36H\u001b[1P\u001b[13;27H\u001b[13;35H\u001b[1P\u001b[13;27H\t\u001b[C\u001b[1P\b\b\b\b\b\b\b\t\u001b[1P\b\b\b\b\b\b\t\b\u001b[1P\b\b\b\b\b\t\b\b\u001b[1P\b\b\b\b\t\b\b\b\u001b[1P\b\b\b\u001b[13;29H\u001b[1P\b\b\u001b[C\u001b[1P\b\u001b[1P\u001b[?25l(]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[1P\u001b[C\u001b[?25l\u001b[32m\")]                                                   \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[13;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        return report, info1, info2, info3                                      \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m    # This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[32m    # checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[32m    # supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[32m    def start_over(self):                                                       \u001b[39;49m\r\n\u001b[32m        self.action = []                                                        \u001b[39;49m\r\n\u001b[13;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mH)]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mP)]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m )]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m%)]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md)]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m%)]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m%)]\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m)]\u001b[K\r\n\u001b[K\u001b[13;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[13;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l%)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll)]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[13;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[13;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[13;45H\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[13;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 84, in run\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 265, in handle_input\r\n    alerts, i1, i2, i3 = self.world.pump_info()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 227, in pump_info\r\n    return report, info1, info2, info3\r\nNameError: global name 'info2' is not defined\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[K\r\n            info1.append( (t.name, t.color) )\u001b[K\r\n\u001b[K\n        \u001b[33minfo3\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0])\u001b[K\r\n            \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n                \u001b[33mcol\u001b[39;49m = u.team.color\u001b[K\r\n                \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                         (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[K\r\n                         (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,col)]\u001b[K\r\n\u001b[K\n\u001b[K\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[K\r\n\u001b[K\n    \u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   45% L224  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[13;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;45H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[5;1H\u001b[1L\u001b[1;24r\u001b[5;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   45% L216\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[5;13H\r\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[5;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31m3\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mu\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[5;61H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[5;61H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;61H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[3;13H\u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[4;13H\u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\r\n\t    \u001b[33ma.time\u001b[39;49m = 50\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\u001b[K\n\t\u001b[31m# Global team information.                                              \u001b[39;49m\r\n\t\u001b[33minfo1\u001b[39;49m = [ (\u001b[32m\"Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"w!\"\u001b[39;49m)]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[K\u001b[14;13Hinfo1.append( (t.name, t.color) )\u001b[K\r\n\n\t\u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\t\u001b[33minfo3\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[19;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0])\u001b[K\u001b[20;5H        \u001b[33mu\u001b[39;49m = t.unit\u001b[K\u001b[21;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\u001b[22;5H            \u001b[33mcol\u001b[39;49m = u.team.color\n\b\b\b\b\b\u001b[7m3% L212\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;49H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[31mIGlobal team information.\u001b[39;49m\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mnGlobal team information.\u001b[39;49m\u001b[11;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mfGlobal team information.\u001b[39;49m\u001b[11;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31moGlobal team information.\u001b[39;49m\r\t\t\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m Global team information.\u001b[39;49m\r\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m1Global team information.\u001b[39;49m\r\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m Global team information.\u001b[39;49m\u001b[11;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31miGlobal team information.\u001b[39;49m\u001b[11;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31msGlobal team information.\u001b[39;49m\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m Global team information.\u001b[39;49m\u001b[11;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mlobal team information. \u001b[39;49m\u001b[11;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mhlobal team information.\u001b[39;49m\u001b[11;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31mlobal team information. \u001b[39;49m\u001b[11;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mglobal team information.\u001b[39;49m\u001b[11;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\u001b[?25l        \u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[A\u001b[23;36H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\n\u001b[?25l        \u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[A\u001b[23;36H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;13H\r\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[16;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31m2\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mv\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[16;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[16;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[24;1H\u001b[K\u001b[18d\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   43% L217\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\u001b[?25l\u001b[33minfo2\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[17;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[17;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[3;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[4;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[5;64H\u001b[34m\u001b[40mBlue\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[8d\b\b\u001b[3;3H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[A |\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r |\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;3H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;3H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;3H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\u001b[24d\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 84, in run\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 265, in handle_input\r\n    alerts, i1, i2, i3 = self.world.pump_info()\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 222, in pump_info\r\n    t = self.grid.tile_at(self.action[0])\r\nTypeError: tile_at() takes exactly 3 arguments (2 given)\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n            \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[K\r\n            \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n            \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[K\r\n            \u001b[33ma.time\u001b[39;49m = 50\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[K\r\n            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n        \u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 1 is global team information.                                    \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo1\u001b[39;49m = [ (\u001b[32m\"Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"w!\"\u001b[39;49m)]\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[K\r\n            info1.append( (t.name, t.color) )\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo2\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo3\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0])\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   43% L217  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[17;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\r\n\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   43% L222\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[22;13H\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l0\n\b\b\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[K\u001b[3;13Hinfo1.append( (t.name, t.color) )\r\n\u001b[K\n\t\u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\t\u001b[33minfo3\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\r\n\t    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0])\r\n\t    \u001b[33mu\u001b[39;49m = t.unit\u001b[K\u001b[14;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\n\b\u001b[33mcol\u001b[39;49m = u.team.color\r\n\t        \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n\t                 (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[18;26H(\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,col)]\r\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\r\n\u001b[K\u001b[23;30H\u001b[7m5% L223\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25lelf\u001b[1P\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ltion[0])\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lion[0])\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lon[0])\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln[0])\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[0])\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l0])\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l])\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[12;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[12;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[3;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[4;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[5;64H\u001b[34m\u001b[40mBlue\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[8d\b\b\u001b[3;3H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[A |\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r |\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[20;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mDEF +?\u001b[21;64HHP 100%\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;5H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;6H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;7H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;9H+------+\u001b[13;5H\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[14;9H|Cancel|\u001b[15;9H+------+\u001b[A\b\u001b[12;9H\u001b[32m\u001b[40m........\u001b[13;9H........\u001b[14;9H........\u001b[15;9H........\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1m\u001b[30m\u001b[40mL\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\u001b[24d\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[K\r\n            info1.append( (t.name, t.color) )\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo2\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo3\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\r\n            \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n            \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n                \u001b[33mcol\u001b[39;49m = u.team.color\u001b[K\r\n                \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                         (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[K\r\n                         (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,col)]\u001b[K\r\n\u001b[K\n\u001b[K\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[K\r\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   45% L223  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[12;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\t\u001b[?25lNon\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\t\u001b[24;1H\u001b[?25lAuto-saving...\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;17H\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[9;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[9;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[3;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[4;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[5;64H\u001b[34m\u001b[40mBlue\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[8d\b\b\u001b[3;3H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[A |\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r |\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;3H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[20;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mDEF +?\u001b[21;64HHP 100%\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;5H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;6H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;3H\u001b(B\u001b[0m\u001b[32m\u001b[40m.....\u001b[15;4H...\u001b[16d\b\b.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;8H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;5H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;6H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;7H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;9H+------+\u001b[13;5H\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[14;9H|Cancel|\u001b[15;9H+------+\u001b[A\b\u001b[12;9H\u001b[32m\u001b[40m........\u001b[13;9H........\u001b[14;9H........\u001b[15;9H........\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1m\u001b[30m\u001b[40mL\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\u001b[24d\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[K\r\n            info1.append( (t.name, t.color) )\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo2\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\r\n            \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n            \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n                \u001b[33mcol\u001b[39;49m = u.team.color\u001b[K\r\n                \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                         (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[K\r\n                         (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,col)]\u001b[K\r\n\u001b[K\n\u001b[K\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[K\r\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   45% L220  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[9;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\t\u001b[31m# Get intel from the world's information method.                        \u001b[39;49m\r\n\t\u001b[33malerts\u001b[39;49m, \u001b[33mi1\u001b[39;49m, \u001b[33mi2\u001b[39;49m, \u001b[33mi3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (info,buff) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m ((i1,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1),(i2,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2),(i3,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3)):\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m info:\u001b[K\r\n\t        buff.clear()\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s,c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info\u001b[11;13H        buff.write(s,c)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+8)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+16)\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[23;15H\u001b[7m\u001b[1mrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   89% L271\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m69\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l :\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l :\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l :\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lN:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mI-search: \u001b[39;49m\u001b[8;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;58H\u001b[?25l\u001b[7m Isearch) \u001b[0m\u001b[39;49m\u001b[27m\u001b[8;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24;1H\u001b[?25lQuit\u001b[K\u001b[23;58H\u001b[7m) --------\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[8;32H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[8;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[8;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[3;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[4;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[5;64H\u001b[34m\u001b[40mBlue\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[8d\b\b\u001b[3;3H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[A |\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r |\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4G\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;5H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b[14d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[14d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[20;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mDEF +?\u001b[21;64HHP 100%\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;5H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;6H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H+------+\u001b[13;5H\u001b[32m\u001b[40m..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[14;8H|Cancel|\u001b[15;8H+------+\u001b[19;64H         \u001b[20;64H      \u001b[21;64H       \u001b[14;15H\u001b[12;8H\u001b[32m\u001b[40m........\u001b[13;8H........\u001b[14;8H........\u001b[15;8H........\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;7H\u001b(B\u001b[0;1m\u001b[30m\u001b[40mL\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;8H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;9H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;9H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;9H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;9H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;9H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;9H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;9H+----------+\u001b[7;9H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[8;9H|End Turn  |\u001b[9;9H|Undo      |\u001b[10;9H|Start Over|\u001b[11;9H+----------+\u001b[A\b\u001b[7;10HBack\u001b[8;10H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[10;20H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;10HEnd Turn\u001b[9;10H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mUndo\u001b[10;20H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;9H\u001b[32m\u001b[40m............\u001b[7;9H............\u001b[8;9H............\u001b[9;9H............\u001b[10;9H............\u001b[11;9H............\u001b[13;5H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;8H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;8H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;8H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;8H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;8H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[20;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mDEF +?\u001b[21;64HHP 100%\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;5H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;6H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;7H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;9H+------+\u001b[13;5H\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[14;9H|Cancel|\u001b[15;9H+------+\u001b[19;64H         \u001b[20;64H      \u001b[21;64H       \u001b[14;16H\u001b[12;9H\u001b[32m\u001b[40m........\u001b[13;9H........\u001b[14;9H........\u001b[15;9H........\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n        \u001b[31m# Get intel from the world's information method.                        \u001b[39;49m\r\n\u001b[A\n        \u001b[33malerts\u001b[39;49m, \u001b[33mi1\u001b[39;49m, \u001b[33mi2\u001b[39;49m, \u001b[33mi3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info()\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (info,buff) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m ((i1,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1),(i2,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2),(i3,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3)):\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m info \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m:\u001b[K\r\n                buff.clear()\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s,c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info:\u001b[K\r\n                    buff.write(s,c)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+8)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+16)\u001b[K\r\n        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   89% L268  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[8;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu:\u001b[K\u001b[3;13H\u001b[33mq\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu[0].handle_input(c)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m q:\u001b[K\r\n\t        \u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(q)\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mpos\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.handle_input(c)\u001b[9;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m pos:\u001b[K\n\b\b\b\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\r\n\u001b[K\n\t\u001b[31m# If the rules were processed, figure out if we need to display         \u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\u001b[16;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\u001b[17;5H            \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\u001b[23;30H\u001b[7m2% L263\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\t\u001b[31m# Get intel from the world's information method.                        \u001b[39;49m\r\n\t\u001b[33malerts\u001b[39;49m, \u001b[33mi1\u001b[39;49m, \u001b[33mi2\u001b[39;49m, \u001b[33mi3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info()\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (info,buff) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m ((i1,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1),(i2,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2),(i3,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3)):\u001b[8;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m info \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m:\u001b[K\u001b[9;13H    buff.clear()\r\n\t\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s,c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info:\u001b[K\u001b[11;21Hbuff.write(s,c)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+8)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+16)\u001b[K\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\n\b\b\b\b\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l\u001b[33mr\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.process(pos)\u001b[K\u001b[4;11H\u001b[31mIf the rules were processed, figure out if we need to display\u001b[39;49m\r\n\t\u001b[31m# a menu or highlight tiles.                                            \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = []\u001b[K\r\n\t\t\br == \u001b[32m\"coord\"\u001b[39;49m:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.blink = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices\u001b[10;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"menu\"\u001b[39;49m:\u001b[K\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.menu = widgets.Menu(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.choices),cx,cy\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m r == \u001b[32m\"undo\"\u001b[39;49m:\r\n\t\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\u001b[15;68H\u001b[4P\u001b[15;5H\u001b[4@\u001b[15;11H\u001b[31mGet intel from the world's information method.               \u001b[39;49m\u001b[16;5H    \u001b[33malerts\u001b[39;49m, \u001b[33mi1\u001b[39;49m, \u001b[33mi2\u001b[39;49m, \u001b[33mi3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info()\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (info,buff) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m ((i1,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1),(i2,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2),(i3,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3)):\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m info \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m:\u001b[K\r\n\t        buff.clear()\u001b[K\r\n\t        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s,c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info:\u001b[K\r\n\t            buff.write(s,c)\n\b\b\b\b\b\b\u001b[7m5% L261\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m70\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\t\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[4;11H\u001b[31mGet intel from the world's information method.               \u001b[39;49m\r\n\t\u001b[33malerts\u001b[39;49m, \u001b[33mi1\u001b[39;49m, \u001b[33mi2\u001b[39;49m, \u001b[33mi3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (info,buff) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m ((i1,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1),(i2,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2),(i3,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3)):\r\n\t\t\binfo \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m:\r\n\t\tbuff.clear()\u001b[K\u001b[10;13H    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s,c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info:\r\n\t\t    buff.write(s,c)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[14;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[15;5H\u001b[4P\t\b\b\u001b[31mx,y and w,h of the viewport in the terminal, and the cx,cy of\u001b[39;49m\u001b[4@\u001b[31m the\u001b[39;49m\u001b[16;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+8)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+16)\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\n\b\b\b\b\u001b[7m9% L272\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[K\u001b[3;13Hinfo1.append( (t.name, t.color) )\r\n\u001b[K\n\t\u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\t\u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0\u001b[11;13H\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[13;13H\u001b[33mu\u001b[39;49m = t.unit\u001b[14;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\u001b[15;5H            \u001b[33mcol\u001b[39;49m = u.team.color\u001b[K\u001b[16;5H            \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\u001b[17;5H                     (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\r\n\t                 (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,col)]\r\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[K\r\n\u001b[K\n\t\t\b\b\u001b[7m\u001b[1mame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   45% L220\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   45% L222\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;13H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[12;13Hx,y\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;13H\u001b[?25lt\n\bu\n\n\tcol\n\b\b\binfo3\u001b[11;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[12;13H\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m\u001b[11;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[13;13H\u001b[?25l\u001b[33mt\u001b[39;49m\n\b\u001b[33mu\u001b[39;49m\n\n\t\u001b[33mcol\u001b[39;49m\n\b\b\b\u001b[33minfo3\u001b[39;49m\u001b[11;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;38H\b\b\b\b\u001b[?25l 1:\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l 1:\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l> 1:\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[12;13H\u001b[4@\t\u001b[12;37H\b\b\u001b[?25l]\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[24d\u001b[?25lMark set\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[12;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\r\n                \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\u001b[23;36H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11d\u001b[11;13H\u001b[4P\u001b[C\t\t\t\b\b\u001b[?25l]\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l0]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[3;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[4;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[5;64H\u001b[34m\u001b[40mBlue\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[8d\b\b\u001b[3;3H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[A |\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r |\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[20;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mDEF +?\u001b[21;64HHP 100%\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;5H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;6H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;7H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;9H+------+\u001b[13;5H\u001b[32m\u001b[40m...\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[14;9H|Cancel|\u001b[15;9H+------+\u001b[A\b\u001b[12;9H\u001b[32m\u001b[40m........\u001b[13;9H........\u001b[14;9H........\u001b[15;9H........\u001b[19;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[20;64H      \u001b[21;64H       \u001b[22;79H\u001b[12;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1m\u001b[30m\u001b[40mL\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;6H+----------+\u001b[7;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[8;6H|End Turn  |\u001b[9;6H|Undo      |\u001b[10;6H|Start Over|\u001b[11;6H+----------+\u001b[A\b\u001b[7;7HBack\u001b[8;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[10;17H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;68H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40m1\u001b[6;6H\u001b(B\u001b[0m\u001b[32m\u001b[40m............\u001b[7;6H......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;6H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mHello World: Day 1\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;6H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[10;6H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[11;6H\u001b[32m\u001b[40m............\u001b[13;8H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;6H+----------+\u001b[7;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[8;6H|End T\u001b[9;6H|Undo \u001b[10;6H|Start\u001b[11;6H+----------+\u001b[8;31H\u001b[6;6H\u001b[32m\u001b[40m............\u001b[7;6H......\u001b[8;6H......\u001b[9;6H......\u001b[10;6H......\u001b[11;6H............\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H...\u001b[10d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[20;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mDEF +?\u001b[21;64HHP 100%\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[8;3H....\u001b[9;3H...\u001b[10d\b\b.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;6H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6G\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H...\u001b[10d\b\b.\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[32m\u001b[40m.\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[10d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H...\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b[32m\u001b[40m.\u001b[9d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[10;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[11;5H|Cancel|\u001b[12;5H+------+\u001b[A\b\u001b[9;5H\u001b[32m\u001b[40m........\u001b[10;5H........\u001b[11;5H........\u001b[12;5H........\u001b[19;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[20;64H      \u001b[21;64H       \u001b[22;79H\u001b[10;4H\u001b(B\u001b[0;1m\u001b[30m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[K\r\n            info1.append( (t.name, t.color) )\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo2\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\r\n            \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\u001b[K\r\n                \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n            \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n                \u001b[33mcol\u001b[39;49m = u.team.color\u001b[K\r\n                \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                         (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[K\r\n                         (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,col)]\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   45% L222  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[11;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;21r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[8;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   45% L218\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[5;5H\u001b[4P\t\b\b\u001b[31m                                             \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpump_info\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[8;13H\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[K\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[12;13H\u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[13;13H\u001b[33ma.time\u001b[39;49m = 50\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\u001b[K\n\t\u001b[31m# Info 1 is global team information.                                    \u001b[39;49m\r\n\t\u001b[33minfo1\u001b[39;49m = [ (\u001b[32m\"Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"w!\"\u001b[39;49m)]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[K\u001b[22;13Hinfo1.append( (t.name, t.color) )\u001b[23;30H\u001b[7m1% L214\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m09\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m199\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[24;1H\u001b[?25lAuto-saving...\u001b[6;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[6;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[6;24H\b\u001b[?25l,):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l ):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l():\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;13H\u001b[?25lt\n\bm1\n\b\bm2\n\b\bw\n\ba\n\ba.time\r\n\n\n\treport\r\n\n\n\n\tinfo1\u001b[6;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l):\r\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;30H\u001b[8;13H\u001b[?25l\u001b[33mt\u001b[39;49m\n\b\u001b[33mm1\u001b[39;49m\n\b\b\u001b[33mm2\u001b[39;49m\n\b\b\u001b[33mw\u001b[39;49m\n\b\u001b[33ma\u001b[39;49m\n\b\u001b[33ma.time\u001b[39;49m\r\n\n\n\t\u001b[33mreport\u001b[39;49m\r\n\n\n\n\t\u001b[33minfo1\u001b[39;49m\u001b[6;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l):\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l):\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l):\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l):\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l ):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[6;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[6;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[3;13Hinfo1.append( (t.name, t.color) )\u001b[5;52H\u001b[4P\u001b[5;5H\u001b[4@\u001b[5;11H\u001b[31mInfo 2 is for the intel on the hovering tile.\u001b[39;49m\u001b[6;5H    \u001b[33minfo2\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\t\u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\u001b[12;13H\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\u001b[13;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\u001b[14;13H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\u001b[15;13H\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\r\n\t    \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\n\b\u001b[33mcol\u001b[39;49m = u.team.color\r\n\t        \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n\t                 (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[K\r\n\t                 (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,col)]\r\n\u001b[K\u001b[23;30H\u001b[7m5% L213\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;19H\b\b\b\b\b\r\t\u001b[?25lx,y  \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[K\r\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[33mt\u001b[39;49m= \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lOverwrite mode enabled\u001b[7;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;58H\u001b[?25l\u001b[7m Ovwrt) \u001b[0m\u001b[39;49m\u001b[27m\u001b[7;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;16H\u001b[?25ldisabled\u001b[7;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;58H\u001b[?25l\u001b[7m) ------\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;12H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[7;12H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25lt \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[9;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;13H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\b\u001b[?25lx):\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly):\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[7;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[7;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;36H\b\u001b[K\u001b[1;22r\u001b[9;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33mu\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[K\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[8;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[8;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[8;19H\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\r\n\u001b[K\n\t\u001b[31m# Get intel from the world's information method.                        \u001b[39;49m\r\n\t\u001b[33malerts\u001b[39;49m, \u001b[33mi1\u001b[39;49m, \u001b[33mi2\u001b[39;49m, \u001b[33mi3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info()\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (info,buff) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m ((i1,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1),(i2,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2),(i3,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3)):\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m info \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m:\r\n\t\tbuff.clear()\r\n\t\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s,c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info:\r\n\t            buff.write(s,c)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\r\n\u001b[K\u001b[14;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[15;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[17;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+8)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+16)\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.viewport\u001b[K\u001b[23;15H\u001b[7m\u001b[1mrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   89% L272\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m69\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\r\t\u001b[8@\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;65H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[4;13H\u001b[4P\u001b[4;77H\u001b[?25l\u001b[31m    \u001b[39;49m\r\n\u001b[4;61H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[4P\u001b[4;77H\u001b[?25l\u001b[31m    \u001b[39;49m\r\n\u001b[4;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[6;1H\u001b[1L\u001b[1;24r\u001b[5;1H\u001b[K\n\u001b[?25l        \u001b[33malerts\u001b[39;49m, \u001b[33mi1\u001b[39;49m, \u001b[33mi2\u001b[39;49m, \u001b[33mi3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info()\u001b[K\u001b[23;36H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\u001b[?25l\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[23d\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[23d\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mI-search: \u001b[39;49m\u001b[5;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;58H\u001b[?25l\u001b[7m Isearch) \u001b[0m\u001b[39;49m\u001b[27m\u001b[5;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24;1H\u001b[?25lQuit\u001b[K\u001b[23;58H\u001b[7m) --------\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[5;32H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[5;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[5;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;52H\b\b\u001b[C\u001b[?25lc)\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly)\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/grid.py...\u001b[6;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/grid.py\u001b[K\u001b[6;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n                \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n        \u001b[31m# Get intel from the world's information method.                        \u001b[39;49m\r\n\u001b[A\n        \u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\u001b[K\r\n        \u001b[33malerts\u001b[39;49m, \u001b[33mi1\u001b[39;49m, \u001b[33mi2\u001b[39;49m, \u001b[33mi3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info(cx,cy)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\u001b[K\r\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (info,buff) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m ((i1,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1),(i2,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2),(i3,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3)):\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m info \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m:\u001b[K\r\n                buff.clear()\u001b[K\r\n                \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s,c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info:\u001b[K\r\n                    buff.write(s,c)\u001b[K\r\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\n    \u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[A\n    \u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[A\n    \u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+8)\u001b[K\r\n        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+16)\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   88% L266  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[6;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lC-x\u001b[5;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l-\u001b[5;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;4H\u001b[?25l b\u001b[5;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[K\u001b[3;13Hinfo1.append( (t.name, t.color) )\r\n\u001b[K\n\t\u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\r\n\t\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\u001b[K\n\u001b[K\n\t\u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\t\u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[14;13H\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[15;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\u001b[K\u001b[16;5H            \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\u001b[17;5H        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\u001b[18;5H        \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n\t        \u001b[33mcol\u001b[39;49m = u.team.color\u001b[K\r\n\t        \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\r\n\t                 (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[K\u001b[23;15H\u001b[7m\u001b[1mame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   45% L219\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\t\u001b[?25linfo3\n\n\bx,y\n\n\tx,y\u001b[17;13Ht\n\bu\n\n\tcol\n\b\b\binfo3\u001b[8d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[8;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[8;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\t\u001b[?25l\u001b[33minfo3\u001b[39;49m\n\n\b\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m\n\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m\u001b[17;13H\u001b[33mt\u001b[39;49m\n\b\u001b[33mu\u001b[39;49m\n\n\t\u001b[33mcol\u001b[39;49m\n\b\b\b\u001b[33minfo3\u001b[39;49m\u001b[8;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[7;35H\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   45% L220\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;21H\r\t\t\u001b[?25lNon\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\t\u001b[?25l[\r\n\tt\u001b[6;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\r\n\t\u001b[33mt\u001b[39;49m\u001b[A\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[6;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[6;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;13H\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;35H\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[8;1H\u001b[K\n\t\u001b[?25l\u001b[33mu\u001b[39;49m = t.unit(x,y)\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\r\n\u001b[K\u001b[23;36H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\r\u001b[K\t\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\t\u001b[?25l\u001b[33mtcol\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\t\b\u001b[?25l\u001b[32m\"                                                                \u001b[39;49m\r\n\u001b[32m        u = t.unit(x,y)                                                         \u001b[39;49m\r\n\u001b[8;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n        \u001b[33mu\u001b[39;49m = t.unit(x,y)\u001b[K\u001b[8;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\u001b[?25l        \u001b[33mu\u001b[39;49m = t.unit(x,y)\u001b[K\u001b[23;35H\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\n\u001b[?25l        \u001b[33mu\u001b[39;49m = t.unit(x,y)\u001b[K\u001b[23;36H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;13H\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\u001b[?25l\u001b[33mtcol\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   44% L222\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[?25l        \u001b[33mu\u001b[39;49m = t.unit(x,y)\u001b[K\u001b[23;36H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;13H\r\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l+\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[33minfo2\u001b[39;49m +=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[13;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;13H\r\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[12;5H\n\n\t\u001b[?25lu\u001b[20;9Hinfo3\n\n\bx,y\u001b[12;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[23;36H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\t\u001b[?25l\u001b[33mu\u001b[39;49m\u001b[20;9H\u001b[33minfo3\u001b[39;49m\n\n\b\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m\u001b[12;6H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[4@\r\t\u001b[1@\r\u001b[C\t\u001b[C\u001b[1@\u001b[12;3H\u001b[12;11H\u001b[1@\u001b[12;4H\u001b[12;12H\u001b[1@\u001b[12;5H\u001b[12;13H\u001b[1@\u001b[12;6H\u001b[12;14H\u001b[1@\r\t\b\b\t\t\b\b\u001b[1@\r\t\b\t\t\b\u001b[1@\r\t\t\u001b[1@\b\b\b\b\b\b\b\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;19H\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[?25l                 ]\u001b[K\u001b[23;36H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\t\u001b[?25lu\u001b[21;9Hinfo3\u001b[11;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\r\n\n\n\n\t\u001b[?25l\u001b[33mu\u001b[39;49m\u001b[21;9H\u001b[33minfo3\u001b[39;49m\u001b[11;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\t\u001b[?25lu\u001b[21;9Hinfo3\u001b[12;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                           \u001b[39;49m\r\n\u001b[32m                 ]                                                              \u001b[39;49m\r\n\u001b[12;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        u = t.unit(x,y)                                                         \u001b[39;49m\r\n\u001b[32m        if u:                                                                   \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        # Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[32m        info3 = []                                                              \u001b[39;49m\r\n\u001b[32m        if len(self.action) > 0:                                                \u001b[39;49m\r\n\u001b[12;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mD\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mE\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mF\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m+\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m?\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n                 ]\u001b[K\u001b[12;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;35H\r\n\n\u001b[K\n\u001b[?25l        \u001b[33mu\u001b[39;49m = t.unit(x,y)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n        \u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n        \u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[12;52H\u001b[?25l]\r\n\u001b[K\u001b[22d            \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;51H\u001b[?25l]\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;50H\u001b[?25l]\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l]\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\u001b[?25l]\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[?25l]\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;46H\u001b[?25l]\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;45H\u001b[?25l]\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;44H\u001b[?25l]\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;43H\u001b[?25l]\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[?25l]\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l]\u001b[K\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l]\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\u001b[?25l]\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[?25l]\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;37H\u001b[?25l]\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l]\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[12;36H\b\b\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[19;1H\u001b[1L\u001b[1;24r\u001b[19;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   44% L227\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;13H\r\t\u001b[16;13H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25linf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[16;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[16;16H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[16;16H\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l+\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\u001b[?25l\u001b[33minfo2\u001b[39;49m +=\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l[\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;9H\u001b[?25linfo3\u001b[16;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l ]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;9H\u001b[?25l\u001b[33minfo3\u001b[39;49m\u001b[16;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\n\t\u001b[?25l\u001b[33mu\u001b[39;49m = t.unit(x,y)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[33minfo2\u001b[39;49m += [ (]\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\t\u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\t\u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\u001b[12;13H\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\u001b[13;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\r\n\t        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[16;13H\u001b[33mu\u001b[39;49m = t.unit\u001b[K\u001b[17;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\n\b\u001b[33mcol\u001b[39;49m = u.team.color\r\n\t\t\u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\r\n\t                 (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[K\r\n\t                 (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,col)]\r\n\u001b[K\u001b[23;30H\u001b[7m6% L234\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;9H\u001b[?25linfo3\n\n\bx,y\n\n\tx,y\u001b[15;13Ht\n\bu\n\n\tcol\n\b\b\binfo3\u001b[5;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[6;1H\u001b[1L\u001b[1;24r\u001b[5;1H\u001b[K\n\u001b[?25l            \u001b[33minfo2\u001b[39;49m += [ (u.name,c]\u001b[K\u001b[23;36H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[5;13H\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\u001b[?25l\u001b[33mucol\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l]\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l+]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"]                                          \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[6;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m!]\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m]\u001b[K\r\n\u001b[K\u001b[6;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)]\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\u001b[?25l,]\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[6;42H\u001b[K\r\n\u001b[?25l]\n\b\u001b[K\u001b[23;36H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12@\u001b[7;13H\u001b[1@\r\u001b[C\u001b[7;14H\u001b[1@\u001b[7;3H\t\t\b\b\u001b[1@\u001b[7;4H\t\t\b\u001b[1@\u001b[7;5H\t\t\u001b[1@\u001b[7;6H\u001b[7;18H\u001b[1@\u001b[7;7H\u001b[7;19H\u001b[1@\r\t\b\u001b[7;20H\u001b[1@\r\t\u001b[7;21H\u001b[1@\u001b[7;10H\u001b[7;22H\u001b[1@\u001b[7;11H\t\t\b\b\u001b[1@\u001b[7;12H\t\t\b\u001b[1@\u001b[7;13H\t\t\u001b[1@\u001b[7;14H\u001b[7;26H\u001b[1@\u001b[7;15H\u001b[7;27H\u001b[1@\r\t\t\b\u001b[7;28H\u001b[1@\r\t\t\u001b[7;29H\u001b[1@\u001b[7;18H\u001b[7;30H\u001b[1@\u001b[7;19H\t\t\b\b\u001b[1@\u001b[7;20H\t\t\b\u001b[1@\u001b[7;21H\t\t\u001b[1@\u001b[7;22H\u001b[7;34H\u001b[1@\u001b[7;23H\u001b[7;35H\u001b[1@\r\t\t\t\b\u001b[7;35H\u001b[1P\r\t\t\t\b\u001b[7;34H\u001b[1P\r\t\t\t\b\t\t\u001b[1P\r\t\t\t\b\t\t\b\u001b[1P\r\t\t\t\b\t\t\b\b\u001b[1P\r\t\t\t\b\u001b[7;30H\u001b[1P\b\b\b\b\b\b\u001b[7;29H\u001b[1P\b\b\b\b\b\u001b[7;28H\u001b[1P\b\b\b\b\u001b[7;27H\u001b[1P\b\b\b\u001b[7;26H\u001b[1P\b\b\t\u001b[1P\b\u001b[12;9H\u001b[?25l\u001b[33minfo3\u001b[39;49m\n\n\b\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m\n\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m\u001b[17;13H\u001b[33mt\u001b[39;49m\n\b\u001b[33mu\u001b[39;49m\n\n\t\u001b[33mcol\u001b[39;49m\n\b\b\b\u001b[33minfo3\u001b[39;49m\u001b[7;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l( ]\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l) ]\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25lu) ]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.) ]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh) ]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l) ]\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l) ]\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l) ]\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\") ]                                                    \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mH) ]\u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mP) ]\u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m ) ]\u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[32m        # Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[32m        info3 = []                                                              \u001b[39;49m\r\n\u001b[32m        if len(self.action) > 0:                                                \u001b[39;49m\r\n\u001b[32m            x,y = self.action[0]                                                \u001b[39;49m\r\n\u001b[32m            if len(self.action) > 1:                                            \u001b[39;49m\r\n\u001b[32m                x,y = self.action[1]                                            \u001b[39;49m\r\n\u001b[32m            t = self.grid.tile_at(x,y)                                          \u001b[39;49m\r\n\u001b[32m            u = t.unit                                                          \u001b[39;49m\r\n\u001b[32m            if u:                                                               \u001b[39;49m\r\n\u001b[32m                col = u.team.color                                              \u001b[39;49m\r\n\u001b[32m                info3 = [(u.name,col+\"\u001b[39;49m!\u001b[32m\"),                                      \u001b[39;49m\r\n\u001b[32m                         (\"\u001b[39;49mDEF +?\u001b[32m\",col),                                        \u001b[39;49m\r\n\u001b[7;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m%) ]\u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md) ]\u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m%) ]\u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m%) ]\u001b[39;49m\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m) ]\u001b[K\r\n\u001b[K\u001b[7;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\n\u001b[K\n\u001b[?25l        \u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n        \u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\r\n            \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\u001b[K\r\n                \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n            \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n                \u001b[33mcol\u001b[39;49m = u.team.color\u001b[K\r\n                \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                         (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[K\u001b[7;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l%) ]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu) ]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.) ]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh) ]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp) ]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,) ]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu) ]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc) ]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo) ]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll) ]\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\t\u001b[?25l\u001b[1@(\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"(u.name,ucol+\"\u001b[39;49m!\u001b[32m\"),                                     \u001b[39;49m\r\n\u001b[32m                       (\"\u001b[39;49mHP %d%%\u001b[32m\"%u.hp,ucol) ]                                  \u001b[39;49m\r\n\u001b[6;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m(u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                       (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,ucol) ]\u001b[K\u001b[6;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"(u.name,ucol+\"\u001b[39;49m!\u001b[32m\"),                                  \u001b[39;49m\r\n\u001b[32m                       (\"\u001b[39;49mHP %d%%\u001b[32m\"%u.hp,ucol) ]                                  \u001b[39;49m\r\n\u001b[6;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m(u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                       (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,ucol) ]\u001b[K\u001b[6;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;9H\u001b[?25linfo3\n\n\bx,y\n\n\tx,y\u001b[17;13Ht\n\bu\n\n\tcol\n\b\b\binfo3\u001b[6;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@)\r\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\u001b[?25l\u001b[1@,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[6;32H\u001b[K\r\n\u001b[?25l(u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                       (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,ucol) ]\u001b[K\u001b[23;36H\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\t\b\u001b[1@\t\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\t\b\u001b[1@\t\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\t\b\u001b[1@\t\r\t\u001b[16P\u001b[24;1H\u001b[?25lAuto-saving...\u001b[7;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[7;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13d\u001b[?25l\u001b[33minfo3\u001b[39;49m\n\n\b\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m\n\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m\u001b[18;13H\u001b[33mt\u001b[39;49m\n\b\u001b[33mu\u001b[39;49m\n\n\t\u001b[33mcol\u001b[39;49m\n\b\b\b\u001b[33minfo3\u001b[39;49m\u001b[7;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[7;9H\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\t\b\u001b[1@\t\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\u001b[C\u001b[1@\t\b\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[7;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[7;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 84, in run\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 266, in handle_input\r\n    alerts, i1, i2, i3 = self.world.pump_info(cx,cy)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 225, in pump_info\r\n    u = t.unit(x,y)\r\nTypeError: 'NoneType' object is not callable\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n\u001b[K\n        \u001b[33mu\u001b[39;49m = t.unit(x,y)\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n            \u001b[33mucol\u001b[39;49m = u.team.color\u001b[K\r\n            \u001b[33minfo2\u001b[39;49m += [ (\u001b[32m\"\"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m),\u001b[K\r\n                       (u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                       (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,ucol) ]\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n        \u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\r\n            \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\u001b[K\r\n                \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n            \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n                \u001b[33mcol\u001b[39;49m = u.team.color\u001b[K\r\n                \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   46% L224  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[2;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[?25lx,y)\u001b[K\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,y)\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly)\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[3;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[3;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\r\n\t    info1.append( (t.name, t.color) )\r\n\u001b[K\n\t\u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n\t\u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\n\b\b\b\b\b\b\u001b[33mtcol\u001b[39;49m = t.team.color\r\n\t\u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\r\n\t           (\u001b[32m\"DEF +?\"\u001b[39;49m,tcol)]\u001b[K\r\n\u001b[K\n\t\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\n\b\u001b[33mucol\u001b[39;49m = u.team.color\u001b[K\u001b[17;13H\u001b[33minfo2\u001b[39;49m += [ (\u001b[32m\"\"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m),\u001b[K\u001b[18;13H           (u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\u001b[19;13H           (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,ucol) ]\r\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;30H\u001b[7m4% L223\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;5H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[1;22r\u001b[14;1H\u001b[1M\u001b[1;24r\u001b[13;9H\u001b[?25l\u001b[33mu\u001b[39;49m = t.unit\u001b[22;1H        \u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[A\u001b[23;36H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[12;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[12;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[3;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[4;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[5;64H\u001b[34m\u001b[40mBlue\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[11;64Hgrass\u001b[12;64HDEF +?\u001b[8;31H\u001b[3;3H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[A |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[13;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[14;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100%\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b[13;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[14;64H       \u001b[8;31H\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;5H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[13;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[14;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100%\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[14;64H       \u001b[22;79H\u001b[8;4H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[13;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[14;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100%\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b[13;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[14;64H       \u001b[22;79H\u001b[11;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[13;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[14;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100%\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[14;64H       \u001b[22;79H\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[13;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[14;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100%\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[20;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mDEF +?\u001b[21;64HHP 100%\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b[13;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[14;64H       \u001b[19;73H\u001b[11;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[13;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[14;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100%\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[13;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[14;3H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.....\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       \u001b[15;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[20;64H      \u001b[21;64H       \u001b[22;79H\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[13;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[14;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100%\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[20;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mDEF +?\u001b[21;64HHP 100%\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b[13;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[14;64H       \u001b[19;73H\u001b[11;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H+------+\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[13;5H\u001b[32m\u001b[40m.\u001b[13;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[14;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100%\u001b[11;13H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H\u001b[32m\u001b[40m........\u001b[10;6H........\u001b[11;6H........\u001b[12;6H........\u001b[19;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[20;64H      \u001b[21;64H       \u001b[22;79H\u001b[9;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;1m\u001b[30m\u001b[40mL\u001b[13;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[14;64H       \u001b[22;79H\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[13;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[14;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100%\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;1m\u001b[30m\u001b[40mL\u001b[13;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[14;64H       \u001b[22;79H\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;6H+----------+\u001b[7;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[8;6H|End Turn  |\u001b[9;6H|Undo      |\u001b[10;6H|Start Over|\u001b[11;6H+----------+\u001b[A\b\u001b[7;7HBack\u001b[8;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[10;17H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;7HEnd Turn\u001b[9;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mUndo\u001b[10;17H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[9;7H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40mUndo\u001b[10;17H\u001b[3;68H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40m1\u001b[6;6H\u001b(B\u001b[0m\u001b[32m\u001b[40m............\u001b[7;6H......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;6H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mHello World: Day 1\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;6H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[10;5H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[11;6H\u001b[32m\u001b[40m............\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[13;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[14;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100%\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H...\u001b[10d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[20;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mDEF +?\u001b[21;64HHP 100%\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H...\u001b[10d\b\b.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H...\u001b[10d\b\b.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[14;64H       \u001b[8;31H\u001b[4;4H\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m..\u001b[8;3H....\u001b[9;3H...\u001b[10d\b\b.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[32m\u001b[40m..\u001b[8;3H....\u001b[9;3H...\u001b[10d\b\b.\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\u001b[24d\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[K\r\n            info1.append( (t.name, t.color) )\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n        \u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\r\n            \u001b[33mtcol\u001b[39;49m = t.team.color\u001b[K\r\n        \u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\u001b[K\r\n                   (\u001b[32m\"DEF +?\"\u001b[39;49m,tcol)]\u001b[K\r\n        \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n            \u001b[33mucol\u001b[39;49m = u.team.color\u001b[K\r\n            \u001b[33minfo2\u001b[39;49m += [ (\u001b[32m\"\"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m),\u001b[K\r\n                       (u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                       (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,ucol) ]\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n        \u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   44% L223  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[12;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\u001b[?25l\u001b[32m \"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m),\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[16;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[16;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[3;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[4;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[5;64H\u001b[34m\u001b[40mBlue\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[11;64Hgrass\u001b[12;64HDEF +?\u001b[8;31H\u001b[3;3H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[A |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100%\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H       \u001b[22;79H\u001b[8;4H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100%\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[15;64H       \u001b[22;79H\u001b[11;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100%\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H       \u001b[22;79H\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100%\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[15;64H       \u001b[22;79H\u001b[11;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100%\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H       \u001b[22;79H\u001b[8;4H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100%\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[20;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mDEF +?\u001b[21;64HHP 100%\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[15;64H       \u001b[19;73H\u001b[11;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H+------+\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[11;4H\u001b[32m\u001b[40m..\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Cancel|\u001b[12;3H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[13;3H\u001b[32m\u001b[40m......\u001b[14;3H.....\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;4H\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[15;64H\u001b[34m\u001b[40mHP 100%\u001b[16;5H\u001b[32m\u001b[40m.\u001b[11;13H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H\u001b[32m\u001b[40m........\u001b[10;6H........\u001b[11;6H........\u001b[12;6H........\u001b[19;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[20;64H      \u001b[21;64H       \u001b[22;79H\u001b[9;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;1m\u001b[30m\u001b[40mL\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[15;64H       \u001b[22;79H\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100%\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H       \u001b[22;79H\u001b[7;5H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;6H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;7H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;8H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[K\r\n            info1.append( (t.name, t.color) )\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n        \u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\r\n            \u001b[33mtcol\u001b[39;49m = t.team.color\u001b[K\r\n        \u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\u001b[K\r\n                   (\u001b[32m\"DEF +?\"\u001b[39;49m,tcol)]\u001b[K\r\n        \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n            \u001b[33mucol\u001b[39;49m = u.team.color\u001b[K\r\n            \u001b[33minfo2\u001b[39;49m += [ (\u001b[32m\" \"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m),\u001b[K\r\n                       (u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                       (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,ucol) ]\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n        \u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[A\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   44% L227  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[16;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l(No changes need to be saved)\u001b[6;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\n\t\u001b[?25l\u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\t\u001b[33minfo3\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\r\n\t    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\r\n\t        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[10;13H\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\n\b\u001b[33mcol\u001b[39;49m = u.team.color\u001b[K\r\n\t        \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\r\n\t                 (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[15;13H             (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,col)]\r\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[K\u001b[20;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[21;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[22;5H\u001b[4P\t\b\b\u001b[31msupposed to set its camera's grid to the new one. \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[23;30H\u001b[7m7% L232\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[3;5H\u001b[4P\t\b\b\u001b[31msupposed to set its camera's grid to the new one. \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[13;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\n\b\b\b\b\u001b[7m51% L251\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;57H\u001b[4P\u001b[3;5H\u001b[4@\u001b[3;11H\u001b[?25l\u001b[31mInfo 3 is for the unit that is currently selected.\u001b[39;49m\u001b[4;5H    \u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\r\n\t    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\r\n\t        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[10;13H\u001b[33mu\u001b[39;49m = t.unit\u001b[11;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\u001b[12;5H            \u001b[33mcol\u001b[39;49m = u.team.color\u001b[K\u001b[13;5H            \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\r\n\t                 (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[K\r\n\t                 (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,col)]\r\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[K\r\n\u001b[K\u001b[20;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[22;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[23;29H\u001b[7m47\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\r\n\t    info1.append( (t.name, t.color) )\u001b[K\r\n\u001b[K\n\t\u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n\t\u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\n\b\b\b\b\b\b\u001b[33mtcol\u001b[39;49m = t.team.color\r\n\t\u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\r\n\t\t   (\u001b[32m\"DEF +?\"\u001b[39;49m,tcol)]\r\n\t\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\n\b\u001b[33mucol\u001b[39;49m = u.team.color\u001b[K\u001b[16;13H\u001b[33minfo2\u001b[39;49m += [ (\u001b[32m\" \"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m),\r\n\t\t\t\b(u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\r\n\t               (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,ucol) ]\r\n\n\u001b[K\n\u001b[K\u001b[22;57H\u001b[4P\u001b[22;5H\u001b[4@\u001b[22;11H\u001b[31mInfo 3 is for the unit that is currently selected.\u001b[39;49m\u001b[23;30H\u001b[7m4% L233\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[5;5H\u001b[4P\t\b\b\u001b[31m                                             \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpump_info\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[10;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[12;13H\u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\r\n\t    \u001b[33ma.time\u001b[39;49m = 50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[15;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# Info 1 is global team information.                                    \u001b[39;49m\r\n\t\u001b[33minfo1\u001b[39;49m = [ (\u001b[32m\"Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"w!\"\u001b[39;49m)]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\r\n\t    info1.append( (t.name, t.color) )\u001b[K\u001b[23;30H\u001b[7m0% L214\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\r\n\t\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(dx,dy)\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[6;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[13;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[18;13H\u001b[33matk_unit.hp\u001b[39;49m = 0\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[23;29H\u001b[7m36% L195\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[5;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpump_info\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[13;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[14;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# Info 1 is global team information.                                    \u001b[39;49m\r\n\t\u001b[33minfo1\u001b[39;49m = [ (\u001b[32m\"Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"w!\"\u001b[39;49m)]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[22;13Hinfo1.append( (t.name, t.color) )\u001b[23;29H\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[3;13Hinfo1.append( (t.name, t.color) )\u001b[5;52H\u001b[4P\u001b[5;5H\u001b[4@\u001b[5;11H\u001b[31mInfo 2 is for the intel on the hovering tile.\u001b[39;49m\u001b[6;5H    \u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\r\n\t\u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\n\b\b\b\b\b\b\u001b[33mtcol\u001b[39;49m = t.team.color\u001b[K\r\n\t\u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\u001b[K\u001b[12;13H       (\u001b[32m\"DEF +?\"\u001b[39;49m,tcol)]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\n\b\u001b[33mucol\u001b[39;49m = u.team.color\r\n\t    \u001b[33minfo2\u001b[39;49m += [ (\u001b[32m\" \"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m),\r\n\t               (u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\r\n\t\t\t\b(\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,ucol) ]\r\n\u001b[K\n\u001b[K\n\u001b[K\n\t\u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[23;30H\u001b[7m4% L213\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[3;13H\u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[4;13H\u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\r\n\t    \u001b[33ma.time\u001b[39;49m = 50\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\u001b[K\n\t\u001b[31m# Info 1 is global team information.                                    \u001b[39;49m\r\n\t\u001b[33minfo1\u001b[39;49m = [ (\u001b[32m\"Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"w!\"\u001b[39;49m)]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\r\n\t    info1.append( (t.name, t.color) )\r\n\u001b[K\n\t\u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n\t\u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\n\b\b\b\b\b\b\u001b[33mtcol\u001b[39;49m = t.team.color\r\n\t\u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\u001b[K\n\b\b\b\b\u001b[7m1% L212\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[16;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   41% L215\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[17;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;13H\r\t\u001b[?25l\u001b[32m\"                                                                       \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[16;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m        # Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\u001b[32m        info2 = []                                                              \u001b[39;49m\r\n\u001b[32m        t = self.grid.tile_at(x,y)                                              \u001b[39;49m\r\n\u001b[32m        tcol = \"\u001b[39;49mw\u001b[32m\"                                                              \u001b[39;49m\r\n\u001b[32m        if t.team:                                                              \u001b[39;49m\r\n\u001b[16;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\n\u001b[K\u001b[A\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                                    \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[16;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mA\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[16;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\r\n\n\u001b[?25l        \u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n        \u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n        \u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\u001b[16;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;13H\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[16;1H\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action:\r\n\u001b[K\u001b[23;36H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[16;13H\r\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[16;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mI\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mf\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mk\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31m \u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mc\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m,\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mn\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mi\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[18;1H\u001b[1L\u001b[1;24r\u001b[17;1H\u001b[K\n\u001b[?25l        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action:\u001b[K\u001b[23d\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m#                                                                       \u001b[39;49m\r\n\u001b[17;10H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mm\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mg\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mo\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mw\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mh\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[31mp\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ml\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31ma\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31my\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31mr\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[31m.\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\n\n\n\n\b\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[17;37H\u001b[1;22r\u001b[20;1H\u001b[1L\u001b[1;24r\u001b[18;1H\u001b[K\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action:\r\n            dm\u001b[K\u001b[23;36H\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\b\r\t\u001b[?25l\u001b[33mdmg1\u001b[39;49m, \u001b[33mdmg2\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lN\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[35mNone\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;15H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\b\b\b\u001b[?25lNon\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\b\b\u001b[K\b\b\b\b\u001b[?25lNon\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25l\u001b[32m\"                                                          \u001b[39;49m\r\n\u001b[32m        if \"\u001b[39;49mAttack\u001b[32m\" in self.action:                                             \u001b[39;49m\r\n\u001b[18;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action:\u001b[K\u001b[18;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"                                                       \u001b[39;49m\r\n\u001b[32m        if \"\u001b[39;49mAttack\u001b[32m\" in self.action:                                             \u001b[39;49m\r\n\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action:\u001b[K\u001b[18;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\\\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\u001b[K\u001b[C\b\b\b\b\b\u001b[?25l\u001b[33mdmg1\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                            \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[20;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[?25l\u001b[32m        # Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\u001b[20;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m-\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m3\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m0\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m%\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[20;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[21;13H\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\u001b[?25l\u001b[33mdmg2\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m\"                                                            \u001b[39;49m\r\n\u001b[32m                                                                                \u001b[39;49m\r\n\u001b[21;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m-\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m1\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m5\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m%\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32m\"\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[K\u001b[3;13Hinfo1.append( (t.name, t.color) )\r\n\u001b[K\n\t\u001b[31m# If attack is in the action, we need to get the estimated              \u001b[39;49m\r\n\t\u001b[31m# damage to show the player.                                            \u001b[39;49m\r\n\t\u001b[33mdmg1\u001b[39;49m, \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action:\r\n\t    \u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-30%\"\u001b[39;49m\u001b[10;13H\u001b[33mdmg2\u001b[39;49m = \u001b[32m\"-15%\"\u001b[39;49m\r\n\u001b[K\n\u001b[32m        # Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\u001b[32m        info2 = []                                                              \u001b[39;49m\r\n\u001b[32m        t = self.grid.tile_at(x,y)                                              \u001b[39;49m\r\n\u001b[32m        tcol = \"\u001b[39;49mw\u001b[32m\"                                                              \u001b[39;49m\r\n\u001b[32m        if t.team:                                                              \u001b[39;49m\r\n\u001b[32m            tcol = t.team.color                                                 \u001b[39;49m\r\n\u001b[32m        info2 += [ (t.name,tcol),                                               \u001b[39;49m\r\n\u001b[32m                   (\"\u001b[39;49mDEF +?\u001b[32m\",tcol)]                                             \u001b[39;49m\r\n\u001b[32m        u = t.unit                                                              \u001b[39;49m\r\n\u001b[32m        if u:                                                                   \u001b[39;49m\r\n\u001b[32m            ucol = u.team.color                                                 \u001b[39;49m\r\n\u001b[23;30H\u001b[7m3% L223\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;1H\u001b[?25l        \u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n        \u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n        \u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\r\n            \u001b[33mtcol\u001b[39;49m = t.team.color\u001b[K\r\n        \u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\u001b[K\r\n                   (\u001b[32m\"DEF +?\"\u001b[39;49m,tcol)]\u001b[K\r\n        \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n            \u001b[33mucol\u001b[39;49m = u.team.color\u001b[K\u001b[14;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n\t\u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\r\n\t    \u001b[33mtcol\u001b[39;49m = t.team.color\u001b[K\r\n\t\u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\r\n\t           (\u001b[32m\"DEF +?\"\u001b[39;49m,tcol)]\r\n\t\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\n\b\u001b[33mucol\u001b[39;49m = u.team.color\r\n\t    \u001b[33minfo2\u001b[39;49m += [ (\u001b[32m\" \"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m),\u001b[K\r\n\t               (u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\r\n\t               (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,ucol) ]\r\n\u001b[K\n\u001b[K\n\u001b[K\n\t\u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\t\u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\r\n\t    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[22;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\u001b[23;30H\u001b[7m5% L234\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32m \u001b[39;49m\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32m%\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[?25l\u001b[1@(\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\t\u001b[C\u001b[C\u001b[?25l),ucol) ]\u001b[14;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;43H\u001b[?25l\u001b[1@,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@g\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l               (u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\r\n\t               (\u001b[32m\"HP %d%% %d\"\u001b[39;49m%(u.hp,dmg1),ucol) ]\r\n\u001b[K\n\u001b[K\n\u001b[K\n\t\u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\t\u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\r\n\t    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[11;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\u001b[12;13H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[13;13H\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\u001b[14;13H\u001b[33mu\u001b[39;49m = t.unit\u001b[K\u001b[15;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\n\b\u001b[33mcol\u001b[39;49m = u.team.color\r\n\t\t\u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\r\n\t                 (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[K\r\n\t                 (\u001b[32m\"HP %d%%\"\u001b[39;49m%u.hp,col)]\r\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[23;30H\u001b[7m7% L245\u001b[0m\u001b[39;49m\u001b[27m\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m50\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;41H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;47H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@\u001b[32m \u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32m%\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\t\b\b\b\b\b\b\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\b\u001b[?25l\u001b[1@(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l,col)]\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld,col)]\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm,col)]\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg,col)]\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l2,col)]\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l),col)]\u001b[19;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[19;51H\u001b[?25lx,col)]\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25l\u001b[34mI-search: \u001b[39;49m\u001b[19;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;58H\u001b[?25l\u001b[7m Isearch) \u001b[0m\u001b[39;49m\u001b[27m\u001b[19;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\r\n\n\n\n\n\u001b[?25lQuit\u001b[K\u001b[23;58H\u001b[7m) --------\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[19;51H\u001b[?25l,col)]\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[19;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[19;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\n\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[3;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[4;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[5;64H\u001b[34m\u001b[40mBlue\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[11;64Hgrass\u001b[12;64HDEF +?\u001b[8;31H\u001b[3;3H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\u001b[24d\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 84, in run\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 266, in handle_input\r\n    alerts, i1, i2, i3 = self.world.pump_info(cx,cy)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 236, in pump_info\r\n    (\"HP %d%% %d\"%(u.hp,dmg1),ucol) ]\r\nTypeError: %d format: a number is required, not str\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ \r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n                       (u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                       (\u001b[32m\"HP %d%% %d\"\u001b[39;49m%(u.hp,dmg1),ucol) ]\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n        \u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\r\n            \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\u001b[K\r\n                \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n            \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n                \u001b[33mcol\u001b[39;49m = u.team.color\u001b[K\r\n                \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                         (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[K\r\n                         (\u001b[32m\"HP %d%% %s\"\u001b[39;49m%(u.hp,dmg2),col)]\u001b[K\r\n\u001b[K\n\u001b[K\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   47% L252  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[19;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\u001b[H\n\t\u001b[?25l\u001b[31m# If attack is in the action, we need to get the estimated              \u001b[39;49m\r\n\t\u001b[31m# damage to show the player.                                            \u001b[39;49m\r\n\t\u001b[33mdmg1\u001b[39;49m, \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action:\u001b[6;13H\u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-30%\"\u001b[39;49m\r\n\t    \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"-15%\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n\t\u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\n\b\b\b\b\b\b\u001b[33mtcol\u001b[39;49m = t.team.color\r\n\t\u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\r\n\t\t   (\u001b[32m\"DEF +?\"\u001b[39;49m,tcol)]\r\n\t\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\n\b\u001b[33mucol\u001b[39;49m = u.team.color\u001b[K\u001b[20;13H\u001b[33minfo2\u001b[39;49m += [ (\u001b[32m\" \"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m),\r\n\t\t\t\b(u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\r\n\t               (\u001b[32m\"HP %d%% %d\"\u001b[39;49m%(u.hp,dmg1),ucol) ]\u001b[23;30H\u001b[7m4% L236\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l               (u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n\t               (\u001b[32m\"HP %d%% %d\"\u001b[39;49m%(u.hp,dmg1),ucol) ]\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\t\u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\t\u001b[33minfo3\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\r\n\t    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\r\n\t        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[14;13H\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\n\b\u001b[33mcol\u001b[39;49m = u.team.color\u001b[K\r\n\t        \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\r\n\t                 (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[19;13H             (\u001b[32m\"HP %d%% %s\"\u001b[39;49m%(u.hp,dmg2),col)]\r\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[K\u001b[23;30H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;4H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[3;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[3;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[3;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[3;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[4;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[5;64H\u001b[34m\u001b[40mBlue\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[11;64Hgrass\u001b[12;64HDEF +?\u001b[8;31H\u001b[3;3H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[A |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H        \u001b[8;31H\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5G\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100% \u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[20;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mDEF +?\u001b[21;64HHP 100% \u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[15;64H        \u001b[19;73H\u001b[11;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H+------+\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[13;5H\u001b[32m\u001b[40m.\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100% \u001b[11;13H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H\u001b[32m\u001b[40m........\u001b[10;6H........\u001b[11;6H........\u001b[12;6H........\u001b[19;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[20;64H      \u001b[21;64H        \u001b[22;79H\u001b[10;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40mL\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[15;64H        \u001b[22;79H\u001b[9;7H+----------+\u001b[10;7H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[11;7H|End Turn  |\u001b[12;7H|Undo      |\u001b[13;7H|Start Over|\u001b[14;7H+----------+\u001b[A\b\u001b[10;8HBack\u001b[11;8H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[13;18H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;68H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40m1\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[31m\u001b[40mHello World: Day 1\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;7H\u001b[32m\u001b[40m.....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[10;5H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.....\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[11;7H\u001b[32m\u001b[40m............\u001b[12;7H............\u001b[13;7H............\u001b[14;7H............\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6G\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H...\u001b[10d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[20;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mDEF +?\u001b[21;64HHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H        \u001b[8;31H\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[8;3H..\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[9;3H...\u001b[10d\b\b.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5G\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H..\u001b[10d\b.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.....\u001b[8;3H...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-----\u001b[9;3H\u001b[32m\u001b[40m..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttac\u001b[10;4H\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Wait \u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m-+\u001b[32m\u001b[40m...................\u001b[9;12H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mk\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m...................\u001b[10;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[32m\u001b[40m...................\u001b[11;13H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;6H\u001b[32m\u001b[40m........\u001b[9;6H........\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m........\u001b[11;6H........\u001b[12;6H........\u001b[15;72H\u001b[31m\u001b[40m-30%\u001b[21;72H-15%\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H            \u001b[19;72H\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100% -30%\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[10d\b\u001b[34m\u001b[40mL\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[15;64H\u001b[31m\u001b[40mHP 100% -30%\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b[10d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100% -30%\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\u001b[24d\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n                       (u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                       (\u001b[32m\"HP %d%% %s\"\u001b[39;49m%(u.hp,dmg1),ucol) ]\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n        \u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\r\n            \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\u001b[K\r\n                \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n            \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n                \u001b[33mcol\u001b[39;49m = u.team.color\u001b[K\r\n                \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                         (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[K\r\n                         (\u001b[32m\"HP %d%% %s\"\u001b[39;49m%(u.hp,dmg2),col)]\u001b[K\r\n\u001b[K\n\u001b[K\n        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   47% L236  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[3;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# If attack is in the action, we need to get the estimated              \u001b[39;49m\r\n\t\u001b[31m# damage to show the player.                                            \u001b[39;49m\r\n\t\u001b[33mdmg1\u001b[39;49m, \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action:\u001b[6;13H\u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-30%\"\u001b[39;49m\r\n\t    \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"-15%\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n\t\u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\n\b\b\b\b\b\b\u001b[33mtcol\u001b[39;49m = t.team.color\r\n\t\u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\r\n\t\t   (\u001b[32m\"DEF +?\"\u001b[39;49m,tcol)]\r\n\t\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\n\b\u001b[33mucol\u001b[39;49m = u.team.color\u001b[K\u001b[20;13H\u001b[33minfo2\u001b[39;49m += [ (\u001b[32m\" \"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m),\r\n\t\t\t\b(u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\r\n\t               (\u001b[32m\"HP %d%% %s\"\u001b[39;49m%(u.hp,dmg1),ucol) ]\u001b[23;30H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\n\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[A\u001b[A\b\u001b[?12l\u001b[?25h\u001b[?12;25h\n\n\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;33H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[5;36H\b\u001b[?25l :\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l :\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(:\u001b[6;13Hdmg1\u001b[A\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l):\u001b[6;13H\u001b[33mdmg1\u001b[39;49m\u001b[5;40H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[5;45H\u001b[?25l :\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36min\u001b[0m\u001b[39;49m:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l :\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls:\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[5;61H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[5;61H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;61H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23d\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;19H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;18H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[22;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\r\n\t    \u001b[33mtcol\u001b[39;49m = t.team.color\u001b[K\r\n\t\u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\r\n\t           (\u001b[32m\"DEF +?\"\u001b[39;49m,tcol)]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\n\b\u001b[33mucol\u001b[39;49m = u.team.color\r\n\t    \u001b[33minfo2\u001b[39;49m += [ (\u001b[32m\" \"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m),\u001b[K\r\n\t               (u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\r\n\t               (\u001b[32m\"HP %d%% %s\"\u001b[39;49m%(u.hp,dmg1),ucol) ]\r\n\u001b[K\n\u001b[K\n\u001b[K\n\t\u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\t\u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\r\n\t    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[19;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\u001b[20;13H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[21;13H\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\u001b[22;13H\u001b[33mu\u001b[39;49m = t.unit\u001b[K\u001b[23;30H\u001b[7m6% L237\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25l(No changes need to be saved)\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[3;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[4;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[5;64H\u001b[34m\u001b[40mBlue\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[11;64Hgrass\u001b[12;64HDEF +?\u001b[8;31H\u001b[3;3H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;4H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H        \u001b[8;31H\u001b[7;5H\u001b[32m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;5H.\u001b[12G.....................\u001b[9;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12G\u001b(B\u001b[0m\u001b[32m\u001b[40m.....................\u001b[10;12H.....................\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;6H+----------+\u001b[9;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[10;6H|End Turn  |\u001b[11;6H|Undo      |\u001b[12;6H|Start Over|\u001b[13;6H+----------+\u001b[A\b\u001b[8;6H\u001b[32m\u001b[40m............\u001b[9;6H............\u001b[10;6H............\u001b[11;6H............\u001b[12;6H............\u001b[13;6H............\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100% \u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[20;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mDEF +?\u001b[21;64HHP 100% \u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[15;64H        \u001b[19;73H\u001b[11;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H+------+\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[13;5H\u001b[32m\u001b[40m.\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100% \u001b[11;13H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H\u001b[32m\u001b[40m........\u001b[10;6H........\u001b[11;6H........\u001b[12;6H........\u001b[19;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[20;64H      \u001b[21;64H        \u001b[22;79H\u001b[9;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;1m\u001b[30m\u001b[40mL\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[15;64H        \u001b[22;79H\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;6H+----------+\u001b[8;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[9;6H|End Turn  |\u001b[10;6H|Undo      |\u001b[11;6H|Start Over|\u001b[12;6H+----------+\u001b[A\b\u001b[8;7HBack\u001b[9;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[11;17H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;68H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40m1\u001b[7;6H\u001b(B\u001b[0m\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;6H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mHello World: Day 1\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;6H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[10;5H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[11;6H\u001b[32m\u001b[40m............\u001b[12;6H............\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H...\u001b[10d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[20;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mDEF +?\u001b[21;64HHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H        \u001b[8;31H\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5G\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[9d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H..\u001b[10d\b.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b[32m\u001b[40m.\u001b[8d.\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-----\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttac\u001b[10;6H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Wait \u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6G\u001b[32m\u001b[40m......\u001b[9;6H......\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m......\u001b[11;6H........\u001b[12;6H........\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b[10d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100% -30%\u001b[21;72H\u001b[31m\u001b[40m-15%\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[10d\b\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b[14;64H\u001b[31m\u001b[40mInfantry\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[15;64H\u001b[31m\u001b[40mHP 100% \u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m    \u001b[21;72H    \u001b[19;72H\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b[10d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100% -30%\u001b[21;72H\u001b[31m\u001b[40m-15%\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d------+\r\u001b[7d\u001b[31m\u001b[40m100%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\r\u001b[8d------+\u001b[9;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40mi\u001b[11d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[12;6H|\u001b[34m\u001b[40m99%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m   |\u001b[13;6H+------+\u001b[15;67H\u001b[34m\u001b[40m90% \u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m     \u001b[19;64H        \u001b[20;64H      \u001b[21;64H            \u001b[7;5H\u001b[12;8H\u001b[34m\u001b[40m8\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[34m\u001b[40m7\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[34m\u001b[40m6\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[34m\u001b[40m5\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[34m\u001b[40m4\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[34m\u001b[40m3\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[34m\u001b[40m2\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[34m\u001b[40m1\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[34m\u001b[40m0\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[31m\u001b[40m99%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \b\b\b\u001b[31m\u001b[40m8%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m7%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m6%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m5%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m4%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m3%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m2%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m1%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m0%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[31m\u001b[40m89%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m8\u001b[9;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m4\u001b[7d\b\b\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m7%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m6%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m5%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m4%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m3%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m2%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m1%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m0%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[31m\u001b[40m79%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m8%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m7%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m6%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m5%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m4%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m3\u001b[10;5H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[15;64H       \u001b[7;4H\b\b\u001b[31m\u001b[40m2%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m1%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m0\u001b[10;6H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[7;4H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[31m\u001b[40m69%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m8%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m7%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m6%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m5%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m4%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m3%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m2%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m1%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m0%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[31m\u001b[40m59%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m8%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m7%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m6%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m5%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m4%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m3%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m2%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m1%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m0%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[31m\u001b[40m49%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m8%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m7%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m6%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m5%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m4%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m3%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m2%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m1%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m0%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[31m\u001b[40m39%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m8\u001b[9;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40mi\u001b[7d\b\b\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m7%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\u001b[24d\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\r\n            \u001b[33mtcol\u001b[39;49m = t.team.color\u001b[K\r\n        \u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\u001b[K\r\n                   (\u001b[32m\"DEF +?\"\u001b[39;49m,tcol)]\u001b[K\r\n        \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n            \u001b[33mucol\u001b[39;49m = u.team.color\u001b[K\r\n            \u001b[33minfo2\u001b[39;49m += [ (\u001b[32m\" \"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m),\u001b[K\r\n                       (u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\u001b[K\r\n                       (\u001b[32m\"HP %d%% %s\"\u001b[39;49m%(u.hp,dmg1),ucol) ]\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n        \u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\r\n            \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\u001b[K\r\n                \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\r\n            \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n            \u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   46% L239  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[14d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# If attack is in the action, we need to get the estimated              \u001b[39;49m\r\n\t\u001b[31m# damage to show the player.                                            \u001b[39;49m\r\n\t\u001b[33mdmg1\u001b[39;49m, \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\r\n\t    \u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-30%\"\u001b[39;49m\r\n\t    \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"-15%\"\u001b[39;49m\r\n\u001b[K\n\t\u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n\t\u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\n\b\b\b\b\b\b\u001b[33mtcol\u001b[39;49m = t.team.color\r\n\t\u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\u001b[K\r\n\t           (\u001b[32m\"DEF +?\"\u001b[39;49m,tcol)]\r\n\t\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\n\b\u001b[33mucol\u001b[39;49m = u.team.color\u001b[K\u001b[20;13H\u001b[33minfo2\u001b[39;49m += [ (\u001b[32m\" \"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m),\u001b[K\u001b[21;13H           (u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\u001b[22;13H           (\u001b[32m\"HP %d%% %s\"\u001b[39;49m%(u.hp,dmg1),ucol) ]\u001b[23;30H\u001b[7m4% L226\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[5;62H\u001b[1;22r\u001b[6;1H\u001b[1L\u001b[1;24r\u001b[6;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   44% L220\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[6;13H\u001b[?25la\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[33matk\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\u001b[?25latk\u001b[K\t\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[6;13H\u001b[?25l\u001b[33matk_unit\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[1;22r\u001b[8;1H\u001b[1L\u001b[1;24r\u001b[7;1H\u001b[K\n\u001b[?25l            \u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-30%\"\u001b[39;49m\u001b[K\u001b[23;36H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[7;13H\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l+\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\b\u001b[?25ldef_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[7;13H\u001b[?25l\u001b[33mdef_unit\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[6;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[6;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m19\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[5;62H\u001b[1;22r\u001b[7;1H\u001b[1L\u001b[1;24r\u001b[6;1H\u001b[K\n\u001b[?25l            \u001b[33matk_unit\u001b[39;49m =\u001b[K\u001b[23;35H\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;13H\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\b\b\b\u001b[?25l\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\b\b\b\u001b[?25lsel\u001b[K\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\b\u001b[K\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[7;13Hatk_unit\u001b[6;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;13H\u001b[?25ldef_unit\u001b[9;13Hdmg1\n\b\b\b\bdmg2\r\n\n\n\tinfo2\r\n\tt\n\btcol\n\ntcol\r\n\tinfo2\r\n\n\tu\u001b[22;13Hucol\u001b[6;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[7;13H\u001b[?25l\u001b[33matk_unit\u001b[39;49m\u001b[6;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l[\u001b[7;13Hatk_unit\u001b[A\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l]\u001b[7;13H\u001b[33matk_unit\u001b[39;49m\u001b[6;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[6;35H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[6;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[6;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;13H\u001b[?25l\u001b[33mdef_unit\u001b[39;49m\u001b[9;13H\u001b[33mdmg1\u001b[39;49m\n\b\b\b\b\u001b[33mdmg2\u001b[39;49m\r\n\n\n\t\u001b[33minfo2\u001b[39;49m\r\n\t\u001b[33mt\u001b[39;49m\n\b\u001b[33mtcol\u001b[39;49m\n\n\u001b[33mtcol\u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m\r\n\n\t\u001b[33mu\u001b[39;49m\u001b[22;13H\u001b[33mucol\u001b[39;49m\u001b[6;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[8;13Hdef_unit\u001b[7;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;13H\u001b[?25ldmg1\n\b\b\b\bdmg2\r\n\n\n\tinfo2\r\n\tt\n\btcol\n\ntcol\r\n\tinfo2\r\n\n\tu\u001b[22;13Hucol\u001b[7;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[8;13H\u001b[33mdef_unit\u001b[39;49m\u001b[7;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;13H\u001b[?25l\u001b[33mdmg1\u001b[39;49m\u001b[A\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;13H\u001b[?25l\u001b[33mdmg2\u001b[39;49m\r\n\n\n\t\u001b[33minfo2\u001b[39;49m\r\n\t\u001b[33mt\u001b[39;49m\n\b\u001b[33mtcol\u001b[39;49m\n\n\u001b[33mtcol\u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m\r\n\n\t\u001b[33mu\u001b[39;49m\u001b[22;13H\u001b[33mucol\u001b[39;49m\u001b[8;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[9;13Hdmg1\u001b[8;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;13H\u001b[?25ldmg2\r\n\n\n\tinfo2\r\n\tt\n\btcol\n\ntcol\r\n\tinfo2\r\n\n\tu\u001b[22;13Hucol\u001b[8;42H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l,\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lx\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[9;13H\u001b[33mdmg1\u001b[39;49m\u001b[A\t\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;13H\u001b[?25l\u001b[33mdmg2\u001b[39;49m\r\n\n\n\t\u001b[33minfo2\u001b[39;49m\r\n\t\u001b[33mt\u001b[39;49m\n\b\u001b[33mtcol\u001b[39;49m\n\n\u001b[33mtcol\u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m\r\n\n\t\u001b[33mu\u001b[39;49m\u001b[22;13H\u001b[33mucol\u001b[39;49m\u001b[8;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\n\u001b[?25l            \u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-30%\"\u001b[39;49m\u001b[K\u001b[23;36H\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;13H\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25ldef_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;26H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[10;13H\u001b[4@\t\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[11;13H\u001b[4@\t\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;30H\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[9;38H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[9;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[9;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31m                                                        \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpump_info\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[6;13H\u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[7;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[K\u001b[8;13H\u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[9;13H\u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[10;13H\u001b[33ma.time\u001b[39;49m = 50\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\u001b[K\n\t\u001b[31m# Info 1 is global team information.                                    \u001b[39;49m\r\n\t\u001b[33minfo1\u001b[39;49m = [ (\u001b[32m\"Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"w!\"\u001b[39;49m)]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\r\n\t    info1.append( (t.name, t.color) )\r\n\u001b[K\n\t\u001b[31m# If attack is in the action, we need to get the estimated              \u001b[39;49m\r\n\t\u001b[31m# damage to show the player.                                            \u001b[39;49m\r\n\u001b[23;29H\u001b[7m39% L217\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;63H\u001b[4P\u001b[2;5H\u001b[4@\u001b[2;11H\u001b[?25l\u001b[31mIf attack is in the action, we need to get the estimated\u001b[39;49m\u001b[3;5H    \u001b[31m# damage to show the player.                                            \u001b[39;49m\r\n\t\u001b[33mdmg1\u001b[39;49m, \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[6;13H\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\u001b[7;13H\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[8;13H\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[9;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m def_unit:\u001b[K\u001b[10;13H    \u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-30%\"\u001b[39;49m\u001b[11;13H    \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"-15%\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\r\n\t\u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\r\n\t    \u001b[33mtcol\u001b[39;49m = t.team.color\u001b[K\r\n\t\u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\u001b[K\u001b[20;20H(\u001b[32m\"DEF +?\"\u001b[39;49m,tcol)]\r\n\t\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\u001b[23;29H\u001b[7m43\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\t\u001b[?25l\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\r\n\t    \u001b[33mucol\u001b[39;49m = u.team.color\r\n\t    \u001b[33minfo2\u001b[39;49m += [ (\u001b[32m\" \"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m),\u001b[K\u001b[6;13H           (u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\u001b[7;13H           (\u001b[32m\"HP %d%% %s\"\u001b[39;49m%(u.hp,dmg1),ucol) ]\r\n\u001b[K\n\u001b[K\n\u001b[K\n\t\u001b[31m# Info 3 is for the unit that is currently selected.                    \u001b[39;49m\r\n\t\u001b[33minfo3\u001b[39;49m = []\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\u001b[K\r\n\t    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\r\n\t        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[18;13H\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\n\b\u001b[33mcol\u001b[39;49m = u.team.color\u001b[K\r\n\t        \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\r\n\t                 (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[23;30H\u001b[7m7% L235\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l        \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\r\n\t                 (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[4;13H             (\u001b[32m\"HP %d%% %s\"\u001b[39;49m%(u.hp,dmg2),col)]\r\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[K\u001b[9;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\u001b[10;5H\u001b[31m# checkpoint of the world. When the controller gets CTRL_UNDO, it is        \u001b[39;49m\r\n\u001b[11;5H\u001b[4P\t\b\b\u001b[31msupposed to set its camera's grid to the new one. \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[19;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[23;29H\u001b[7m50% L254\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\b\b\u001b[31mWhen we undo, we go back to a previous spot in the history.       \u001b[39;49m\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\u001b[12;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\r\n\t\u001b[8@\u001b[15;22Hhistory\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\u001b[19;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\u001b[K\u001b[20;5H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[22;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m5% L273\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[3;14Hstate = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[4;14Hchoices = []\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[K\u001b[15;13H\u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append([acts \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (cp,acts) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history])\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[21;14Hcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[23;30H\u001b[7m9% L292\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25lcheckpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\u001b[5;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\u001b[9;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\r\n\u001b[K\u001b[15;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[22;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[23;29H\u001b[7m62% L311\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[3;5H\u001b[31m#     undo: Tell the controller to reload the grid                          \u001b[39;49m\r\n\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\u001b[5;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\u001b[K\u001b[6;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\u001b[K\u001b[7;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\r\n\u001b[K\u001b[11;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[13;5H\u001b[31m# Next step: If unit: coordinates of range of unit                          \u001b[39;49m\r\n\u001b[14;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[17;5H        \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\u001b[18;5H    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\u001b[19;5H    \u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\u001b[20;5H    \u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\u001b[22;51H\u001b[4P\u001b[22;5H\u001b[4@\u001b[22;11H\u001b[31mIf no unit, check for terrain               \u001b[39;49m\u001b[23;30H\u001b[7m8% L330\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;51H\u001b[4P\u001b[3;5H\u001b[4@\u001b[3;11H\u001b[?25l\u001b[31mIf no unit, check for terrain               \u001b[39;49m\u001b[4;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m,\u001b[32m\"Undo\"\u001b[39;49m,\u001b[32m\"Start Over\"\u001b[39;49m]\u001b[K\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If unit is not friendly, return nothing.                              \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[13;58H\u001b[4P\u001b[13;5H\u001b[4@\u001b[13;11H\u001b[31mIf unit is friendly, but not ready, return nothing.\u001b[39;49m\u001b[14;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\u001b[K\u001b[15;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\u001b[21;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m73% L349\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get_move_range(x,y)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\r\n\u001b[K\u001b[7;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[9;5H\u001b[4P\t\b\b\u001b[31mNext step: If in range, move            \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[10;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[21;18Haction.append((x,y))\u001b[K\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\n\u001b[7m7% L368\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;18H\u001b[?25laction.append((x,y))\u001b[K\u001b[3;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\r\n\n\t    \u001b[31m# Determine if a target is in range.                                \u001b[39;49m\r\n\u001b[6;13H\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[7;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m px,py \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_range((x,y),1):\u001b[K\u001b[8;5H            \u001b[33ma\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(px,py)\u001b[K\u001b[9;5H            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a.allied(u):\u001b[K\u001b[10;5H                \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[11;5H        \u001b[33mmoved\u001b[39;49m = (x,y) != (ox,oy)\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"indirect\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[u.icon] \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m moved:\u001b[13;13H    \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable:\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\u001b[18;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"action\"\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\n\b\b\b\b\u001b[7m81% L387\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[5;5H\u001b[8P\t\b\b\u001b[31mState: main menu (expected, menu o\u001b[39;49m\u001b[8@\u001b[31mption)  \u001b[39;49m\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_main_menu\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[8;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[12;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[K\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Undo\"\u001b[39;49m:\u001b[K\n\bundo()\u001b[K\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Start Over\"\u001b[39;49m:\u001b[K\r\n\t\u001b[4@\t\tundo(\u001b[35mTrue\u001b[39;49m)\u001b[K\n\b\b\b\b\b\u001b[7m6% L406\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Start Over\"\u001b[39;49m:\u001b[K\r\n\t\u001b[4@\t\tundo(\u001b[35mTrue\u001b[39;49m)\u001b[K\u001b[5;7H\u001b[31m                                        \u001b[39;49m\r\n\t\t\u001b[1m\u001b[34maction\u001b[0m\u001b[39;49m\u001b[3P\r\n\n\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\r\n\u001b[K\u001b[13;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\r\n\t    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\u001b[K\u001b[16;13H\u001b[31m# Get possible targets.                                             \u001b[39;49m\r\n\u001b[17;13H\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m px,py \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_range((x,y),1):\r\n\t        \u001b[33ma\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(px,py)\u001b[19;13H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a.allied(u):\u001b[20;21H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((px,py))\r\n\u001b[K\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\n\b\b\b\b\b\b\u001b[7m9% L425\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[K\u001b[3;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[4;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\r\n\u001b[K\u001b[6;5H    \u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\t\b== \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[8;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[K\u001b[9;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\t    unit.ready = \u001b[35mFalse\u001b[39;49m\u001b[11;18Haction.append(opt)\u001b[12;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\r\n\u001b[K\u001b[17;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[20;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\u001b[K\u001b[23;29H\u001b[7m92% L444\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[5;13H\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\u001b[9;13H\u001b[33mstart_hp\u001b[39;49m = d.hp, a.hp\u001b[K\u001b[10;13H\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\t\t\t\b_attack((ox,oy),(x,y))\u001b[12;13H\u001b[33mend_hp\u001b[39;49m = d.hp, a.hp\u001b[K\r\n\n\t    \u001b[31m# Build the animation.                                              \u001b[39;49m\r\n\u001b[15;13H\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[16;13H\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[17;5H        \u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,d.team.color,start_hp[0],end_hp[0],0)\u001b[K\u001b[18;5H        \u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,a.team.color,start_hp[1],end_hp[1],t1)\r\n\t    \u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = x,y\u001b[K\u001b[20;13H\u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = ox,oy\u001b[K\r\n\t    \u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[22;13H\u001b[33ma2.time\u001b[39;49m = t1+t2+50\n\b\u001b[7m5% L463\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l    \u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[3;13H\u001b[33ma2.time\u001b[39;49m = t1+t2+50\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += [(a1,x1+2,y1+2),(a2,x2-4,y2-2)]\u001b[5;13H\u001b[33ma.ready\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[7;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\u001b[K\r\n\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\n\b\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\r\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;29H\u001b[7mBot L482\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u0007\u001b[24d\u001b[?25lEnd of buffer\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[H\n\t\u001b[?25l\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m coord \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\u001b[5;13H\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-2]\u001b[6;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((ox,oy))\u001b[7;13H\u001b[33ma\u001b[39;49m, \u001b[33md\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy), \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[9;13H\u001b[33mstart_hp\u001b[39;49m = d.hp, a.hp\u001b[10;13H\u001b[31m#self.action_attack((ox,oy),(x,y))                                  \u001b[39;49m\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action_attack((ox,oy),(x,y))\u001b[12;13H\u001b[33mend_hp\u001b[39;49m = d.hp, a.hp\u001b[K\u001b[14;13H\u001b[31m# Build the animation.                                              \u001b[39;49m\r\n\u001b[15;13H\u001b[33mt1\u001b[39;49m = start_hp[0]-end_hp[0]\u001b[16;13H\u001b[33mt2\u001b[39;49m = start_hp[1]-end_hp[1]\u001b[17;13H\u001b[33ma1\u001b[39;49m = widgets.HPAlert(6,1,d.team.color,start_hp[0],end_hp[0],0)\u001b[18;13H\u001b[33ma2\u001b[39;49m = widgets.HPAlert(6,1,a.team.color,start_hp[1],end_hp[1],t1)\u001b[19;13H\u001b[33mx1\u001b[39;49m,\u001b[33my1\u001b[39;49m = x,y\u001b[20;13H\u001b[33mx2\u001b[39;49m,\u001b[33my2\u001b[39;49m = ox,oy\u001b[21;13H\u001b[33ma1.time\u001b[39;49m = t1+t2+50\u001b[22;13H\u001b[33ma2.time\u001b[39;49m = t1+t2+50\n\b\b\u001b[7m95%\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\u001b[3;13H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"attacking\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# Wait.                                                                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Wait\"\u001b[39;49m:\u001b[K\u001b[8;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\u001b[9;13Hunit = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[10;13Hunit.ready = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\t\t\b.append(opt)\u001b[K\u001b[12;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.commit()\r\n\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Cancel\"\u001b[39;49m:\u001b[K\u001b[15;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start_over()\u001b[K\r\n\u001b[K\u001b[17;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_attacking\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[20;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\u001b[K\u001b[23;30H\u001b[7m2% L464\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Start Over\"\u001b[39;49m:\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.undo(\u001b[35mTrue\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[6;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_action\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, opt):\u001b[K\r\n\t\t\b\u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[8;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Invalid option.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Attack\"\u001b[39;49m:\u001b[K\u001b[11;18Hchoices = []\u001b[K\r\n\u001b[K\u001b[13;13H\u001b[33mx\u001b[39;49m,y = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[-1]\r\n\t    u = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\r\n\u001b[K\u001b[16;13H\u001b[31m# Get possible targets.                                             \u001b[39;49m\r\n\u001b[17;5H        \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m px,py \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_range((x,y),1):\u001b[K\u001b[18;5H            \u001b[33ma\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(px,py)\r\n\t        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a.allied(u):\u001b[20;13H        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append((px,py))\r\n\u001b[K\u001b[22;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append(opt)\u001b[23;29H\u001b[7m89% L445\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[4P\u001b[3;21Hstart_over()\u001b[5;7H\u001b[31mState: main menu (expected, menu option)\u001b[39;49m\r\n\t\t\u001b[1m\u001b[34mmain_m\u001b[0m\u001b[39;49m\u001b[3@\u001b[1m\u001b[34menu\u001b[0m\u001b[39;49m\r\n\n\n\n\t\u001b[31m# Leave the menu.                                                       \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Back\"\u001b[39;49m:\u001b[K\u001b[12;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# End my turn.                                                          \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"End Turn\"\u001b[39;49m:\u001b[16;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.end_turn()\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Undo\"\u001b[39;49m:\u001b[K\u001b[19;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.undo()\u001b[K\r\n\u001b[K\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m opt == \u001b[32m\"Start Over\"\u001b[39;49m:\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.undo(\u001b[35mTrue\u001b[39;49m)\u001b[K\n\b\b\b\b\b\u001b[7m6% L426\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\n\n\t\t\u001b[8P\u001b[5;5H\u001b[8@\t\t\b\b\u001b[31mDetermine if a target is in range.\u001b[39;49m\u001b[6;5H        \u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m px,py \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.get_range((x,y),1):\u001b[8;13H    \u001b[33ma\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(px,py)\u001b[K\r\n\t\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m a \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m a.allied(u):\r\n\t            \u001b[33mattackable\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[33mmoved\u001b[39;49m = (x,y) != (ox,oy)\u001b[12;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"indirect\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.properties[u.icon] \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m moved:\r\n\t\t\u001b[33mattackable\u001b[39;49m = \u001b[35mFalse\u001b[39;49m\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m attackable:\u001b[K\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices.append(\u001b[32m\"Attack\"\u001b[39;49m)\r\n\u001b[K\u001b[17;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.move_unit((ox,oy),(x,y))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices += [\u001b[32m\"Wait\"\u001b[39;49m,\u001b[32m\"Cancel\"\u001b[39;49m]\r\n\t\t\ttransition(\u001b[32m\"action\"\u001b[39;49m)\r\n\n\t\u001b[31m# If the coord was out of range, undo everything.                       \u001b[39;49m\r\n\t\u001b[4P\u001b[22;21Hstart_over()\n\b\b\b\u001b[7m1% L407\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;18H\u001b[?25lchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get_move_range(x,y)\u001b[3;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\r\n\n\t\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Shouldn't get here.\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# State    : Moving (expected input, tuple)                                 \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# Expected : Tuple in range                                                 \u001b[39;49m\r\n\u001b[9;5H\u001b[31m# Next step: If in range, move                                              \u001b[39;49m\r\n\u001b[10;5H\u001b[31m#            If out of range, cancel                                        \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_moving\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\u001b[K\u001b[13;13H\u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mox\u001b[39;49m,\u001b[33moy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ox,oy)\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\u001b[K\n\t\u001b[31m# If coord was in range, move the unit and return possible actions.     \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\n\b\u001b[7m77% L388\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[K\n\t\u001b[?25l\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u:\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[32m\"main menu\"\u001b[39;49m\u001b[K\u001b[6;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = [\u001b[32m\"Back\"\u001b[39;49m,\u001b[32m\"End Turn\"\u001b[39;49m,\u001b[32m\"Undo\"\u001b[39;49m,\u001b[32m\"Start Over\"\u001b[39;49m]\u001b[7;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"main menu\"\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[9;47H\u001b[4P\u001b[9;5H\u001b[4@\u001b[9;11H\u001b[31mIf unit is not friendly, return nothing.\u001b[39;49m\u001b[10;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m team:\u001b[K\u001b[11;5H        \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly, but not ready, return nothing.                   \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m u.ready:\r\n\t    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# If unit is friendly and ready, switch to moving state and             \u001b[39;49m\r\n\t\u001b[31m# give the controller the list of valid move locations.                 \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.team \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m team \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m u.ready:\u001b[K\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action.append((x,y))\u001b[21;18Hchoices = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.get_move_range(x,y)\u001b[22;13H\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[32m\"moving\"\u001b[39;49m)\u001b[23;30H\u001b[7m3% L369\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[3;5H\u001b[4P\t\b\b\u001b[31m    undo: Tell the controller to reload the \u001b[39;49m\u001b[4@\u001b[31mgrid\u001b[39;49m\u001b[4;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, c):\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_none(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_main_menu(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_moving(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_action(c)\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.process_attacking(c)\u001b[K\r\n\u001b[K\u001b[11;5H\u001b[31m# State    : None (expected input, tuple)                                   \u001b[39;49m\r\n\u001b[12;5H\u001b[31m# Expected : Tuple (unit or friendly factory)                               \u001b[39;49m\r\n\u001b[13;5H\u001b[4P\t\b\b\u001b[31mNext step: If unit: coordinates of range of unit   \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[14;5H\u001b[31m#            If factory: list of possible buildables                        \u001b[39;49m\r\n\u001b[15;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mprocess_none\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, coord):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtype\u001b[0m\u001b[39;49m(coord) \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtuple\u001b[0m\u001b[39;49m:\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Expected tuple!\"\u001b[39;49m)\u001b[K\r\n\t\u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = coord\u001b[K\r\n\t\u001b[33mu\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n\t\u001b[33mteam\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\r\n\u001b[K\n\t\u001b[31m# If no unit, check for terrain                                         \u001b[39;49m\r\n\u001b[23;29H\u001b[7m68% L350\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[5;5H\u001b[31m# This sets the new state and returns the appropriate code                  \u001b[39;49m\r\n\u001b[6;5H\u001b[31m# to the caller for what kind of input should come next.                    \u001b[39;49m\r\n\u001b[7;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mtransition\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, new_state):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = new_state\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m   \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[35mNone\u001b[39;49m       : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\t\u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"main menu\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[11;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"moving\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\u001b[12;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"action\"\u001b[39;49m   : \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_MENU\u001b[K\u001b[13;5H    \u001b[1m\u001b[36melif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state == \u001b[32m\"attacking\"\u001b[39;49m: \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_COORD\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# This processes input of two types: coordinates and strings.               \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# A string is the input from a menu, such as \"attack\" or \"wait\".            \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# A coordinate is an x,y location on the grid.                              \u001b[39;49m\r\n\u001b[18;5H\u001b[31m# Has one of four return values:                                            \u001b[39;49m\r\n\u001b[19;5H\u001b[31m#     None: Tell the controller to do nothing                               \u001b[39;49m\r\n\u001b[20;5H\u001b[31m#     menu: Tell the controller to render a menu                            \u001b[39;49m\r\n\u001b[21;5H\u001b[31m#     coord: Tell the controller to give it a coord                         \u001b[39;49m\r\n\u001b[22;5H\u001b[4P\t\b\b\u001b[31m    undo: Tell the controller to reload the \u001b[39;49m\u001b[4@\u001b[31mgrid\u001b[39;49m\u001b[23;30H\u001b[7m2% L331\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;14H\u001b[?25laction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[5;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\u001b[K\r\n\u001b[K\u001b[7;5H\u001b[31m# When we end the turn, we flush the history buffer and save a new          \u001b[39;49m\r\n\u001b[8;5H\u001b[31m# checkpoint.                                                               \u001b[39;49m\r\n\u001b[9;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mend_turn\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state != \u001b[35mNone\u001b[39;49m \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action != []:\u001b[K\r\n\t    \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Can't end right now\"\u001b[39;49m)\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.end_turn()\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m u \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.units:\u001b[15;5H        \u001b[33mu.ready\u001b[39;49m = \u001b[35mTrue\u001b[39;49m\u001b[K\u001b[16;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.data[\u001b[32m\"history\"\u001b[39;49m].append([acts \u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (cp,acts) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history])\u001b[K\u001b[17;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\u001b[K\u001b[18;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\u001b[K\u001b[19;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[20;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[K\u001b[21;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[22;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\u001b[23;29H\u001b[7m59% L312\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[3;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[4;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices = []\u001b[7;5H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid)\u001b[K\u001b[8;5H    \u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.transition(\u001b[35mNone\u001b[39;49m)\u001b[K\r\n\u001b[K\u001b[10;5H\u001b[31m# When we undo, we go back to a previous spot in the history.               \u001b[39;49m\r\n\u001b[11;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mundo\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, total=\u001b[35mFalse\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history) > 0:\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m total:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history[0]\u001b[15;13H    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history = []\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mTrue\u001b[39;49m\u001b[K\r\n\t    \u001b[1m\u001b[36melse\u001b[0m\u001b[39;49m:\u001b[K\r\n\t        \u001b[33mcp\u001b[39;49m,\u001b[33maction\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.history.pop()\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = cp\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint = copy.deepcopy(cp)\u001b[21;14Haction = []\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\u001b[23;30H\u001b[7m5% L293\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l            \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\r\n\t                 (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[K\r\n\t                 (\u001b[32m\"HP %d%% %s\"\u001b[39;49m%(u.hp,dmg2),col)]\r\n\u001b[K\n\u001b[K\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m report, info1, info2, info3\u001b[K\r\n\u001b[K\u001b[9;5H\u001b[31m# This sets the state back to start while also restoring the previous       \u001b[39;49m\r\n\t\b\b\u001b[31mcheckpoint of the world. When the controller gets CTRL_UNDO, it is\u001b[39;49m\u001b[11;5H\u001b[31m# supposed to set its camera's grid to the new one.                         \u001b[39;49m\r\n\u001b[12;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mstart_over\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action = []\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.state = \u001b[35mNone\u001b[39;49m\u001b[K\r\n\t\u001b[8P\t\b\b\bchoices\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid = copy.deepcopy(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint)\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m CTRL_UNDO\r\n\u001b[K\u001b[19;5H\u001b[31m# When a move is completed and we return to the start state, we             \u001b[39;49m\r\n\u001b[20;5H\u001b[31m# change the checkpoint and save the move in our history.                   \u001b[39;49m\r\n\u001b[21;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mcommit\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m):\u001b[K\u001b[22;14Hhistory.append((\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.checkpoint,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action))\u001b[23;30H\u001b[7m0% L274\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\n\b\u001b[33mucol\u001b[39;49m = u.team.color\u001b[K\u001b[5;13H\u001b[33minfo2\u001b[39;49m += [ (\u001b[32m\" \"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m),\u001b[6;24H(u.name,ucol+\u001b[32m\"!\"\u001b[39;49m),\r\n\t               (\u001b[32m\"HP %d%% %s\"\u001b[39;49m%(u.hp,dmg1),ucol) ]\r\n\n\u001b[K\n\u001b[K\u001b[11;57H\u001b[4P\u001b[11;5H\u001b[4@\u001b[11;11H\u001b[31mInfo 3 is for the unit that is currently selected.\u001b[39;49m\u001b[12;5H    \u001b[33minfo3\u001b[39;49m = []\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 0:\r\n\t    \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[0]\r\n\t    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action) > 1:\r\n\t        \u001b[33mx\u001b[39;49m,\u001b[33my\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[18;13H\u001b[33mu\u001b[39;49m = t.unit\u001b[19;5H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\u001b[20;5H            \u001b[33mcol\u001b[39;49m = u.team.color\u001b[K\u001b[21;5H            \u001b[33minfo3\u001b[39;49m = [(u.name,col+\u001b[32m\"!\"\u001b[39;49m),\r\n\t                 (\u001b[32m\"DEF +?\"\u001b[39;49m,col),\u001b[K\u001b[23;29H\u001b[7m47% L255\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\t\u001b[?25l\u001b[31m# If attack is in the action, we need to get the estimated              \u001b[39;49m\r\n\t\u001b[31m# damage to show the player.                                            \u001b[39;49m\r\n\t\u001b[33mdmg1\u001b[39;49m, \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[6;13H\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\u001b[7;13H\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\u001b[8;13H\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[9;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m def_unit:\r\n\t\t\u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-30%\"\u001b[39;49m\r\n\t        \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"-15%\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n\t\u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\n\b\b\b\b\b\b\u001b[33mtcol\u001b[39;49m = t.team.color\r\n\t\u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\r\n\t\t   (\u001b[32m\"DEF +?\"\u001b[39;49m,tcol)]\r\n\t\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\u001b[23;30H\u001b[7m3% L236\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[4P\t\b\b\u001b[?25l\u001b[31m                                                        \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpump_info\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\u001b[K\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\u001b[6;13H\u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\u001b[7;13H\u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\u001b[K\u001b[8;13H\u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\u001b[9;13H\u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[10;13H\u001b[33ma.time\u001b[39;49m = 50\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\u001b[12;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\r\n\u001b[K\n\t\u001b[31m# Info 1 is global team information.                                    \u001b[39;49m\r\n\t\u001b[33minfo1\u001b[39;49m = [ (\u001b[32m\"Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"w!\"\u001b[39;49m)]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\r\n\t    info1.append( (t.name, t.color) )\r\n\u001b[K\n\t\u001b[31m# If attack is in the action, we need to get the estimated              \u001b[39;49m\r\n\t\u001b[31m# damage to show the player.                                            \u001b[39;49m\r\n\u001b[23;29H\u001b[7m39% L217\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;5H\u001b[?25l    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m atk_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Attack square is empty.\"\u001b[39;49m)\u001b[K\u001b[3;5H    \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m def_unit: \u001b[1m\u001b[36mraise\u001b[0m\u001b[39;49m \u001b[32mException\u001b[39;49m(\u001b[32m\"Defend square is empty.\"\u001b[39;49m)\r\n\u001b[K\n\t\u001b[31m# This is the basic attack formula.                                     \u001b[39;49m\r\n\t\u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n\t\u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n\t\u001b[33mdef_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp > 0:\u001b[K\u001b[10;14H\u001b[33mtk_unit.hp\u001b[39;49m -= \u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\r\n\u001b[K\n\t\u001b[31m# Remove destroyed units from grid and prevent HP from falling into     \u001b[39;49m\r\n\t\u001b[31m# the negatives.                                                        \u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit.hp <= 0:\u001b[15;13H\u001b[33matk_unit.hp\u001b[39;49m = 0\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(ax,ay)\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m def_unit.hp <= 0:\u001b[K\r\n\t    \u001b[33mdef_unit.hp\u001b[39;49m = 0\u001b[K\u001b[19;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.remove_unit(dx,dy)\u001b[K\u001b[21;5H\u001b[4P\t\b\b\u001b[31m                                                        \u001b[39;49m\u001b[4@\u001b[31m    \u001b[39;49m\u001b[22;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpump_info\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\n\b\u001b[7m5% L198\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m89\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\b\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lMark set\u001b[8;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[8;64H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[8;64H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[8;64H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;64H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[2;5H\u001b[?25l\u001b[31m#                                                                           \u001b[39;49m\r\n\u001b[3;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mpump_info\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y):\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start:\r\n\t    \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.current_team()\u001b[K\r\n\t    \u001b[33mm1\u001b[39;49m = \u001b[32m\"%s: Day %d\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.name, \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day)\r\n\t    \u001b[33mm2\u001b[39;49m = \u001b[32m\"%s Advance\"\u001b[39;49m%t.name\r\n\t    \u001b[33mw\u001b[39;49m = \u001b[1m\u001b[34mmax\u001b[0m\u001b[39;49m(\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m1),\u001b[1m\u001b[34mlen\u001b[0m\u001b[39;49m(m2))+1\u001b[K\r\n\t    \u001b[33ma\u001b[39;49m = widgets.Alert(w,2,m1+\u001b[32m\"\\n\"\u001b[39;49m+m2,t.color)\u001b[10;14H\u001b[33m.time\u001b[39;49m = 50\u001b[K\u001b[11;13H\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts.append((a,10,5))\r\n\t    \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.start = \u001b[35mFalse\u001b[39;49m\u001b[K\r\n\t\u001b[33mreport\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts = []\u001b[K\r\n\u001b[K\n\t\u001b[31m# Info 1 is global team information.                                    \u001b[39;49m\r\n\t\u001b[33minfo1\u001b[39;49m = [ (\u001b[32m\"Day %d\"\u001b[39;49m%\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.day,\u001b[32m\"w!\"\u001b[39;49m)]\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m t \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.teams:\u001b[19;13Hinfo1.append( (t.name, t.color) )\u001b[21;63H\u001b[4P\u001b[21;5H\u001b[4@\u001b[21;11H\u001b[31mIf attack is in the action, we need to get the estimated\u001b[39;49m\u001b[22;5H    \u001b[31m# damage to show the player.                                            \u001b[39;49m\r\n\u001b[23;30H\u001b[7m9% L197\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;63H\u001b[4P\u001b[2;5H\u001b[4@\u001b[2;11H\u001b[?25l\u001b[31mIf attack is in the action, we need to get the estimated\u001b[39;49m\u001b[3;5H    \u001b[31m# damage to show the player.                                            \u001b[39;49m\r\n\t\u001b[33mdmg1\u001b[39;49m, \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[6;13H\u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\u001b[7;13H\u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[8;13H\u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[9;13H\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m def_unit:\u001b[K\u001b[10;13H    \u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-30%\"\u001b[39;49m\u001b[11;13H    \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"-15%\"\u001b[39;49m\u001b[K\r\n\u001b[K\n\t\u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n\t\u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\r\n\t\u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\r\n\t    \u001b[33mtcol\u001b[39;49m = t.team.color\u001b[K\r\n\t\u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\u001b[K\u001b[20;20H(\u001b[32m\"DEF +?\"\u001b[39;49m,tcol)]\r\n\t\u001b[33mu\u001b[39;49m = t.unit\u001b[K\r\n\t\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\u001b[23;29H\u001b[7m43% L216\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m20\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;30H\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   43% L225\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lMark set\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[34mint\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[11d\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lnt\u001b[1P\r\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;37H\b\u001b[K\r\u001b[1;22r\u001b[12;1H\u001b[1M\u001b[1;24r\u001b[10;30H\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp)\r\n                \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"-15%\"\u001b[39;49m\u001b[K\u001b[22;1H        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m u:\u001b[K\u001b[23;36H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@%\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32md\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\b\b\b\b\u001b[C\u001b[?25l\u001b[1@\u001b[32m%\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1@\u001b[32m%\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;29H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[32m%\"\u001b[39;49m\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[32m%\"\u001b[39;49m\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[32md%\"\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m%\"\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[32m%\"\u001b[39;49m\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;30H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\t\b\u001b[?25l\u001b[1@(\r\n\t\tdmg2\u001b[A\t\t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;68H\r\n\n\n\n\t\u001b[?25linfo2\r\n\tt\n\btcol\n\ntcol\r\n\tinfo2\r\n\n\tu\u001b[10;68H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\r\n\t\t\u001b[33mdmg2\u001b[39;49m\u001b[A\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[10;68H\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[24;1H\u001b[?25lAuto-saving...\u001b[10;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[10;52H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;51H\b\b\b\b\b\b\b\b\b\b\b\b\b\b\r\n\n\n\n\t\u001b[?25l\u001b[33minfo2\u001b[39;49m\r\n\t\u001b[33mt\u001b[39;49m\n\b\u001b[33mtcol\u001b[39;49m\n\n\u001b[33mtcol\u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m\r\n\n\t\u001b[33mu\u001b[39;49m\u001b[10;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;31H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l%\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l(\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[11;51H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;67H\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\t\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@a\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@f\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[11;59H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[11;59H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;59H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;59H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[10;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   43% L224\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33md\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;21H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp)\u001b[10;39H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\b\u001b[24;1H\u001b[?25lAuto-saving...\u001b[10;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[10;56H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[10;55H\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@\u001b[33m1\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\t\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\n\u001b[?25l                \u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-d%%%\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[K\u001b[23;36H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[?25l2\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\b\u001b[?25l\u001b[33md2\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp))\u001b[11;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[11;59H\b\u001b[K\r\n\t\t\u001b[?25ldmg1\u001b[11;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\t\b\t\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\r\n\n\t\t\u001b[?25ldmg2\r\n\n\n\tinfo2\r\n\tt\n\btcol\n\ntcol\r\n\tinfo2\u001b[11;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\r\n\t\t\u001b[33mdmg1\u001b[39;49m\u001b[A\u001b[C\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;22H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\t\t\t\r\n\n\n\t\t\u001b[?25l\u001b[33mdmg2\u001b[39;49m\r\n\n\n\t\u001b[33minfo2\u001b[39;49m\r\n\t\u001b[33mt\u001b[39;49m\n\b\u001b[33mtcol\u001b[39;49m\n\n\u001b[33mtcol\u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m\u001b[10;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\n\u001b[?25l                \u001b[33md2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp)\u001b[K\u001b[23;36H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l>\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25ldef_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[23;30H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;36H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[13;1H\u001b[1L\u001b[1;24r\u001b[12;1H\u001b[K\n\u001b[?25l                \u001b[33md2\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*def_unit.hp)\u001b[K\u001b[23;36H\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;21H\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\b\u001b[?25l\u001b[33md1\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25ldef_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[12;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[12;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\t\t\t\t\t\t\u001b[1;22r\u001b[14;1H\u001b[1L\u001b[1;24r\u001b[14;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L228\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\b\b\b\b\r\t\b\b\b\b\r\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[14;17H\u001b[?25l\u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-d%%%\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[22;1H            \u001b[33mtcol\u001b[39;49m = t.team.color\u001b[K\u001b[23;36H\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[14;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;15H\u001b[?25ldone\u001b[14;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1@(\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\t\u001b[?25linfo2\r\n\tt\n\btcol\n\ntcol\u001b[15;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[15;70H\b\b\u001b[?25l-))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l))\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l))\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l))\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt))\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;69H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;57H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;20H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33me\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33ms\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mt\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;24H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@e\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@s\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[23;30H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[15;1H\u001b[1M\u001b[1;24r\u001b[13;17H\u001b[?25l\u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-d%%%\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[14;20H\u001b[33m2\u001b[39;49m = \u001b[32m\"-d%%%\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*(def_unit.hp-est))\u001b[22;1H        info2 += [ (t.name,tcol),\u001b[K\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24d\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 6, in <module>\r\n    from core import shell\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 8, in <module>\r\n    from . import game, grid, widgets\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 231\r\n    info2 = []\r\n        ^\r\nSyntaxError: invalid syntax\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[31m# If attack is in the action, we need to get the estimated              \u001b[39;49m\r\n\u001b[A\n        \u001b[31m# damage to show the player.                                            \u001b[39;49m\r\n\u001b[A\n        \u001b[33mdmg1\u001b[39;49m, \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n            \u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\r\n            \u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n            \u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m def_unit:\u001b[K\r\n                \u001b[33mest\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp)\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m est > def_unit.hp:\u001b[K\r\n                    \u001b[33mest\u001b[39;49m = def_unit.hp\u001b[K\r\n                \u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-d%%%\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[K\r\n                \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"-d%%%\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*(def_unit.hp-est))\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\u001b[A\n        info2 = []\u001b[K\r\n        t = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n        tcol = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\r\n            tcol = t.team.color\u001b[K\r\n        info2 += [ (t.name,tcol),\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   43% L227  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[13d\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[12;38H\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;69H\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;69H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[C\u001b[?25l)\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[14;75H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[14;75H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[14;75H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;75H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\t\u001b[?25l\u001b[33minfo2\u001b[39;49m\r\n\t\u001b[33mt\u001b[39;49m\n\b\u001b[33mtcol\u001b[39;49m\n\n\u001b[33mtcol\u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m\u001b[14;75H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;69H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;70H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[13;70H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[13;70H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;70H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\nTraceback (most recent call last):\r\n  File \"./open-tactics.py\", line 6, in <module>\r\n    from core import shell\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 8, in <module>\r\n    from . import game, grid, widgets\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 227\r\n    dmg1 = \"-d%%%\"%(self.matrix[a][d]*(.01*atk_unit.hp)))\r\n                                                        ^\r\nSyntaxError: invalid syntax\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[31m# If attack is in the action, we need to get the estimated              \u001b[39;49m\r\n\u001b[A\n        \u001b[31m# damage to show the player.                                            \u001b[39;49m\r\n\u001b[A\n        \u001b[33mdmg1\u001b[39;49m, \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n            \u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\r\n            \u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n            \u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m def_unit:\u001b[K\r\n                \u001b[33mest\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp)\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m est > def_unit.hp:\u001b[K\r\n                    \u001b[33mest\u001b[39;49m = def_unit.hp\u001b[K\r\n                \u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-d%%%\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp)))\u001b[K\r\n                \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"-d%%%\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*(def_unit.hp-est)))\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n        \u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\r\n            \u001b[33mtcol\u001b[39;49m = t.team.color\u001b[K\r\n        \u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   43% L227  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[13;70H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;69H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l)\r\t\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;70H\u001b[?25l)\r\t\t\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;71H\b\u001b[K\b\u001b[K\b\u001b[?25l )\b\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\r\n\t\t\u001b[?25ldmg2\u001b[13;69H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\t\u001b[?25linfo2\r\n\tt\n\btcol\n\ntcol\r\n\tinfo2\u001b[13;69H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l)\r\n\t\t\u001b[33mdmg2\u001b[39;49m\u001b[A\t\t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[13;69H\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[13;69H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[13;69H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;69H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\n\n\n\n\t\u001b[?25l\u001b[33minfo2\u001b[39;49m\r\n\t\u001b[33mt\u001b[39;49m\n\b\u001b[33mtcol\u001b[39;49m\n\n\u001b[33mtcol\u001b[39;49m\r\n\t\u001b[33minfo2\u001b[39;49m\u001b[13;69H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;69H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[3;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[4;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[5;64H\u001b[34m\u001b[40mBlue\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[11;64Hgrass\u001b[12;64HDEF +?\u001b[8;31H\u001b[3;3H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[A |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H        \u001b[8;31H\u001b[4G\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[20;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mDEF +?\u001b[21;64HHP 100% \u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[15;64H        \u001b[19;73H\u001b[11;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H+------+\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[13;5H\u001b[32m\u001b[40m.\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100% \u001b[11;13H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H\u001b[32m\u001b[40m........\u001b[10;6H........\u001b[11;6H........\u001b[12;6H........\u001b[19;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[20;64H      \u001b[21;64H        \u001b[22;79H\u001b[9;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;1m\u001b[30m\u001b[40mL\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[15;64H        \u001b[22;79H\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H        \u001b[22;79H\u001b[8;4H\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[8;5H+----------+\u001b[9;5H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[10;5H|End Turn  |\u001b[11;5H|Undo      |\u001b[12;5H|Start Over|\u001b[13;5H+----------+\u001b[A\b\u001b[9;6HBack\u001b[10;6H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[12;16H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;68H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40m1\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;5H\u001b[32m\u001b[40m.......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mHello World: Day 1\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;5H\u001b[32m\u001b[40m.......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[10;5H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[11;5H\u001b[32m\u001b[40m............\u001b[12;5H............\u001b[13;5H............\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4G\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H...\u001b[10d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[20;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mDEF +?\u001b[21;64HHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H        \u001b[8;31H\u001b[4G\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[9d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H..\u001b[10d\b.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b[32m\u001b[40m.\u001b[8d.\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-----\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttac\u001b[10;6H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Wait \u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6G\u001b[32m\u001b[40m......\u001b[9;6H......\u001b[10;6H......\u001b[11;6H........\u001b[12;6H........\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\u001b[24d\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 84, in run\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 266, in handle_input\r\n    alerts, i1, i2, i3 = self.world.pump_info(cx,cy)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 224, in pump_info\r\n    est = self.matrix[a][d]*(.01*atk_unit.hp)\r\nUnboundLocalError: local variable 'a' referenced before assignment\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[31m# If attack is in the action, we need to get the estimated              \u001b[39;49m\r\n\u001b[A\n        \u001b[31m# damage to show the player.                                            \u001b[39;49m\r\n\u001b[A\n        \u001b[33mdmg1\u001b[39;49m, \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n            \u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\r\n            \u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n            \u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m def_unit:\u001b[K\r\n                \u001b[33mest\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp)\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m est > def_unit.hp:\u001b[K\r\n                    \u001b[33mest\u001b[39;49m = def_unit.hp\u001b[K\r\n                \u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-d%%%\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[K\r\n                \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"-d%%%\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*(def_unit.hp-est)))\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n        \u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\r\n            \u001b[33mtcol\u001b[39;49m = t.team.color\u001b[K\r\n        \u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   43% L228  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[14;69H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;69H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;58H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;48H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[6;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;25H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1P\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\t\b\t\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[C\u001b[?25lf_unit:\u001b[K\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_unit:\u001b[K\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lunit:\u001b[K\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lnit:\u001b[K\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lit:\u001b[K\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt:\u001b[K\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l:\u001b[K\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lUndo!\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt:\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;23H\u001b[24;1H\u001b[?25lUndo!\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lit:\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;23H\u001b[24;1H\u001b[?25lUndo!\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lnit:\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;23H\u001b[24;1H\u001b[?25lUndo!\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lunit:\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;23H\u001b[24;1H\u001b[?25lUndo!\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_unit:\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;23H\u001b[24;1H\u001b[?25lUndo!\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf_unit:\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;23H\u001b[24;1H\u001b[?25lUndo!\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lef_unit:\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;23H\u001b[24;1H\u001b[?25lUndo!\u001b[9;23H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\t\t\u001b[?25l\u001b[1@t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;17H\u001b[24;1H\u001b[?25lUndo!\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@i\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;17H\u001b[24;1H\u001b[?25lUndo!\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@n\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;17H\u001b[24;1H\u001b[?25lUndo!\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@u\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;17H\u001b[24;1H\u001b[?25lUndo!\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@_\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;17H\u001b[24;1H\u001b[?25lUndo!\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@k\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;17H\u001b[24;1H\u001b[?25lUndo!\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@t\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[9;17H\u001b[24;1H\u001b[?25lUndo!\u001b[9;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\b\b\b\u001b[?25l\u001b[1@\u001b[33mt\u001b[39;49m\u001b[23;36H\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[8;14H\u001b[24;1H\u001b[?25lUndo!\u001b[8;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mi\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[8;14H\u001b[24;1H\u001b[?25lUndo!\u001b[8;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mn\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[8;14H\u001b[24;1H\u001b[?25lUndo!\u001b[8;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mu\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lAuto-saving...\u001b[8;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lUndo!\u001b[K\u001b[8;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[8;14H\u001b[24;1H\u001b[?25lUndo!\u001b[8;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33m_\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[8;14H\u001b[24;1H\u001b[?25lUndo!\u001b[8;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mf\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[8;14H\u001b[24;1H\u001b[?25lUndo!\u001b[8;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33me\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[8;14H\u001b[24;1H\u001b[?25lUndo!\u001b[8;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\u001b[?25l\u001b[1@\u001b[33mt\u001b[39;49m\u001b[23;36H\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[7;14H\u001b[24;1H\u001b[?25lUndo!\u001b[7;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mi\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[7;14H\u001b[24;1H\u001b[?25lUndo!\u001b[7;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mn\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[7;14H\u001b[24;1H\u001b[?25lUndo!\u001b[7;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mu\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[7;14H\u001b[24;1H\u001b[?25lUndo!\u001b[7;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33m_\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[7;14H\u001b[24;1H\u001b[?25lUndo!\u001b[7;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mk\u001b[39;49m\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[7;14H\u001b[24;1H\u001b[?25lUndo!\u001b[7;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[33mt\u001b[39;49m\u001b[23;6H\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[7;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;14H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[8;46H\u001b[1;22r\u001b[9;1H\u001b[1L\u001b[1;24r\u001b[9;1H\u001b[K\u001b[23;6H\u001b[?25l\u001b[7m**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   43% L223\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;13H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;9H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\r\u001b[1;22r\u001b[10;1H\u001b[1M\u001b[1;24r\u001b[9;13H\u001b[?25l\u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m def_unit:\u001b[22;1H        \u001b[33minfo2\u001b[39;49m += [ (t.name,tcol),\u001b[K\n\u001b[C\u001b[C\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[8;46H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\u001b[9;38H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[11;1H\u001b[1L\u001b[1;24r\u001b[10;1H\u001b[K\n\u001b[?25l                \u001b[33mest\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp)\u001b[K\u001b[23;36H\u001b[7m4\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;30H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[10;17H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33ma\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lk\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[12;1H\u001b[1L\u001b[1;24r\u001b[11;1H\u001b[K\n\u001b[?25l                \u001b[33mest\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp)\u001b[K\u001b[23;36H\u001b[7m5\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\t\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\b\b\u001b[?25l\u001b[33md\u001b[39;49m =\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\u001b[?25l\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\u001b[?25ldef_\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[11;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[11;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[11;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[3;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[4;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[5;64H\u001b[34m\u001b[40mBlue\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[11;64Hgrass\u001b[12;64HDEF +?\u001b[8;31H\u001b[3;3H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[A |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H        \u001b[8;31H\u001b[4G\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;4H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[20;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mDEF +?\u001b[21;64HHP 100% \u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[13;3H\u001b[32m\u001b[40m..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[14;3H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Cancel|\u001b[15;4H\u001b[32m\u001b[40m..\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[16;5H\u001b[32m\u001b[40m.\u001b[14;13H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[13;7HWait\u001b[14;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mCancel\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;6H\u001b[32m\u001b[40m........\u001b[13;6H........\u001b[14;6H........\u001b[15;6H........\u001b[19;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[20;64H      \u001b[21;64H        \u001b[22;79H\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[20;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mDEF +?\u001b[21;64HHP 100% \u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[15;64H        \u001b[19;73H\u001b[11;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H+------+\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[13;5H\u001b[32m\u001b[40m.\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100% \u001b[11;13H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H\u001b[32m\u001b[40m........\u001b[10;6H........\u001b[11;6H........\u001b[12;6H........\u001b[19;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[20;64H      \u001b[21;64H        \u001b[22;79H\u001b[9;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;1m\u001b[30m\u001b[40mL\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[15;64H        \u001b[22;79H\u001b[8;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;6H+----------+\u001b[7;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[8;6H|End Turn  |\u001b[9;6H|Undo      |\u001b[10;6H|Start Over|\u001b[11;6H+----------+\u001b[A\b\u001b[7;7HBack\u001b[8;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[10;17H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;68H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40m1\u001b[6;6H\u001b(B\u001b[0m\u001b[32m\u001b[40m............\u001b[7;6H......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;6H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mHello World: Day 1\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;6H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[10;5H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[11;6H\u001b[32m\u001b[40m............\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H...\u001b[10d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[20;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mDEF +?\u001b[21;64HHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H        \u001b[8;31H\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H..\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b[32m\u001b[40m.\u001b[8d.\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-----\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttac\u001b[10;6H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Wait \u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6G\u001b[32m\u001b[40m......\u001b[9;6H......\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m......\u001b[11;6H........\u001b[12;6H........\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\u001b[24d\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>Traceback (most recent call last):\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/shell.py\", line 84, in run\r\n    self.g.handle_input(c)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/grid.py\", line 266, in handle_input\r\n    alerts, i1, i2, i3 = self.world.pump_info(cx,cy)\r\n  File \"/home/isharacomix/Documents/open-tactics/code/core/game.py\", line 229, in pump_info\r\n    dmg1 = \"-d%%%\"%(self.matrix[a][d]*(.01*atk_unit.hp))\r\nValueError: incomplete format\r\n\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[31m# If attack is in the action, we need to get the estimated              \u001b[39;49m\r\n\u001b[A\n        \u001b[31m# damage to show the player.                                            \u001b[39;49m\r\n\u001b[A\n        \u001b[33mdmg1\u001b[39;49m, \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n            \u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\r\n            \u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n            \u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m def_unit:\u001b[K\r\n                \u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n                \u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n                \u001b[33mest\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp)\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m est > def_unit.hp:\u001b[K\r\n                    \u001b[33mest\u001b[39;49m = def_unit.hp\u001b[K\r\n                \u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-d%%%\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[K\r\n                \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"-d%%%\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*(def_unit.hp-est)))\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n        \u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L225  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[11;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m6\u001b[0m\u001b[39;49m\u001b[27m\u001b[12;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m7\u001b[0m\u001b[39;49m\u001b[27m\u001b[13;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m8\u001b[0m\u001b[39;49m\u001b[27m\u001b[14;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;36H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;34H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\b\b\b\b\b\b\b\u001b[?25l\u001b[1@\u001b[32m$\u001b[39;49m\u001b[23;6H\u001b[7m**\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1P\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l\u001b[1@\u001b[32m%\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m30\u001b[0m\u001b[39;49m\u001b[27m\u001b[16;27H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1@\u001b[32m%\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\t\b\b\b\u001b[?25l\u001b[1P\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m29\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\b\b\u001b[?25l\u001b[1P\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lSaving file /home/isharacomix/Documents/open-tactics/code/core/game.py...\u001b[15;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25lWrote /home/isharacomix/Documents/open-tactics/code/core/game.py\u001b[K\u001b[15;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;6H\u001b[?25l\u001b[7m--\u001b[0m\u001b[39;49m\u001b[27m\u001b[15;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\r\n[1]+  Stopped                 emacs\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ fg\b\b./open-tactics.py \r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?25l\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b[37m\u001b[40m\u001b[H\u001b[2J\u001b[2d +------------------------------------------------------------+---------------+\r\u001b[3d |\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b(B\u001b[0m\u001b[32m\u001b[40m.............................\u001b[3;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[4d |\u001b[32m\u001b[40m..............................\u001b[4;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[5d |\u001b[32m\u001b[40m..............................\u001b[5;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[6d |\u001b[32m\u001b[40m..............................\u001b[6;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[7d |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m............................\u001b[7;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[8d |\u001b[32m\u001b[40m..............................\u001b[8;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[9d |\u001b[32m\u001b[40m..............................\u001b[9;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[10d |\u001b[32m\u001b[40m..............................\u001b[10;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+---------------+\r\u001b[11d |\u001b[32m\u001b[40m..............................\u001b[11;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[12d |\u001b[32m\u001b[40m..............................\u001b[12;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[13d |\u001b[32m\u001b[40m..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...........................\u001b[13;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[14d |\u001b[32m\u001b[40m..............................\u001b[14;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[15d |\u001b[32m\u001b[40m..............................\u001b[15;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[16d |\u001b[32m\u001b[40m..............................\u001b[16;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[17d |\u001b[32m\u001b[40m..............................\u001b[17;63H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[79G|\r\u001b[18d |\u001b[18;63H+---------------+\r\u001b[19d |\u001b[19;63H|\u001b[79G|\r\u001b[20d |\u001b[20;63H|\u001b[79G|\r\u001b[21d |\u001b[21;63H|\u001b[79G|\r\u001b[22d |\u001b[22;63H|\u001b[79G|\r\u001b[23d +------------------------------------------------------------+---------------+\u001b[A\b\u001b[3;64H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40mDay 0\u001b[4;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mRed\u001b[5;64H\u001b[34m\u001b[40mBlue\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;12H|\u001b[34m\u001b[40mHello World: Day 0\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;12H|\u001b[34m\u001b[40mBlue Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m       |\u001b[10;12H+-------------------+\u001b[11;64Hgrass\u001b[12;64HDEF +?\u001b[8;31H\u001b[3;3H\u001b[32m\u001b[40m.\u001b[4d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;3H\u001b[32m\u001b[40m.\u001b[5d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5;3H\u001b[32m\u001b[40m.\u001b[6d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6;3H\u001b[32m\u001b[40m.\u001b[7d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[A |\u001b[32m\u001b[40m.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b[8d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H        \u001b[8;31H\u001b[4G\u001b[32m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;4H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;4H\u001b[32m\u001b[40m.\u001b[11d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m.\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;5H\u001b[32m\u001b[40m.\u001b[12d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b[32m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[11d\b\b...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[20;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mDEF +?\u001b[21;64HHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[13d\b\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[15;64H        \u001b[8;31H\u001b[11;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[12d\b\u001b[32m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[10;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[11d\b\u001b[32m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b[32m\u001b[40m...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[11;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[12;3H.....\u001b[13;3H..\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[14;3H.....\u001b[15;4H...\u001b[16d\b\b.\u001b[19;73H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H+------+\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mWait\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\u001b[11;4H\u001b[32m\u001b[40m..\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Cancel|\u001b[12;3H\u001b[32m\u001b[40m...\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[13;3H\u001b[32m\u001b[40m......\u001b[14;3H.....\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;4H\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[15;64H\u001b[34m\u001b[40mHP 100% \u001b[16;5H\u001b[32m\u001b[40m.\u001b[11;13H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;6H\u001b[32m\u001b[40m........\u001b[10;6H........\u001b[11;6H........\u001b[12;6H........\u001b[19;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[20;64H      \u001b[21;64H        \u001b[22;79H\u001b[9;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;1m\u001b[30m\u001b[40mL\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m         \u001b[15;64H        \u001b[22;79H\u001b[8;6H+----------+\u001b[9;6H|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mBack\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m      |\u001b[10;6H|End Turn  |\u001b[11;6H|Undo      |\u001b[12;6H|Start Over|\u001b[13;6H+----------+\u001b[A\b\u001b[9;7HBack\u001b[10;7H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mEnd Turn\u001b[12;17H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[3;68H\u001b(B\u001b[0;1m\u001b[39;49m\u001b[37m\u001b[40m1\u001b[7;12H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[8;6H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mHello World: Day 1\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m |\u001b[9;6H\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[31m\u001b[40mRed Advance\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        |\u001b[10;5H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m......\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-------------------+\u001b[11;6H\u001b[32m\u001b[40m............\u001b[12;6H............\u001b[13;6H............\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5G\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[9d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;5H\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8d\b\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m.\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[0;7m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H...\u001b[10d\b\b.\u001b[19;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[20;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mDEF +?\u001b[21;64HHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b(B\u001b[0;1;7m\u001b[31m\u001b[40mi\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H        \u001b[8;31H\u001b[7;5H\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[8d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[5G\u001b(B\u001b[0;7m\u001b[32m\u001b[40m.\u001b[9d\b\u001b[39;49m\u001b[37m\u001b[40m.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[4;4H\u001b[32m\u001b[40m.\u001b[5d\b\b...\u001b[6;3H....\u001b[7;3H.\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b(B\u001b[0m\u001b[32m\u001b[40m...\u001b[8;3H....\u001b[9;3H..\u001b[10d\b.\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;4H\u001b[32m\u001b[40m.\u001b[8d.\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+-----\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40mAttac\u001b[10;6H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|Wait \u001b[11;6H|Cancel|\u001b[12;6H+------+\u001b[14;64H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mInfantry\u001b[15;64H\u001b(B\u001b[0m\u001b[31m\u001b[40mHP 100% \u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[6G\u001b[32m\u001b[40m......\u001b[9;6H......\u001b[10;5H\u001b(B\u001b[0;1;7m\u001b[34m\u001b[40mL\u001b(B\u001b[0m\u001b[32m\u001b[40m......\u001b[11;6H........\u001b[12;6H........\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1m\u001b[31m\u001b[40mi\u001b[10d\b\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mL\u001b[14;64H\u001b(B\u001b[0;1m\u001b[34m\u001b[40mArtillery\u001b[15;64H\u001b(B\u001b[0m\u001b[34m\u001b[40mHP 100% -10%\u001b[21;72H\u001b[31m\u001b[40m-63%\u001b[8;31H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[7;12H\u001b[32m\u001b[40m.....................\u001b[8;12H.....................\u001b[9;12H.....................\u001b[10;12H.....................\u001b[19;72H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[6d------+\r\u001b[7d\u001b[31m\u001b[40m100%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m  |\r\u001b[8d------+\u001b[9;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40mi\u001b[11d\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m+------+\u001b[12;6H|\u001b[34m\u001b[40m99%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m   |\u001b[13;6H+------+\u001b[15;67H\u001b[34m\u001b[40m90% \u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m     \u001b[19;64H        \u001b[20;64H      \u001b[21;64H            \u001b[7;5H\u001b[12;8H\u001b[34m\u001b[40m8\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[34m\u001b[40m7\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[34m\u001b[40m6\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9d\u001b(B\u001b[0;1m\u001b[30m\u001b[40m4\u001b[12;8H\u001b(B\u001b[0m\u001b[34m\u001b[40m5\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[34m\u001b[40m4\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[34m\u001b[40m3\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[34m\u001b[40m2\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[34m\u001b[40m1\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[12;8H\u001b[34m\u001b[40m0\u001b[7;5H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[31m\u001b[40m99%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \b\b\b\u001b[31m\u001b[40m8%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m7%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m6%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m5%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m4%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m3%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m2%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m1%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m0%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[31m\u001b[40m89%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m8%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m7%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m6%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m5%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m4%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m3%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m2%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m1%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m0%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[31m\u001b[40m79%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m8%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m7%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m6%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m5%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m4\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m4\u001b[10d\b\u001b(B\u001b[0;1m\u001b[34m\u001b[40mL\u001b[14;64H\u001b[31m\u001b[40mInfantry\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m \u001b[15;64H\u001b[31m\u001b[40mHP 37% \u001b[7;4H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m3%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m2%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m1%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m0%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[31m\u001b[40m69%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m8%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m7%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m6%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m5%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m4%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m3%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m2%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m1%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m0%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[31m\u001b[40m59%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m8%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m7%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m6%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m5\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40mi\u001b[7d\b\b\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m4%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m3%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m2%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m1%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m0%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[31m\u001b[40m49%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m8%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m7%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m6%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m5%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m4%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m3%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m2%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m1%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m0%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\r\u001b[31m\u001b[40m39%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m8%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\b\b\u001b[31m\u001b[40m7%\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1;7m\u001b[39;49m\u001b[37m\u001b[40m4\u001b[7d\b\b\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[A\b\b|\u001b[32m\u001b[40m.....\u001b[7;2H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m.....\u001b[8;2H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m|\u001b[32m\u001b[40m.....\u001b[11d\b\b........\u001b[12;6H........\u001b[13;6H........\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m4\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[14;64H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m        \u001b[15;64H       \u001b[22;79H\u001b[9;6H\u001b[32m\u001b[40m.\u001b[10d\b\u001b(B\u001b[0;7m\u001b[39;49m\u001b[37m\u001b[40m.\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40mi\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40m4\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[9;5H\u001b(B\u001b[0;1m\u001b[30m\u001b[40mi\u001b[22;79H\u001b(B\u001b[m\u001b[39;49m\u001b[37m\u001b[40m\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[39;49m\r\n\n\u001b[K\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ ./open-tactics.py \b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bfg\u001b[K\r\nemacs\r\n\u001b[?1049h\u001b[?12;25h\u001b[?1h\u001b=\u001b[24;1H\u001b[K\u001b[H\u001b[?25l\u001b[7mFile Edit Options Buffers Tools Python Help                                     \u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\n        \u001b[31m# If attack is in the action, we need to get the estimated              \u001b[39;49m\r\n\u001b[A\n        \u001b[31m# damage to show the player.                                            \u001b[39;49m\r\n\u001b[A\n        \u001b[33mdmg1\u001b[39;49m, \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"\"\u001b[39;49m,\u001b[32m\"\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m \u001b[32m\"Attack\"\u001b[39;49m \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m (x,y) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.choices:\u001b[K\r\n            \u001b[33max\u001b[39;49m,\u001b[33may\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.action[1]\u001b[K\r\n            \u001b[33matk_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(ax,ay)\u001b[K\r\n            \u001b[33mdef_unit\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.unit_at(x,y)\u001b[K\r\n            \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m atk_unit \u001b[1m\u001b[36mand\u001b[0m\u001b[39;49m def_unit:\u001b[K\r\n                \u001b[33ma\u001b[39;49m = atk_unit.icon\u001b[K\r\n                \u001b[33md\u001b[39;49m = def_unit.icon\u001b[K\r\n                \u001b[33mest\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp)\u001b[K\r\n                \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m est > def_unit.hp:\u001b[K\r\n                    \u001b[33mest\u001b[39;49m = def_unit.hp\u001b[K\r\n                \u001b[33mdmg1\u001b[39;49m = \u001b[32m\"-%d%%\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[a][d]*(.01*atk_unit.hp))\u001b[K\r\n                \u001b[33mdmg2\u001b[39;49m = \u001b[32m\"-%d%%\"\u001b[39;49m%(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.matrix[d][a]*(.01*(def_unit.hp-est)))\u001b[K\r\n\u001b[K\n        \u001b[31m# Info 2 is for the intel on the hovering tile.                         \u001b[39;49m\r\n\u001b[A\n        \u001b[33minfo2\u001b[39;49m = []\u001b[K\r\n        \u001b[33mt\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.grid.tile_at(x,y)\u001b[K\r\n        \u001b[33mtcol\u001b[39;49m = \u001b[32m\"w\"\u001b[39;49m\u001b[K\r\n        \u001b[1m\u001b[36mif\u001b[0m\u001b[39;49m t.team:\u001b[K\r\n\u001b[7m-UU-:----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mgame.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   42% L229  Git:master  (Python) ---------------------\u001b[0m\u001b[39;49m\u001b[27m\r\n\u001b[A\u001b[15;28H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default grid.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mPython Help \u001b[0m\u001b[39;49m\u001b[27m\r\n\t        \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.grid = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.grid\u001b[K\r\n\u001b[K\n\t\u001b[31m# Get intel from the world's information method.                        \u001b[39;49m\r\n\t\u001b[33mcx\u001b[39;49m,\u001b[33mcy\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.cursor\u001b[K\r\n\t\u001b[33malerts\u001b[39;49m, \u001b[33mi1\u001b[39;49m, \u001b[33mi2\u001b[39;49m, \u001b[33mi3\u001b[39;49m = \u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.world.pump_info(cx,cy)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.alerts += alerts\u001b[K\r\n\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m (info,buff) \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m ((i1,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1),(i2,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2),(i3,\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3)):\r\n\t\t\binfo \u001b[1m\u001b[36mis\u001b[0m\u001b[39;49m \u001b[1m\u001b[36mnot\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m:\u001b[K\r\n\t\tbuff.clear()\u001b[K\r\n\t\t\u001b[1m\u001b[36mfor\u001b[0m\u001b[39;49m s,c \u001b[1m\u001b[36min\u001b[0m\u001b[39;49m info:\u001b[K\r\n\t\t    buff.write(s,c)\u001b[K\r\n\t\u001b[1m\u001b[36mreturn\u001b[0m\u001b[39;49m \u001b[35mNone\u001b[39;49m\u001b[K\r\n\u001b[K\u001b[15;5H\u001b[31m# Draw the grid to the terminal using the gfx library. Specify the          \u001b[39;49m\r\n\u001b[16;5H\u001b[31m# x,y and w,h of the viewport in the terminal, and the cx,cy of the         \u001b[39;49m\r\n\u001b[17;5H\u001b[31m# top-left of the map (including outside of the map).                       \u001b[39;49m\r\n\u001b[18;5H\u001b[1m\u001b[36mdef\u001b[0m\u001b[39;49m \u001b[1m\u001b[34mdraw\u001b[0m\u001b[39;49m(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m, x, y, col=\u001b[35mNone\u001b[39;49m):\u001b[K\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.cam.draw(x,y)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff1.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff2.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+8)\r\n\t\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.buff3.draw(x+(\u001b[1m\u001b[36mself\u001b[0m\u001b[39;49m.w-15),y+16)\u001b[23;15H\u001b[7m\u001b[1mrid.py     \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   88% L265\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[?25l\u001b[34mSwitch to buffer (default game.py): \u001b[39;49m\u001b[1;33H\u001b[7mMinibuf Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lgame.py\b\b\b\b\b\b\b\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lwidgets.py\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lshell.py\u001b[K\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l*scratch*\u001b[24;37H\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[K\u001b[1;33H\u001b[?25l\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[2;4HBlue  $300\u001b[K\u001b[3;4H----------\u001b[4;4HPlains     This is the information for the cell you are currently hovering\u001b[K\u001b[5;4HDEF +1     over\u001b[K\r\n\u001b[K\u001b[7;4HInfantry\u001b[K\u001b[8;4HHP 86%\u001b[K\r\n\u001b[K\u001b[10;4H----------\u001b[K\u001b[11;4HInfantry   This is the information for the unit you currently have selected\u001b[12;4HDEF +2\u001b[K\u001b[13;4HHP 99%\u001b[K\u001b[14;4H----------\r\n\u001b[K\nI think that's enough windows. Right now I'm not going to worry about making\u001b[K\r\nit abstract. We're prototyping.\u001b[K\r\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\u001b[23;4H\u001b[7mU:**--F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1m*scratch*   \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m   Bot L38    (Lisp Interaction) -\u001b[0m\u001b[39;49m\u001b[27m\u001b[17;32H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m9\u001b[0m\u001b[39;49m\u001b[27m\u001b[18;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m0\u001b[0m\u001b[39;49m\u001b[27m\u001b[19;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lT\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l'\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lw\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lh\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lI\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lc\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lf\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25lp\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lr\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lm\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25li\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[20;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m3\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[21;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lW\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lg\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\t\b\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ll\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ln\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25le\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lt\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lG\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25lo\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[C\u001b[?25lu\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ls\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l.\u001b[?12l\u001b[?25h\u001b[?12;25h\t\u001b[?25l:\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[?25l\u001b[1m\u001b[34m:D\u001b[0m\u001b[39;49m\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[H\n\u001b[K\n\u001b[?25lOK. I learned my lesson. Don't paste big buffers of text into emacs. It kinda\r\nlocks it up. I think what was killing it was trying to match the curly braces.\r\n\u001b[K\nThat aside, we've still managed to get a lot coded.\r\n\u001b[K\n\u001b[C* Little popup when a turn begins\r\n\u001b[C* History is stored in the JSON of the rules dictionary\r\n\u001b[C* The game replays its history when a new rules object is created\r\n\u001b[C* You can export the json structure of a game to a string (which can trivially\u001b[12;4Hbe saved to a file... I'll figure that out much later).\r\n\u001b[K\nThe other thing I really wanted to get around to was a nice sidebar on the\r\nright side of the terminal that has all of the information for the tiles you\r\nhover over. I image three boxes.\u001b[K\r\n\u001b[K\u001b[18;4H----------\r\n   Day 1      The top frame is global information. All the teams and their\u001b[20;4HRed   $300 current cash.\r\n   Blue  $300\u001b[K\u001b[22;4H----------\u001b[23;29H\u001b[7m13% L24\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2;4H\u001b[?25lBlue  $300\r\n   ----------\u001b[K\r\n   Plains     This is the information for the cell you are currently hovering\u001b[K\u001b[5;4HDEF +1     over\r\n\u001b[K\u001b[7;4HInfantry\r\n\u001b[C  HP 86%\u001b[K\r\n\u001b[K\n\u001b[C  ----------\u001b[K\r\n\u001b[C  Infantry   This is the information for the unit you currently have selected\u001b[K\u001b[12;4HDEF +2\u001b[K\u001b[13;4HHP 99%\r\n   ----------\u001b[K\r\n\u001b[K\nI think that's enough windows. Right now I'm not going to worry about making\r\nit abstract. We're prototyping.\r\n\u001b[K\nThat's what I call a successful day of programming.\u001b[K\r\n\u001b[K\nWe got a lot done today. Go us. \u001b[1m\u001b[34m:D\u001b[0m\u001b[39;49m\r\n\u001b[K\u001b[23;29H\u001b[7mBot\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\u001b[K\n\u001b[?25lOK. I learned my lesson. Don't paste big buffers of text into emacs. It kinda\r\nlocks it up. I think what was killing it was trying to match the curly braces.\r\n\u001b[K\nThat aside, we've still managed to get a lot coded.\r\n\u001b[K\n\u001b[C* Little popup when a turn begins\r\n\u001b[C* History is stored in the JSON of the rules dictionary\r\n\u001b[C* The game replays its history when a new rules object is created\r\n\u001b[C* You can export the json structure of a game to a string (which can trivially\u001b[12;4Hbe saved to a file... I'll figure that out much later).\r\n\u001b[K\nThe other thing I really wanted to get around to was a nice sidebar on the\r\nright side of the terminal that has all of the information for the tiles you\r\nhover over. I image three boxes.\u001b[K\r\n\u001b[K\u001b[18;4H----------\r\n   Day 1      The top frame is global information. All the teams and their\u001b[20;4HRed   $300 current cash.\r\n   Blue  $300\u001b[K\u001b[22;4H----------\u001b[23;29H\u001b[7m13%\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;22r\u001b[3;1H\u001b[3L\u001b[1;24r\u001b[2;1H\u001b[?25l\u001b[31m;; This buffer is for notes you don't want to save, and for Lisp evaluation.    \u001b[39;49m\r\n\u001b[31m;; If you want to create a file, visit that file with C-x C-f,                  \u001b[39;49m\r\n\u001b[A\n\u001b[31m;; then enter the text in that file's own buffer.                               \u001b[39;49m\r\n\u001b[A\n\u001b[K\u001b[23;29H\u001b[7mTop L21\u001b[0m\u001b[39;49m\u001b[27m\r\u001b[A\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[2d\u001b[?25l   ----------\u001b[K\r\n   Day 1      The top frame is global information. All the teams and their\u001b[K\r\n   Red   $300 current cash.\u001b[K\u001b[5;4HBlue  $300\r\n   ----------\u001b[K\r\n   Plains     This is the information for the cell you are currently hovering\u001b[K\u001b[8;4HDEF +1     over\r\n\u001b[K\u001b[10;4HInfantry\r\n\u001b[C  HP 86%\u001b[K\r\n\u001b[K\n\u001b[C  ----------\u001b[K\r\n\u001b[C  Infantry   This is the information for the unit you currently have selected\u001b[K\u001b[15;4HDEF +2\u001b[K\u001b[16;4HHP 99%\r\n   ----------\u001b[K\r\n\u001b[K\nI think that's enough windows. Right now I'm not going to worry about making\r\nit abstract. We're prototyping.\r\n\u001b[K\nThat's what I call a successful day of programming.\u001b[K\u001b[23;29H\u001b[7m60%\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[A\u001b[K\n\u001b[?25lThat's what I call a successful day of programming.\u001b[K\r\n\u001b[K\nWe got a lot done today. Go us. \u001b[1m\u001b[34m:D\u001b[0m\u001b[39;49m\r\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\u001b[K\n\n\u001b[K\n\u001b[K\n\n\u001b[K\u001b[23;29H\u001b[7mBot L39\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;34H\u001b[?25l\u001b[7m40\u001b[0m\u001b[39;49m\u001b[27m\u001b[H\n\n\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m1\u001b[0m\u001b[39;49m\u001b[27m\u001b[4;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[23;35H\u001b[?25l\u001b[7m2\u001b[0m\u001b[39;49m\u001b[27m\u001b[5;1H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[5;35H\u001b[24;1H\u001b[?25l(No files need saving)\u001b[5;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[5;35H\u001b[24;1H\u001b[?25l\u001b[34mFile to save in: \u001b[39;49m~/Documents/open-tactics/\u001b[1;33H\u001b[7mMinibuf Help         \u001b[0m\u001b[39;49m\u001b[27m\u001b[24;43H\u001b[?12l\u001b[?25h\u001b[?12;25h\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\b\u001b[K\u001b[?25ld\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25la\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25ly\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l1\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[?25l0\u001b[?12l\u001b[?25h\u001b[?12;25h\r\u001b[?25lWrote /home/isharacomix/day10\u001b[5;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[1;33H\u001b[?25l\u001b[7mLisp-Interaction Help\u001b[0m\u001b[39;49m\u001b[27m\u001b[23;6H\u001b[7m----F1  \u001b[0m\u001b[39;49m\u001b[27m\u001b[7m\u001b[1mday10    \u001b[0m\u001b[39;49m\u001b[27m\u001b[5;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[5;35H\u001b[24;1H\u001b[?25l(No files need saving)\u001b[5;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[5;35H\u001b[24;1H\u001b[?25l(No files need saving)\u001b[5;35H\u001b[?12l\u001b[?25h\u001b[?12;25h\u001b[24;1H\u001b[K\u001b[?1l\u001b>\u001b[?12l\u001b[?25h\u001b[?1049l\u001b[39;49m\r\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ git add -A .\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ git commit -am \"\b\u001b[K\b\u001b[K\b\u001b[K\r\n\u001b[?1049h\u001b[1;24r\u001b(B\u001b[m\u001b[4l\u001b[?7h\u001b[?12l\u001b[?25h\u001b[?1h\u001b=\u001b[?1h\u001b=\u001b[?1h\u001b=\u001b[39;49m\u001b[39;49m\u001b(B\u001b[m\u001b[H\u001b[2J\u001b(B\u001b[0;7m  GNU nano 2.2.6           File: .git/COMMIT_EDITMSG                            \u001b[4;1H\u001b(B\u001b[m# Please enter the commit message for your changes. Lines starting\r\u001b[5d# with '#' will be ignored, and an empty message aborts the commit.\r\u001b[6d# On branch master\r\u001b[7d# Changes to be committed:\r\u001b[8d#   (use \"git reset HEAD <file>...\" to unstage)\r\u001b[9d#\u001b[10d\b#\u001b[9Gmodified:   code/core/game.py\r\u001b[11d#\u001b[9Gmodified:   code/core/grid.py\r\u001b[12d#\u001b[9Gmodified:   code/core/shell.py\r\u001b[13d#\u001b[9Gmodified:   code/core/widgets.py\r\u001b[14d#\u001b[9Gmodified:   code/graphics/gfx_ascii.py\r\u001b[15d#\u001b[22;32H\u001b(B\u001b[0;7m[ Read 13 lines ]\r\u001b[23d^G\u001b(B\u001b[m Get Help  \u001b(B\u001b[0;7m^O\u001b(B\u001b[m WriteOut  \u001b(B\u001b[0;7m^R\u001b(B\u001b[m Read File \u001b(B\u001b[0;7m^Y\u001b(B\u001b[m Prev Page \u001b(B\u001b[0;7m^K\u001b(B\u001b[m Cut Text  \u001b(B\u001b[0;7m^C\u001b(B\u001b[m Cur Pos\r\u001b[24d\u001b(B\u001b[0;7m^X\u001b(B\u001b[m Exit\u001b[14G\u001b(B\u001b[0;7m^J\u001b(B\u001b[m Justify   \u001b(B\u001b[0;7m^W\u001b(B\u001b[m Where Is  \u001b(B\u001b[0;7m^V\u001b(B\u001b[m Next Page \u001b(B\u001b[0;7m^U\u001b(B\u001b[m UnCut Text\u001b(B\u001b[0;7m^T\u001b(B\u001b[m To Spell\r\u001b[3d\u001b[2;21r\u001b[2;1H\u001bM\u001b[1;24r\u001b[1;71H\u001b(B\u001b[0;7mModified\r\u001b[4d\u001b(B\u001b[m\u001b[AMst\b \b\b \b\b\u001b[KWorkd\b \bed on UIO\b \b.\r\u001b[22d\u001b[K\u001b[3;14H\u001b7\u001b[4;22r\u001b8\r\u001b[4d\u001bM\u001b[1;24r\u001b[4;1H * Intel appears in right sidebar. Unit data and ter\b \b\b \b\b \bdama\b \b\b \b\b \b\b \bcombat damaage \b\b \b\b \b\b \bge prediciotn\b \b\b \b\b \b\b \btion.\u001b7\u001b[5;22r\u001b8\r\u001b[5d\u001bM\u001b[1;24r\u001b[5;1H 8\r\u001b[K * A pa\b \bop-up appears at the beginning of each turn.\u001b7\u001b[6;22r\u001b8\r\u001b[6d\u001bM\u001b[1;24r\u001b[6;1H * History stored in j\b \bJSON dictionary a\b \b\b. History sui\b \b\b \biml\b \bulated when gamei\b \b is loaded.\r\u001b[22d\u001b(B\u001b[0;7mSave modified buffer (ANSWERING \"No\" WILL DESTROY CHANGES) ?                    \u001b[23;1H Y\u001b(B\u001b[m Yes\u001b[K\r\u001b[24d\u001b(B\u001b[0;7m N\u001b(B\u001b[m No  \u001b[14G   \u001b(B\u001b[0;7m^C\u001b(B\u001b[m Cancel\u001b[K\u001b[22;62H\r\u001b(B\u001b[0;7mFile Name to Write: .git/COMMIT_EDITMSG                     \r\u001b[23d^G\u001b(B\u001b[m Get Help\u001b[23;21H\u001b(B\u001b[0;7mM-D\u001b(B\u001b[m DOS Format\u001b[41G\u001b(B\u001b[0;7mM-A\u001b(B\u001b[m Append\u001b[23;61H\u001b(B\u001b[0;7mM-B\u001b(B\u001b[m Backup File\r\u001b[24d\u001b(B\u001b[0;7m^C\u001b(B\u001b[m Cancel\u001b[17G    \u001b(B\u001b[0;7mM-M\u001b(B\u001b[m Mac Format\u001b[41G\u001b(B\u001b[0;7mM-P\u001b(B\u001b[m Prepend\u001b[22;40H\r\u001b[23d\u001b[39;49m\u001b(B\u001b[m\u001b[J\u001b[1;71H\u001b(B\u001b[0;7m        \u001b[22;31H\u001b(B\u001b[m\u001b[1K \u001b(B\u001b[0;7m[ Wrote 17 lines ]\u001b(B\u001b[m\u001b[K\u001b[24;80H\u001b[24;1H\u001b[?1049l\r\u001b[?1l\u001b>[master 7f2a81c] Worked on UI.  * Intel appears in right sidebar. Unit data and combat damage prediction.  * A pop-up appears at the beginning of each turn.  * History stored in JSON dictionary. History simulated when game is loaded.\r\n 5 files changed, 146 insertions(+), 31 deletions(-)\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ git push\r\nCounting objects: 19, done.\r\nDelta compression using up to 2 threads.\r\nCompressing objects:  10% (1/10)   \rCompressing objects:  20% (2/10)   \rCompressing objects:  30% (3/10)   \rCompressing objects:  40% (4/10)   \rCompressing objects:  50% (5/10)   \rCompressing objects:  60% (6/10)   \rCompressing objects:  70% (7/10)   \rCompressing objects:  80% (8/10)   \rCompressing objects:  90% (9/10)   \rCompressing objects: 100% (10/10)   \rCompressing objects: 100% (10/10), done.\r\nWriting objects:  10% (1/10)   \rWriting objects:  20% (2/10)   \rWriting objects:  30% (3/10)   \rWriting objects:  40% (4/10)   \rWriting objects:  50% (5/10)   \rWriting objects:  60% (6/10)   \rWriting objects:  70% (7/10)   \rWriting objects:  80% (8/10)   \rWriting objects:  90% (9/10)   \rWriting objects: 100% (10/10)   \rWriting objects: 100% (10/10), 2.74 KiB | 0 bytes/s, done.\r\nTotal 10 (delta 7), reused 0 (delta 0)\r\nTo git@github.com:isharacomix/open-tactics\r\n   e6a193a..7f2a81c  master -> master\r\n\u001b]0;isharacomix@beatrix: ~/Documents/open-tactics\u0007isharacomix@beatrix:~/Documents/open-tactics$ exit\r\n\nScript done on Sun 12 Jan 2014 11:53:18 PM EST\n","rows":24,"timing":"0.308972 50\n0.275550 1\n1.185687 1\n0.063811 1\n0.071931 1\n0.104020 1\n0.144039 1\n0.063763 7\n0.125835 1\n0.354045 12\n0.125674 98\n0.444229 1\n0.782156 1\n0.127904 1\n0.056200 1\n0.096084 1\n0.087834 2\n0.207201 24\n0.008897 7\n0.038285 44\n0.000030 24\n0.000620 7\n0.001535 188\n0.007569 63\n0.007623 43\n0.001544 87\n0.000761 43\n0.002370 73\n0.000736 57\n0.003598 106\n0.026245 124\n0.003328 68\n0.000026 276\n0.000206 11\n0.002032 55\n0.000029 104\n0.000690 43\n0.001390 87\n0.000390 5\n0.021277 457\n0.000979 103\n0.021923 35\n0.000017 188\n0.013784 977\n0.000089 528\n0.000128 12\n0.635207 102\n0.219080 29\n0.000102 565\n0.175676 136\n0.727008 63\n0.207807 28\n0.695317 28\n0.096867 28\n0.055184 28\n0.088001 4\n0.384044 4\n0.136090 4\n0.119858 4\n0.103977 28\n0.080222 28\n0.119784 28\n0.063989 28\n0.063977 28\n0.104072 3\n0.103968 28\n0.095794 28\n0.112237 3\n0.127996 28\n0.096068 28\n0.103976 28\n0.256060 28\n0.079959 28\n0.119829 2\n0.079970 28\n0.168285 28\n0.007791 3\n0.055861 28\n0.144585 28\n0.119364 28\n0.007895 3\n0.080317 28\n0.079859 8\n0.296267 1\n0.112143 4\n0.135943 3\n0.199944 28\n0.063660 2\n0.056014 28\n0.176328 28\n0.175950 28\n0.128123 3\n0.160011 28\n0.127958 28\n0.040017 28\n0.151956 28\n7.392136 63\n0.344438 63\n0.127902 63\n0.127654 64\n0.128375 63\n0.296316 63\n0.111211 28\n0.736071 28\n0.207762 28\n0.064122 28\n0.047781 3\n0.072554 28\n0.127726 28\n0.055639 28\n0.112487 3\n0.047773 28\n0.087626 3\n0.032456 28\n0.175829 28\n0.143747 28\n0.248325 2\n0.079857 28\n0.160069 28\n0.120375 4\n0.255668 28\n0.097253 3\n0.102707 28\n0.136313 28\n0.143731 28\n0.144106 28\n0.103594 28\n0.072246 1\n0.095745 28\n0.072244 28\n0.071797 28\n0.064068 3\n0.088048 28\n0.087882 28\n0.112294 28\n0.095875 28\n0.031902 28\n0.128139 28\n0.288319 3\n0.063824 28\n0.159888 28\n0.087961 28\n0.143912 28\n0.103897 1\n0.039971 28\n0.056297 28\n0.112251 28\n0.047654 28\n0.112311 28\n0.505213 28\n0.166823 28\n0.039839 28\n0.071389 3\n0.112716 28\n0.072025 28\n0.063705 28\n0.096090 28\n0.152141 28\n0.079797 2\n0.071853 28\n0.144404 28\n0.071907 28\n0.152142 28\n0.111918 28\n0.063674 28\n0.200038 28\n0.064042 28\n0.112330 28\n0.031674 3\n0.111992 28\n0.080074 28\n0.128265 28\n0.111568 3\n0.232418 28\n0.271696 28\n0.120118 28\n0.135992 28\n0.047833 28\n0.120318 28\n0.160016 28\n0.015731 98\n0.392493 28\n0.135504 28\n0.104087 28\n0.064092 3\n0.103986 28\n0.079945 28\n0.072176 4\n0.319794 8\n0.103975 28\n0.232002 28\n0.184010 28\n0.120001 1\n0.064640 28\n0.039539 28\n0.071864 28\n0.023768 28\n0.096290 28\n0.135907 3\n0.096082 28\n0.065039 28\n0.071305 3\n0.119545 28\n0.256024 28\n0.031955 28\n0.176142 28\n0.151862 28\n0.079671 28\n0.152310 28\n0.103835 4\n0.272180 4\n0.104098 28\n0.168227 28\n0.063840 28\n0.087937 28\n0.047797 3\n0.120402 28\n0.064019 28\n0.119800 28\n0.256045 28\n0.120011 1\n0.095942 28\n0.120062 28\n0.071720 28\n0.136376 28\n0.055758 28\n0.343889 99\n0.368839 100\n0.135604 99\n0.672090 64\n0.232517 28\n2.319024 28\n0.120307 28\n0.079474 28\n0.040365 3\n0.103854 28\n0.232286 28\n0.315233 1\n0.068611 28\n0.247819 28\n0.176222 28\n0.055631 28\n0.048257 3\n0.120152 28\n0.111970 2\n0.143695 28\n0.168098 28\n0.136108 28\n0.055974 28\n0.111704 3\n0.096010 28\n0.095935 28\n0.008054 2\n0.168328 28\n0.127946 28\n0.039732 28\n0.088019 4\n0.360803 4\n0.111681 7\n0.119653 28\n0.120463 28\n0.351842 4\n0.216018 7\n0.111835 28\n0.104036 28\n0.047920 3\n0.255843 28\n0.160117 28\n0.128041 28\n0.095762 28\n0.039930 28\n0.136340 1\n0.112158 28\n0.087535 28\n0.056434 3\n1.064027 28\n0.495706 28\n0.104014 28\n0.120659 2\n0.079418 28\n0.103611 28\n0.088418 4\n0.183830 7\n0.111993 1\n0.376369 28\n0.576065 28\n0.319513 28\n0.200432 28\n0.127913 4\n0.231778 4\n0.112062 28\n0.063817 28\n0.111865 28\n0.104167 28\n0.104238 28\n0.071804 28\n0.120026 28\n0.104079 1\n0.087889 28\n0.088297 28\n0.071596 28\n0.072136 3\n0.095813 28\n0.168198 28\n0.039806 28\n0.064154 28\n0.128348 28\n0.063881 3\n0.103711 28\n0.136490 28\n0.143761 28\n0.056091 28\n0.047964 2\n0.087970 28\n0.071750 28\n0.080370 28\n0.119635 3\n0.071988 28\n0.080098 28\n0.032328 28\n0.127670 2\n0.111733 28\n0.096077 28\n0.040455 28\n0.119933 28\n0.079547 4\n0.288610 28\n0.153846 28\n0.142143 99\n0.144199 28\n0.224554 28\n0.191234 28\n0.119549 3\n0.072568 28\n0.159605 28\n0.223932 28\n0.168072 28\n0.007608 4\n0.376309 4\n0.080016 28\n0.152044 28\n0.088059 3\n0.096043 28\n0.071707 28\n0.104574 3\n0.079655 28\n0.872311 28\n0.303717 28\n0.160101 28\n0.127913 28\n0.047924 28\n0.152567 28\n0.167451 28\n0.151995 28\n0.096077 28\n0.071875 28\n0.320422 4\n1.095706 28\n0.224140 99\n0.448737 3\n0.151361 3\n0.159862 1\n0.479797 28\n0.575943 3\n0.128297 28\n4.808112 28\n0.239685 3\n0.072820 28\n0.039107 28\n0.312446 28\n0.255595 28\n0.047903 28\n0.136105 3\n0.111770 28\n0.104100 28\n0.120417 28\n0.055589 28\n0.032095 3\n0.112272 28\n0.199740 28\n0.135959 28\n0.144044 28\n0.112323 3\n0.087692 28\n0.152396 28\n0.183948 3\n0.095495 28\n0.071775 28\n0.056527 28\n0.135954 28\n0.088383 3\n0.119608 28\n0.176158 1\n0.079525 28\n0.176341 28\n0.143847 28\n0.031922 28\n0.128009 28\n0.047897 3\n0.112055 28\n0.112441 28\n0.111988 28\n0.079924 28\n0.056023 4\n0.560422 4\n0.135667 4\n0.144741 8\n0.151281 1\n0.144673 4\n0.143139 4\n0.119736 4\n0.112024 28\n0.720425 4\n0.376031 28\n0.039371 28\n0.169082 28\n0.070885 28\n0.048234 2\n0.176046 28\n0.120256 28\n0.103572 28\n0.079719 28\n0.040442 3\n0.088054 28\n0.119964 28\n0.079594 28\n0.104513 28\n0.008753 28\n0.118952 3\n0.088298 28\n0.111874 28\n0.232331 28\n0.071317 28\n0.048257 99\n0.232839 3\n0.127375 28\n0.159922 3\n0.120002 28\n5.264325 28\n0.367761 28\n0.072216 28\n0.103543 1\n0.179617 28\n0.844641 28\n0.063836 28\n0.128031 28\n0.088083 28\n0.104053 3\n0.176148 28\n0.175854 28\n0.095687 28\n0.096368 28\n0.151753 28\n0.072127 3\n0.151861 28\n0.088313 28\n0.095781 28\n0.072471 28\n0.031642 3\n0.112135 28\n0.103769 28\n0.112254 28\n0.055824 28\n0.144447 28\n0.143605 28\n0.080095 28\n0.136039 3\n0.103911 28\n0.071847 28\n0.064126 28\n0.064321 28\n0.103545 28\n0.063854 28\n0.088406 28\n0.031341 28\n0.056782 28\n0.111491 28\n0.024069 28\n0.160040 3\n0.040174 28\n0.072060 28\n0.104157 28\n0.080428 28\n0.151176 28\n0.032113 3\n0.119750 28\n0.039956 28\n0.104219 28\n0.064281 2\n0.127839 28\n0.152176 28\n0.063640 28\n0.119867 3\n0.512600 28\n0.103879 28\n0.080210 28\n0.080186 28\n0.071662 1\n0.079499 28\n0.096373 28\n0.183933 28\n0.055867 3\n0.047727 28\n0.264389 28\n0.143813 28\n0.048051 28\n0.056010 28\n0.063720 99\n0.256734 3\n0.095412 3\n0.120178 3\n0.200191 28\n0.159672 28\n0.079917 28\n0.137038 28\n0.047113 1\n0.072122 28\n0.096190 28\n0.071871 28\n0.152111 28\n0.087633 28\n0.032305 99\n0.160343 3\n0.143398 28\n0.815881 3\n0.112015 28\n13.024242 28\n0.175714 28\n0.096266 28\n0.152160 28\n0.111861 28\n0.031641 35\n0.290400 8\n0.246068 28\n0.175801 28\n0.112113 28\n0.079561 28\n0.128330 28\n0.183866 28\n0.183927 28\n0.072068 3\n0.072179 28\n0.112198 28\n0.144205 28\n0.103523 28\n0.088172 28\n0.104157 28\n0.047935 28\n0.071704 28\n0.103759 3\n4.344396 28\n2.737066 28\n0.230959 28\n0.591755 28\n0.224082 28\n0.087980 28\n0.079522 28\n0.152466 28\n0.151896 28\n0.048114 28\n0.152020 2\n0.912212 28\n0.303951 28\n0.168050 4\n0.367965 28\n0.479991 28\n0.079646 28\n0.064146 28\n0.088499 28\n0.103838 3\n0.087478 28\n0.096115 28\n0.096659 28\n0.055401 3\n0.079751 28\n0.088354 28\n0.128005 28\n0.040291 28\n0.143873 28\n0.079548 28\n0.056270 3\n0.063924 28\n0.128297 28\n0.039971 28\n0.087759 28\n0.088313 3\n0.087871 28\n0.071868 28\n0.064009 28\n0.063983 28\n0.072016 28\n0.167878 28\n0.031926 36\n0.370629 11\n0.325552 28\n0.072017 36\n0.178346 99\n0.334435 3\n0.183189 28\n0.288382 3\n0.119534 28\n3.240488 28\n0.079622 28\n0.128278 28\n0.247898 28\n0.047873 28\n0.072048 3\n0.112221 28\n0.175932 28\n0.112026 28\n0.071804 3\n0.103866 28\n0.080614 28\n0.087809 28\n0.103663 28\n0.071560 3\n0.104615 28\n0.063541 28\n0.048311 3\n0.095737 28\n0.056840 28\n0.047286 28\n0.088432 3\n0.103697 28\n0.048052 28\n0.047486 28\n0.160543 28\n0.039941 2\n0.130290 28\n0.077473 28\n0.080232 28\n0.055929 28\n0.095726 28\n0.064207 28\n0.144338 99\n0.184535 3\n0.135469 28\n0.191683 3\n0.223944 28\n0.248252 28\n0.216088 28\n0.143902 4\n0.119886 4\n0.112094 8\n0.119957 28\n0.140364 28\n0.030668 28\n0.101025 28\n0.160000 28\n0.023592 28\n0.079969 3\n0.088410 28\n0.160009 28\n0.127919 28\n0.064004 28\n0.160032 2\n0.071663 28\n0.080118 28\n0.096712 28\n0.031270 28\n0.064144 28\n0.135938 28\n0.160315 28\n0.184011 2\n0.151738 28\n0.079985 28\n0.080288 3\n0.096050 28\n0.071257 28\n0.352551 28\n0.087528 3\n0.128398 28\n0.288471 28\n0.039704 28\n0.167892 28\n0.104207 3\n0.039550 28\n0.095846 28\n0.104260 28\n0.039963 28\n0.152358 28\n0.079792 28\n0.047973 25\n0.528432 74\n0.000038 3\n0.114868 28\n0.244934 3\n0.167841 28\n0.199861 28\n0.047949 28\n0.224368 4\n0.424357 28\n0.063171 28\n0.024064 28\n0.144288 28\n0.447985 28\n0.143846 28\n0.031994 28\n0.039799 3\n0.168515 28\n0.599745 28\n0.071843 28\n0.176211 28\n0.056188 3\n0.199886 28\n1.439956 28\n0.160653 28\n0.111398 28\n0.056004 2\n0.071735 28\n0.039698 28\n0.112280 28\n0.032206 3\n0.160121 28\n0.023614 28\n0.112387 28\n0.191930 28\n0.071447 28\n0.024218 28\n0.176108 4\n0.368064 25\n0.224359 80\n0.000033 3\n0.199445 28\n0.728288 3\n0.095893 28\n4.144027 28\n0.136201 28\n0.047942 28\n0.207971 28\n0.200308 28\n0.072347 3\n0.127236 28\n0.247792 28\n0.039917 28\n0.120165 28\n0.096458 28\n0.079612 28\n0.064347 28\n0.087552 28\n0.023766 28\n0.112484 3\n0.063616 28\n0.120353 28\n0.047919 2\n0.136094 28\n0.039989 28\n0.079994 28\n0.064123 28\n0.055620 3\n0.104149 28\n0.128251 28\n0.111763 28\n0.072065 1\n0.119809 28\n0.424277 6\n0.304197 28\n0.055766 28\n0.032288 28\n0.103565 28\n0.120089 28\n0.120151 3\n0.103768 28\n0.079934 28\n0.112333 28\n0.119919 28\n0.167790 28\n0.055937 3\n0.120047 28\n0.656271 28\n0.143894 28\n0.096263 1\n0.055762 28\n0.048042 28\n0.112376 3\n0.071541 28\n0.111989 28\n0.087948 28\n0.272131 28\n0.087905 28\n0.071944 28\n0.079900 3\n0.064352 28\n0.111910 28\n0.071744 28\n0.072062 28\n0.048088 28\n0.112079 1\n0.063962 28\n0.128128 28\n0.055829 28\n0.112218 28\n0.056079 28\n0.055336 28\n0.320400 4\n0.336208 65\n0.376231 61\n0.160700 463\n0.618949 72\n0.000030 64\n0.403651 28\n1.159970 28\n0.120404 28\n0.119677 28\n0.464177 28\n0.111819 3\n0.119885 28\n0.080081 28\n0.088328 3\n0.063968 28\n0.087683 28\n0.047677 28\n0.048889 28\n0.071217 28\n0.192203 115\n0.649120 29\n0.000036 1\n1.664571 49\n0.000030 942\n0.000804 491\n0.000069 100\n0.887485 29\n0.000038 28\n2.845760 28\n0.167911 28\n0.015670 47\n0.675869 4\n0.645858 4\n0.150519 4\n0.143809 28\n0.808265 28\n0.087703 30\n0.098850 28\n0.621472 28\n0.088026 30\n0.074817 28\n1.085181 28\n0.103405 28\n0.072532 34\n0.082928 1\n0.746999 51\n0.124721 43\n0.003741 144\n0.015289 1676\n0.000171 25\n0.488848 1011\n0.000155 399\n0.000556 213\n0.435116 877\n0.000046 226\n0.000552 100\n0.378096 722\n0.000050 210\n0.000029 159\n0.000084 83\n0.393064 827\n0.000098 314\n0.000032 99\n0.000078 186\n0.000888 1249\n0.940901 391\n0.501066 621\n0.000040 2\n0.000116 192\n0.000539 70\n0.431293 1322\n0.000554 695\n0.457849 380\n0.000042 379\n0.003645 294\n0.777895 743\n0.000075 362\n0.000572 98\n0.474347 819\n0.000117 357\n0.000031 67\n0.000594 236\n0.000066 95\n0.591471 873\n0.000077 341\n0.000494 198\n0.000046 150\n0.470194 318\n0.000141 95\n0.617277 800\n0.000102 129\n0.000621 244\n0.000322 64\n0.746616 65\n0.143786 64\n0.208061 64\n0.312202 64\n0.384057 8\n0.431504 39\n1.732178 133\n0.000112 8\n0.320690 28\n0.836036 30\n0.079770 21\n0.000048 2\n0.104157 28\n0.151900 28\n0.056098 28\n0.168002 28\n0.120005 28\n0.087970 28\n0.223956 28\n0.063879 28\n0.120228 28\n0.095727 28\n0.244666 39\n0.435837 58\n0.000038 2\n0.100038 1\n0.000060 28\n0.203384 28\n0.064093 28\n0.216150 28\n0.088043 28\n0.103665 56\n0.000841 47\n0.001074 25\n0.310510 21\n0.000046 28\n0.167503 28\n0.128202 4\n0.248557 4\n0.111651 4\n0.119837 28\n0.223981 28\n0.015642 28\n0.144256 28\n0.119935 28\n0.129953 28\n0.366549 28\n0.217761 28\n0.043330 28\n0.064354 28\n0.442624 28\n0.879978 28\n0.183564 28\n0.184303 28\n0.288085 28\n0.175922 28\n0.367645 28\n0.482002 4\n0.318517 28\n0.055518 28\n0.160262 28\n0.079630 36\n0.309372 97\n0.635165 3\n0.180167 4\n0.491939 28\n0.247139 28\n0.136116 28\n0.112286 34\n0.015769 21\n0.000091 28\n0.287848 4\n0.520604 83\n0.249147 28\n0.004609 75\n0.349496 1\n0.258821 13\n0.166430 117\n0.554773 111\n0.044223 146\n0.011241 17\n0.743385 105\n0.219746 29\n0.000039 84\n1.591625 17\n0.460488 111\n0.259870 29\n0.000036 4\n0.732528 4\n0.168012 4\n0.167894 4\n0.135916 4\n0.119972 28\n0.392087 28\n0.384104 34\n0.163521 1\n0.213396 118\n0.125098 1288\n0.000555 124\n3.219818 29\n0.000580 1724\n1.040712 111\n1.279862 29\n0.000123 28\n1.364233 28\n0.480238 32\n0.188068 1\n0.585708 49\n0.042272 1200\n0.000447 488\n0.000105 619\n0.651513 648\n0.000035 346\n0.000547 480\n0.669572 1255\n0.081160 86\n0.254081 1\n0.000754 87\n0.000261 1\n0.000277 83\n0.000252 1\n0.000268 1\n0.000242 86\n0.000243 1\n0.000267 146\n0.000244 1\n0.000271 1\n0.000220 235\n0.000526 401\n0.000037 102\n0.000032 342\n0.000482 212\n0.446387 712\n0.000045 689\n0.000739 160\n0.463443 1\n0.000463 129\n0.000389 1\n0.000332 38\n0.000061 1\n0.000049 1\n0.000050 326\n0.000057 1\n0.000059 205\n0.000051 1\n0.000047 55\n0.000058 2\n0.000257 1\n0.000056 294\n0.000055 301\n0.468611 1\n0.000073 42\n0.000048 1\n0.000042 40\n0.000045 1\n0.000043 65\n0.000069 1\n0.000042 34\n0.000042 1\n0.000041 44\n0.000042 1\n0.000041 400\n0.000061 109\n0.000157 1\n0.000042 79\n0.000047 2\n0.000172 1\n0.000051 118\n0.000043 1\n0.000042 188\n0.000052 406\n0.785415 1075\n0.000559 197\n0.565329 1208\n0.000465 401\n0.915822 722\n0.000035 347\n0.000495 504\n0.833774 438\n0.000036 227\n0.000030 307\n0.000617 300\n0.270572 633\n0.000035 3\n0.000024 299\n0.000121 202\n0.504866 724\n0.000038 669\n0.000563 334\n0.553405 639\n0.000035 689\n0.000557 86\n0.398004 1\n0.000073 83\n0.000048 1\n0.000043 46\n0.000045 1\n0.000310 1\n0.000079 90\n0.000261 1\n0.000066 158\n0.000053 1\n0.000157 1\n0.000135 168\n0.000122 1\n0.000094 87\n0.000130 1\n0.000134 87\n0.000208 1\n0.000096 87\n0.000152 176\n0.000465 176\n0.000032 440\n0.000129 635\n0.351191 899\n0.000758 480\n0.473343 505\n0.000046 746\n0.000604 175\n0.126074 788\n0.000039 3\n0.000540 223\n0.000049 44\n0.000027 3\n0.000340 339\n0.000033 11\n0.142842 913\n0.000038 689\n0.000529 291\n0.294573 630\n0.000152 295\n0.000476 344\n0.167346 588\n0.000044 189\n0.000026 310\n0.000524 467\n0.159684 1014\n0.000502 518\n0.159729 624\n0.000176 59\n0.000030 204\n0.000029 502\n0.294501 658\n0.000034 209\n0.000738 62\n0.739765 63\n0.183681 63\n0.184172 63\n0.167912 63\n0.168040 66\n1.651740 86\n0.286217 114\n0.000029 3\n0.232007 65\n0.256064 94\n0.000025 3\n0.239941 307\n0.280599 12\n0.632244 12\n0.264298 12\n0.247710 6\n0.223578 63\n0.230940 2\n0.201492 6\n0.000026 2\n0.256153 7\n0.000027 12\n0.256021 12\n0.247717 63\n0.207098 12\n0.112158 12\n0.240197 12\n0.224266 6\n0.255667 509\n0.262789 660\n0.000139 169\n0.000038 109\n1.599272 103\n0.040868 142\n0.013733 547\n0.668510 546\n0.000032 205\n0.000514 64\n1.488210 65\n0.495471 64\n0.050232 64\n0.049969 64\n0.049787 64\n0.050365 64\n0.050997 64\n0.049652 64\n0.051019 64\n0.049695 64\n0.050629 64\n0.050700 63\n0.051497 63\n0.052495 63\n0.056574 63\n0.047525 63\n0.049931 62\n0.050647 61\n0.049716 280\n4.906290 774\n0.000139 297\n0.000428 103\n4.142266 29\n0.000034 45\n0.788882 46\n0.288010 47\n0.815983 45\n0.864068 61\n0.562727 97\n0.365285 46\n0.168216 48\n0.191777 46\n0.232069 47\n0.439631 699\n0.282137 181\n1.455099 5\n0.462094 31\n0.153284 34\n0.391991 8\n0.150881 1\n0.119653 1\n0.952251 1\n0.031768 1\n0.320284 1\n0.015747 14\n0.104388 2\n0.248338 36\n0.335591 7\n0.000012 1595\n0.014535 81\n0.675177 81\n0.167462 76\n0.169187 76\n0.168383 81\n0.056636 81\n0.172508 83\n0.224116 85\n0.459117 106\n0.115467 87\n0.234263 76\n0.116454 76\n0.176141 133\n0.055531 181\n0.169331 97\n0.227061 7\n0.358528 48\n0.000031 96\n0.054510 18\n0.265355 26\n0.137495 2\n0.471867 24\n0.014789 7\n0.036985 44\n0.000034 24\n0.000607 7\n0.001507 188\n0.007473 63\n0.009708 43\n0.001467 87\n0.000689 43\n0.002072 73\n0.000687 57\n0.005127 106\n0.009741 124\n0.001259 68\n0.000012 276\n0.000071 12\n0.000855 54\n0.000009 104\n0.000290 43\n0.000557 87\n0.000805 5\n0.010531 123\n0.000774 68\n0.000011 266\n0.000145 138\n0.027316 188\n0.008677 918\n0.000047 587\n0.000036 12\n1.968723 198\n0.148951 5\n0.698553 23\n0.161567 26\n0.159965 31\n0.167816 34\n0.320522 23\n0.175535 26\n0.152216 8\n0.118519 1\n0.727646 4\n0.368320 1\n0.087757 1\n0.048253 836\n0.138380 64\n1.472003 65\n0.142912 1\n0.303024 3\n0.352076 63\n2.522097 4\n0.230547 192\n0.353179 173\n0.111809 28\n0.440298 28\n0.231189 28\n0.120363 28\n0.047564 28\n0.224343 64\n0.400704 63\n0.498787 63\n0.050011 63\n0.049840 63\n0.050378 63\n0.049724 63\n0.051054 63\n0.049828 868\n0.052850 181\n0.000090 64\n0.048088 65\n0.434138 65\n0.472068 64\n0.167635 4\n0.159831 99\n0.255135 157\n0.105861 28\n0.255644 28\n0.376068 28\n0.087694 28\n0.048113 28\n0.319948 111\n9.585888 29\n0.000039 1\n1.920843 49\n0.001423 341\n0.000577 597\n0.000035 183\n0.000069 349\n0.000451 102\n1.269395 29\n0.000039 83\n3.312250 13\n0.940462 110\n0.235676 29\n0.000803 28\n1.051964 4\n0.527637 28\n0.144248 28\n0.200043 32\n0.331850 1\n0.449987 49\n0.040743 797\n0.000509 367\n0.000038 442\n0.676078 668\n0.000035 360\n0.000828 821\n0.404088 333\n0.000533 446\n0.580806 668\n0.000126 356\n0.000045 437\n0.340936 511\n0.000044 69\n0.000077 86\n0.000460 164\n0.000055 83\n0.000059 206\n0.000347 907\n0.712040 452\n0.000035 301\n0.000569 106\n0.680892 834\n0.000098 2\n0.000080 1\n0.000489 554\n0.000064 463\n0.362155 461\n0.000034 12\n0.000505 191\n0.000026 127\n0.000108 95\n0.000314 99\n0.000301 186\n0.000026 242\n0.507768 734\n0.000042 187\n0.000589 150\n0.000036 34\n1.981052 893\n0.000532 3\n0.000768 117\n0.000029 217\n0.000402 107\n0.000034 120\n0.588228 821\n0.000045 2\n0.000129 169\n0.000468 87\n0.000028 192\n0.000428 114\n0.000031 109\n1.307417 902\n0.000091 3\n0.000684 290\n0.000124 94\n0.904224 839\n0.000040 545\n0.000567 43\n2.783027 954\n0.000044 313\n0.000818 93\n0.624762 943\n0.000039 533\n0.000627 453\n0.000287 804\n0.714653 158\n0.000027 1230\n0.000589 228\n6.137951 802\n0.000044 105\n0.000027 175\n0.000084 123\n0.000593 146\n0.000028 155\n0.000029 197\n0.918361 711\n0.000040 3\n0.000603 133\n0.000070 75\n0.000243 66\n0.000028 73\n0.000027 2\n0.000331 315\n0.000039 5\n0.539355 1004\n0.000051 666\n0.000572 114\n0.732026 815\n0.000106 3\n0.000613 376\n0.000030 292\n0.000027 227\n0.000065 27\n0.000262 3\n0.000305 260\n0.000030 553\n3.294133 395\n0.000043 1122\n0.000566 46\n1.820500 980\n0.000105 373\n0.000535 97\n0.503444 864\n0.000045 204\n0.000073 38\n0.000501 3\n0.000376 143\n0.000025 147\n0.000036 5\n8.164939 980\n0.000088 60\n0.000742 206\n0.000030 64\n7.914833 8\n0.411314 65\n12.676395 66\n0.495860 65\n0.050489 65\n0.051238 65\n0.049356 65\n0.049921 65\n0.050190 64\n0.051460 65\n0.050302 65\n0.050134 65\n0.050469 65\n0.454566 65\n12.832271 97\n0.700784 840\n0.000046 253\n0.000600 3\n0.000359 143\n0.000028 146\n0.000032 45\n3.352171 936\n0.000044 59\n0.000631 106\n0.000062 98\n0.000247 61\n0.684192 400\n0.361376 763\n0.000155 239\n0.000754 64\n0.530247 64\n0.976138 63\n0.247599 64\n0.168334 63\n0.167952 63\n0.200008 64\n0.391094 64\n0.497995 5\n7.243960 958\n0.000090 291\n0.000616 98\n0.000035 100\n1.559718 840\n0.000050 27\n0.000069 733\n0.000736 924\n3.671926 1388\n0.000953 869\n0.735229 65\n0.000028 2\n0.000026 138\n0.000027 192\n0.000072 534\n0.000733 447\n0.854541 456\n0.000036 2\n0.000525 472\n0.000033 108\n0.000433 329\n0.000031 11\n1.193792 1006\n0.000041 323\n0.000633 105\n0.000335 292\n0.000037 841\n0.366569 80\n0.000029 1363\n0.000629 100\n0.907620 918\n0.000097 181\n0.000557 124\n0.000035 482\n0.000433 404\n1.069367 572\n0.000040 387\n0.000481 100\n0.899806 840\n0.000039 28\n0.000568 128\n0.000027 124\n0.000026 475\n0.000407 924\n0.253852 768\n0.001132 620\n0.000090 99\n1.119791 1703\n0.003509 404\n0.319313 527\n0.000035 45\n0.000032 387\n0.000791 111\n1.262488 810\n0.000039 499\n0.000514 4\n0.662471 346\n0.005307 572\n0.000043 374\n0.000490 44\n0.379778 949\n0.000053 164\n0.000027 339\n0.000688 274\n0.485710 693\n0.000040 319\n0.000548 87\n0.594463 1\n0.000405 137\n0.000325 1\n0.000217 234\n0.000173 1\n0.000276 87\n0.000168 1\n0.000188 236\n0.000168 1\n0.000196 77\n0.000168 1\n0.000170 37\n0.000157 102\n0.000268 457\n0.000344 247\n1.089673 734\n0.000041 658\n0.000649 303\n0.000038 762\n0.593668 263\n0.000040 236\n0.000073 357\n1.422471 594\n0.000039 145\n0.000026 563\n0.000532 65\n0.765958 3\n0.319051 25\n0.634912 148\n0.000038 1\n0.562613 28\n0.465152 28\n0.175996 28\n0.104216 1\n0.121252 1\n0.000078 52\n0.000065 28\n0.046737 28\n0.248019 28\n0.327922 28\n0.103893 28\n0.072369 28\n0.103842 3\n0.184377 28\n0.034287 28\n0.437187 4\n0.288023 3\n0.064484 28\n0.047468 28\n0.272109 4\n0.336684 28\n0.079361 28\n0.232297 28\n0.287989 4\n0.272009 4\n0.104474 28\n0.248922 47\n0.038050 5\n0.618278 908\n0.000049 2\n0.000071 622\n0.000551 203\n0.871878 1\n0.000644 77\n0.000063 1\n0.000044 333\n0.000053 1\n0.000042 77\n0.000044 1\n0.000043 144\n0.000045 1\n0.000042 92\n0.000057 103\n0.000143 1\n0.000043 87\n0.000047 1\n0.000199 26\n0.001415 1\n0.000052 349\n0.000061 229\n5.479727 825\n0.000151 115\n0.000585 228\n0.000030 54\n0.750259 894\n0.000042 91\n0.000565 143\n0.000065 105\n0.000386 140\n0.000036 51\n0.839898 857\n0.000047 101\n0.000069 295\n0.000466 53\n0.474888 925\n0.000105 224\n0.000030 41\n0.000535 198\n0.000035 55\n0.286274 1247\n0.000486 62\n0.273711 63\n0.499238 63\n0.050396 63\n0.049525 64\n0.051244 63\n0.051191 63\n0.050555 64\n0.050112 64\n0.051097 64\n0.051134 64\n0.051254 64\n0.049630 64\n0.050268 8\n0.311695 148\n0.266222 1\n0.171665 28\n0.564071 28\n0.199982 28\n0.079712 2\n0.200470 52\n0.000031 28\n0.073484 28\n0.454014 28\n0.103900 28\n0.168408 28\n0.175973 4\n0.496647 28\n0.111278 28\n0.040077 28\n0.176633 4\n0.319499 3\n0.103884 28\n0.104710 3\n0.079294 28\n0.080046 28\n0.144085 28\n0.120127 47\n0.096213 5\n0.326830 920\n0.000145 216\n0.000029 250\n0.000747 62\n1.130652 4\n0.447273 923\n0.000038 94\n0.000033 261\n0.000943 62\n1.115534 63\n0.499932 63\n0.050431 63\n0.049912 63\n0.051123 63\n0.050168 64\n0.050551 64\n0.050200 64\n0.051226 64\n0.266148 64\n0.159930 65\n0.239524 152\n0.251234 1\n0.105189 28\n0.213084 28\n0.167964 28\n0.096153 54\n0.312469 28\n0.319897 28\n0.335782 28\n0.352242 28\n0.143642 28\n0.031868 28\n0.144059 28\n0.200681 3\n0.151480 3\n0.120099 1\n0.120062 1\n0.147365 4\n0.140893 28\n0.119786 3\n0.079958 28\n0.160428 8\n0.439722 1\n0.128056 4\n0.143824 3\n0.087643 28\n0.104358 3\n0.131005 28\n0.052711 28\n0.168158 28\n0.079802 47\n0.095986 115\n0.629851 109\n0.040186 146\n0.011604 15\n0.438214 983\n0.000068 3\n0.000025 131\n0.000066 82\n0.000483 3\n0.000334 176\n0.000059 103\n0.000328 5\n0.473024 899\n0.000042 57\n0.000023 214\n0.000685 58\n0.853271 930\n0.000080 89\n0.000551 129\n0.000031 3\n0.000324 207\n0.000093 78\n1.064163 929\n0.000096 115\n0.000676 224\n0.000029 203\n1.238645 1\n0.000073 77\n0.000057 1\n0.000537 534\n0.000278 1\n0.000057 68\n0.000076 1\n0.000333 57\n0.000079 41\n0.000370 1\n0.000055 185\n0.000254 40\n0.000429 1\n0.000053 68\n0.000245 1\n0.000090 66\n0.000044 1\n0.000041 195\n0.000050 405\n0.647708 503\n0.000041 686\n0.000814 126\n0.917095 876\n0.000046 3\n0.000682 743\n0.000032 9\n0.630418 902\n0.000046 357\n0.000082 168\n0.000472 76\n0.000358 171\n0.000022 18\n0.444722 979\n0.000109 682\n0.000595 4\n0.159675 908\n0.000049 3\n0.000022 621\n0.000584 203\n0.189347 1\n0.000482 77\n0.000191 1\n0.000201 333\n0.000182 1\n0.000212 77\n0.000170 1\n0.000189 144\n0.000172 1\n0.000199 92\n0.000182 103\n0.000349 1\n0.000180 87\n0.000153 1\n0.000521 26\n0.000156 1\n0.000161 349\n0.000160 229\n0.698382 825\n0.000042 115\n0.000589 93\n0.000095 135\n0.000247 1\n0.663116 947\n0.000087 479\n0.000664 51\n0.433816 971\n0.000445 219\n0.000257 1\n0.364714 920\n0.000042 466\n0.000497 347\n0.561464 610\n0.000042 7\n0.000075 204\n0.000511 64\n0.516902 64\n0.496102 64\n0.050798 64\n0.049921 65\n0.050391 64\n0.050187 64\n0.050311 64\n0.050622 64\n0.049447 64\n0.050114 64\n0.050166 63\n0.050293 63\n0.157654 63\n0.224551 7\n0.231083 24\n0.278162 147\n0.000110 1\n0.205951 28\n0.645523 51\n0.055634 3\n0.144511 28\n0.103635 28\n0.111897 28\n0.144076 28\n0.040305 28\n0.136081 28\n0.410408 163\n0.261827 165\n0.135431 8\n0.202448 28\n1.685672 28\n0.135940 28\n0.151943 28\n0.055938 28\n0.120286 3\n0.175723 53\n0.224329 3\n0.112052 28\n0.055915 8\n0.416328 28\n0.039543 28\n0.095989 28\n0.176050 28\n0.032089 136\n0.416656 123\n0.127982 21\n1.055561 4\n0.111540 4\n0.152437 8\n0.151931 1\n0.151686 28\n0.071909 4\n0.375983 3\n0.072228 28\n0.063665 28\n0.192099 28\n0.024238 28\n0.408021 49\n0.041363 1\n0.132368 1\n0.499753 1\n0.050368 1\n0.049757 1\n0.049831 1\n0.050066 1\n0.050753 1\n0.050207 1\n0.050762 1\n0.050242 1\n0.049870 1\n0.050068 1\n0.050569 49\n0.349994 45\n0.048036 45\n0.280232 45\n0.103865 91\n0.136163 63\n0.368036 64\n0.150435 1\n0.222956 1\n0.167700 1\n0.208164 1\n0.143957 1\n0.128260 1\n0.128042 42\n0.146086 40\n0.079868 40\n0.151718 15\n0.208382 23\n0.000111 66\n0.087419 63\n0.688785 7\n0.826308 28\n7.405520 28\n0.160635 28\n0.175061 55\n0.104901 28\n0.135265 28\n0.144672 28\n0.225272 28\n0.126426 28\n0.047802 28\n0.168181 28\n0.039551 64\n1.048517 145\n0.263959 7\n0.114250 28\n0.269527 3\n0.111558 45\n0.192210 1\n0.136192 28\n0.671838 28\n0.152203 28\n0.071348 28\n0.176598 28\n0.215865 28\n0.055764 28\n0.055988 28\n0.224317 28\n0.264087 28\n0.127960 28\n0.104062 28\n0.040061 28\n0.152071 28\n0.280154 194\n0.368070 769\n0.508491 408\n0.000053 87\n0.931310 518\n0.508559 297\n0.000125 194\n0.395384 769\n0.508022 408\n0.000124 41\n0.131753 41\n0.263854 41\n0.056287 3\n0.119727 41\n0.143936 41\n0.232131 41\n0.072052 41\n0.079881 78\n0.248856 21\n0.000032 518\n0.508544 297\n0.000043 35\n0.230367 7\n1.001855 5\n0.512301 53\n0.000124 114\n0.154067 108\n0.042073 64\n0.011465 17\n0.807404 102\n0.275572 29\n0.000039 41\n0.413063 44\n0.360165 45\n0.487571 46\n0.328180 48\n0.272058 1629\n0.148108 1\n0.744184 25\n0.003428 29\n0.000267 93\n0.306696 837\n0.000044 57\n0.000074 41\n0.000510 3\n0.000566 261\n0.000062 59\n0.168652 896\n0.000121 410\n0.000032 330\n0.000605 50\n0.188036 823\n0.000054 246\n0.000607 54\n0.416644 1596\n0.000717 5\n0.462990 998\n0.000111 194\n0.000028 44\n0.000026 124\n0.000034 5\n0.367004 1302\n0.000526 918\n0.464612 281\n0.000034 229\n0.000568 139\n0.000029 591\n0.686233 593\n0.000063 227\n0.424325 724\n0.000043 37\n0.000023 214\n0.000549 97\n1.640763 29\n0.000527 1393\n0.808095 1\n0.811846 1\n0.415962 105\n1.427222 29\n0.000463 1342\n0.216373 97\n0.983541 29\n0.000039 1\n1.174671 49\n0.001795 98\n0.000616 1\n0.000062 247\n0.000056 1\n0.000175 170\n0.000149 1\n0.000105 98\n0.000123 1\n0.000119 39\n0.000136 1\n0.000114 336\n0.000159 93\n0.000409 1\n0.000056 56\n0.000053 1\n0.000137 42\n0.000112 1\n0.000107 156\n0.000118 1\n0.345115 1\n0.499838 1\n0.049946 1\n0.050089 1\n0.049850 1\n0.050229 1\n0.051023 1\n0.049629 1\n0.050712 69\n2.730424 32\n0.108851 32\n0.192071 32\n0.304741 32\n0.535161 114\n1.254733 108\n0.033906 64\n0.012217 17\n0.289459 65\n1.714126 66\n1.010502 28\n0.229408 28\n0.247866 28\n0.095483 28\n0.176376 4\n0.295986 4\n0.112305 28\n0.119568 28\n0.103973 28\n0.128204 28\n0.080028 28\n0.183942 28\n0.480230 28\n0.321205 45\n0.508818 28\n3.153885 28\n0.111695 28\n0.256216 28\n0.127852 28\n0.096208 36\n0.395393 3\n0.785988 115\n0.049440 109\n0.031921 65\n0.012100 29\n0.510355 29\n0.000063 18\n1.843847 1\n0.500532 1\n0.050645 1\n0.050050 1\n0.049732 1\n0.050223 1\n0.050946 1\n0.049702 74\n0.739684 1\n0.363309 1\n0.207435 45\n0.508347 1\n0.121505 8\n0.000116 1\n0.000046 1\n0.000044 1\n0.000043 1\n0.000042 22\n0.000054 2\n0.281366 115\n0.033589 109\n0.035472 65\n0.012183 181\n0.400042 2\n0.326648 7\n0.145320 23\n0.895967 2\n1.173385 36\n0.302117 7\n0.000013 1595\n0.014751 19\n0.000013 36\n0.000222 36\n0.000353 387\n0.000046 60\n0.000011 2\n0.000009 96\n0.019594 18\n0.703862 23\n0.161687 33\n1.121273 125\n0.001106 996\n0.000492 99\n0.000029 453\n0.000330 4\n0.509468 54\n0.000117 64\n0.241476 1\n0.084296 1\n0.500557 1\n0.050182 1\n0.050659 1\n0.050871 1\n0.051234 1\n0.050350 1\n0.050724 1\n0.049425 1\n0.050642 1\n0.052239 1\n0.050055 1\n0.050596 1\n0.051008 1\n0.051005 1\n0.353117 68\n0.108795 32\n0.158419 114\n0.700653 108\n0.039953 64\n0.012694 181\n0.492211 2\n0.238605 20\n0.145132 2\n0.557624 36\n0.330222 7\n0.000013 1595\n0.014377 7\n0.033351 12\n0.000015 36\n0.000010 36\n0.000534 196\n0.000025 22\n0.000113 107\n0.000023 56\n0.000102 2\n0.000009 96\n0.020146 18\n0.866271 23\n0.361424 1718\n0.698698 7\n5.925272 25\n0.393249 149\n0.000458 8\n0.690502 28\n0.332958 28\n0.176307 28\n0.192137 28\n0.136292 28\n0.047456 28\n0.048003 3\n0.136009 55\n0.168161 3\n0.056047 28\n0.768616 28\n0.079028 115\n0.695352 109\n0.035329 65\n0.011539 46\n0.343313 135\n0.001745 2\n0.254127 20\n0.129007 2\n0.241776 36\n0.276503 7\n0.000012 1595\n0.014099 67\n0.033829 101\n2.740884 81\n1.010943 81\n0.169635 81\n0.224876 83\n0.111853 106\n0.741566 87\n0.361894 76\n0.117996 178\n0.114080 76\n0.055976 146\n0.452208 7\n0.078127 12\n0.000033 36\n0.000026 96\n0.049496 18\n0.482922 23\n0.121769 33\n0.553416 125\n0.000855 951\n0.000515 99\n0.000029 488\n0.000408 65\n0.646681 8\n0.293758 1\n0.087293 1\n0.287704 1\n0.320441 1\n2.855859 71\n0.653831 34\n0.140624 32\n0.064294 115\n0.982588 109\n0.038962 65\n0.013610 75\n1.789173 64\n0.157923 1\n0.367205 1\n0.216002 68\n1.589456 58\n0.165260 57\n0.168447 55\n0.159300 53\n0.176109 51\n0.151677 49\n0.168372 47\n0.119991 45\n0.239704 45\n0.223983 45\n0.536303 45\n0.104433 45\n0.280279 45\n0.255145 55\n0.000936 46\n0.001293 64\n0.470043 48\n0.151575 45\n0.192193 45\n0.272065 45\n0.688665 48\n2.935263 45\n0.328107 45\n0.088479 1\n1.260999 1\n0.199528 49\n0.507227 49\n0.079353 47\n0.712122 64\n0.776387 174\n0.311898 7\n0.082110 28\n0.277381 3\n0.232294 45\n0.152105 1\n0.103891 28\n0.143863 28\n0.192162 28\n0.055675 55\n0.104472 28\n0.095729 28\n0.104318 28\n0.160143 28\n0.119611 28\n0.079517 28\n0.144676 28\n0.872056 28\n0.160111 28\n0.071608 28\n0.120494 28\n0.071876 28\n0.136014 28\n0.159903 28\n0.304287 28\n0.183951 28\n0.055975 28\n0.055488 28\n0.096892 65\n1.783435 3\n0.197649 1\n0.207681 30\n0.938430 30\n0.119938 30\n0.064000 30\n0.079944 57\n0.112422 30\n0.103673 30\n0.080072 33\n0.352367 33\n0.135860 39\n0.151986 33\n0.143719 33\n0.136554 33\n0.127493 30\n0.113964 30\n0.134587 30\n0.111684 30\n0.095869 30\n0.136083 30\n0.111983 30\n0.047926 1\n0.341249 1\n0.500664 1\n0.050204 1\n0.050111 1\n0.050298 1\n0.051099 1\n0.050163 1\n0.050526 1\n0.050921 45\n3.580838 45\n0.672426 1\n0.132694 32\n0.842879 54\n0.312232 67\n0.027410 3\n0.433831 32\n4.130710 32\n0.031775 32\n0.176036 80\n0.135982 32\n0.184413 32\n0.103995 32\n0.143998 32\n0.199940 32\n0.064204 32\n0.167890 32\n0.087920 32\n0.063821 32\n0.176176 32\n0.319822 115\n2.110685 106\n0.035665 65\n0.012063 29\n3.477161 59\n0.000031 32\n0.676957 32\n0.215603 32\n0.071956 32\n0.088050 126\n0.063932 115\n0.574828 109\n0.070591 65\n0.012473 181\n0.396453 2\n0.237902 20\n0.129426 2\n0.271554 43\n0.267412 1595\n0.014322 55\n0.000238 36\n0.000345 209\n0.000013 46\n0.000012 229\n0.000089 96\n0.019190 18\n0.737391 23\n0.154077 1720\n0.762165 64\n3.808192 74\n0.666411 29\n0.048635 28\n0.000036 1\n0.232984 114\n0.082122 108\n0.034673 64\n0.011644 181\n0.216889 2\n0.230317 20\n0.105291 2\n0.191574 36\n0.283042 7\n0.000012 1595\n0.014439 98\n0.034066 98\n2.635677 7\n0.244854 48\n0.000033 96\n0.051867 18\n0.303324 23\n0.121436 33\n0.441174 125\n0.001203 940\n0.000473 52\n0.000030 571\n0.000144 65\n0.398677 3\n0.789700 3\n0.499553 3\n0.050209 3\n0.050177 3\n0.049798 3\n0.049892 2\n0.050016 1\n0.050181 1\n0.288255 1\n0.499549 1\n0.051840 1\n0.048019 1\n0.050143 1\n0.050101 1\n0.051629 1\n0.050595 1\n0.050417 1\n0.050555 1\n0.050113 1\n0.050877 1\n0.051079 1\n0.050170 1\n0.230511 1\n0.192185 1\n0.383928 25\n0.269509 100\n0.001895 128\n0.000043 199\n0.075336 115\n0.766334 109\n0.037418 65\n0.011581 181\n0.327011 2\n0.238581 20\n0.120764 2\n0.215577 36\n0.302182 7\n0.000012 1595\n0.014058 128\n0.034294 196\n2.671843 81\n0.498987 81\n0.172700 81\n0.168769 55\n0.871147 96\n0.038094 18\n0.698884 23\n0.145379 1722\n0.466905 5\n0.743477 8\n0.438666 1\n0.318570 3\n0.499823 3\n0.053414 3\n0.050973 3\n0.051015 3\n0.051279 3\n0.050374 1\n0.195046 1\n0.500309 1\n0.049950 1\n0.054082 1\n0.050591 1\n0.050196 1\n0.051212 1\n0.050842 1\n0.051086 1\n0.051008 1\n0.050768 1\n0.050138 1\n0.052811 1\n0.050782 1\n0.049353 1\n0.050990 1\n0.050591 1\n0.050412 1\n0.050913 1\n0.050819 1\n0.050592 1\n0.050550 1\n0.050732 1\n0.049859 1\n0.050463 64\n1.637514 4\n0.245788 64\n16.282763 1\n0.052505 1\n0.281437 64\n0.209055 3\n0.253599 3\n0.500214 2\n0.050850 1\n0.049963 3\n0.051027 3\n0.051203 3\n0.050154 3\n0.050655 3\n0.051067 3\n0.051259 2\n0.050553 1\n0.050565 3\n0.050645 65\n0.272780 25\n0.307312 97\n0.000029 128\n0.000455 196\n0.084748 115\n5.230068 109\n0.045764 65\n0.011547 85\n20.973263 96\n0.001062 2\n0.494170 20\n0.153295 2\n0.591603 36\n0.281138 7\n0.000012 1595\n0.014136 149\n0.034536 76\n0.549720 76\n0.231198 81\n0.350171 81\n0.176156 81\n0.230393 142\n0.290721 79\n0.185489 79\n0.240467 318\n0.470375 341\n0.288756 76\n0.815293 76\n0.233087 133\n0.298114 75\n0.119223 197\n0.152292 133\n0.488904 75\n0.128636 173\n0.179323 133\n0.439979 75\n0.190279 197\n0.118653 133\n0.369402 75\n0.126974 173\n0.091041 7\n0.799140 48\n0.000031 96\n0.051619 18\n0.343474 23\n0.103825 1722\n0.418840 105\n53.391622 29\n0.000109 1363\n0.672497 144\n0.835364 782\n0.000049 192\n0.000107 262\n0.360885 725\n0.000041 209\n0.000574 214\n5.303939 636\n0.000040 114\n0.000600 172\n0.000062 86\n0.000254 64\n0.543608 64\n0.500180 63\n0.052839 63\n0.050518 63\n0.050184 63\n0.490594 63\n0.499608 63\n0.050085 63\n0.050970 61\n0.051041 219\n0.055251 752\n0.000179 26\n0.000737 90\n0.000402 153\n0.000035 64\n2.474851 64\n0.240040 3\n29.447264 64\n0.235583 3\n0.172159 3\n0.500079 3\n0.049784 3\n0.050103 3\n0.050741 2\n0.049432 1\n0.050363 69\n0.343749 7\n0.124446 65\n0.345530 8\n0.140710 166\n0.250131 28\n0.215512 4\n0.656035 1\n0.186296 28\n0.445798 28\n0.240128 4\n0.455812 5\n0.104607 28\n0.639311 28\n0.128008 53\n0.071768 3\n0.128535 28\n0.195555 3\n0.128918 28\n0.188114 51\n0.047191 3\n0.111957 28\n0.368201 8\n2.600159 1\n0.637164 1\n0.160098 1\n0.208105 1\n0.167742 65\n0.539889 65\n0.157393 65\n0.167984 3\n0.446894 2\n0.127975 1\n0.168029 3\n0.184140 3\n0.167880 3\n0.136030 3\n0.335811 34\n0.243202 32\n0.815289 65\n0.592715 65\n0.165592 65\n0.168125 28\n0.866254 28\n0.159383 28\n0.072283 28\n0.159644 28\n0.392314 28\n0.183910 28\n0.064579 28\n0.295713 38\n0.533327 44\n0.000075 200\n0.442642 41\n0.295851 41\n0.184023 402\n0.507040 409\n0.000040 56\n0.000993 47\n0.000806 138\n0.139306 328\n0.507503 216\n0.000124 10\n0.744137 22\n0.000136 31\n0.208448 118\n0.473945 112\n0.033864 65\n0.011130 181\n0.394776 2\n0.238172 20\n0.113346 23\n0.168034 20\n0.359999 2\n0.201679 36\n0.278959 7\n0.000050 1595\n0.014945 149\n0.034802 55\n0.511208 96\n0.042879 18\n0.290055 23\n0.121398 1642\n0.938789 77\n0.507533 57\n0.000132 102\n0.852567 29\n0.000157 1448\n0.536231 3\n0.948121 3\n0.328296 61\n0.514809 1\n0.221110 25\n1.646402 149\n0.001295 8\n0.310895 28\n0.683790 3\n0.096409 45\n0.175824 1\n0.104161 316\n0.824280 580\n0.508595 409\n0.000038 41\n1.523541 41\n0.167729 41\n0.103504 3\n0.056155 41\n0.152114 41\n0.136647 41\n0.127524 41\n0.007713 43\n0.656277 43\n0.120008 41\n0.216107 41\n0.072282 41\n1.023441 41\n0.087739 41\n5.616435 41\n0.144238 41\n0.935483 41\n0.248165 43\n0.680388 2\n0.103686 41\n0.207800 41\n0.240421 3\n0.510853 41\n0.089288 43\n0.543734 41\n0.303941 3\n0.095666 41\n0.784341 41\n0.584096 186\n9.887982 348\n0.509099 320\n0.000041 1\n2.079762 1\n0.199709 1\n0.208046 1\n0.191896 1\n0.500685 1\n0.050301 1\n0.050154 1\n0.051177 1\n0.051080 1\n0.050208 1\n0.050005 1\n0.051088 32\n0.612980 32\n0.135893 45\n0.815901 45\n0.088029 3\n0.348685 3\n0.499970 3\n0.050867 2\n0.050865 1\n0.051190 3\n0.051201 3\n0.050566 3\n0.050112 3\n0.050874 50\n0.435671 50\n0.151993 50\n0.120208 47\n0.808032 47\n0.111764 3\n0.605379 1\n0.215367 43\n0.259582 43\n0.135722 80\n0.256130 43\n0.079701 43\n0.440595 43\n0.079671 65\n5.879489 1\n0.213462 1\n0.499990 1\n0.051012 1\n0.051024 1\n0.051099 1\n0.050862 1\n0.049704 1\n0.050253 321\n0.311212 95\n0.500019 91\n0.050536 120\n0.050014 89\n0.051139 88\n0.049783 87\n0.050240 86\n0.050985 85\n0.050336 84\n0.050257 83\n0.200176 82\n0.168263 132\n0.183712 31\n0.953604 50\n1.198345 43\n0.471893 21\n0.000128 33\n0.499993 21\n0.000045 33\n0.049494 21\n0.000063 33\n0.050695 21\n0.000081 33\n0.049983 21\n0.000099 25\n0.050733 21\n0.000046 25\n0.050092 21\n0.000080 25\n0.050020 21\n0.000093 25\n0.050624 21\n0.000044 25\n0.050192 21\n0.000077 25\n0.050855 21\n0.000095 25\n0.050221 21\n0.000093 25\n0.049878 21\n0.000093 25\n0.049661 21\n0.001018 46\n0.049410 25\n0.050420 21\n0.000088 25\n0.050726 21\n0.000115 25\n0.050199 21\n0.000044 25\n0.050645 21\n0.000072 25\n0.050398 21\n0.000097 25\n0.050438 21\n0.000072 40\n0.760479 62\n0.726746 8\n0.229234 136\n0.843091 121\n0.702772 18\n0.497772 1\n0.049640 1\n0.050258 1\n0.051056 1\n0.050807 1\n0.050423 1\n0.050820 1\n0.050870 1\n0.050700 1\n0.050160 1\n0.051146 1\n0.049865 1\n0.051181 1\n0.050697 1\n0.051126 1\n0.050559 1\n0.050766 1\n0.051044 1\n0.050785 1\n0.051251 32\n1.067667 8\n0.285491 29\n1.048088 29\n0.000041 65\n0.474585 1\n0.204459 1\n0.500136 1\n0.049874 1\n0.050059 1\n0.050067 1\n0.049867 1\n0.050572 1\n0.050487 1\n0.051143 1\n0.308183 31\n0.146517 32\n0.640092 115\n0.390680 109\n0.045480 65\n0.012968 181\n0.389243 2\n0.325992 20\n0.121522 2\n0.311572 36\n0.319062 7\n0.000012 1595\n0.014846 188\n0.034983 7\n1.545254 12\n0.000033 36\n0.000027 96\n0.049306 18\n0.179590 23\n0.129681 33\n0.321223 125\n0.001158 933\n0.000730 102\n0.000158 572\n0.000546 134\n8.658686 1414\n0.940692 65\n2.375772 66\n0.496762 65\n0.050503 65\n0.050793 65\n0.050738 65\n0.050119 65\n0.050289 65\n0.049738 64\n0.469948 198\n0.434380 680\n0.000155 354\n0.000381 65\n0.493323 65\n0.500986 64\n0.049609 64\n0.050988 64\n0.050558 64\n0.050866 64\n0.050920 64\n0.050323 65\n0.227868 64\n0.176232 261\n0.171666 668\n0.000034 97\n0.000035 232\n0.000592 65\n0.555321 1\n0.390818 64\n3.883561 64\n0.497404 64\n0.050083 65\n0.049524 64\n0.052057 64\n0.050353 64\n0.050031 64\n0.050283 64\n0.050083 64\n0.203323 61\n0.184177 167\n0.219900 663\n0.000074 401\n0.000571 64\n0.523854 64\n0.575499 69\n2.005031 15\n0.157380 64\n0.272379 19\n0.335608 19\n0.151823 64\n2.505093 64\n0.497321 64\n0.050312 63\n0.049170 63\n0.049814 63\n0.050278 63\n0.050634 63\n0.050146 63\n0.050902 64\n0.050754 63\n0.050635 224\n0.055160 706\n0.000040 3\n0.000027 96\n0.000027 231\n0.000566 64\n1.134836 64\n0.500257 65\n0.049631 64\n0.050244 64\n0.051145 64\n0.051134 64\n0.051096 64\n0.052186 64\n0.049951 64\n0.050103 198\n0.054033 1037\n0.000524 8\n0.647320 65\n0.299594 56\n0.000826 47\n0.000941 18\n0.170663 128\n0.322903 4\n0.146594 28\n0.428886 28\n0.295924 28\n0.063989 28\n0.128024 28\n0.263953 28\n0.168449 28\n0.047806 3\n0.151750 2\n0.152513 52\n0.000053 1\n0.064424 201\n0.239824 81\n0.143864 118\n0.798037 112\n0.043146 65\n0.011338 181\n1.201499 2\n0.318251 20\n0.137515 2\n0.319162 36\n0.334350 7\n0.000011 1595\n0.014529 191\n0.035181 81\n1.660288 81\n0.177359 81\n0.178046 83\n0.118747 85\n0.477465 371\n0.240204 82\n0.418740 422\n0.593400 55\n0.685781 96\n0.042112 18\n0.279103 23\n0.129495 33\n0.432722 125\n0.002736 1511\n0.001698 66\n0.870391 65\n0.496401 65\n0.050052 65\n0.050066 64\n0.049665 64\n0.050197 64\n0.050241 64\n0.051173 64\n0.049726 64\n0.050093 65\n0.050119 64\n0.049991 223\n0.054539 1\n0.000072 36\n0.000049 1\n0.000046 36\n0.000045 1\n0.000122 40\n0.000044 1\n0.000042 40\n0.000043 1\n0.000041 138\n0.000044 1\n0.000043 35\n0.000042 1\n0.000040 147\n0.000046 1\n0.000042 31\n0.000043 1\n0.000045 95\n0.000059 1\n0.000043 1\n0.000042 82\n0.000084 107\n0.000170 2\n0.000164 1\n0.000043 32\n0.000051 1\n0.000048 1\n0.000056 73\n0.000043 1\n0.000042 115\n0.000048 65\n0.574656 65\n0.232155 1\n0.510720 1\n0.168038 71\n1.046202 32\n0.372701 32\n0.080448 32\n0.042490 65\n0.413345 65\n0.181290 65\n0.151903 1\n0.247696 1\n0.455915 1\n0.176080 1\n0.135934 1\n0.135553 32\n0.275069 32\n0.312054 32\n0.056042 32\n0.040747 65\n0.368264 1\n0.211941 16\n4.508334 19\n0.222653 65\n0.345442 13\n0.554355 65\n0.341627 1\n0.355803 13\n0.262501 65\n0.238065 1\n0.028138 2\n0.302998 12\n0.000032 65\n0.348969 1\n0.011020 13\n0.303740 65\n0.157324 1\n0.042928 13\n0.191724 65\n0.237745 1\n0.050610 127\n0.273779 2\n0.006980 12\n0.000025 73\n0.180738 1\n0.043048 13\n0.246924 42\n0.206342 22\n0.000053 1\n0.034234 13\n0.142731 206\n0.307934 710\n0.000047 173\n0.000641 159\n0.000035 1\n1.708679 14\n0.406491 1\n0.000032 8\n0.637340 1\n0.255776 1\n0.000068 1\n0.000047 4\n0.000057 8\n0.247754 65\n0.608387 8\n0.959599 7\n0.151969 66\n0.248444 6\n0.615449 5\n0.160177 118\n0.837542 112\n0.036714 65\n0.011677 181\n0.399442 2\n0.254204 20\n0.105778 2\n0.215543 36\n0.308242 7\n0.000013 1595\n0.014761 191\n0.034712 81\n0.485134 81\n0.234352 81\n0.524566 83\n0.177700 85\n0.244416 76\n0.175927 76\n0.466694 76\n0.175164 259\n0.295424 166\n0.114642 80\n0.294999 80\n0.175495 149\n0.346475 166\n0.568574 80\n0.175490 80\n0.648422 82\n0.174208 149\n0.173806 7\n0.982108 48\n0.000034 96\n0.051731 18\n0.147630 23\n0.121668 33\n0.433411 125\n0.001601 905\n0.000776 183\n0.000031 465\n0.000625 5\n0.877415 935\n0.000104 62\n0.000559 280\n0.000615 291\n0.823379 611\n0.000041 496\n0.000805 934\n0.414635 576\n0.000571 1\n0.398985 27\n0.003152 28\n0.000327 22\n0.385415 897\n0.000048 115\n0.000070 81\n0.000481 86\n0.000029 228\n0.000356 100\n1.107549 29\n0.000040 1505\n0.464359 255\n1.338101 689\n0.000081 518\n0.000503 62\n2.298313 63\n0.167684 66\n1.389020 238\n0.813185 260\n0.535883 1132\n0.000479 106\n0.880084 1\n0.000409 49\n0.000172 1\n0.000192 40\n0.000163 1\n0.000180 42\n0.000160 1\n0.000174 56\n0.000161 1\n0.000167 40\n0.000159 1\n0.000172 86\n0.000135 1\n0.000066 388\n0.000060 1\n0.000090 45\n0.000054 1\n0.000044 125\n0.000076 412\n0.000246 2\n0.000191 1\n0.000053 387\n0.000059 1043\n1.137276 1378\n0.000573 881\n0.849112 582\n0.000043 399\n0.000649 212\n0.129382 722\n0.000045 190\n0.000027 322\n0.000510 239\n0.599769 685\n0.000048 244\n0.000087 368\n0.000560 105\n0.670393 1277\n0.000435 199\n0.812200 729\n0.000051 166\n0.000075 438\n0.000499 219\n0.645740 761\n0.000097 92\n0.000029 320\n0.000526 62\n0.538588 63\n0.159594 63\n0.184165 63\n0.183651 63\n0.224871 63\n0.319047 64\n0.184210 64\n0.856163 63\n0.191585 63\n0.192341 7\n0.271158 138\n0.290930 125\n1.535717 134\n0.616551 179\n0.513351 64\n1.001710 14\n0.561668 6\n0.221192 114\n1.003971 108\n0.039436 64\n0.012019 181\n0.356294 2\n0.342141 20\n0.153551 2\n0.311687 36\n0.334975 7\n0.000012 1595\n0.014792 191\n0.035139 158\n0.617330 259\n2.266631 82\n0.479532 80\n0.123602 145\n0.470533 81\n0.696426 81\n0.174514 166\n0.232453 84\n0.362659 149\n0.178049 81\n0.636134 83\n0.118015 106\n0.355396 87\n0.303208 76\n0.122232 178\n0.180815 181\n0.231634 97\n0.406880 90\n0.232362 166\n0.407160 83\n0.359194 419\n0.473982 81\n1.132280 81\n0.178651 259\n1.673329 7\n3.794161 12\n0.000123 36\n0.000186 96\n0.051228 18\n1.227373 23\n0.153352 9\n0.462570 1810\n0.004464 238\n1.742825 665\n0.000043 2\n0.000068 1\n0.000414 233\n0.000025 217\n0.000376 146\n0.000033 105\n0.375755 844\n0.000046 433\n0.000642 64\n0.737455 64\n0.495641 64\n0.050011 64\n0.049698 64\n0.050419 65\n0.050393 64\n0.051022 64\n0.050931 64\n0.049382 64\n0.049993 64\n0.250541 65\n0.286963 1\n0.500102 1\n0.050348 1\n0.050872 1\n0.050255 1\n0.050357 1\n0.050021 1\n0.050536 1\n0.050801 1\n0.050485 1\n0.055106 1\n0.044866 1\n0.050968 1\n0.050706 1\n0.050966 1\n0.050024 1\n0.050008 1\n0.049956 1\n0.051393 1\n0.049804 1\n0.051051 1\n0.050264 1\n0.050643 1\n0.050877 1\n0.205783 70\n0.592492 32\n0.134300 32\n0.160915 32\n0.146775 32\n0.136003 45\n0.815547 45\n0.176208 45\n0.192408 45\n0.092113 45\n0.299867 83\n0.048140 70\n0.527929 32\n0.127860 45\n0.296081 83\n0.095686 45\n0.024294 115\n0.621945 109\n0.051171 65\n0.012712 18\n0.207823 25\n0.333393 149\n0.000100 8\n0.112801 28\n0.731247 3\n0.112075 45\n0.159794 1\n0.096792 28\n0.295575 28\n0.335919 28\n0.464194 28\n0.127832 4\n0.232177 4\n0.151853 4\n0.143860 6\n0.136013 28\n0.807756 28\n0.079920 53\n0.048449 45\n2.712448 29\n0.051209 29\n0.000094 3\n0.441667 30\n0.234568 1\n0.205245 65\n2.675785 64\n0.206212 65\n0.422798 1\n0.335368 1\n0.499764 1\n0.050543 1\n0.049744 1\n0.050845 1\n0.050933 1\n0.250178 45\n0.403111 32\n1.279833 65\n0.455595 4\n0.229729 1\n0.151722 1\n0.207735 32\n1.263475 65\n1.700584 1\n0.508052 1\n0.499858 1\n0.050031 1\n0.049964 1\n0.049830 1\n0.050308 1\n0.050254 1\n0.249567 45\n0.555201 45\n0.968028 45\n0.279965 1\n0.788864 1\n0.160068 32\n0.627319 1\n0.380676 3\n0.176297 3\n0.151944 3\n0.159772 3\n0.312408 3\n0.499579 3\n0.049796 2\n0.050105 1\n0.053096 3\n0.050005 3\n0.049683 3\n0.050195 3\n0.050703 3\n0.052032 3\n0.050052 2\n0.050232 104\n0.052898 18\n0.048516 3\n0.050357 3\n0.050817 3\n0.050171 3\n0.050264 31\n0.398371 31\n0.376156 201\n0.663835 169\n0.120341 1\n0.348533 1\n0.168046 3\n0.312044 32\n0.923385 32\n0.271875 32\n0.168119 32\n0.113540 80\n0.174531 32\n0.055709 206\n0.088131 107\n0.191170 107\n0.088794 107\n0.096094 107\n0.376135 107\n0.095694 107\n0.048213 107\n0.207921 107\n1.312177 3\n0.596880 2\n0.500210 1\n0.050697 3\n0.050942 3\n0.051051 3\n0.050803 3\n0.050740 3\n0.050229 3\n0.051003 2\n0.049985 1\n0.051559 3\n0.050203 3\n0.050826 82\n0.368914 60\n0.500525 59\n0.050561 58\n0.050754 57\n0.051111 56\n0.050838 55\n0.053579 75\n0.047323 248\n0.051373 31\n0.050721 31\n0.051380 31\n0.049569 31\n0.049704 46\n0.398094 44\n0.135940 4\n0.213879 4\n0.266163 1\n0.356959 1\n0.500053 1\n0.050013 1\n0.050127 1\n0.050774 1\n0.050144 1\n0.050812 1\n0.051251 1\n0.051042 1\n0.050950 1\n0.051221 1\n0.050321 1\n0.050636 1\n0.050478 1\n0.050194 1\n0.051448 1\n0.050387 1\n0.050152 1\n0.050531 65\n0.339105 1\n0.468402 1\n0.328010 35\n0.834851 32\n0.391919 35\n0.311802 32\n0.207989 32\n0.367908 57\n0.111960 23\n0.240424 21\n0.000050 32\n0.415682 32\n0.128416 31\n0.356069 27\n0.000118 40\n0.243458 32\n0.696228 32\n0.104258 57\n0.079791 23\n0.431709 22\n0.000044 32\n0.344031 32\n0.167969 31\n0.372990 29\n0.000097 40\n0.547064 62\n0.384971 3\n0.243852 32\n0.539127 32\n0.847694 187\n0.337426 484\n0.507183 409\n0.000181 31\n0.284344 25\n0.000077 58\n0.286934 102\n0.320105 306\n0.508210 320\n0.000043 32\n1.188190 32\n0.631784 32\n0.087804 115\n0.654449 109\n0.034076 65\n0.011994 181\n1.953763 2\n0.294314 20\n0.081244 2\n0.289486 36\n0.344574 7\n0.000011 1595\n0.014223 191\n0.034330 7\n1.172428 12\n0.000031 36\n0.000027 96\n0.049478 18\n0.133686 23\n0.145599 33\n0.353613 125\n0.001376 901\n0.000491 299\n0.000034 484\n0.000245 65\n0.775925 1\n0.155536 65\n0.380484 2\n0.203847 1\n0.499821 3\n0.049930 3\n0.050006 3\n0.050186 3\n0.049721 3\n0.050052 3\n0.050197 69\n0.309848 31\n0.125176 32\n0.079732 115\n0.518741 109\n0.044932 65\n0.013133 46\n0.267694 135\n0.001673 2\n0.390539 20\n0.137069 2\n0.183613 36\n0.324154 7\n0.000012 1595\n0.014530 169\n0.034742 81\n0.507815 7\n2.115599 48\n0.000113 96\n0.050825 18\n0.263226 23\n0.145429 1841\n0.194889 65\n0.544828 65\n0.356770 65\n0.263898 1\n0.871116 65\n0.604757 3\n0.771261 3\n0.499578 3\n0.049944 3\n0.050056 3\n0.052159 3\n0.050043 2\n0.049777 1\n0.049968 3\n0.050932 3\n0.051249 3\n0.049569 3\n0.050466 3\n0.050325 3\n0.050780 62\n0.650723 65\n0.221469 1\n0.646700 1\n0.499957 1\n0.050622 1\n0.050840 1\n0.050618 1\n0.050962 1\n5.081247 62\n0.276128 1\n0.108063 3\n1.096357 66\n0.693153 28\n0.245238 115\n0.564913 109\n0.038210 65\n0.013205 181\n0.213593 2\n0.150488 20\n0.130342 2\n0.166585 36\n0.313947 7\n0.000012 1595\n0.014225 175\n0.034395 141\n2.771179 7\n1.643113 48\n0.000080 96\n0.050746 18\n0.627256 23\n0.145571 33\n0.609240 125\n0.001216 902\n0.000513 299\n0.000352 484\n0.000306 105\n1.262835 29\n0.000035 1501\n0.360742 100\n1.321338 29\n0.000915 1\n0.203746 49\n0.002127 102\n0.000761 800\n0.000079 221\n0.000454 405\n0.000088 105\n1.021790 29\n0.000037 45\n0.580311 44\n0.152225 44\n0.376137 1149\n0.370730 64\n0.678848 1\n0.262128 3\n0.905352 173\n0.511502 64\n0.273631 64\n0.498373 64\n0.049633 64\n0.050093 64\n0.049757 65\n0.050181 61\n0.050111 428\n0.051789 77\n0.000037 64\n0.049834 64\n0.292250 176\n0.672657 64\n0.176573 130\n0.607516 18\n0.518394 117\n0.058274 29\n0.000037 93\n1.831543 18\n4.030114 111\n0.682050 29\n0.000043 1645\n0.387309 104\n2.150310 29\n0.000037 44\n0.260567 45\n0.232020 44\n0.416024 1482\n0.492209 5\n0.622233 1205\n0.000096 39\n0.000754 209\n0.000383 71\n0.174765 1102\n0.000047 309\n0.000599 482\n0.174894 653\n0.000091 93\n0.000039 5\n0.191749 973\n0.000038 76\n0.000030 244\n0.000569 4\n0.169373 1\n0.000155 85\n0.000088 1\n0.000114 77\n0.000089 1\n0.000103 404\n0.000107 1\n0.000102 99\n0.000075 1\n0.000089 1\n0.000076 263\n0.000092 2\n0.000237 1\n0.000088 234\n0.000098 1\n0.000121 72\n0.000353 194\n0.000403 1\n0.000226 199\n0.000177 199\n0.165930 706\n0.000039 678\n0.001051 217\n0.000054 249\n0.173456 725\n0.000047 295\n0.000613 978\n0.167058 518\n0.000094 426\n0.000548 24\n0.156234 460\n0.000037 61\n0.000074 466\n0.494751 801\n0.000042 343\n0.000765 63\n0.425672 63\n0.207791 63\n0.152081 63\n0.176052 63\n0.816632 64\n0.374800 24\n0.285602 146\n0.000438 1\n0.134676 28\n0.245634 28\n0.216067 28\n0.448111 2\n0.135686 52\n0.000027 28\n0.104742 28\n0.737190 28\n0.046364 28\n0.103839 28\n0.095793 3\n0.240413 28\n0.151772 3\n0.144193 28\n0.351712 28\n0.072072 28\n0.152395 28\n0.055797 28\n0.712047 225\n0.192320 41\n0.255913 41\n0.071896 41\n0.095816 41\n0.064095 169\n0.248552 9\n0.251050 23\n0.000055 1\n0.289152 114\n0.033386 108\n0.036237 64\n0.011805 17\n1.206246 102\n0.235660 29\n0.000035 41\n0.397025 83\n1.690905 17\n0.596761 112\n0.187983 29\n0.000038 28\n0.972904 28\n0.144697 32\n0.163153 78\n0.464485 99\n1.262423 29\n0.000187 83\n1.335647 17\n0.532157 112\n0.187989 29\n0.000036 28\n1.484469 28\n0.136093 33\n0.124099 1\n0.299518 49\n0.050586 1240\n0.000419 401\n0.841721 621\n0.000041 334\n0.000609 555\n0.865076 303\n0.000045 3\n0.000071 290\n0.000524 65\n0.362034 66\n0.488163 25\n0.225406 148\n0.000041 1\n0.119320 28\n0.269116 28\n0.215847 28\n0.144096 28\n0.103649 28\n0.136180 28\n0.300286 4\n0.716964 42\n0.191082 224\n0.184256 41\n0.312548 43\n0.383517 80\n0.127707 7\n0.130571 48\n0.000032 10\n0.493215 32\n0.000032 224\n0.304184 41\n0.256361 41\n0.079675 41\n0.087752 41\n0.080586 91\n0.328316 28\n0.252085 24\n0.000089 4\n0.339933 2\n0.087557 68\n0.000033 1\n0.096138 214\n2.816481 415\n0.516117 461\n0.000104 41\n3.955660 41\n0.137309 41\n0.094852 41\n0.111976 41\n0.128480 2\n0.087782 41\n0.031769 41\n0.080000 41\n0.055850 41\n0.119737 41\n0.056335 106\n0.248231 313\n0.516690 274\n0.000068 116\n0.092140 110\n0.034677 146\n0.012639 18\n1.271654 1\n0.175773 1\n0.151918 1\n0.152342 1\n0.143943 1\n0.191894 1\n0.176011 2\n0.471897 27\n0.195882 59\n0.000090 51\n0.091736 116\n0.553762 110\n0.028047 65\n0.011861 18\n3.910472 102\n0.244168 29\n0.000037 1\n0.786185 49\n0.024081 1572\n0.000969 103\n1.540580 29\n0.000035 43\n0.732309 44\n0.216836 44\n0.495251 45\n0.519879 47\n1.240221 721\n0.353613 111\n1.039939 29\n0.000147 41\n0.237886 43\n0.408169 44\n1.607953 1645\n0.652335 65\n1.392332 1\n0.315391 1\n0.499897 1\n0.050238 1\n0.049717 1\n0.049851 1\n0.050198 1\n0.050608 1\n0.050350 1\n0.049754 70\n0.475637 32\n0.148894 32\n0.160795 32\n0.151071 32\n0.152017 32\n0.160132 32\n0.136117 32\n0.135659 45\n0.584190 45\n0.279963 1\n0.316951 1\n0.509646 1\n0.046499 1\n0.049318 1\n0.050079 1\n0.050524 1\n0.049556 1\n0.050177 1\n0.145948 31\n0.243555 31\n0.151780 31\n0.167873 8\n0.413774 1\n0.263274 1\n0.499890 1\n0.049816 1\n0.050413 1\n0.052650 1\n0.050055 1\n0.050112 1\n0.050366 1\n0.049917 1\n0.050447 1\n0.051239 1\n0.049457 1\n0.050604 1\n0.050031 1\n0.051882 1\n0.047743 1\n0.050027 1\n0.050387 1\n0.049806 1\n0.052682 31\n0.331607 256\n0.208220 13\n0.289917 32\n0.709413 32\n0.032066 32\n0.263875 51\n0.095680 32\n0.095778 65\n0.289485 3\n0.460086 1\n0.535920 8\n0.200857 1\n0.119277 1\n0.501285 1\n0.050742 1\n0.050596 1\n0.050946 1\n0.050957 1\n0.050887 1\n0.051182 1\n0.049849 1\n0.050661 104\n0.054021 18\n0.048687 1\n0.050189 50\n0.687056 40\n0.128224 32\n0.111853 32\n0.152254 32\n0.103502 111\n0.104383 40\n0.056764 32\n0.143299 32\n0.136746 32\n0.055144 82\n0.168179 40\n0.208124 32\n0.080059 32\n0.079652 32\n0.097555 82\n0.278559 32\n0.192185 8\n0.189359 31\n0.508389 35\n0.000123 30\n0.265618 29\n0.000147 8\n0.232903 115\n0.041134 109\n0.034358 65\n0.016120 89\n0.510033 29\n0.000049 181\n1.391626 2\n0.429988 20\n0.329368 2\n0.303472 36\n0.295313 7\n0.000011 1595\n0.014538 187\n0.034357 81\n2.473924 81\n0.175162 153\n0.116374 81\n0.168897 83\n0.174886 106\n0.685093 87\n0.296159 76\n0.117032 76\n0.120758 133\n0.057432 181\n0.169793 97\n0.398040 85\n0.181851 166\n0.225279 80\n0.348966 80\n0.177043 80\n0.347553 470\n0.292076 74\n0.409355 78\n0.353011 78\n0.115714 78\n0.172531 79\n0.175620 80\n0.176915 80\n0.133101 82\n0.232824 84\n0.173702 86\n0.231109 170\n0.242819 88\n0.303533 77\n0.121706 153\n0.120861 193\n0.058152 183\n0.286515 99\n0.286517 84\n0.243250 172\n0.228039 86\n0.292246 86\n0.180481 86\n0.697888 400\n0.234895 7\n2.176757 48\n0.000028 96\n0.050544 18\n0.430439 23\n0.137445 33\n0.649532 125\n0.000944 912\n0.000354 293\n0.000179 432\n0.000177 66\n5.986409 4\n0.917360 115\n0.533908 109\n0.038040 65\n0.012345 18\n0.371916 104\n0.235552 29\n0.000035 721\n0.742727 64\n0.519371 64\n0.214814 65\n0.168469 64\n0.151754 64\n0.480211 1\n0.206944 3\n0.689596 149\n0.607425 63\n0.312782 63\n0.499363 65\n0.049812 64\n0.051197 64\n0.050624 64\n0.164216 117\n0.224414 64\n0.160699 113\n0.551363 18\n0.238610 117\n0.058004 29\n0.000037 52\n1.039133 83\n0.598977 84\n0.258198 93\n1.255929 1\n0.231120 18\n0.686527 111\n0.265944 29\n0.000035 1\n0.264495 49\n0.002278 3\n0.000807 923\n0.000036 126\n0.000424 94\n0.000027 3\n0.000439 389\n0.000033 57\n1.827862 901\n0.000042 475\n0.000535 55\n0.989377 873\n0.000117 165\n0.000029 3\n0.000080 295\n0.000502 629\n0.717096 567\n0.000035 322\n0.000773 348\n1.584550 557\n0.000043 417\n0.000587 103\n0.632899 1\n0.000075 273\n0.000133 1\n0.000050 39\n0.000045 1\n0.000042 56\n0.000044 1\n0.000044 20\n0.000044 1\n0.000043 86\n0.000044 1\n0.000043 328\n0.000066 119\n0.000171 1\n0.000052 53\n0.000045 1\n0.000044 38\n0.000047 357\n0.000240 351\n6.590059 558\n0.000037 411\n0.000462 215\n0.818539 767\n0.000039 775\n0.000612 349\n3.380769 613\n0.000041 403\n0.000784 104\n0.178159 807\n0.000050 173\n0.000071 39\n0.000487 360\n0.000331 366\n0.367052 560\n0.000072 480\n0.000579 5\n0.295009 953\n0.000049 7\n0.000025 175\n0.000025 42\n0.000024 251\n0.000580 77\n0.350963 828\n0.000051 102\n0.000025 339\n0.000745 282\n0.310811 888\n0.000102 40\n0.000078 332\n0.000729 467\n0.387400 441\n0.000045 71\n0.000025 237\n0.000026 86\n0.000025 292\n0.000659 4\n0.341002 1\n0.000639 121\n0.000256 1\n0.000290 171\n0.000294 1\n0.000290 209\n0.000248 1\n0.000277 87\n0.000245 1\n0.000264 243\n0.000250 1\n0.000271 161\n0.004104 2\n0.000803 1\n0.000249 165\n0.000235 1\n0.000266 577\n0.000255 8\n0.750245 1\n0.000467 902\n0.000393 525\n0.000038 76\n0.000433 171\n0.000033 862\n0.778650 189\n0.000031 233\n0.000533 64\n0.480596 64\n0.499862 64\n0.050406 63\n0.050748 63\n0.049849 63\n0.049499 63\n0.050881 63\n0.712895 7\n0.191180 24\n0.253671 154\n0.000039 1\n0.110429 28\n0.293190 28\n0.167964 28\n0.072020 2\n0.112126 52\n0.000035 28\n0.088043 28\n0.144057 28\n0.079856 28\n0.200063 28\n0.024581 3\n0.368091 28\n0.119092 3\n0.160564 28\n0.175762 28\n0.032024 28\n0.183949 28\n0.032517 114\n0.582954 108\n0.036787 64\n0.038215 34\n2.601132 144\n0.000038 1\n0.126892 28\n0.261221 28\n0.192268 28\n0.304001 2\n0.111680 52\n0.000032 28\n0.136083 28\n0.168047 28\n0.048754 28\n0.167383 28\n0.064131 28\n0.359950 28\n0.312153 28\n0.184080 28\n0.111575 4\n0.472505 28\n0.071759 28\n0.032158 28\n0.095447 28\n0.096325 28\n0.168442 3\n0.175939 28\n0.583922 3\n0.071558 28\n2.712102 30\n0.051393 3\n0.666201 1\n0.500133 1\n0.050547 1\n0.050676 1\n0.051000 1\n0.051001 1\n0.050509 1\n0.050790 1\n0.050674 1\n0.050618 1\n0.051132 1\n0.049807 1\n0.052324 31\n0.263265 32\n0.648084 206\n0.224133 972\n0.519044 503\n0.000043 3\n0.374400 3\n0.500307 3\n0.049473 2\n0.050291 1\n0.049798 3\n0.049993 3\n0.050049 61\n0.724791 40\n0.211397 7\n0.443138 55\n0.001083 46\n0.000939 722\n0.517140 241\n0.000096 17\n0.095145 114\n0.066014 108\n0.027137 64\n0.013351 224\n0.578228 839\n0.000050 147\n0.000078 568\n0.000791 278\n0.795085 784\n0.000044 406\n0.000803 85\n1.113122 841\n0.000107 147\n0.000030 206\n0.000027 53\n0.761396 944\n0.000043 3\n0.000059 486\n0.000639 274\n0.786551 723\n0.000079 45\n0.000513 69\n0.000036 3\n0.000062 79\n0.000256 90\n0.000024 88\n0.163460 915\n0.000103 457\n0.000078 214\n0.158315 734\n0.000046 963\n0.000776 271\n0.850722 641\n0.000038 7\n0.000027 264\n0.000033 213\n0.804234 840\n0.000149 377\n0.000032 334\n0.000811 200\n0.654259 1\n0.000067 77\n0.000050 1\n0.000044 47\n0.000044 1\n0.000042 192\n0.000047 1\n0.000044 87\n0.000046 1\n0.000043 236\n0.000049 1\n0.000062 75\n0.000057 2\n0.000132 1\n0.000093 139\n0.000065 196\n0.000212 1\n0.000057 77\n0.000051 1\n0.000046 131\n0.000052 85\n0.706728 1194\n0.000515 269\n0.599853 730\n0.000093 487\n0.000778 43\n0.801239 946\n0.000086 483\n0.000709 41\n0.544320 948\n0.000044 164\n0.000115 126\n0.000069 204\n0.000522 274\n0.176771 724\n0.000034 113\n0.000031 2\n0.000081 173\n0.000550 225\n0.152387 778\n0.000041 457\n0.000533 214\n0.597906 734\n0.000134 963\n0.003225 271\n0.520158 641\n0.000040 271\n0.000547 126\n0.347834 927\n0.000046 711\n0.000785 200\n0.157411 1\n0.000426 77\n0.000167 1\n0.000194 47\n0.000167 1\n0.000179 192\n0.000163 1\n0.000192 87\n0.000163 1\n0.000179 236\n0.000362 1\n0.000193 75\n0.000156 2\n0.000279 1\n0.000153 139\n0.000151 196\n0.000304 1\n0.000180 77\n0.000147 1\n0.000164 131\n0.000151 1\n0.633078 83\n0.000381 1\n0.000198 143\n0.000220 1\n0.000227 193\n0.000172 1\n0.000198 87\n0.000164 1\n0.000185 26\n0.000163 1\n0.000178 290\n0.000162 1\n0.000193 97\n0.000159 2\n0.000281 1\n0.000149 34\n0.000148 1\n0.000163 1\n0.000148 108\n0.000139 206\n0.000263 269\n0.236791 728\n0.000074 156\n0.000036 333\n0.000593 43\n0.175505 946\n0.000081 483\n0.000689 64\n0.558997 867\n0.000041 115\n0.000055 39\n0.000029 295\n0.000694 410\n0.533252 492\n0.000051 226\n0.000078 314\n0.000788 2\n0.583103 947\n0.000045 40\n0.000025 305\n0.000649 94\n0.593628 834\n0.000052 1113\n0.000563 560\n0.502870 624\n0.000076 537\n0.000770 64\n0.210345 64\n0.576219 64\n0.159870 63\n0.191865 63\n1.103912 64\n0.319932 24\n0.317668 147\n0.000039 7\n0.135907 2\n0.644704 28\n0.135400 28\n0.152282 28\n0.103928 2\n0.096051 52\n0.000031 28\n0.296625 28\n1.519316 28\n0.168079 28\n0.039692 28\n0.112565 28\n0.663961 28\n0.247852 28\n0.055893 28\n0.056431 28\n0.039814 28\n0.136001 28\n0.104643 28\n0.151433 4\n1.080148 4\n0.499701 4\n0.050123 4\n0.051260 4\n0.050840 4\n0.050178 4\n0.050171 4\n0.050607 28\n0.692760 206\n0.200421 41\n0.290094 41\n0.032292 41\n0.072083 41\n0.058574 41\n0.098578 41\n0.072568 41\n0.151819 769\n0.507265 421\n0.000025 102\n0.312743 35\n0.255814 7\n1.001171 28\n0.418979 28\n0.032674 28\n0.175494 28\n0.120138 28\n0.063276 28\n0.152659 28\n0.087413 561\n0.512543 461\n0.000044 28\n0.079980 28\n0.568193 28\n0.391867 28\n0.063845 55\n0.095888 28\n0.088011 28\n0.232280 28\n0.033143 28\n0.078670 28\n0.047836 28\n0.152508 28\n0.015689 4\n0.712395 4\n0.367822 28\n0.287903 28\n0.047634 28\n0.736435 35\n0.308439 7\n0.271791 114\n0.041667 108\n0.047632 64\n0.013917 17\n6.976801 70\n0.072309 553\n0.569687 385\n0.000063 470\n0.000559 5\n0.368934 950\n0.000141 469\n0.000571 5\n0.486843 1013\n0.000083 301\n0.000488 120\n0.440013 831\n0.000048 2\n0.000075 539\n0.000697 46\n0.462416 958\n0.000118 328\n0.000080 5\n0.366873 1020\n0.000072 355\n0.000604 5\n0.357211 918\n0.000051 176\n0.000552 352\n0.000030 189\n0.000336 99\n0.000028 139\n0.338176 719\n0.000050 53\n0.000075 556\n0.000697 944\n0.399091 428\n0.000033 305\n0.000780 64\n1.657619 65\n0.196405 64\n0.167287 64\n0.167787 64\n0.160267 65\n0.327395 25\n0.725183 148\n0.000039 1\n0.958943 28\n0.301886 51\n0.056655 3\n0.183326 28\n0.456103 1\n1.813393 3\n0.842043 135\n0.224231 3\n0.319761 252\n0.192760 400\n0.627366 454\n0.000042 684\n0.000757 1\n0.564811 900\n0.000047 704\n0.000730 64\n0.567418 63\n0.498818 63\n0.049855 63\n0.049191 63\n0.050061 63\n0.050977 63\n0.049274 64\n0.152917 111\n0.162168 107\n0.276860 99\n0.109576 1\n0.284671 28\n0.659121 51\n0.056219 3\n0.128642 28\n0.311227 8\n0.327768 214\n0.232605 41\n0.287627 41\n0.023804 41\n0.112149 41\n0.040785 41\n0.111629 41\n0.063929 41\n0.176091 57\n0.343908 3\n0.120289 28\n0.095791 28\n0.146444 53\n0.029796 3\n0.111946 28\n0.130105 51\n0.061898 33\n0.792283 8\n0.136025 1\n0.143878 35\n0.151720 4\n0.143931 8\n0.136361 28\n0.399961 51\n0.064921 1\n0.070883 28\n0.088061 28\n0.151810 28\n0.071954 55\n0.071811 28\n0.128305 28\n0.096547 28\n0.103885 28\n0.127900 28\n0.071517 28\n0.289993 100\n0.302620 99\n0.143404 8\n0.245007 28\n0.242576 12\n0.352075 2\n0.128279 28\n0.360878 28\n0.134339 28\n0.073023 2\n0.055534 52\n0.000030 28\n0.261421 99\n0.170252 8\n0.183005 28\n22.993295 28\n0.120187 28\n0.088392 55\n0.223302 28\n0.143963 28\n0.288300 28\n0.064013 28\n0.152069 28\n0.055613 3\n0.192727 28\n0.111757 1\n0.087927 1\n0.552412 8\n0.127519 1\n0.144217 28\n0.735580 203\n0.193337 41\n0.271112 41\n0.040051 41\n0.079792 41\n0.048168 41\n0.112062 41\n0.048385 41\n0.191859 199\n0.507511 435\n0.000045 57\n0.100492 36\n0.303188 8\n0.080507 28\n0.216470 3\n0.095878 28\n0.208130 30\n0.031255 4\n0.378200 115\n0.033575 109\n0.029715 65\n0.014731 200\n0.509118 260\n0.000117 75\n1.852023 64\n0.161833 65\n1.221137 2\n0.144270 4\n0.463802 1\n0.168096 8\n0.176089 28\n0.447796 28\n0.176035 53\n0.079504 1\n0.128943 28\n1.087146 28\n0.104446 28\n0.079742 28\n0.064026 3\n0.103891 28\n0.112336 51\n0.040183 1\n0.071638 28\n0.480261 28\n0.168205 28\n0.079756 55\n0.079913 28\n0.152009 28\n0.128407 28\n0.040475 28\n0.167330 28\n0.048274 28\n2.224688 191\n0.191583 41\n0.223817 41\n0.040063 41\n0.079728 41\n0.056630 41\n0.119715 41\n0.064009 41\n0.167911 91\n0.408946 36\n0.337006 36\n0.843878 137\n0.210691 2\n0.120680 115\n0.489440 109\n0.032021 65\n0.013508 25\n3.547487 59\n0.000036 28\n0.187921 53\n0.039667 3\n0.216160 28\n0.168346 3\n0.199921 28\n0.106715 51\n0.053123 3\n0.087939 28\n0.103912 28\n0.095750 28\n0.104630 28\n0.064524 28\n0.317269 137\n0.506356 8\n0.142412 2\n0.145450 1\n0.000029 4\n0.415650 2\n0.144095 4\n0.168079 1\n0.191722 8\n0.217732 28\n0.366386 28\n0.167827 28\n0.056185 55\n0.111813 28\n0.064152 28\n0.144161 28\n0.039779 28\n0.243412 4\n0.253354 4\n0.111258 4\n0.128323 28\n0.103836 28\n0.103953 28\n0.121397 28\n0.095251 28\n0.031500 28\n0.176005 28\n0.128390 28\n0.431416 28\n0.160176 31\n0.208445 137\n0.447973 8\n0.180907 2\n0.450783 1\n0.000029 28\n0.279711 28\n0.157647 28\n0.066270 55\n0.120103 28\n0.080023 28\n0.095960 28\n0.151845 28\n0.056125 28\n1.240050 28\n0.151870 28\n0.112061 28\n0.095875 28\n0.088811 28\n0.343569 30\n0.047822 2\n0.425313 115\n0.065588 109\n0.058269 65\n0.013689 75\n3.006689 65\n0.136975 65\n0.152533 66\n0.143997 64\n0.128135 25\n0.329067 149\n0.000036 64\n0.144564 122\n0.435121 3\n0.199750 41\n0.087709 41\n0.160286 41\n0.096224 41\n0.152020 41\n0.096488 41\n0.183791 3\n0.087492 41\n0.104159 41\n0.176252 41\n0.103701 41\n0.112720 3\n0.039586 41\n0.128124 41\n0.048270 41\n0.064165 41\n0.039143 41\n0.128418 41\n0.079568 41\n0.136441 41\n0.287610 115\n0.451169 109\n0.038613 65\n0.013887 181\n2.107297 2\n0.293801 20\n0.129714 2\n0.375326 36\n0.311452 7\n0.000012 1595\n0.014596 187\n0.034828 81\n1.034297 81\n0.179536 81\n0.118735 83\n0.118213 106\n0.416309 87\n0.247465 76\n0.121455 76\n0.122875 133\n0.119893 172\n0.180855 221\n0.118320 97\n0.231958 7\n0.367783 48\n0.000032 96\n0.051829 18\n0.240561 23\n0.129373 2161\n0.548757 66\n0.544750 65\n0.163156 65\n0.167846 65\n0.175946 65\n0.183752 2\n0.415738 25\n0.332125 149\n0.000043 2\n0.199385 4\n0.499843 28\n0.294522 28\n0.208112 28\n0.072100 34\n0.145988 21\n0.000088 28\n0.077731 28\n0.148743 28\n0.075409 28\n0.095863 28\n0.048259 28\n0.168337 28\n0.039341 1\n0.216076 28\n0.024124 3\n0.176550 28\n0.103871 30\n0.039522 8\n0.457221 115\n0.049422 109\n0.032090 65\n0.015536 18\n5.718812 104\n0.245647 29\n0.000039 44\n0.306752 44\n0.360021 43\n0.240105 1\n0.583769 49\n0.005854 1220\n0.000716 6\n2.234326 953\n0.000049 2\n0.000069 359\n0.000699 46\n0.370277 750\n0.000048 442\n0.000604 71\n0.769436 1202\n0.000727 64\n0.737942 64\n0.168441 8\n0.375258 25\n0.534640 148\n0.000070 64\n0.311996 28\n0.691796 28\n0.183949 28\n0.176353 28\n0.087804 28\n0.184281 28\n1.095921 211\n0.208079 41\n0.312175 41\n0.023877 41\n0.136033 41\n0.056394 41\n0.087498 41\n0.088091 41\n0.176156 579\n0.507756 422\n0.000041 57\n0.436208 36\n0.317273 8\n0.362896 2\n0.320351 71\n0.000032 3\n0.199791 28\n0.168220 30\n0.045878 4\n1.001870 348\n0.508747 206\n0.000057 99\n1.868121 1\n0.170390 28\n4.851895 28\n0.216234 28\n0.415853 28\n0.319917 28\n0.288118 28\n0.529771 41\n0.507914 211\n0.122418 484\n0.507579 409\n0.000067 41\n0.781062 41\n0.055105 43\n0.312513 43\n0.119942 41\n0.191813 41\n0.032743 41\n0.078899 41\n0.048047 41\n0.172759 41\n0.100506 41\n0.126730 57\n0.320808 36\n0.477225 2\n0.242721 28\n0.000029 28\n0.143553 28\n0.120186 28\n0.120248 28\n0.039849 28\n0.128219 28\n0.071918 28\n0.272180 30\n0.061252 4\n1.001645 1\n0.021077 282\n0.508590 183\n0.000102 30\n0.287193 32\n0.029356 6\n1.001711 129\n0.301770 556\n0.000043 127\n0.000029 155\n0.000148 3\n0.000926 266\n0.000033 145\n5.582450 767\n0.000084 7\n0.000563 53\n0.000029 2\n0.000076 57\n0.000231 131\n0.000031 63\n1.592754 63\n0.499624 64\n0.050210 63\n0.049878 63\n0.050070 63\n0.050386 64\n0.050446 64\n0.049978 128\n4.965793 683\n0.000077 425\n0.000711 145\n5.041600 767\n0.000047 7\n0.000135 243\n0.000604 63\n0.990649 63\n0.499097 64\n0.050719 63\n0.050687 63\n0.050662 63\n0.051482 64\n0.049696 64\n0.230143 64\n0.752190 64\n0.664805 62\n0.206800 1\n0.247443 1\n0.167812 32\n0.803963 34\n0.037881 3\n0.662515 34\n0.739788 34\n0.216027 34\n0.096043 116\n1.581276 110\n0.034452 65\n0.011122 181\n3.938374 2\n0.238034 20\n0.129377 2\n0.336470 1\n2.788707 2\n0.703945 200\n0.000206 118\n0.000059 113\n0.000083 106\n0.000041 2\n0.000010 38\n0.032920 64\n0.000015 298\n0.000237 25\n0.000012 159\n0.000104 89\n0.000048 2\n0.000009 93\n0.000084 102\n0.000048 95\n0.000079 23\n0.000048 120\n0.000081 60\n0.000011 36\n0.000080 2\n0.000010 96\n0.020368 18\n0.474926 23\n0.617401 33\n3.041496 125\n0.001924 1441\n0.000528 110\n2.163526 831\n0.000038 133\n0.000559 1\n0.633909 66\n0.000080 1\n0.000050 121\n0.000594 1\n0.000050 64\n0.000166 1\n0.000044 62\n0.000048 1\n0.000044 101\n0.000064 1\n0.000162 102\n0.000140 1\n0.000118 58\n0.000130 1\n0.000126 49\n0.000219 1\n0.000066 321\n0.000071 6\n0.000325 1\n0.000054 50\n0.000055 2\n0.000312 1\n0.000056 55\n0.000159 1\n0.000056 134\n0.000055 98\n3.093831 29\n0.000036 1767\n0.257921 131\n4.438835 668\n0.000047 3\n0.000693 733\n0.000070 902\n2.350471 794\n0.000629 400\n2.116106 454\n0.000040 680\n0.000774 1598\n0.479990 5\n1.653603 790\n0.000111 733\n0.000668 5\n0.883789 994\n0.000049 595\n0.000736 206\n4.995195 1\n0.000078 77\n0.000052 1\n0.000047 234\n0.000050 1\n0.000046 87\n0.000066 1\n0.000044 233\n0.000048 1\n0.000043 75\n0.000059 2\n0.000119 1\n0.000079 41\n0.000049 294\n0.000182 1\n0.000058 136\n0.000049 1\n0.677092 916\n0.000111 797\n0.000579 64\n2.850658 64\n0.168071 64\n0.160127 64\n0.295943 3\n0.206695 3\n0.499792 3\n0.050202 3\n0.050129 3\n0.050055 3\n0.050946 2\n0.050602 1\n0.050513 3\n0.050810 3\n0.050929 3\n0.050085 3\n0.050307 3\n0.050806 3\n0.051070 2\n0.050375 1\n0.050315 65\n0.377230 65\n0.176959 85\n2.353304 59\n0.000994 65\n0.379700 1\n0.089011 114\n0.429928 65\n0.225311 1\n0.064749 114\n0.335468 65\n0.192419 1\n0.047884 1\n0.184287 1\n0.151743 1\n0.152287 104\n0.162129 18\n0.141595 3\n0.271886 89\n0.191519 29\n0.000079 65\n0.161481 3\n0.239869 35\n0.497262 163\n0.000039 2\n0.243760 28\n0.745396 28\n0.072020 28\n0.056019 34\n0.112246 21\n0.000056 115\n0.466107 109\n0.039206 65\n0.014904 46\n0.247966 135\n0.001760 2\n0.253909 20\n0.105454 2\n0.191509 36\n0.334748 7\n0.000012 1595\n0.014345 187\n0.034698 7\n0.863376 48\n0.000033 96\n0.048612 18\n0.255459 23\n0.113461 2211\n0.316467 65\n0.520144 65\n0.427804 65\n0.176649 1\n0.174002 1\n0.499860 1\n0.050001 65\n0.138098 65\n0.184748 1\n0.079136 65\n1.466225 59\n0.000118 65\n0.158203 52\n0.149557 21\n0.000062 115\n0.810866 109\n0.077060 65\n0.007503 181\n0.275667 2\n0.182276 20\n0.105501 2\n0.337357 36\n0.287951 7\n0.000013 1595\n0.014321 187\n0.034455 7\n2.265226 48\n0.000033 96\n0.050558 18\n0.432308 23\n0.145728 33\n0.425322 125\n0.002953 965\n0.000448 627\n0.000099 401\n0.000038 5\n27.507713 1378\n0.000461 278\n0.535944 845\n0.000040 305\n0.000666 148\n0.543633 1\n0.000076 216\n0.000053 1\n0.000046 334\n0.000140 1\n0.000049 46\n0.000045 1\n0.000042 46\n0.000042 1\n0.000044 74\n0.000046 1\n0.000044 69\n0.000059 6\n0.000387 1\n0.000059 148\n0.000091 158\n0.000530 182\n0.000042 130\n0.731507 790\n0.000038 98\n0.000032 410\n0.000766 79\n0.493344 859\n0.000048 240\n0.000072 295\n0.000761 94\n0.454896 489\n0.000096 336\n0.001661 253\n0.000030 87\n0.000378 182\n0.000061 72\n0.629248 929\n0.000050 2\n0.000027 100\n0.000025 161\n0.000087 49\n0.724346 896\n0.000048 947\n0.000625 1\n0.987216 956\n0.000048 91\n0.000027 373\n0.000937 65\n1.082964 64\n0.159763 63\n0.168390 63\n0.143499 63\n0.168099 64\n0.415480 24\n1.013259 147\n0.000038 1\n0.135846 28\n0.637463 51\n0.055436 3\n0.144017 28\n0.048506 28\n0.159283 28\n0.032316 55\n0.144136 28\n0.047331 28\n0.129450 28\n0.159357 28\n0.079616 28\n0.087917 28\n0.024307 3\n0.408031 28\n0.128131 28\n0.415777 3\n0.273887 28\n0.334360 28\n0.191860 28\n0.136037 47\n0.047722 3\n0.136453 28\n0.095795 28\n0.168103 53\n0.120387 3\n0.135600 28\n3.032272 28\n0.183986 28\n0.111685 55\n0.088463 28\n0.103482 28\n0.385080 28\n0.046971 28\n0.096154 28\n0.072142 28\n0.064043 28\n0.096129 28\n0.127973 65\n4.398556 1227\n0.000834 89\n0.632109 854\n0.000050 90\n0.000027 274\n0.000505 98\n1.023809 808\n0.000047 502\n0.000523 223\n0.724717 1\n0.000575 46\n0.000256 1\n0.000262 46\n0.000237 1\n0.000330 71\n0.000242 1\n0.000261 396\n0.000247 1\n0.000291 87\n0.000233 1\n0.000243 33\n0.000227 2\n0.000386 1\n0.000233 35\n0.000221 1\n0.000238 112\n0.000283 1\n0.000257 160\n0.000227 6\n0.000408 1\n0.000266 87\n0.000220 1\n0.000245 87\n0.000218 1\n0.000242 96\n0.000222 200\n6.896872 1197\n0.000540 69\n0.308857 854\n0.000049 188\n0.000028 297\n0.000565 83\n0.415261 851\n0.000129 288\n0.000094 1\n0.688020 917\n0.000047 593\n0.000532 62\n4.882568 64\n0.667857 898\n0.000058 323\n0.000576 5\n0.394644 917\n0.000124 229\n0.000031 359\n0.000627 63\n0.384241 63\n0.207532 63\n0.159922 63\n0.207984 7\n0.216319 4\n0.642084 4\n0.143872 4\n0.168337 4\n0.183975 4\n0.143728 4\n0.144026 4\n0.135933 28\n0.152123 28\n0.079786 28\n0.224241 28\n0.184143 28\n0.047644 28\n0.184453 28\n0.015560 2\n0.296303 28\n0.376101 28\n0.231887 3\n0.095811 28\n0.816288 30\n0.028191 35\n0.974862 159\n0.173238 64\n0.138387 28\n0.524609 28\n0.039909 28\n0.160138 28\n0.055805 57\n0.040567 3\n0.095398 28\n0.144290 28\n0.240052 4\n0.440122 28\n0.040173 28\n0.079719 28\n0.135857 28\n0.111782 28\n0.088282 28\n0.111848 28\n0.024095 56\n0.176274 28\n0.359923 30\n0.037594 3\n0.391514 196\n0.637020 43\n0.198250 43\n0.328399 43\n0.087317 43\n0.120218 43\n0.112579 43\n0.111204 43\n0.096955 43\n0.087086 43\n0.224430 43\n0.071568 43\n0.096113 877\n0.512746 408\n0.000096 45\n0.191241 45\n0.500233 45\n0.051284 45\n0.050117 45\n0.050590 45\n0.050491 45\n0.049995 45\n0.050989 45\n0.051481 45\n0.050776 45\n0.118074 43\n0.499003 43\n0.180877 43\n0.024036 43\n0.200204 43\n0.079547 43\n0.128413 43\n0.063877 43\n0.112052 43\n0.047804 43\n0.128279 43\n0.096083 43\n0.085926 43\n0.154052 43\n0.087643 43\n0.112365 45\n0.344038 45\n0.119775 45\n0.120176 43\n0.087723 55\n0.001199 46\n0.001567 60\n0.141637 43\n0.023814 43\n0.144046 43\n0.168014 43\n0.136534 43\n0.087264 116\n0.208314 641\n0.513429 320\n0.000116 114\n0.074731 108\n0.032919 64\n0.013318 181\n0.890970 2\n0.286170 20\n0.121761 2\n0.479295 36\n0.260538 7\n0.000012 1595\n0.014788 187\n0.035385 81\n0.727394 81\n0.118636 81\n0.177595 83\n0.120535 114\n0.295695 80\n1.131135 97\n0.299308 153\n0.057752 85\n0.172900 76\n0.116012 167\n0.289226 82\n0.651722 7\n0.411879 12\n0.000026 36\n0.000555 36\n0.001029 675\n0.000214 60\n0.000026 96\n0.052132 18\n0.584794 23\n0.113481 33\n0.945267 125\n0.000901 984\n0.000460 313\n0.000031 480\n0.000395 64\n1.662075 902\n0.000050 342\n0.000867 1307\n0.416046 5\n0.400281 901\n0.000116 244\n0.000032 61\n0.000068 197\n0.000523 270\n0.503538 638\n0.000046 38\n0.000070 553\n0.000479 5\n0.342260 1072\n0.000096 285\n0.000681 107\n0.334834 937\n0.000162 416\n0.000545 192\n0.186528 763\n0.000047 142\n0.000025 32\n0.000024 205\n0.000865 146\n0.000031 9\n0.188196 973\n0.000049 821\n0.000837 511\n0.273234 517\n0.000041 65\n0.000028 149\n0.000037 521\n0.180789 413\n0.000048 667\n0.001341 108\n0.623332 1\n0.000076 82\n0.000050 1\n0.000045 39\n0.000045 1\n0.000314 56\n0.000084 1\n0.000158 39\n0.000142 1\n0.000118 49\n0.000220 1\n0.000063 535\n0.000081 279\n0.000435 363\n0.000348 880\n1.101480 144\n0.000057 402\n0.000528 298\n1.228609 620\n0.000035 258\n0.000034 374\n0.000618 75\n0.181371 1\n0.000073 65\n0.000053 1\n0.000367 86\n0.000097 1\n0.000147 119\n0.000308 1\n0.000056 42\n0.000056 1\n0.000152 516\n0.000311 285\n0.000326 437\n0.000351 465\n0.149368 891\n0.000492 5\n0.218788 912\n0.000041 697\n0.000725 96\n0.231806 811\n0.000042 176\n0.000065 382\n0.000492 191\n0.204525 721\n0.000039 147\n0.000067 345\n0.000714 104\n0.663540 1011\n0.000092 282\n0.000780 266\n0.550381 662\n0.000040 2\n0.000071 569\n0.000795 1\n0.647427 1005\n0.000044 392\n0.000634 1\n1.071485 65\n0.000480 1\n0.000215 42\n0.000173 1\n0.000193 538\n0.000187 1\n0.000236 40\n0.000167 1\n0.000186 86\n0.000167 1\n0.000193 143\n0.000175 188\n0.000364 2\n0.000322 1\n0.000151 115\n0.000148 1\n0.000173 42\n0.000145 1\n0.000165 135\n0.000149 138\n0.438940 764\n0.000052 244\n0.000029 3\n0.000567 252\n0.000029 70\n0.342209 1333\n0.000539 82\n0.373322 852\n0.000117 288\n0.000078 591\n0.537033 386\n0.000081 555\n0.000519 62\n0.561954 63\n0.223567 63\n0.183754 63\n0.168338 63\n0.151807 7\n0.296352 1\n0.087007 1\n0.500354 1\n0.051244 1\n0.051052 1\n0.051052 1\n0.051378 1\n0.049956 1\n0.051255 74\n0.314205 114\n0.216782 108\n0.032748 64\n0.036328 181\n0.250127 2\n0.238802 20\n0.153103 2\n0.239524 36\n0.269040 7\n0.000013 1595\n0.015138 187\n0.035205 81\n0.434067 81\n0.178993 81\n0.181808 76\n0.239130 202\n0.241992 80\n0.247265 187\n1.328471 80\n0.118183 80\n0.586658 80\n0.475688 97\n0.292330 85\n0.173512 76\n0.173021 76\n0.232438 165\n0.291905 80\n0.536215 453\n0.355802 133\n1.368100 75\n0.189827 260\n0.309523 55\n0.515827 96\n0.049363 18\n0.432009 23\n0.353351 33\n0.393188 125\n0.001653 983\n0.000507 313\n0.000031 480\n0.000338 65\n0.805940 1243\n0.000551 89\n0.504585 944\n0.000097 274\n0.000709 5\n0.303204 901\n0.000109 244\n0.000030 2\n0.000066 256\n0.000497 271\n0.327755 637\n0.000043 39\n0.000024 273\n0.000078 279\n0.000740 5\n0.181566 823\n0.000033 249\n0.000063 285\n0.000411 107\n0.367113 937\n0.000150 70\n0.000361 57\n0.000244 289\n0.000322 192\n0.433267 763\n0.000040 3\n0.000024 171\n0.000073 351\n0.000701 102\n0.413574 880\n0.000047 821\n0.000846 100\n0.449121 811\n0.000103 176\n0.000916 33\n0.000027 344\n0.000476 61\n0.283814 62\n0.238900 63\n0.500554 64\n0.050152 63\n0.050049 63\n0.050123 63\n0.049929 3\n0.105627 3\n0.500185 3\n0.049952 3\n0.050634 3\n0.050498 3\n0.049642 2\n0.050227 1\n0.050910 3\n0.050973 3\n0.050989 3\n0.051793 3\n0.049850 3\n0.050560 3\n0.050527 64\n0.025001 2\n0.212509 1\n0.176161 45\n0.303124 58\n0.000036 114\n0.410024 108\n0.036399 64\n0.013034 75\n0.192368 65\n0.157843 1\n0.191137 1\n0.175988 1\n0.151864 1\n0.136031 46\n0.223000 59\n0.000100 115\n0.201428 109\n0.032625 65\n0.012528 181\n0.328992 1\n0.096313 2\n0.144227 1816\n0.252946 47\n0.983194 75\n0.256617 181\n5.045453 2\n0.237776 20\n0.137625 2\n0.261380 36\n0.271522 72\n0.000014 367\n0.000331 30\n0.000012 2\n0.000010 96\n0.017597 18\n0.751769 23\n0.129474 33\n0.513236 125\n0.001669 952\n0.000390 227\n0.000144 479\n0.000280 64\n0.878871 64\n1.965448 7\n0.343701 1\n0.175261 64\n1.939081 1\n0.252803 64\n0.387673 67\n0.651112 79\n0.117267 104\n0.000031 112\n0.277484 106\n0.037198 64\n0.012867 13\n1.900222 101\n0.276007 29\n0.000037 1292\n1.688647 64\n0.651119 64\n0.145863 64\n0.183758 64\n0.175653 64\n0.184117 65\n0.167900 64\n0.151935 64\n0.168174 65\n0.319754 1\n0.335419 1\n0.183787 68\n2.777066 68\n0.387216 5\n0.508088 36\n0.000031 32\n0.595632 32\n0.247925 32\n0.296399 37\n0.729693 40\n0.942268 5\n0.508729 49\n0.000126 180\n0.091266 45\n0.183841 45\n0.072251 45\n0.079487 45\n0.136567 59\n0.272019 116\n2.444697 110\n0.037155 65\n0.011345 181\n1.095618 2\n0.310061 20\n0.129621 2\n0.423386 36\n0.286741 49\n0.000013 412\n0.000315 98\n0.000011 68\n0.000139 96\n0.017511 18\n0.894531 23\n0.169226 9\n0.910612 24\n0.002663 125\n0.001309 952\n0.000323 179\n0.000028 336\n0.000146 1\n7.644199 1\n0.199947 1\n0.135905 1\n0.136049 1\n0.184044 28\n0.504073 59\n0.000108 53\n0.292342 116\n0.476246 110\n0.033305 65\n0.012292 181\n0.258803 2\n0.270268 20\n0.129006 2\n0.181734 2\n3.463504 85\n0.000152 23\n0.000046 92\n0.000115 26\n0.000010 92\n0.000044 4\n0.000010 109\n0.000076 46\n0.000012 2\n0.000010 60\n0.000010 135\n0.000137 87\n0.000076 66\n0.000010 112\n0.000110 25\n0.000010 66\n0.000010 93\n0.000098 25\n0.000011 159\n0.000115 316\n0.000224 17\n0.000011 2\n0.000010 96\n0.019066 18\n0.308988 23\n0.145809 9\n0.598278 1616\n0.005206 64\n0.528649 65\n0.251143 1\n0.311955 1\n0.500047 1\n0.049637 1\n0.049937 1\n0.050657 1\n0.049294 1\n0.050628 1\n0.050465 1\n0.051001 1\n0.050300 1\n0.050772 1\n0.051184 1\n0.050754 1\n0.051000 1\n0.050907 1\n0.050590 1\n0.049988 1\n0.050672 1\n0.050936 1\n0.050078 1\n0.051048 73\n0.966702 2\n0.301849 3\n0.000043 1\n0.215475 5\n0.507959 36\n0.000031 9\n0.263889 1\n0.000071 1\n0.000046 1\n0.000044 1\n0.000043 21\n0.000056 5\n0.139499 116\n0.049368 110\n0.053241 65\n0.011278 46\n0.341830 135\n0.001745 2\n0.286076 20\n0.129299 2\n0.199355 36\n0.275933 49\n0.000014 345\n0.000246 65\n0.000011 164\n0.000132 96\n0.017559 18\n0.825690 23\n0.146348 33\n0.928318 125\n0.001585 954\n0.000503 166\n0.000032 336\n0.000028 25\n0.509183 29\n0.000049 102\n0.770508 29\n0.000036 1499\n0.192780 5\n1.879717 1332\n0.000504 1\n0.676951 94\n0.000389 1\n0.000258 327\n0.000182 1\n0.000213 69\n0.000164 1\n0.000185 50\n0.000160 1\n0.000317 1\n0.000166 204\n0.000166 1\n0.000185 77\n0.000148 1\n0.000167 136\n0.000158 2\n0.000263 1\n0.000150 37\n0.000147 199\n0.000322 1\n0.000377 87\n0.000171 1\n0.000171 90\n0.000151 9\n0.236031 998\n0.000041 523\n0.000531 295\n0.000102 1242\n0.762749 9\n0.851705 912\n0.000050 693\n0.000553 3\n1.150113 1\n0.000558 94\n0.000187 1\n0.000208 87\n0.000169 1\n0.000190 220\n0.000227 1\n0.000211 69\n0.000164 1\n0.000182 53\n0.000163 1\n0.000167 49\n0.000142 1\n0.000162 43\n0.000142 1\n0.000162 31\n0.000146 1\n0.000164 268\n0.000166 2\n0.000302 1\n0.000148 77\n0.000146 1\n0.000167 37\n0.000148 199\n0.000318 1\n0.000192 87\n0.000152 1\n0.000179 91\n0.000181 1\n0.288150 93\n0.000405 1\n0.000214 231\n0.000173 1\n0.000204 77\n0.000229 1\n0.000196 335\n0.000178 1\n0.000200 77\n0.000150 1\n0.000174 142\n0.000168 2\n0.000316 1\n0.000060 92\n0.000052 103\n0.000161 1\n0.000054 87\n0.000044 1\n0.000043 85\n0.000049 95\n0.336911 870\n0.000041 3\n0.000025 37\n0.000025 378\n0.000561 64\n0.547816 64\n0.494572 64\n0.049466 64\n0.050319 64\n0.050194 64\n0.050083 65\n0.050182 64\n0.049254 64\n0.050879 64\n0.050251 64\n0.050383 63\n0.049559 63\n0.050054 63\n0.049980 63\n0.050565 63\n0.050077 64\n0.222516 64\n0.247998 7\n0.304065 64\n0.417931 7\n0.094065 24\n2.998825 147\n0.000030 2\n1.102734 28\n0.404409 28\n0.224012 53\n0.072134 3\n0.120150 28\n0.055805 28\n0.023794 28\n0.192053 28\n0.128527 28\n0.012220 4\n0.539840 4\n0.112366 28\n0.335556 28\n0.024736 28\n0.183194 3\n0.104157 55\n0.001264 46\n0.001393 45\n0.061366 51\n0.047539 3\n0.047957 28\n0.368557 28\n0.095747 28\n0.088432 28\n0.071261 28\n0.275674 61\n0.420504 1\n0.348642 2\n0.454781 11\n0.000029 64\n0.292398 5\n4.038161 65\n2.378706 1\n0.427894 2\n0.491754 6\n0.000028 2\n0.192119 7\n0.000027 13\n0.176300 13\n0.184455 15\n2.650980 8\n1.043922 3\n0.144972 4\n0.000033 5\n0.442402 8\n0.572976 2\n2.776051 5\n0.000049 64\n0.935887 4\n1.421277 1\n0.326833 64\n0.123799 1\n0.132279 1\n0.175986 1\n0.119921 1\n0.500097 1\n0.049732 1\n0.050124 1\n0.050235 1\n0.049765 1\n0.227907 32\n0.259840 32\n0.079396 32\n0.088289 32\n0.064168 32\n0.080184 7\n0.397188 1\n0.143297 33\n0.307579 33\n0.143738 33\n0.135938 33\n0.136187 30\n0.087890 30\n0.033351 30\n0.190431 30\n0.120033 30\n0.040150 30\n0.176375 64\n0.399183 33\n0.376524 30\n0.168215 30\n0.183847 30\n0.071952 30\n0.096197 114\n0.421588 108\n0.033614 64\n0.014804 181\n0.287555 2\n0.206059 20\n0.105338 2\n0.207605 36\n0.374570 49\n0.000013 348\n0.000243 165\n0.000131 36\n0.000010 28\n0.000119 96\n0.018802 18\n0.661065 23\n0.137656 33\n0.513317 125\n0.001679 905\n0.000440 326\n0.000324 478\n0.000035 106\n14.008678 86\n0.000923 649\n0.000034 75\n0.000034 344\n0.000306 148\n0.000242 192\n1.628119 731\n0.000036 172\n0.000095 348\n0.000741 107\n1.732532 811\n0.000162 484\n0.000583 103\n0.344737 1\n0.000117 87\n0.000055 1\n0.000044 26\n0.000044 1\n0.000043 288\n0.000059 1\n0.000043 99\n0.000047 1\n0.000047 34\n0.000046 1\n0.000300 1\n0.000045 253\n0.000081 1\n0.000157 214\n0.000164 2\n0.000276 1\n0.000059 112\n0.000055 170\n0.000347 267\n1.833524 661\n0.000047 3\n0.000026 277\n0.000029 291\n0.000666 196\n0.710589 810\n0.000115 108\n0.000030 59\n0.000068 225\n0.000697 109\n2.143890 1296\n0.000538 1\n4.081266 81\n0.000169 1\n0.000128 86\n0.000091 1\n0.000107 386\n0.000105 1\n0.000132 39\n0.000086 1\n0.000105 84\n0.000081 1\n0.000107 21\n0.000098 1\n0.000117 64\n0.000097 1\n0.000117 165\n0.000115 122\n0.000208 58\n0.000220 1\n0.000120 107\n0.000107 63\n1.180060 931\n0.000115 385\n0.000605 258\n8.220574 833\n0.000091 81\n0.000488 195\n0.000349 155\n0.000033 420\n0.704028 527\n0.000045 235\n0.000070 323\n0.000711 54\n0.774597 901\n0.000116 454\n0.000529 577\n0.950640 594\n0.000046 275\n0.000843 6\n1.355939 1053\n0.000617 356\n0.000045 4\n0.485322 928\n0.000117 239\n0.000030 312\n0.000607 257\n1.367791 650\n0.000044 2\n0.000087 44\n0.000486 238\n0.000029 364\n0.000394 160\n0.831328 832\n0.000084 82\n0.000541 256\n0.000476 143\n0.000038 196\n0.578047 729\n0.000046 166\n0.000026 81\n0.000025 347\n0.000621 420\n0.265435 527\n0.000045 44\n0.000027 191\n0.000027 323\n0.000618 54\n0.383279 901\n0.000110 454\n0.000560 507\n0.749644 939\n0.000552 6\n0.711863 985\n0.000043 2\n0.000076 79\n0.000504 102\n0.000030 309\n0.908532 599\n0.000106 222\n0.000030 2\n0.000072 100\n0.000481 152\n0.000031 3\n0.629028 903\n0.000080 1\n0.000566 72\n0.000025 3\n0.000363 437\n0.000032 503\n0.657851 1\n0.000585 68\n0.000067 1\n0.000048 98\n0.000047 1\n0.000048 225\n0.000051 1\n0.000063 66\n0.000060 2\n0.000175 1\n0.000056 66\n0.000050 1\n0.000056 133\n0.000051 2\n0.000179 1\n0.000114 127\n0.000048 1\n0.000049 43\n0.000048 1\n0.000054 97\n0.000049 6\n0.304310 985\n0.000109 183\n0.000033 217\n0.520145 727\n0.000045 1038\n0.000758 5\n0.496803 818\n0.000048 1\n0.000598 442\n0.000039 5\n0.342333 921\n0.000116 125\n0.000081 615\n0.000784 141\n0.000033 4\n0.405855 933\n0.000048 99\n0.000077 3\n0.000818 180\n0.000035 69\n0.659246 843\n0.000049 196\n0.000027 273\n0.000679 64\n0.673920 64\n0.167732 64\n3.248131 101\n10.978656 29\n0.000954 1308\n0.559729 1\n0.827462 1\n0.500409 1\n0.050688 1\n0.050836 1\n0.051037 1\n0.051120 1\n0.050437 1\n0.050532 1\n0.053182 1\n0.048993 1\n0.051225 1\n0.049989 1\n0.050876 1\n0.052808 1\n0.049794 1\n0.050733 1\n0.050829 1\n0.049479 1\n0.050681 1\n0.050905 1\n0.050135 3\n1.471249 3\n0.499956 3\n0.049983 3\n0.049801 3\n0.050037 2\n0.050938 1\n0.050646 3\n0.050632 3\n0.051004 3\n0.051080 3\n0.051010 3\n0.050358 3\n0.050825 2\n0.050726 1\n0.051013 3\n0.050484 3\n0.049981 3\n0.050444 3\n0.050767 3\n2.784436 68\n3.231903 32\n0.468754 34\n0.039355 2\n0.763947 1\n0.239884 116\n4.129201 110\n0.032131 65\n0.011332 18\n6.339398 102\n0.299896 29\n0.000040 1446\n0.280792 101\n10.911142 29\n0.000039 1311\n0.288525 1\n0.739687 1\n0.500097 1\n0.050129 1\n0.051402 1\n0.048020 1\n0.050478 1\n0.049993 1\n0.049734 1\n0.050317 1\n0.049593 1\n0.049840 1\n0.050362 1\n0.049919 1\n0.050694 1\n0.049775 1\n0.049468 1\n0.050058 1\n0.049846 1\n0.051363 1\n0.049752 1\n0.050286 1\n0.049684 1\n0.315169 70\n0.352181 3\n0.095894 1\n0.367794 32\n0.268551 1\n0.299435 32\n0.076247 32\n0.144241 32\n0.144002 1\n0.139583 1\n0.159981 1\n0.176150 32\n0.724424 34\n0.022199 6\n1.001737 36\n0.077455 103\n0.282342 1\n0.275763 1\n0.183982 1\n0.175741 1\n0.512577 1\n0.191771 1\n0.191834 3\n0.352079 81\n0.212830 81\n0.135667 1\n0.211151 1\n0.136245 83\n0.732422 54\n0.030143 29\n0.000051 89\n0.217933 83\n0.271879 54\n0.048588 29\n0.000102 83\n0.487691 81\n0.135824 80\n0.144019 41\n0.510527 56\n0.000794 47\n0.000645 69\n0.341700 26\n0.000036 2\n0.165441 116\n0.033369 110\n0.037240 65\n0.010686 181\n0.320547 2\n0.230010 20\n0.137141 2\n0.295868 2\n2.309296 34\n0.000285 2\n0.000059 47\n0.000054 2\n0.000044 4\n0.000085 17\n0.000027 2\n0.000019 90\n0.000057 2\n0.000021 4\n0.000050 20\n0.000024 2\n0.000023 90\n0.000034 2\n0.000019 4\n0.000058 15\n0.000025 2\n0.000019 90\n0.000034 2\n0.000022 4\n0.000075 42\n0.000025 2\n0.000019 58\n0.000038 2\n0.000023 4\n0.000061 32\n0.000026 2\n0.000022 62\n0.000034 2\n0.000023 4\n0.000071 29\n0.000025 2\n0.000020 58\n0.000037 2\n0.000022 4\n0.000054 19\n0.000026 2\n0.000020 64\n0.000034 2\n0.000022 4\n0.000061 46\n0.000026 2\n0.000018 58\n0.000033 2\n0.000023 4\n0.000056 19\n0.000025 2\n0.000019 64\n0.000037 2\n0.000023 4\n0.000060 27\n0.000050 2\n0.000024 58\n0.000035 2\n0.000022 4\n0.000054 19\n0.000026 2\n0.000022 64\n0.000036 2\n0.000018 4\n0.000064 27\n0.000026 2\n0.000023 58\n0.000037 2\n0.000022 4\n0.000059 32\n0.000026 2\n0.000021 62\n0.000037 2\n0.000019 4\n0.000069 25\n0.000026 2\n0.000021 17\n0.000044 2\n0.000031 96\n0.018366 18\n5.276469 23\n0.161292 1640\n0.747089 5\n0.511134 49\n0.000083 102\n4.304522 29\n0.000157 1446\n0.496748 246\n15.875249 810\n0.000110 300\n0.000035 69\n0.714304 848\n0.000044 123\n0.000074 76\n0.000534 3\n0.000341 234\n0.000034 177\n3.381848 1\n23.150303 4\n1.063931 2\n0.279914 20\n0.129503 2\n0.631902 1\n1.069209 3\n0.711872 2\n0.312042 85\n0.000154 23\n0.000065 92\n0.000085 26\n0.000011 111\n0.000070 94\n0.000073 48\n0.000011 96\n0.000064 2\n0.000011 64\n0.000010 298\n0.000239 25\n0.000012 66\n0.000010 93\n0.000093 23\n0.000012 2\n0.000011 66\n0.000010 115\n0.000122 17\n0.000010 2\n0.000009 96\n0.018245 18\n0.478424 23\n0.153322 33\n0.801380 125\n0.044613 1631\n0.000136 64\n1.824067 64\n0.170509 64\n0.167672 65\n0.183653 64\n0.168404 64\n0.391755 5\n0.303699 1051\n0.000044 3\n0.000911 298\n0.000037 201\n0.219726 788\n0.000109 6\n0.000028 218\n0.000026 179\n0.000033 1\n0.519816 339\n0.001117 245\n0.000068 151\n0.000584 242\n0.000036 37\n0.000447 33\n0.000028 3\n0.000398 338\n0.000031 130\n0.446187 794\n0.000053 181\n0.000026 339\n0.000596 97\n0.287126 1\n0.001284 61\n0.000345 1\n0.000281 59\n0.000257 1\n0.000281 42\n0.000252 1\n0.000271 541\n0.000324 1\n0.000322 40\n0.000321 1\n0.000263 84\n0.000235 2\n0.000372 1\n0.000238 45\n0.000232 288\n0.000416 1\n0.000287 174\n0.000235 214\n0.265936 715\n0.000050 475\n0.032710 110\n0.269865 828\n0.000043 497\n0.000525 74\n0.438512 832\n0.000121 652\n0.000032 453\n0.000083 151\n3.434582 796\n0.000039 800\n0.000525 64\n0.169795 309\n2.098735 637\n0.000099 103\n0.000030 493\n0.000609 323\n0.311726 613\n0.000077 564\n0.000500 373\n0.287165 617\n0.000076 460\n0.000704 83\n0.199845 922\n0.000170 1\n0.000516 164\n0.000038 287\n0.000321 5\n0.349660 935\n0.000050 112\n0.000028 299\n0.000628 184\n0.422303 926\n0.000047 3\n0.000711 431\n0.000130 166\n0.928836 804\n0.000077 373\n0.000683 98\n0.863094 880\n0.000047 1132\n0.000529 91\n0.528923 709\n0.000102 300\n0.000036 103\n0.331319 1476\n0.000447 61\n0.385201 1210\n0.000049 336\n0.000832 721\n0.478283 526\n0.000044 199\n0.000594 835\n0.341280 318\n0.000042 930\n0.710672 541\n0.000039 437\n0.206870 830\n0.000080 83\n0.000493 206\n0.000413 907\n0.423421 452\n0.000713 44\n0.000326 246\n0.000036 95\n0.638933 810\n0.000045 3\n0.000064 419\n0.000645 1\n0.673948 921\n0.000045 885\n0.000706 100\n0.470758 933\n0.000111 3\n0.000559 180\n0.000034 62\n0.568606 308\n0.220454 599\n0.000108 222\n0.000030 102\n0.000071 157\n0.000553 1\n0.742667 1061\n0.000041 338\n0.000984 64\n0.495080 64\n0.049867 63\n0.050112 64\n0.049508 63\n0.051326 63\n0.051634 63\n0.050641 63\n0.051294 62\n0.049745 61\n0.050554 269\n0.056039 770\n0.000044 201\n0.000077 140\n0.000571 64\n0.044276 64\n0.050772 64\n0.050382 63\n0.051022 63\n0.049472 63\n0.050649 63\n0.051649 63\n0.050230 62\n0.051199 61\n0.050552 173\n0.056640 781\n0.000047 195\n0.000075 398\n0.000969 64\n0.042609 65\n0.050610 63\n0.050216 63\n0.050909 63\n0.324279 64\n0.183615 65\n0.176146 64\n0.177221 64\n0.191159 64\n0.247661 64\n0.216012 64\n0.255793 5\n0.383430 279\n7.856811 774\n0.000042 335\n0.000698 69\n0.000029 85\n0.324475 844\n0.000091 350\n0.000875 53\n0.311120 944\n0.000044 156\n0.000035 333\n0.000746 43\n0.342626 946\n0.000121 484\n0.000758 64\n0.246993 867\n0.000051 154\n0.000027 294\n0.000657 410\n0.391964 492\n0.000043 101\n0.000027 41\n0.000025 104\n0.000076 294\n0.000716 2\n0.374676 957\n0.000083 488\n0.000578 106\n0.911949 817\n0.000049 3\n0.000024 255\n0.000073 228\n0.000484 453\n0.000359 924\n0.753502 172\n0.000533 822\n0.000090 432\n0.000370 431\n0.285749 543\n0.000051 357\n0.000029 364\n0.000864 95\n0.445648 840\n0.000050 742\n0.000758 115\n2.547162 835\n0.000118 330\n0.000030 365\n0.001108 5\n3.701441 934\n0.000042 736\n0.000747 5\n2.428490 1060\n0.000151 425\n0.000613 497\n4.174374 411\n0.000041 362\n0.000384 396\n0.000451 654\n1.089276 983\n0.000813 1\n1.142293 214\n0.000082 1\n0.000052 87\n0.000134 1\n0.000358 153\n0.000166 1\n0.000177 87\n0.000142 1\n0.000118 136\n0.000140 1\n0.000122 68\n0.000137 1\n0.000119 62\n0.000137 1\n0.000090 4\n0.000121 1\n0.000113 1\n0.000084 26\n0.000112 62\n0.000277 1\n0.000058 1\n0.000047 92\n0.000169 195\n55.425834 709\n0.000043 3\n0.000028 290\n0.000592 724\n0.384644 181\n0.000040 741\n0.000516 515\n0.358909 753\n0.000042 354\n0.000615 5\n0.450066 989\n0.000046 928\n0.000498 112\n0.562324 2299\n0.001474 441\n0.701773 507\n0.000048 368\n0.000031 405\n0.000542 507\n0.890446 404\n0.000036 3\n0.000027 142\n0.000139 351\n0.000538 5\n0.527047 950\n0.000041 117\n0.000069 3\n0.001122 349\n0.000041 5\n0.494165 1013\n0.000093 301\n0.000695 166\n0.664339 785\n0.000055 170\n0.000089 87\n0.000032 89\n0.000024 195\n0.000464 114\n0.549825 890\n0.000047 223\n0.000647 105\n0.000025 245\n0.438242 780\n0.000047 4\n0.000576 351\n0.000032 98\n0.698196 1293\n0.000601 53\n0.365999 862\n0.000050 3\n0.000678 526\n0.000070 132\n0.000337 100\n0.000325 251\n0.000034 408\n0.536131 528\n0.000041 253\n0.000516 296\n0.516367 752\n0.000111 713\n0.000589 63\n0.503699 63\n0.498410 63\n0.050621 63\n0.050852 63\n0.049669 63\n0.050434 64\n0.052089 64\n0.051266 66\n0.050366 98\n0.043224 828\n0.000041 402\n0.000519 100\n0.000033 50\n16.563434 861\n0.000103 1009\n0.001010 62\n4.122013 237\n0.427953 725\n0.000048 2\n0.000068 58\n0.000459 127\n0.000029 3\n0.000388 329\n0.000032 64\n5.593958 65\n0.487862 8\n0.175150 25\n0.304472 149\n0.000039 1\n0.173626 28\n0.556405 28\n0.032083 28\n0.151819 28\n0.023727 28\n0.152107 28\n0.160404 2\n0.103969 2\n0.280317 48\n0.000028 3\n0.127562 28\n1.088091 30\n0.052821 6\n0.675380 8\n0.119920 28\n0.159699 28\n0.128456 28\n0.167609 28\n0.079847 49\n0.040027 65\n0.569576 1\n0.203237 3\n2.891082 355\n0.500903 3\n0.050127 104\n0.050919 186\n0.000176 3\n0.049773 226\n0.051079 3\n0.049375 80\n0.051052 77\n0.000074 3\n0.051003 254\n0.050387 3\n0.050853 79\n0.049913 160\n0.000029 67\n0.050261 67\n0.185699 191\n0.000032 3\n0.335970 176\n1.791745 64\n2.016902 5\n0.715490 65\n1.884050 1\n0.235194 3\n1.826993 163\n0.417398 64\n0.384754 5\n0.211796 99\n0.512249 1\n0.157913 28\n0.356061 5\n0.432252 28\n0.264499 51\n0.079126 3\n0.120061 214\n0.197320 41\n0.371182 41\n0.024573 41\n0.223428 41\n0.071892 41\n0.128067 41\n0.047794 41\n0.191960 57\n0.304074 3\n0.096046 28\n0.119814 28\n0.128288 53\n0.063961 3\n0.080162 28\n0.119936 28\n0.144402 28\n0.079760 55\n0.087891 28\n0.103675 28\n0.384152 28\n0.104010 28\n0.128468 28\n0.071708 28\n0.277568 99\n0.146719 8\n0.082960 28\n0.156371 28\n0.159842 28\n0.064066 55\n0.104265 28\n0.079527 28\n0.088480 28\n0.071839 28\n0.136285 28\n0.048095 28\n0.631917 203\n0.320480 41\n0.247575 41\n0.072124 41\n0.072045 41\n0.032118 41\n0.127846 41\n0.055970 41\n0.176749 57\n0.287280 36\n0.253840 8\n0.066049 28\n0.176267 3\n0.175882 29\n0.163701 4\n0.428296 8\n0.111999 28\n0.223944 30\n0.029335 4\n0.119118 115\n0.057605 109\n0.033942 65\n0.013953 201\n1.020719 722\n0.000044 148\n0.000029 54\n0.000022 290\n0.000553 191\n0.418494 921\n0.000040 115\n0.000027 170\n0.000652 220\n0.520306 708\n0.000114 280\n0.000030 291\n0.000580 196\n0.881300 810\n0.000038 2\n0.000063 390\n0.000505 220\n1.027912 684\n0.000039 2\n0.000071 586\n0.000495 5\n0.320788 1072\n0.000160 285\n0.000376 270\n0.453071 662\n0.000045 2\n0.000071 564\n0.000482 298\n0.149684 711\n0.000047 108\n0.000026 284\n0.000877 66\n0.174590 854\n0.000106 188\n0.000035 118\n0.000026 44\n0.000024 135\n0.000071 83\n1.690728 973\n0.000100 166\n0.000610 1\n0.506009 931\n0.000052 44\n0.000026 99\n0.000026 108\n0.000024 348\n0.000642 497\n0.672342 1\n0.000078 126\n0.000052 1\n0.000046 127\n0.000048 1\n0.000314 126\n0.000052 1\n0.000121 125\n0.000162 691\n0.000386 595\n0.000445 519\n1.189467 1\n0.000075 160\n0.000054 1\n0.000045 263\n0.000065 851\n0.000666 224\n0.000506 196\n0.000116 75\n2.242237 898\n0.000048 704\n0.000588 1\n0.717585 923\n0.000040 3\n0.000635 139\n0.000069 88\n0.000330 123\n0.000029 52\n0.000301 195\n0.000033 1\n1.451205 950\n0.000107 422\n0.000034 250\n0.000770 5\n0.213134 917\n0.000040 109\n0.000728 518\n0.000070 43\n0.000293 136\n0.000030 2\n0.000354 404\n0.000062 356\n0.246277 669\n0.000049 691\n0.000090 568\n0.002466 349\n0.370578 602\n0.000045 677\n0.000626 5\n0.350026 961\n0.000047 2\n0.000077 43\n0.000502 82\n0.000031 60\n0.000366 155\n0.000033 228\n0.367401 805\n0.000045 274\n0.000551 99\n0.430556 807\n0.000042 244\n0.000070 3\n0.000604 255\n0.000030 271\n0.431389 637\n0.000046 39\n0.000025 273\n0.000078 279\n0.000797 5\n0.741763 1072\n0.000049 116\n0.000030 169\n0.000881 194\n0.622489 747\n0.000046 519\n0.000570 181\n0.787522 727\n0.000044 6\n0.000074 79\n0.000513 171\n0.000031 205\n0.000467 146\n0.000029 206\n0.555639 846\n0.000045 3\n0.000703 617\n0.000032 558\n0.424718 540\n0.000090 205\n0.000697 139\n0.000038 63\n6.094249 63\n0.497272 63\n0.050284 63\n0.049842 63\n0.049836 63\n0.050082 64\n0.050613 65\n0.329483 5\n0.191872 25\n0.439079 149\n0.000035 47\n0.849441 282\n0.004273 13\n6.266034 351\n0.229620 13\n0.274597 44\n0.166252 25\n0.002162 240\n0.000388 18\n0.159162 47\n0.190293 151\n0.001739 18\n0.119717 75\n0.172288 18\n0.147712 75\n0.196256 18\n0.140004 55\n0.171826 18\n0.139841 59\n0.180222 18\n0.131731 48\n0.212021 13\n0.188397 181\n0.148461 18\n0.179264 51\n0.396604 18\n0.579571 88\n1.001423 91\n1.316984 41\n0.024726 18\n1.864730 52\n0.276175 17\n0.139847 74\n0.203561 18\n0.124369 52\n0.203595 17\n0.116386 47\n0.187799 13\n0.140522 144\n0.195477 18\n0.156210 245\n0.196918 13\n0.139057 139\n0.172430 13\n0.131682 183\n0.164063 13\n0.131885 99\n0.180943 13\n0.131503 220\n0.172067 13\n0.131372 153\n0.156318 13\n0.171960 44\n0.129355 37\n0.003809 114\n0.000105 13\n0.146494 110\n0.140740 13\n0.155601 215\n0.155710 13\n0.156065 114\n0.148052 13\n0.171711 220\n0.189219 13\n0.154871 44\n0.256764 97\n0.004741 13\n0.162694 253\n0.204038 13\n0.148037 44\n0.162531 2\n0.001998 89\n0.000028 13\n0.107486 266\n0.188093 13\n0.115251 44\n0.154699 145\n0.002999 13\n0.146725 312\n0.180226 13\n0.155895 175\n0.140075 13\n0.203497 44\n0.130872 4\n0.001306 69\n0.000033 18\n0.780202 75\n0.132990 18\n0.443209 47\n0.114283 28\n0.002311 15\n1.003537 3\n0.930875 143\n0.161145 244\n0.000030 112\n0.221423 106\n0.079742 64\n0.012739 286\n27.080282 775\n0.000113 275\n0.000082 128\n0.000514 84\n0.444382 842\n0.000045 3\n0.000026 144\n0.000069 206\n0.000646 269\n0.496010 728\n0.000044 156\n0.000076 2\n0.000667 331\n0.000067 43\n0.464326 944\n0.000108 59\n0.000029 75\n0.000689 352\n0.000040 64\n0.770439 867\n0.000044 154\n0.000034 3\n0.000576 291\n0.000081 410\n0.490781 492\n0.000041 101\n0.000072 41\n0.000541 104\n0.000061 68\n0.000410 226\n0.000031 2\n0.707934 957\n0.000105 186\n0.000036 3\n0.000025 140\n0.000085 42\n0.000558 117\n0.000038 50\n0.867095 873\n0.000046 2\n0.000522 256\n0.000028 228\n0.000028 453\n0.000454 924\n1.639865 1426\n0.000786 78\n6.680670 56\n0.265021 179\n0.422699 2\n0.368155 20\n0.129434 2\n0.807207 2\n12.093593 34\n0.000267 2\n0.000078 47\n0.000058 2\n0.000051 4\n0.000087 17\n0.000044 2\n0.000064 90\n0.000071 2\n0.000048 4\n0.000062 20\n0.000040 2\n0.000047 90\n0.000055 2\n0.000047 4\n0.000069 15\n0.000043 2\n0.000047 90\n0.000053 2\n0.000046 4\n0.000085 42\n0.000022 2\n0.000018 58\n0.000030 2\n0.000021 4\n0.000061 32\n0.000024 2\n0.000019 62\n0.000029 2\n0.000021 4\n0.000071 29\n0.000024 2\n0.000023 58\n0.000030 2\n0.000021 4\n0.000052 19\n0.000025 2\n0.000018 64\n0.000030 2\n0.000021 4\n0.000060 46\n0.000024 2\n0.000018 58\n0.000037 2\n0.000021 4\n0.000053 19\n0.000023 2\n0.000018 64\n0.000030 2\n0.000021 4\n0.000059 27\n0.000023 2\n0.000022 58\n0.000030 2\n0.000021 4\n0.000052 19\n0.000024 2\n0.000018 64\n0.000030 2\n0.000020 4\n0.000058 27\n0.000023 2\n0.000019 58\n0.000030 2\n0.000020 4\n0.000052 36\n0.000023 2\n0.000019 17\n0.000040 2\n0.000030 96\n0.019643 18\n83.403007 23\n0.353490 2652\n0.388372 850\n2.189908 1095\n0.000975 5\n0.512595 900\n0.000112 253\n0.000030 339\n0.000588 414\n0.919028 504\n0.000041 559\n0.000481 365\n0.430969 554\n0.000037 98\n0.000070 306\n0.000496 5\n0.392485 901\n0.000108 153\n0.000029 435\n0.000656 5\n0.486353 988\n0.000044 164\n0.000030 334\n0.000590 205\n0.501850 1\n0.000668 68\n0.000255 1\n0.000285 97\n0.000244 1\n0.000275 224\n0.000246 1\n0.000289 68\n0.000241 1\n0.000268 66\n0.000243 1\n0.000253 135\n0.000251 1\n0.000265 97\n0.000232 30\n0.000377 1\n0.000257 43\n0.000221 1\n0.000245 69\n0.000223 2\n0.000341 1\n0.000228 40\n0.000220 1\n0.000244 37\n0.000218 1\n0.000242 93\n0.000223 87\n1.506180 1\n0.000655 137\n0.000256 1\n0.000284 234\n0.000248 1\n0.000285 87\n0.000318 1\n0.000324 236\n0.000296 1\n0.000290 77\n0.000246 1\n0.000259 37\n0.000233 102\n0.000352 457\n0.000429 303\n0.173602 610\n0.000039 83\n0.000577 136\n0.000029 123\n0.000028 84\n0.000342 200\n0.000033 278\n0.611056 775\n0.000049 399\n0.000561 238\n0.512941 1\n0.000437 64\n0.000225 1\n0.000204 61\n0.000249 1\n0.000203 229\n0.000437 1\n0.000309 87\n0.000251 1\n0.000321 229\n0.000272 82\n0.000492 1\n0.000269 78\n0.000223 181\n0.000452 162\n0.000032 116\n0.000039 207\n0.363370 826\n0.000048 3\n0.000709 617\n0.000036 196\n0.520509 736\n0.000050 110\n0.000027 397\n0.000829 279\n16.609973 774\n0.000049 274\n0.000666 130\n0.000033 1\n0.733117 84\n0.000876 452\n0.000032 292\n0.000026 97\n0.000030 3\n0.000396 144\n0.000030 206\n0.000320 53\n0.542632 944\n0.000056 156\n0.000096 1\n0.000028 332\n0.000367 43\n0.543937 944\n0.000049 59\n0.000027 427\n0.000577 1\n0.398904 62\n0.000980 1\n0.000271 111\n0.000185 1\n0.000211 162\n0.000178 1\n0.000210 61\n0.000174 1\n0.000200 59\n0.000176 1\n0.000201 42\n0.000163 1\n0.000178 427\n0.000178 115\n0.000379 1\n0.000192 38\n0.000157 2\n0.000342 1\n0.000171 86\n0.000154 1\n0.000184 204\n0.000157 410\n0.491770 492\n0.000108 246\n0.000030 294\n0.000586 306\n0.425246 1\n0.000429 58\n0.000500 1\n0.000292 58\n0.000321 1\n0.000291 77\n0.000246 1\n0.000277 140\n0.000248 1\n0.000283 273\n0.000276 2\n0.000407 1\n0.000236 39\n0.000225 1\n0.000247 56\n0.000221 1\n0.000247 4\n0.000218 1\n0.000218 10\n0.000222 2\n0.000433 1\n0.000232 86\n0.000225 1\n0.000258 198\n0.000235 46\n1.757990 1448\n0.000567 5\n0.742211 988\n0.000106 164\n0.000031 334\n0.000599 206\n0.669302 761\n0.000047 75\n0.000071 244\n0.000462 225\n0.904114 778\n0.000075 457\n0.000650 239\n0.658591 674\n0.000102 162\n0.000072 464\n0.000711 279\n0.581600 774\n0.000044 399\n0.000547 231\n0.152314 1051\n0.000514 53\n0.159505 944\n0.000104 156\n0.000030 333\n0.000877 42\n0.375477 945\n0.000052 59\n0.000028 427\n0.000544 1\n0.495569 62\n0.000409 1\n0.000222 111\n0.000410 1\n0.000206 162\n0.000170 1\n0.000200 61\n0.000163 1\n0.000191 59\n0.000162 1\n0.000188 42\n0.000148 1\n0.000169 427\n0.000168 115\n0.000351 1\n0.000186 38\n0.000148 2\n0.000328 1\n0.000174 86\n0.000063 1\n0.000048 204\n0.000054 294\n0.556484 1\n0.000858 115\n0.000067 1\n0.000065 42\n0.000046 1\n0.000047 75\n0.000064 1\n0.000045 86\n0.000046 1\n0.000044 89\n0.000047 1\n0.000047 195\n0.000065 101\n0.000253 1\n0.000060 39\n0.000048 1\n0.000047 84\n0.000051 1\n0.000051 19\n0.000053 2\n0.000208 1\n0.000049 64\n0.000065 1\n0.000046 226\n0.000055 2\n0.853273 1000\n0.000044 143\n0.000031 302\n0.000612 49\n0.575378 874\n0.000042 939\n0.000594 437\n0.503152 479\n0.000038 3\n0.000068 324\n0.000466 371\n0.000065 64\n1.682655 64\n0.183009 64\n0.160065 64\n0.175994 3\n0.094853 3\n0.241504 3\n0.150942 3\n0.159531 3\n0.152229 3\n0.160212 2\n0.128621 1\n0.191142 93\n0.697069 59\n0.000035 115\n0.760781 109\n0.032145 65\n0.013881 181\n0.377180 2\n0.238589 20\n0.137414 2\n0.309111 2\n2.687784 431\n0.000297 50\n0.000107 96\n0.134851 18\n2.810497 23\n0.169383 9\n15.414764 2034\n0.005154 46\n18.234842 135\n0.001776 2\n0.374136 20\n0.137220 2\n0.455412 2\n7.333397 85\n0.000149 23\n0.000011 229\n0.000173 120\n0.000090 92\n0.000010 42\n0.000070 17\n0.000011 2\n0.000010 96\n0.336586 18\n1.808663 23\n0.137349 2043\n0.611899 417\n0.590540 494\n0.000038 2\n0.000064 64\n0.000516 99\n0.000064 1\n0.000146 38\n0.000261 313\n0.000319 4\n0.303016 1\n0.000073 145\n0.000056 1\n0.000048 273\n0.000458 1\n0.000048 39\n0.000046 1\n0.000049 56\n0.000047 1\n0.000045 4\n0.000062 1\n0.000045 12\n0.000047 1\n0.000045 86\n0.000046 1\n0.000049 328\n0.000067 117\n0.000166 2\n0.000202 1\n0.000054 53\n0.000046 1\n0.000058 295\n0.000058 4\n0.509672 1\n0.000071 453\n0.000074 1\n0.000064 61\n0.000049 1\n0.000044 71\n0.000045 1\n0.000042 384\n0.000129 41\n0.000158 1\n0.000056 58\n0.000045 1\n0.000043 56\n0.000048 2\n0.000152 1\n0.000056 78\n0.000048 1\n0.000053 103\n0.000050 120\n0.791580 831\n0.000040 541\n0.000983 46\n0.486249 1286\n0.000503 5\n0.710400 924\n0.000152 96\n0.000588 4\n0.000328 351\n0.000040 98\n0.776870 867\n0.000049 138\n0.000026 288\n0.000617 176\n3.092351 2\n6.782030 20\n0.825806 23\n1.599996 33\n0.305285 125\n0.001449 905\n0.000522 331\n0.000392 416\n0.000429 5\n1.331224 975\n0.000048 332\n0.000561 64\n0.472259 63\n0.399835 37\n0.333937 1231\n0.000454 107\n0.000720 167\n0.461379 774\n0.000047 2\n0.000074 256\n0.000659 192\n0.000324 114\n0.000030 94\n0.542867 866\n0.000042 7\n0.000613 441\n0.000036 64\n0.226554 64\n0.175966 63\n0.184185 63\n0.168216 63\n0.184721 64\n0.166937 63\n0.440265 63\n0.248160 62\n0.175638 61\n0.192049 62\n0.527930 61\n1.784562 98\n0.502890 1163\n0.000521 64\n0.046562 64\n0.050432 63\n0.051152 63\n0.050411 64\n0.050342 63\n0.051178 63\n0.050302 68\n7.350891 32\n1.379875 179\n0.343103 2\n4.638520 1680\n0.715713 101\n3.016037 29\n0.000115 43\n0.716843 44\n0.248247 44\n0.431746 1654\n0.443801 440\n0.570213 861\n0.000047 396\n0.000931 166\n0.261149 1398\n0.001036 215\n0.171034 713\n0.000046 587\n0.000648 186\n0.171696 701\n0.000052 61\n0.000028 196\n0.000034 305\n0.214825 630\n0.000039 168\n0.000028 277\n0.000629 1\n0.337082 904\n0.000044 159\n0.000096 95\n0.000072 260\n0.000579 62\n1.082836 63\n0.500373 63\n0.050780 63\n0.051485 63\n0.077774 64\n0.023672 63\n0.050326 64\n0.050212 64\n0.051462 64\n0.050430 64\n0.050462 64\n0.050193 64\n0.050837 64\n0.051011 64\n0.050410 65\n0.050163 64\n0.050934 64\n0.051550 64\n0.050892 61\n0.050720 78\n0.396553 838\n0.000081 3\n0.000606 85\n0.000029 336\n0.000275 64\n0.212660 100\n3.594519 29\n0.000120 1367\n0.736398 291\n0.796825 850\n0.000070 318\n0.000695 265\n0.386752 653\n0.000036 214\n0.000035 292\n0.000741 123\n0.546149 904\n0.000103 816\n0.000524 50\n0.001051 46\n0.001546 657\n0.586370 449\n0.000048 147\n0.000032 66\n0.516747 906\n0.000049 688\n0.000652 48\n0.134634 1\n0.000188 88\n0.000085 1\n0.000113 87\n0.000087 1\n0.000108 220\n0.000100 1\n0.000127 74\n0.000140 1\n0.000125 78\n0.000087 1\n0.000123 60\n0.000098 1\n0.000109 46\n0.000085 1\n0.000120 46\n0.000089 1\n0.000116 31\n0.000090 1\n0.000115 169\n0.000110 98\n0.000218 1\n0.000054 75\n0.000050 2\n0.000158 1\n0.000058 291\n0.000076 62\n2.877530 63\n0.159837 63\n0.179134 64\n0.204596 63\n0.223910 63\n8.160765 7\n0.239082 221\n0.811868 7\n0.673898 28\n0.388298 3\n0.087912 45\n0.192574 1\n0.119905 28\n0.151636 64\n0.615995 64\n0.173794 65\n0.168205 65\n0.151931 8\n0.384070 65\n1.123204 152\n0.305319 2\n0.162516 28\n0.715689 51\n0.080535 65\n0.072035 28\n0.144014 3\n0.103833 28\n1.863947 2\n0.088131 28\n0.216028 28\n0.459323 3\n0.284786 28\n0.191927 28\n0.079779 4\n0.400273 8\n0.136280 28\n0.634880 28\n0.020519 28\n0.216183 28\n0.095691 57\n0.008870 1\n0.135625 28\n0.391660 28\n0.192028 28\n0.095879 28\n0.136023 28\n0.008120 28\n0.232339 4\n0.295917 4\n0.112491 4\n0.127562 28\n0.231990 28\n0.135791 28\n0.127964 28\n0.096102 28\n0.024072 3\n0.184495 51\n0.000048 28\n0.151484 183\n0.232227 41\n0.208159 41\n0.191769 41\n0.007791 41\n0.376451 41\n0.040054 41\n0.335734 106\n0.321177 36\n0.220965 8\n0.541533 115\n0.057371 109\n0.028974 65\n0.014453 181\n0.236282 2\n0.198021 20\n0.121331 2\n0.151536 2\n5.693982 36\n0.146155 53\n0.000015 19\n0.000012 254\n0.000302 96\n0.272051 18\n0.133579 23\n0.274524 33\n4.937468 125\n0.001927 962\n0.000731 273\n0.000456 414\n0.000429 65\n1.136029 65\n0.483302 1\n0.118950 1\n0.500725 1\n0.050064 1\n0.050331 65\n0.035996 65\n0.188035 25\n0.459378 149\n0.000064 2\n0.242506 1\n0.000027 4\n0.813190 2\n0.375227 1\n0.000026 28\n0.759962 51\n0.079845 3\n0.152058 65\n1.696747 3\n0.148307 222\n0.323747 2\n0.267086 28\n0.604732 3\n0.071340 28\n0.200437 47\n0.208181 3\n0.048384 28\n0.089320 1\n1.146377 2\n0.388367 6\n0.000028 2\n0.175749 7\n0.000039 3\n0.703232 265\n0.169318 64\n0.544253 64\n0.496228 64\n0.049766 64\n0.050726 63\n0.049700 63\n0.050885 63\n0.330807 37\n0.274915 447\n0.000111 63\n0.199291 244\n0.744621 71\n0.783622 2\n0.167225 10\n0.000027 2\n0.200057 11\n0.000028 64\n0.232280 251\n0.561160 114\n0.380787 108\n0.041748 64\n0.041153 75\n0.455397 65\n0.133067 65\n0.119955 65\n0.151956 1\n0.207427 67\n0.592128 78\n0.117077 179\n0.000074 112\n0.180111 106\n0.026218 64\n0.015353 179\n0.302397 2\n0.309962 20\n0.121430 2\n0.175446 36\n0.279444 49\n0.000012 293\n0.000269 96\n0.017993 18\n0.725408 23\n0.129674 1840\n0.331362 64\n8.472114 8\n0.196475 1\n0.127143 1\n0.207950 25\n0.319882 59\n0.000124 48\n0.164977 48\n0.143712 48\n0.144239 48\n0.143511 48\n0.144138 182\n0.128082 93\n0.240439 30\n0.119017 30\n0.072415 55\n0.184138 30\n0.656055 33\n0.052961 3\n0.318389 32\n0.148676 32\n0.055608 32\n0.208057 59\n0.128336 32\n0.104089 32\n0.528000 32\n0.055763 32\n0.168327 32\n0.040188 32\n0.175645 169\n0.292276 45\n0.276370 45\n0.016311 45\n0.095490 45\n0.031978 45\n0.143991 45\n0.047863 45\n0.208243 108\n0.416564 38\n0.292616 8\n0.261238 115\n0.065679 109\n0.038582 65\n0.013200 181\n0.572002 2\n0.301944 20\n0.089290 2\n0.247881 36\n0.294872 49\n0.000013 338\n0.000273 96\n0.018106 18\n4.797636 23\n0.153739 1902\n2.011335 102\n1.487957 29\n0.000036 41\n11.147837 37\n0.167985 37\n0.159998 37\n0.575951 37\n0.240047 84\n0.843909 75\n0.466223 65\n0.495661 65\n0.050115 65\n0.049659 61\n0.050668 64\n0.051443 64\n0.050580 64\n0.051852 62\n0.211260 102\n3.018928 29\n0.000116 1\n1.515681 44\n0.232135 43\n0.327856 44\n0.303971 45\n0.496047 47\n0.296075 721\n0.217812 99\n0.423237 99\n0.647901 99\n0.632461 100\n0.111339 64\n0.261156 65\n0.130520 64\n0.125752 64\n0.137858 64\n0.286418 64\n0.096869 64\n0.194447 64\n0.110645 28\n0.335758 28\n0.120104 28\n0.079910 28\n0.079963 28\n0.256465 3\n0.120355 28\n0.167546 28\n0.112031 3\n0.079622 28\n0.096173 28\n0.080197 28\n0.128035 28\n0.039994 28\n0.079884 28\n0.056209 1\n0.111667 28\n0.128097 28\n0.104027 28\n0.144068 28\n0.087860 3\n0.088348 28\n0.079829 28\n0.079674 1\n0.080202 28\n0.111868 28\n0.072361 28\n0.071491 28\n0.072428 28\n0.039843 28\n0.127920 28\n0.087848 4\n0.489223 4\n0.102980 28\n0.159871 28\n0.056073 28\n0.080368 3\n0.023436 28\n0.152204 28\n0.160168 28\n0.112045 28\n0.112168 28\n0.111638 2\n0.296504 28\n0.479608 7\n0.584018 28\n1.215833 28\n0.200183 28\n0.128179 3\n0.079429 28\n0.056279 28\n0.136173 28\n0.015913 28\n0.168017 28\n0.063960 28\n0.055620 3\n0.096541 28\n0.047675 28\n0.112404 3\n0.104262 28\n0.607528 28\n0.079614 28\n0.120399 28\n0.127971 28\n0.008090 28\n0.296162 28\n0.175829 4\n0.288129 4\n0.127920 4\n0.144068 4\n0.128265 28\n0.039620 28\n0.032001 28\n0.199938 28\n0.152061 3\n0.127879 28\n0.208256 28\n0.095810 28\n0.079575 3\n0.104347 28\n0.063824 28\n0.096154 28\n0.071851 28\n0.079783 28\n0.119021 28\n0.002573 1\n0.063142 28\n0.176015 28\n0.055565 28\n0.071932 28\n0.040072 28\n0.111931 28\n0.048345 28\n0.160034 75\n0.232050 3\n0.087785 28\n0.063927 28\n0.111566 28\n0.073298 4\n0.319460 4\n0.127852 8\n0.159634 1\n0.160029 56\n0.152722 4\n0.141342 28\n0.842288 99\n0.840523 28\n1.023196 28\n0.144262 28\n0.103706 3\n0.104034 28\n0.088010 28\n0.128096 28\n0.120238 28\n0.039891 28\n0.047508 3\n0.104230 28\n0.040092 28\n0.120167 28\n0.055943 28\n0.064114 2\n0.103529 28\n0.176618 3\n0.143496 28\n0.063968 28\n0.080080 28\n0.056175 3\n0.136108 204\n0.191994 18\n0.439965 204\n0.296468 41\n0.207550 41\n0.119846 41\n0.048535 3\n0.127423 41\n0.168340 41\n0.095911 41\n0.048001 41\n0.119959 57\n0.288040 28\n0.280054 3\n0.127841 28\n1.176299 8\n0.551651 28\n0.359824 3\n0.152287 28\n0.192413 28\n0.063352 28\n0.032567 2\n0.167864 28\n1.832021 28\n0.087803 28\n0.064269 28\n0.127771 3\n0.247983 28\n0.120127 28\n0.103829 2\n0.079633 28\n0.080179 28\n0.096180 28\n0.160231 28\n0.135991 28\n0.064234 3\n0.135625 28\n0.111918 28\n0.071859 1\n0.072296 28\n0.063628 28\n0.048233 28\n0.056061 3\n0.120143 28\n0.224763 28\n0.038840 28\n0.344336 28\n0.104015 28\n0.160170 28\n0.215783 28\n0.144061 4\n0.231894 4\n0.095826 28\n0.063939 28\n0.136224 28\n0.239977 3\n0.047881 28\n0.063850 28\n0.032093 1\n0.064154 28\n0.336179 6\n0.333640 28\n0.168000 28\n0.015988 3\n0.146011 1\n0.368414 4\n0.104021 6\n0.119756 28\n0.152247 28\n0.103740 25\n0.216550 74\n0.000034 28\n0.191607 28\n0.031565 28\n0.135969 28\n0.120017 28\n0.056095 3\n0.056032 28\n0.063865 28\n0.096508 28\n0.055371 28\n0.064408 28\n0.255903 62\n3.552150 17\n0.862859 110\n0.249974 29\n0.000030 1690\n0.475251 63\n0.974791 64\n0.324996 24\n0.550448 147\n0.000103 1\n0.103446 28\n1.163786 28\n0.176102 28\n0.088049 4\n0.407850 4\n0.136044 5\n0.178775 28\n0.445398 28\n0.047577 28\n0.088210 28\n0.144466 28\n0.087055 28\n0.160610 2\n0.104030 55\n0.001223 46\n0.001537 64\n0.189554 3\n0.119927 28\n0.271755 28\n0.168384 28\n0.111476 55\n0.056209 28\n0.120279 28\n0.199945 28\n0.032728 28\n0.479497 28\n0.040204 28\n0.319738 28\n0.288086 28\n0.183875 28\n0.039767 28\n0.376425 206\n0.288070 41\n0.408080 41\n0.048268 41\n0.079795 41\n0.071569 41\n0.096340 41\n0.055658 41\n0.208047 985\n0.510558 542\n0.000042 43\n0.049487 41\n0.296170 141\n0.799958 1\n0.000750 21\n0.000278 35\n0.267359 1\n0.440258 852\n0.511647 312\n0.000105 3\n0.363008 141\n0.319606 99\n0.000029 63\n0.456355 63\n0.342536 7\n0.175755 130\n0.195199 258\n0.743701 71\n0.583761 9\n0.255417 17\n0.160105 17\n0.151689 17\n0.119847 63\n0.352120 63\n0.494193 7\n0.135160 63\n0.395066 291\n0.929409 3\n0.222710 254\n0.480816 7\n0.692398 1\n0.135404 1\n0.499831 1\n0.050049 1\n0.050136 1\n0.051054 1\n0.051146 1\n0.050138 1\n0.050477 1\n0.050893 1\n0.050103 1\n0.051140 1\n0.050630 32\n0.742825 32\n0.223208 32\n0.136185 32\n0.055503 15\n1.344091 29\n0.000052 14\n0.360332 42\n0.000083 7\n0.204982 1\n0.110948 15\n0.483866 29\n0.000031 12\n0.276508 42\n0.000036 64\n0.316192 1\n0.227366 3\n0.667637 218\n0.176069 63\n0.455562 63\n0.498925 64\n0.050830 64\n0.051080 64\n0.050801 64\n0.050439 64\n0.050984 64\n0.049526 64\n8.035320 64\n0.501076 64\n0.049975 64\n0.050976 64\n0.051543 63\n0.050137 63\n0.049939 63\n0.051004 63\n0.220033 64\n0.191473 7\n0.191023 35\n0.220005 299\n0.000103 1\n0.129726 28\n0.244588 28\n0.032094 28\n0.153599 28\n0.214341 28\n0.112080 28\n0.215905 2\n0.112320 2\n0.264191 48\n0.000030 3\n0.128074 28\n0.127911 28\n0.175768 28\n0.079805 55\n0.128003 28\n0.259523 4\n0.428908 37\n0.496146 4\n0.049958 4\n0.309731 1\n0.428594 3\n1.207722 140\n0.292101 1\n0.000081 152\n0.000067 63\n0.927212 7\n0.966049 64\n0.675879 62\n0.188640 208\n4.810423 1\n0.210360 28\n0.396632 28\n0.031927 28\n0.216132 28\n0.047766 28\n0.136122 28\n0.216748 2\n0.095185 2\n1.160349 48\n0.000031 3\n0.033079 28\n0.102897 28\n0.151579 28\n0.112151 55\n0.087821 28\n0.120377 65\n2.607982 4\n0.349653 65\n0.954047 65\n0.766299 101\n28.030677 75\n5.385599 28\n1.170000 28\n0.079771 28\n0.247944 28\n0.064078 28\n0.111964 28\n0.088309 28\n0.184568 86\n5.828659 176\n0.196328 83\n2.975275 181\n0.533148 1\n0.710044 1\n0.247814 1\n0.095580 1\n0.104388 1\n0.128337 1\n0.151624 2\n0.177389 70\n0.037626 74\n0.000037 4\n0.028942 1\n0.324135 1\n0.095555 1\n0.120294 1\n0.023747 1\n0.216404 1\n0.335990 1\n0.031994 1\n0.208063 89\n0.208514 8\n0.775395 4\n0.240134 1\n0.543718 2\n0.199191 16\n0.123026 20\n0.000344 2\n0.000026 2\n0.000024 26\n0.000076 2\n0.000062 34\n0.000050 2\n0.000039 71\n0.000094 2\n0.000044 26\n0.000068 2\n0.000039 59\n0.000061 2\n0.000039 14\n0.000064 2\n0.000039 29\n0.000060 2\n0.000038 20\n0.000064 2\n0.000039 74\n0.000060 2\n0.000041 71\n0.000092 2\n0.000024 4\n0.000022 2\n0.000061 25\n0.000037 2\n0.000045 4\n0.000049 2\n0.000038 24\n0.000046 2\n0.000035 34\n0.000057 2\n0.000035 4\n0.000023 2\n0.000018 29\n0.000019 2\n0.000018 62\n0.001681 2\n0.000032 4\n0.000025 2\n0.000071 28\n0.000039 2\n0.000046 38\n0.000053 2\n0.000039 4\n0.000058 14\n0.922075 618\n0.400369 581\n0.879889 802\n0.415827 925\n0.928214 19\n2.376147 6\n0.000608 8\n0.527039 25\n0.792315 2\n0.606411 96\n0.007377 6\n0.409632 12\n0.129463 1938\n0.475665 28\n1.391052 28\n0.218426 28\n0.117688 28\n0.055650 28\n0.264023 203\n0.472366 41\n0.407952 41\n0.055750 41\n0.087870 41\n0.064334 41\n0.111683 41\n0.104212 41\n0.160166 166\n0.287973 28\n0.225326 5\n0.514898 44\n0.000055 28\n0.107756 30\n0.044322 1\n0.215671 37\n0.000087 3\n1.002099 5\n0.516407 70\n0.000049 210\n0.621520 1\n0.139599 28\n0.163880 28\n0.191862 28\n0.072054 1\n0.111887 53\n0.000052 28\n0.079937 28\n0.280182 28\n0.015794 28\n0.104729 28\n0.055498 28\n0.112208 28\n0.063607 4\n0.432395 4\n0.143626 64\n0.416411 3\n0.236739 3\n0.167987 3\n0.151675 3\n0.136232 3\n0.144158 31\n0.315737 31\n0.135731 31\n0.159934 31\n0.151666 31\n0.144077 31\n0.127937 32\n0.280114 32\n0.215900 32\n0.056075 32\n0.375637 31\n0.152299 64\n0.359782 4\n0.552093 4\n0.272053 4\n0.135755 4\n0.135778 28\n0.064314 28\n0.095439 28\n0.073467 28\n0.583203 28\n0.515188 28\n0.244945 28\n0.023843 28\n0.120261 28\n0.087700 28\n0.176343 28\n0.111873 28\n0.163180 3\n0.596929 28\n0.151490 3\n0.063862 28\n0.088120 30\n0.037622 3\n1.001654 1\n2.750143 1\n0.499775 1\n0.051329 1\n0.050564 1\n0.051120 1\n0.050997 1\n0.050373 1\n0.050633 1\n0.050436 1\n0.050787 1\n0.050626 1\n0.050359 1\n0.050447 31\n0.322253 220\n0.575276 998\n0.511346 434\n0.000058 1\n0.413351 61\n0.443165 3\n0.317432 1\n0.095183 1\n0.500350 1\n0.049554 1\n0.050570 1\n0.050607 171\n0.744603 40\n0.259637 7\n0.513763 822\n0.511969 313\n0.000038 64\n1.250754 64\n0.497701 65\n0.049592 65\n0.049904 65\n0.051237 65\n0.051276 65\n0.050300 65\n0.050344 66\n0.050648 65\n0.050479 1\n0.470639 3\n0.592052 175\n0.124964 3\n0.146414 161\n0.550166 64\n0.384769 65\n0.495853 64\n0.048881 64\n0.051204 64\n0.049930 64\n0.050412 64\n0.050312 63\n0.050481 63\n0.050850 63\n0.259185 7\n0.205967 64\n0.739945 1\n0.644598 3\n0.604591 314\n0.135466 5\n0.595004 63\n0.332299 11\n0.155243 65\n0.308911 4\n0.147195 65\n0.212971 5\n0.164533 65\n0.219852 12\n0.188797 65\n0.251869 1\n0.347591 2\n0.232189 12\n0.000030 65\n0.172013 65\n0.572719 56\n0.160303 47\n0.001926 22\n0.473348 8\n2.408164 65\n0.431730 4\n0.388649 69\n1.034855 211\n0.312207 15\n1.499552 1\n0.148784 1\n0.000609 14\n0.000194 20\n0.182200 20\n0.152205 19\n0.499984 18\n0.049804 13\n0.050587 9\n0.049913 9\n0.077191 9\n0.022418 8\n0.201977 4\n0.217533 6\n0.490622 8\n0.188315 12\n0.587093 6\n0.533080 2\n1.908499 2\n1.311422 12\n0.000029 1\n0.683760 7\n0.000049 65\n4.528810 65\n0.188360 65\n0.175913 65\n0.185063 64\n0.174928 64\n0.176138 64\n0.192166 64\n1.031481 64\n0.416266 1\n0.278628 3\n0.643828 299\n0.128330 111\n0.917483 105\n0.081773 63\n0.013634 12\n33.486740 67\n0.016664 179\n1.384841 1\n1.558095 1\n0.031806 1854\n0.509099 102\n1.103631 29\n0.000035 44\n0.676413 44\n0.231947 43\n0.607811 44\n0.336377 43\n1.472096 1351\n0.539946 1\n0.875812 1\n0.439986 1\n0.499727 1\n0.049839 1\n0.050366 1\n0.050784 1\n0.309115 59\n0.143755 59\n0.000101 3\n0.448304 3\n0.151732 83\n0.260832 82\n0.159854 83\n0.160064 80\n0.168066 116\n1.219986 110\n0.037107 65\n0.011527 18\n23.534417 71\n0.040663 181\n0.392660 2\n0.367023 8\n0.128426 12\n0.544007 20\n0.536402 2\n0.701316 43\n0.315384 1595\n0.014807 187\n0.034460 81\n2.596131 210\n0.228291 81\n0.168676 83\n0.222616 106\n0.169837 87\n0.411237 178\n0.172872 76\n0.112120 181\n0.393409 97\n0.285779 55\n0.362371 96\n0.061424 18\n0.339982 23\n0.457390 1653\n1.314912 102\n3.448170 29\n0.000111 1542\n0.296662 5\n2.723928 1\n0.150775 64\n0.524608 1\n0.147733 1\n0.500183 1\n0.050576 1\n0.050215 1\n0.049913 1\n0.050102 1\n0.050773 1\n0.050685 1\n0.050610 1\n0.050928 73\n0.391793 32\n0.027807 32\n0.249152 32\n0.071160 32\n0.071877 32\n0.184145 31\n0.520299 31\n0.500049 31\n0.051444 31\n0.078390 31\n0.021649 31\n0.051567 31\n0.050057 31\n0.050271 31\n0.050345 31\n0.050798 31\n0.050686 31\n0.049658 31\n0.050561 31\n0.051198 198\n0.050823 57\n0.051266 56\n0.050646 55\n0.050680 54\n0.050513 52\n0.050840 50\n0.108486 48\n0.159409 117\n0.168101 32\n0.127639 114\n0.334285 108\n0.038363 64\n0.014194 181\n0.370953 2\n0.238098 20\n0.129805 2\n0.215308 36\n0.335098 7\n0.000013 1595\n0.014368 187\n0.034834 7\n1.257066 48\n0.000075 96\n0.049256 18\n0.380502 23\n0.313126 9\n0.335039 1796\n0.004762 103\n1.543378 29\n0.000137 1348\n0.512858 1\n0.571047 52\n4.672413 59\n0.000034 54\n0.025988 29\n0.000100 3\n0.403891 83\n2.854233 80\n0.167984 79\n0.176166 80\n0.167879 41\n0.176020 35\n0.304096 31\n0.224056 35\n0.231678 31\n0.312197 116\n0.572482 110\n0.054006 65\n0.011841 18\n0.309961 1\n0.143127 1\n0.200120 1\n0.183896 1\n0.159833 1\n0.616036 72\n0.368181 36\n0.300680 36\n0.535763 116\n1.060927 110\n0.052137 65\n0.011393 181\n0.776123 2\n0.390157 20\n0.121460 2\n0.312806 36\n0.300672 7\n0.000012 1605\n0.014137 187\n0.034883 153\n2.200814 7\n1.803802 48\n0.000032 96\n0.053934 18\n0.813517 23\n0.161540 33\n0.921390 125\n0.001506 954\n0.000456 515\n0.000293 102\n0.823473 29\n0.000590 41\n1.107549 44\n0.279912 893\n1.146426 65\n0.712478 65\n0.497825 64\n0.050360 65\n0.050289 64\n0.050109 65\n0.051219 65\n0.049753 65\n0.050697 64\n0.050692 64\n0.050818 64\n0.079349 64\n0.240839 1\n0.358897 3\n1.082197 105\n0.143131 63\n0.488654 63\n0.498732 65\n0.050134 64\n0.049827 64\n0.050200 8\n0.373565 99\n0.281131 195\n0.975878 13\n2.678853 115\n0.050950 29\n0.000035 92\n1.326769 13\n0.781989 115\n0.042058 29\n0.000036 92\n2.680024 72\n0.496307 64\n0.199379 64\n0.167202 110\n1.873447 29\n0.000034 1436\n0.602410 104\n1.374997 29\n0.000034 44\n0.324417 44\n0.296226 1\n1.483332 49\n0.001266 65\n0.000417 328\n0.000061 662\n0.000345 389\n0.000440 64\n1.893818 65\n0.497304 65\n0.051663 65\n0.050176 65\n0.050717 64\n0.051070 65\n0.050206 66\n0.050755 65\n0.050505 65\n0.051015 64\n0.333398 25\n1.505517 149\n0.000574 25\n0.145183 74\n0.000036 64\n0.273468 25\n1.305067 167\n0.000041 25\n0.324843 161\n0.000037 65\n0.474479 65\n0.123035 66\n0.135884 64\n0.135939 241\n0.284384 175\n0.000117 199\n0.127821 65\n0.191188 1\n0.147110 4\n0.268047 28\n0.183897 28\n0.087646 53\n0.072235 1\n0.256228 49\n0.199856 49\n0.408061 49\n0.119945 49\n0.055911 4\n3.656131 4\n0.168326 4\n0.167696 6\n0.152001 1\n0.159963 1\n0.656042 49\n0.319910 49\n0.048554 49\n0.223439 49\n0.039795 49\n0.328355 49\n1.312291 49\n0.039665 49\n0.240097 4\n0.384251 49\n0.464311 49\n0.062984 4\n0.616657 4\n0.112038 4\n0.160074 4\n0.144003 4\n0.119547 28\n0.680027 28\n0.119785 28\n0.151977 28\n0.040435 55\n0.111753 34\n0.181131 36\n0.206755 64\n0.335001 185\n0.197851 1\n0.122843 4\n0.236857 125\n0.304013 3\n0.159800 41\n0.496476 41\n0.199584 41\n0.160715 41\n0.007050 43\n0.592559 43\n0.151801 43\n0.152019 43\n0.143620 41\n0.056299 41\n0.079526 41\n0.160640 41\n0.171027 41\n0.092807 41\n0.079888 41\n0.120259 3\n0.055721 1\n0.647976 43\n0.096090 3\n0.047788 41\n0.063987 2\n0.112534 41\n0.223702 41\n0.103834 41\n0.096111 41\n0.144412 3\n0.063710 41\n0.087604 41\n0.144488 41\n0.144898 41\n0.102965 41\n0.056025 41\n0.111721 3\n0.072232 41\n0.080520 41\n0.119838 41\n0.039928 41\n0.039784 1\n0.127902 41\n0.168111 41\n0.312323 41\n0.063847 3\n0.103806 41\n0.112399 41\n0.048471 1\n0.127511 1\n0.000031 41\n0.095717 41\n0.184734 41\n0.127987 41\n0.023160 41\n0.214477 3\n0.018204 41\n0.103789 41\n0.063600 1\n0.080316 41\n0.120719 41\n0.263321 41\n0.095957 43\n0.311823 43\n0.112043 3\n0.088440 41\n0.151854 43\n0.391815 41\n0.071852 41\n0.120106 41\n0.144152 41\n0.064386 41\n0.167776 66\n2.736301 99\n0.535163 64\n0.170830 64\n10.110305 65\n0.155853 8\n0.391579 1\n0.332571 41\n0.231172 41\n0.231843 41\n0.120322 3\n0.103855 41\n0.144109 41\n0.079907 41\n0.136214 41\n0.104019 41\n0.071576 41\n0.144200 41\n0.048065 186\n0.384628 7\n0.458163 125\n0.373017 3\n0.160079 41\n0.139805 41\n0.100128 55\n0.001005 46\n0.001319 58\n0.053677 41\n0.128062 3\n0.111898 41\n0.576022 41\n0.064919 3\n0.071400 41\n0.151972 41\n0.071672 41\n0.095780 41\n0.216323 41\n0.151797 41\n0.032370 41\n0.144082 41\n0.151778 2\n0.071661 41\n0.104260 41\n0.047947 41\n0.167918 41\n0.104268 3\n0.039738 41\n0.096143 41\n0.039997 2\n0.079989 41\n0.152251 41\n0.120019 41\n0.056089 41\n0.063839 41\n0.119778 65\n5.696529 103\n28.028901 195\n10.252597 863\n0.000043 99\n0.000568 281\n0.000033 344\n0.525679 700\n0.000046 373\n0.000615 227\n0.484264 727\n0.000131 245\n0.000032 1\n0.000025 185\n0.000085 104\n0.000600 275\n0.693491 669\n0.000078 457\n0.000668 9\n0.398640 949\n0.000041 529\n0.000536 120\n0.214801 832\n0.000157 60\n0.000616 69\n0.000048 3\n0.000356 293\n0.000029 133\n0.000036 281\n0.574804 708\n0.000082 431\n0.000701 407\n0.529300 591\n0.000036 515\n0.000664 235\n2.821198 1176\n0.000502 460\n1.162907 452\n0.000083 617\n0.000684 249\n2.857213 1\n0.000076 58\n0.000060 1\n0.000605 58\n0.000260 1\n0.000057 77\n0.000252 1\n0.000058 140\n0.000158 1\n0.000103 275\n0.000154 1\n0.000046 39\n0.000047 1\n0.000051 54\n0.000209 2\n0.000379 1\n0.000059 4\n0.000171 1\n0.000125 12\n0.000086 1\n0.000104 84\n0.000139 2\n0.000297 1\n0.000057 299\n0.000242 5\n0.180926 956\n0.000055 134\n0.000030 448\n0.000662 8\n0.446345 1\n0.000083 555\n0.000075 1\n0.000050 46\n0.000046 1\n0.000296 46\n0.000047 1\n0.000079 71\n0.000256 1\n0.000066 231\n0.000062 165\n0.000184 1\n0.000148 87\n0.000147 1\n0.000336 35\n0.000055 1\n0.000060 35\n0.000054 1\n0.000209 112\n0.000053 1\n0.000159 101\n0.000063 177\n0.541287 1227\n0.000495 148\n0.407195 876\n0.000043 428\n0.000533 78\n0.544954 1000\n0.000091 281\n0.000721 35\n0.429550 971\n0.000135 824\n0.000771 49\n0.312792 858\n0.000048 93\n0.000026 336\n0.000630 61\n0.348608 62\n0.206993 63\n0.499920 63\n0.050360 64\n0.050075 63\n0.050536 63\n0.050100 63\n0.050006 64\n0.050180 64\n0.051008 64\n0.050070 64\n0.051126 64\n0.050577 64\n0.050392 65\n0.050758 64\n0.050778 64\n0.291940 1\n0.150877 28\n0.787625 28\n0.071308 28\n0.081405 28\n0.110615 28\n0.064004 2\n0.120086 54\n0.000050 2\n0.039887 28\n0.736226 28\n0.120035 28\n0.104054 28\n0.263864 28\n0.215742 28\n0.168399 28\n0.103830 28\n0.224884 28\n0.143198 28\n0.111803 28\n0.480308 5\n0.506645 37\n0.000731 28\n0.132634 28\n0.151794 28\n0.040116 34\n0.120244 21\n0.000087 28\n0.095624 28\n0.087997 28\n0.064241 28\n0.136137 28\n0.047894 36\n0.308917 8\n0.615639 115\n0.057729 109\n0.031764 65\n0.012563 6\n0.507629 49\n0.000028 132\n0.441184 884\n0.000037 472\n0.000537 207\n0.000095 148\n0.000274 652\n0.256629 449\n0.000032 147\n0.000583 499\n0.495892 1120\n0.000057 172\n0.053460 806\n0.000045 562\n0.000476 890\n0.075914 134\n0.000035 414\n0.000114 826\n0.020910 331\n0.000090 1\n0.045065 27\n0.003135 28\n0.000469 1\n0.046706 1\n0.050519 1\n0.051493 69\n0.411029 65\n0.496703 64\n0.049770 64\n0.050217 64\n0.053474 64\n0.050112 64\n0.050959 64\n0.050357 64\n0.050415 64\n0.050204 64\n0.050537 65\n0.050407 63\n0.050081 63\n0.263330 64\n0.511274 63\n0.641983 64\n0.182804 65\n0.765155 3\n0.059782 28\n0.176202 28\n0.127692 28\n0.023819 28\n0.200366 114\n0.463264 108\n0.039485 64\n0.012273 456\n5.742369 668\n0.000106 360\n0.000039 437\n0.454795 511\n0.000044 608\n0.000527 907\n0.516940 452\n0.000032 290\n0.000538 95\n1.430067 810\n0.000111 422\n0.000038 1\n0.488558 1290\n0.000201 3\n0.000700 273\n0.000040 954\n0.561710 440\n0.000099 191\n0.000301 405\n0.902207 789\n0.000044 418\n0.000030 65\n0.576479 64\n0.499499 63\n0.050319 63\n0.050713 63\n0.051378 63\n0.051185 63\n0.050659 63\n0.050402 62\n0.051070 61\n0.050790 348\n0.054241 591\n0.000046 449\n0.000090 171\n0.000864 64\n0.045114 64\n0.051089 63\n0.050798 63\n0.050503 457\n0.553208 664\n0.000043 11\n0.000077 349\n0.000923 831\n0.902527 334\n0.000041 445\n0.597609 1\n0.001500 484\n0.000045 100\n0.000530 84\n0.000030 357\n0.000346 350\n0.156935 754\n0.000072 452\n0.000569 907\n0.182907 452\n0.000034 290\n0.000592 95\n0.400246 810\n0.000051 3\n0.000027 176\n0.000135 243\n0.000622 1\n0.496712 921\n0.000050 818\n0.000775 60\n0.385069 940\n0.000038 83\n0.000031 289\n0.000626 1116\n0.598666 377\n0.000054 126\n0.463968 955\n0.000047 289\n0.000586 99\n2.217952 29\n0.000127 1336\n0.784795 2\n2.132248 102\n7.843349 29\n0.000038 1493\n0.368403 64\n0.923238 64\n0.493579 64\n0.050338 64\n0.049975 65\n0.050712 64\n0.050725 64\n0.050341 64\n0.051041 64\n0.050444 64\n0.050263 64\n0.051076 63\n0.050649 63\n0.050970 63\n0.050358 64\n0.051670 63\n0.050285 63\n0.222875 3\n0.191644 24\n0.231225 147\n0.000040 96\n0.372208 1\n0.139958 28\n0.244229 28\n0.159982 28\n0.151496 28\n0.136102 4\n0.568524 28\n0.032227 55\n0.055928 3\n0.284071 28\n0.219617 28\n0.200359 28\n0.071820 28\n0.143636 28\n0.119959 28\n0.088686 28\n0.143757 28\n0.007830 56\n0.192034 28\n0.223925 49\n0.508753 55\n0.001255 46\n0.001562 45\n0.248602 28\n0.168193 28\n0.008761 55\n0.159268 28\n0.119549 28\n1.336251 28\n0.127989 28\n0.192024 28\n0.528206 28\n0.032524 4\n0.239670 4\n0.143910 4\n0.112254 28\n0.079518 28\n0.048170 28\n0.319934 30\n0.035645 17\n0.222673 22\n0.000030 7\n0.440837 114\n0.057418 108\n0.038944 64\n0.012256 181\n0.460942 2\n0.405837 20\n0.137569 2\n0.423572 36\n0.305110 72\n0.000012 432\n0.000273 107\n0.018363 350\n0.002006 96\n0.026707 18\n1.486574 23\n0.169250 1625\n2.747215 27\n0.509254 48\n0.000092 54\n2.303347 858\n0.000048 990\n0.000651 5\n0.551636 818\n0.000050 443\n0.000588 5\n0.888370 1290\n0.000051 278\n0.000621 5\n6.028468 904\n0.000098 179\n0.000036 239\n0.000029 4\n1.577375 921\n0.000049 818\n0.000597 131\n0.655096 865\n0.000051 102\n0.000028 183\n0.000028 179\n3.064482 2\n5.502769 20\n0.185307 2\n0.577268 36\n0.347047 49\n0.000014 455\n0.000294 41\n0.000014 66\n0.000010 149\n0.000140 67\n0.000011 134\n0.000119 96\n0.018966 18\n0.718668 23\n0.145908 20\n0.144863 23\n0.150738 20\n0.601362 23\n0.390405 1648\n0.266821 72\n1.666833 906\n0.000048 423\n0.000651 91\n0.682606 971\n0.000049 656\n0.000610 843\n0.585951 355\n0.000041 213\n0.000616 605\n3.212028 303\n0.000101 363\n0.000039 5\n14.952171 921\n0.000051 818\n0.000590 61\n2.838197 935\n0.000051 102\n0.000074 85\n0.000484 98\n0.000118 50\n1.078380 858\n0.000104 145\n0.000651 535\n0.000033 153\n0.000427 154\n0.000030 5\n1.289079 818\n0.000047 443\n0.000688 4\n0.495415 939\n0.000048 352\n0.000029 278\n0.000610 95\n0.900578 817\n0.000078 415\n0.000681 4\n0.488798 921\n0.000049 126\n0.000642 263\n0.000029 126\n0.000026 2\n0.000344 200\n0.000065 101\n0.000374 61\n0.462350 935\n0.000050 285\n0.000389 1\n4.369067 926\n0.000045 43\n0.000028 186\n0.000647 151\n0.000038 158\n0.559881 816\n0.000047 285\n0.000736 64\n1.906795 64\n0.495319 64\n0.049662 64\n0.050743 65\n0.051144 64\n0.051349 64\n0.049350 64\n0.050858 64\n0.049582 64\n0.051224 64\n0.053229 63\n0.049927 63\n0.400820 63\n0.215327 64\n0.192754 7\n0.535077 1\n0.127393 1\n0.500674 1\n0.050655 1\n0.049394 1\n0.050061 1\n0.050041 1\n0.050899 1\n0.050348 1\n0.049949 64\n0.478539 64\n0.182062 64\n0.184322 65\n0.167916 65\n0.248105 1\n0.414970 1\n2.239890 1\n0.500693 1\n0.050296 1\n0.051272 1\n0.050695 1\n0.050244 1\n0.050555 1\n0.050442 1\n0.050710 1\n0.051132 1\n0.262201 86\n0.609293 59\n0.000054 1\n0.350463 44\n0.246270 22\n0.000113 1\n0.185746 44\n0.185208 23\n0.000092 72\n0.140557 97\n0.184238 72\n0.607800 72\n0.456033 72\n0.168007 72\n0.088531 45\n0.423742 24\n0.000079 44\n0.111967 24\n0.000057 47\n0.296251 23\n0.000080 73\n0.119726 72\n0.047545 24\n0.000046 47\n0.176294 21\n0.000070 72\n0.079972 72\n0.072140 72\n0.176397 72\n0.063383 43\n0.365474 29\n0.000095 80\n0.490539 73\n0.584402 115\n1.346726 109\n0.065280 65\n0.012695 181\n0.529505 2\n0.182464 20\n0.153356 2\n0.255489 36\n0.330423 49\n0.000014 4095\n0.000286 4095\n0.000120 2328\n0.000046 2048\n0.000036 2048\n0.000040 2048\n0.000034 142\n0.000019 2\n0.000022 96\n0.019186 1\n23.576619 4\n0.784335 18\n0.336100 23\n0.129364 33\n0.497387 125\n0.001315 918\n0.000647 234\n0.000149 421\n0.000632 243\n1.265851 715\n0.000044 98\n0.000073 238\n0.000590 34\n1.201548 1337\n0.000680 167\n0.683925 774\n0.000052 170\n0.000099 88\n0.000030 306\n0.000106 109\n2.024857 827\n0.000055 153\n0.000026 210\n0.000694 119\n1.065951 1\n0.000435 46\n0.000192 1\n0.000197 46\n0.000165 1\n0.000191 71\n0.000162 1\n0.000195 394\n0.000173 1\n0.000225 87\n0.000162 1\n0.000184 35\n0.000145 1\n0.000176 35\n0.000143 1\n0.000172 110\n0.000158 2\n0.000314 1\n0.000149 166\n0.000148 1\n0.000185 87\n0.000146 1\n0.000300 87\n0.000184 1\n0.000191 43\n0.000144 1\n0.000175 148\n0.000149 45\n0.347483 1\n0.000384 68\n0.000120 1\n0.000120 66\n0.000099 1\n0.000113 135\n0.000100 1\n0.000113 126\n0.000099 1\n0.000112 43\n0.000098 1\n0.000103 71\n0.000090 1\n0.000103 40\n0.000090 1\n0.000101 37\n0.000090 1\n0.000101 33\n0.000089 1\n0.000102 330\n0.000125 222\n0.000204 1\n0.000118 105\n0.000094 4\n0.669310 1\n0.000382 240\n0.000186 1\n0.000899 77\n0.000226 1\n0.000205 536\n0.000173 1\n0.000236 66\n0.000172 2\n0.000342 1\n0.000175 95\n0.000160 3\n0.000332 1\n0.000156 225\n0.000229 1\n0.000201 125\n0.000153 38\n0.491243 1013\n0.000022 319\n0.000287 166\n0.395641 775\n0.000114 258\n0.000032 306\n0.000667 109\n0.615747 827\n0.000043 363\n0.000604 1\n0.498262 912\n0.000044 93\n0.000026 156\n0.000027 80\n0.000717 231\n0.000035 94\n1.306691 838\n0.000110 104\n0.000034 306\n0.000076 146\n0.323728 805\n0.000047 117\n0.000027 57\n0.000696 292\n0.000037 64\n0.700069 64\n0.227796 64\n0.191745 5\n6.463059 931\n0.000054 104\n0.000029 306\n0.000595 544\n0.852188 1119\n0.000540 62\n7.723592 64\n0.500241 63\n0.050367 63\n0.050377 63\n0.050556 63\n0.048876 63\n0.050946 64\n0.050393 64\n0.049880 64\n0.050172 64\n0.658643 64\n0.255467 64\n0.392148 65\n0.207334 25\n0.610358 149\n0.000438 8\n1.203649 28\n0.348488 12\n0.383849 2\n0.167722 4\n0.208422 8\n0.475081 2\n0.484505 28\n3.016535 28\n1.240505 53\n0.071339 3\n1.175960 28\n1.991738 28\n0.072154 28\n0.192269 28\n0.135921 28\n0.047989 28\n0.191801 3\n0.112084 28\n0.352293 51\n0.031689 3\n0.208033 28\n0.296103 28\n0.160241 28\n0.047523 55\n0.105257 28\n0.086675 28\n0.216340 28\n0.039943 28\n0.111843 28\n0.033176 28\n0.119089 28\n0.055773 28\n0.192453 28\n0.323947 207\n0.628365 8\n0.138911 65\n3.117379 65\n0.148530 8\n0.287605 37\n0.403207 159\n0.000031 8\n0.434846 2\n0.324503 28\n0.159461 28\n0.088080 28\n0.184400 28\n0.111434 28\n0.033104 28\n0.183385 28\n0.071613 65\n0.249912 8\n0.196060 118\n0.250764 118\n0.407158 8\n0.195648 2\n0.228659 122\n0.375811 3\n0.199421 41\n0.248394 41\n0.144023 41\n0.152092 41\n0.075249 1\n0.060636 1\n0.000092 41\n0.071732 41\n0.103996 41\n0.067622 3\n0.100408 41\n0.064231 41\n0.040314 41\n0.191690 41\n0.063942 41\n0.032705 41\n0.127283 3\n0.055695 3\n0.121730 41\n0.062751 43\n0.367937 1\n0.111811 1\n0.127832 43\n0.408401 41\n0.183680 41\n0.056191 3\n0.095870 41\n0.056211 41\n0.096352 3\n0.079715 41\n0.015846 41\n0.055969 41\n0.087982 3\n0.087998 41\n0.168367 41\n0.063803 41\n0.095730 41\n0.064329 41\n0.152054 41\n0.111584 41\n0.112101 3\n0.128195 41\n0.112178 41\n0.047711 3\n0.144356 41\n0.023969 41\n0.199750 41\n0.055820 3\n0.168426 41\n0.975991 43\n0.344048 41\n0.159874 41\n0.064015 41\n0.095868 41\n0.072061 41\n0.071897 65\n0.498373 1\n0.406025 2\n0.352056 49\n0.000042 3\n0.040052 28\n0.159931 30\n0.029893 66\n0.683448 65\n0.292537 207\n0.786599 8\n0.323242 2\n0.492396 28\n0.224101 5\n1.032201 4\n0.360130 1\n0.207995 288\n0.728649 65\n2.176636 3\n0.466895 3\n0.144383 2\n0.159899 1\n0.143881 3\n0.135869 3\n0.160170 32\n0.627038 32\n0.079703 32\n0.087783 65\n0.522044 28\n0.630940 28\n0.103697 28\n0.192018 28\n0.120473 28\n0.031751 28\n0.196085 28\n0.060231 28\n0.167941 28\n0.095670 28\n0.144836 28\n0.103197 28\n0.071901 28\n0.120432 28\n0.064042 28\n0.200151 65\n1.697474 66\n0.147743 1\n0.495018 3\n1.146424 134\n0.328809 58\n0.000031 3\n0.247180 57\n0.232699 227\n0.000097 3\n0.335892 288\n0.288902 3\n0.795800 3\n0.500134 3\n0.049803 3\n0.049879 3\n0.050000 3\n0.050113 2\n0.050567 1\n0.050293 3\n0.050953 3\n0.050106 106\n0.052539 18\n0.047751 3\n0.050993 3\n0.050722 2\n0.051032 1\n0.051254 3\n0.051218 3\n0.049710 3\n0.050880 3\n0.050206 3\n0.051109 3\n0.050178 2\n0.050956 1\n0.050685 3\n0.051290 3\n0.050320 3\n0.050236 3\n0.050182 3\n0.049454 3\n0.050672 2\n0.050921 1\n0.050369 3\n0.050487 3\n0.051371 3\n0.050650 3\n0.217051 32\n0.683797 32\n0.135901 2\n0.260113 1\n0.287901 3\n0.500012 3\n0.050183 3\n0.050274 3\n0.049912 3\n0.049724 3\n0.050492 2\n0.050458 1\n0.050717 3\n0.172356 3\n0.153026 37\n0.592763 8\n0.286682 1\n0.499645 1\n0.049908 1\n0.050147 1\n0.049761 1\n0.050151 1\n0.050921 1\n0.050158 1\n0.049792 1\n0.050104 1\n0.051041 1\n0.051127 1\n0.051062 1\n0.050849 65\n0.348398 1\n0.498507 3\n0.610959 297\n0.132810 64\n0.384197 249\n0.628199 8\n0.396739 1\n0.135181 1\n0.500119 1\n0.049811 1\n0.050376 1\n0.055861 1\n0.051191 1\n0.049963 1\n0.050546 1\n0.051049 1\n0.050128 1\n0.051144 1\n0.051019 1\n0.050736 1\n0.050719 1\n0.050829 32\n0.704065 35\n0.072143 32\n0.336171 32\n0.183897 78\n0.136110 36\n0.208063 32\n0.367584 32\n0.393147 32\n0.367343 32\n0.255530 32\n0.208216 32\n0.223822 32\n0.071989 32\n0.977765 37\n0.355735 37\n0.154793 32\n0.151911 76\n0.048205 115\n1.037653 109\n0.027138 65\n0.042843 181\n0.353708 2\n0.206182 20\n0.121351 2\n0.231856 36\n0.358329 72\n0.000013 4095\n0.000319 4095\n0.000121 4095\n0.000053 2\n0.000017 256\n0.000020 2048\n0.000042 2048\n0.000036 114\n0.000019 2\n0.000026 96\n0.018898 18\n1.476699 23\n0.393501 33\n0.528384 125\n0.003363 988\n0.000454 416\n0.000218 540\n0.000195 416\n2.015070 1\n0.000076 90\n0.000051 1\n0.000046 39\n0.000049 1\n0.000049 134\n0.000050 1\n0.000292 64\n0.000046 1\n0.000045 35\n0.000046 1\n0.000043 87\n0.000047 1\n0.000158 39\n0.000060 2\n0.000351 1\n0.000058 62\n0.000223 1\n0.000155 42\n0.000162 1\n0.000132 56\n0.000140 1\n0.000154 38\n0.000155 313\n0.000299 4\n1.660581 1\n0.000073 145\n0.000055 1\n0.000273 273\n0.000063 1\n0.000046 39\n0.000100 1\n0.000146 56\n0.000047 1\n0.000047 4\n0.000165 1\n0.000234 12\n0.000058 1\n0.000098 86\n0.000139 1\n0.000130 328\n0.000150 117\n0.000363 2\n0.000306 1\n0.000057 53\n0.000105 1\n0.000099 295\n0.000148 5\n1.225195 931\n0.000111 104\n0.000033 301\n0.000083 600\n0.158534 345\n0.000044 86\n0.000079 1\n0.000482 100\n0.000029 88\n0.000027 1\n0.000027 88\n0.000027 413\n0.000381 62\n0.633594 64\n1.255438 63\n0.500564 63\n0.050552 63\n0.051378 63\n0.050834 63\n0.050698 64\n0.050449 64\n0.050547 64\n0.051194 3\n0.310617 64\n0.188843 64\n0.100246 3\n0.142741 64\n0.427823 3\n0.068867 3\n0.224592 3\n0.501759 3\n0.050165 2\n0.049763 1\n0.050152 3\n0.050173 3\n0.049829 3\n0.050095 3\n0.050055 3\n0.049852 3\n0.050032 2\n0.051729 1\n0.050544 3\n0.050678 3\n0.051291 3\n0.051042 3\n0.050843 3\n0.050107 3\n0.055597 2\n0.050287 1\n0.050629 3\n0.050447 3\n0.051172 3\n0.050560 3\n0.050162 3\n0.051352 3\n0.050563 2\n0.050715 1\n0.050220 3\n0.050429 3\n0.051099 3\n0.050297 3\n0.050913 3\n0.050253 3\n0.050723 1\n0.393813 3\n0.191593 2\n0.152135 1\n0.184163 3\n0.169788 3\n0.150404 3\n0.143676 3\n0.136307 69\n0.287632 31\n0.132745 31\n0.143157 32\n0.336245 32\n0.335815 32\n0.143944 115\n0.813826 109\n0.036718 65\n0.013346 29\n2.924815 59\n0.000094 32\n0.251289 32\n0.144089 32\n0.016069 32\n0.199980 32\n0.112245 1\n0.419937 1\n0.499977 1\n0.050098 1\n0.050439 1\n0.050052 1\n0.050439 1\n0.051372 1\n0.050619 1\n0.050962 1\n0.051574 1\n0.050588 1\n0.050485 1\n0.050028 1\n0.050317 1\n0.050693 32\n0.446334 32\n0.279825 32\n0.255907 32\n0.047664 32\n0.448472 32\n0.152974 32\n0.102729 3\n0.236410 3\n0.500675 3\n0.050373 3\n0.050656 3\n0.051308 2\n0.051159 1\n0.439853 32\n0.371691 3\n0.316402 3\n0.143984 3\n0.143914 3\n0.143652 31\n0.524202 31\n0.160024 31\n0.152082 115\n0.357403 109\n0.042495 65\n0.013064 181\n0.264275 2\n0.213701 20\n0.121713 2\n0.209474 36\n0.328776 72\n0.000030 4095\n0.000337 4095\n0.000110 4095\n0.000067 4095\n0.002578 363\n0.000075 96\n0.015661 18\n0.945302 23\n0.161369 9\n2.726824 24\n0.002734 125\n0.001747 995\n0.000311 416\n0.000137 540\n0.000379 507\n1.214104 406\n0.000073 515\n0.000543 600\n0.966967 354\n0.000077 362\n0.000487 408\n0.000064 64\n1.382668 63\n0.499296 63\n0.050181 63\n0.049820 63\n0.049890 63\n0.050241 64\n0.051260 64\n0.050563 64\n0.051584 64\n0.050882 65\n0.049667 64\n0.050436 64\n0.179389 3\n0.111362 3\n0.499710 3\n0.049905 3\n0.050627 3\n0.050274 3\n0.049928 2\n0.050324 1\n0.050752 93\n0.383181 58\n0.000040 114\n0.745360 108\n0.062686 64\n0.013286 181\n0.290692 2\n0.182147 20\n0.129810 2\n0.183101 34\n0.362506 2\n0.000182 47\n0.000083 2\n0.000083 4\n0.000105 17\n0.000070 2\n0.000069 90\n0.000093 2\n0.000081 4\n0.000089 20\n0.000068 2\n0.000068 90\n0.000080 2\n0.000080 4\n0.000092 28\n0.000069 2\n0.000071 9\n0.000089 2\n0.000076 2048\n0.000086 2048\n0.000169 2048\n0.000141 2048\n0.000141 2048\n0.000129 2048\n0.000134 2048\n0.000127 2048\n0.000132 102\n0.000040 2\n0.000024 96\n0.018841 18\n0.343125 23\n0.113431 33\n0.521528 125\n0.001997 995\n0.000457 414\n0.000290 539\n0.000144 507\n0.662693 404\n0.000094 183\n0.000029 313\n0.000539 150\n0.415142 805\n0.000042 469\n0.000536 5\n0.448045 1129\n0.000100 185\n0.000753 120\n0.423100 831\n0.000129 257\n0.000032 89\n0.000082 195\n0.000571 115\n0.486291 889\n0.000049 328\n0.000550 5\n0.438139 925\n0.000044 95\n0.000028 355\n0.000769 161\n0.584537 878\n0.000113 102\n0.000027 186\n0.000079 5\n0.860718 907\n0.000051 990\n0.000747 65\n0.507451 1013\n0.000046 280\n0.000622 61\n0.324828 62\n0.255085 63\n0.183527 63\n0.168152 63\n0.144486 3\n0.150708 3\n0.500472 3\n0.050582 3\n0.049514 3\n0.050185 3\n0.054839 2\n0.050116 1\n0.049906 3\n0.050649 3\n0.050799 3\n0.050491 3\n0.050373 3\n0.049870 3\n0.050083 64\n1.710542 64\n0.150271 64\n0.144248 65\n0.151887 65\n0.120243 2\n0.695029 77\n0.263776 59\n0.000122 79\n0.495815 22\n0.000054 100\n0.051336 99\n0.048453 53\n0.050804 2\n0.001078 22\n0.000025 54\n0.076370 22\n0.000029 52\n0.023631 23\n0.000053 52\n0.050934 22\n0.000028 73\n0.050846 50\n0.051147 22\n0.000028 71\n0.049940 47\n0.049957 23\n0.000055 47\n0.130999 22\n0.000055 46\n0.168631 22\n0.000030 45\n0.151349 22\n0.000030 54\n0.159934 22\n0.000029 115\n0.358004 109\n0.031437 65\n0.012996 46\n0.201575 135\n0.001776 2\n0.285736 20\n0.121608 2\n0.167525 36\n0.364653 72\n0.000013 4095\n0.000355 4095\n0.000115 4095\n0.000069 2306\n0.000762 2152\n0.003753 96\n0.013765 18\n18.751523 23\n0.601221 33\n0.929652 125\n0.001722 927\n0.000431 146\n0.000032 421\n0.000316 103\n1.094865 29\n0.000036 1330\n0.801096 128\n1.058828 1108\n0.000539 907\n0.612424 92\n0.000155 2\n0.000176 1\n0.000298 28\n0.000077 1\n0.000128 20\n0.000130 1\n0.000135 70\n0.000141 1\n0.000129 105\n0.000197 438\n0.378947 590\n0.000043 298\n0.000757 71\n0.158415 877\n0.000102 292\n0.000781 63\n0.376524 63\n0.263526 63\n0.160119 63\n0.500099 63\n0.049599 63\n0.050289 63\n0.050468 64\n0.050667 25\n1.480521 148\n0.000039 198\n0.116805 64\n0.304532 1\n0.210875 66\n0.548042 3\n0.207679 45\n0.152395 3\n0.065595 213\n1.014899 92\n2.446374 2621\n0.000283 92\n2.204679 439\n0.000016 92\n0.288321 440\n0.000015 92\n0.416377 439\n0.000043 92\n0.454949 439\n0.000015 92\n0.468748 439\n0.000015 92\n0.771399 442\n0.000015 90\n0.561073 440\n0.000015 92\n0.579450 443\n0.000015 92\n0.621220 443\n0.000015 92\n0.982182 446\n0.000014 92\n0.695345 443\n0.000016 92\n0.742038 438\n0.000015 92\n0.760055 440\n0.000015 92\n1.202583 440\n0.000014 92\n0.809901 439\n0.000015 92\n0.827016 439\n0.000015 92\n0.821575 439\n0.000015 92\n0.839604 439\n0.000043 90\n1.283352 439\n0.000016 92\n0.875475 437\n0.000039 92\n0.872803 437\n0.000015 92\n1.350450 437\n0.000014 92\n0.915646 437\n0.000014 92\n0.935094 437\n0.000015 92\n0.944292 439\n0.000015 91\n0.970797 439\n0.000039 92\n1.491774 438\n0.000016 92\n1.012638 438\n0.000015 92\n1.030772 438\n0.000015 92\n1.061292 438\n0.000015 92\n1.629751 438\n0.000015 92\n1.126903 439\n0.000015 92\n1.138800 439\n0.000016 35\n0.788610 2431\n0.000322 334\n0.000013 56\n0.000359 47\n0.000307 117\n14.905938 2633\n0.000312 92\n11.998427 440\n0.000018 92\n1.691789 440\n0.000015 92\n1.702957 441\n0.000015 92\n2.578787 438\n0.000014 92\n1.738409 439\n0.000042 92\n1.758691 438\n0.000015 92\n1.783587 439\n0.000016 92\n1.791772 439\n0.000015 92\n1.810286 439\n0.000015 92\n2.736298 439\n0.000015 92\n1.879689 439\n0.000015 92\n1.879079 439\n0.000015 92\n1.896183 439\n0.000044 92\n1.932282 439\n0.000015 92\n2.939334 439\n0.000015 92\n1.983769 439\n0.000015 92\n2.009734 439\n0.000015 92\n2.040659 442\n0.000014 92\n2.067239 440\n0.000015 92\n2.106781 440\n0.000015 91\n3.213693 440\n0.000042 92\n2.180102 439\n0.000014 92\n2.209108 438\n0.000015 92\n2.269588 438\n0.000016 92\n2.285698 438\n0.000014 92\n3.495357 438\n0.000015 92\n2.372547 439\n0.000015 92\n2.402674 439\n0.000015 91\n2.414592 442\n0.000016 92\n2.416724 442\n0.000014 92\n2.442373 442\n0.000016 92\n3.674850 442\n0.000015 92\n2.456355 442\n0.000015 92\n2.453924 438\n0.000014 92\n2.466500 439\n0.000014 92\n2.480567 439\n0.000043 35\n1.111118 2381\n0.000263 334\n0.000013 56\n0.000911 47\n0.000526 1126\n28.003296 1556\n0.000021 91\n21.114254 438\n0.000018 92\n3.001031 441\n0.000014 91\n4.586751 437\n0.000015 92\n3.091950 437\n0.000016 92\n3.145494 437\n0.000047 91\n3.162890 438\n0.000014 92\n3.219330 440\n0.000275 92\n3.252666 440\n0.000015 92\n4.878840 441\n0.000015 92\n3.269142 441\n0.000015 92\n3.270187 438\n0.000014 531\n3.291569 92\n3.311652 439\n0.000039 92\n3.345206 439\n0.000015 92\n5.005947 439\n0.000015 92\n3.344657 439\n0.000015 92\n3.373223 439\n0.000015 91\n3.390967 439\n0.000016 92\n3.404237 438\n0.000016 92\n3.423194 438\n0.000015 92\n5.179937 438\n0.000041 92\n3.504233 438\n0.000016 92\n3.531336 438\n0.000015 92\n3.525892 439\n0.000015 92\n3.544157 439\n0.000015 92\n5.357104 439\n0.000015 91\n3.597137 439\n0.000014 92\n3.619643 441\n0.000044 92\n3.657032 444\n0.000015 92\n3.699941 442\n0.000014 92\n3.732297 442\n0.000014 92\n5.645458 439\n0.000014 92\n3.793775 440\n0.000015 8\n3.691143 96\n0.000608 3\n0.000179 1\n0.000011 1\n0.000104 1\n0.000010 1\n0.000097 1\n0.000065 1\n0.000010 1\n0.000094 1\n0.000009 2\n0.000111 1\n0.000060 1\n0.000093 1\n0.000010 1\n0.000060 1\n0.000095 1\n0.000010 1\n0.000101 1\n0.000010 1\n0.000100 1\n0.000060 1\n0.000054 1\n0.000051 1\n0.000071 1\n0.000055 1\n0.000052 1\n0.000071 1\n0.000054 1\n0.000091 1\n0.000011 1\n0.000092 4\n0.000054 1\n0.000011 3\n0.000065 1\n0.000010 5\n0.000098 3\n0.000064 4\n0.000093 2\n0.000054 4\n0.000095 3\n0.000099 1\n0.000011 1\n0.000052 1\n0.000010 3\n0.000094 1\n0.000054 1\n0.000010 2\n0.000092 1\n0.000009 1\n0.000054 1\n0.000010 2\n0.000093 1\n0.000011 2\n0.000092 1\n0.000053 1\n0.000010 2\n0.000091 1\n0.000053 1\n0.000010 2\n0.000092 1\n0.000054 2\n0.000094 1\n0.000010 1\n0.000052 2\n0.000092 1\n0.000075 1\n0.000011 2\n0.000100 2\n0.000094 1\n0.000052 2\n0.000091 1\n0.000052 1\n0.000050 1\n0.000093 1\n0.000010 2\n0.000104 1\n0.000052 1\n0.000094 1\n0.000010 1\n0.000093 3\n0.000010 2\n0.000055 4\n0.000093 97\n0.000676 2\n4.543404 20\n0.561424 23\n1.824113 20\n0.376108 2\n0.255381 36\n0.309729 72\n0.000013 4095\n0.000383 4095\n0.000121 4095\n0.000044 2\n0.000016 256\n0.000020 2048\n0.000041 2048\n0.000040 102\n0.000018 2\n0.000024 96\n0.018615 18\n1.628730 23\n0.162994 130\n2.208747 1\n1.141327 1\n0.120296 1\n0.151759 1\n0.095559 1\n0.072453 1\n0.335988 4\n0.376203 2\n2.073186 24\n0.014645 7\n0.045272 44\n0.000033 24\n0.000607 7\n0.001513 188\n0.008062 63\n0.006803 43\n0.001519 87\n0.000746 43\n0.002167 73\n0.000751 57\n0.003365 106\n0.026709 124\n0.003422 344\n0.000511 170\n0.002872 130\n0.002729 5\n0.020350 123\n0.000749 68\n0.000011 266\n0.000194 103\n0.010173 35\n0.000021 188\n0.015372 1505\n0.000219 12\n8.660874 131\n0.257109 565\n1.188538 64\n1.261556 28\n0.039314 28\n0.241036 3\n0.110903 28\n0.256075 3\n0.071846 28\n0.144109 28\n0.072136 28\n0.064060 28\n0.055765 28\n0.151993 28\n0.070077 28\n0.031743 3\n0.088438 28\n0.154154 28\n0.191451 3\n0.080483 28\n0.151943 28\n0.135709 28\n0.183960 28\n0.112392 28\n0.176705 28\n0.135588 28\n0.175634 3\n0.055939 28\n0.111432 28\n0.080000 28\n0.145039 28\n0.167512 28\n0.048284 2\n0.143780 28\n0.288046 28\n0.143874 28\n0.039858 28\n0.248263 28\n0.071588 3\n0.088082 28\n0.135870 28\n0.160438 4\n0.399679 28\n0.208015 28\n0.104079 3\n0.120246 28\n0.232086 28\n0.111770 28\n0.119923 28\n0.143774 28\n0.120425 28\n0.055638 28\n0.304402 3\n0.303979 28\n0.143857 28\n0.079724 3\n0.080286 28\n0.120145 28\n0.720073 28\n0.232036 28\n0.111908 3\n0.103442 28\n0.128403 28\n0.047874 28\n0.067987 28\n0.108028 3\n0.055917 28\n0.200346 28\n0.144507 28\n0.071254 28\n0.144006 28\n0.096069 28\n0.280251 3\n0.191852 28\n0.184069 28\n0.415871 1\n0.056153 28\n0.233150 28\n0.126613 28\n0.056880 28\n0.063020 28\n0.160148 63\n0.224538 28\n0.175376 28\n0.136039 28\n0.063865 28\n0.143752 28\n0.088562 3\n0.072177 28\n0.111530 28\n0.208322 3\n0.087397 28\n0.376442 28\n0.199943 28\n0.160190 3\n0.079718 28\n0.135979 2\n0.047765 28\n0.088734 28\n0.063611 28\n0.048185 28\n0.159633 28\n0.007958 3\n0.104328 28\n0.456001 28\n0.120398 28\n0.095487 28\n0.039961 3\n0.096191 28\n0.111983 28\n0.080146 28\n0.063805 3\n0.063963 28\n0.136109 28\n0.136129 28\n0.279988 28\n0.127788 28\n0.279901 28\n0.063959 28\n0.104034 3\n0.072150 28\n0.144075 28\n0.111975 3\n0.120070 28\n0.087960 28\n0.111921 28\n0.064008 3\n0.047780 28\n0.120863 28\n0.135690 28\n0.023530 28\n0.176311 28\n0.055953 28\n0.055784 3\n0.104273 28\n0.055911 28\n0.168156 2\n0.375894 28\n0.095708 28\n0.080282 28\n0.104214 28\n0.176181 28\n0.071573 3\n0.072246 28\n0.055424 28\n0.056186 28\n0.112429 3\n0.095505 28\n0.079919 28\n0.096452 28\n0.087680 28\n0.144301 28\n0.192099 2\n0.087297 28\n0.112601 28\n0.207961 28\n0.063594 28\n0.152350 28\n0.063910 28\n0.191871 28\n0.640686 63\n14.079607 63\n0.111917 64\n0.128117 63\n0.272495 28\n1.327342 28\n0.239586 28\n0.104216 28\n0.007742 3\n0.088236 28\n0.152099 28\n0.184004 28\n0.111676 4\n0.376192 28\n0.128137 4\n0.240000 4\n0.103765 28\n0.120180 28\n0.127631 28\n0.112419 28\n0.047504 28\n0.112243 3\n0.136032 28\n0.064007 28\n0.063908 28\n0.568365 28\n0.136171 28\n0.031616 3\n0.119890 28\n0.144158 28\n0.168701 28\n0.102870 28\n0.288296 2\n0.071811 1\n0.344342 28\n0.167849 1\n0.080356 28\n0.119705 28\n0.048601 28\n0.175312 28\n0.055799 28\n0.128606 28\n0.087908 28\n0.159655 1\n0.139771 28\n0.029810 28\n0.134696 3\n0.031737 28\n0.192124 28\n0.120252 28\n0.023706 2\n0.103855 28\n0.040024 3\n0.056000 28\n0.200428 28\n0.096029 28\n0.247810 3\n0.104406 28\n0.351730 28\n0.111519 28\n0.128206 28\n0.120148 28\n0.055778 28\n0.456124 64\n0.320979 65\n0.119490 64\n0.103941 64\n0.304753 3\n0.198869 28\n0.471859 3\n0.087767 28\n2.696450 28\n0.167964 28\n0.032144 28\n0.119570 28\n0.088217 28\n0.055856 3\n0.095992 28\n0.176176 28\n0.143835 28\n0.144052 28\n0.224020 28\n0.648350 1\n0.095578 28\n0.112228 28\n0.072063 28\n0.087783 28\n0.088064 3\n0.080135 28\n0.111807 2\n0.112309 28\n0.071671 28\n0.120100 28\n0.079849 28\n0.079966 3\n0.039935 28\n0.120281 28\n0.071916 28\n0.169001 28\n0.134983 28\n0.047885 28\n0.071701 61\n0.185099 3\n0.143554 3\n0.303999 1\n0.671810 28\n0.247989 3\n0.112310 28\n0.119680 8\n0.344219 28\n0.199929 28\n0.167888 28\n0.071961 28\n0.023604 28\n0.112494 28\n0.055875 28\n0.127870 3\n0.056083 28\n0.120310 28\n0.048009 3\n0.128148 28\n0.064384 28\n0.095247 28\n0.224283 28\n0.057923 28\n0.085212 28\n0.128572 3\n0.240008 28\n0.167964 28\n0.056024 1\n0.055733 28\n0.039986 28\n0.104320 28\n0.031977 3\n0.128212 28\n0.175996 28\n0.119534 28\n0.120187 28\n0.144107 3\n0.256501 28\n2.351909 28\n0.071360 3\n0.104161 28\n0.079682 28\n0.112241 28\n0.072028 1\n0.112418 28\n2.415845 28\n0.079887 28\n0.248046 28\n0.103468 28\n0.232371 3\n0.240109 28\n0.248041 28\n0.104076 28\n0.079903 28\n0.224282 28\n0.048070 4\n0.359758 4\n0.120001 28\n0.095885 28\n0.143993 28\n0.023532 28\n0.160410 28\n0.087766 28\n0.015906 28\n0.087854 64\n0.248886 3\n0.119779 28\n0.223731 3\n0.159892 28\n1.720058 28\n0.121051 28\n0.087233 2\n0.095994 28\n0.079675 28\n0.048109 28\n0.112006 28\n0.088104 3\n0.064143 28\n0.103620 28\n0.032109 28\n0.112464 28\n0.144468 28\n0.087428 28\n0.119723 28\n0.040049 3\n0.159858 28\n0.352013 28\n0.047987 28\n0.352088 1\n0.127944 28\n0.167962 28\n0.079989 28\n0.072094 28\n0.055869 28\n0.136138 28\n0.047991 28\n0.664351 1\n0.063397 28\n0.072520 28\n0.111814 28\n0.087958 28\n0.096284 3\n0.096021 28\n0.143385 2\n0.200548 28\n0.263771 28\n0.103630 28\n0.048237 3\n0.096362 28\n0.112002 28\n0.119868 28\n0.191768 28\n0.024070 28\n0.031631 3\n0.088540 28\n0.143914 28\n0.079923 28\n0.120322 28\n0.079550 28\n0.008521 28\n0.007678 28\n0.344196 4\n0.253674 4\n0.098050 4\n0.136274 28\n0.056599 28\n0.183493 1\n0.047896 28\n0.144055 28\n0.071958 3\n0.079782 28\n0.136191 28\n0.199979 28\n0.071934 28\n0.135927 28\n0.144238 28\n0.071775 28\n0.416283 64\n0.168261 3\n0.232001 28\n0.175459 3\n0.511673 28\n0.120033 28\n0.216662 28\n0.167737 2\n0.103480 28\n0.056486 7\n0.279884 1\n0.112113 4\n0.127838 4\n0.159616 28\n0.200629 28\n0.095841 2\n0.111941 28\n0.063930 28\n0.072208 28\n0.063713 3\n0.088193 28\n0.095886 28\n0.160314 28\n0.160042 28\n0.127980 28\n0.039653 28\n0.128346 3\n0.079983 28\n0.271854 28\n0.056134 28\n0.079614 28\n0.072300 28\n0.151906 4\n0.311918 4\n0.136175 4\n0.151813 4\n0.144369 8\n0.119303 28\n1.120357 28\n0.087910 28\n0.088251 3\n0.120009 28\n0.192049 28\n0.111704 28\n0.120118 28\n0.144194 3\n0.047959 28\n0.063934 28\n0.071927 28\n0.160151 28\n0.103922 28\n0.096176 28\n0.151999 28\n0.087577 28\n0.080094 28\n0.047869 3\n0.064034 28\n0.152340 28\n0.023720 1\n0.136189 28\n0.016072 3\n0.087906 28\n0.136041 28\n0.095646 28\n0.208169 28\n0.071765 2\n0.120584 28\n0.640002 28\n0.167795 3\n0.152210 28\n0.151943 3\n0.111775 28\n0.120185 28\n0.159900 28\n0.128028 28\n0.104047 28\n0.047688 28\n0.080202 28\n0.352201 28\n0.191894 4\n0.264016 4\n0.103939 3\n0.047790 28\n0.168476 28\n0.431739 28\n0.095714 28\n0.088120 28\n0.224235 4\n0.280161 4\n0.111522 28\n0.160523 28\n0.103656 28\n0.087902 3\n0.072369 28\n0.055929 28\n0.079832 28\n0.111829 3\n0.080038 28\n0.264106 28\n0.128357 28\n0.199806 4\n0.367861 28\n0.216233 28\n0.031629 28\n0.104234 28\n0.208294 28\n0.167785 28\n0.096126 28\n0.192315 64\n0.479775 3\n0.279908 3\n0.143630 3\n0.160271 28\n0.183694 28\n0.072128 3\n0.223821 28\n0.088010 28\n0.320215 28\n0.063847 4\n0.376131 4\n0.111891 28\n0.103920 28\n0.015984 28\n0.137249 28\n0.191061 3\n0.143867 28\n0.063985 28\n0.111744 2\n0.032257 28\n0.215969 3\n0.063984 28\n0.168171 28\n0.079499 28\n0.128368 28\n0.071802 28\n0.112303 28\n0.103683 28\n0.128377 3\n0.071833 28\n0.135873 28\n0.200126 28\n0.144313 28\n0.104386 3\n0.047046 28\n0.080419 28\n0.103996 28\n0.112415 28\n0.135494 28\n0.064072 28\n0.039675 3\n0.096430 28\n0.079605 28\n0.096254 28\n0.071994 28\n0.023496 3\n0.096304 28\n0.136335 28\n0.143806 28\n0.079687 3\n0.087816 28\n0.160554 28\n0.127998 28\n0.040033 28\n0.103577 3\n0.064286 28\n0.143733 28\n0.007977 28\n0.128435 28\n0.095454 28\n0.040307 4\n0.280386 4\n0.127631 4\n0.120215 4\n0.136607 8\n0.127059 28\n0.168053 28\n0.063890 28\n0.015762 28\n0.120491 28\n0.023934 4\n0.576220 4\n0.103944 28\n0.088344 28\n0.023114 66\n0.186785 69\n0.269662 64\n0.233533 64\n0.127151 64\n0.111899 64\n0.369297 28\n0.270251 28\n0.167827 28\n0.063634 3\n0.096162 28\n0.152405 28\n0.135917 28\n0.015620 28\n0.112243 28\n0.024011 3\n0.112505 28\n0.399636 28\n0.079816 28\n0.088243 28\n0.103650 28\n0.144109 1\n0.176059 28\n0.103992 3\n0.136054 28\n0.071754 28\n0.040351 28\n0.031676 28\n0.072233 28\n0.103901 28\n0.200994 3\n0.039019 28\n0.064006 28\n0.056246 28\n0.079384 28\n0.096335 28\n0.047884 28\n0.184472 1\n0.087558 28\n0.087996 28\n0.112070 3\n0.091023 28\n0.028947 28\n0.120084 28\n0.072642 2\n0.103633 28\n0.015969 28\n0.127702 28\n0.095932 28\n0.152465 28\n0.031510 28\n0.048122 3\n0.119469 28\n0.040361 28\n0.128508 3\n0.055612 28\n0.304313 28\n0.128002 28\n0.023830 3\n0.143899 28\n1.176146 2\n0.280310 28\n0.415833 28\n0.119786 28\n0.015608 28\n0.071975 3\n0.208667 28\n0.295681 28\n0.240533 28\n0.031214 28\n0.064196 28\n0.392234 28\n0.168467 28\n0.031079 3\n0.104395 28\n0.120727 28\n0.135422 2\n0.031844 28\n0.039623 28\n0.112233 28\n0.040215 25\n0.272732 74\n0.000103 28\n0.087133 28\n0.120136 28\n0.216228 28\n0.135574 28\n0.064201 3\n0.159626 28\n0.248076 28\n0.096047 28\n0.200029 28\n0.111783 3\n0.136304 28\n0.144190 28\n0.055670 3\n0.087718 28\n0.056309 28\n0.127913 28\n0.064126 3\n0.095590 28\n0.032488 28\n0.087729 28\n0.072204 28\n0.031572 28\n0.128580 28\n0.039798 28\n0.064064 28\n0.136160 3\n0.135950 28\n0.047789 28\n0.096430 28\n0.041492 28\n0.046335 1\n0.127763 28\n0.487951 28\n0.103935 28\n0.024433 3\n0.128257 28\n1.303592 28\n0.112141 28\n0.127986 1\n0.055436 28\n0.088214 28\n0.120027 3\n0.096230 28\n0.080186 28\n0.087257 3\n0.192341 1\n0.431958 28\n0.088180 2\n0.151857 28\n7.320289 28\n0.047717 28\n0.071811 28\n0.208453 4\n0.288049 28\n0.184061 28\n0.055592 28\n0.120106 28\n0.128096 28\n0.024063 28\n0.087603 28\n0.040069 28\n0.176183 3\n0.056165 28\n0.055837 8\n0.720182 28\n0.391870 28\n0.071697 28\n0.104272 2\n0.072160 28\n0.103715 28\n0.128169 28\n0.240221 3\n0.135932 28\n0.519726 28\n0.047879 28\n0.184379 28\n0.055555 28\n0.048007 3\n0.064161 28\n0.168375 28\n0.215595 28\n0.056076 99\n0.184487 28\n0.183490 28\n0.152220 28\n0.103646 28\n0.112215 28\n0.064128 3\n0.055482 28\n0.152402 28\n0.071852 28\n0.104136 28\n0.047948 28\n0.111952 3\n0.096228 28\n0.192120 3\n0.135738 28\n0.527654 28\n0.056102 28\n0.055897 28\n0.167997 28\n0.048340 3\n0.120243 28\n0.111592 28\n0.136126 28\n0.047763 28\n0.039809 28\n0.279737 3\n0.200691 28\n0.080170 28\n0.144007 28\n0.072055 28\n0.285660 28\n0.072085 28\n0.416016 25\n0.714547 74\n0.000038 70\n0.328146 3\n0.767417 1\n0.527726 70\n0.112216 65\n1.522074 4\n0.222166 28\n0.847985 99\n0.264554 70\n0.119662 61\n0.143685 456\n0.177771 68\n0.000084 99\n0.502997 99\n0.183475 99\n0.383656 99\n0.159994 99\n0.160144 99\n0.143931 3\n0.863845 3\n0.120692 3\n0.135401 28\n0.655812 28\n0.151976 28\n0.159996 28\n0.152169 28\n0.151821 28\n0.136022 28\n0.144002 28\n0.120081 28\n0.103520 28\n0.176561 99\n0.792270 3\n0.247732 3\n0.163526 3\n0.124568 3\n0.159719 1\n0.328253 28\n0.183924 28\n0.167895 28\n0.184012 2\n0.128067 28\n0.464004 99\n1.712210 3\n0.383703 3\n0.264050 3\n0.184064 3\n1.199956 1\n0.424122 28\n0.527694 28\n0.128089 28\n0.161554 2\n0.182483 1\n0.632482 3\n0.175606 3\n0.223823 1\n0.696033 28\n0.312553 28\n0.551483 28\n0.305696 28\n0.430360 99\n0.352324 3\n0.111208 3\n0.160449 3\n0.159948 28\n0.328087 28\n0.255697 28\n0.280210 28\n0.063662 1\n0.352486 3\n0.183824 28\n0.320236 28\n0.391917 28\n0.119746 28\n0.152130 99\n0.944485 3\n0.127561 3\n0.136159 3\n0.119980 28\n0.184153 28\n0.151839 28\n0.160041 28\n0.159860 28\n0.151855 28\n0.160210 28\n0.152178 28\n0.151671 28\n0.144036 28\n0.135963 99\n1.280447 99\n0.144068 99\n0.144075 99\n0.143833 3\n0.167552 3\n0.159902 3\n0.128009 28\n0.680126 28\n0.143975 28\n0.151898 28\n0.152084 28\n0.151997 28\n0.152087 28\n0.151881 28\n0.143872 28\n0.144057 28\n0.144100 99\n0.361590 100\n0.350899 70\n0.231918 3\n0.151682 3\n0.160041 3\n0.136311 28\n0.647965 28\n0.135824 28\n0.160089 28\n0.157441 28\n0.160006 28\n0.160059 28\n0.152065 28\n0.162331 28\n0.167766 28\n0.160326 64\n0.664655 65\n0.343027 65\n0.167963 64\n0.175955 64\n0.176145 64\n0.159992 64\n0.608382 3\n0.263585 3\n0.152239 28\n1.136114 28\n0.183557 28\n0.096027 28\n0.120279 28\n0.039541 28\n0.440642 64\n0.297022 3\n0.198638 3\n0.151887 3\n0.168356 3\n0.143708 1\n0.424159 28\n0.175953 28\n0.359964 28\n0.048140 28\n0.383923 4\n0.376035 2\n0.072042 28\n0.137426 28\n0.374496 4\n0.408066 28\n0.192008 64\n0.841196 3\n0.454727 3\n0.151878 3\n0.168114 1\n1.663898 1\n0.144054 1\n0.183979 116\n1.000483 3\n0.159435 3\n0.119981 65\n0.144243 28\n1.863987 28\n0.167966 28\n0.287799 28\n0.096180 28\n0.264004 28\n0.087722 28\n0.112236 28\n0.127887 116\n0.320511 3\n0.047586 3\n0.128102 3\n0.167879 28\n2.023957 28\n0.232130 3\n0.160123 28\n1.031786 28\n0.232036 28\n0.384025 25\n0.656519 92\n0.000106 3\n0.159573 64\n0.279872 3\n0.168688 64\n0.592649 61\n0.158435 154\n0.328763 73\n0.000069 64\n0.367202 64\n0.183978 63\n0.183710 64\n2.192003 64\n0.160133 3\n0.552214 3\n0.168075 3\n0.144007 28\n0.863806 28\n0.192140 28\n0.120176 28\n0.095957 28\n0.199945 4\n0.863962 28\n0.200028 28\n0.055993 28\n0.055589 28\n0.128210 99\n1.240593 3\n0.111758 3\n0.175610 3\n0.344338 28\n0.311965 28\n0.128328 28\n0.039576 2\n0.248065 28\n0.991957 28\n1.755462 64\n0.605072 3\n0.327332 3\n0.144196 3\n0.135898 28\n0.680097 28\n0.248003 3\n0.271942 28\n2.960249 28\n0.135730 28\n0.615978 65\n0.272562 65\n0.167271 65\n0.167896 63\n0.160012 65\n0.168334 64\n0.160439 63\n0.159777 64\n0.151448 64\n0.167845 64\n0.144211 64\n0.144003 500\n0.225692 110\n0.000113 4\n0.877873 3\n0.417003 2\n0.223307 1\n0.168143 64\n0.800903 3\n0.111189 3\n0.144008 3\n0.144044 3\n0.135974 3\n0.135795 3\n0.136248 28\n0.319491 28\n0.192385 28\n0.087821 65\n0.128118 28\n0.055923 28\n0.176421 28\n0.055482 3\n0.064118 28\n0.079902 28\n0.184480 28\n0.168029 28\n0.223743 28\n0.087537 3\n0.096362 28\n0.152262 28\n0.783984 2\n0.376053 28\n0.239952 28\n0.103777 28\n0.144047 28\n0.016044 28\n0.071908 28\n0.120338 3\n0.111729 28\n0.095656 28\n0.056426 28\n0.040004 66\n0.144260 28\n0.007541 28\n0.544341 28\n0.087431 28\n0.032207 28\n0.160207 28\n0.047937 28\n0.168275 28\n1.935778 3\n0.081389 28\n0.158633 28\n0.080173 28\n0.127933 2\n0.039921 28\n0.095739 28\n0.096178 4\n0.335926 7\n0.112485 1\n0.143823 4\n0.136056 4\n0.135590 28\n0.192309 28\n0.103659 2\n0.095907 28\n0.072341 28\n0.056040 28\n0.111796 3\n0.080040 28\n0.056050 28\n0.047773 28\n0.152315 28\n0.063832 28\n0.104137 3\n0.095998 28\n0.111913 66\n0.096040 28\n0.071872 3\n0.087809 28\n0.120212 28\n0.080211 28\n0.112073 28\n0.015572 28\n0.168131 65\n0.361222 3\n0.151099 1\n0.352040 1\n0.135837 1\n0.135829 28\n0.168148 28\n0.240261 28\n0.168929 28\n0.174886 28\n0.199933 4\n0.448115 28\n0.063768 28\n0.208269 3\n0.167793 1\n0.224112 4\n0.095923 28\n0.224004 28\n0.071686 3\n0.112628 28\n0.103431 28\n0.072296 28\n0.079854 28\n0.121433 28\n0.217074 65\n0.415046 65\n0.174101 65\n0.168027 3\n0.280567 3\n0.151554 3\n0.144230 3\n0.136137 3\n0.128000 28\n0.367809 28\n0.149757 66\n0.048179 28\n0.103942 3\n0.098211 28\n0.103669 28\n0.072498 3\n0.088063 28\n0.063496 28\n0.104005 3\n0.200215 1\n0.304021 28\n0.079740 3\n0.117997 28\n0.562527 28\n0.063697 28\n0.071727 28\n0.104551 28\n0.071636 28\n0.087960 28\n0.056252 28\n0.031492 28\n0.112412 28\n0.031841 28\n0.152277 3\n0.039971 28\n0.063668 28\n0.088112 28\n0.088002 3\n0.065052 28\n0.070818 28\n0.096266 66\n0.080072 3\n0.088091 28\n0.151918 28\n0.168186 28\n0.119737 28\n0.104298 3\n0.127864 28\n0.295923 8\n0.296070 28\n0.215905 28\n0.183971 28\n0.072063 2\n0.055861 28\n0.103722 28\n0.080553 28\n0.080134 3\n0.087228 28\n0.128331 28\n0.159796 28\n0.208580 28\n0.095712 28\n0.144460 28\n0.119382 28\n0.087915 28\n0.072197 28\n0.176195 3\n0.088292 28\n0.079704 28\n0.168013 28\n0.064008 66\n0.184688 28\n0.039167 28\n0.111843 28\n0.056183 28\n0.048068 65\n0.457580 3\n0.094176 3\n0.168302 3\n0.143910 3\n0.144021 3\n0.127946 28\n0.264022 28\n0.088099 28\n0.152016 28\n0.064345 64\n0.296940 65\n0.190124 65\n0.160259 65\n0.312238 65\n0.143409 65\n0.136109 247\n0.184891 78\n0.000047 65\n0.343339 3\n0.344351 3\n0.095661 3\n0.159889 28\n0.648119 28\n0.168241 28\n0.087823 28\n0.063650 3\n0.120313 28\n0.112152 28\n0.048053 3\n0.111956 28\n0.063689 28\n0.087757 28\n0.080394 3\n0.104594 28\n0.119485 28\n0.056058 28\n0.047717 28\n0.128339 28\n0.136041 28\n0.160001 28\n0.063746 28\n0.007983 4\n0.400088 4\n0.088046 4\n0.135981 28\n0.176419 28\n0.079689 28\n0.015848 28\n0.112449 28\n0.023808 28\n0.151988 3\n0.055766 28\n0.048004 28\n0.063567 28\n0.112434 3\n0.079888 28\n0.063852 28\n0.096079 28\n0.088171 3\n0.096259 28\n0.111989 28\n0.071908 28\n0.119492 28\n0.128365 3\n0.080058 28\n0.176022 28\n0.216887 28\n0.078995 2\n0.071754 28\n0.368585 28\n0.103717 28\n0.104058 28\n0.112101 28\n0.063768 28\n0.104809 28\n0.062754 28\n0.184364 28\n0.215963 3\n0.056343 28\n0.095683 28\n0.088132 28\n0.072104 28\n0.103931 3\n0.152024 28\n0.096026 28\n0.136748 28\n0.086908 28\n0.064240 28\n0.080168 28\n0.184215 28\n0.063757 28\n0.136100 65\n2.880689 65\n0.182927 65\n0.175758 64\n0.160172 64\n0.160084 28\n0.976418 3\n0.047504 28\n0.112072 28\n0.047766 28\n0.047827 28\n0.128333 28\n0.072127 1\n0.184115 28\n0.448201 28\n0.127785 28\n0.056045 28\n0.039722 28\n0.144100 28\n0.055820 2\n0.104291 28\n0.079754 28\n0.087999 28\n0.192235 28\n0.087856 28\n0.063900 28\n0.095902 3\n0.112342 28\n0.120021 28\n0.111816 28\n0.064249 28\n0.119424 28\n0.136510 28\n0.103537 28\n0.152358 28\n1.384089 2\n0.079995 28\n0.296109 28\n0.087412 28\n0.152411 28\n0.120047 28\n0.072042 4\n0.247929 4\n0.120052 4\n0.136049 4\n0.111968 28\n0.216001 28\n0.119823 28\n0.064080 28\n0.080535 3\n0.103506 28\n0.152217 28\n0.111967 28\n0.087923 3\n0.063793 28\n0.144233 28\n0.184010 28\n0.119994 3\n0.096117 28\n0.080001 28\n0.111937 28\n0.055566 3\n0.112336 28\n0.087561 28\n0.080190 28\n0.128254 28\n0.031957 28\n0.071918 2\n0.112221 28\n0.039602 28\n0.103890 3\n0.064301 28\n0.072188 28\n0.055809 28\n0.112288 28\n0.119870 28\n0.104509 1\n0.055552 28\n0.055710 28\n0.152314 28\n0.047756 4\n0.256326 4\n0.103761 28\n0.127948 28\n0.087920 28\n0.152154 28\n0.095664 3\n0.071848 28\n0.176528 28\n0.064113 28\n0.071877 28\n0.160202 28\n0.047934 28\n0.055610 3\n0.152186 1\n0.439919 64\n0.184814 28\n0.191421 28\n0.055885 3\n0.112043 28\n0.081467 28\n0.080451 28\n0.166597 28\n0.119554 28\n0.184048 28\n0.079478 28\n0.288621 4\n0.263696 28\n0.064297 28\n0.159681 28\n0.104195 3\n0.111805 28\n0.120237 28\n0.151734 28\n0.119960 28\n0.120581 28\n0.047563 3\n0.096196 28\n0.263764 28\n0.088290 28\n0.071684 28\n0.103773 28\n0.096201 28\n0.063980 28\n0.183933 28\n0.208337 28\n0.176611 28\n0.039171 28\n0.047914 28\n0.143865 88\n6.687865 186\n5.938130 28\n1.023026 28\n0.198537 48\n0.130887 4\n0.750294 4\n0.119018 28\n0.303913 31\n0.162115 28\n0.381940 31\n0.135141 28\n0.560609 34\n0.162570 1\n0.343619 55\n0.105261 47\n0.012536 146\n0.023403 1405\n0.000219 447\n0.741430 589\n0.000043 301\n0.000686 69\n0.568798 876\n0.000099 292\n0.000793 102\n4.612175 29\n0.000036 1\n0.966548 54\n0.001001 23\n0.000248 12\n0.636438 110\n0.195573 29\n0.000037 28\n7.669246 28\n0.311332 32\n0.156515 1\n0.310005 49\n0.045226 1690\n0.000444 571\n0.524314 719\n0.000160 274\n0.000494 533\n0.170582 593\n0.000035 175\n0.000035 396\n0.000957 165\n0.156161 1399\n0.003339 14\n0.152619 914\n0.000047 587\n0.000543 186\n0.146172 701\n0.000053 257\n0.000075 347\n0.150905 588\n0.000040 168\n0.000026 277\n0.000783 1\n0.153950 1063\n0.000096 96\n0.000656 259\n0.000036 200\n0.185781 881\n0.000042 229\n0.000660 1\n0.307588 1097\n0.000051 92\n0.000518 509\n0.443856 820\n0.000043 45\n0.455526 1189\n0.000503 363\n0.434406 544\n0.000038 2\n0.000072 1\n0.000471 106\n0.000028 72\n0.000378 237\n0.000037 1\n0.485697 902\n0.000109 252\n0.000031 215\n0.000722 178\n0.000034 52\n0.458586 831\n0.000045 78\n0.000028 1\n1.120028 1418\n0.002907 64\n7.496742 64\n0.499632 64\n0.050922 65\n0.050766 64\n0.051297 99\n1.805605 946\n0.000182 368\n0.000636 535\n0.150212 537\n0.000074 341\n0.000504 685\n0.215009 738\n0.000767 5\n0.407222 927\n0.000120 446\n0.000038 896\n0.336659 309\n0.000041 5\n0.383499 955\n0.000052 281\n0.000030 153\n0.000569 4\n0.503726 1\n0.000076 50\n0.000053 1\n0.000046 60\n0.000319 1\n0.000076 556\n0.000265 1\n0.000118 118\n0.000148 1\n0.000050 127\n0.000073 201\n0.000348 100\n0.000307 1\n0.000057 60\n0.000047 1\n0.000098 31\n0.000136 1\n0.000169 142\n0.000141 5\n0.421095 955\n0.000041 269\n0.000520 102\n0.422699 968\n0.000042 37\n0.000034 2\n0.000071 183\n0.000598 107\n0.457792 830\n0.000099 719\n0.000535 6\n0.543963 965\n0.000052 417\n0.000544 396\n0.000063 5\n0.423116 956\n0.000105 29\n0.000027 3\n0.000676 383\n0.000039 964\n0.437221 464\n0.000035 39\n0.000026 375\n0.000566 984\n0.774059 308\n0.000034 264\n0.000594 64\n2.110850 64\n0.500249 64\n0.050580 64\n0.050440 64\n0.050397 64\n0.050913 64\n0.049906 64\n0.050226 64\n0.053351 62\n0.051606 339\n0.052556 629\n0.000043 325\n0.000514 64\n0.046108 64\n0.050838 64\n0.050650 64\n0.051298 64\n0.416268 64\n0.499878 64\n0.049909 64\n0.050500 65\n0.050559 61\n0.050034 131\n0.055213 1493\n0.000416 64\n0.046587 64\n0.050686 64\n0.050278 64\n0.050566 64\n0.050102 64\n0.050437 64\n0.050876 65\n0.051025 64\n0.051008 61\n0.049727 25\n0.054227 614\n0.000452 437\n0.000060 64\n0.045579 64\n0.050003 64\n0.049974 64\n0.050332 64\n0.051335 64\n0.050265 65\n0.050572 64\n0.050552 64\n0.050474 61\n0.050242 4\n0.055167 81\n0.000648 390\n0.000064 99\n0.000381 343\n0.000037 277\n0.000746 1\n0.007763 176\n0.000031 59\n0.001209 233\n0.000031 64\n0.034758 64\n0.050402 64\n0.050614 64\n0.050191 64\n0.049893 209\n1.637476 838\n0.000085 311\n0.000637 2\n0.196458 928\n0.000043 247\n0.000532 73\n0.247547 860\n0.000041 63\n0.000028 415\n0.000612 169\n0.304542 1381\n0.000486 59\n0.366430 1\n0.000495 427\n0.000198 1\n0.000247 39\n0.000168 1\n0.000197 156\n0.000168 1\n0.000205 55\n0.000164 1\n0.000193 241\n0.000177 215\n0.000376 1\n0.000199 202\n0.000153 149\n0.780809 710\n0.000048 377\n0.000099 202\n0.175839 863\n0.000047 317\n0.000576 702\n0.151460 365\n0.000081 148\n0.000611 2\n0.159263 903\n0.000418 95\n0.000031 373\n0.001540 64\n0.158002 1\n0.000799 105\n0.000359 1\n0.000307 58\n0.000845 1\n0.000341 87\n0.000247 1\n0.000280 87\n0.000668 1\n0.000343 82\n0.000278 1\n0.000347 461\n0.000760 2\n0.000512 1\n0.000251 44\n0.000230 1\n0.000262 81\n0.000228 1\n0.000264 58\n0.000404 280\n0.000048 5\n0.415370 663\n0.000047 50\n0.198447 178\n0.494300 777\n0.000037 446\n0.000299 9\n0.289857 905\n0.000122 74\n0.000029 375\n0.000639 539\n0.367289 462\n0.000039 269\n0.000536 64\n0.768615 64\n0.496999 64\n0.050532 64\n0.050604 64\n0.050094 64\n0.049719 65\n0.051012 64\n0.050019 64\n0.050887 64\n0.050681 64\n0.223864 8\n0.231154 25\n0.366729 157\n0.000040 199\n0.099564 1\n0.274179 122\n0.542430 3\n0.151065 41\n0.504176 41\n0.143657 41\n0.087756 3\n0.120327 41\n0.128256 41\n0.087612 41\n0.071967 41\n0.072319 41\n0.079915 41\n0.096221 41\n0.079658 41\n0.072217 2\n0.064087 41\n0.144283 41\n0.119978 3\n0.047822 41\n0.104121 41\n0.071864 41\n0.087893 3\n0.104389 41\n0.208767 41\n0.263103 41\n0.160610 41\n0.072315 41\n0.143176 62\n0.576477 3\n0.476846 3\n0.464383 115\n6.888399 109\n0.033261 65\n0.012122 18\n4.961425 103\n0.315541 29\n0.000041 43\n0.404843 1287\n0.436123 63\n1.853382 63\n0.463389 63\n0.500666 63\n0.050961 63\n0.049875 63\n0.050187 63\n0.050277 64\n0.050485 64\n0.050143 64\n0.157089 65\n0.176133 8\n0.263503 1\n0.135186 1\n0.500478 1\n0.050014 1\n0.050777 1\n0.051102 1\n0.051226 1\n0.050651 76\n1.957962 42\n0.036395 3\n0.443946 3\n0.183856 38\n0.460770 36\n0.143807 34\n0.288011 34\n0.007487 116\n2.381335 110\n0.030033 65\n0.011250 74\n3.026025 65\n0.147674 65\n0.192631 1\n0.335106 1\n0.499767 1\n0.050499 1\n0.049450 1\n0.049974 1\n0.050166 1\n0.051560 1\n0.050406 1\n0.050577 1\n0.050883 1\n0.050089 1\n0.050653 1\n0.051979 1\n0.049422 1\n0.050292 1\n0.050305 1\n0.050422 1\n0.050445 1\n0.050903 1\n0.051084 1\n0.051061 1\n0.049247 1\n0.050675 1\n0.050488 1\n0.050582 1\n0.050829 1\n0.050741 1\n0.050447 1\n0.051046 1\n0.167788 93\n0.808937 59\n0.000153 65\n0.275504 1\n0.043167 122\n0.276231 99\n0.610202 796\n0.000139 235\n0.000038 56\n0.678425 535\n0.000047 77\n0.000031 427\n1.272047 530\n0.000035 72\n0.000040 279\n1.003133 530\n0.000040 359\n0.000285 64\n0.452343 64\n0.496541 64\n0.049422 64\n0.050112 64\n0.051249 3\n0.244004 3\n0.499954 3\n0.049649 3\n0.050110 3\n0.050362 3\n0.050622 2\n0.051211 1\n0.175860 122\n0.427779 116\n0.998396 110\n0.041038 65\n0.010666 181\n4.515388 5\n0.630075 11\n0.161378 20\n0.160523 2\n0.533814 36\n0.309493 49\n0.000016 4\n0.000013 19\n0.000011 4095\n0.000322 4095\n0.000307 4095\n0.000127 2306\n0.000037 2048\n0.000046 102\n0.000019 2\n0.000027 96\n0.018802 18\n1.047470 26\n0.129481 11\n0.767904 1615\n0.418098 6\n0.634893 471\n0.000036 250\n0.000095 616\n0.000661 97\n1.581823 29\n0.000122 41\n0.555625 42\n4.055979 40\n0.143794 38\n0.191990 36\n0.144137 1\n0.914159 54\n0.003385 28\n0.000040 10\n0.610108 107\n0.197106 29\n0.000036 28\n0.795368 28\n0.128047 32\n0.213259 1\n0.292619 49\n0.034518 1202\n0.000532 442\n0.542541 668\n0.000034 360\n0.000476 437\n0.207064 511\n0.000106 608\n0.000527 907\n0.432943 452\n0.000038 290\n0.000595 95\n1.005528 810\n0.000048 422\n0.000511 1\n0.569336 334\n0.000379 1\n0.000251 165\n0.000241 1\n0.000292 313\n0.000173 1\n0.000218 43\n0.000162 1\n0.000192 62\n0.000173 125\n0.000424 1\n0.000198 88\n0.000147 1\n0.000182 87\n0.000146 1\n0.000183 85\n0.000149 1\n0.000184 61\n0.000145 1\n0.000179 64\n0.000148 2\n0.000304 1\n0.000149 70\n0.000146 1\n0.000212 74\n0.000159 1\n0.000181 53\n0.000144 1\n0.000177 100\n0.000150 1\n0.654296 995\n0.000046 101\n0.000077 184\n0.000569 62\n0.487326 63\n0.143651 63\n0.167890 63\n0.184393 66\n0.695383 111\n0.361046 105\n0.043616 63\n0.013323 44\n0.517252 2\n0.000032 35\n0.000081 2\n0.000378 96\n0.001512 2\n0.301639 20\n0.113660 2\n0.343508 36\n0.331339 7\n0.000012 1341\n0.017619 186\n0.037945 7\n2.444859 52\n0.000035 96\n0.054213 18\n0.512463 23\n0.233997 33\n0.617189 125\n0.001296 981\n0.000436 417\n0.000295 101\n12.798886 29\n0.000042 43\n0.572991 1458\n0.461153 64\n0.794575 9\n0.425892 876\n0.000051 354\n0.000586 62\n1.516317 63\n0.250143 64\n0.255815 7\n0.768041 1\n0.088107 1\n0.500367 1\n0.049888 1\n0.051415 1\n0.050595 1\n0.051245 1\n0.050383 1\n0.357076 74\n0.597663 42\n0.132956 40\n0.447960 40\n0.072145 3\n0.309448 3\n2.568229 36\n1.010529 34\n0.047802 115\n0.606876 109\n0.036321 64\n0.007589 395\n0.610016 1\n0.000074 41\n0.000050 1\n0.000044 132\n0.000051 1\n0.000047 48\n0.000047 1\n0.000061 42\n0.000046 1\n0.000044 85\n0.000046 1\n0.000043 93\n0.000059 2\n0.000178 1\n0.000062 1\n0.000049 190\n0.000069 200\n2.116528 122\n0.000046 989\n0.698017 279\n0.466111 574\n0.000039 359\n0.000528 65\n2.734511 176\n0.448925 2\n0.270252 20\n0.105404 2\n0.295570 36\n0.307942 7\n0.000012 1573\n0.018354 186\n0.037503 81\n1.640202 59\n1.318026 96\n0.047486 18\n0.285365 23\n0.153670 1610\n0.418353 64\n0.633771 64\n0.172051 64\n0.135527 64\n0.500414 64\n0.051239 64\n0.050980 64\n0.051984 65\n0.049860 64\n0.050444 64\n0.050838 64\n0.050526 64\n0.051166 63\n0.051801 63\n0.050080 63\n0.050459 63\n0.148552 63\n0.168259 7\n0.215635 1\n0.095074 1\n0.499951 1\n0.050177 1\n0.050240 1\n0.049869 1\n0.051033 1\n0.050871 73\n1.293351 40\n0.077312 3\n0.221467 3\n0.624004 36\n0.466514 34\n0.088083 63\n1.327190 64\n0.499141 64\n0.050083 64\n0.052234 64\n0.050427 64\n0.050834 65\n0.051230 65\n0.051471 65\n0.050358 66\n0.050283 65\n0.051226 1\n0.232831 1\n0.500194 1\n0.050319 1\n0.050826 1\n0.050292 1\n0.050139 1\n0.051473 1\n0.050029 1\n0.051143 65\n0.893054 66\n0.165587 1\n0.222660 33\n0.420075 30\n0.062568 1\n0.197591 1\n0.112129 37\n0.274659 34\n0.071725 116\n0.590672 110\n0.042331 65\n0.010411 181\n0.259642 2\n0.213709 20\n0.105748 2\n0.317324 36\n0.281777 7\n0.000012 1548\n0.016342 187\n0.036596 152\n2.818648 77\n3.045376 77\n0.494171 77\n0.063071 77\n0.073912 77\n0.064065 77\n0.060966 77\n0.060883 78\n0.061702 78\n0.061050 78\n0.060832 78\n0.060808 78\n0.062450 78\n0.061637 78\n0.065509 78\n0.062343 78\n0.061121 78\n0.073744 78\n0.062111 78\n0.062328 78\n0.062289 78\n0.062206 78\n0.062101 78\n0.062592 78\n0.061717 78\n0.060997 78\n0.061386 78\n0.060950 78\n0.065677 78\n0.063740 50\n0.061191 67\n2.233167 85\n0.061852 85\n0.061479 85\n0.061011 85\n0.060988 85\n0.061191 85\n0.061165 85\n0.062015 85\n0.062297 85\n0.063915 85\n0.062042 85\n0.068063 85\n0.061552 78\n0.184297 85\n0.979143 85\n0.497512 85\n0.060864 85\n0.061089 85\n0.060202 85\n0.060488 85\n0.061085 85\n0.062690 85\n0.060453 78\n0.553498 78\n0.499893 78\n0.064341 78\n0.060909 78\n0.060716 78\n0.061706 78\n0.061678 78\n0.065430 78\n0.064033 78\n0.065133 78\n0.068136 7\n0.571513 12\n0.000119 40\n0.000189 96\n0.055059 18\n0.575634 23\n0.145744 158\n0.361396 1457\n0.000602 69\n3.922602 37\n0.749473 116\n0.374516 110\n0.030967 65\n0.010755 46\n0.812503 135\n0.001675 2\n0.350741 20\n0.136686 2\n0.223498 36\n0.328106 7\n0.000012 1548\n0.015858 187\n0.036218 76\n0.834344 76\n0.503854 76\n0.064512 76\n0.062513 76\n0.062743 76\n0.062644 76\n0.063309 77\n0.061884 77\n0.073161 77\n0.063535 77\n0.063072 77\n0.795535 77\n0.125712 77\n0.124535 152\n0.060683 83\n0.366472 83\n0.120334 83\n0.119500 83\n0.183107 85\n0.193236 85\n0.482524 85\n0.061866 85\n0.060999 85\n0.061357 85\n0.060510 85\n0.080372 84\n0.060311 84\n0.060278 84\n0.060659 84\n0.065050 84\n0.061424 7\n1.104183 52\n0.000033 96\n0.059795 18\n0.215095 23\n0.129184 33\n0.433415 125\n0.000712 970\n0.000384 487\n0.000323 102\n1.607477 29\n0.000110 84\n1.823565 18\n6.253038 112\n0.091374 29\n0.000622 4\n0.508262 4\n0.500362 4\n0.050808 4\n0.051043 4\n0.051127 4\n0.050656 4\n0.051226 4\n0.049867 4\n0.131019 4\n0.144066 28\n0.087807 28\n0.184064 28\n0.040009 47\n0.204406 4\n0.702094 4\n0.141513 4\n0.136075 28\n4.120029 28\n0.127851 30\n0.075256 28\n0.301059 28\n0.319643 34\n0.020114 28\n0.892336 28\n0.175537 28\n0.312396 56\n0.201287 73\n0.041427 1137\n0.000846 28\n0.604122 28\n0.015918 1\n0.170440 1\n0.004810 496\n0.001405 1\n0.000504 31\n0.000277 4\n0.000445 1\n0.000326 225\n0.000270 4\n0.368329 4\n0.133487 28\n0.231778 28\n0.192100 28\n0.023544 33\n0.164025 1\n0.327247 49\n0.056363 966\n0.000495 97\n0.002582 362\n0.000475 269\n0.539400 765\n0.000368 360\n2.107850 345\n0.000043 312\n0.000341 504\n0.795828 798\n0.000533 775\n0.495413 88\n0.000047 89\n0.000096 394\n0.000037 123\n0.611219 1291\n0.000067 59\n0.632323 1061\n0.000049 231\n0.000451 64\n0.210292 64\n1.263694 3\n0.198903 3\n0.168029 3\n0.144166 3\n0.151769 3\n0.152204 3\n0.143592 2\n0.152401 1\n0.127904 26\n0.278972 58\n0.000126 41\n0.763835 117\n0.000037 123\n0.045354 25\n0.028635 288\n0.000048 181\n0.355908 2\n0.398575 20\n0.113491 2\n0.279495 36\n0.372460 7\n0.000012 1548\n0.016330 187\n0.036966 76\n0.323941 76\n0.503316 76\n0.062279 76\n0.062378 76\n0.062574 76\n0.062844 76\n0.064084 77\n0.062704 77\n0.063947 77\n0.506600 77\n0.517437 77\n0.062780 77\n0.063039 77\n0.069823 77\n0.062893 77\n0.063328 77\n0.063055 77\n0.062863 77\n0.063049 77\n0.064733 77\n0.068139 77\n0.062662 205\n0.061579 78\n0.060033 78\n0.060330 78\n0.060217 83\n0.306225 83\n0.121773 167\n0.371642 324\n0.699883 167\n0.426915 324\n0.316856 167\n0.381686 324\n0.378442 167\n0.310115 324\n0.375268 167\n0.858906 324\n0.512961 167\n0.063268 324\n0.062703 167\n0.063268 324\n0.062575 167\n0.063270 324\n0.063911 167\n0.062380 324\n0.445414 59\n0.327990 96\n0.068613 18\n0.244262 23\n0.138308 1659\n0.577634 102\n1.919967 29\n0.000039 1331\n0.384350 102\n3.895608 29\n0.000125 41\n1.060610 37\n0.288230 1295\n0.499773 5\n0.647945 903\n0.000055 88\n0.000030 157\n0.000622 148\n0.000064 67\n0.632656 915\n0.000050 116\n0.000084 1\n0.000517 120\n0.000029 7\n0.000423 244\n0.000033 187\n0.385325 600\n0.000048 213\n0.760604 766\n0.000044 158\n0.000069 73\n0.000527 4\n0.000370 236\n0.000030 1313\n1.041687 525\n1.047063 359\n0.000141 372\n0.000039 64\n2.059520 64\n0.163054 64\n0.160128 64\n0.159519 64\n0.168750 64\n0.143805 65\n0.135501 64\n0.184895 3\n0.286398 3\n0.499880 3\n0.050246 3\n0.049822 3\n0.050049 3\n0.050127 2\n0.050333 1\n0.051238 3\n0.050208 3\n0.049931 3\n0.050011 3\n0.050193 3\n0.050174 3\n0.049783 2\n0.049614 1\n0.050672 3\n0.049827 3\n0.049834 3\n0.050750 3\n0.050249 3\n0.049908 3\n0.050034 2\n0.050206 1\n0.049869 3\n0.049692 3\n0.050311 3\n0.050851 3\n0.050538 3\n0.049640 3\n0.050011 2\n0.049976 1\n0.050141 3\n0.050306 3\n0.049582 3\n0.050695 70\n1.194749 32\n0.109049 32\n0.040276 32\n2.008208 32\n0.119262 8\n0.431844 105\n1.656868 1\n0.177712 28\n0.629100 28\n0.184164 28\n0.071900 1\n0.112143 53\n0.000069 28\n0.127605 28\n0.176331 28\n0.191778 28\n0.072046 28\n0.104404 28\n0.319879 59\n0.040214 41\n1.044936 4\n0.162533 28\n0.128030 3\n0.424362 28\n0.159882 3\n0.103857 28\n3.520132 28\n0.223963 28\n0.103737 28\n0.208289 28\n0.247980 28\n0.313016 4\n0.167080 4\n0.111994 28\n0.079439 28\n0.088249 28\n0.089095 28\n0.215430 28\n0.488905 28\n0.247004 28\n0.079724 28\n0.112393 28\n0.159948 28\n0.023995 28\n0.751755 30\n0.035904 3\n0.482042 30\n1.235134 30\n0.151209 30\n1.224097 30\n2.631889 103\n3.841078 29\n0.000119 43\n0.220849 44\n0.223959 44\n0.199828 48\n0.191890 50\n0.168361 50\n0.151695 61\n0.195000 1\n0.184108 84\n1.768236 18\n0.708914 112\n0.179337 29\n0.000033 28\n0.572943 28\n0.303892 35\n0.131637 1\n0.318242 49\n0.061530 915\n0.000757 53\n0.000400 1\n0.000211 41\n0.000168 1\n0.000208 87\n0.000176 435\n0.000425 17\n0.667907 897\n0.000047 513\n0.000533 213\n0.263992 879\n0.000046 281\n0.000692 93\n0.468357 823\n0.000113 2\n0.000027 166\n0.000026 154\n0.000034 212\n0.186213 968\n0.000048 458\n0.000702 148\n0.559772 920\n0.000048 288\n0.000630 1\n0.182356 948\n0.000111 149\n0.000029 94\n0.000034 1\n0.443309 990\n0.000051 179\n0.000079 37\n0.000505 94\n0.000055 98\n0.961256 29\n0.000038 1414\n0.504547 3\n1.077002 100\n0.417683 1\n0.441928 28\n0.389423 28\n0.175787 28\n0.103742 2\n0.104200 52\n0.000032 28\n0.095934 28\n0.138206 28\n0.182732 28\n0.055260 28\n0.128003 28\n0.552091 3\n0.248322 28\n0.095758 3\n0.104048 28\n0.416002 28\n0.127831 28\n0.080059 28\n0.240149 4\n0.344343 28\n0.087183 28\n0.080218 28\n0.136145 28\n0.063918 28\n0.511954 28\n0.248244 28\n0.256825 28\n0.135329 4\n0.271915 4\n0.104149 28\n0.247946 28\n0.063976 28\n0.119792 28\n0.120239 28\n0.040060 28\n0.512271 28\n0.679955 28\n0.247560 28\n0.271958 28\n0.312485 28\n0.007671 4\n0.376208 4\n0.104049 28\n0.831972 34\n0.379677 4\n0.377847 115\n0.049772 109\n0.039116 65\n0.012079 35\n0.608147 147\n0.000036 1\n0.151802 28\n0.253577 28\n0.151254 28\n0.047927 2\n0.104107 52\n0.000031 28\n0.080103 28\n0.127878 28\n0.136192 28\n0.144081 28\n0.111788 56\n0.000960 47\n0.001180 46\n0.326276 3\n0.383623 28\n0.096095 3\n0.103856 28\n0.576419 28\n0.184070 4\n0.319918 28\n0.207853 28\n0.039797 28\n0.063856 28\n0.168250 28\n0.240125 28\n0.055974 4\n0.304037 4\n0.095958 28\n0.071655 28\n0.208949 28\n0.055410 4\n0.312293 4\n0.127917 4\n0.159943 4\n0.151747 4\n0.127958 28\n0.071974 28\n0.079771 28\n0.136509 28\n0.055880 28\n0.392023 28\n0.183851 28\n0.144512 28\n0.127954 28\n0.120007 28\n0.047669 28\n0.088449 28\n0.327779 28\n0.887980 28\n0.191795 28\n0.111938 28\n18.712948 115\n0.598007 109\n0.036620 65\n0.012063 25\n0.773726 59\n0.000036 4\n0.256474 115\n0.041505 109\n0.033421 65\n0.011416 530\n0.688154 505\n0.000172 284\n0.000720 190\n0.309350 779\n0.000054 196\n0.000027 303\n0.000619 89\n0.290909 827\n0.000506 92\n0.884412 826\n0.000042 121\n0.000536 4\n0.000418 383\n0.000135 64\n0.554665 64\n1.176244 64\n0.351605 64\n1.864228 8\n0.191617 25\n0.389425 149\n0.000107 1\n0.568926 4\n1.652432 1\n0.200293 241\n0.376174 183\n0.935860 1\n0.178959 28\n0.244361 28\n0.192104 28\n0.144393 54\n0.159989 28\n0.100117 28\n2.003805 28\n0.064379 4\n0.775870 4\n0.136453 28\n0.359172 28\n0.167855 28\n0.088737 28\n0.111178 28\n0.448623 28\n0.239529 28\n0.087944 28\n0.224035 28\n0.032823 28\n0.022959 18\n0.536211 23\n0.000061 9\n0.259991 1\n0.000076 31\n0.000063 3\n0.000103 1\n0.000065 1\n0.000044 22\n0.000046 1\n0.448432 30\n0.675583 30\n0.351793 11\n2.712216 34\n0.000030 30\n0.144000 30\n0.175549 30\n0.104349 57\n0.103794 30\n0.192390 30\n0.152019 21\n0.507389 29\n0.001216 30\n2.571399 30\n0.160283 30\n0.063516 13\n2.740559 60\n0.000097 38\n0.891731 60\n0.509257 29\n0.005125 30\n0.253465 1\n0.675933 3\n0.747236 149\n1.113222 191\n0.759741 149\n0.328320 191\n0.311579 47\n0.270389 140\n0.003049 18\n0.426778 1\n0.499786 1\n0.050320 1\n0.049806 1\n0.051008 1\n0.050906 1\n0.050660 1\n0.050206 1\n0.050664 1\n0.050627 1\n0.051096 1\n0.050429 1\n0.050474 1\n0.050808 1\n0.050110 1\n0.050985 1\n0.050626 1\n0.050501 1\n0.050844 1\n0.050057 1\n0.050864 1\n0.049861 1\n0.249097 31\n0.171821 32\n0.087676 65\n0.137145 32\n0.302635 32\n0.079419 3\n0.349198 3\n0.500158 3\n0.051127 3\n0.051296 2\n0.050772 1\n0.050978 3\n0.050070 3\n0.050964 3\n0.050700 3\n0.050050 3\n0.050277 3\n0.050632 2\n0.050073 1\n0.050605 3\n0.050066 3\n2.146562 3\n0.191623 3\n0.174599 3\n0.161543 3\n0.144040 2\n0.232146 30\n0.699127 30\n0.463757 65\n0.345754 1\n0.243541 30\n0.891574 30\n2.776684 30\n0.032214 115\n0.732839 109\n0.035297 65\n0.011894 181\n0.472693 2\n0.366000 20\n0.121346 2\n0.431560 36\n0.369339 7\n0.000011 1754\n0.016002 187\n0.036656 155\n2.899259 57\n13.496685 96\n0.035446 18\n0.633469 23\n0.137673 1822\n0.490810 1\n0.916198 69\n1.647251 30\n0.068605 115\n0.869680 109\n0.044792 65\n0.008067 46\n0.281369 135\n0.001659 2\n0.197985 20\n0.105596 2\n0.215520 36\n0.324913 7\n0.000013 1757\n0.016269 187\n0.036115 155\n3.077167 7\n11.066413 49\n0.000040 96\n0.050869 18\n0.347214 23\n0.137424 33\n0.233390 125\n0.001328 903\n0.000471 761\n0.000307 5\n1.069283 1312\n0.000634 5\n0.463425 857\n0.000049 372\n0.000813 227\n2.319591 842\n0.000111 190\n0.000029 95\n0.000034 964\n0.665351 533\n0.000044 675\n0.766671 177\n0.000033 376\n0.000033 5\n0.752107 1087\n0.000104 318\n0.000311 51\n0.820397 990\n0.000048 351\n0.000610 681\n0.174065 259\n0.000042 422\n0.000038 523\n0.223355 526\n0.000111 307\n0.000039 99\n0.439478 727\n0.000045 99\n0.000074 88\n0.000512 189\n0.000063 62\n0.907153 63\n0.175704 63\n0.191968 63\n0.576175 3\n0.342980 3\n0.500885 3\n0.049994 3\n0.050062 3\n0.050149 3\n0.050374 2\n0.051305 1\n0.050214 3\n0.050177 3\n0.050959 3\n0.049749 3\n0.050571 3\n0.051026 3\n0.050583 2\n0.051054 1\n0.050583 3\n0.050020 3\n0.050403 3\n0.050935 3\n0.051135 3\n0.050768 3\n0.049623 2\n0.050582 1\n0.051251 3\n0.050897 3\n0.050673 3\n0.051013 3\n0.050274 3\n0.050245 3\n0.050766 2\n0.051314 1\n0.050078 3\n0.050656 3\n0.050872 3\n0.051080 3\n0.050139 3\n0.050110 68\n0.343536 32\n0.060813 114\n0.790541 108\n0.031065 64\n0.012458 46\n0.298845 135\n0.001683 2\n0.190063 20\n0.145557 2\n0.167427 36\n0.300289 7\n0.000012 1737\n0.015665 187\n0.035771 155\n2.998333 77\n3.272773 77\n0.548790 77\n0.060408 77\n0.069438 77\n0.061469 77\n0.061272 77\n0.061701 78\n0.060817 85\n1.633406 84\n0.505216 84\n0.061077 84\n0.060869 84\n0.060912 84\n0.060212 84\n0.060918 84\n0.061438 49\n0.060742 1326\n0.071768 377\n0.726310 68\n1.431736 85\n0.122872 79\n0.348196 79\n0.516713 79\n0.057118 79\n0.057299 79\n0.057173 79\n0.057205 79\n0.057047 79\n0.057381 79\n0.057202 79\n0.057150 79\n0.057148 79\n0.057128 79\n0.064513 79\n0.057406 85\n0.516664 85\n0.057761 85\n0.060014 85\n0.063794 85\n0.058313 85\n0.061129 85\n0.057177 82\n0.057956 48\n0.057050 590\n0.061314 85\n0.061538 79\n0.364550 79\n0.500703 79\n0.060593 79\n0.060747 79\n0.068134 79\n0.060301 79\n0.066481 79\n0.062095 79\n0.060453 79\n0.060435 79\n0.060746 79\n0.060462 79\n0.060126 79\n0.060305 79\n0.060453 51\n0.060671 1213\n0.064893 68\n2.500628 86\n0.061503 86\n0.061743 86\n0.061499 86\n0.061023 86\n0.063232 86\n0.062871 175\n2.561007 264\n0.688275 56\n1.916546 96\n0.051565 18\n0.277324 23\n0.145805 1636\n0.794205 188\n4.237504 881\n0.000107 285\n0.000447 103\n0.818012 727\n0.000050 187\n0.000089 58\n0.000828 126\n0.000036 67\n0.654491 872\n0.000095 57\n0.000901 2\n0.000395 314\n0.000032 95\n2.175765 834\n0.000107 220\n0.000032 131\n0.000676 149\n0.000025 155\n1.440570 650\n0.000036 697\n0.001579 64\n0.545965 64\n0.183666 64\n0.184109 64\n0.224114 64\n0.352136 5\n0.583610 21\n2.127996 59\n0.000079 43\n0.498558 43\n0.050563 43\n0.050479 43\n0.050943 43\n0.051129 43\n0.050521 43\n0.050270 1\n0.050879 43\n0.051187 43\n0.050985 43\n0.050792 43\n0.050036 43\n0.051053 43\n0.054109 43\n0.047077 1\n0.050491 43\n0.050142 43\n0.049896 43\n0.050175 43\n0.129210 41\n0.295512 41\n0.161449 41\n0.038407 3\n0.128412 41\n0.303842 41\n0.048216 41\n0.120230 41\n0.039649 41\n0.120243 3\n0.168017 41\n0.031720 41\n0.144278 41\n0.095882 41\n0.039928 3\n0.079833 41\n0.040733 41\n0.127316 41\n0.047892 3\n0.186282 41\n2.694301 41\n0.167858 41\n0.063746 41\n0.112208 41\n0.095874 41\n0.160503 41\n0.135897 3\n0.151879 41\n0.265398 41\n0.030634 41\n0.063855 41\n0.112262 41\n0.047605 41\n0.160315 41\n0.200886 41\n0.015209 41\n0.135717 41\n0.048141 41\n0.159994 3\n0.079984 41\n1.520838 41\n0.063189 41\n0.120086 41\n0.104239 41\n0.152039 41\n0.111794 41\n0.112167 65\n2.472386 65\n0.172756 65\n0.320245 1\n0.142920 1\n0.312176 65\n0.668465 2\n0.227909 191\n1.123867 1\n0.163284 28\n0.251264 28\n0.343959 4\n0.544128 28\n0.215977 28\n0.047876 28\n0.071871 28\n0.144190 28\n0.064747 28\n0.127104 1\n0.111931 28\n2.392278 56\n0.000920 47\n0.001129 68\n0.046761 32\n0.071210 28\n0.191749 28\n0.392152 28\n0.231987 2\n0.144064 28\n0.111823 51\n0.056030 32\n0.055975 28\n0.152302 28\n0.576178 28\n0.191982 3\n0.159947 28\n0.144320 51\n0.039578 32\n0.063984 28\n0.144350 28\n0.207846 3\n0.296068 2\n0.169345 108\n0.000030 3\n0.104167 28\n0.207837 28\n0.152055 66\n0.040022 55\n0.128022 28\n0.071859 28\n0.080143 28\n0.103860 28\n0.056008 28\n0.120324 28\n0.040031 28\n0.152550 28\n0.223257 28\n0.232242 28\n0.104082 4\n0.392925 28\n0.134634 28\n0.168118 28\n0.240108 28\n0.240147 28\n0.031849 28\n0.079613 28\n0.168348 28\n0.336301 30\n0.044321 65\n0.947563 4\n0.966299 4\n0.500866 4\n0.048993 4\n0.050146 4\n0.051921 4\n0.049949 4\n0.049300 4\n0.050983 4\n0.050111 4\n0.050478 4\n0.049916 4\n0.051467 4\n0.050587 4\n0.051218 4\n0.050760 4\n0.050825 4\n0.049614 4\n0.050833 4\n0.050632 75\n0.051698 4\n0.050057 4\n0.049822 5\n0.241264 2\n0.000044 28\n0.183928 28\n0.167821 28\n0.095988 66\n0.040922 28\n0.159457 28\n0.039933 115\n0.606328 109\n0.045289 65\n0.012031 18\n2.285310 68\n0.056091 18\n1.000011 105\n0.315382 29\n0.000057 1467\n0.992423 98\n2.151427 29\n0.000118 1588\n0.257298 105\n0.526966 29\n0.000037 45\n0.204402 46\n0.224084 44\n0.592198 1315\n0.644384 5\n1.117312 969\n0.000091 337\n0.000761 34\n0.880885 1013\n0.000050 324\n0.000706 166\n0.630294 775\n0.000115 258\n0.000031 306\n0.000485 110\n0.451140 826\n0.000050 363\n0.000557 62\n0.665928 63\n0.167576 63\n0.168222 63\n0.167882 63\n0.144063 63\n0.143717 63\n0.120130 3\n0.158871 3\n0.500542 3\n0.049658 3\n0.050274 3\n0.050000 3\n0.051135 2\n0.049836 1\n0.051003 3\n0.051371 68\n0.304588 31\n0.497691 31\n0.051033 31\n0.051124 31\n0.050466 31\n0.049974 31\n0.161073 87\n0.152672 65\n0.159502 84\n0.757718 84\n0.586065 84\n0.160235 84\n0.231964 84\n0.256041 59\n0.024033 22\n0.000062 59\n0.071826 21\n0.000048 84\n0.119885 65\n0.527058 67\n0.498477 65\n0.049896 65\n0.050541 65\n0.049074 65\n0.049967 65\n0.050975 65\n0.050154 65\n0.050941 65\n0.049954 65\n0.050151 66\n1.432089 1\n0.375671 1\n0.183603 8\n1.408082 66\n0.540633 1\n0.467534 7\n0.735448 99\n0.000034 65\n0.154463 64\n0.274850 1\n0.169030 61\n0.350883 178\n0.158810 791\n0.000041 79\n0.000570 189\n0.000065 64\n0.292349 64\n0.169465 99\n7.200365 1\n0.147206 122\n5.860229 3\n0.184002 41\n0.632435 41\n0.151945 41\n0.135500 41\n0.059321 41\n0.028810 41\n0.128226 3\n0.151610 41\n0.128189 41\n0.041702 41\n0.142714 41\n0.071639 3\n0.087506 41\n0.112659 41\n0.048028 41\n0.023874 41\n0.128025 41\n0.032341 41\n0.167842 41\n0.024390 41\n0.039435 41\n0.176283 56\n0.000938 47\n0.001362 59\n0.045518 41\n0.144294 41\n0.567976 64\n0.664443 65\n0.357817 99\n0.290336 1\n0.154965 28\n3.732519 51\n0.055726 32\n0.047485 28\n0.112449 28\n0.168118 3\n0.271569 49\n0.768832 1\n0.055634 28\n0.176048 30\n0.035553 99\n0.308977 1\n0.131583 28\n0.363316 51\n0.040012 32\n0.039798 28\n0.136415 28\n0.255983 4\n0.408387 28\n0.063682 28\n0.487588 28\n0.160238 28\n0.143809 4\n0.296611 4\n0.127645 4\n0.128067 28\n0.872242 28\n0.081448 28\n0.150184 28\n0.104043 28\n0.056202 28\n0.152017 28\n0.048637 1\n3.724909 3\n0.890190 156\n0.232537 64\n0.352645 8\n0.236845 1\n0.216315 108\n1.290371 4\n0.352191 1\n0.000083 8\n0.399514 5\n0.375650 5\n0.208156 7\n0.273485 7\n0.499580 7\n0.049932 7\n0.050107 7\n0.050178 7\n0.053308 5\n0.048921 1\n0.000029 5\n0.055057 65\n0.320169 3\n0.189024 3\n1.570440 207\n0.664348 484\n0.507908 409\n0.000040 74\n1.414731 583\n0.509304 1\n0.116793 1\n0.160003 45\n0.620043 4\n0.372761 28\n0.762593 28\n0.376339 4\n0.568081 28\n1.495811 4\n0.952269 203\n0.551882 41\n0.343778 43\n0.384499 41\n0.095393 41\n0.210401 74\n0.350506 36\n0.300962 8\n0.606766 3\n0.480741 28\n0.619684 65\n1.039449 1\n0.252383 65\n0.419549 3\n0.236233 3\n0.248417 3\n0.183573 3\n0.152170 70\n1.219820 70\n0.152039 44\n0.168019 23\n0.000098 43\n0.127830 23\n0.000105 70\n0.607803 70\n0.440139 3\n0.235912 55\n0.403923 55\n0.440186 55\n0.143787 55\n0.111784 57\n0.136658 23\n0.000044 55\n0.087192 55\n0.104699 55\n0.144175 55\n0.096796 55\n0.095175 55\n0.184150 55\n0.031772 30\n0.191971 24\n0.000085 55\n0.175853 1\n0.564641 120\n0.451598 8\n0.208436 65\n2.151239 4\n0.180516 1\n0.207467 3\n0.284023 138\n0.168557 128\n1.785527 3\n0.050144 41\n0.000034 47\n0.051052 47\n0.051144 47\n0.050679 47\n0.050929 47\n0.051713 1\n0.049715 1\n0.002379 39\n0.000088 2\n0.047881 40\n0.000032 43\n0.051028 46\n0.050160 45\n0.049663 44\n0.050958 43\n0.051472 56\n0.001675 47\n0.002307 52\n0.046133 34\n0.050551 32\n0.318359 1\n0.220582 99\n0.323520 1\n0.137753 28\n0.252231 28\n0.384186 53\n0.064604 3\n0.159417 28\n0.791934 3\n0.112054 28\n0.807943 51\n0.048105 3\n0.143726 28\n0.120290 28\n0.080003 28\n0.112303 55\n0.119937 28\n0.079634 28\n0.090869 28\n0.109134 28\n0.103893 28\n0.104576 28\n0.111978 28\n0.215887 28\n0.071928 28\n0.063991 28\n0.144275 28\n0.106552 28\n0.185850 99\n0.259775 8\n0.147688 28\n1.507804 51\n0.055663 32\n0.056021 28\n0.104167 28\n0.784068 28\n0.120479 28\n0.167388 28\n0.105752 28\n0.454123 28\n0.120370 28\n0.128944 28\n0.071894 28\n0.287161 3\n0.344054 28\n0.383740 30\n0.060501 4\n0.459704 10\n0.140425 22\n0.000111 3\n1.001724 1\n0.006850 1\n0.184323 1\n0.183943 34\n0.522747 34\n0.160114 34\n0.071953 61\n0.112133 43\n0.472184 37\n0.127583 37\n0.143968 37\n0.128054 34\n0.128827 34\n0.111260 34\n0.256192 34\n0.087683 34\n0.112169 34\n0.095913 34\n0.456050 34\n0.111847 34\n0.320267 34\n0.424021 34\n0.095888 34\n0.103742 34\n0.144279 34\n0.183942 34\n0.128143 1\n2.941613 1\n0.503564 1\n0.050852 1\n0.051145 1\n0.050816 1\n0.051233 1\n0.050390 1\n0.050408 1\n0.050866 1\n0.049914 1\n0.050703 1\n0.049893 1\n0.050617 1\n0.050552 1\n0.050401 198\n1.025281 75\n0.280249 198\n0.615884 62\n0.135772 8\n0.693432 115\n0.384045 109\n0.029664 65\n0.013240 74\n2.336820 65\n0.172213 66\n0.917391 1\n0.124316 1\n0.000030 28\n0.112199 51\n0.024397 32\n0.151552 28\n0.104832 28\n0.359166 28\n0.215945 3\n0.111823 28\n0.111912 51\n0.032872 32\n0.079586 28\n0.351888 28\n0.224470 28\n0.247589 3\n0.088077 28\n0.127819 51\n0.048236 32\n0.071943 28\n0.168415 28\n0.223692 115\n0.774679 109\n0.037266 65\n0.012280 18\n1.388907 102\n0.251835 29\n0.000128 28\n0.012786 4\n0.671284 1512\n0.580463 25\n11.513885 149\n0.000531 1\n0.135221 28\n0.220575 28\n0.103340 53\n0.120958 3\n0.159318 28\n0.200289 3\n0.087706 28\n0.135878 30\n0.048284 21\n0.000090 3\n0.071914 28\n0.287969 30\n0.039892 21\n0.000895 32\n0.070747 28\n0.112415 28\n0.624169 28\n0.364063 1\n0.107829 28\n0.368220 28\n0.272889 28\n0.118972 28\n0.128510 4\n0.727390 4\n0.160010 4\n0.160800 6\n0.159715 1\n0.159724 4\n0.184223 28\n1.172231 65\n0.598331 65\n0.323624 4\n0.427342 4\n0.503086 4\n0.050564 56\n0.050561 33\n0.050955 8\n0.051292 1\n0.050787 33\n0.050521 8\n0.050499 1\n0.051067 8\n0.051342 1\n0.049568 2\n0.050907 32\n0.000030 4\n0.050315 5\n0.142870 28\n0.399398 30\n0.087922 21\n0.000080 3\n0.128273 28\n0.183788 30\n0.056179 21\n0.000048 32\n0.047639 28\n0.104001 28\n0.304434 28\n0.316021 25\n0.251778 131\n0.000042 8\n0.115928 28\n0.724583 28\n0.151693 28\n0.048414 55\n0.143338 28\n0.072183 28\n0.255644 28\n0.144948 28\n0.274446 28\n0.324816 28\n0.143868 28\n1.256062 28\n0.048318 28\n0.159706 28\n0.039960 28\n0.056315 28\n0.024124 28\n0.539828 30\n0.032685 3\n0.328661 114\n0.049204 108\n0.033340 65\n0.012789 17\n0.240835 101\n0.307777 29\n0.000060 41\n0.432265 45\n0.156087 1456\n0.396119 5\n1.050928 948\n0.000114 149\n0.000030 88\n0.000029 42\n0.623620 952\n0.000042 102\n0.000576 265\n0.000058 76\n0.951355 1380\n0.000494 60\n0.648497 992\n0.000105 408\n0.000586 64\n0.740649 5\n0.628654 987\n0.000160 128\n0.001066 94\n0.000041 42\n0.740809 886\n0.000082 98\n0.000624 99\n0.000316 199\n0.000031 64\n0.456562 64\n0.167258 64\n0.151678 25\n0.277271 149\n0.000039 198\n0.511925 64\n0.205785 1\n0.129335 4\n0.309176 125\n0.256236 3\n0.431943 41\n1.261576 41\n0.098204 41\n0.136276 41\n0.040108 41\n0.023616 3\n0.264206 41\n0.064026 41\n0.152056 41\n0.033324 1\n0.174885 41\n0.063528 41\n0.080265 41\n0.095597 41\n0.136308 41\n0.080504 41\n0.055486 41\n0.143962 99\n0.232723 7\n0.305892 28\n0.273109 28\n0.035910 53\n0.120162 1\n0.256659 49\n0.120136 49\n0.127717 49\n0.119815 49\n0.040180 49\n0.024060 28\n0.280129 30\n0.019558 3\n0.721874 30\n0.242336 30\n0.128013 30\n0.095829 57\n0.096390 3\n0.285864 28\n0.308712 25\n0.221566 74\n0.000101 1\n0.129799 117\n0.435820 111\n0.042796 64\n0.012427 15\n0.578247 1262\n0.000604 5\n1.428249 831\n0.000040 355\n0.000404 63\n0.458204 63\n0.499753 64\n0.051057 63\n0.054706 63\n0.045747 63\n0.050137 64\n0.050788 64\n0.050121 64\n0.051957 64\n0.049843 64\n0.050566 64\n0.050115 65\n0.049865 64\n0.051818 64\n0.050909 1\n0.273260 66\n0.428920 28\n0.182016 66\n0.071477 2\n0.127679 52\n0.000043 28\n0.111960 28\n0.143871 28\n0.048305 28\n0.176174 28\n0.167535 3\n1.056452 28\n0.127875 3\n0.063808 28\n0.224163 30\n0.013567 25\n0.482920 74\n0.000036 1\n0.130036 28\n0.181588 28\n0.183914 28\n0.055763 28\n0.184451 28\n0.071459 4\n0.458014 4\n0.094140 2\n0.032522 52\n0.000028 28\n0.151375 28\n0.103591 28\n0.184791 28\n0.055774 28\n0.047952 28\n0.096263 3\n0.135859 28\n0.055827 3\n0.144167 28\n0.216088 117\n0.446482 111\n0.044827 65\n0.013947 17\n2.843971 101\n0.299218 29\n0.000035 1\n0.587135 49\n0.005674 166\n0.000233 303\n0.000057 216\n0.000026 89\n0.000023 226\n0.000024 375\n0.000432 6\n4.657065 190\n0.000180 8\n0.175852 28\n0.436589 28\n0.183657 28\n0.128137 4\n0.407865 4\n0.128254 12\n0.128650 28\n0.062912 28\n0.152252 53\n0.095814 1\n0.128403 28\n0.176547 3\n0.095491 28\n0.119747 51\n0.024172 3\n0.055992 28\n0.216970 51\n0.055258 32\n0.071907 28\n0.087569 28\n0.816817 28\n0.532399 1\n0.464748 1\n0.499997 1\n0.049972 1\n0.051252 1\n0.049609 1\n0.049985 1\n0.050743 1\n0.050147 1\n0.051088 1\n0.050147 32\n0.323614 32\n0.095609 32\n0.192226 32\n0.392034 8\n0.278091 7\n0.794416 110\n0.000030 2\n0.091438 28\n0.171691 28\n0.184122 28\n0.104283 55\n0.663223 28\n0.096270 28\n0.120440 28\n0.191936 28\n0.232019 28\n0.128318 28\n0.175527 28\n0.168276 28\n0.183865 4\n0.296179 28\n0.408345 28\n0.031775 28\n0.135875 28\n0.055912 28\n0.032752 28\n0.676596 28\n0.922995 66\n0.231666 28\n0.112194 33\n0.236780 4\n0.496782 112\n0.041089 106\n0.028082 65\n0.017017 178\n1.146699 2\n0.486053 20\n0.097633 2\n0.311536 36\n0.341180 7\n0.000013 1737\n0.016570 339\n0.036741 76\n2.518615 76\n0.189115 155\n0.318234 56\n10.281692 96\n0.060225 18\n0.372857 23\n0.169387 33\n0.257333 125\n0.001687 987\n0.000740 235\n0.000191 436\n0.000622 61\n1.911894 6\n0.416017 1004\n0.000044 27\n0.000028 74\n0.000026 284\n0.000795 65\n0.330940 65\n0.199969 105\n8.482394 29\n0.000038 1314\n0.640231 5\n1.918084 959\n0.000113 298\n0.000545 64\n1.450681 64\n0.496552 64\n0.050801 64\n0.050278 64\n0.050215 64\n0.049982 64\n0.049869 5\n2.645471 864\n0.000044 301\n0.000675 81\n1.127225 895\n0.000093 283\n0.000784 80\n0.631417 802\n0.000053 309\n0.000085 484\n1.064396 443\n0.000042 788\n0.000835 62\n1.401149 63\n0.499481 63\n0.050245 63\n0.051164 63\n0.050776 63\n0.050586 64\n0.050145 64\n0.049836 64\n0.050539 64\n0.050847 64\n0.051936 64\n0.049984 64\n0.050269 64\n0.368179 65\n0.655228 25\n0.654512 149\n0.000036 1\n0.743417 28\n0.244332 51\n0.104306 3\n0.127917 28\n0.376156 28\n0.103481 53\n0.096380 28\n0.376021 5\n0.511506 50\n0.000031 28\n0.160436 28\n0.159799 28\n0.048343 55\n0.120926 28\n0.086901 66\n0.111932 28\n0.063977 28\n0.168393 28\n0.152083 10\n0.212286 23\n0.000061 8\n0.235605 28\n0.344164 3\n0.111726 5\n0.513527 118\n0.000039 28\n0.150396 28\n0.152182 28\n0.015619 55\n0.208345 28\n0.007939 28\n0.199305 4\n0.561074 28\n0.279738 28\n0.307718 204\n0.468495 8\n0.435236 65\n1.446123 1\n0.266970 67\n0.706490 205\n0.320821 279\n0.288415 64\n0.585043 64\n0.148360 64\n0.159902 64\n0.151909 65\n0.223758 35\n0.251617 195\n0.000071 400\n0.887234 142\n0.887476 157\n0.000031 28\n4.759442 3\n0.119979 28\n6.792375 1\n0.542519 28\n3.529107 28\n0.199878 4\n0.368167 5\n0.128137 1\n0.000042 28\n0.199947 28\n0.055888 53\n0.128220 28\n0.202190 28\n0.117593 28\n0.160562 28\n0.095222 55\n0.080157 28\n0.112013 28\n0.128216 28\n0.063957 28\n0.184045 28\n0.144053 36\n0.285534 4\n0.591948 117\n0.049070 111\n0.038932 65\n0.012447 17\n2.907688 1\n0.499736 1\n0.050594 1\n0.050230 1\n0.049692 1\n0.050066 1\n0.050602 1\n0.050563 1\n0.050750 1\n0.050247 1\n0.049811 1\n0.050156 1\n0.050780 1\n0.050286 1\n0.049651 1\n0.606413 70\n0.509989 38\n0.284632 32\n0.264056 32\n0.241609 32\n0.358610 36\n0.319799 32\n0.440312 109\n0.175805 38\n0.304860 49\n0.511533 80\n0.192614 32\n0.183627 32\n0.079449 2\n0.253618 10\n0.880109 21\n0.000053 1\n0.741741 3\n0.249403 3\n0.499960 3\n0.050199 3\n0.049901 3\n0.050996 3\n0.050074 2\n0.050799 1\n0.049699 3\n0.050479 3\n0.050264 3\n0.050936 3\n0.050872 3\n0.050155 3\n0.051454 2\n0.050571 82\n0.507500 51\n0.371631 117\n0.813993 111\n0.068265 65\n0.013218 180\n3.494539 2\n0.229954 20\n0.129337 2\n0.223681 36\n0.314249 7\n0.000012 1737\n0.016152 298\n0.036420 155\n3.097631 49\n1.281745 371\n0.057636 67\n0.229851 84\n0.347790 84\n0.172678 84\n0.516696 84\n0.057526 84\n0.057285 84\n0.056973 84\n0.057475 84\n0.057366 80\n0.057763 43\n0.057736 575\n0.068179 84\n0.258686 91\n0.307787 91\n0.492680 91\n0.061563 91\n0.061814 91\n0.061643 56\n12.738894 96\n0.046258 18\n0.436678 23\n0.129530 33\n0.553381 125\n0.001891 949\n0.000794 549\n0.000502 556\n0.000485 101\n2.686234 29\n0.000037 1544\n0.408138 105\n10.807369 29\n0.000041 1919\n0.649401 210\n2.060589 806\n0.000043 309\n0.000076 484\n0.677899 443\n0.000042 374\n0.000685 144\n0.000029 117\n0.000462 291\n0.000094 723\n0.372812 126\n0.000034 265\n0.000107 100\n2.372637 29\n0.000036 1\n0.637405 49\n0.004985 179\n0.000949 946\n0.000056 301\n0.000576 65\n1.612750 64\n0.157794 64\n0.175700 64\n0.176070 64\n0.775637 64\n0.768305 64\n2.255755 1\n0.247220 1\n0.499998 1\n0.050159 1\n0.049774 1\n0.049982 1\n0.050911 1\n0.395069 77\n0.446317 40\n0.132775 42\n0.567642 42\n0.127919 67\n0.073398 42\n0.455273 46\n0.515343 44\n0.356061 43\n0.136141 45\n0.160091 44\n0.143761 72\n0.517955 42\n0.018186 42\n0.343736 40\n0.048023 22\n0.000030 21\n0.087473 21\n0.000029 42\n0.152328 46\n0.515362 20\n6.301307 21\n0.000029 45\n0.186100 22\n0.000057 47\n0.133308 45\n0.160466 45\n0.135847 72\n0.517036 42\n0.898549 65\n0.063941 21\n0.039738 22\n0.000065 38\n0.121198 44\n0.215231 42\n0.119751 65\n0.032102 44\n0.215975 43\n2.264522 47\n0.183880 45\n0.175835 39\n0.199915 20\n4.368328 22\n0.000029 70\n0.151844 47\n0.168077 45\n0.143555 42\n0.775855 43\n0.515329 42\n2.756970 40\n0.048245 22\n0.000055 21\n0.087667 21\n0.000052 42\n0.127876 42\n0.400008 42\n0.295930 42\n0.152054 42\n0.128272 42\n0.119962 42\n0.235499 17\n0.108003 23\n0.000056 42\n0.192174 65\n0.049136 44\n0.079147 72\n0.517264 42\n1.498664 42\n0.475970 49\n0.396409 40\n0.499548 38\n0.052954 36\n0.049916 34\n0.149428 32\n0.247609 33\n0.795029 7\n0.498708 1\n0.095882 34\n0.819032 34\n1.591780 57\n0.056149 38\n0.056002 34\n0.119692 34\n0.176295 34\n0.151861 34\n0.336214 34\n0.071458 37\n0.456399 37\n0.095976 34\n0.127819 34\n0.167943 34\n0.079862 61\n0.080291 34\n0.528471 34\n0.135508 34\n0.176574 34\n0.071354 34\n0.120421 34\n0.199851 3\n0.868883 32\n0.947406 64\n0.768017 64\n0.157724 1\n0.183206 1\n0.500109 1\n0.050859 1\n0.051398 1\n0.050479 1\n0.051010 1\n0.050517 1\n0.050223 1\n0.050002 1\n0.050128 1\n0.050832 1\n0.049737 1\n0.050408 1\n0.051029 1\n0.051854 1\n0.169227 31\n0.237705 31\n0.143728 31\n0.151465 1\n0.138977 1\n0.200236 1\n0.168103 1\n0.143500 1\n0.144101 1\n0.160157 1\n0.135973 31\n0.164942 31\n0.151661 31\n0.144425 1\n0.147086 1\n0.199888 1\n0.152048 1\n0.160134 1\n0.151933 1\n0.168071 1\n0.151702 31\n0.268885 31\n0.136045 31\n0.127707 64\n0.309784 64\n0.158351 3\n0.487278 3\n0.500712 3\n0.050205 3\n0.050111 3\n0.049976 2\n0.049761 1\n0.050860 3\n0.050599 3\n0.049660 3\n0.050097 3\n0.049853 3\n0.050216 3\n0.051127 31\n0.381923 31\n0.151887 31\n0.151695 55\n0.000932 46\n0.001132 17\n0.587697 1\n0.500301 3\n0.050350 3\n0.051225 3\n0.050996 3\n0.049750 3\n0.050482 3\n0.050574 2\n0.050903 1\n0.050442 3\n0.050345 3\n0.049721 3\n0.050766 3\n0.051095 32\n1.223661 36\n0.035979 35\n0.500201 32\n0.359927 36\n0.036674 1\n0.448145 1\n0.200272 1\n0.184081 1\n0.151806 40\n0.819136 40\n0.103840 40\n0.159766 40\n0.104037 40\n0.160211 40\n0.064040 67\n0.112833 48\n0.215325 72\n0.551841 40\n0.216571 40\n0.111451 40\n0.136114 40\n0.079816 40\n0.137101 40\n0.223178 3\n0.276646 64\n0.011102 63\n0.125336 63\n0.274893 63\n0.158352 7\n0.231284 1\n0.159075 1\n0.183990 1\n0.160095 34\n0.715213 34\n0.119815 34\n0.296159 37\n0.415826 34\n0.208554 34\n0.207844 34\n0.160243 34\n0.071517 61\n0.080636 34\n0.103104 34\n0.160607 34\n0.071832 34\n0.064214 34\n0.119674 34\n0.176060 114\n0.726038 108\n0.031234 64\n0.013501 74\n0.326011 64\n0.285135 7\n0.287850 24\n0.909653 147\n0.000603 7\n0.152581 28\n0.362518 51\n0.095753 2\n0.224600 28\n0.551776 51\n0.111946 32\n0.112106 28\n0.095907 28\n0.284520 64\n0.588228 1\n0.268952 11\n0.231056 1\n0.000767 3\n0.536857 1\n0.431077 37\n0.234580 31\n0.500274 31\n0.049549 31\n0.050074 31\n0.049594 31\n0.050147 31\n0.050559 35\n0.050520 31\n0.162906 20\n0.163820 21\n0.000052 43\n0.584880 43\n0.159138 43\n0.088140 43\n0.112015 66\n0.360816 1\n0.228743 13\n0.271049 65\n0.436338 12\n0.204155 65\n0.228536 8\n0.236664 1\n0.111209 33\n0.346746 33\n0.152366 58\n0.200311 35\n0.175687 53\n0.655775 34\n0.119716 30\n0.096206 65\n0.481438 1\n0.355638 32\n0.763226 32\n0.159773 32\n0.143918 32\n0.160048 32\n0.160144 32\n0.152628 38\n0.135139 32\n0.144617 32\n0.135358 32\n0.192033 32\n0.119740 32\n0.319938 32\n0.256138 32\n0.151852 115\n0.511344 109\n0.031232 65\n0.013424 46\n0.265329 135\n0.002016 2\n0.309747 20\n0.145262 2\n0.183521 36\n0.348264 7\n0.000011 1737\n0.015539 503\n0.035947 155\n2.871735 59\n3.802624 96\n0.059725 18\n0.289309 23\n0.129423 1984\n0.251773 105\n3.007650 29\n0.000026 1\n1.187878 47\n0.280130 44\n0.168252 1471\n0.443786 64\n1.136570 65\n0.188344 4\n0.287071 25\n0.973612 149\n0.000040 99\n0.818111 8\n0.294508 2\n0.500163 28\n0.743761 51\n0.071939 3\n0.129126 28\n0.102894 28\n0.047782 28\n0.103935 55\n0.128280 28\n0.080785 28\n0.135327 28\n0.064080 28\n0.208051 28\n0.103989 28\n0.031831 28\n0.160169 28\n0.767961 28\n0.192242 31\n0.172458 4\n0.659591 4\n0.151851 4\n0.696190 4\n0.500028 4\n0.050599 4\n0.050486 4\n0.051222 4\n0.050702 4\n0.050383 4\n0.050277 37\n0.051433 4\n0.050739 4\n0.050911 8\n0.051309 28\n0.591529 56\n0.001942 47\n0.001950 46\n0.100268 53\n0.095550 28\n0.184433 28\n0.095888 28\n0.175642 28\n0.048414 55\n0.104108 28\n0.122598 28\n0.053302 28\n0.024091 28\n0.183814 28\n0.071892 28\n0.039984 28\n0.160398 10\n0.812740 23\n0.000041 8\n0.106969 28\n0.168441 3\n0.119606 28\n0.224059 28\n0.324873 99\n0.379395 8\n0.099407 64\n1.798111 65\n0.292307 8\n0.151748 4\n0.314610 28\n0.063975 1\n0.196925 1\n0.500008 1\n0.049922 1\n0.050320 1\n0.050716 1\n0.050829 1\n0.050686 45\n0.282561 42\n0.111687 60\n0.180598 65\n0.161543 65\n0.152011 64\n0.152208 65\n1.399776 64\n0.696427 37\n0.241865 224\n0.000037 8\n0.163922 2\n0.499928 28\n0.279528 51\n0.032105 32\n0.088021 28\n0.127837 28\n0.408002 3\n0.144164 2\n0.080155 47\n0.000033 1\n0.087912 28\n0.192416 28\n0.151979 28\n0.112037 47\n0.064568 65\n0.360766 2\n0.227965 25\n0.258311 74\n0.000038 8\n0.123699 115\n0.531166 109\n0.044611 65\n0.005597 25\n1.385503 59\n0.000037 30\n0.020923 21\n0.000041 32\n0.063426 28\n0.088473 28\n0.344107 3\n1.096273 32\n0.192306 21\n0.000109 3\n0.119749 28\n0.168323 30\n0.036420 3\n1.001743 115\n1.696267 109\n0.033479 65\n0.013385 18\n0.599835 67\n9.206146 32\n0.042011 3\n0.543680 115\n0.841219 109\n0.038272 65\n0.012608 27\n4.067255 59\n0.000219 32\n0.339720 32\n0.176004 36\n0.175645 23\n0.000080 41\n4.728960 35\n0.183333 35\n0.167541 35\n0.169587 65\n0.880835 65\n0.691522 1\n0.407214 65\n0.341642 1\n0.170682 65\n0.460498 4\n1.110155 4\n0.500017 4\n0.049926 8\n0.050117 1\n0.053735 21\n0.046557 24\n0.000104 1\n0.050745 4\n0.050184 4\n0.050546 35\n0.050320 21\n0.000094 33\n0.049842 12\n0.194529 28\n3.268220 28\n0.136099 28\n0.520444 28\n0.103516 3\n0.079757 1\n0.408843 4\n0.144567 4\n0.160700 4\n0.102295 3\n0.176016 2\n0.208235 1\n0.280205 24\n0.816114 21\n0.000055 1\n0.071778 28\n0.112055 28\n0.128226 28\n0.064054 34\n0.128007 21\n0.000065 28\n0.096041 28\n0.072935 28\n0.086805 28\n0.104402 28\n0.095481 28\n2.128496 28\n0.216012 28\n0.063970 28\n0.159882 28\n0.056128 28\n0.248010 28\n0.336075 4\n0.344228 28\n0.047657 28\n0.031649 28\n0.344113 30\n0.077601 3\n0.439349 30\n1.763741 30\n0.151919 30\n0.072064 30\n0.191908 30\n0.095607 30\n0.040450 30\n0.176692 33\n0.295509 33\n0.135792 33\n0.159892 33\n0.135874 33\n0.136609 30\n0.503693 35\n0.103932 22\n0.000047 30\n0.160920 30\n0.175064 30\n0.056157 30\n0.191687 30\n0.033120 30\n0.047300 30\n0.135965 30\n0.224172 30\n0.303732 33\n0.197086 1\n0.606961 115\n0.041627 109\n0.038644 65\n0.012202 18\n0.276385 9\n1.878064 194\n0.000029 8\n0.151738 28\n0.723949 51\n0.063640 1\n0.136110 1\n0.000710 28\n0.895588 28\n0.136061 28\n0.200047 28\n0.056020 66\n0.095517 28\n0.080639 28\n0.372069 25\n0.268557 75\n0.000061 2\n0.091454 28\n1.115583 3\n0.079334 45\n0.193836 3\n0.103230 28\n0.471940 28\n0.159827 28\n0.232399 28\n0.083048 28\n0.116822 28\n0.175896 66\n0.482963 65\n0.123134 8\n0.207679 25\n0.235635 160\n0.000494 8\n0.138037 28\n0.275765 3\n0.120010 45\n0.176431 1\n0.095913 28\n0.176278 28\n0.104127 28\n0.215814 28\n0.047839 28\n0.096020 28\n0.088293 66\n0.633787 1\n0.434766 33\n0.235543 33\n0.143863 33\n0.144078 33\n0.143848 33\n0.152211 33\n0.136027 30\n0.671968 3\n0.589159 65\n0.389232 1\n0.546344 31\n0.346550 4\n0.499803 53\n0.001167 44\n0.001508 55\n0.049112 4\n0.048065 17\n0.050087 21\n0.000032 14\n0.052008 23\n0.000452 36\n0.048231 34\n0.050438 32\n0.049767 6\n0.133859 28\n0.669561 51\n0.034728 32\n0.062715 28\n0.103753 28\n0.926895 3\n0.193761 1\n0.072193 49\n0.000044 1\n0.416087 28\n0.288105 65\n0.578460 72\n0.333471 865\n0.000070 283\n0.000565 65\n0.349152 65\n0.183975 3\n0.706291 31\n0.411398 6\n0.265609 1\n0.336668 34\n0.410348 32\n0.359898 32\n0.247965 32\n0.064090 32\n0.231792 35\n0.416579 35\n0.120069 32\n0.287872 32\n0.199750 32\n0.071787 32\n0.096068 32\n0.063664 32\n0.528630 32\n4.391883 32\n0.383962 32\n0.248058 35\n0.384208 32\n0.039847 32\n0.151714 32\n0.168970 35\n2.073060 35\n0.126238 32\n0.248090 32\n0.047874 35\n0.152160 35\n0.112251 35\n0.119900 32\n0.064819 32\n0.038762 32\n0.040178 32\n0.120640 32\n0.215544 32\n0.127837 32\n0.088003 32\n0.136157 32\n0.888551 32\n0.071898 32\n0.999709 178\n0.250218 45\n0.213706 59\n0.104306 38\n1.028553 8\n1.001875 32\n0.913750 111\n0.744427 9\n0.158912 1\n0.000029 8\n0.159466 2\n0.143689 4\n0.000028 8\n0.384228 5\n0.143883 6\n0.352122 1\n0.000029 7\n0.297455 7\n0.135631 7\n0.500109 7\n0.049874 7\n0.050451 7\n0.052086 5\n0.048920 1\n0.000027 5\n0.050870 7\n0.050355 7\n0.253473 30\n0.720782 32\n0.041800 3\n0.497400 65\n0.539291 64\n0.141598 38\n0.227444 160\n0.000669 2\n0.090903 28\n0.659970 28\n0.624842 28\n0.159634 3\n0.161036 3\n0.151371 45\n0.000089 3\n0.095622 28\n0.135903 8\n0.328361 28\n0.255927 28\n0.223993 28\n0.095900 28\n0.168839 28\n0.031180 28\n0.111972 28\n0.175951 28\n0.128042 28\n0.071881 28\n0.144111 28\n0.120007 28\n0.064155 65\n0.374454 3\n0.252774 1\n0.207955 31\n0.164266 31\n0.499725 31\n0.050189 31\n0.049773 31\n0.049874 31\n0.052661 31\n0.047637 31\n0.050996 31\n0.051220 80\n0.051565 57\n0.050344 55\n0.197797 53\n0.400018 53\n0.184034 53\n0.168161 65\n0.463013 1\n0.196807 1\n0.167716 32\n0.661683 32\n0.255853 65\n0.574866 1\n0.179987 1\n0.208087 1\n0.311760 1\n0.152094 31\n0.253518 65\n0.149559 4\n0.079328 3\n0.493277 3\n0.144355 3\n0.127880 35\n1.730863 35\n0.135948 170\n0.354693 29\n0.001630 22\n0.230290 23\n0.000114 22\n0.199941 23\n0.000117 22\n0.023928 23\n0.000089 22\n0.264027 23\n0.000678 22\n0.127345 23\n0.000037 47\n0.325678 47\n0.119849 47\n0.135886 47\n0.136326 22\n0.122148 23\n0.000071 22\n0.095757 23\n0.000050 484\n0.509367 409\n0.000118 22\n0.106445 23\n0.000077 22\n0.223826 23\n0.000048 30\n0.359939 29\n0.001227 275\n0.511560 329\n0.003971 1\n0.142100 47\n0.643363 3\n0.340441 32\n1.174196 32\n0.247824 32\n0.183628 32\n0.168386 2\n0.674377 30\n0.765782 108\n0.253710 70\n0.519581 8\n0.551374 2\n0.448028 4\n0.000030 8\n0.192121 69\n0.183538 69\n0.274905 1\n0.498064 1\n0.000944 8\n0.000089 19\n0.051037 55\n0.001379 46\n0.002039 29\n0.047532 19\n0.049287 19\n0.047813 16\n0.049568 12\n0.050205 10\n0.050355 14\n0.049688 20\n0.050501 20\n0.049695 20\n0.049812 20\n0.049998 17\n0.050374 13\n0.050549 11\n0.051183 2\n0.052028 12\n0.000028 20\n0.050453 20\n0.050681 20\n0.052260 20\n0.050033 20\n0.050427 1\n0.051091 13\n0.000055 1\n0.049772 11\n0.000042 2\n0.049798 12\n0.000030 20\n0.051259 3\n0.575782 5\n0.000067 7\n0.956578 7\n0.504095 7\n0.049902 7\n0.050276 7\n0.050086 7\n0.050134 5\n0.051087 1\n0.000056 5\n0.050790 7\n0.049617 7\n0.054341 13\n0.452622 5\n0.554710 10\n0.496938 19\n0.050441 19\n0.050670 19\n0.050004 19\n0.049712 16\n0.051046 1\n0.050075 11\n0.000078 2\n0.078186 8\n0.000071 2\n0.022896 12\n0.000031 20\n0.049741 20\n0.050863 20\n0.050523 20\n0.050459 15\n0.050082 2\n0.000030 3\n0.050794 10\n0.000103 10\n0.050147 1\n0.000031 2\n0.050111 12\n0.000029 20\n0.050964 20\n0.051076 20\n0.050660 20\n0.050743 20\n0.050096 14\n0.051261 10\n0.050651 2\n0.000063 1\n0.050495 13\n0.001132 20\n0.049562 20\n0.445238 2\n0.384569 12\n0.000031 2\n0.499962 13\n0.000028 2\n0.049165 14\n0.000031 20\n0.050120 20\n0.049958 20\n0.054651 20\n0.045648 1\n0.051334 14\n0.000042 11\n0.050885 11\n0.050434 11\n0.051151 11\n0.050304 14\n0.050794 8\n0.273176 4\n0.143948 30\n0.770266 32\n0.033856 3\n0.416966 1\n0.151841 1\n0.248294 4\n0.138381 3\n0.469887 170\n3.237150 29\n0.000135 389\n0.509689 409\n0.000199 22\n0.913883 23\n0.000118 22\n0.503555 23\n0.001649 22\n0.142718 23\n0.001223 22\n1.086961 23\n0.000046 22\n0.271734 23\n0.000062 22\n0.791870 23\n0.000047 22\n0.111744 23\n0.000069 30\n0.385083 29\n0.000055 180\n0.510632 360\n0.000045 32\n0.329603 32\n0.991774 32\n0.256355 32\n0.224810 32\n0.222487 32\n1.424249 32\n0.192085 32\n0.103360 32\n0.168218 115\n0.539729 109\n0.040741 65\n0.011857 18\n8.177476 71\n0.032323 181\n4.305387 2\n0.238244 20\n0.113371 2\n0.272781 36\n0.355512 7\n0.000010 1737\n0.015966 56\n0.000231 36\n0.000391 115\n0.000012 96\n0.000010 49\n0.000009 93\n0.000011 40\n0.000011 47\n0.000010 2\n0.000009 96\n0.020818 18\n0.812831 23\n0.129157 33\n0.337466 125\n0.001294 924\n0.000678 523\n0.000464 65\n1.767379 65\n0.497117 65\n0.049809 64\n0.050430 65\n0.051051 64\n0.050992 64\n0.050673 64\n0.050359 63\n0.284715 171\n0.327900 7\n0.263101 2\n0.325406 121\n0.279577 3\n0.151315 41\n0.271898 41\n0.327984 41\n0.088865 41\n0.079300 2\n0.087714 41\n0.216370 3\n0.143680 41\n0.186663 41\n0.037585 3\n0.128076 41\n0.151700 41\n0.096261 41\n0.079648 1\n0.103953 41\n0.048157 41\n0.136434 41\n0.087701 3\n0.112024 41\n0.136130 41\n0.056419 41\n0.103573 41\n0.095788 3\n0.088084 41\n0.103888 41\n0.079841 41\n0.096320 41\n0.023715 3\n0.120563 41\n0.167965 41\n0.079640 3\n0.120198 41\n0.072175 41\n0.119982 41\n0.079848 41\n0.112774 41\n0.063271 41\n0.112024 41\n0.055866 41\n0.128261 41\n0.184083 3\n0.063669 41\n0.080113 41\n0.176207 41\n0.160085 41\n0.072032 43\n0.296197 43\n0.080011 41\n0.143748 41\n0.023421 41\n0.328722 41\n0.231633 41\n0.056562 41\n0.135748 41\n0.111760 114\n0.485040 108\n0.030408 64\n0.013448 73\n0.332815 64\n0.174672 64\n0.192017 2\n0.293155 922\n0.000044 440\n0.000610 65\n1.210670 1\n0.422546 1\n0.500414 1\n0.050708 1\n0.049360 1\n0.050349 1\n0.049875 1\n0.050535 1\n0.050653 1\n0.050946 1\n0.051820 1\n0.048611 1\n0.050908 1\n0.050643 1\n0.050181 1\n0.050686 1\n0.051017 1\n0.050531 1\n0.050385 1\n0.050116 1\n0.050940 1\n0.051224 1\n0.050831 1\n0.050930 1\n0.246082 44\n0.553229 59\n0.000896 73\n0.203797 73\n0.079832 45\n0.138769 1\n0.000071 1\n0.000048 23\n0.000056 69\n0.077638 47\n0.408068 21\n0.000029 73\n0.072651 73\n0.599056 73\n0.040305 73\n0.087711 72\n0.184024 72\n0.207743 73\n0.553028 72\n0.063109 65\n0.366559 65\n0.132262 65\n0.128060 64\n0.135587 198\n0.453396 198\n0.103015 64\n0.175745 8\n0.107458 2\n0.356631 122\n0.207018 3\n0.144123 41\n0.184002 41\n0.207764 41\n0.095833 41\n0.080221 2\n0.184383 41\n0.287510 3\n0.168205 41\n0.176182 41\n0.063824 3\n0.119827 41\n0.240589 41\n0.063962 41\n0.095920 1\n0.087671 41\n0.095735 41\n0.104501 41\n0.079343 3\n0.113263 41\n1.377664 41\n0.053681 41\n0.040434 41\n0.063571 41\n0.095811 3\n0.087878 41\n0.104516 41\n0.143809 3\n0.064142 41\n0.080124 41\n0.032071 41\n0.088192 3\n0.127635 41\n0.239645 41\n0.336577 41\n0.111573 41\n0.096530 41\n0.047808 41\n0.116833 41\n0.005326 41\n0.109779 3\n0.095985 41\n0.487880 41\n0.095609 41\n0.168558 41\n0.111726 41\n0.080590 115\n0.412985 109\n0.031921 65\n0.012168 35\n0.571955 147\n0.001146 1\n0.157345 28\n0.267334 51\n0.048081 32\n0.095793 28\n0.088427 28\n0.160014 3\n0.224072 2\n0.104633 47\n0.000032 1\n0.104740 28\n0.631051 28\n0.143998 28\n0.104118 47\n0.056878 115\n0.436585 109\n0.033827 65\n0.013263 46\n0.246472 135\n0.001747 2\n0.174319 20\n0.121220 2\n0.175594 36\n0.338632 7\n0.000012 1737\n0.015806 298\n0.035864 81\n0.683742 81\n0.186823 81\n0.315916 81\n0.185553 81\n0.194147 78\n0.126323 82\n0.121332 83\n0.183283 83\n0.122845 83\n0.123787 77\n0.190798 79\n0.124648 7\n0.245592 52\n0.000032 36\n0.001794 209\n0.000065 51\n0.000366 136\n0.000027 58\n0.000025 2\n0.000024 96\n0.052547 18\n0.677063 23\n0.113296 9\n0.886833 1778\n0.004724 64\n0.697010 65\n0.219568 66\n0.232042 65\n0.504044 65\n0.440318 3\n0.078691 3\n0.501388 2\n0.050311 1\n0.051021 3\n0.050983 3\n0.050810 3\n0.050763 3\n0.050528 65\n0.080742 1\n0.210356 141\n0.281318 8\n0.097711 28\n0.417543 28\n0.255563 28\n0.295950 1\n0.200574 62\n0.192983 3\n0.153065 28\n0.103582 28\n0.159633 28\n0.007374 55\n0.153060 28\n0.087425 28\n0.095712 28\n0.064244 28\n0.152031 28\n0.056142 28\n0.055871 28\n0.136340 28\n0.223856 36\n0.191905 22\n0.000034 31\n0.498578 149\n0.322226 790\n0.000134 136\n0.000037 3\n0.852280 3\n0.160128 37\n0.301777 31\n0.500634 31\n0.049339 31\n0.051936 31\n0.050088 31\n0.050072 46\n0.050839 44\n0.050148 42\n0.050465 40\n0.050366 38\n0.050693 36\n0.049987 34\n0.050541 32\n0.176884 30\n0.392454 30\n0.263921 30\n0.247880 115\n0.179429 109\n0.044180 65\n0.013732 181\n0.221770 2\n0.158431 20\n0.121307 2\n0.191557 36\n0.351569 7\n0.000012 1737\n0.015981 298\n0.035496 81\n0.496163 81\n0.189960 81\n0.184306 81\n0.123057 81\n0.185689 78\n0.192367 76\n0.062119 82\n0.061655 83\n0.123680 83\n0.122514 83\n0.187515 79\n0.187380 253\n0.251093 160\n0.648008 155\n0.059771 172\n0.487553 161\n0.696236 87\n0.127764 78\n0.181147 78\n0.179112 163\n0.063650 150\n0.701564 163\n0.547965 150\n0.695049 163\n0.558834 150\n0.696242 163\n0.543927 150\n0.695668 163\n0.548412 150\n0.694131 163\n0.540608 150\n0.704273 163\n0.543747 150\n0.693262 163\n0.546008 150\n0.707018 182\n0.062070 102\n0.788784 93\n1.507134 91\n1.074331 7\n0.510477 52\n0.000032 96\n0.058116 18\n0.311784 23\n0.130060 1470\n0.305529 65\n1.432882 65\n0.165260 64\n0.271953 65\n0.151848 65\n0.303694 1\n0.414725 72\n0.000112 4\n0.157282 4\n0.135862 6\n0.136326 55\n0.000810 46\n0.001224 45\n0.757667 30\n0.067853 6\n0.151112 114\n0.049678 108\n0.036567 64\n0.011969 181\n0.351080 2\n0.366296 20\n0.113178 2\n0.177426 36\n0.352717 7\n0.000012 1737\n0.015842 298\n0.035959 81\n0.322547 81\n0.124463 81\n0.186848 81\n0.125863 81\n0.188355 78\n0.125237 82\n0.124810 77\n0.062837 83\n0.134206 83\n0.131651 83\n0.124221 79\n0.184271 253\n0.323747 88\n0.340771 77\n0.199217 194\n0.127701 77\n0.254835 155\n0.061201 85\n0.732660 85\n0.181664 85\n0.183362 87\n0.121507 172\n0.568834 89\n0.266570 78\n0.132508 78\n0.127613 150\n0.123452 182\n0.367429 102\n0.376284 93\n0.241498 91\n0.185457 19\n0.635971 40\n0.000031 96\n0.062853 18\n0.158121 23\n0.145465 1454\n0.316559 102\n1.766049 29\n0.000035 1659\n0.441373 65\n1.190945 65\n0.497475 64\n0.339716 64\n0.680438 64\n0.239799 64\n0.671550 64\n0.144325 1\n0.215174 66\n0.565629 30\n0.164830 53\n0.079731 30\n0.184098 30\n0.375838 30\n0.144269 55\n0.079851 30\n0.112363 30\n0.375727 30\n0.168912 30\n0.119166 49\n0.047867 64\n1.002040 73\n0.005876 88\n0.977163 17\n0.284221 114\n0.033877 108\n0.032127 64\n0.013748 181\n0.321883 2\n0.326189 20\n0.121319 2\n0.175368 36\n0.355450 7\n0.000011 1737\n0.016333 298\n0.036268 81\n0.204441 81\n0.214427 81\n0.135180 81\n0.130946 81\n0.188419 73\n0.062623 79\n0.190961 82\n0.130949 83\n0.125675 83\n0.127002 83\n0.125895 79\n0.125152 92\n0.188939 92\n0.325444 253\n0.193246 88\n0.342211 77\n0.072285 155\n0.198304 195\n0.062388 231\n0.062792 102\n5.676211 87\n1.044962 78\n0.121617 91\n0.428987 91\n0.184712 91\n0.121863 90\n0.184199 89\n0.134441 89\n0.185852 84\n0.122181 165\n1.364887 85\n0.253993 85\n0.126774 198\n0.436291 82\n0.431172 82\n0.127287 83\n0.186380 84\n0.123776 84\n0.184131 84\n0.189954 85\n0.431757 85\n0.123678 87\n0.123208 254\n0.322399 89\n0.324417 78\n0.130903 78\n0.132757 150\n0.061839 232\n0.430749 102\n0.617958 7\n0.203817 12\n0.000032 37\n0.000087 96\n0.069080 18\n0.221547 23\n0.137364 33\n0.217381 125\n0.002040 994\n0.000379 365\n0.000156 533\n0.000284 144\n8.940816 1181\n0.000564 4\n0.918890 1\n0.000385 93\n0.000181 1\n0.000304 87\n0.000170 1\n0.000202 118\n0.000167 1\n0.000203 47\n0.000163 1\n0.000182 305\n0.000158 1\n0.000205 1\n0.000146 86\n0.000146 1\n0.000183 249\n0.000162 217\n0.000320 1\n0.000199 42\n0.000150 2\n0.000313 1\n0.000150 79\n0.000145 1\n0.000183 78\n0.000148 1\n0.000227 82\n0.000153 1\n0.000183 125\n0.000148 61\n5.203753 2\n0.323028 965\n0.000054 530\n0.000637 64\n4.379659 64\n0.499978 64\n0.049920 64\n0.050614 64\n0.050783 64\n0.049992 64\n0.050472 64\n0.050587 65\n0.050055 61\n0.049549 6\n0.055102 959\n0.000119 257\n0.000031 375\n0.000586 100\n3.660286 29\n0.000033 1162\n0.216255 65\n2.070797 65\n0.222244 65\n0.263466 65\n0.619298 2\n0.412845 65\n4.611364 25\n1.324709 149\n0.000039 8\n0.224784 28\n0.748002 51\n0.031839 2\n0.152289 28\n0.159726 28\n0.080111 53\n0.120209 47\n0.215836 28\n0.151818 28\n0.144282 28\n0.063964 62\n0.507854 55\n0.204601 28\n0.255569 28\n0.112145 28\n0.023620 28\n0.224248 28\n0.063847 28\n0.048095 28\n0.192956 44\n0.723403 29\n0.000115 2\n0.155987 47\n0.508948 67\n0.000051 28\n0.835293 28\n0.136241 3\n0.063502 28\n0.080552 28\n0.356412 65\n0.456751 1\n0.219872 64\n1.732379 64\n0.173231 64\n0.975772 8\n0.247542 1\n0.078758 1\n0.224616 1\n0.152137 37\n0.262223 37\n0.127965 34\n0.599627 65\n0.421639 1\n0.220161 13\n0.171738 8\n0.165102 1\n0.167273 33\n0.391032 30\n0.071859 1\n0.776795 3\n0.645453 47\n1.113138 96\n0.001746 72\n0.388510 65\n0.156977 282\n0.267521 47\n0.945249 96\n0.026979 15\n0.958886 12\n0.257958 3\n0.765856 3\n0.192820 1\n0.263333 33\n0.237935 30\n0.472069 115\n0.163335 109\n0.048729 65\n0.012443 181\n0.154386 2\n0.230437 20\n0.121458 2\n0.175402 36\n0.326593 7\n0.000012 1737\n0.016281 298\n0.036199 81\n0.395312 81\n0.171411 81\n0.292463 81\n0.142601 81\n0.197702 78\n0.125634 76\n0.126124 82\n0.189487 83\n0.138974 83\n0.126732 83\n0.188079 79\n0.251169 253\n0.385424 155\n0.195669 89\n0.129234 78\n0.130130 78\n0.132209 150\n0.061465 182\n0.303694 148\n1.180779 93\n0.248534 91\n0.184294 91\n0.124248 90\n0.191757 89\n0.121895 89\n0.181768 84\n0.243004 84\n0.122947 84\n0.184737 86\n0.123839 86\n0.560317 165\n0.245075 83\n0.189528 484\n0.753755 144\n0.571260 127\n0.779339 85\n0.252633 243\n0.510721 87\n0.466848 76\n0.133108 185\n0.064195 81\n0.188411 79\n0.191621 155\n0.064261 155\n0.124488 84\n0.193583 77\n0.194690 83\n0.193505 134\n0.133413 207\n0.246378 146\n0.430897 87\n0.366311 78\n0.186711 7\n0.568066 12\n0.000026 37\n0.000610 96\n0.052996 18\n0.302046 23\n0.129180 1575\n0.259296 65\n0.713263 64\n0.140260 65\n0.159875 63\n0.151808 64\n0.152077 24\n0.423293 147\n0.000077 1\n0.183692 28\n3.139690 28\n0.135893 28\n0.552283 3\n0.183605 2\n1.385582 58\n0.000026 3\n0.263859 28\n0.096306 28\n0.167671 28\n0.103976 55\n0.080750 5\n15.640893 1036\n0.001042 384\n0.000070 64\n0.903842 64\n0.494196 64\n0.050095 64\n0.050343 65\n0.050734 64\n0.051097 64\n0.050755 64\n0.050263 64\n0.051368 64\n0.050643 64\n0.050769 64\n0.049979 63\n0.050891 63\n0.050294 65\n0.051179 63\n0.249038 104\n0.249675 17\n0.093042 1\n0.359860 32\n0.732775 32\n0.143983 32\n1.647981 32\n0.248830 43\n0.522029 45\n0.000110 32\n0.444931 32\n0.432190 15\n0.371341 21\n0.000034 7\n1.001948 140\n0.552060 52\n0.000041 33\n2.946347 35\n0.136044 35\n0.168130 35\n0.160174 35\n0.151856 32\n0.800680 32\n0.183169 32\n0.072149 32\n0.232051 114\n0.436775 108\n0.033123 64\n0.014434 15\n0.754221 906\n0.000082 304\n0.000712 62\n2.261450 63\n0.223330 63\n0.176224 63\n0.183691 63\n0.184157 7\n0.367585 1\n0.215452 1\n0.499900 1\n0.049920 1\n0.050635 1\n0.050599 1\n0.789111 1\n0.000105 39\n0.000550 58\n0.000442 60\n0.137386 62\n0.162414 62\n0.141362 59\n0.160050 59\n0.360084 74\n0.407925 61\n0.039998 134\n0.481309 50\n0.414371 71\n0.001868 77\n0.479009 64\n0.135739 61\n0.119613 76\n0.112277 1\n0.661763 28\n0.738201 28\n0.912031 28\n0.127937 28\n0.143942 28\n0.128266 28\n0.135750 28\n0.112263 28\n0.095608 28\n0.200291 28\n0.031959 28\n1.711929 28\n0.272614 28\n0.063284 28\n0.372315 30\n0.035034 2\n1.001970 28\n1.675117 96\n0.268723 7\n0.451187 114\n0.561273 108\n0.037148 64\n0.013649 74\n1.144241 3\n0.173632 1\n0.118887 1\n0.208256 67\n0.366366 32\n0.276898 32\n0.263972 114\n0.326229 108\n0.050957 64\n0.013324 74\n1.000920 63\n1.219543 63\n0.556994 7\n0.237642 4\n0.267205 96\n0.415527 1\n0.186131 28\n0.740967 3\n0.071621 45\n0.280554 3\n0.103800 28\n0.216778 8\n0.559551 28\n0.055481 28\n0.184389 28\n0.200090 28\n0.055842 28\n0.103976 28\n0.064274 114\n1.710315 108\n0.039408 64\n0.012854 17\n1.009976 102\n0.276561 29\n0.000037 1\n0.726245 49\n0.002504 2\n0.000570 1\n0.000069 87\n0.000163 1\n0.000144 87\n0.000284 1\n0.000060 121\n0.000060 1\n0.000153 44\n0.000156 1\n0.000141 176\n0.000150 1\n0.000130 102\n0.000144 1\n0.000121 1\n0.000134 14\n0.000061 1\n0.000125 1\n0.000050 60\n0.000136 1\n0.000122 32\n0.000132 1\n0.000058 246\n0.000064 217\n0.000325 1\n0.000058 39\n0.000060 2\n0.000356 1\n0.000061 76\n0.000135 1\n0.000122 78\n0.000141 1\n0.000059 79\n0.000058 1\n0.000141 179\n0.000487 64\n1.049859 64\n0.497331 64\n0.307685 63\n0.280310 63\n0.168231 63\n0.159396 64\n0.487377 1\n0.183539 64\n1.394941 1\n0.413813 2\n0.361308 68\n0.000078 71\n0.819219 2\n0.383829 64\n0.000043 224\n0.808453 1\n0.355830 28\n1.610850 28\n0.191847 28\n0.224185 28\n0.127904 28\n0.216485 3\n0.143603 2\n0.216696 60\n0.000031 1\n0.120004 28\n0.287862 28\n0.152135 28\n0.072061 55\n0.104071 28\n0.112507 28\n0.103420 28\n0.144064 28\n0.119920 28\n1.376186 28\n0.639752 28\n0.119947 28\n0.088963 62\n0.144265 28\n0.031430 28\n0.087561 4\n0.400497 4\n0.127866 68\n0.120675 62\n0.087016 28\n0.120612 28\n0.063298 64\n0.546878 73\n0.005659 1\n1.060588 87\n0.002316 17\n0.283057 114\n0.066170 108\n0.034661 64\n0.013362 74\n0.432891 7\n0.206146 1\n0.070975 1\n0.184418 3\n0.679831 66\n0.235489 30\n0.161725 30\n0.152135 30\n0.175343 30\n0.136121 114\n0.356661 108\n0.054801 64\n0.012312 46\n0.290874 135\n0.001779 1\n1.150259 1\n0.031661 9\n0.152177 2044\n0.005022 64\n0.527240 86\n1.725399 174\n0.059670 1314\n1.143694 65\n3.449366 28\n0.301165 28\n0.208035 41\n0.507249 40\n0.000105 28\n0.724555 33\n0.356094 2\n0.720973 114\n0.049531 108\n0.034922 64\n0.013859 64\n0.508768 137\n0.000047 74\n1.196092 1\n0.332485 7\n1.144930 64\n11.978108 25\n0.395195 148\n0.000107 1\n0.311856 28\n0.676675 51\n0.056008 3\n0.120037 28\n0.456078 65\n0.688476 64\n0.341870 64\n0.160138 7\n0.191407 2\n0.235268 34\n0.000056 4\n0.135152 4\n0.127948 6\n0.136100 39\n0.231845 24\n0.035468 25\n0.000039 6\n0.193077 114\n0.058210 108\n0.034885 64\n0.014128 74\n0.671522 64\n0.142597 65\n0.216705 65\n1.349198 99\n0.260125 8\n0.106735 64\n8.525608 65\n0.142048 3\n0.287387 65\n1.817786 65\n0.542810 64\n0.207679 7\n0.351764 72\n4.035218 89\n0.000047 63\n0.170075 28\n1.240129 28\n0.484838 4\n0.207915 5\n0.136225 28\n0.087390 28\n0.208272 28\n0.087667 28\n0.168313 3\n0.159802 2\n0.152226 46\n0.000029 2\n0.128178 1\n0.511592 2\n0.288949 209\n0.359750 41\n0.200588 92\n0.167450 138\n0.288207 1\n0.122537 28\n0.685633 51\n0.144206 3\n0.238960 28\n0.440032 3\n0.183985 1\n0.896130 28\n0.247779 28\n0.560164 28\n0.023975 28\n0.047867 28\n0.511039 28\n0.875985 139\n0.277409 8\n0.114609 28\n0.284974 28\n0.231906 28\n0.200193 28\n0.160026 3\n0.120009 51\n0.168153 3\n0.055664 28\n0.120384 28\n0.168066 28\n0.167909 28\n0.159632 28\n0.168574 28\n0.128007 28\n0.976185 28\n0.695691 28\n0.127784 28\n0.143792 28\n0.136395 28\n0.063966 115\n0.662375 109\n0.066776 65\n0.012626 75\n3.410147 65\n1.677794 65\n11.496322 65\n0.159840 25\n0.709484 149\n0.000428 139\n0.668582 8\n0.722452 64\n0.517293 8\n0.394122 2\n0.572986 28\n3.808278 51\n0.047825 32\n0.096003 28\n0.232094 28\n0.720102 3\n0.248182 28\n0.304078 2\n0.208018 48\n0.000028 3\n0.079685 28\n0.440283 99\n0.296429 8\n0.409308 2\n0.453738 3\n0.361087 3\n0.143446 3\n0.499966 3\n0.050562 3\n0.051336 3\n0.051006 2\n0.050316 1\n0.050424 3\n0.049963 3\n0.050859 7\n0.425555 3\n0.506839 53\n0.000029 66\n0.248293 64\n1.002352 108\n0.571205 1\n0.092237 5\n0.217720 9\n0.469151 15\n0.049567 19\n0.050699 19\n0.050217 19\n0.050898 14\n0.210231 2\n0.000029 1\n0.151923 1\n0.000070 7\n0.000049 1\n0.000048 1\n0.000057 1\n0.135872 8\n0.000053 12\n0.128859 65\n0.183981 8\n0.189339 121\n1.657869 3\n0.391942 3\n0.499908 3\n0.049818 3\n0.050474 3\n0.050413 3\n0.050773 2\n0.051226 1\n0.050461 3\n0.049774 3\n0.051317 3\n0.051278 3\n0.049820 3\n0.050675 3\n0.050868 2\n0.051184 1\n0.050661 3\n0.050949 3\n0.245507 65\n0.471974 3\n0.671177 28\n0.295918 5\n0.506590 49\n0.000928 28\n1.476654 28\n0.199605 28\n0.352189 28\n0.088088 28\n0.095500 28\n0.088027 28\n0.696561 28\n0.423670 28\n0.232269 28\n0.095646 28\n0.128471 36\n0.339228 2\n1.001750 80\n0.507684 28\n0.151156 65\n0.568628 3\n0.183236 28\n0.943726 53\n0.508093 205\n1.836123 484\n0.508455 409\n0.000190 41\n0.275568 41\n0.207894 41\n0.047940 3\n0.424008 41\n1.808219 41\n1.712067 75\n0.527757 28\n0.272501 28\n0.175603 28\n0.208367 28\n0.167255 28\n0.184402 36\n0.459327 8\n1.001916 100\n0.508933 263\n0.000045 161\n3.510537 47\n0.499507 47\n0.049825 2\n0.049850 39\n0.000031 2\n0.050063 40\n0.000033 2\n0.049782 41\n0.000032 47\n0.050540 47\n0.050599 47\n0.050773 47\n0.049945 43\n0.050796 39\n0.050624 39\n0.051972 39\n0.050223 39\n0.051017 42\n0.051369 36\n0.208677 32\n0.152183 115\n0.373730 109\n0.031046 65\n0.012135 18\n0.556519 1\n3.566881 1\n0.568209 65\n2.283438 65\n0.221555 65\n0.248159 25\n0.524382 149\n0.001462 8\n0.175408 2\n0.684958 8\n1.034404 28\n0.404831 51\n0.056455 32\n0.048916 56\n0.001494 47\n0.001858 46\n0.163889 28\n0.351628 3\n1.312266 28\n0.183514 55\n0.336895 3\n0.111573 28\n0.344038 47\n0.507829 30\n0.601056 3\n0.416508 30\n0.258891 60\n0.535144 30\n1.248592 65\n0.464775 64\n0.497206 65\n0.049336 65\n0.050167 65\n0.050454 64\n0.050143 48\n0.053978 704\n0.000043 231\n0.000514 65\n0.046183 65\n0.319414 65\n0.500057 65\n0.050646 64\n0.050523 63\n0.050565 64\n0.049900 64\n0.049818 64\n0.200014 85\n0.509086 30\n0.749133 30\n0.248130 30\n0.168006 30\n0.096117 30\n0.064173 30\n0.103610 30\n0.840111 30\n0.296200 64\n0.686818 146\n1.177374 7\n0.251187 28\n0.812279 28\n0.071758 28\n0.128317 28\n0.168092 3\n0.111844 51\n0.240355 3\n0.183937 28\n2.152385 28\n0.247689 28\n0.055992 28\n0.071944 28\n0.023960 28\n0.072102 28\n0.176015 28\n0.248125 28\n0.071783 28\n0.152134 28\n0.192402 28\n0.095437 64\n0.447118 1\n0.405871 33\n1.530958 30\n0.287797 30\n0.088197 30\n0.127859 30\n0.168202 30\n1.040002 188\n0.232347 43\n0.296104 57\n0.103714 9\n1.939438 3\n0.003471 22\n0.000031 2\n0.235314 31\n0.000100 105\n0.262084 5\n0.122487 15\n0.496722 17\n0.050738 2\n0.051014 12\n0.000090 2\n0.051074 11\n0.000031 2\n0.054835 10\n0.000029 17\n0.046437 13\n0.050482 1\n0.000042 13\n0.051610 18\n0.049992 18\n0.050468 1\n0.049364 14\n0.001077 14\n0.050160 2\n0.050626 11\n0.000043 18\n0.050700 14\n0.051799 1\n0.000056 14\n0.049993 18\n0.050439 18\n0.050466 2\n0.050533 13\n0.000029 2\n0.050128 12\n0.000027 2\n0.050229 11\n0.000051 18\n0.050707 15\n0.348504 1\n0.000043 14\n0.192170 2\n0.000042 14\n0.311623 2\n0.000045 7\n0.500295 4\n0.000097 8\n0.049695 4\n0.000094 2\n0.049929 11\n0.000097 17\n0.049724 16\n0.050129 15\n0.050682 14\n0.050526 13\n0.051176 1\n0.156190 5\n0.000084 66\n0.510416 136\n0.000035 32\n0.432791 34\n0.035482 1\n0.529505 34\n0.997781 34\n0.304092 34\n2.792081 37\n0.989140 37\n0.152259 37\n0.152062 200\n0.358326 23\n0.340319 24\n0.000046 23\n0.239859 24\n0.000045 23\n0.159892 24\n0.009740 959\n0.509058 434\n0.003939 23\n0.695860 24\n0.000017 23\n0.399876 24\n0.000018 23\n0.300778 24\n0.000046 23\n0.136131 24\n0.000099 31\n0.316739 28\n0.000044 639\n0.503873 254\n0.000015 34\n0.014667 34\n0.965200 34\n0.279985 34\n0.264081 34\n0.207790 34\n2.216030 34\n0.216131 34\n0.095833 34\n0.152171 34\n0.176027 64\n0.749161 1\n0.213143 1\n0.499679 1\n0.050060 1\n0.050160 1\n0.051201 1\n0.050091 1\n0.051422 1\n0.050267 1\n0.050965 1\n0.050194 1\n0.050237 1\n0.050436 1\n0.050005 1\n0.050099 1\n0.050009 1\n0.049795 1\n0.050734 1\n0.050563 1\n0.865306 33\n0.000083 226\n0.320641 146\n0.351752 32\n0.368038 223\n0.209417 146\n0.119332 42\n0.509354 43\n0.000139 14\n0.141390 23\n0.000112 1\n0.301205 1\n0.000078 34\n0.000064 197\n0.463282 7\n0.087493 7\n0.499903 7\n0.049506 7\n0.050185 7\n0.050055 7\n0.050553 6\n0.051177 4\n0.050453 1\n0.000446 7\n0.050791 7\n0.050215 7\n0.051136 7\n0.050734 7\n0.051332 7\n0.050582 6\n0.050423 5\n0.050821 7\n0.051418 7\n0.050155 7\n0.049390 7\n0.050030 7\n0.050518 7\n0.078154 5\n0.022783 1\n0.000030 5\n0.263249 2\n0.400061 5\n0.000025 54\n0.000957 45\n0.001850 115\n0.508752 84\n0.000148 23\n0.072225 7\n0.499793 7\n0.050975 7\n0.049960 7\n0.049821 7\n0.050010 4\n0.051430 1\n0.000071 1\n0.000058 5\n0.049389 7\n0.050899 7\n0.050186 7\n0.050329 7\n0.050634 7\n0.050624 7\n0.433596 5\n0.175898 1\n0.000031 114\n0.550090 108\n0.034184 64\n0.012503 74\n0.386409 64\n0.498376 64\n0.050618 64\n0.049873 64\n0.050948 181\n1.444757 2\n0.374276 20\n0.121308 2\n0.591223 36\n0.375339 7\n0.000012 1737\n0.016595 7\n0.000302 12\n0.000011 37\n0.000124 34\n0.000599 117\n0.000012 312\n0.000226 96\n0.020875 18\n3.913379 23\n0.113557 33\n2.249186 125\n0.001479 930\n0.000464 390\n0.000286 64\n0.900762 3\n0.326824 3\n0.499943 2\n0.050630 1\n0.050473 3\n0.051060 3\n0.267941 71\n2.382079 36\n0.148844 34\n0.168203 32\n0.151788 3\n0.479975 114\n0.270484 108\n0.038510 64\n0.013189 74\n0.820595 98\n0.162813 463\n0.000035 185\n0.000034 133\n0.000318 65\n1.372011 64\n0.788932 1\n0.429018 225\n0.248644 115\n0.749979 109\n0.031761 65\n0.012423 181\n2.115547 2\n0.181874 20\n0.113610 2\n0.189540 36\n0.371597 7\n0.000012 1737\n0.016039 326\n0.036884 81\n0.477999 81\n0.444368 81\n0.186400 81\n0.124574 145\n0.436220 121\n0.932889 155\n0.336586 77\n0.180502 82\n0.303429 153\n0.183230 122\n7.303264 82\n0.185029 83\n0.128746 84\n0.182119 84\n0.184428 78\n0.181066 154\n0.256227 125\n0.559030 91\n0.192015 91\n0.180152 90\n0.121096 84\n0.179843 89\n0.183161 158\n0.182430 117\n0.980147 82\n0.429927 82\n0.120213 83\n0.180924 84\n0.181655 84\n0.132262 154\n0.138483 254\n0.483226 127\n0.280572 84\n0.193042 84\n0.128255 143\n0.060800 90\n0.248608 89\n0.188977 164\n0.124898 89\n0.064016 153\n0.128875 151\n0.513095 325\n0.561815 82\n0.513618 151\n0.200022 82\n0.035119 164\n0.344624 197\n0.246567 83\n0.668785 84\n0.182490 84\n0.179995 154\n0.122370 254\n0.372050 127\n0.257481 84\n0.133438 84\n0.194413 143\n0.061647 282\n0.314543 147\n2.990507 124\n0.542568 89\n0.192300 82\n1.044093 153\n0.244726 124\n2.022202 89\n0.121754 89\n0.182548 165\n0.247200 83\n0.250281 83\n0.186135 83\n0.315210 484\n0.183855 152\n0.444344 243\n0.384001 151\n0.652287 162\n0.577053 118\n0.398600 168\n0.329321 155\n0.436832 173\n0.127288 7\n0.084962 12\n0.000030 40\n0.000025 96\n0.051802 18\n0.534723 23\n0.145550 33\n0.289485 125\n0.001237 1224\n0.000409 62\n1.543712 65\n0.189291 65\n0.167974 65\n0.184301 1\n0.182810 1\n0.152010 1\n0.168032 1\n0.184191 1\n0.143945 1\n0.143996 39\n0.151321 59\n0.000113 115\n0.632201 109\n0.041287 65\n0.041590 181\n0.334263 2\n0.182444 20\n0.417575 2\n0.193337 36\n0.408307 7\n0.000012 1737\n0.016217 326\n0.036284 81\n0.934454 81\n0.198979 81\n0.190229 81\n0.187894 145\n0.253716 155\n0.885928 122\n15.365103 82\n0.183680 83\n0.126632 84\n0.185356 84\n0.123069 84\n0.122966 148\n0.122143 125\n2.266505 91\n0.121076 91\n0.181671 90\n0.121738 89\n0.183868 89\n0.123775 153\n0.185735 117\n0.920062 82\n0.185566 82\n0.243611 83\n0.123066 84\n0.122317 84\n0.184265 154\n0.121228 125\n1.531437 91\n0.184594 91\n0.186010 90\n0.124200 84\n0.243741 89\n0.123311 158\n0.182281 122\n2.770142 82\n0.247948 83\n0.124455 84\n0.183432 84\n0.122488 84\n0.184042 148\n0.061480 254\n5.090298 127\n0.455421 84\n0.130154 195\n0.062068 91\n0.123285 156\n0.429720 410\n0.063119 147\n2.882139 124\n0.494944 89\n0.242978 89\n0.248515 153\n0.186557 117\n0.676692 77\n0.182870 77\n0.183336 77\n0.184893 77\n0.182999 7\n1.179434 49\n0.000031 96\n0.054007 18\n0.296659 23\n0.153503 1383\n0.442658 65\n3.641742 65\n0.496821 65\n0.049980 65\n0.049990 65\n0.050379 65\n0.050339 64\n0.051064 65\n0.050542 64\n0.050773 64\n0.129972 70\n1.583027 74\n0.994475 102\n6.481385 771\n0.000047 208\n0.000668 147\n0.000025 292\n0.545153 679\n0.000089 99\n0.000087 473\n0.001742 139\n0.840628 776\n0.000044 103\n0.000132 239\n0.000522 5\n0.177783 689\n0.000094 86\n0.000644 165\n0.000292 116\n0.424476 823\n0.000041 63\n0.000084 45\n0.000485 90\n0.000436 295\n0.000031 83\n0.957928 828\n0.000122 260\n0.000032 2\n0.000074 60\n0.000507 204\n0.000038 5\n1.235932 946\n0.000042 2\n0.000069 61\n0.000520 45\n0.000029 2\n0.000375 377\n0.000031 4\n0.541048 783\n0.000050 163\n0.000333 62\n2.899182 63\n0.499397 63\n0.050767 63\n0.050897 63\n0.050961 63\n0.050878 64\n0.049790 64\n0.050326 64\n0.050346 64\n0.050798 64\n0.050664 64\n0.049732 64\n0.050557 64\n0.050976 64\n0.050053 64\n4.187342 64\n0.499722 64\n0.049894 64\n0.050225 64\n0.050795 64\n0.051479 64\n0.050288 63\n0.051259 64\n0.050064 63\n0.050134 63\n0.050573 63\n0.050034 63\n0.049982 62\n0.051908 61\n0.050743 283\n0.056184 662\n0.000090 281\n0.000794 64\n0.043944 64\n0.050622 64\n0.498762 64\n0.500083 64\n0.050296 64\n0.049676 64\n0.280201 64\n0.151780 64\n0.247440 64\n0.972320 64\n0.691828 65\n0.183981 25\n13.182258 149\n0.000047 99\n0.156066 64\n0.345831 64\n0.540160 8\n0.973133 2\n0.725003 217\n0.743915 104\n0.506036 422\n0.000045 12\n0.453890 28\n0.287939 51\n0.080160 3\n0.111777 214\n0.280554 41\n0.351724 43\n0.336072 41\n0.111929 41\n0.224033 41\n0.168062 41\n0.200073 41\n0.079929 41\n0.904018 57\n0.200322 3\n0.175756 104\n0.506382 229\n0.000041 28\n0.341971 51\n0.055595 1\n0.344641 1\n0.000742 28\n0.486585 28\n0.122100 28\n0.078023 55\n0.160437 28\n0.095648 28\n0.111878 28\n0.047906 28\n0.200074 28\n0.119784 28\n0.056561 28\n0.167803 28\n1.067414 99\n0.981043 8\n0.170410 65\n0.295190 64\n0.156245 37\n0.370165 172\n0.000031 8\n0.418594 2\n0.373078 122\n0.240820 3\n0.343526 41\n1.895606 41\n0.137261 3\n0.134772 41\n0.648048 41\n0.192845 41\n0.110924 41\n0.176460 41\n0.034181 41\n0.117397 3\n0.112952 41\n0.055173 41\n0.088122 2\n0.095909 41\n0.168418 41\n0.057983 3\n0.013754 41\n0.104057 41\n0.079674 3\n0.232330 41\n0.128242 43\n0.256795 1\n0.094889 41\n0.087937 3\n0.128209 41\n0.063904 41\n0.048002 41\n0.192450 41\n0.039307 41\n0.040023 41\n0.144153 41\n0.192279 3\n0.055813 41\n0.048207 41\n0.047658 3\n0.056735 41\n0.207623 41\n0.072601 41\n0.143444 41\n0.047522 3\n0.096250 41\n0.128140 41\n0.111710 3\n0.048272 41\n0.095720 41\n0.152311 41\n0.032161 3\n0.137167 41\n0.070564 41\n0.104226 41\n0.072257 3\n0.103667 41\n0.079920 41\n0.160179 41\n0.180346 41\n0.051849 41\n0.055542 41\n0.087965 41\n0.048126 41\n0.103772 41\n0.168244 211\n0.224706 1\n0.449850 122\n0.365263 3\n0.127873 41\n0.111786 41\n0.056343 41\n0.096032 41\n0.071722 41\n0.160277 41\n0.064021 3\n0.104143 41\n0.087948 41\n0.057692 3\n0.069970 41\n0.312132 41\n0.063874 41\n0.160439 41\n0.071552 3\n0.088736 41\n0.055152 41\n0.088510 41\n0.103677 3\n0.088104 41\n0.152978 41\n0.135365 41\n0.039853 41\n0.191930 41\n0.095913 41\n0.047927 41\n0.184294 64\n0.561807 62\n0.467162 28\n2.828738 28\n0.133675 65\n0.475457 65\n0.154569 8\n0.271323 35\n0.219994 188\n0.000035 1\n0.113649 28\n0.269003 28\n0.224264 28\n0.136036 28\n0.487688 28\n0.560447 3\n0.103669 28\n0.075297 28\n0.276782 28\n0.079589 28\n0.184354 3\n0.144309 3\n0.216100 1\n0.471873 2\n0.127958 65\n0.000079 3\n0.128083 28\n0.167971 28\n0.152249 28\n0.151811 26\n0.079983 21\n0.000060 28\n0.168295 3\n0.119950 28\n0.119510 28\n0.136324 28\n0.135990 26\n0.064085 21\n0.000047 65\n0.529644 66\n0.147040 28\n1.746544 28\n0.287987 66\n0.234895 65\n0.131955 3\n0.262409 37\n0.315425 4\n0.499887 4\n0.076348 8\n0.023845 1\n0.049672 4\n0.050638 37\n0.050809 4\n0.050013 4\n0.049682 8\n0.132777 80\n0.616374 137\n0.000035 23\n0.096175 145\n0.000033 28\n0.240098 77\n0.215890 137\n0.000035 23\n0.103684 145\n0.000113 65\n0.385668 66\n0.147264 3\n0.490368 28\n0.279849 3\n0.040474 1\n0.559686 8\n0.087704 51\n0.664680 3\n0.063550 206\n0.176405 133\n0.506429 41\n0.821662 41\n0.103664 41\n0.152420 41\n1.671859 57\n0.239927 70\n0.448199 8\n0.122704 28\n0.229125 28\n0.167446 28\n0.097038 28\n0.230939 3\n0.234251 51\n0.109884 3\n0.191593 206\n0.096641 41\n0.843963 41\n0.268094 41\n0.231983 41\n0.375978 57\n0.160208 112\n0.557676 106\n0.034400 65\n0.013445 68\n0.301512 148\n0.206110 848\n0.000047 285\n0.000028 458\n0.000725 65\n0.170928 65\n0.424154 408\n0.507735 206\n0.000051 65\n0.428525 65\n0.175736 65\n0.152038 65\n0.161363 66\n0.174461 65\n0.592276 65\n0.175862 65\n0.159756 39\n0.180133 548\n0.000075 438\n0.000731 65\n0.547360 3\n0.311616 3\n0.501748 3\n0.050759 3\n0.050656 3\n0.051305 2\n0.050640 1\n0.050753 65\n0.240108 24\n0.498579 59\n0.000101 45\n3.604060 45\n0.280450 3\n0.244281 3\n0.391997 32\n0.779887 2\n0.435977 1\n0.160031 3\n0.135905 3\n0.497228 44\n0.423132 8\n0.343699 32\n0.838379 32\n0.199824 32\n0.136081 32\n0.079833 32\n0.288101 65\n0.541939 64\n0.496606 64\n0.050011 66\n0.050107 65\n0.049801 65\n0.050301 65\n0.050910 60\n0.257894 60\n0.212409 807\n0.000054 65\n0.000080 117\n0.000734 65\n1.626143 65\n0.271839 65\n0.247861 65\n0.183924 63\n0.176460 65\n0.151755 65\n0.167760 1\n0.287227 1\n0.500147 1\n0.049872 1\n0.050313 1\n0.050648 1\n0.051716 1\n0.050047 1\n0.050383 1\n0.050997 1\n0.050834 1\n0.049814 1\n0.237214 45\n0.456160 45\n0.138941 45\n0.335757 32\n0.616117 45\n0.079982 3\n0.341325 2\n0.184218 1\n0.639707 1\n0.143754 1\n0.176211 1\n0.167787 1\n0.167886 3\n0.536135 3\n0.168126 3\n0.167917 3\n0.159986 2\n0.159994 1\n0.503908 1\n0.176066 32\n0.722801 3\n0.357199 3\n0.159809 3\n0.120069 3\n0.509366 42\n0.366179 40\n0.127406 40\n0.112375 40\n0.095671 40\n0.202458 42\n0.315095 48\n0.346347 138\n0.107577 88\n0.844744 59\n0.360707 114\n0.269588 108\n0.040288 65\n0.012456 180\n0.283168 2\n0.222308 20\n0.121315 2\n0.167654 36\n0.302481 7\n0.000013 1737\n0.016300 326\n0.036307 81\n0.442329 81\n0.124423 81\n0.187239 81\n0.251401 7\n0.443496 52\n0.000070 34\n0.001585 117\n0.000033 148\n0.000062 189\n0.000367 96\n0.053169 98\n0.156945 18\n0.654829 23\n0.113263 1489\n2.434844 1\n1.004546 1\n0.499686 1\n0.050499 1\n0.050325 1\n0.050075 1\n0.050229 1\n0.051236 5\n4.621158 867\n0.000054 29\n0.000024 266\n0.000647 5\n0.802260 1061\n0.000520 63\n1.120762 3\n0.318432 3\n0.499776 3\n0.050043 63\n0.140120 3\n0.190093 3\n0.499755 3\n0.049941 2\n0.049809 1\n0.050210 3\n0.051240 3\n0.050612 3\n0.050265 3\n0.052356 3\n0.048503 3\n0.050298 2\n0.050898 1\n0.050863 3\n0.051011 3\n0.050930 3\n0.051336 3\n0.050851 3\n0.049886 3\n0.050702 2\n0.049837 1\n0.050277 3\n0.049584 3\n0.050698 3\n0.051087 3\n0.051182 3\n0.050750 3\n0.050760 2\n0.050203 1\n0.050847 3\n0.051222 3\n0.051588 68\n0.382854 45\n0.076922 114\n0.398900 108\n0.032140 64\n0.013353 181\n0.297399 2\n0.125763 20\n0.129710 2\n0.201448 36\n0.318483 7\n0.000012 1737\n0.016433 326\n0.036637 81\n0.388807 81\n0.176764 81\n0.132034 81\n0.132738 146\n0.142143 117\n1.024931 81\n0.193294 79\n0.198689 82\n0.192635 83\n0.127965 155\n0.063133 84\n0.062505 155\n0.125606 255\n0.258462 128\n0.202844 84\n0.197508 84\n0.133456 143\n0.128144 283\n0.064078 148\n0.311907 120\n0.187677 168\n0.249483 85\n0.191955 488\n0.190259 89\n0.446368 86\n0.254771 88\n0.129925 83\n0.190843 153\n0.127823 244\n0.512418 119\n0.338567 81\n0.206754 185\n0.130014 79\n0.063407 152\n0.510397 395\n0.066842 284\n0.260853 188\n1.396424 59\n0.252427 61\n0.565654 59\n0.695052 122\n0.125087 61\n0.438644 83\n0.063537 160\n0.252573 175\n4.081902 59\n0.062367 167\n0.435327 7\n6.365997 52\n0.000031 96\n0.051919 18\n0.442681 23\n0.153469 1488\n0.875157 99\n1.254414 773\n0.000162 29\n0.000341 109\n0.000528 155\n0.000035 57\n2.403436 59\n0.495247 65\n0.050228 65\n0.050163 65\n0.050583 65\n0.050823 66\n0.049760 65\n0.051008 65\n0.050194 65\n0.050247 65\n0.051299 65\n0.050390 64\n0.050301 60\n0.051407 64\n0.051202 64\n0.049970 65\n0.050456 61\n0.141772 1\n0.150397 64\n0.306419 7\n0.278428 1\n0.094586 66\n0.207764 30\n0.084747 30\n0.352286 55\n0.055855 30\n0.304202 22\n1.127860 1\n0.000077 1\n0.000050 1\n0.000045 21\n0.000061 30\n0.119914 30\n0.199908 30\n0.320131 32\n0.291833 28\n0.000124 37\n0.139913 30\n0.265395 30\n0.006890 30\n0.039607 33\n0.672580 33\n0.135977 33\n0.154686 30\n0.197219 53\n0.023592 30\n0.096325 30\n0.047840 30\n0.152363 30\n0.064504 57\n0.095328 30\n0.079848 30\n0.256607 30\n0.095470 30\n0.168170 30\n0.055902 30\n0.024219 30\n0.064178 30\n0.137207 114\n0.563078 108\n0.097719 64\n0.013134 75\n4.403338 64\n0.497180 63\n0.049980 64\n0.049901 65\n0.049931 65\n0.049821 65\n0.050993 65\n0.050215 65\n0.051228 65\n0.049886 66\n1.170203 62\n0.704073 65\n0.007786 1\n0.255112 65\n0.357414 1\n0.314608 65\n0.037536 65\n0.171455 65\n0.535956 1\n0.494886 65\n5.782064 65\n0.495021 65\n0.049900 65\n0.049748 47\n0.062541 625\n0.000039 72\n0.000035 344\n0.000669 64\n0.038586 64\n0.049915 68\n3.141844 44\n0.513273 135\n0.001750 2\n0.278081 20\n0.161420 2\n0.296253 36\n0.311047 7\n0.000011 1737\n0.016803 326\n0.036923 81\n0.370505 81\n0.190724 81\n0.190926 76\n0.255357 151\n0.193014 117\n1.405327 81\n0.320258 209\n0.189193 167\n0.189806 154\n0.826291 83\n0.183578 84\n0.124954 84\n0.190065 155\n0.127614 255\n0.193985 128\n0.261871 84\n0.131903 84\n0.137901 143\n0.128999 283\n0.126892 148\n0.310075 125\n0.188481 89\n0.186363 166\n0.432678 83\n0.317597 485\n0.413276 88\n0.223872 153\n0.195506 244\n0.198392 119\n0.268602 81\n0.199085 79\n0.134371 139\n0.064350 311\n0.321600 145\n0.461768 58\n0.195020 60\n0.578991 155\n0.321487 189\n0.062774 187\n0.810614 61\n0.063511 189\n0.503393 304\n5.380403 48\n0.063653 48\n0.063943 48\n0.064072 48\n0.063699 48\n0.063693 48\n0.063480 48\n0.063304 48\n0.064444 48\n0.065171 40\n0.063362 38\n0.063154 38\n0.063133 38\n0.063796 38\n0.063045 38\n0.063151 38\n0.063207 38\n0.063239 38\n0.063221 38\n0.063233 38\n0.063617 69\n0.063392 38\n0.063623 38\n0.066872 38\n0.064681 38\n0.063881 38\n0.064414 38\n0.064787 38\n0.063708 38\n0.063616 38\n0.063178 38\n0.063136 38\n0.062676 38\n0.063376 38\n0.062906 38\n0.063770 130\n0.064817 38\n0.063644 38\n0.064827 89\n0.063717 38\n0.063972 38\n0.063314 38\n0.063596 38\n0.063012 38\n0.062758 38\n0.062652 38\n0.062748 38\n0.063241 38\n0.063375 38\n0.063371 38\n0.062626 38\n0.063503 38\n0.062569 38\n0.062312 38\n0.062882 38\n0.062020 38\n0.062638 38\n0.062988 38\n0.063604 38\n0.063524 38\n0.063566 38\n0.062807 38\n0.064161 38\n0.062686 38\n0.062892 38\n0.063106 38\n0.062644 38\n0.065752 38\n0.064170 38\n0.063746 38\n0.062326 69\n0.062852 38\n0.063293 7\n2.410104 52\n0.000034 96\n0.055361 18\n0.377308 23\n0.129430 33\n0.513549 125\n0.001153 860\n0.000320 489\n0.000318 64\n1.463788 64\n0.497214 64\n0.051151 64\n0.050890 63\n0.051405 63\n0.055579 63\n0.049606 63\n0.050419 63\n0.051605 64\n0.050560 62\n0.050543 61\n0.049685 1276\n0.056752 64\n0.043573 64\n0.050164 63\n0.050418 63\n0.050241 63\n0.050423 63\n0.051418 64\n0.052089 63\n0.050043 62\n0.749416 61\n0.336648 62\n3.375455 63\n0.175997 63\n0.176283 7\n0.471728 24\n2.815115 147\n0.000037 64\n0.919355 114\n0.505812 108\n0.041345 64\n0.014487 24\n3.254779 58\n0.000097 28\n0.087086 28\n0.868633 1\n1.016493 49\n0.264044 18\n0.503895 21\n0.000029 1\n0.127826 28\n0.663802 28\n0.304152 28\n0.016048 28\n0.136051 28\n0.072083 3\n0.319957 57\n0.136063 2\n0.096383 151\n0.472150 7\n0.170502 28\n0.204682 28\n0.127995 53\n0.047933 28\n0.464127 28\n0.328020 4\n0.264172 4\n0.119810 34\n0.280006 28\n0.431950 28\n0.016013 28\n0.160050 28\n0.063883 3\n0.160078 57\n0.170587 64\n0.629726 114\n0.645219 108\n0.046567 64\n0.013541 74\n0.442408 65\n7.540129 7\n0.220926 136\n0.228156 7\n0.082253 28\n0.260561 28\n0.248390 28\n0.184312 28\n0.543514 28\n0.319769 3\n0.128313 66\n0.248272 3\n0.119991 28\n4.295999 28\n0.191850 28\n0.055920 55\n0.128522 28\n0.079813 4\n0.760639 37\n0.151498 4\n0.191997 4\n0.447641 8\n0.152561 28\n0.463755 28\n0.251612 28\n0.005511 4\n0.454889 4\n0.095900 28\n0.079430 28\n0.120417 55\n0.097840 28\n0.086150 28\n0.120257 28\n0.471920 28\n0.168123 28\n0.079850 28\n0.160010 28\n0.224150 28\n0.039743 28\n0.144236 28\n0.088183 28\n0.255836 28\n0.143967 28\n0.128061 50\n0.280293 54\n0.507892 66\n0.000048 66\n2.012319 4\n0.500506 4\n0.049724 4\n0.054014 4\n0.050136 4\n0.049745 4\n0.050033 4\n0.050068 4\n0.078053 4\n0.022281 4\n0.049552 4\n0.050065 4\n0.131563 28\n0.208276 28\n0.039086 28\n0.192199 28\n0.135956 28\n0.008010 28\n0.400115 27\n0.296119 21\n0.000030 28\n1.183908 35\n0.107158 28\n0.000042 7\n0.887641 114\n0.033574 108\n0.041328 64\n0.012608 105\n0.508949 145\n0.000049 74\n0.047210 65\n1.084380 28\n0.212627 28\n0.104259 55\n0.087756 28\n0.095995 28\n0.087840 28\n0.160334 28\n0.071964 28\n0.111704 28\n0.104045 28\n0.192974 28\n0.039037 28\n0.112441 28\n0.083287 28\n0.204663 28\n0.216045 28\n0.104462 50\n0.255303 38\n0.509010 67\n0.000045 28\n0.211207 28\n0.135534 28\n0.136892 28\n0.175584 28\n0.175603 35\n0.316641 28\n0.000099 64\n0.482655 34\n0.664823 22\n0.000025 28\n0.295860 28\n0.167858 28\n0.111859 55\n0.088222 28\n0.120110 56\n0.510681 145\n0.000043 28\n5.713801 28\n0.032574 28\n0.150762 28\n0.391992 1\n0.339619 64\n0.125000 1\n0.122954 1\n0.510778 1\n0.040985 1\n0.050975 1\n0.051084 1\n0.049800 1\n0.051209 1\n0.149161 31\n0.212767 64\n0.287116 2\n0.148729 28\n0.964180 28\n0.288653 28\n0.031137 28\n0.216148 4\n0.442394 28\n0.150203 28\n0.071899 28\n0.239364 28\n0.200057 28\n0.144135 46\n1.159855 97\n0.509459 28\n0.170590 28\n0.095977 28\n0.184005 4\n0.456071 28\n0.247956 31\n0.364694 27\n0.000116 64\n0.515155 64\n0.444219 56\n0.510533 145\n0.000113 152\n0.413490 7\n0.258859 28\n0.620105 51\n0.071986 2\n0.136434 28\n0.471736 28\n0.239868 28\n0.200353 28\n0.296456 28\n0.263342 28\n0.017899 28\n0.110164 28\n0.056065 1\n0.275488 28\n0.036361 28\n0.095782 53\n0.072607 3\n0.095793 28\n0.160035 28\n0.103905 53\n0.096055 34\n0.224312 28\n0.264029 28\n0.032439 28\n0.103403 28\n0.088438 28\n0.203908 65\n0.420280 1\n0.178426 13\n0.129032 65\n0.188050 1\n0.251142 13\n0.207978 65\n0.332942 8\n0.235909 64\n1.340367 7\n0.459419 114\n0.592823 108\n0.030697 64\n0.013098 21\n1.367193 912\n0.000049 2\n0.000027 45\n0.000025 563\n0.000587 201\n0.620867 770\n0.000051 93\n0.000128 118\n0.000032 199\n0.000329 4\n0.261582 851\n0.000055 244\n0.000737 70\n0.380772 836\n0.000049 469\n0.000682 97\n0.452871 1\n0.000079 115\n0.000053 1\n0.000044 42\n0.000046 1\n0.000046 53\n0.000047 1\n0.000308 40\n0.000048 1\n0.000080 86\n0.000144 1\n0.000125 89\n0.000133 1\n0.000130 296\n0.000153 1\n0.000097 39\n0.000156 1\n0.000127 82\n0.000233 25\n0.000403 177\n0.000037 272\n0.000205 110\n0.630287 828\n0.000054 208\n0.000029 41\n0.000027 314\n0.000551 73\n0.423620 1939\n0.001818 962\n0.623085 1268\n0.000617 161\n1.144423 869\n0.000049 193\n0.000071 512\n0.000763 97\n0.635013 811\n0.000117 212\n0.000028 453\n0.000635 88\n0.842216 829\n0.000041 81\n0.000076 147\n0.000493 3\n0.000454 314\n0.000031 95\n0.461282 854\n0.000053 133\n0.000028 15\n0.000576 69\n0.000027 85\n0.000062 70\n0.592588 640\n0.000097 274\n0.000079 412\n0.386557 480\n0.000047 338\n0.000321 221\n0.476388 764\n0.000051 229\n0.000556 83\n0.447324 408\n0.000042 50\n0.382654 65\n0.348935 940\n0.000121 225\n0.000041 255\n0.139094 655\n0.000052 2\n0.000025 332\n0.000550 5\n0.159184 1321\n0.000432 98\n0.168686 667\n0.000049 282\n0.000619 66\n0.191988 884\n0.000089 366\n0.000711 166\n0.183820 857\n0.000096 552\n0.000779 103\n0.200161 912\n0.000150 666\n0.000625 114\n0.200602 815\n0.000042 1006\n0.000735 222\n0.000034 553\n0.205886 395\n0.000045 1121\n0.000648 30\n0.318587 872\n0.000051 711\n0.000577 266\n0.414281 665\n0.000051 153\n0.000075 331\n0.000743 129\n0.477750 754\n0.000113 442\n0.000078 39\n0.440323 813\n0.000049 281\n0.000572 5\n0.481104 946\n0.000050 410\n0.000808 209\n0.471338 714\n0.000108 326\n0.000030 284\n0.000607 419\n0.485435 528\n0.000044 81\n0.000074 459\n0.000768 64\n2.816772 64\n0.495164 64\n0.050295 64\n0.049771 64\n0.050218 64\n0.049951 64\n0.050199 64\n0.051056 65\n0.051176 64\n0.050646 64\n0.051182 64\n0.051223 63\n0.049346 63\n0.051438 63\n0.050876 63\n0.498595 3\n0.462963 3\n0.500509 3\n0.050561 3\n0.050291 3\n0.050794 3\n0.051076 2\n0.056181 1\n0.050770 3\n0.050839 3\n0.050375 3\n0.050924 3\n0.050467 3\n0.050571 3\n0.050496 2\n0.051619 1\n0.050618 3\n0.050510 3\n0.050462 3\n0.050995 3\n0.052065 3\n0.049930 3\n0.049922 2\n0.049968 68\n2.853490 49\n0.752961 109\n0.004152 17\n0.587465 114\n0.041923 108\n0.041646 64\n0.013813 214\n0.490438 708\n0.000040 329\n0.000555 300\n0.000063 274\n0.573617 726\n0.000085 386\n0.000833 62\n0.854507 63\n0.500594 63\n0.050348 64\n0.051592 63\n0.050535 63\n0.050632 63\n0.050619 64\n0.421243 8\n0.223996 25\n0.674703 149\n0.000042 47\n0.714634 109\n0.001696 15\n1.088306 64\n0.620761 63\n0.220585 64\n0.271383 64\n0.216374 34\n0.358352 31\n0.167143 31\n0.160157 31\n0.127804 8\n0.217757 4\n0.374367 1\n0.536988 258\n0.603006 32\n1.628686 1\n0.664373 1\n0.152014 1\n0.143920 32\n0.352314 32\n0.207710 45\n0.151930 3\n0.431998 3\n0.168087 3\n0.192146 3\n1.480292 1\n0.231772 1\n0.191720 1\n0.103970 1\n0.145205 49\n1.254627 49\n0.152378 65\n1.324610 1\n0.315177 48\n0.430964 48\n0.112165 45\n0.111677 47\n0.295897 47\n0.151934 3\n0.721739 65\n0.389248 3\n0.362754 2\n0.199679 15\n1.287786 30\n0.000105 8\n0.329075 19\n0.511560 56\n0.000036 28\n0.189036 27\n0.000034 8\n0.562635 1\n0.499945 1\n0.049780 1\n0.050343 1\n0.049843 1\n0.050091 1\n0.050193 1\n0.049819 1\n0.049588 1\n0.050364 1\n0.050188 1\n0.049863 1\n0.049619 1\n0.050069 1\n0.050311 1\n0.049817 104\n0.053662 18\n0.047618 1\n0.049993 1\n0.050577 1\n0.050284 1\n0.050972 1\n0.051689 1\n0.050170 1\n0.050690 1\n0.050834 1\n0.050913 1\n0.050525 1\n0.051420 1\n0.050498 1\n0.050127 1\n0.051160 32\n0.515484 121\n0.000045 65\n2.686387 28\n1.121707 28\n1.575763 30\n0.053840 4\n1.001965 64\n4.695010 65\n0.516076 1\n0.230837 63\n0.357357 29\n0.000035 8\n0.714721 1\n0.499833 1\n0.049936 1\n0.050529 1\n0.050120 1\n0.050100 1\n0.050398 1\n0.050861 1\n0.051363 1\n0.050827 1\n0.050595 1\n0.049389 1\n0.050755 1\n0.049822 1\n0.050159 1\n0.050513 1\n0.050074 1\n0.050712 1\n0.050187 1\n0.050359 1\n0.049888 1\n0.050348 1\n0.050838 1\n0.051224 1\n0.050893 1\n0.051420 1\n0.050127 1\n0.050667 1\n0.050730 1\n0.051047 1\n0.049791 3\n1.780434 3\n0.500035 2\n0.050746 1\n0.053813 3\n0.050113 3\n0.051181 3\n0.049774 3\n0.556130 31\n0.206787 32\n0.088803 3\n0.144354 2\n0.151899 31\n0.286981 32\n0.088578 3\n0.320745 3\n0.500064 3\n0.049737 3\n0.050033 3\n0.049799 3\n0.050321 2\n0.050288 31\n0.352768 31\n0.111469 31\n0.136028 32\n0.088627 32\n0.087621 32\n0.080181 115\n0.666506 109\n0.053836 65\n0.013614 75\n0.800994 64\n4.419187 25\n0.650284 149\n0.000038 2\n1.293504 28\n0.450947 3\n0.191589 45\n2.416263 3\n0.095617 64\n10.305057 65\n0.532172 62\n0.302789 29\n0.000089 107\n1.014645 18\n3.682020 1\n0.499675 1\n0.050075 1\n0.049899 1\n0.049729 1\n0.050093 1\n0.050143 1\n0.050079 1\n0.053380 1\n0.050489 1\n0.050835 1\n0.050583 1\n0.049698 1\n0.049969 1\n0.050067 1\n0.049691 1\n0.050919 1\n0.050664 1\n0.050985 1\n0.050872 1\n0.049155 1\n0.050800 1\n0.050654 1\n0.051117 1\n0.050352 1\n0.050951 1\n0.050392 1\n0.050488 1\n0.051048 1\n0.050954 1\n0.051017 1\n0.051239 1\n0.050832 1\n0.051162 1\n0.050905 1\n0.050931 1\n0.051386 1\n0.050415 45\n0.362113 5\n0.396622 218\n0.347947 2\n0.130451 28\n0.301018 28\n0.071361 4\n0.768893 28\n0.087282 3\n0.319980 47\n0.192206 3\n0.320251 64\n4.721427 29\n0.000032 8\n1.002064 6\n0.324958 41\n0.000108 1\n0.363215 3\n0.272262 3\n0.499830 3\n0.049761 3\n0.049872 3\n0.050153 3\n0.050957 2\n0.051047 1\n0.050176 3\n0.050521 3\n0.050248 3\n0.050238 3\n0.051293 3\n0.050586 3\n0.050241 2\n0.050857 1\n0.259927 3\n0.175851 3\n0.168308 3\n0.144086 3\n0.151948 3\n0.136015 5\n0.509286 73\n0.000048 13\n0.014890 45\n0.000055 65\n0.384840 5\n0.283633 33\n0.509614 124\n0.000045 193\n1.269430 2\n0.386883 28\n5.132978 51\n0.039319 3\n0.183927 28\n0.112034 28\n0.080122 3\n0.200457 28\n0.311507 1\n0.199768 28\n0.379034 28\n0.092837 53\n0.080100 34\n0.360323 28\n0.311890 28\n0.032476 28\n0.151568 28\n0.152151 28\n0.535937 28\n0.231891 66\n0.192287 28\n1.139479 193\n0.276861 8\n0.116206 28\n0.659162 28\n0.071801 2\n0.297212 47\n0.495360 3\n0.063376 28\n0.160358 28\n0.160004 53\n0.056152 34\n0.415900 28\n0.288068 28\n0.007879 28\n0.136159 28\n0.136080 28\n0.224119 28\n0.231974 28\n0.599930 115\n0.894046 109\n0.031720 65\n0.013170 72\n0.486449 1\n3.035195 7\n12.024820 25\n0.487754 149\n0.000079 2\n0.174818 4\n2.220420 2\n0.256566 4\n0.176071 1\n0.167428 251\n0.312947 65\n2.160413 56\n0.000991 47\n0.001385 75\n0.193296 1\n2.423118 32\n0.764483 61\n0.506796 8\n0.065381 1\n0.119391 1\n0.255872 32\n0.940391 32\n0.344088 35\n1.471994 32\n0.279879 32\n0.079811 35\n0.552453 35\n0.119702 32\n0.087689 32\n0.016289 32\n0.040008 65\n0.850444 65\n0.114678 62\n0.151793 62\n0.143882 65\n0.167857 1\n0.415189 1\n0.500010 1\n0.054722 1\n0.050371 1\n0.050368 1\n0.050135 1\n0.049925 1\n0.050219 1\n0.050352 1\n0.050442 1\n0.050581 1\n0.050577 1\n0.049793 1\n0.050747 1\n0.050531 1\n0.049838 1\n0.049904 1\n0.050301 1\n0.050432 1\n0.050161 1\n0.050687 1\n0.050453 1\n0.050577 1\n0.050800 1\n0.050872 1\n0.051228 1\n0.050514 1\n0.050314 1\n0.049487 1\n0.050753 1\n0.051045 1\n0.050688 1\n0.050554 1\n0.050288 1\n0.049947 1\n0.051269 1\n0.050737 1\n0.050671 1\n0.050928 1\n0.212414 31\n0.196171 31\n0.294863 45\n0.120316 45\n0.015431 45\n0.080355 65\n0.296937 65\n0.148914 3\n0.247283 31\n0.235864 31\n0.135962 45\n0.095188 45\n0.024258 45\n0.071776 65\n0.169931 1\n0.138585 1\n0.152352 32\n0.291156 32\n0.119961 32\n0.087604 32\n0.016218 32\n0.056048 65\n0.281373 65\n0.132310 1\n0.263084 67\n0.628568 318\n0.136214 112\n0.212701 106\n0.042013 64\n0.015368 179\n10.638511 2\n0.334090 20\n0.137354 2\n0.209661 36\n0.288785 342\n0.000270 96\n0.015337 18\n1.028911 23\n0.145406 1962\n0.419623 64\n3.008562 64\n0.147813 64\n2.415897 8\n0.159544 65\n0.388407 8\n0.188135 65\n0.300558 4\n0.171610 66\n0.841653 8\n0.517245 115\n0.041664 109\n0.030941 65\n0.014337 31\n0.507820 103\n0.000050 75\n0.116026 66\n1.257551 8\n0.487469 115\n0.049361 109\n0.035359 65\n0.014002 181\n0.294592 2\n0.198107 20\n0.121347 2\n0.207838 36\n0.302308 365\n0.000181 66\n0.000180 2\n0.000010 96\n0.015755 18\n0.664440 23\n0.129568 33\n1.641253 125\n0.002367 921\n0.000371 577\n0.000292 376\n0.000152 69\n6.706836 8\n1.327018 1\n0.000194 1\n0.000052 1\n0.000048 1\n0.000053 22\n0.000054 20\n0.327194 22\n0.000054 8\n1.001938 4\n0.356631 4\n3.739512 1\n0.746332 30\n1.145588 8\n0.775887 39\n0.000033 19\n0.508988 51\n0.000045 1\n0.355060 11\n0.896293 44\n0.000039 8\n0.594716 115\n0.065487 109\n0.035712 65\n0.014313 32\n0.510041 103\n0.000052 75\n0.084146 181\n2.651220 2\n0.198313 20\n0.121725 2\n0.193363 36\n0.362509 7\n0.000013 1737\n0.015751 326\n0.037334 81\n0.597848 81\n0.130402 81\n0.119977 81\n0.190295 146\n0.125827 122\n0.811884 79\n0.187482 82\n0.124883 83\n0.124166 83\n0.188672 83\n0.125830 148\n0.125973 155\n0.123809 255\n0.375732 128\n0.258683 84\n0.128649 84\n0.128206 143\n0.128506 283\n0.187189 148\n0.552930 125\n0.181205 89\n0.178523 89\n0.119867 154\n0.300805 123\n0.426710 82\n0.126310 83\n0.181867 90\n0.241734 167\n0.242492 84\n0.433713 484\n0.562058 86\n0.184559 158\n0.127526 244\n0.319362 124\n0.261979 79\n0.196715 76\n0.066401 139\n0.128281 311\n0.250241 106\n0.705560 7\n0.312573 52\n0.000029 36\n0.001689 403\n0.000039 70\n0.000025 2\n0.000023 96\n0.051722 18\n0.770444 23\n0.121469 2031\n1.491783 65\n0.713951 65\n0.162951 65\n0.183583 65\n0.192257 64\n0.200073 64\n0.183715 64\n0.849664 1\n0.189175 1\n0.501593 1\n0.048363 1\n0.050710 1\n0.050440 1\n0.049753 1\n0.051051 1\n0.050192 1\n0.050845 1\n0.049830 1\n0.050032 1\n0.050244 1\n0.049692 1\n0.050129 1\n0.049951 1\n0.050253 1\n0.050681 1\n0.050355 1\n0.050317 1\n0.050439 1\n0.051227 1\n0.051260 1\n0.050978 64\n0.365199 64\n0.285370 64\n0.760325 64\n0.208074 64\n0.184223 64\n0.527233 64\n0.424423 64\n4.624117 1\n0.126565 1\n0.500281 1\n0.049761 1\n0.050449 1\n0.051393 1\n0.049974 1\n0.050766 1\n0.050411 1\n0.049908 1\n0.049865 1\n0.050203 68\n0.455972 31\n0.138413 31\n0.175870 31\n0.160258 31\n0.168801 31\n0.151222 31\n0.144017 64\n0.233779 31\n0.102984 31\n0.166920 31\n0.160245 31\n0.183772 31\n0.176780 31\n0.167403 31\n0.336360 64\n0.231738 3\n0.284805 2\n0.159933 1\n0.143879 31\n0.211628 31\n0.167783 31\n0.151747 31\n0.151776 31\n0.160418 31\n0.144405 31\n0.135467 3\n0.324708 3\n0.500138 3\n0.049652 3\n0.050176 3\n0.050242 3\n0.052403 44\n0.325019 42\n0.127837 40\n0.160148 38\n0.143761 36\n0.168749 34\n0.151556 32\n0.151858 77\n2.680460 17\n0.219903 79\n0.188067 17\n0.155991 81\n0.172251 17\n0.141118 83\n0.154820 17\n0.123579 85\n0.140024 17\n0.148102 87\n0.123959 17\n0.147957 88\n0.147967 17\n0.108220 82\n0.163645 17\n0.116210 79\n0.172013 17\n0.139909 79\n0.172211 17\n0.116232 79\n0.179657 17\n0.107841 46\n0.162002 33\n0.003000 17\n0.147372 79\n0.148022 17\n0.147920 79\n0.155749 17\n0.140072 134\n0.148168 17\n0.164164 92\n0.139671 17\n0.132095 92\n0.156075 17\n0.129802 92\n0.142900 55\n0.002048 66\n0.113544 46\n0.163290 46\n0.003763 17\n0.120808 46\n0.138124 46\n0.002413 17\n0.163253 92\n0.123893 17\n0.140206 131\n0.115779 17\n0.157092 46\n0.138395 46\n0.001878 17\n0.122527 92\n0.172123 17\n0.107442 92\n0.148468 17\n0.124021 92\n0.164023 17\n0.115910 92\n0.148413 17\n0.107618 46\n0.810704 24\n0.006865 58\n0.000035 74\n1.178436 64\n0.141246 64\n0.920440 7\n0.271328 24\n0.590594 147\n0.000149 64\n0.159052 63\n0.828791 4\n0.175524 1\n0.175964 218\n0.193302 64\n0.736446 194\n0.303747 65\n0.115058 28\n0.220203 3\n0.111579 45\n0.800443 3\n0.040023 28\n0.071729 28\n0.040139 28\n0.136094 28\n0.536505 28\n0.383461 28\n0.071865 28\n0.096374 28\n0.119763 28\n0.728146 28\n0.871913 28\n0.099181 28\n0.148807 28\n0.216117 194\n0.232215 2\n0.098707 28\n0.172410 3\n0.151969 45\n0.080158 3\n0.080822 28\n0.719759 28\n0.120472 53\n0.023264 34\n0.344000 28\n0.295900 28\n0.152026 4\n0.472286 4\n0.311719 28\n0.248239 28\n0.056073 28\n0.159992 28\n0.176040 28\n0.552803 28\n0.199269 28\n0.103931 28\n0.087664 28\n0.087885 115\n0.382464 109\n0.054954 65\n0.014000 181\n0.234589 2\n0.269993 20\n0.137393 2\n0.143643 36\n0.338381 7\n0.000011 1737\n0.015880 326\n0.035824 81\n0.195128 81\n0.124199 81\n0.185835 81\n0.123989 146\n0.306811 122\n0.866065 79\n0.184599 82\n0.125361 83\n0.185802 83\n0.124278 83\n0.126117 148\n0.311417 155\n0.183012 255\n0.064983 355\n0.383366 75\n0.672246 149\n0.236689 255\n0.243303 128\n0.188944 84\n0.187621 84\n0.125757 143\n0.122595 283\n0.062732 148\n0.551736 125\n0.183944 89\n0.119620 89\n0.318795 165\n0.896797 83\n0.310013 484\n0.246591 153\n0.125569 244\n0.126434 119\n0.328267 81\n0.192422 185\n0.125149 311\n0.427704 145\n0.252081 7\n0.251251 52\n0.000032 36\n0.001592 211\n0.000033 145\n0.000064 93\n0.000378 96\n0.055170 18\n0.740584 23\n0.145452 33\n2.833338 125\n0.002347 927\n0.000472 564\n0.000347 384\n0.000263 65\n0.863011 65\n0.156212 65\n0.167847 65\n0.208115 1\n0.247058 1\n0.499896 1\n0.050416 1\n0.049518 1\n0.049973 1\n0.050116 1\n0.050811 1\n0.177436 24\n0.610277 59\n0.000066 66\n0.427744 66\n0.355227 32\n0.243921 45\n0.135576 66\n0.472901 1\n0.098710 45\n0.188561 3\n0.218829 37\n0.253014 66\n0.178114 37\n0.158168 115\n0.380388 109\n0.038818 65\n0.013434 181\n0.283103 2\n0.142154 20\n0.129597 2\n0.167710 36\n0.425091 7\n0.000011 1737\n0.016272 326\n0.036494 81\n0.163667 81\n0.132225 81\n0.135462 81\n0.194105 146\n0.126928 122\n0.127947 79\n0.131672 82\n0.127273 83\n0.127143 77\n0.196809 83\n0.063808 154\n0.188218 254\n0.383168 127\n0.334372 83\n0.135343 83\n0.135285 142\n0.064234 155\n0.189546 156\n0.371082 411\n0.453580 148\n0.310015 125\n0.187407 167\n0.187005 84\n0.187888 482\n0.251267 86\n0.251962 88\n0.187371 153\n0.187923 244\n0.131801 119\n0.268084 81\n0.199246 79\n0.132039 139\n0.063281 311\n0.446943 145\n0.325857 188\n0.194397 155\n0.828445 304\n4.122545 48\n0.064049 48\n0.063662 48\n0.063229 79\n0.063281 48\n0.062865 48\n0.064139 48\n0.064095 48\n0.063987 48\n0.064088 40\n0.063237 38\n0.063340 38\n0.063409 38\n0.062669 38\n0.062503 38\n0.062369 38\n0.062324 38\n0.064010 38\n0.063517 38\n0.063845 38\n0.064169 38\n0.064132 38\n0.063734 38\n0.062977 38\n0.064075 38\n0.063056 38\n0.063353 38\n0.063896 38\n0.064268 38\n0.063704 38\n0.063352 38\n0.063187 38\n0.063401 38\n0.063455 38\n0.062721 181\n0.062749 38\n0.062434 38\n0.062338 38\n0.063534 38\n0.063406 38\n0.063625 38\n0.063459 38\n0.063619 38\n0.062989 38\n0.063589 38\n0.063869 38\n0.063907 38\n0.063233 38\n0.063088 38\n0.062682 38\n0.062578 38\n0.062578 38\n0.063026 38\n0.062872 79\n0.063059 38\n0.063435 38\n0.062817 38\n0.062908 38\n0.062589 38\n0.063033 38\n0.063846 38\n0.063091 38\n0.063433 38\n0.062610 38\n0.063742 38\n0.063167 38\n0.063380 38\n0.063886 38\n0.063039 38\n0.063381 38\n0.063497 38\n0.063156 38\n0.063256 66\n2.007453 190\n1.196003 117\n1.239195 83\n0.309671 58\n0.367164 58\n3.058943 58\n3.078911 7\n2.450647 49\n0.000032 96\n0.054194 18\n2.074378 23\n0.169602 33\n0.418476 2000\n0.001769 102\n1.551311 29\n0.000033 1693\n0.488169 102\n1.631655 29\n0.000039 41\n0.403929 45\n0.200132 46\n0.327877 44\n0.456250 695\n0.417922 64\n0.527420 65\n0.431932 64\n0.127358 64\n0.353066 28\n0.478844 28\n0.288003 28\n0.055888 28\n0.015653 28\n0.152822 28\n0.071745 2\n0.119519 28\n0.104248 28\n0.080111 28\n0.071968 28\n0.015509 3\n0.128586 28\n0.127789 3\n0.135885 28\n0.095780 28\n0.120027 28\n0.112354 28\n0.096186 3\n0.071660 28\n0.055856 3\n0.128455 28\n0.119796 28\n0.096159 28\n0.071900 28\n0.151912 28\n0.071994 28\n0.168103 28\n0.136130 28\n0.119763 28\n0.040410 28\n0.223877 1\n0.095606 28\n0.080203 28\n0.079965 28\n0.192032 3\n0.072001 28\n0.152055 28\n0.047838 2\n0.169407 28\n0.222864 28\n0.063787 28\n0.087700 28\n0.072198 28\n0.152107 28\n0.055987 28\n0.047960 28\n0.104120 28\n0.087811 28\n0.056288 28\n0.063956 28\n0.136028 64\n0.648121 64\n0.080029 61\n1.416822 64\n0.254301 28\n0.632781 28\n0.191617 3\n0.119983 28\n0.152043 28\n0.104441 28\n0.095593 2\n0.128230 28\n0.056270 3\n0.271420 28\n0.175977 28\n0.120417 28\n0.072103 3\n0.103598 28\n0.232125 28\n0.047822 28\n0.152176 28\n0.095740 3\n0.200329 28\n0.184019 28\n0.055666 28\n0.144240 28\n0.007817 28\n0.120378 28\n0.287604 3\n0.048342 28\n0.200093 28\n0.143688 3\n0.079883 28\n0.103818 28\n0.088408 28\n0.255895 1\n0.264175 28\n0.135737 51\n0.120300 762\n0.924123 203\n0.000104 454\n2.398537 179\n0.000048 761\n0.576825 199\n0.000100 24\n0.248584 308\n0.000036 61\n0.000039 471\n0.742764 228\n0.000094 246\n0.158138 63\n0.912499 63\n0.157640 63\n0.191850 7\n0.184380 63\n2.728878 17\n0.686234 117\n0.065602 29\n0.000036 4\n0.902573 4\n0.500450 4\n0.049605 4\n0.050044 4\n0.049737 4\n0.050955 4\n0.051018 4\n0.050090 4\n0.050818 4\n0.050112 4\n0.050653 4\n0.050583 4\n0.049992 4\n0.050355 4\n0.050719 4\n0.051317 4\n0.050404 4\n0.050146 4\n0.051295 4\n0.051005 4\n0.050788 4\n0.050743 4\n0.121166 28\n0.256058 28\n0.039928 28\n0.368420 28\n0.135670 28\n0.208243 1\n1.805841 216\n0.054222 17\n3.475044 63\n0.249792 17\n0.470384 109\n0.434587 96\n0.003665 1\n1.105507 1\n0.176045 1\n0.127749 1\n0.064356 1\n0.431814 1\n0.039878 1\n0.136043 1\n0.215978 1\n0.191909 1\n0.087638 1\n0.120047 1\n0.112213 2\n0.241271 96\n0.014511 1\n0.128228 1\n0.120087 1\n0.056109 1\n0.112223 1\n0.079630 1\n0.104134 1\n0.144049 1\n0.111816 1\n0.023905 1\n0.168247 1\n0.007719 1\n0.240054 1\n0.160368 1\n0.119829 1\n0.095768 1\n0.208099 4\n0.896204 4\n0.127963 4\n0.151839 2\n0.323167 63\n0.055900 972\n0.004092 57\n0.619260 3\n0.429722 1\n1.063820 1\n0.176376 1\n0.023866 3\n0.336155 3\n0.127962 4\n0.119612 1\n0.215959 1\n0.079718 1\n0.128571 1\n0.079752 1\n0.168252 3\n0.368224 1\n0.095601 1\n0.008319 1\n0.087564 1\n0.056148 1\n0.152145 1\n0.039863 1\n0.184018 1\n0.248401 1\n0.007545 3\n0.424419 17\n0.207813 31\n0.274394 1\n0.125614 1\n0.767597 1\n0.064146 1\n1.560218 1\n0.167945 1\n0.112039 1\n0.056173 1\n0.103714 1\n0.128196 1\n0.239896 1\n0.128125 1\n0.103886 1\n0.111771 1\n0.584481 1\n0.119817 1\n0.047793 1\n0.111998 1\n0.136292 1\n0.039884 1\n0.056060 1\n0.240268 1\n0.063778 1\n0.119759 1\n0.071748 1\n0.072351 1\n0.119992 1\n0.119918 1\n0.096044 1\n0.208100 1\n0.079808 1\n0.384397 1\n0.232099 1\n0.031584 1\n0.256385 1\n0.144073 1\n3.055904 1\n0.216052 1\n0.143869 1\n0.071882 1\n0.112323 1\n0.207940 1\n0.207696 1\n0.120324 1\n0.023866 1\n0.136013 1\n0.232002 1\n0.071793 1\n0.128033 1\n0.136028 1\n0.496259 1\n0.151736 1\n0.064280 3\n0.312117 3\n0.127711 3\n0.120270 1\n0.127832 1\n0.039901 1\n0.143743 1\n0.056275 3\n0.287910 3\n0.128190 3\n0.136203 3\n0.119897 1\n0.095649 1\n0.136195 1\n0.023786 1\n0.096114 1\n0.176186 1\n0.071695 1\n0.135966 1\n0.104307 1\n0.064079 1\n0.151998 1\n0.039570 1\n0.136226 1\n0.103956 1\n0.080242 1\n0.119735 1\n0.272389 3\n0.112000 3\n0.151809 3\n0.120090 1\n0.081039 1\n0.054558 1\n0.064149 1\n0.159885 1\n0.056131 1\n0.031700 1\n0.152180 1\n0.064154 1\n0.144199 1\n0.184058 1\n0.047889 1\n0.032029 1\n0.152084 3\n0.375746 3\n0.120432 3\n0.111923 3\n0.143754 1\n0.095868 1\n0.103702 1\n0.048275 1\n0.159987 1\n0.224074 31\n0.290189 1\n0.093567 1\n0.295761 5\n0.384045 1\n0.208055 1\n0.072025 1\n10.104727 1\n0.159687 1\n0.319650 1\n0.031804 3\n0.368197 1\n0.215921 1\n0.047871 1\n0.368149 1\n0.208072 1\n0.216036 1\n0.055681 1\n0.072255 1\n0.063783 1\n0.104417 1\n0.127716 1\n0.135902 1\n0.088046 1\n0.056008 1\n0.216237 1\n0.152113 1\n0.023728 1\n0.103904 1\n0.071839 1\n0.080446 1\n0.087721 1\n0.120187 1\n0.080715 1\n0.086940 1\n0.112627 1\n0.119423 1\n0.136559 1\n0.143756 1\n0.104320 1\n0.087749 1\n0.063638 1\n0.072066 1\n0.144575 1\n0.159947 1\n0.008032 1\n0.224082 1\n0.135851 1\n0.047623 1\n0.296502 1\n0.151740 1\n0.047749 1\n0.096189 1\n0.103799 1\n0.032212 1\n0.272371 31\n0.290461 1\n0.133098 1\n0.887640 1\n0.103989 1\n1.728326 1\n0.143938 1\n0.088082 1\n0.023744 1\n0.120194 1\n0.048019 1\n0.159886 1\n0.120406 1\n0.039594 1\n0.096314 1\n0.175781 1\n0.071673 1\n0.056154 1\n0.160353 1\n0.063716 1\n0.136053 1\n0.064045 1\n0.104399 1\n1.399897 3\n0.392425 1\n0.175528 1\n0.103689 1\n0.048077 1\n0.168289 1\n0.080069 1\n0.127656 1\n0.248330 1\n0.087836 1\n0.168181 1\n0.055898 1\n0.039514 1\n0.160237 1\n0.032296 1\n0.032038 1\n0.119407 1\n0.568391 1\n0.048319 3\n0.335867 1\n0.095859 1\n0.271992 1\n0.152238 1\n0.191624 1\n0.128403 1\n0.095673 1\n0.032241 1\n0.095783 1\n0.064323 1\n0.152006 1\n0.071741 1\n0.079939 1\n0.080269 1\n0.295842 3\n0.385200 3\n0.159051 1\n0.335981 1\n0.047709 1\n0.272150 3\n0.392206 1\n0.175892 1\n0.167880 1\n0.088102 1\n0.071748 1\n0.096244 1\n0.167973 1\n0.087762 1\n0.096010 1\n0.112303 1\n0.087692 1\n0.096038 1\n0.136130 1\n0.328073 1\n0.143841 1\n0.095789 1\n0.079945 1\n0.176337 3\n0.456112 1\n0.063908 1\n0.111929 1\n0.087742 1\n0.080441 1\n0.159969 1\n0.143923 1\n0.064011 1\n0.127982 1\n0.112011 1\n0.087874 1\n0.192142 188\n11.648144 305\n0.264346 133\n0.394406 235\n0.008384 54\n0.005231 96\n0.002227 1\n0.508860 1\n1.080081 1\n0.103860 1\n0.048116 1\n0.183895 1\n0.168130 1\n0.095795 1\n0.064263 2\n0.201432 27\n0.675379 2\n0.000548 40\n0.001405 2\n0.000393 36\n0.000540 36\n0.001080 36\n0.000845 36\n0.000953 36\n0.001263 36\n0.001138 72\n0.000262 73\n0.000274 42\n0.000213 32\n0.000802 32\n0.000507 32\n0.000307 32\n0.000363 32\n0.001963 32\n0.000284 32\n0.000281 32\n0.000327 32\n0.000294 33\n0.000277 100\n0.001535 83\n0.556733 96\n0.002056 6\n","columns":80,"uname":"Linux beatrix 3.11.0-15-generic #23-Ubuntu SMP Mon Dec 9 18:16:27 UTC 2013 i686 athlon i686 GNU/Linux\n","recorded_at":"1389582234"}
